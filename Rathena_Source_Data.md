# rAthena Knowledge Base (Compact)

## @go

A lot of people like to change the @go command so that they can add in any new Custom Maps they like or even change the coordinates for old maps. This guide will show you how to add new maps to @go. However, it's extremely easy to change the coordinates of an existing map as well.

<h1>
Adding a New Map to @go

</h1>
Head on over to .../src/map/atcommand.c and search for @go so that you'll get this:

`Â /*==========================================`
`Â Â *Â @goÂ [city_numberÂ orÂ city_name]Â -Â UpdatedÂ byÂ Harbin`
`Â Â *------------------------------------------*/`
`Â ACMD_FUNC(go)`
`Â {`
`Â Â Â intÂ i;`
`Â Â Â intÂ town;`
`Â Â Â charÂ map_name[MAP_NAME_LENGTH];`
`Â Â Â intÂ m;`
`Â `
`Â Â Â constÂ structÂ {`
`Â Â Â Â Â Â Â charÂ map[MAP_NAME_LENGTH];`
`Â Â Â Â Â Â Â intÂ x,Â y;`
`Â Â Â }Â data[]Â =Â {`
`Â Â Â Â Â Â Â {Â MAP_PRONTERA,Â Â Â Â 156,Â 191Â },Â //Â Â 0=Prontera`
`Â Â Â Â Â Â Â {Â MAP_MORROC,Â Â Â Â Â Â 156,Â Â 93Â },Â //Â Â 1=Morroc`
`Â Â Â Â Â Â Â {Â MAP_GEFFEN,Â Â Â Â Â Â 119,Â Â 59Â },Â //Â Â 2=Geffen`
`Â Â Â Â Â Â Â {Â MAP_PAYON,Â Â Â Â Â Â Â 162,Â 233Â },Â //Â Â 3=Payon`
`Â Â Â Â Â Â Â {Â MAP_ALBERTA,Â Â Â Â Â 192,Â 147Â },Â //Â Â 4=Alberta`
`Â Â Â Â Â Â Â {Â MAP_IZLUDE,Â Â Â Â Â Â 128,Â 114Â },Â //Â Â 5=Izlude`
`Â Â Â Â Â Â Â {Â MAP_ALDEBARAN,Â Â Â 140,Â 131Â },Â //Â Â 6=AlÂ deÂ Baran`
`Â Â Â Â Â Â Â {Â MAP_LUTIE,Â Â Â Â Â Â Â 147,Â 134Â },Â //Â Â 7=Lutie`
`Â Â Â Â Â Â Â {Â MAP_COMODO,Â Â Â Â Â Â 209,Â 143Â },Â //Â Â 8=Comodo`
`Â Â Â Â Â Â Â {Â MAP_YUNO,Â Â Â Â Â Â Â Â 157,Â Â 51Â },Â //Â Â 9=Yuno`
`Â Â Â Â Â Â Â {Â MAP_AMATSU,Â Â Â Â Â Â 198,Â Â 84Â },Â //Â 10=Amatsu`
`Â Â Â Â Â Â Â {Â MAP_GONRYUN,Â Â Â Â Â 160,Â 120Â },Â //Â 11=Gonryun`
`Â Â Â Â Â Â Â {Â MAP_UMBALA,Â Â Â Â Â Â Â 89,Â 157Â },Â //Â 12=Umbala`
`Â Â Â Â Â Â Â {Â MAP_NIFLHEIM,Â Â Â Â Â 21,Â 153Â },Â //Â 13=Niflheim`
`Â Â Â Â Â Â Â {Â MAP_LOUYANG,Â Â Â Â Â 217,Â Â 40Â },Â //Â 14=Louyang`
`Â Â Â Â Â Â Â {Â MAP_NOVICE,Â Â Â Â Â Â Â 53,Â 111Â },Â //Â 15=TrainingÂ Grounds`
`Â Â Â Â Â Â Â {Â MAP_JAIL,Â Â Â Â Â Â Â Â Â 23,Â Â 61Â },Â //Â 16=Prison`
`Â Â Â Â Â Â Â {Â MAP_JAWAII,Â Â Â Â Â Â 249,Â 127Â },Â //Â 17=Jawaii`
`Â Â Â Â Â Â Â {Â MAP_AYOTHAYA,Â Â Â Â 151,Â 117Â },Â //Â 18=Ayothaya`
`Â Â Â Â Â Â Â {Â MAP_EINBROCH,Â Â Â Â Â 64,Â 200Â },Â //Â 19=Einbroch`
`Â Â Â Â Â Â Â {Â MAP_LIGHTHALZEN,Â 158,Â Â 92Â },Â //Â 20=Lighthalzen`
`Â Â Â Â Â Â Â {Â MAP_EINBECH,Â Â Â Â Â Â 70,Â Â 95Â },Â //Â 21=Einbech`
`Â Â Â Â Â Â Â {Â MAP_HUGEL,Â Â Â Â Â Â Â Â 96,Â 145Â },Â //Â 22=Hugel`
`Â Â Â Â Â Â Â {Â MAP_RACHEL,Â Â Â Â Â Â 130,Â 110Â },Â //Â 23=Rachel`
`Â Â Â Â Â Â Â {Â MAP_VEINS,Â Â Â Â Â Â Â 216,Â 123Â },Â //Â 24=Veins`
`Â Â Â Â Â Â Â {Â MAP_MOSCOVIA,Â Â Â Â 223,Â 184Â },Â //Â 25=Moscovia`
`Â Â Â Â Â Â Â {Â MAP_MIDCAMP,Â Â Â Â 180,Â 240Â },Â //Â 26=MidgardÂ Camp`
`Â Â Â Â Â Â Â {Â MAP_MANUK,Â Â Â Â Â Â Â 282,Â 138Â },Â //Â 27=Manuk`
`Â Â Â Â Â Â Â {Â MAP_SPLENDIDE,Â Â Â 197,Â 176Â },Â //Â 28=Splendide`
`Â Â Â Â Â Â Â {Â MAP_BRASILIS,Â Â Â Â 182,Â 239Â },Â //Â 29=Brasilis`
`Â Â Â Â Â Â Â {Â MAP_DICASTES,Â Â Â 198,Â 187Â },Â //Â 30=ElÂ Dicastes`
`Â Â Â Â Â Â Â {Â MAP_MORA,Â Â Â 44,Â 151Â },Â //Â 31=Mora`
`Â Â Â Â Â Â Â {Â MAP_DEWATA,Â Â Â 200,Â 180Â },Â //Â 32=Dewata`
`Â Â Â Â Â Â Â {Â MAP_MALANGDO,Â Â Â 140,Â 114Â },Â //Â 33=MalangdoÂ Island`
`Â Â Â Â Â Â Â {Â MAP_MALAYA,Â Â Â 242,Â 211Â },Â //Â 34=MalayaÂ Port`
`Â Â Â Â Â Â Â {Â MAP_ECLAGE,Â Â Â 110,Â 39Â },Â //Â 35=Eclage`
`Â Â Â };`

Now, for the purpose of this guide, I'll be adding Glast Heim as a map I want in my @go function. Since Eclage is the last map, I will add my new map after Eclage.

So, find:

`Â {Â MAP_ECLAGE,Â Â Â 110,Â 39Â },Â //Â 35=Eclage`

and I will add:

<tab><tab>`{Â MAP_GLAST_01,`<tab>`123,Â 234Â },Â //Â 36=GlastÂ Heim`

right after so that it would look like this (after I've **filled** in my **tabs**):

`Â {Â MAP_ECLAGE,Â Â Â 110,Â 39Â },Â //Â 35=Eclage`
`Â {Â MAP_GLAST_01,Â Â Â 123,Â 234Â },Â //Â 36=GlastÂ Heim`

Please note that the structure of it is as followed:

<tab><tab>`{Â MAP_MAPNAME,`<tab>`CoordinateÂ X,Â CoordinateÂ YÂ },Â //Â Number=theÂ locationÂ name`

**Note:** *As it's C language and not emulator's scripting language, <tab> mentioned above is not really needed. Tabs in the source is just to make the code visually more appealing.*

<h4>
Getting @go to Work

</h4>
To get the town name as well as with the number working, you need to scroll down a little bit till you see such code:

`//Â getÂ possibleÂ nameÂ ofÂ theÂ city`
`Â Â Â map_name[MAP_NAME_LENGTH-1]Â =Â '\0';`
`Â Â Â forÂ (iÂ =Â 0;Â map_name[i];Â i++)`
`Â Â Â Â Â Â Â map_name[i]Â =Â TOLOWER(map_name[i]);`
`Â Â Â //Â tryÂ toÂ identifyÂ theÂ mapÂ name`
`Â Â Â ifÂ (strncmp(map_name,Â "prontera",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 0;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "morocc",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 1;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "geffen",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 2;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "payon",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "paion",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 3;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "alberta",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 4;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "izlude",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "islude",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 5;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "aldebaran",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strcmp(map_name,Â Â "al")Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 6;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "lutie",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strcmp(map_name,Â Â "christmas")Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "xmas",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "x-mas",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 7;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "comodo",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 8;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "yuno",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 9;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "amatsu",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 10;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "gonryun",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 11;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "umbala",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 12;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "niflheim",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 13;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "louyang",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 14;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "new_1-1",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "startpoint",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "begining",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 15;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "sec_pri",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "prison",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "jails",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 16;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "jawaii",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "jawai",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 17;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "ayothaya",Â 3)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "ayotaya",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 18;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "einbroch",Â 5)Â ==Â 0Â ||`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â strncmp(map_name,Â "ainbroch",Â 5)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 19;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "lighthalzen",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 20;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "einbech",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 21;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "hugel",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 22;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "rachel",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 23;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "veins",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 24;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "moscovia",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 25;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "mid_camp",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 26;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "manuk",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 27;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "splendide",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 28;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "brasilis",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 29;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "dicastes01",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 30;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "mora",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 31;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "dewata",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 32;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "malangdo",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 33;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "malaya",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 34;`
`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "eclage",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 35;`
`Â Â Â `**`}`**

Before the last bracket, add the following:

`Â Â Â }Â elseÂ ifÂ (strncmp(map_name,Â "`<mapname>`",Â `<number of characters required>`)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â `<town number>`;`

Your "<mapname>" is your map's name while <number of characters required> is the number of characters of the name required to be typed so that the town is recognized in @go.

So, for my Glast Heim map, it would be:

`}Â elseÂ ifÂ (strncmp(map_name,Â "eclage",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 35;`
`}Â elseÂ ifÂ (strncmp(map_name,Â "glast_01",Â 3)Â ==Â 0)Â {`
`Â Â Â Â Â Â Â townÂ =Â 36;`
`Â Â Â }`

<h1>
Working with mapindex.h

</h1>
Now, moving forward. Back out from your .../src/map folder and go into .../src/common/mapindex.h. Find:

`//SomeÂ definitionsÂ forÂ theÂ mayorÂ cityÂ maps.`
`#defineÂ MAP_PRONTERAÂ "prontera"`
`#defineÂ MAP_GEFFENÂ "geffen"`
`#defineÂ MAP_MORROCÂ "morocc"`
`#defineÂ MAP_ALBERTAÂ "alberta"`
`#defineÂ MAP_PAYONÂ "payon"`
`#defineÂ MAP_IZLUDEÂ "izlude"`
`#defineÂ MAP_ALDEBARANÂ "aldebaran"`
`#defineÂ MAP_LUTIEÂ "xmas"`
`#defineÂ MAP_COMODOÂ "comodo"`
`#defineÂ MAP_YUNOÂ "yuno"`
`#defineÂ MAP_AMATSUÂ "amatsu"`
`#defineÂ MAP_GONRYUNÂ "gonryun"`
`#defineÂ MAP_UMBALAÂ "umbala"`
`#defineÂ MAP_NIFLHEIMÂ "niflheim"`
`#defineÂ MAP_LOUYANGÂ "louyang"`
`#defineÂ MAP_JAWAIIÂ "jawaii"`
`#defineÂ MAP_AYOTHAYAÂ "ayothaya"`
`#defineÂ MAP_EINBROCHÂ "einbroch"`
`#defineÂ MAP_LIGHTHALZENÂ "lighthalzen"`
`#defineÂ MAP_EINBECHÂ "einbech"`
`#defineÂ MAP_HUGELÂ "hugel"`
`#defineÂ MAP_RACHELÂ "rachel"`
`#defineÂ MAP_VEINSÂ "veins"`
`#defineÂ MAP_JAILÂ "sec_pri"`
`#defineÂ MAP_NOVICEÂ "new_1-1"`
`#defineÂ MAP_MOSCOVIAÂ "moscovia"`
`#defineÂ MAP_MIDCAMPÂ "mid_camp"`
`#defineÂ MAP_MANUKÂ "manuk"`
`#defineÂ MAP_SPLENDIDEÂ "splendide"`
`#defineÂ MAP_BRASILISÂ "brasilis"`
`#defineÂ MAP_DICASTESÂ "dicastes01"`
`#defineÂ MAP_MORAÂ "mora"`
`#defineÂ MAP_DEWATAÂ "dewata"`
`#defineÂ MAP_MALANGDOÂ "malangdo"`
`#defineÂ MAP_MALAYAÂ "malaya"`
`#defineÂ MAP_ECLAGEÂ "eclage"`

The structure for this is as followed:

`#defineÂ MAP_MAPNAMEÂ "mapname"`

In the case of me adding my map, I will do it as so:

`#defineÂ MAP_GLAST_01Â "glast_01"`

So that it would look like:

`#defineÂ MAP_ECLAGEÂ "eclage"`
`#defineÂ MAP_GLAST_01Â "glast_01"`

**Note**: There are no tabs

Now, save the source files and recompile the server. And you will have your own custom @go location.

<h1>
Additional Steps

</h1>
If you want your map to show up in @go when you do @go, you would need to add it to one more file and this file is called the [help.txt](https://rathena.svn.sourceforge.net/svnroot/rathena/trunk/conf/help.txt). You can find such file by heading to .../conf/help.txt. Search for **go:** so that you can find this code:

`go:Â "Params:Â `<number/city_name>`\n"Â "WarpsÂ youÂ toÂ aÂ city.\n"`
`Â Â Â "Â Â -3:Â (MemoÂ pointÂ 2)Â Â 14:Â louyangÂ Â Â Â Â Â Â Â Â 31:Â mora\n"`
`Â Â Â "Â Â -2:Â (MemoÂ pointÂ 1)Â Â 15:Â startÂ pointÂ Â Â Â Â 32:Â dewata\n"`
`Â Â Â "Â Â -1:Â (MemoÂ pointÂ 0)Â Â 16:Â prison/jailÂ Â Â Â Â 33:Â malangdoÂ island\n"`
`Â Â Â "Â Â Â 0:Â pronteraÂ Â Â Â Â Â Â Â 17:Â jawaiiÂ Â Â Â Â Â Â Â Â Â 34:Â malayaÂ port\n"`
`Â Â Â "Â Â Â 1:Â moroccÂ Â Â Â Â Â Â Â Â Â 18:Â ayothayaÂ Â Â Â Â Â Â Â 35:Â eclage\n"`
`Â Â Â "Â Â Â 2:Â geffenÂ Â Â Â Â Â Â Â Â Â 19:Â einbroch\n"`
`Â Â Â "Â Â Â 3:Â payonÂ Â Â Â Â Â Â Â Â Â Â 20:Â lighthalzen\n"`
`Â Â Â "Â Â Â 4:Â albertaÂ Â Â Â Â Â Â Â Â 21:Â einbech\n"`
`Â Â Â "Â Â Â 5:Â izludeÂ Â Â Â Â Â Â Â Â Â 22:Â hugel\n"`
`Â Â Â "Â Â Â 6:Â aldebaranÂ Â Â Â Â Â Â 23:Â rachel\n"`
`Â Â Â "Â Â Â 7:Â xmasÂ (lutie)Â Â Â Â 24:Â veins\n"`
`Â Â Â "Â Â Â 8:Â comodoÂ Â Â Â Â Â Â Â Â Â 25:Â moscovia\n"`
`Â Â Â "Â Â Â 9:Â yunoÂ Â Â Â Â Â Â Â Â Â Â Â 26:Â midgardÂ camp\n"`
`Â Â Â "Â Â 10:Â amatsuÂ Â Â Â Â Â Â Â Â Â 27:Â manuk\n"`
`Â Â Â "Â Â 11:Â gonryunÂ Â Â Â Â Â Â Â Â 28:Â splendide\n"`
`Â Â Â "Â Â 12:Â umbalaÂ Â Â Â Â Â Â Â Â Â 29:Â brasilis\n"`
`Â Â Â "Â Â 13:Â niflheimÂ Â Â Â Â Â Â Â 30:Â elÂ dicastes"`

Now, since I want to keep the structure of my maps still intact, I will add my new map right after Eclage once again. To do so, I will just expand the line where geffen and einbroch are by doing such:

`"Â Â Â 2:Â geffenÂ Â Â Â Â Â Â Â Â 19:Â einbrochÂ Â Â Â Â Â Â 36:Â glastÂ heim\n"`

So that after I'm done it would look like this:

`go:Â "Params:Â `<number/city_name>`\n"Â "WarpsÂ youÂ toÂ aÂ city.\n"`
`Â Â Â "Â Â -3:Â (MemoÂ pointÂ 2)Â Â 14:Â louyangÂ Â Â Â Â Â Â Â Â 31:Â mora\n"`
`Â Â Â "Â Â -2:Â (MemoÂ pointÂ 1)Â Â 15:Â startÂ pointÂ Â Â Â Â 32:Â dewata\n"`
`Â Â Â "Â Â -1:Â (MemoÂ pointÂ 0)Â Â 16:Â prison/jailÂ Â Â Â Â 33:Â malangdoÂ island\n"`
`Â Â Â "Â Â Â 0:Â pronteraÂ Â Â Â Â Â Â Â 17:Â jawaiiÂ Â Â Â Â Â Â Â Â Â 34:Â malayaÂ port\n"`
`Â Â Â "Â Â Â 1:Â moroccÂ Â Â Â Â Â Â Â Â Â 18:Â ayothayaÂ Â Â Â Â Â Â Â 35:Â eclage\n"`
`Â Â Â "Â Â Â 2:Â geffenÂ Â Â Â Â Â Â Â Â Â 19:Â einbrochÂ Â Â Â Â Â Â Â `**`36:` `glast` `heim\n"`**
`Â Â Â "Â Â Â 3:Â payonÂ Â Â Â Â Â Â Â Â Â Â 20:Â lighthalzen\n"`
`Â Â Â "Â Â Â 4:Â albertaÂ Â Â Â Â Â Â Â Â 21:Â einbech\n"`
`Â Â Â "Â Â Â 5:Â izludeÂ Â Â Â Â Â Â Â Â Â 22:Â hugel\n"`
`Â Â Â "Â Â Â 6:Â aldebaranÂ Â Â Â Â Â Â 23:Â rachel\n"`
`Â Â Â "Â Â Â 7:Â xmasÂ (lutie)Â Â Â Â 24:Â veins\n"`
`Â Â Â "Â Â Â 8:Â comodoÂ Â Â Â Â Â Â Â Â Â 25:Â moscovia\n"`
`Â Â Â "Â Â Â 9:Â yunoÂ Â Â Â Â Â Â Â Â Â Â Â 26:Â midgardÂ camp\n"`
`Â Â Â "Â Â 10:Â amatsuÂ Â Â Â Â Â Â Â Â Â 27:Â manuk\n"`
`Â Â Â "Â Â 11:Â gonryunÂ Â Â Â Â Â Â Â Â 28:Â splendide\n"`
`Â Â Â "Â Â 12:Â umbalaÂ Â Â Â Â Â Â Â Â Â 29:Â brasilis\n"`
`Â Â Â "Â Â 13:Â niflheimÂ Â Â Â Â Â Â Â 30:Â elÂ dicastes"`

**Note:** *Make sure that you align everything by adding spaces!* [Category:Source Snippets](/Category:Source_Snippets "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## @go_delay_when_hit

**This source snippet is for putting a delay in @go when a player receives a damage.**
*open **src/map/pc.h***

:\* find:**unsigned int canuseitem_tick; // \[Skotlex\]**

:\* then add below:*' unsigned int warpgodelay_tick;*'
*open **src/map/pc.c***

:\* find: **sd-&gt;canuseitem_tick = tick;**

:\* then add below:**sd-&gt;warpgodelay_tick = tick;**
*open **src/map/pc.c***

:\* find: **void pc_damage(struct map_session_data \*sd,struct block_list \*src,unsigned int hp, unsigned int sp)**

:\* then add this inside the function:



unsigned int tick = gettick();

int warpgodelaycd = 5000; //This is the delay in milliseconds you can set what ever delay you want

sd-&gt;warpgodelay_tick = tick+warpgodelaycd; //This is the timer

*open **src/map/atcommand.c***

:\* find:**ACMD_FUNC(go)**

:\* then add this inside the function: **unsigned int tick = gettick();**
We are still in the @go function

:\* scroll down until you find this inside the function:**nullpo_retr(-1, sd);**

:\* then add below:



if(DIFF_TICK(sd-&gt;warpgodelay_tick,tick)&gt;0)

{



//This is for computing the delay if the cooldown or delay is not yet finish restrict using @go

clif_displaymessage(fd,"There is a 5 seconds delay in using @go command");

return 0;

}

[Category:Source Snippets](/Category:Source_Snippets "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## @warp_Modification

In rAthena, warp system is meant for Game Masters by default. You can change this by heading over to your .../conf/[groups.conf](https://rathena.svn.sourceforge.net/svnroot/rathena/trunk/conf/groups.conf). What this guide is for is to help you put a message that says "Please click: Return to Save Point" when players are dead so that they can't use @go or @warp when they've died.

<h1>
Getting Started

</h1>
Lets get started. Head on over to .../src/map/atcommand.c and find:

`ACMD_FUNC(mapmove)`

Scroll down till you see this line:

`nullpo_retr(-1,Â sd);`
`Â Â Â Â memset(map_name,Â '\0',Â sizeof(map_name));`

Add this code right after:

`if(Â pc_isdead(sd)Â )Â {`
`Â Â Â clif_displaymessage(fd,Â "PleaseÂ click:Â ReturnÂ toÂ saveÂ point");`
`Â Â Â Â Â Â Â returnÂ -1;`
`}`

So that it would look like this:

`{`
`Â Â Â charÂ map_name[MAP_NAME_LENGTH_EXT];`
`Â Â Â unsignedÂ shortÂ mapindex;`
`Â Â Â shortÂ xÂ =Â 0,Â yÂ =Â 0;`
`Â Â Â intÂ mÂ =Â -1;`
`Â Â Â nullpo_retr(-1,Â sd);`
`Â Â Â memset(map_name,Â '\0',Â sizeof(map_name));`
`Â Â Â if(Â pc_isdead(sd)Â )Â {`
`Â Â Â Â clif_displaymessage(fd,Â "PleaseÂ click:Â ReturnÂ toÂ SaveÂ Point");`
`Â Â Â returnÂ -1;`
`Â Â Â }`
`Â Â Â ifÂ (!messageÂ ||Â !*messageÂ ||`
`Â Â Â Â Â Â Â (sscanf(message,Â "%15sÂ %hdÂ %hd",Â map_name,Â &x,Â &y)Â <Â 3Â &&`
`Â Â Â Â Â Â Â Â sscanf(message,Â "%15[^,],%hd,%hd",Â map_name,Â &x,Â &y)Â <Â 1))Â {`
`Â Â Â Â Â Â Â Â `
`Â Â Â Â Â Â Â Â Â Â Â clif_displaymessage(fd,Â "Please,Â enterÂ aÂ mapÂ (usage:Â @warp/@rura/@mapmoveÂ `<mapname>`Â `<x>`Â `<y>`).");`
`Â Â Â Â Â Â Â Â Â Â Â returnÂ -1;`
`Â Â Â }`

As mentioned before, this modification makes it so that when a player tries to warp, they will get a message stating: "Please Click: Return To Save Point" instead of being warped.

<h1>
@go Portion

</h1>
Still in .../src/map/atcommand.c, find:

`{Â MAP_ECLAGE,Â Â Â 110,Â 39Â },Â //Â 35=Eclage`

And then scroll down till you see this:

`memset(map_name,Â '\0',Â sizeof(map_name));`

And add this right after:

`if(Â pc_isdead(sd)Â )Â {`
`Â Â clif_displaymessage(fd,Â "PleaseÂ clickÂ ReturnÂ toÂ saveÂ point");`
`Â Â Â Â Â Â returnÂ -1;`
`}`

So that it would look like this:

`memset(map_name,Â '\0',Â sizeof(map_name));`
`if(Â pc_isdead(sd)Â )Â {`
`Â Â clif_displaymessage(fd,Â "PleaseÂ clickÂ ReturnÂ toÂ saveÂ point");`
`Â Â Â Â Â Â returnÂ -1;`
`}`
`memset(atcmd_output,Â '\0',Â sizeof(atcmd_output));`

[Category:Source Snippets](/Category:Source_Snippets "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## Activatepset

Syntax

Description
This command enables a previously defined for matching the public chat, against the patterns inside the set. This is required, when the set was previously disabled with [deactivatepset](/deactivatepset "wikilink") or newly created with [defpattern](/defpattern "wikilink").

Examples
`prontera,150,150,0Â scriptÂ Â StrangeÂ SpotÂ Â Â Â -1,{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "^808080YouÂ wonder,Â whatÂ thisÂ couldÂ beÂ for...^00000";`
`Â Â Â Â `[`close`](/close "wikilink")`;`
`OnHealPlayer:`
`Â Â Â Â `[`percentheal`](/percentheal "wikilink")`Â 100,Â 100;`
`Â Â Â Â `[`specialeffect2`](/specialeffect2 "wikilink")`Â EF_HEAL;`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`OnInit:`
`Â Â Â Â `[`defpattern`](/defpattern "wikilink")`Â 1,Â "([^:]+):.*\\shealÂ plz(\\s.*)?",Â "OnHealPlayer";`
`Â Â Â Â activatepsetÂ 1;`
`}`

This makes the NPC heal everyone in it's vicinity, who says "heal plz".

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Adding_a_Script

Adding and Activating Scripts
Scripts are usually kept in the *npc* folder for the sake of organization even though scripts can contain more than a mere NPC. All files are saved as text files. Scripts cannot be loaded on to the server unless their text file is activated in a \*.conf file.

### A New Script

New scripts must be saved as a text file first. The file may be located anywhere in the rAthena directory, but is in the *npc* folder by default.

### Configuration Files

Any text editor may be used to edit \*.conf files. The *npc/\*.conf* files are used to determine which script text files should be loaded. There are about a dozen \*.conf that handle different groups of scripts for the purpose of organization. It does not matter which \*.conf holds your custom scripts as long as the path is correct.

Typical \*.conf entry layout:

`npc:Â npc/path/to/yourscript1.txt`
`//Â npc:Â npc/path/to/yourscript2.txt`

Note how the second line is preceded with a double slash. Content on the same line after double slashes will not be parsed. In other words, *script2.txt* will not be loaded. The slashes can be used to write comments.

determines which of the \*.conf will be read by the server.

`import:Â npc/path/to/configuration.conf`

### The NPC in Game

After adding the script, it must be loaded before the script contents take effect in game. There are a few ways to do this.


Client Side
The NPC name used in examples is "Teddy".

### Lua

The two files you will need to open and edit are "jobname.lua" and "npcidentity.lua". Jobname.lua will look like:

`Â Â Â [jobtbl.NPCNAME]Â =Â "NPCNAME",`

Example:

`Â Â Â [jobtbl.TEDDY]Â =Â "TEDDY",`

npcidentity.lua will look like:

`Â Â Â ["NPCNAME"]Â =Â NPCID,`

Example:

`Â Â Â ["TEDDY"]Â =Â 587,`

If your NPC has spaces in its name, its best to either remove them or replace them with underscores. So if the NPC's name was Brown Teddy the sprite's name would be Brown_Teddy.spr or BrownTeddy.spr and the lua files would be BROWN_TEDDY or BROWNTEDDY. Whatever ID you choose for your sprite will be the one you use in the script, so since Teddy has the sprite ID of 587, the beginning of my script will look like:

`Â Â Â xmas_in,111,107,3Â Â Â scriptÂ Â TeddyÂ Â Â 587,{`

### Sprite

The sprite part is straightforward, just Teddy.spr is fine, you don't need Teddy_m.spr or anything like that, but if you want to add m for male to the name you can do that, but it won't effect its functionality in-game. NPC sprites are located in data/sprite/npc.

Tips & Hints

[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Adding_new_bonuses

Introduction
### Purpose

If you want to add some uniquity to your server, you may want to consider adding custom bonuses. These are simply, item bonuses which can be added to items, to grant new and interesting features. Depending on how unique you wish your server to be, you may consider adding several new bonuses and adapt them into your server.

### Example

For this article, we will consider adding a new bonus which adds an x/10% chance of skipping consumption of ammo when attacking (this means, arrows, bullets etc.). The bonus would look like this:

`bonusÂ bSkipAmmo,x;Â //Â x/10%Â chanceÂ toÂ skipÂ consumptionÂ ofÂ ammo.`

Open /src/map/map.h
*Scroll down to the enum _sp block*

**Find:**

`SP_ADD_SKILL_BLOW,Â SP_SP_VANISH_RATE,Â SP_MAGIC_SP_GAIN_VALUE,Â SP_MAGIC_HP_GAIN_VALUEÂ //2041-2044`

**What is this?**

Generically, any new bonuses should be added here. This is an enumerator of all special target variables, these define what our bonuses should be called and how we should reference them.

**What to do?**

In order to add a new bonus, we must extend the enumerator and add our bonus slot. Using the example for bSkipAmmo, we shall add a new slot called `SP_SKIPAMMO`:

`SP_ADD_SKILL_BLOW,Â SP_SP_VANISH_RATE,Â SP_MAGIC_SP_GAIN_VALUE,Â SP_MAGIC_HP_GAIN_VALUE,Â //2041-2044`
`SP_SKIPAMMOÂ //2045-?`

*Note that a comma was added after **SP_MAGIC_HP_GAIN_VALUE**.*

Now we have a definite reference to our bSkipAmmo (= 2045). We can proceed to setting up variables to store this.

Open /src/map/pc.h
**Find:**

`shortÂ sp_vanish_rate;`
`shortÂ sp_vanish_per;Â Â Â `
`unsignedÂ shortÂ unbreakable;Â Â Â Â //Â chanceÂ toÂ preventÂ ANYÂ equipmentÂ breakingÂ [celest]`
`unsignedÂ shortÂ unbreakable_equip;Â //100%Â breakÂ resistanceÂ onÂ certainÂ equipment`
`unsignedÂ shortÂ unstripable_equip;`

**What is this?**

If you look at the structure, you'll notice that these are a small portion of variables that will be reset *everytime* the player changes equipment, or status effects are induced. These store bonuses from equipment.

**What to do?**

We need to add an entry for our *bSkipAmmo* bonus, we need a variable to store the **x** value.

`unsignedÂ shortÂ skip_ammo;`

This will now be a variable that stores the percentage chance of skipping ammo usage.

Open /src/map/status.c
*Scroll to or find the function status_calc_pc_*

**Find:**

`+Â sizeof(sd->sp_vanish_rate)`
`+Â sizeof(sd->sp_vanish_per)`
`+Â sizeof(sd->unbreakable)`
`+Â sizeof(sd->unbreakable_equip)`
`+Â sizeof(sd->unstripable_equip)`

**What is this?**

This is a part of the code that will reset all bonuses back to 0 or "turned off" whenever equipment is changed etc, and they will be set back up later on in the script. If you notice, the variables mentioned here are the same as the ones listed in */src/map/pc.h*. We can add our custom variable here.

**What to do?**

**Below add:**

`+Â sizeof(sd->skip_ammo)`

This will mean that our *skip_ammo* variable is reset when necessary.

Open /src/map/pc.c
*Scroll to or find the function pc_bonus*

**Find:**

`caseÂ SP_ATK_RATE:`
`Â Â Â if(sd->state.lr_flagÂ !=Â 2)`
`Â Â Â Â Â Â Â sd->atk_rateÂ +=Â val;`
`Â Â Â break;`

**What is this?**

This is, very simply, the source code for the bonus *bAtkRate*. From here, we will be adding our custom bonus.

**What to do?**

If you look at the *pc_bonus* arguments, we see *int type, int val*. The variable *val* holds the information passed via the *bonus* command. So, in order to add the skip ammo code:

**Below add:**

`caseÂ SP_SKIPAMMO:`
`Â Â Â if(sd->state.lr_flagÂ !=Â 2)`
`Â Â Â Â Â Â Â sd->skip_ammoÂ +=Â val;`
`Â Â Â break;`

*Note the **sd-&gt;state.lr_flag**, all this does is check if the equipment running the script **is not** an ammo.*

There, we now have the fundamentals of the skip ammo in place. At this point, you'll be able to assign *sd-&gt;skip_ammo* with a value by parsing **bonus bSkipAmmo,x;** after we add the *db/const.txt* entry.

Open /src/map/battle.c
To continue our example, I will show you the necessary area to add the code for the "skipping ammo" check. This will give you an idea of how to use the variable attached to the player.

*Scroll to or find the function battle_consume_ammo*

**Find:**

`ifÂ (!battle_config.arrow_decrement)`
`Â Â Â return;`

**Below add:**

`ifÂ (Â sd->skip_ammoÂ >Â 0Â &&Â sd->skip_ammoÂ >Â rand()%1000Â )`
`Â Â Â return;`

**What does this do?**

Since bSkipAmmo is x/10% (x/1000 chance), we simply check if *skip_ammo* is above 0, and then do a *rand()* function (which returns a random number) and specify that it should be out of 1000 (*%1000*).

If it returns true, then it will skip the ammo consumption.

Open /db/const.txt
**Find:**

`bMagicHPGainValue`<tab>`2044`

**Below add:**

`bSkipAmmo`<tab>`2045`

Conclusion
Using this article as a guide-line, you should be able to understand the basic concept of adding your own custom bonuses. If you wish to utilise *bonus2, bonus3, bonus4 and bonus5*, then I recommend you take a look at *pc_bonus2* etc in the file and work out the rest.

[Category:Source Snippets](/Category:Source_Snippets "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## Adding_new_mapflag

Introduction
When scripting, or creating custom automated events, you may wish to add your own custom mapflags. In order to do so, you'll need to complete some source edits. This article will explain how.

This article was originally created by [TecnoCronus](http://www.eathena.ws/board/index.php?showuser=273955) on the eAthena forums.

Open /src/map/map.h
**Find:**

`unsignedÂ src4instanceÂ :Â 1;Â //Â ToÂ flagÂ thisÂ mapÂ whenÂ it'sÂ usedÂ asÂ aÂ srcÂ mapÂ forÂ instances`

**Add below:**

`unsignedÂ mymapflagÂ :Â 1;`

Open /src/map/script.c
**Find:**

`MF_GUILDLOCK`

**Replace with:**

`MF_GUILDLOCK,Â //Â AddedÂ commaÂ forÂ thenÂ nextÂ map-flag.`
`MF_MYMAPFLAG`

**Find:**

`caseÂ MF_GUILDLOCK:Â Â Â Â Â Â Â Â script_pushint(st,map[m].flag.guildlock);Â break;`

**Below add:**

`caseÂ MF_MYMAPFLAG:Â Â Â Â Â Â Â Â script_pushint(st,map[m].flag.mymapflag);Â break;`

**Find:**

`caseÂ MF_GUILDLOCK:Â Â Â Â Â map[m].flag.guildlock=1;Â break;`

**Below add:**

`caseÂ MF_MYMAPFLAG:Â Â Â Â Â map[m].flag.mymapflag=1;Â break;`

**Find:**

`caseÂ MF_GUILDLOCK:Â Â Â Â Â map[m].flag.guildlock=0;Â break;`

**Below add:**

`caseÂ MF_MYMAPFLAG:Â Â Â Â Â map[m].flag.mymapflag=0;Â break;`

Open /src/map/npc.c
**Find:**

`elseÂ ifÂ (!strcmpi(w3,"guildlock"))`
`Â Â Â map[m].flag.guildlock=state;`

**Below add:**

`elseÂ ifÂ (!strcmpi(w3,"mymapflag"))`
`Â Â Â map[m].flag.mymapflag=state;`

Open /db/const.txt
**Find:**

`mf_guildlock`<tab>`45`

**Below add:**

`mf_mymapflag`<tab>`46`

Conclusion
Recompile and you can now set "mymapflag" to any value. Remember, you can rename the mapflag to whatever, and later use the flag option anywhere else in your source code.

[Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Adding_new_skills

Introduction
A large area where players have difficulty is adding new skills to the source and client. To implement new skills, it's required that you use an XRay client (if you don't want to use XRay, you will have to replace existing, un-used skills and edit their previous descriptions).

Below will be documentation on how to implement these new skills

Skill ID Rules
The skill
The skill I will be working on is a simple one.

    Earth Bolt
    Max Level: 10
    Type: Active
    SP Cost: 20 + 5*SkillLV
    Target: 1 Enemy
    Cast Time: 2 sec
    Cool Down: 1 sec
    Duration: Instant
    Deals SkillLV bolts of Earth magic damage to one enemy, at 150% MATK per hit.

Basically, this skill should target 1 enemy, and deal 10 hits of 150% MATK, Earth elemental property and should be magic damage based.

Open /src/map/skill.h
Scroll down until you find

       EL_STONE_HAMMER,
        EL_ROCK_CRUSHER,
        EL_ROCK_CRUSHER_ATK,
        EL_STONE_RAIN,

After here is where we add any additional skills. It's better to give the skills a custom ID to begin with. So, let's add our "Earth Bolt" skill.

After those, add

       MG_EARTHBOLT = 8443,

MG_ definitively means "Mage", you'll work out the acronyms as you scroll through the skills. We have defined the basis of the skill. As you can see, the skill id is set to '8443' since Earth Elemental's Stone Rain is set to 8442 (and is the last player accessible skill).

Open /src/map/skill.c
This file is where we define the actual skill implementations. For single-target skills, all processing of that skill will go in *skill_castend_damage_id* (for damaging skills) or *skill_castend_nodamage_id* (for non-damage skills).

### Magic based skills

Because Earth Bolt is **damage** based, find the *skill_castend_damage_id* function and find:

       case AB_RENOVATIO:
        case AB_HIGHNESSHEAL:
        case AB_DUPLELIGHT_MAGIC:
        case WM_METALICSOUND:
        case MH_ERASER_CUTTER:

The reason we will be placing the *case* for Earth Bolt here is because:

           skill_attack(BF_MAGIC,src,src,bl,skillid,skilllv,tick,flag);

The BF_MAGIC quality means that the skill is magic based, and should be calculated under the magic battle calculations. So, after `case` `NJ_HUUJIN` add:

       case MG_EARTHBOLT:

### Weapon based skills

In the event of wanting to add a skill that's based on Weapon, rather than Magic, find:

       case WM_GREAT_ECHO:
        case GN_SLINGITEM_RANGEMELEEATK:
        case KO_JYUMONJIKIRI:
        case KO_SETSUDAN:
        case KO_KAIHOU:

And add the case after those. If we wanted Earth Bolt to be weapon based, it would look like this:

       case WM_GREAT_ECHO:
        case GN_SLINGITEM_RANGEMELEEATK:
        case KO_JYUMONJIKIRI:
        case KO_SETSUDAN:
        case KO_KAIHOU:
        case MG_EARTHBOLT:

However, we will stick to the Magic function instead.

Open /src/map/battle.c
In this function, all main damage calculations are performed. And in seperate functions, the % modifiers for the skills are stored. Therefore, for our 150% damage, we add the extra 50% (since 100% is the default) in the appropriate function.

### Weapon based attacks

For **Weapon** based attacks, the modifiers are found in *battle_calc_weapon_attack*. Simply find:

       case NPC_VAMPIRE_GIFT:
            skillratio += ((skill_lv-1)%5+1)*100;
            break;

And add your damage modifier there. For example, if Earth Bolt was Weapon based, we would add:

       case MG_EARTHBOLT:
            skillratio += 50;
            break;

The *+= 50* simply means "Add 50% onto the 100%" for 150% ATK damage.

### Magic based attacks

For **Magic** based attacks, the modifiers are found in *battle_calc_magic_attack*. Simply find:

       case NPC_EARTHQUAKE:
            skillratio += 100 +100*skill_lv +100*(skill_lv/2);
            break;

And add the damage modifier below. Since Earth Bolt is magic based, we add it here.

       case MG_EARTHBOLT:
            skillratio += 50;
            break;

This now means that Earth Bolt will deal Magic damage at 150% MATK.

Skill database support
Technically speaking, the basis of the skill is now in place. Of course, if you want to implement more complex skills, there's a lot more to it. A seperate section will be created in the future for this. But for now, we need to implement the skill database entries. The files below can be find within db/(pre/re)/. Only one from both (pre/re) need to be updated, it's one you use in your server.

### skill_db.txt

For our Earth Bolt, we can now enter this:

    8443,5,8,1,2,0,0,10,1:2:3:4:5:6:7:8:9:10,yes,0,0,0,magic,0,0,MG_EARTHBOLT,Earth Bolt

This defines that:

`Earth` `Bolt` `has` `a` `range` `of` `5` `cells,` `hits` `multiple` `times,` `is` `Earth` `element` `and` `targets` `1` `enemy.` `It` `can` `be` `interrupted,` `and` `is` `of` `magic` `type` `damage.` `The` `amount` `of` `hits` `increases` `by` `1` `every` `level,` `with` `a` `maximum` `level` `of` `10.`

### skill_cast_db.txt

For our Earth Bolt, we can now enter this:

    8443,2000,1000,0,0,0

This defines that:

`Earth` `Bolt` `has` `a` `2` `second` `cast` `time,` `and` `a` `1` `second` `delay` `time.` `There` `is` `no` `after-cast` `walk-delay`

### skill_require_db.txt

For our Earth Bolt, we can now enter this:

    8443,0,0,25:30:35:40:45:50:55:60:65:70,0,0,0,99,0,0,none,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0

This defines that:

`Earth` `Bolt` `requires` `25` `SP` `at` `level` `1,` `30` `SP` `at` `level` `2` `..` `70` `SP` `at` `level` `10.` `Can` `be` `cast` `with` `any` `weapon,` `doesn't` `require` `a` `state` `and` `doesn't` `require` `any` `items` `to` `be` `consumed.`

### skill_tree.txt

This part of the database isn't necessary if it can't be learned by a class. However, if you want a class to learn a skill, you have to make an entry in skill_tree.txt. An example below:

    2,8443,10,19,5,20,5,0,0,0,0,0,0

This defines that:

`Earth` `Bolt` `can` `be` `learned` `by` `Mage,` `has` `a` `maximum` `level` `of` `10` `(for` `this` `class),` `and` `requires` `skill` `19` `(Firebolt)` `at` `level` `5,` `and` `skill` `20` `(Lightning` `Bolt)` `at` `level` `5.`

Technically, this is usually all the areas that you'd usually cover with skill database files. There are more, but that's for you to explore.

XRay support
To support the skill in the actual client, assuming you're using XRay (required to add new IDs for skills), you can do the following:

### ability_tab.txt

To add in the custom skill, find:

    NJ_ISSEN

And below it, add:

    MG_EARTHBOLT

### leveluseskillspamount.txt

To make the skill level-selectable, simply add an entry in leveluseskillspamount.txt in the data folder.

    8443#
    25#
    30#
    35#
    40#
    45#
    50#
    55#
    60#
    65#
    70#
    @

This will allow the skill to be level selectable.

Renewal/Non-Xray Support
The following implementations are according to Revision 228 from Lua Project(2012-05-23)+. To support Renewal and post 10/13/2009 Clients (or the last Xray) we'd need to make use of .[lua](/lua "wikilink") and .[lub](/lub "wikilink") files.

The implementation is different between then many client versions, but there's generally 2 implementations:

### no skillinfoz folder

in data/lua files/skillinfo/skilltreeview.lua find:

    {"MG_FIREWALL", 18; Pos = 19, MaxLv = 10, NeedSkillList = {6, 12}}

change to:

    {"MG_FIREWALL", 18; Pos = 19, MaxLv = 10, NeedSkillList = {6, 12}},
    {"MG_EARTHBOLT",8443; Pos = 20, MaxLv = 10, NeedSkillList = {19,20}}

### has skillinfoz folder

skillid.lua find:

    ECLAGE_RECALL = 3035,

After Add:

    MG_EARTHBOLT = 8443,

in data/lua files/skillinfo/skilldescript.lua find:

        [SKID.MG_THUNDERSTORM] = {

            "Thunder Storm",
            "Max Level:^777777 10 ^000000",
            "Type:^777777 Offensive ^000000",
            "SP Cost:^777777 24 + 5*SkillLV ^000000",
            "Target:^777777 cell ^000000",
            "Range:^777777 9 cells ^000000",
            "Cast Time:^777777 1*SkillLV sec ^000000",
            "Cool Down:^777777 2 sec ^000000",
            "Duration:^777777 0.2*SkillLV sec ^000000",
            "Effect:^777777 Hits every Enemy in a 5x5 area around the targeted cell with 1 Wind Element Bolt per level at a rate of 1 bolt every 0.2 seconds. Each bolt does 0.8*MATK Wind element damage. ^000000",
            "[LV 1]^777777 1 Bolt ^000000",
            "[LV 2]^777777 2 Bolts ^000000",
            "[LV 3]^777777 3 Bolts ^000000",
            "[LV 4]^777777 4 Bolts ^000000",
            "[LV 5]^777777 5 Bolts ^000000",
            "[LV 6]^777777 6 Bolts ^000000",
            "[LV 7]^777777 7 Bolts ^000000",
            "[LV 8]^777777 8 Bolts ^000000",
            "[LV 9]^777777 9 Bolts ^000000",
            "[LV 10]^777777 10 Bolts ^000000",
        },

After Add:

        [SKID.MG_EARTHBOLT] = {
            "Earth Bolt",
            "Max Level:^777777 10 ^000000",
            "Type:^77777 Active ^000000",
            "SP Cost:^777777 20 + 5*SkillLV ^000000",
            "Target:^777777 1 Enemy ^000000",
            "Cast Time:^777777 2 sec ^000000",
            "Cool Down:^777777 1 sec ^000000",
            "Duration:^777777 Instant ^000000",
            "Effect: ^777777 Deals SkillLV bolts of Earth magic damage to one enemy, at 150% MATK per hit.^000000"
        },

skilltreeview.lua change:

    [JOBID.JT_MAGICIAN] = {
            [1] = SKID.MG_STONECURSE,
            [2] = SKID.MG_COLDBOLT,
            [3] = SKID.MG_LIGHTNINGBOLT,
            [4] = SKID.MG_NAPALMBEAT,
            [5] = SKID.MG_FIREBOLT,
            [6] = SKID.MG_SIGHT,
            [8] = SKID.MG_SRECOVERY,
            [9] = SKID.MG_FROSTDIVER,
            [10] = SKID.MG_THUNDERSTORM,
            [11] = SKID.MG_SOULSTRIKE,
            [12] = SKID.MG_FIREBALL,
            [13] = SKID.MG_ENERGYCOAT,
            [18] = SKID.MG_SAFETYWALL,
            [19] = SKID.MG_FIREWALL
        },

to:

        [JOBID.JT_MAGICIAN] = {
            [1] = SKID.MG_STONECURSE,
            [2] = SKID.MG_COLDBOLT,
            [3] = SKID.MG_LIGHTNINGBOLT,
            [4] = SKID.MG_NAPALMBEAT,
            [5] = SKID.MG_FIREBOLT,
            [6] = SKID.MG_SIGHT,
            [8] = SKID.MG_SRECOVERY,
            [9] = SKID.MG_FROSTDIVER,
            [10] = SKID.MG_THUNDERSTORM,
            [11] = SKID.MG_SOULSTRIKE,
            [12] = SKID.MG_FIREBALL,
            [13] = SKID.MG_ENERGYCOAT,
            [18] = SKID.MG_SAFETYWALL,
            [19] = SKID.MG_FIREWALL,
            [20] = SKID.MG_EARTHBOLT
        },

skillinfolist.lua Change:

        [SKID.ECL_SEQUOIADUST] = {
            "ECL_SEQUOIADUST";
            SkillName = "Sequoia Dust",
            MaxLv = 1,
            SpAmount = { 0 },
            bSeperateLv = false,
            AttackRange = { 7 },
        }

To:

        [SKID.ECL_SEQUOIADUST] = {
            "ECL_SEQUOIADUST";
            SkillName = "Sequoia Dust",
            MaxLv = 1,
            SpAmount = { 0 },
            bSeperateLv = false,
            AttackRange = { 7 },
        },
        [SKID.MG_EARTHBOLT] = {
            "MG_EARTHBOLT";
            SkillName = "Earth Bolt",
            MaxLv = 10,
            SpAmount = { 25, 30, 35, 40, 45, 50, 55, 60, 65, 70 },
            _NeedSkillList = {
                { SKID.MG_FIREBOLT, 5},
                { SKID.MG_LIGHTNINGBOLT, 5}
            }
            },

### Finishing up

You can add the rest of the information in skillnametable.txt, skilldesctable2.txt and you'll need to add the appropriate Sprite and BMP file for the skill. Use the name MG_EARTHBOLT as the name of the file, and for the entries in the two text files.

[Category:Source Snippets](/Category:Source_Snippets "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## Adding_new_statuses

Information
When modifying your server, the time may come when you need to add or ammend status effects, and the bonuses or the 'scripts' that they provide. To do so, will require some source modifications, but will result in the ability to create and initialize status effects.

Open
You will notice a large enumerator called "sc_type", which defines the different statuses. When creating a new status, we need to move to the *end* of the enumerator, and add a custom SC type like below:

       SC_HELLPOWER = 294,
        SC_INVINCIBLE, //295
        SC_INVINCIBLEOFF,
        SC_CUSTOMSTATUS, // This is our custom status effect

        SC_MAX, //Automatically updated max, used in for's to check we are within bounds.

Note that SC_CUSTOMSTATUS is placed *before* the SC_MAX entry. Any new status effects must be placed before SC_MAX and preceed with a comma. Here we have declared a new status effect, so we can now move onto use it.

Open
Jump to the function *status_change_start*:

### Status effect immunity

       undead_flag = battle_check_undead(status->race,status->def_ele);
        //Check for inmunities / sc fails
        switch (type)
        {

This block is where we actually perform any checks, such as circumstances which disallow a status from being used. For example, let's say that SC_CUSTOMSTATUS cannot be inflicted when the target has SC_BLIND active.

       case SC_CUSTOMSTATUS:
            if(sc->data[SC_BLIND])
                return 0;
        break;

And now, if the target has SC_BLIND active, the status will not be inflicted at all.

### Status effect curing

       //Before overlapping fail, one must check for status cured.
        switch (type)
        {

This block actually cancels *other* status effects if your status effect is being activated. Like the above, it's not necessary, but let's say that SC_CUSTOMSTATUS *removes* SC_BLIND.

       case SC_CUSTOMSTATUS:
            status_change_end(bl, SC_BLIND, -1);
            break;

As simple as that, now whenever SC_CUSTOMSTATUS is inflicted, SC_BLIND will be removed.

### val1, val2, val3 and val4

           case SC_REBIRTH:
                val2 = 20*val1; //% of life to be revived with
                break;

If you find this piece of code, it means you're in the actual block which manipulates val1, val2, val3, val4 and tick. This is especially useful when altering status effects that have been initialized by skills.

           case SC_CUSTOMSTATUS:
                val2 = val1 * 30; // HIT reduced by 30 per val1.
                break;

In this block of code, we set the 'val2' property of SC_CUSTOMSTATUS to *val1 \* 30*. Therefore, if val1 is set to 1, val2 is 30, is val1 is set to 2, val2 is 60. Usually, skills pass **skill_lv** (the level of the skill used) into val1, which means you can adjust the settings for val2, val3 and val4 based on the skill level used.

### Using the status effect

Jump to the function *status_calc_hit*:

       if(sc->data[SC_MERC_HITUP])
            hit += sc->data[SC_MERC_HITUP]->val2;

As you can see, SC_MERC_HITUP directly influences the HIT rate as calculated in *status_calc_hit*. We can add a custom code which will also modify HIT, such as below:

       if(sc->data[SC_CUSTOMSTATUS])
            hit -= sc->data[SC_CUSTOMSTATUS]->val2;

This means that HIT will be decreased by whatever value is in val2 (as calculated in *status_change_start*).

Open
### Implementing

Find

    SC_INVINCIBLEOFF<tab>296

Add below

    SC_CUSTOMSTATUS<tab>297

And there you go. The status effect *SC_CUSTOMSTATUS* is now ready for use.

### Using the status

    sc_start SC_CUSTOMSTATUS, 60000, 2;

This will start SC_CUSTOMSTATUS, it will last for 60 seconds and it will remove SC_BLIND if it is active. The '2' is the *val1* entry, which means that *val2 = 2 \* 30;*, which will cause HIT to be decreased by 60 for 60 seconds.

[Category:Source Snippets](/Category:Source_Snippets "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## Addrid

Syntax

Description
This command will attach other RIDs to the current script without detaching the invoking RID. It returns 1 if successful and 0 upon failure.

To be more exact, this command will run the succeeding code for each player attached by it. For example, if 10 players were added by this command, the code after it will be ran an additional 10 times, each time with another RID attached.

<type> determines what RIDs are attached:

| Value      | Description                                                                                                   |
|------------|---------------------------------------------------------------------------------------------------------------|
| 0          | All players in the server.                                                                                    |
| 1          | All players in the map of the invoking player, or the invoking NPC if no player is attached.                  |
| 2          | Party members of a specified party ID. *Parameters: <party id>*                                               |
| 3          | Guild members of a specified guild ID. *Parameters: <guild id>*                                               |
| 4          | All players in a specified area of the map of the invoking player (or NPC). *Parameters: <x0>,<y0>,<x1>,<y1>* |
| Account ID | The specified account ID.                                                                                     |

<flag> can prevent certain players from being attached:

| Value | Description                                                    |
|-------|----------------------------------------------------------------|
| 0     | Players are always attached. (default)                         |
| 1     | Players currently running another script will not be attached. |

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Addtoskill

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
These commands will give the invoking character a specified skill. This is also used for item scripts.

Parameters
### Skill ID

Skill ID is the ID number of the skill in question as per . It is not known for certain whether this can be used to give a character a monster's skill, but you're welcome to try with the numbers given in .

### Level

The level at which the skill in question is given. If the flag has been set to 2, this parameter will be interpreted as a a stackable additional bonus to the existing skill level of the skill of the player.

### Flag

The flag parameter is optional, and defaults to 1 in '[skill](/skill "wikilink")' and to 2 in '[addtoskill](/addtoskill "wikilink")'.

`FlagÂ -Â Description`
**`0`**`Â -Â TheÂ skillÂ isÂ givenÂ permanently.`
**`1`**`Â -Â TheÂ skillÂ isÂ givenÂ temporarilyÂ (WillÂ beÂ lostÂ eventually,Â thisÂ isÂ meantÂ forÂ cardÂ item`
`scriptsÂ usage).`
**`2`**`Â -Â TheÂ levelÂ parameterÂ isÂ toÂ beÂ interpretedÂ asÂ aÂ stackableÂ additionalÂ bonusÂ toÂ theÂ skill`
`level.Â IfÂ theÂ characterÂ didÂ notÂ haveÂ thatÂ skillÂ previously,Â theyÂ willÂ nowÂ atÂ 0+(theÂ levelÂ given).`

Examples
`Â Â Â Â Â Â //ThisÂ willÂ permanentlyÂ giveÂ theÂ characterÂ StoneÂ ThrowÂ (TF_THROWSTONE,152),Â atÂ levelÂ 1,`
`Â Â Â Â Â Â `[`skill`](/skill "wikilink")`Â 152,1,0;`

============================================================

## Adopt

Syntax

Description
This command will set up a novice as a baby of a married couple. All three are referred to by character name. The correct variables are set on all three characters in the same call. The command will unequip anything the novice has equipped and make them a Job_Baby class, as well as send them a 'your job has been changed' message.

Beware of calling this from inside a 'callfunc' function, cause upon successful adoption, this command returns a zero, as if it were a function. This is likely to screw up execution of a 'return' command. You may try to call it as a function instead, but it doesn't return anything upon an error, which may also cause script execution to throw up errors.

Nothing will happen (and nothing will be returned either) if either future parent is below base level 70 and/or if any of the three characters is not found online.

[Category:Script Command](/Category:Script_Command "wikilink") [Category:Obsolete Script Command](/Category:Obsolete_Script_Command "wikilink")

============================================================

## Agitcheck

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will let you check whether the server is currently in WoE mode.

Return Values
| Value | Description           |
|-------|-----------------------|
| 0     | WoE is currently off. |
| 1     | WoE is currently on.  |

============================================================

## Agitcheck2

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will let you check whether the server is currently in WoE:SE mode.

Return Values
| Value | Description              |
|-------|--------------------------|
| 0     | WoE:SE is currently off. |
| 1     | WoE:SE is currently on.  |

============================================================

## Agitstart2

Syntax

Description
These two commands initialize the start and end the [War of Emperium](/War_of_Emperium "wikilink"): Second Edition respectively.

The commands by themselves only set an server-internal flag, that guild siege is in effect and run **OnAgitStart2** or **OnAgitEnd2** event labels on all currently loaded scripts, which contain this label. These are typically WoE:SE scripts located in **npc/guild2**, which are responsible the actual starting and ending of the guild siege.

Example
[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â Â `[`if`](/if "wikilink")`(`[`gettime`](/gettime "wikilink")`(3)<15Â ||Â gettime(3)>=17)`
`Â Â Â Â {`
`Â Â Â Â Â Â Â Â `[`end`](/end "wikilink")`;`
`Â Â Â Â }`
[`OnClock`](/OnClock "wikilink")`1500:`
`Â Â Â Â agitstart2;`
`Â Â Â Â end;`
`OnClock1700:`
`Â Â Â Â agitend2;`
`Â Â Â Â end;`

A basic WoE:SE controller script, which resumes the siege, even when the server is started during the WoE:SE period.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Alternate_Palette_Guide

***Tools***

ROSS (Credit goes to the author, search eAthena to find the thread)[1](http://www.divshare.com/download/1074997-a95)

Sprites for palette editing

Palette packs are optional. This is the palette pack for RMS, found in eAthena forums[2](http://weissro.ropatch.net/DyePackAllClassesComplete.rar)

Step 1: Download and extract ROSS and note the file paths to the sprite you will use. If you want to be lazy just make a copy of the file and drop it in the ROSS folder. Same for any palettes you want to edit.

Step 2: Open the RagnarokOnlineSpriteStudio.exe program. It's the one with the lunatic icon.

Step 3: Click the "Sprite" menu on the tool bar and select open. Navigate to your sprite.

[Image:Explanation.jpg](/Image:Explanation.jpg "wikilink")

Step 4: Double click the palette box you wish to edit and you will bring up the classic paint color selector. If you plan on doing multiple palettes with the same color set in one sitting, I suggest setting the colors for custom colors. Be warned though, they will revert back once you close the ROSS tool.

Step 5: Once you finish editing your palettes you need to save it. I suggest looking at the [Reference Sheet](/Reference_Sheet "wikilink") I made for naming. Click Palette, then save, then navigate to the directory and enter the name. It will automatically be named a .pal

Step 6: To open a palette, click Palette, then open, then navigate to the palette you want to open, then click open or double click.

Please send any questions to me. (Carebearkiller001@yahoo.com)

[Category:Spriting](/Category:Spriting "wikilink")

============================================================

## Announce

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will broadcast a message to all or most players, similar to @kami/@kamib GM commands. The region the broadcast is heard in and the color the message will come up as will be determined by the flags.

Using this command for private messages to players is probably not that good an idea, but it can be used instead in NPCs to "preview" an announce.

Parameters
### Flag

The flag values are coded as constants in db/const.txt to make them easier to use:

| Flag       | Value | Description                                                                                                                                                     |
|------------|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| bc_all    | 0     | Broadcast message is sent server-wide.                                                                                                                          |
| bc_map    | 1     | Message is sent to everyone in the same map.                                                                                                                    |
| bc_area   | 2     | Message is sent to players in the vicinity of the source.                                                                                                       |
| bc_self   | 3     | Message is sent only to current player.                                                                                                                         |
| bc_npc    | 8     | Broadcast source is the npc, not the player attached to the script (useful when a player is not attached or the message should be sent to those nearby the npc) |
| bc_yellow | 0     | The default is to send broadcasts in yellow color.                                                                                                              |
| bc_blue   | 16    | Alternate broadcast is displayed in blue color.                                                                                                                 |

### Color

The optional parameter, color, allows usage of broadcasts in any custom color. The color parameter is a single number which can be in hexadecimal notation. For example:

    //This will display a global announce in yellow. The color format is in RGB (0xRRGGBB).
    announce "This will be shown to everyone at all in yellow.",bc_all,0xFFFF00;

Examples
    announce "This will be shown to everyone at all in yellow.",0;

    //This will be a private message to the player using the NPC that made the announcement
    announce "This is my message just for you",bc_blue|bc_self;

    //This will be shown on everyone's screen that is in sight of the NPC.
    announce "This is my message just for you people here",bc_area;

============================================================

## Areamobuseskill

Syntax

Description
This command will make all monsters of the specified mob ID in the specified area use the specified skill. Map name, x, and y define the center of the area which extending <range> cells in each direction (e.g. a range of 3 would create a 7x7 square). The skill can be specified by skill ID or name. <cast time> is in milliseconds (1000 = 1 second), and the rest should be self-explanatory.

<target type> can be:

| Value | Description                                           |
|-------|-------------------------------------------------------|
| 0     | Cast the specified skill to self.                     |
| 1     | Cast the specified skill to the mob's current target. |
| 2     | Cast the specified skill to the mob's master.         |
| 3     | Random target.                                        |

Example
`Â Â Â //Â SpawnÂ 1Â ShiningÂ PlantÂ inÂ theÂ 5x5Â areaÂ centeredÂ onÂ (155,188)Â `
`Â Â Â `[`areamonster`](/areamonster "wikilink")`Â "prontera",153,186,157,190,"ShiningÂ Plant",1083,1;Â `
`Â Â Â `
`Â Â Â //Â MakeÂ theÂ plantÂ castÂ levelÂ 10Â ColdÂ BoltÂ onÂ aÂ randomÂ targetÂ `
`Â Â Â `**`areamobuseskill`**`Â "prontera",155,188,2,1083,"MG_COLDBOLT",10,3000,1,e_gg,3;Â `

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Areamonster

Syntax

Description
This command works exactly same as [monster](/monster "wikilink"), with the exception, that an area can be specified, in which a monster, or more often multiple monsters, are randomly distributed, rather than a single coordinate.

Parameters *x1* and *y1* specify the lower left corner of the bounding rectangle, and *x2* and *y2* the upper right one. For example specifying a rectangle of 2, 3, 5, 7, will spawn the monsters inside an 4x5 cell area, as illustrated below:

`7--XXXX`
`6Â Â XXXX`
`5Â Â XXXX`
`4Â Â XXXX`
`3--XXXX`
`2Â Â |Â Â |`
`1Â Â |Â Â |`
`0Â Â |Â Â |`
`Â 01234567`

Examples
`Â Â Â `[`mes`](/mes "wikilink")`Â "DidÂ theÂ PoringsÂ dieÂ again?";`
`Â Â Â `[`mes`](/mes "wikilink")`Â "OK,Â I'llÂ repairÂ theÂ PoringÂ garden.";`
`Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â `[`areamonster`](/areamonster "wikilink")`Â "this",Â 213,Â 110,Â 233,Â 140,Â "GardenÂ Poring",Â 1002,Â 20,Â strnpcinfo(0)+"::OnKilled";`
`Â Â Â `[`end`](/end "wikilink")`;`
`OnKilled:`
`Â Â Â `[`mes`](/mes "wikilink")`Â "DoÂ notÂ killÂ theseÂ preciousÂ Porings!";`
`Â Â Â `[`close`](/close "wikilink")`;`

This populates an area considered as an Poring Garden with 20 Porings. If one of them is killed, the killer is told not to kill them.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Areapercentheal

Syntax
[areapercentheal](/areapercentheal "wikilink") "<mapname>",<x1>,<y1>,<x2>,<y2>,<hp>,<sp>;

Description
Not exactly limited to battleground use, this will restore HP/SP in a defined area at a percentage.

Examples
`areapercenthealÂ "bat_a01",52,208,61,217,100,100;`
`end;`

[Category:Script Command](/Category:Script_Command "wikilink") [Category:Battlegrounds_Command](/Category:Battlegrounds_Command "wikilink")

============================================================

## Areawarp

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command is similar to '[warp](/warp "wikilink")', however, it will not refer to the invoking character, but instead, all characters within a specified area, defined by the x1/y1-x2/y2 square, will be warped. Nobody outside the area will be affected, including the activating character, if they are outside the area.

Examples
    areawarp "place",10,10,120,120,"place2",150,150;

Everyone that is in the area between X 10 Y 10 and X 120 Y 120, in a square shape, on the map called "place", will be affected, and warped to "place2" X 150 Y 150

    areawarp "place",10,10,120,120,"place2",0,0;

By using ,0,0; as the destination coordinates it will take all the characters in the affected area to a random set of co-ordinates on "place2".

Like '[warp](/warp "wikilink")', areawarp will also explicitly warp characters randomly into the current map if you give the 'to map name' as "Random".

============================================================

## Atcommand

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will run the given command line exactly as if it was typed in from the keyboard by the player connected to the invoking character, and that character belonged to an account which had GM level 99.

Note that for atcommands bound using [bindatcmd](/bindatcmd "wikilink"), this command will execute the original atcommand, not the script-bound atcommand.

Examples
`//Â ThisÂ willÂ askÂ theÂ invokerÂ forÂ aÂ characterÂ nameÂ andÂ thenÂ useÂ theÂ '@nuke'`
`//Â GMÂ commandÂ onÂ them,Â killingÂ themÂ mercilessly.`
[`input`](/input "wikilink")`Â @player$;`
**`atcommand`**`Â "@nukeÂ "+@player$;`

============================================================

## Atoi

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
These commands are used to convert strings to numbers. [atoi](/atoi "wikilink") will interpret given string as a decimal number (base 10), while [axtoi](/axtoi "wikilink") interprets strings as hexadecimal numbers (base 16). [strtol](/strtol "wikilink") lets the user specify a base (valid range is between 2 and 36 inclusive, or the special value0, which means auto-detection).

The [atoi](/atoi "wikilink") and [strtol](/strtol "wikilink") functions conform to the C functions with the same names, and [axtoi](/axtoi "wikilink") is the same as [strtol](/strtol "wikilink"), with a base of 16. Results are clamped to signed 32 bit int range (INT_MIN ~ INT_MAX).

Examples
    .@var = atoi("11");        // Sets .@var to 11
    .@var = axtoi("FF");       // Sets .@var to 255
    mes axtoi("11");           // Displays 17 (1 = 1, 10 = 16)
    .@var = strtol("11", 10);  // Sets .@var to 11 (11 base 10)
    .@var = strtol("11", 16);  // Sets .@var to 17 (11 base 16)
    .@var = strtol("11", 0);   // Sets .@var to 11 (11 base 10, auto-detected)
    .@var = strtol("0x11", 0); // Sets .@var to 17 (11 base 16, auto-detected because of the "0x" prefix)
    .@var = strtol("011", 0);  // Sets .@var to 9 (11 base 8, auto-detected because of the "0" prefix)
    .@var = strtol("11", 2);   // Sets .@var to 3 (binary 11)

============================================================

## Attachnpctimer

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
**AttachNPCTimer** allows you to attach a player to a NPC later on. This can only be done to the NPC Timer that is in the same NPC as where this command is used. To attach a player, you will simply have to give his account id or RID (or UID/GID in some devs words) as a parameter.The '[setnpctimer](/setnpctimer "wikilink")' command will explicitly set the timer to a given tick. '[getnpctimer](/getnpctimer "wikilink")' provides timer information. Its parameter defines what type:
== Examples ==

`attachnpctimerÂ getcharid(3);Â //Â AttachesÂ currentÂ playerÂ toÂ theÂ NPCÂ Timer.`
`attachnpctimerÂ 2000000;Â //Â AttachesÂ theÂ playerÂ withÂ accountÂ idÂ 2000000Â toÂ theÂ NPCÂ Timer,Â ifÂ heÂ isÂ online.`

============================================================

## Attachrid

Syntax

Description
These commands allow the manipulation of the script's [currently attached](/RID#Usage "wikilink") player. While **attachrid** allows attaching of a different player by using it's [account id](/AID "wikilink") for the parameter *rid*, **detachrid** makes the following commands run, as if the script was never invoked by a player.

In case, that the player cannot be attached, such as, when the player went offline in the mean time, attachrid returns 0, otherwise 1.

Examples
[`mes`](/mes "wikilink")`Â "EnterÂ aÂ nameÂ ofÂ aÂ player.";`
[`next`](/next "wikilink")`;`
[`input`](/input "wikilink")`Â .@playername$;`
[`set`](/set "wikilink")`Â .@playerid,`[`getcharid`](/getcharid "wikilink")`(3,.@playername$);Â Â //Â retrieveÂ ridÂ ofÂ anotherÂ player`
`setÂ .@invokeid,getcharid(3);Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â retrieveÂ ridÂ ofÂ theÂ currentÂ player`
`detachrid;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â detachesÂ theÂ currentÂ player,`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â althoughÂ notÂ necessaryÂ beforeÂ attachrid`
[`if`](/if "wikilink")`(.@playeridÂ &&Â attachrid(.@playerid))Â Â Â Â Â //Â playeridÂ isÂ notÂ 0Â (playerÂ isÂ online)`
`{`
`Â Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "Hello!Â *^__^*";`
`}`
`else`
`{`
`Â Â Â Â setÂ .@playerid,0;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â indicateÂ attachridÂ failure`
`}`
`if(attachrid(.@invokeid))Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â attachÂ backÂ toÂ theÂ firstÂ player`
`{`
`Â Â Â Â if(.@playerid)`
`Â Â Â Â {`
`Â Â Â Â Â Â Â Â mesÂ "IÂ haveÂ saidÂ helloÂ toÂ "+.@playername$+".";`
`Â Â Â Â }`
`Â Â Â Â else`
`Â Â Â Â {`
`Â Â Â Â Â Â Â Â mesÂ "IÂ wasÂ notÂ ableÂ toÂ reachÂ "+.@playername$+".";`
`Â Â Â Â }`
`Â Â Â Â `[`close`](/close "wikilink")`;`
`}`
[`end`](/end "wikilink")`;`

This will allow one player to specify the name of an another, which is then greeted by the script. Afterwards the invoking player is informed, whether or not the player was told "hello". The return value of attachrid should be always checked for success, otherwise the script terminates on the next command, which requires an attached player, on failure.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Autobonus

Syntax

Description
These commands are meant to be used in item scripts. They will probably work outside item scripts, but the bonus will not persist for long. They, as expected, refer only to an invoking character.

What these commands do is 'attach' a script to the player which will get executed on attack (or when attacked in the case of [autobonus2](/autobonus2 "wikilink")).

**Rate** is the trigger rate of the script (1000 = 100%).

**Duration** is the time that the bonus will last for since the script has triggered.

The optional argument 'flag' is used to classify the type of attack where the script can trigger (it shares the same flags as the bAutoSpell bonus script):

**Range criteria:**

`BF_SHORT:Â Â TriggerÂ onÂ meleeÂ attack`
`BF_LONG:Â Â Â TriggerÂ onÂ rangedÂ attack`
`default:Â Â Â BF_SHORT+BF_LONG`

**Attack type criteria:**

`BF_WEAPON:Â TriggerÂ onÂ weaponÂ skillsÂ `
`BF_MAGIC:Â Â TriggerÂ onÂ magicÂ skillsÂ `
`BF_MISC:Â Â Â TriggerÂ onÂ miscÂ skills`
`default:Â Â Â BF_WEAPON`

**Skill criteria:**

`BF_NORMAL:Â TriggerÂ onÂ normalÂ attacks`
`BF_SKILL:Â Â TriggerÂ onÂ skills`
`default:Â Â Â IfÂ theÂ attackÂ typeÂ isÂ BF_WEAPONÂ (only)Â BF_NORMALÂ isÂ used,Â otherwiseÂ BF_SKILLÂ +Â BF_NORMALÂ isÂ used.`

The difference between the optional argument 'other script' and the 'bonus script' is that, the former one triggers only when attacking(or attacked) and the latter one runs on status calculation as well, which makes sure, within the duration, the "bonus" that get lost on status calculation is restored. So, 'bonus script' is technically supposed to accept "bonus" command only. And we usually use 'other script' to show visual effects.

In all cases, when the script triggers, the attached player will be the one who holds the bonus. There is currently no way of knowing within this script who was the other character (the attacker in [autobonus2](/autobonus2 "wikilink"), or the target in [autobonus](/autobonus "wikilink") and [autobonus3](/autobonus3 "wikilink")).

Examples
`//GrantsÂ aÂ 1%Â chanceÂ ofÂ startingÂ theÂ stateÂ "allÂ statsÂ +10"Â forÂ 10Â secondsÂ when`
`//usingÂ weaponÂ orÂ miscÂ attacksÂ (bothÂ meleeÂ andÂ rangedÂ skills)Â andÂ showsÂ aÂ specialÂ `
`//effectÂ whenÂ theÂ bonusÂ isÂ active.`
`autobonusÂ "{Â `[`bonus`](/bonus "wikilink")`Â bAllStats,10;Â }",10,10000,BF_WEAPON|BF_MISC,"{Â `[`specialeffect2`](/specialeffect2 "wikilink")`Â EF_FIRESPLASHHIT;Â }";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## A_brief_look_at_RagExe

*Game Framework Class* (GFC) is Gravity's own name for the game engine or application architecture used in Ragnarok Online. With the Ragnarok beta release in 2001, Gravity announced the finalization of GFC 2.0. But what exactly is GFC, and where did it come from? Most game developers use commercial proprietary engines for their games, while GFC is an in-house product by Gravity's RND-1 development division. In truth, it's misleading to call it a game engine, as GFC in its current form has been used in exactly one game and is tightly coupled to it. In all likelyhood the name GFC and the notion of a game engine are just buzzwords Gravity used in an attempt at impressing investors in their early days. However, my client is strictly based on Gravity's RagExe implementation, and I guess it can therefore be said to be a clone of GFC. Here's a brief look at its history.

Gravity Corp. was a relatively small developer before Ragnarok Online became an international success. Certainly no one outside of South Korea knew of them. In fact, right up until Ragnarok become ready for alpha testing they were still just Team Gravity. In 1999 they partnered up with Sonnori Entertainment in a joint venture to develop an action RPG. *Arcturus: The Curse and Loss of Divinity* was released with success in 2000. At this point Gravity obtained the rights to publish a game based on the popular Korean comic *RagnarÃ¶k*. They decided to reuse source code from Arcturus. While Arcturus and Ragnarok don't have much in common in terms of game play, resemblances can be noticed in aspects such as artistic style and music.

[<File:Acturus.png>](/File:Acturus.png "wikilink")

Making Arcturus into the Ragnarok we know today required a severe overhaul of the code base. However, in many architectural decisions were left intact. What was retained became the base of GFC.

Ragnarok, like Arcturus, is a 2.5D game. While Gravity at one point experimented with 3D actors in Ragnarok, the main focus has always been on sprite-based characters in a 3D world. Most of the file formats from Arcturus could therefore be reused directly in Ragnarok. This is one of the reasons why some of Gravity's file formats have strange features. For instance the world resource format (RSW) contains strings pointing to scripts files, a feature not used in Ragnarok. Some formats, like RSX (think RSM for actors) were retained and is still in the code base, but never used. A few formats from Arcturus you may know include:


They also made new formats, like the worthless IMF format that no one understand what is supposed to do... (Just kidding, IMF is used when combining ACT files for player characters, but it turns out it wasn't really necessary or useful. The client uses IMF offsets when drawing the player on the character select, which is probably why headgear sometimes looks a little wonky there. It also uses it for drawing order for player character sprites in-game.)

While based on DirectX 7.0, from a modern perspective GFC can be said to be software rendered. If you've ever wondered why Ragnarok uses so much CPU, that is why! Direct3D is only used as a glorified triangle rasterizer with blending and depth buffering. GFC has a fairly large entity-based actor system where every actor is responsible for rendering themselves every frame. There are a few principal object types: ground (GND), models (e.g. RSM) and game objects (actors, effects, etc). Rendering done by registering a *render pass* from with the renderer - basically a list of screen projected vertices and a texture. The renderer sorts the render passes by depth, opacity and other attributes, and draws everything at the end of each game cycle. This all makes for a pretty horrible design. Easy to work with, but unnecessarily taxing on the system. The only reason it worked in the first place is the low amount of polygons on the screen. (Typically below 10,000 triangles at any time.)

Game objects communicate by passing messages around to each other. In Ragnarok, there is also a global state (the session) and the current game mode, which is responsible for tasks like processing input, creating actors, handling network messages and signalling actors.

[<File:Acturus-GameObjectHierarchy.png>](/File:Acturus-GameObjectHierarchy.png "wikilink")

The diagram above shows part of the base object hierarchy in Arcturus, which is pretty tall and convoluted. In Arcturus, each enemy needed its own class specialization. In comparison the diagram below shows the object hierarchy at the time of the Ragnarok alpha release. While simplified, the principal structure is the same. I have colored a few classes that provide similar functionality in the two games.

[<File:Ragnarok-GameObjectHierarchy-Alpha.png>](/File:Ragnarok-GameObjectHierarchy-Alpha.png "wikilink")

CRenderObject is any type of object that is draw on the screen, while CGameActor is any object that can be interacted with. CPc is the object type for characters controlled by a player. CNpc covers static NPCs and monsters. In Arcturus you could interact with certain 3D models (e.g. doors, chests), so C3dActor was a part of the game object hierarchy. In Ragnarok, all 3D models are just decoration and not part of the game play and aren't considered game objects. (The exceptions to the rule are Granny actors and traps, the latter of which are actually RSM models drawn by a Skill object.)

From the Ragnarok alpha to commercial release the renderer was improved a bit, and the 2D actor system become more flexible. A few libraries from RAD Game Tools was integrated to provide sound, video playback and a more practical 3D format (namely GR2, thought it's only been used for a few models). Aside from that, not much has changed.

Source
[curiosity's post](https://rathena.org/board/topic/104827-wip-native-ragnarok-client/#entry298242)

============================================================

## Back_Up_SQL

### Creating A Backup

Issue this command from a Unix terminal:

For single database:

       mysqldump -u (username) -p database_name > database_name.sql

For multiple database: (one output)

       mysqldump -u (username) -p --databases database_name_1 database_name_2 > 2_databases.sql

All databases:

       mysqldump -u root -p --all-databases > all_databases.sql

============================================================

## Basicskillcheck

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return the state of the configuration option 'basic_skill_check' in 'battle_athena.conf'. It returns 1 if the option is enabled and 0 if it isn't. If the 'basic_skill_check' option is enabled, which it is by default, characters must have a certain number of basic skill levels to sit, request a trade, use emoticons, etc. Making your script behave differently depending on whether the characters must actually have the skill to do all these things might in some cases be required.

Return Values
| Value | Description                        |
|-------|------------------------------------|
| 0     | 'basic_skill_check' is enabled.  |
| 1     | 'basic_skill_check' is disabled. |

============================================================

## Basic_Scripting

The Basics
Scripts control all NPCs, warps, mob spawns, shops, and quests you will find in the game--and nearly everything else! Clearly they play a large part in customizing a server, but learning isn't very hard.

Scripts are built up of predefined script commands, all of which can be found in (for explanations, see [Script Commands](/:Category:Script_Command "wikilink")). Every line should begin with a command and the argument it takes, and must end in a semicolon (or you'll get mapserver errors!). Arguments are usually separated by commas, and are sometimes contained in parentheses () or curly brackets {}. Tabs and proper indentation are standard scripting measures.

Scripts are saved as text (\*.txt) files, so all code can be written in Notepad. There are also a lot of scripting programs to use: the most recent and comprehensive one is [Vince's eNPC](http://rathena.org/board/topic/56484-enpc-script-editor/). All defined functions are highlighted, with an autocomplete feature included, and pressing "F1" will display the corresponding explanation for any command.

Structure
### NPC

A **Script NPC** will look something like the following:

`prontera,156,145,4Â `<tab>`Â scriptÂ `<tab>`Â TestÂ NPCÂ `<tab>`Â 58,{`

The first section is the map location of the NPC, followed by its coordinates in x,y and the direction the NPC will face. Direction numbers are counted counterclockwise in 45Âº increments, with 0 being the center:
\[1\]\[8\]\[7\]
\[2\]\[0\]\[6\]
\[3\]\[4\]\[5\]
After the first tab, the type of script is defined. For our purposes, it'll stay "script" for now, but can also be function, shop, or cashshop, for starters.
The name of the NPC is next. You can use up to 24 characters, so make it unique! Any duplicates will cause warnings or errors, and the NPC will just be automatically renamed anyway.
The last number is for the sprite (Ai4rei's sprite list can be found [here](http://nn.nachtwolke.com/dev/npclist/)). It's followed by a comma and open curly bracket, marking the beginning of the script contents. Of course, the script must also end in a curly bracket.

### Function

A **Function script** will look almost identical to:

`functionÂ `<tab>`Â scriptÂ `<tab>`Â FunctionÂ NameÂ `<tab>`Â {`

The words "function" and "script" won't change; the name must also be unique. All functions can be called using the "callfunc" command.

### Shop

A **Shop** starts like a normal script:

`prontera,156,145,4Â `<tab>`Â shopÂ `<tab>`Â FruitÂ StoreÂ `<tab>`Â 58,512:-1,513:1000`

The first section defines the map, coordinates, and direction. The word "shop" replaces "script" (alternately, "cashshop" will use Cashpoints instead of Zeny). The name and sprite ID follow, then a comma.
Items in the shop are defined in an ID:Price format. A price of -1 uses the default price in item_db.txt. Be sure the price is not too low, or a you will open a Zeny exploit in your server!

Fundamentals
You can always look up commands that you need--even the best scripters don't have everything memorized. There are a few fundamentals that you should know by heart, though, since they are so commonly used.

### Message

`*mesÂ "`<string>`";`

This is the most basic command. Start the line with the word mes, then enter the message in quotes (don't forget the semicolon at the end!).
To add color, simply add ^ and the hex code anywhere in the message. A list can be found [here](http://www.immigration-usa.com/html_colors.html).
*As an example:*

`mesÂ "[^FF0000TestÂ NPC^000000]";`
`mesÂ "Hello!";`

*Will display:*

`[`<span style="color:#FF0000;">`TestÂ NPC`</span>`]`
`Hello!`

### Labels, Goto, and End

To create a label, type a label name and a colon at the start of a line. If the label does not end with an "end;" command, everything following the label will be read, so don't forget it between labels!
To go to a label, use the simple "goto" command:

`*gotoÂ `<label>`;`

*Note that there are "special" labels that trigger whenever a specific event occurs. The name usually makes it obvious, but you can find explanations in script_commands.txt. Here is a brief sampling:*

`OnClock`<hour><minute>`:`
`OnInit:`
`OnAgitStart:`
`OnAgitEnd:`
`OnTouch:`
`OnPCLoginEvent:`
`OnPCLogoutEvent:`
`OnPCBaseLvUpEvent:`
`OnPCJobLvUpEvent:`
`OnPCDieEvent:`
`OnPCKillEvent:`
`OnNPCKillEvent:`
`OnPCLoadMapEvent:`

### Menus, Close, and Next

`*menuÂ "`<option_text>`",`<target_label>`{,"`<option_text>`",`<target_label>`,...};`
`*close;`
`*next;`

Menus create a set of options, which trigger labels when selected. The text in quotes is what will be displayed, followed by its respective label. Enter as many choices as you want, and end the last one with a semicolon instead of a comma.
"Close" will close any message window that is open (from "mes" commands).
"Next" will clear the message window, bringing up a fresh screen.
*For example:*

`mesÂ "[TestÂ NPC]";`
`mesÂ "HowÂ areÂ youÂ doingÂ today?";`
`menuÂ "IÂ amÂ doingÂ okay!",doingokay,"NotÂ doingÂ tooÂ well",bad;`
`doingokay:`
`mesÂ "GladÂ toÂ hearÂ it!";`
`close;`
`end;`
`bad:`
`mesÂ "Aww,Â I'mÂ sorryÂ aboutÂ that.";`
`close;`
`end;`

### Conditions, Variables, and Set

`*if(condition)Â {`

<script>
}

`*elseÂ {`

<script>
}

Conditional statements "if" and "else" are the same as anywhere else. Multiple conditions can be specified: || means *or*, while && means *and*. == is *equal*, != is *not equal*. Inequalities can be used as well (&lt;, &gt;, &lt;=, &gt;=).
The "else" can be omitted, and the brackets aren't necessary unless multiple commands follow a conditional statement.
The type of variable used is defined in the name. There are permanent and temporary variables, as well as scope (temporary NPC), character, global, and global account. The default type is an integer, and adding $ as a suffix creates a string.
Here are some example types, taken from script_commands.txt:

`nameÂ Â -Â permanentÂ characterÂ integerÂ variable`
`name$Â -Â permanentÂ characterÂ stringÂ variable`
`@nameÂ Â -Â temporaryÂ characterÂ integerÂ variable`
`@name$Â -Â temporaryÂ characterÂ stringÂ variable`
`$nameÂ Â -Â permanentÂ globalÂ integerÂ variable`
`$name$Â -Â permanentÂ globalÂ stringÂ variable`
`$@nameÂ Â -Â temporaryÂ globalÂ integerÂ variable`
`$@name$Â -Â temporaryÂ globalÂ stringÂ variable`
`.nameÂ Â -Â NPCÂ integerÂ variable`
`.name$Â -Â NPCÂ stringÂ variable`
`.@nameÂ Â -Â scopeÂ integerÂ variable`
`.@name$Â -Â scopeÂ stringÂ variable`
`#nameÂ Â -Â permanentÂ localÂ accountÂ integerÂ variable`
`#name$Â -Â permanentÂ localÂ accountÂ stringÂ variable`
`##nameÂ Â -Â permanentÂ globalÂ accountÂ integerÂ variable`
`##name$Â -Â permanentÂ globalÂ accountÂ stringÂ variable`

The "set" command is used to give a value (or string) to a variable:

`*setÂ `<variable>`,`<expression>`;`

*The following script will pick a random number, store it as the temporary scope variable .@random, and display two different messages depending on the result:*

`setÂ .@random,Â rand(1,2);`
`ifÂ (.@randomÂ ==Â 1)Â {Â mesÂ "IÂ likeÂ you!Â :D";Â }`
`elseÂ {Â mesÂ "IÂ don'tÂ likeÂ you.Â Â GetÂ outÂ ofÂ here!";Â }`
`close;`

### Duplicating

It would be a huge waste of time and space to code the same NPC over and over again. By duplication, an NPC can be created in multiple locations.
Take a look at our old Test NPC:

`prontera,156,145,4Â `<tab>`Â scriptÂ `<tab>`Â TestÂ NPCÂ `<tab>`Â 58,{`

To be able to duplicate this, we will change the heading to this:

`-Â `<tab>`Â scriptÂ `<tab>`Â TestÂ NPC#01::testnpcÂ `<tab>`Â 58,{`

The location doesn't need to be defined in the NPC, since it will be in the duplicates.
The displayed name remains "Test NPC". But since NPC names must be unique, adding \#01 separates this one from the rest, which will be \#02, \#03, etc. Lastly, ::testnpc is the reference name used for duplicating NPCs; this part is not displayed on the screen.
After creating the base NPC, duplicates can be added anywhere to any file, so long as you use the same NPC name:

`spl_fild03,150,150,7Â `<tab>`Â duplicate(testnpc)Â `<tab>`Â TestÂ NPCÂ `<tab>`Â 58`
`niflheim,50,50,2Â `<tab>`Â duplicate(testnpc)Â `<tab>`Â TestÂ NPCÂ `<tab>`Â 58`
`tha_scene01,140,190,4Â `<tab>`Â duplicate(testnpc)Â `<tab>`Â TestÂ NPCÂ `<tab>`Â 58`

The first part is *map,x,y,direction*, as you're probably used to by now.
To define a duplicate, the word "duplicate" followed by the NPC, in parentheses, is needed. The last two parameters are the display name and sprite ID (yes, you can change these, too!).

Finished Product
Here is an example using the features explained above:

`prontera,156,145,4Â scriptÂ Â TestÂ NPC::testÂ Â 589,{`
`Â Â Â Â mesÂ "Hello,Â howÂ areÂ you?";`
`Â Â Â Â mesÂ "IÂ amÂ fine,Â howÂ areÂ you?";`
`Â Â Â Â menuÂ "IÂ amÂ doingÂ okay!",-,"NotÂ doingÂ tooÂ good",bad;`
`Â Â Â Â mesÂ "That'sÂ good,Â I'mÂ gladÂ toÂ hearÂ that";`
`Â Â Â Â close;`
`bad:`
`Â Â Â Â mesÂ "Awww,Â thatÂ makesÂ meÂ aÂ bitÂ ^FF0000sad^000000.Â SorryÂ toÂ hearÂ that.";`
`Â Â Â Â next;`
`Â Â Â Â mesÂ "WouldÂ youÂ likeÂ someÂ zenyÂ toÂ helpÂ yourselfÂ feelÂ better?";`
`Â Â Â Â next;`
`Â Â Â Â menuÂ "Sure,Â giveÂ itÂ toÂ me!",L_zeny,"Naw,Â NoÂ zenyÂ forÂ me",-;`
`Â Â Â Â close;`
`L_Zeny:`
`Â Â Â Â mesÂ "IÂ canÂ onlyÂ giveÂ youÂ zenyÂ ifÂ youÂ haveÂ 10,000Â orÂ less.";`
`Â Â Â Â ifÂ (ZenyÂ >Â 10000)Â gotoÂ toomuch;`
`Â Â Â Â mesÂ "YouÂ haveÂ 10,000Â zenyÂ orÂ less,Â IÂ see.";`
`Â Â Â Â setÂ Zeny,Zeny+10000;`
`Â Â Â Â next;`
`Â Â Â Â mesÂ "HopeÂ youÂ feelÂ better!";`
`Â Â Â Â close;`
`toomuch:`
`Â Â Â Â mesÂ "YouÂ haveÂ overÂ 10,000Â zeny,Â youÂ mustÂ feelÂ reallyÂ goodÂ aboutÂ yourself!";`
`Â Â Â Â close;`
`}`
`lhz_dun01,157,285,4Â Â Â Â duplicate(test)Â TestÂ NPCÂ Â Â Â 859`
`hu_fild05,186,210,4Â Â Â Â duplicate(test)Â TestÂ NPCÂ Â Â Â 859`
`yuno_fild07,221,179,4Â Â duplicate(test)Â TestÂ NPCÂ Â Â Â 859`
`tha_scene01,139,194,1Â Â duplicate(test)Â TestÂ NPCÂ Â Â Â 859`

Adding Scripts
For an NPC to be loaded, it needs to be added to a .conf file. This is typically *npc/scripts_custom.conf*.
Add a line, and enter your NPC file in the following format:

`npc:Â npc/path/to/script.txt`

That's it! You're finished!

External Links
**Reference Manuals for scriping commands**


**Sprite lists**


**Color Charts**


**Support, Request and Release**


[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Bg_get_data

[Category:Script_Command](/Category:Script_Command "wikilink") [Category:Battlegrounds_Command](/Category:Battlegrounds_Command "wikilink")

Syntax

Description
This command is part of the Battleground System and returns information about the selected BG team. For now there is only type 0 possible (maybe more will come sometime).

Type
| Value | Description                                  |
|-------|----------------------------------------------|
| 0     | Count of team members (0 if team not found). |

============================================================

## Bg_monster_set_team

Syntax

Description
This command will change the allegiance if a monster in battlegrounds. [GID](/GID "wikilink") can be set when spawning the monster via the [bg_monster](/bg_monster "wikilink") command.

Examples
`Â Â Â `[`end`](/end "wikilink")`;`
`OnEnable:`
`Â Â Â `[`mapannounce`](/mapannounce "wikilink")`Â "AÂ guardianÂ hasÂ beenÂ summonedÂ forÂ BattleÂ GroupÂ 2!",bc_map,"0xFFCE00";`
`Â Â Â `[`set`](/set "wikilink")`Â $@Guardian,Â `[`bg_monster`](/bg_monster "wikilink")`($@BG_2,"bat_a01",268,204,"Guardian",1949,"NPCNAME::OnMyMobDead");`
`Â Â Â `[`initnpctimer`](/initnpctimer "wikilink")`;`
`Â Â Â `[`end`](/end "wikilink")`;`
[`OnTimer`](/OnTimer "wikilink")`1000:`
`Â Â Â `[`stopnpctimer`](/stopnpctimer "wikilink")`;`
`Â Â Â `[`mapannounce`](/mapannounce "wikilink")`Â "Erm,Â sorryÂ aboutÂ that!Â ThisÂ monsterÂ wasÂ meantÂ forÂ BattleÂ GroupÂ 1.",bc_map,"0xFFCE00";`
`Â Â Â `[`bg_monster_set_team`](/bg_monster_set_team "wikilink")`Â $@Guardian,Â $@BG_1;`
`Â Â Â `[`end`](/end "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink") [Category:Battlegrounds_Command](/Category:Battlegrounds_Command "wikilink")

============================================================

## Bindatcmd

Syntax

Description
This command will bind a NPC event label to an [atcommand](/atcommand "wikilink"). Upon execution of the atcommand, the user will invoke the NPC event label. Each atcommand is only allowed one binding. If you rebind, it will override the original binding.

The following variables are created upon execution:


Example
When a user types the command "@test", an angel effect will be shown.

`-Â Â `[`script`](/Basic_Scripting#NPC "wikilink")`Â atcmd_exampleÂ Â Â -1,{`
[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â `[`bindatcmd`](/bindatcmd "wikilink")`Â "test",`[`strnpcinfo`](/strnpcinfo "wikilink")`(3)+"::OnAtcommand";`
`Â Â Â `[`end`](/end "wikilink")`;`
`OnAtcommand:`
`Â Â Â `[`specialeffect2`](/specialeffect2 "wikilink")`Â 338;`
`Â Â Â end;`
`}`

For another good usage example of this command, see [changelook](/changelook "wikilink").

See Also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Bonus_script

Syntax
    <script code>
    ",<duration>{,<flag>{,<type>{,<char_id>}}};

Description
This command will attach a script to a player for a given duration, in seconds. After that time, the script will automatically expire. The same bonus cannot be stacked. By default, this bonus will be stored on \`bonus_script\` table when player logs out.

Note that the maximum number of 'bonus_script' commands that can run simultaneously for a player is 10 (MAX_PC_BONUS_SCRIPT in 'src/map/pc.h').

| Flag | Description                  |
|------|------------------------------|
| &1   | Remove when dead.            |
| &2   | Removable by Dispell.        |
| &4   | Removable by Clearance.      |
| &8   | Remove when player logs out. |
||

| Type | Description |
|------|-------------|
| 0    | Buff        |
| 1    | Debuff      |

Example
`//Â AppleÂ givesÂ youÂ +5Â StrÂ bonusÂ forÂ 1Â minuteÂ whenÂ it'sÂ consumed.`
`512,Apple,Apple,0,15,,20,,,,,0xFFFFFFFF,63,2,,,,,,{Â bonus_scriptÂ "{Â bonusÂ bStr,5;Â }",60;Â },{},{}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Break

Syntax

Description
This command lets you break out of a [loop](/Loops#Break_and_Continue "wikilink") or a [switch](/switch "wikilink") block. After the break; command has been issued, the script will continue where needed.

Examples
[`switch`](/switch "wikilink")`Â (`[`getequipweaponlv`](/getequipweaponlv "wikilink")`(EQI_HAND_L))Â {`
[`case`](/case "wikilink")`Â 0:`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ holdingÂ aÂ shield,Â soÂ itÂ doesntÂ haveÂ aÂ level";`
`Â Â Â `[`break`](/break "wikilink")`;`
[`case`](/case "wikilink")`Â 1:`
`caseÂ 2:`
`caseÂ 3:`
`caseÂ 4:`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ holdingÂ aÂ lvlÂ "+Â `[`getequipweaponlv`](/getequipweaponlv "wikilink")`(EQI_HAND_L)Â +"Â weapon";`
`Â Â Â `[`break`](/break "wikilink")`;`
[`case`](/case "wikilink")`Â 5:`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ holdingÂ aÂ lvlÂ 5Â weapon,Â hm,Â mustÂ beÂ aÂ customÂ design";`
`Â Â Â `[`break`](/break "wikilink")`;`
`}`
[`close`](/close "wikilink")`;`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## BrowEdit

**BrowEdit** is a Ragnarok Online map editor made by Borf.

Using BrowEdit
Using BrowEdit may seem confusing at first, but once you get the hang of it it seems less intimidating.

Basic Controls
Right Click Drag = Moves map around
Shift + Right Click Drag = Zoom in/out
Left click = Select/Place
U key = Undo

Configuring BrowEdit
Configuring BrowEdit is important. If you start without configuring it then it won't know where your grfs are and it may be too big for your screen. Navigate to your BrowEdit folder, then go into **data** and then **configs**. Open rodesktop.xml with a text editor. You will need to change your RO directory and GRF locations. You can either have the program full screened, or change resx and resy to whatever number you want (there are two of these values, change them both to change your screen resolution), and change the fullscreen option to false. 800x600 is a nice resolution. This will be all we're covering for configuration.

Creating a Map
Open BrowEdit, then select File and then New. Input the width and height, remember that a little goes a long ways. In this tutorial we'll be using 50x50. You can use shift+right click drag to zoom in and out, or use your mouse's wheel. You should see a plain yellow surface, and underneath that is water.

Textures
Click the windows tab, then select textures, or you can press the T key to bring up the textures window. If your GRF and RO directory settings are correct, you should see a bunch of images and folders. If your map is going to be all land (or land with water) then you will need to make the edges black. If its going to be like an island, you won't need this. The black texture is located in the very first folder, RO. In the last folder, before the custom folder, is where all the ground textures are, so select that and then either click the down button or click the scroll button and look for a texture you like. Once you have found one, click it once, then click the x to exit that window. Now you should see one large square with the texture you selected, and one large empty square. Click and drag on the square with your selected texture, and highlight that entire square. Then click Edit, then select "Select All Tiles", then click Edit again and select "Fill area with selected texture".

Using the = and - keys resizes your texture, space rotates it, \[ and \] lets you scroll though the maps texture list, H and V change the texture's horizontal and vertical facing of the selected texture and \[ and \] to change which texture is selected. Gravity uses the tiles at half normal scale in their maps as well as having them at other scaled sizes (Including some that Browedit can't do) so look at official maps for the scale of things. In case you do a miss take you can use the undo key U to undo it. To do invisible tiles simply use the backspace key to change the area covered by your tile brush (that has a texture selected) to do invisible tiles.

Height
Select Edit then Detailed terrain edit..., then select a number. The number is the number of tiles you will move at once. 1 is one tile, 2 is two tiles, ect. Left click to make the terrain go up, left click and hold to make it go up fast, and you can hold the right click and left click to make it go the opposite way.

Sloping
You can use F for a sharp slope, or S for a smooth slope. You can also select Edit then Sloping, then click on the area you want to slope. You can only slope with a detailed terrain edit number higher than 1. It works the same as height, left click to make it slope up, left and right click to make it slope down. The area is the size of your height editing tool grid which can be changed with the = and - keys.

External Links

BrowEdit Tutorials
<table>
<tbody>
<tr class="odd">
<td><div style="width: 90%; margin: auto; background:#f5faff; border: 1px solid #AAA;">
<div style="background:#f5faff; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 200%;">
<p>Welcome to the BrowEdit Video Tutorial Section<br />
</p>
</div>
</div></td>
</tr>
<tr class="even">
<td><div style="background: #ACD; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 120%;">
<p>About BrowEdit Video Tutorials</p>
</div>
<div style="padding-left: 1em;">
<p><a href="/BrowEdit" title="wikilink">BrowEdit</a> also known as &quot;Borf's Ragnarok Online World Editor&quot; is a graphics design program used to create fully functional Ragnarok maps. The following video tutorials provided below teaches those who have little to no knowledge working with BrowEdit by providing the fundamentals of using BrowEdit and understanding how to create a proper map. Simply follow the list of tutorial by starting from BrowEdit Tutorial #1 and then proceeding to the next consecutive number.</p></td>
</tr>
<tr class="odd">
<td><div style="background: #ACD; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 120%;">
<p>Tutorial List</p>
</div>
<div style="padding-left: 1em;">
<p>Visit the following link for the tutorial videos: <a href="http://rathena.org/board/topic/53466-guide-syoujis-browedit-tutorial-videos/" class="uri">http://rathena.org/board/topic/53466-guide-syoujis-browedit-tutorial-videos/</a></p></td>
</tr>
</tbody>
</table>

[Category:Mapping](/Category:Mapping "wikilink")

============================================================

## Callfunc

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command lets you call up a function NPC. A function NPC can be called from any script on any map server. Using the 'return' command it will come back to the place that called it.

You can pass arguments to your function - values telling it what exactly to do - which will be available there with getarg() (see 'getarg') Notice that returning is not mandatory, you can end execution right there.

If you want to return a real value from inside your function NPC, it is better to write it in the function form, which will also work and will make the script generally cleaner.

Examples
        place,50,50,6   script  Woman   115,{
            mes "[Woman]"
            mes "Lets see if you win";
            callfunc "funcNPC";
            mes "Well done you have won";
            close;
        }
        function    script  funcNPC {
            if(rand(2)) return;
            mes "Sorry you lost";
            close;
        }

        place,50,50,6   script  Man 115,{
            mes "[Man]"
            mes "Gimme a number!";
            next;
            input .@number;
            if (callfunc("OddFunc",.@number)) mes "It's odd!";
            else mes "It's even";
            close;
        }
        function    script  OddFunc {
            if (getarg(0)%2) return 1; // it's odd
            return 0; // it's even
        }

============================================================

## Callshop

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
These are a series of commands used to create dynamic shops. The callshop function calls a invisible shop (view -1) as if the player clicked on it.

The shop which is called by callshop (as long as an npcshop\* command is executed from that NPC (see note 1)) will trigger the labels [OnBuyItem](/OnBuyItem "wikilink") and [OnSellItem](/OnSellItem "wikilink"). These labels can take over handling for relatively the buying of items from the shop and selling the items to a shop. Via these labels you can customize the way an item is bought or sold by a player.

In the [OnBuyItem](/OnBuyItem "wikilink"), two arrays are set (@bought_nameid and @bought_quantity), which hold information about the name id (item id) sold and the amount sold of it. Same goes for the [OnSellItem](/OnSellItem "wikilink") label, only the variables are named different (@sold_nameid and @sold_quantity). An example on a shop comes with rAthena, and can be found in the file.

This example shows how to use the labels and their set variables to create a dynamic shop.

Note 1: These labels will only be triggered if a npcshop\* command is executed, this is because these commands set a special data on the shop npc,named master_nd in the source. The [OnSellItem](/OnSellItem "wikilink") and [OnBuyItem](/OnBuyItem "wikilink") are triggered in the NPC whose master_nd is given in the shop. This was found out thanks to 'Hondacrx', noticing the [OnBuyItem](/OnBuyItem "wikilink") wasn't triggered unless [npcshopitem](/npcshopitem "wikilink") was used. After rechecking the source, I found what caused this.

Parameters
### Option

| Option | Description                              |
|--------|------------------------------------------|
| 0      | The normal window (buy, sell and cancel) |
| 1      | The buy window                           |
| 2      | The sell window                          |

Examples
    //This will call the shop named DaShop and opens the buy menu.
    callshop "DaShop",1;

============================================================

## Callsub

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will go to a specified label within the current script (do NOT use quotes around it) coming in as if it were a '[callfunc](/callfunc "wikilink")' call, and pass it arguments given, if any, which can be recovered there with '[getarg](/getarg "wikilink")'. When done there, you should use the '[return](/return "wikilink")' command to go back to the point from where this label was called. This is used when there is a specific thing the script will do over and over, this lets you use the same bit of code as many times as you like, to save space and time, without creating extra NPC objects which are needed with '[callfunc](/callfunc "wikilink")'. A label is not callable in this manner from another script.

Examples
            mes "[Woman]";
            mes "Lets see if you win";
            callsub Check,2;
            mes "Well done you have won";
            close;
        Check:
            if(!rand(getarg(0))) return;
            mes "Sorry you lost";
            close;

============================================================

## Cardscnt

Syntax

Description
This function will return the number of cards inserted into the weapon currently equipped on the invoking character. While this function was meant for item scripts, it will work outside them:

Examples
[`if`](/if "wikilink")`Â (`[`cardscnt`](/cardscnt "wikilink")`()Â ==Â 4)`
`Â Â Â `[`mes`](/mes "wikilink")`Â "SoÂ you'veÂ stuckÂ fourÂ cardsÂ intoÂ thatÂ weapon,Â thinkÂ you'reÂ coolÂ now?";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Changebase

Syntax

Description
This will change the appearance of the invoking character, unless an account ID is given, to that of a specified job class. Nothing but appearance will change. This command is used in item scripts for "Wedding Dress" and "Tuxedo" so the character like job 22, which is the job number of the wedding sprites. It would be entered in the equip bonus section of an item.

Examples
### In Items

`2338,Wedding_Dress,WeddingÂ Dress,5,43000,,500,,0,,0,119529470,7,0,16,,0,1,0,{Â `[`bonus`](/bonus "wikilink")`Â bMdef,15;Â changebaseÂ 22;Â }`

### In NPCs

[`mes`](/mes "wikilink")`Â "[TestÂ NPC]";`
[`mes`](/mes "wikilink")`Â "WouldÂ youÂ likeÂ toÂ changeÂ yourÂ sprite?";`
[`if`](/if "wikilink")`(`[`select`](/select "wikilink")`("-Â Yeah,Â that'dÂ beÂ /AWSM!",Â "-Â No,Â wthÂ areÂ youÂ onÂ about?!")Â ==Â 1)`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Excellent!";`
`Â Â Â `[`mes`](/mes "wikilink")`Â "IÂ willÂ nowÂ makeÂ youÂ lookÂ likeÂ a....";`
`Â Â Â `[`changebase`](/changebase "wikilink")`Â 4072;`
`Â Â Â `[`mes`](/mes "wikilink")`Â "^FF0000ShadowÂ Chaser^000000!!";`
[`else`](/else "wikilink")
`Â Â Â `[`mes`](/mes "wikilink")`Â "ButÂ but..Â ShadowÂ ChasersÂ areÂ /awsmÂ T.T";`
[`close`](/close "wikilink")`;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Changelook

Syntax

Description
Identical to '[setlook](/setlook "wikilink")', but only client side (doesn't save).

Example
The following code is a good example of the use of **changelook**. It uses [bindatcmd](/bindatcmd "wikilink") to assign @afk some code to use, then detects the players upper headgear, changes it to show the AFK hat and allows the player to use the command again to put their original hat back.

`-Â Â scriptÂ Â atcmd_afkÂ Â Â -1,{`
`Â Â Â `[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â `[`bindatcmd`](/bindatcmd "wikilink")`("afk","atcmd_afk::OnAFK");`
`Â Â Â end;`
`Â Â Â OnAFK:`
`Â Â Â ifÂ (@AFK)Â {`
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â @AFK,Â 0;`
`Â Â Â Â Â Â Â `**`changelook`**`Â 4,headupper;Â //Â ChangesÂ "headÂ top"Â toÂ useÂ theÂ playersÂ previousÂ headgearÂ sprite`
`Â Â Â Â Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "AwayÂ FromÂ KeyboardÂ modeÂ disabled.";`
`Â Â Â Â Â Â Â end;`
`Â Â Â }Â elseÂ {`
`Â Â Â Â Â Â Â setÂ @AFK,Â 1;`
`Â Â Â Â Â Â Â headupper=`[`getlook`](/getlook "wikilink")`(4);Â //Â getlook(4)Â fetchesÂ theÂ "headÂ top"Â idÂ andÂ assignsÂ itÂ toÂ headupperÂ forÂ laterÂ use`
`Â Â Â Â Â Â Â `**`changelook`**`Â 4,471;Â //Â ChangesÂ "headÂ top"Â toÂ useÂ theÂ spriteÂ withÂ viewÂ idÂ 471Â (AFKÂ Hat)`
`Â Â Â Â Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "AwayÂ FromÂ KeyboardÂ modeÂ enabled.";`
`Â Â Â Â Â Â Â end;`
`Â Â Â }`
`}`

As **changelook** is only a client-side visual change, it doesn't send any changes to be saved towards the char server. It keeps your current headgear as it is, but just changes the view id.

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Changerace

Introduction
Very simply, this bonus will enable you to use `bonus` `bChangeRace,x;` where `x` `is` `a` `race` such as `RC_Demon`, `RC_Angel` etc.

Implementation
### Open /src/map/map.h

**Find:**

       SP_ADD_SKILL_BLOW, SP_SP_VANISH_RATE, SP_MAGIC_SP_GAIN_VALUE, SP_MAGIC_HP_GAIN_VALUE //2041-2044

**Replace with:**

       SP_ADD_SKILL_BLOW, SP_SP_VANISH_RATE, SP_MAGIC_SP_GAIN_VALUE, SP_MAGIC_HP_GAIN_VALUE, SP_SETRACE //2041-2045

### Open /src/map/pc.c

**Find:**

       case SP_LUK:
            if(sd->state.lr_flag != 2)
                sd->param_bonus[type-SP_STR]+=val;
            break;

**Below add:**

       case SP_SETRACE:
            if(val < 0 || val > RC_MAX-1) {
                ShowWarning("pc_bonus: invalid race defined for 'bChangeRace', set to %d.\n", val);
            } else if(sd->state.lr_flag != 2)
            {
                sd->status.race =
                sd->battle_status.race = val;
            }
            break;

### Open /db/const.txt

**Find:**

    bMagicHPGainValue<tab>2044

**Below add:**

    bChangeRace<tab>2045

### Conclusion

The script will be ready to go after a re-compile. Simply use `bonus` `bChangeRace,x;` and you'll be able to alter the race of a player (when wearing an item with the bonus in-tact).

[Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Charat

Syntax

Description
Returns char at specified index. If index is out of range, returns an empty string.

The first letter of a string is index 0.

Examples
[`charat`](/charat "wikilink")`("ThisÂ isÂ aÂ string",Â 10);Â //returnsÂ "s"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Charcommand

Syntax

Description
NOTE: This command is changed a bit on newer trunk versions, scroll down a bit for the new version!

On older trunk versions and stable:

command is the name of the current character ([strcharinfo](/strcharinfo "wikilink")(0)) followed by ':' and the command and it's parameters.

Newer Trunk version:

The big change is that the character name is no longer needed. This also enabled the commands to run without a player attached (according to Lance).

Examples
On older trunk versions and stable:

`//WillÂ beÂ executedÂ asÂ ifÂ aÂ lvlÂ 99Â GMÂ doneÂ theÂ #optionÂ command.`
`charcommandÂ strcharinfo(0)+":#optionÂ 0Â 0Â 0Â Roy";`

Newer Trunk version:

`//thisÂ wouldÂ doÂ theÂ sameÂ asÂ above,Â butÂ nowÂ doesn'tÂ needÂ aÂ playerÂ attachedÂ byÂ default.`
`charcommandÂ "#optionÂ 0Â 0Â 0Â Roy";`

[Category:Script Command](/Category:Script_Command "wikilink") [Category:Obsolete Script Command](/Category:Obsolete_Script_Command "wikilink")

============================================================

## Charisalpha

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return 1 if the character number Position in the given string is a letter, 0 if it isn't a letter but a digit or a space.

Examples
    if(charisalpha("test 1234",2))
        mes "It's a letter!";
    else
        mes "It's not a letter... :(";

============================================================

## Checkcell

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will return 1 or 0, depending on whether the specified cell has the 'type' flag set or not. There are various types to check, all mimicking the server's cell_chk enumeration. The types can be found in .

The meaning of the individual types can be confusing, so here's an overview:

`Â -Â cell_chkwall/water/cliff`
`Â Â Â theseÂ checkÂ directlyÂ forÂ theÂ 'terrainÂ component'Â ofÂ theÂ specifiedÂ cell`
`Â -Â cell_chkpass/reach/nopass/noreach`
`Â Â Â passableÂ =Â notÂ wallÂ &Â notÂ cliff,Â reachableÂ =Â passableÂ wrt.Â no-stackingÂ mod`
`Â -Â cell_chknpc/basilica/landprotector/novending/nochat`
`Â Â Â theseÂ checkÂ forÂ specificÂ dynamicÂ flagsÂ (theirÂ nameÂ indicatesÂ whatÂ theyÂ do)`

Return Values
| Value | Description         |
|-------|---------------------|
| 0     | The flag isn't set. |
| 1     | The flag is set.    |

Examples
        mes "Pick a destination map.";
        input .@map$;
        mes "Alright, now give me the coordinates.";
        input .@x;
        input .@y;
        if( !checkcell(.@map$,.@x,.@y,cell_chkpass) )
        {
            mes "Can't warp you there, sorry!";
            close;
        }
        else
        {
            mes "Ok, get ready...";
            close2;
            warp .@map$, .@x, .@y;
            end;
        }

============================================================

## Checkchatting

Syntax

Description
Checks if the player is vending or in a chatroom. Name is optional, and defaults to the attached player if omitted.

| Value | Description                             |
|-------|-----------------------------------------|
| 0     | The player is not chatting/vending.     |
| 1     | The player is chatting/vending.         |
| 2     | The player is vending using @autotrade. |

Return value returns respectively as what your function is. (e.g.: if the value of checkchatting() = 1 but checkvending() = 0, then he is currently chatting, not vending)

Examples
`//ThisÂ willÂ checkÂ ifÂ AaronÂ isÂ vending,Â andÂ ifÂ so,Â putÂ aÂ messageÂ inÂ front`
`//ofÂ theÂ attachedÂ playerÂ sayingÂ AaronÂ isÂ vending.`
[`if`](/if "wikilink")`Â (`[`checkvending`](/checkvending "wikilink")`("Aaron"))`
`Â Â Â `[`mes`](/mes "wikilink")`Â "AaronÂ isÂ currentlyÂ vending!";`
`//ThisÂ willÂ checkÂ ifÂ theÂ attachedÂ playerÂ inÂ aÂ chatÂ roomÂ orÂ not.`
[`if`](/if "wikilink")`Â (`[`checkchatting`](/checkchatting "wikilink")`())`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ currentlyÂ chatting!";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Checkequipedcard

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return 1 if the card specified by it's item ID number is inserted into any equipment they have in their inventory, currently equipped or not.

Return Values
| Value | Description                                 |
|-------|---------------------------------------------|
| 0     | The Card is inserted into any equipment.    |
| 1     | The Card isn't inserted into any equipment. |

============================================================

## Checkfalcon

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
The function will return 1 if the invoking character has a falcon and 0 if they don't.

Return Values
| Value | Description                          |
|-------|--------------------------------------|
| 0     | The character doesn't have a falcon. |
| 1     | The character has a falcon.          |

Examples
        if (checkfalcon()) mes "But you already have a falcon!";

============================================================

## Checkhomcall

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This function checks if the attached player's Homunculus is active, and will return the following values:

| Value | Description                                |
|-------|--------------------------------------------|
| -1    | The player has no Homunculus.              |
| 0     | The player's Homunculus is active.         |
| 1     | The player's Homunculus is vaporized.      |
| 2     | The player's Homunculus is in morph state. |

============================================================

## Checkoption

Syntax

Description
The '[setoption](/setoption "wikilink")' series of functions check for a so-called option that is set on the invoking character. 'Options' are used to store status conditions and a lot of other non-permanent character data of the yes-no kind. For most common cases, it is better to use '[checkcart](/checkcart "wikilink")','[checkfalcon](/checkfalcon "wikilink")','[checkriding](/checkriding "wikilink")' and other similar functions, but there are some options which you cannot get at this way. They return 1 if the option is set and 0 if the option is not set.

Option numbers (except for opt1) are bitmasks - you can add them up to check for several states, but the functions will return true if at least one of them is in effect.

'[setoption](/setoption "wikilink")' will set options on the invoking character. There are no second and third versions of this command, so you can only change the values in the first list (cloak, cart, ruwach, etc). if flag is 1 (default when omitted), the option will be added to what the character currently has; if 0, the option is removed.

This is definitely not a complete list of available option flag numbers. Ask a core developer (or read the source: for the full list.

Option Values for [checkoption](/checkoption "wikilink")
| Value   | Description                                |
|---------|--------------------------------------------|
| 0x1     | Sight in effect.                           |
| 0x2     | Hide in effect.                            |
| 0x4     | Cloaking in effect.                        |
| 0x8     | Cart number 1 present.                     |
| 0x10    | Falcon present.                            |
| 0x20    | Peco Peco present.                         |
| 0x40    | GM Perfect Hide in effect.                 |
| 0x80    | Cart number 2 present.                     |
| 0x100   | Cart number 3 present.                     |
| 0x200   | Cart number 4 present.                     |
| 0x400   | Cart number 5 present.                     |
| 0x800   | Orc head present.                          |
| 0x1000  | The character is wearing a wedding sprite. |
| 0x2000  | Ruwach is in effect.                       |
| 0x4000  | Chasewalk in effect.                       |
| 0x8000  | Flying or Xmas suit.                       |
| 0x10000 | Sighttrasher.                              |

Option Values for [checkoption1](/checkoption1 "wikilink")
| Value | Description                                     |
|-------|-------------------------------------------------|
| 1     | Petrified.                                      |
| 2     | Frozen.                                         |
| 3     | Stunned.                                        |
| 4     | Sleeping.                                       |
| 6     | Petrifying (the state where you can still walk) |

Option Values for [checkoption2](/checkoption2 "wikilink")
| Value | Description                                                                                    |
|-------|------------------------------------------------------------------------------------------------|
| 0x1   | Poisoned.                                                                                      |
| 0x2   | Cursed.                                                                                        |
| 0x4   | Silenced.                                                                                      |
| 0x8   | Signum Crucis (plays a howl-like sound effect, but otherwise no visible effects are displayed) |
| 0x10  | Blinded.                                                                                       |
| 0x80  | Deadly poisoned.                                                                               |

Return Values
| Value | Description                      |
|-------|----------------------------------|
| 0     | The option(s) is/are not set.    |
| 1     | One of the asked options is set. |

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Checkquest

Syntax

Description
`IfÂ noÂ additionalÂ argumentÂ supplied,Â returnÂ theÂ stateÂ ofÂ theÂ quest:Â `
`Â Â Â -1Â =Â QuestÂ notÂ startedÂ (notÂ inÂ questÂ log)`
`Â Â Â 0Â Â =Â QuestÂ hasÂ beenÂ given,Â butÂ theÂ stateÂ isÂ "inactive"`
`Â Â Â 1Â Â =Â QuestÂ hasÂ beenÂ given,Â andÂ theÂ stateÂ isÂ "active"`
`Â Â Â 2Â Â =Â QuestÂ completed`

If parameter "PLAYTIME" is supplied:

`Â Â Â -1Â =Â QuestÂ notÂ startedÂ (notÂ inÂ questÂ log)`
`Â Â Â 0Â Â =Â theÂ timeÂ limitÂ hasÂ notÂ yetÂ beenÂ reached`
`Â Â Â 1Â Â =Â theÂ timeÂ limitÂ hasÂ notÂ beenÂ reachedÂ butÂ theÂ questÂ isÂ markedÂ asÂ complete`
`Â Â Â 2Â Â =Â theÂ timeÂ limitÂ hasÂ beenÂ reached`

If parameter "HUNTING" is supplied:

`Â Â Â -1Â =Â QuestÂ notÂ startedÂ (notÂ inÂ questÂ log)`
`Â Â Â 0Â Â =Â youÂ haven'tÂ killedÂ allÂ ofÂ theÂ targetÂ monstersÂ andÂ theÂ timeÂ limitÂ hasÂ notÂ beenÂ reached.`
`Â Â Â 1Â Â =Â youÂ haven'tÂ killedÂ allÂ ofÂ theÂ targetÂ monstersÂ butÂ theÂ timeÂ limitÂ hasÂ beenÂ reached.`
`Â Â Â 2Â Â =Â you'veÂ killedÂ allÂ ofÂ theÂ targetÂ monsters`

Examples
[`if`](/if "wikilink")`Â (`**`checkquest`**`(12059)==Â -1)Â `[`setquest`](/setquest "wikilink")`Â 12059;`

This checks the status of quest with ID 12059. If -1 is returned (-1 = Quest not started (not in quest log)) then the script will start the quest using [setquest](/setquest "wikilink").

[`set`](/set "wikilink")`Â .@etower_timer,`**`checkquest`**`(60200,PLAYTIME);Â //Â 1Â week`
[`set`](/set "wikilink")`Â .@etower_timer2,`**`checkquest`**`(60201,PLAYTIME);Â //Â 4Â hours`

This places the returned values of quest with ID 60200 and 60201 into 2 variables for later use in the NPC script.

[`if`](/if "wikilink")`Â (`**`checkquest`**`(3040)>=0)Â `[`erasequest`](/erasequest "wikilink")`Â 3040;`
[`if`](/if "wikilink")`Â (`**`checkquest`**`(3040)Â ==Â -1)Â `[`setquest`](/setquest "wikilink")`Â 3040;`

This script checks the status of quest with ID 3040 and performs actions accordingly.
The first line uses [erasequest](/erasequest "wikilink") to erase the quest is the returned value is 0 (0 = Quest has been given, but the state is "inactive").
The second line will place the quest into the players quest log if the returned status is -1 (-1 = Quest not started (not in quest log)).

The following is a copy/paste from . The NPC dialogue has been cut short as it serves no purpose in this example.

`gef_fild05,80,149,3Â Â Â Â scriptÂ Â Myu#08_hatÂ Â 877,{`
`Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Meow...";`
`Â Â Â `[`emotion`](/emotion "wikilink")`Â 23;`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`if`](/if "wikilink")`(hatcat2008Â ==Â 0)Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "Oh?Â Aren'tÂ youÂ anÂ adventurer?";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "WhatÂ bringsÂ youÂ here?Â Ho,Â youÂ areÂ notÂ hereÂ toÂ harmÂ WildÂ Roses,Â areÂ you?";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "(Meow!)";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`//////////////////Â ScriptÂ ShortenedÂ //////////////////`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "IfÂ youÂ manageÂ toÂ doÂ that,Â IÂ willÂ giveÂ youÂ somethingÂ preciousÂ whichÂ IÂ reallyÂ adore.";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â `[`switch`](/switch "wikilink")`(`[`select`](/select "wikilink")`("ThatÂ soundsÂ troublesome..:WhatÂ shouldÂ IÂ do?")){`
`Â Â Â Â Â Â Â `[`case`](/case "wikilink")`Â 1:`
`//////////////////Â ScriptÂ ShortenedÂ //////////////////`
`Â Â Â Â Â Â Â `[`case`](/case "wikilink")`Â 2:`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "OfÂ courseÂ takeÂ careÂ ofÂ thoseÂ KoboldÂ ArchersÂ Meow!";`
`//////////////////Â ScriptÂ ShortenedÂ //////////////////`
`Â Â Â Â Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â Â Â Â Â `[`switch`](/switch "wikilink")`(`[`select`](/select "wikilink")`("Isn'tÂ thatÂ tooÂ much?:That'sÂ easy")){`
`Â Â Â Â Â Â Â Â Â Â Â `[`case`](/case "wikilink")`Â 1:`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "..ButÂ theyÂ won'tÂ giveÂ upÂ ifÂ weÂ dontÂ reallyÂ teachÂ themÂ aÂ lesson.";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "WellÂ IfÂ youÂ thinkÂ it'sÂ tooÂ muchÂ forÂ you,Â soÂ beÂ it.";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â Â Â Â Â Â Â Â Â `[`case`](/case "wikilink")`Â 2:`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "ButÂ youÂ haveÂ toÂ keepÂ oneÂ thingÂ inÂ mindÂ andÂ itÂ is";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "obiously,Â NEVERÂ EVERÂ doÂ anyÂ harmÂ toÂ WildÂ Roses.";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "IfÂ youÂ do,Â it'sÂ allÂ overÂ forÂ you.";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "SoÂ youÂ betterÂ beÂ careful..Â ";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "MeowÂ MeowÂ Meow..";`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â hatcat2008,1;`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`setquest`](/setquest "wikilink")`Â 7054;Â `**`//Puts` `the` `quest` `7054` `into` `the` `players` `quest` `log`**
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`setquest`](/setquest "wikilink")`Â 7055;Â `**`//Puts` `the` `quest` `7054` `into` `the` `players` `quest` `log`**
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â Â Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â }`
`Â Â Â }Â `[`else`](/else "wikilink")`Â `[`if`](/if "wikilink")`(hatcat2008Â ==Â 1)Â {`
`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`(`**`checkquest`**`(7055,HUNTING)Â ==Â 2)Â {Â `**`//Checks` `to` `see` `if` `you` `killed` `a` `Wild` `Rose`**
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "DidÂ youÂ thinkÂ IÂ didn'tÂ knowÂ whatÂ youÂ haveÂ done?";`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "Huh?";`
`Â Â Â Â Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`//////////////////Â ScriptÂ ShortenedÂ //////////////////`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "(Meow..)";`
`Â Â Â Â Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â hatcat2008,0;`
`Â Â Â Â Â Â Â Â Â Â Â `[`erasequest`](/erasequest "wikilink")`Â 7054;Â `**`//Removes` `the` `quest` `7054` `from` `the` `players` `quest` `log`**
`Â Â Â Â Â Â Â Â Â Â Â `[`erasequest`](/erasequest "wikilink")`Â 7055;Â `**`//Removes` `the` `quest` `7054` `from` `the` `players` `quest` `log`**
`Â Â Â Â Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â Â Â Â Â }Â `[`else`](/else "wikilink")`Â `[`if`](/if "wikilink")`(`**`checkquest`**`(7054,HUNTING)Â ==Â 2)Â {Â `**`//Checks` `to` `see` `if` `you` `killed` `1000` `Kobold` `Archers`**
`//////////////////Â ScriptÂ ShortenedÂ //////////////////`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "Now,Â justÂ takeÂ itÂ andÂ leave.Â WildÂ RosesÂ feelÂ uncomfortableÂ withÂ anÂ adventurerÂ aroundÂ them.";`
`Â Â Â Â Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â hatcat2008,2;`
`Â Â Â Â Â Â Â Â Â Â Â `[`getitem`](/getitem "wikilink")`Â 5446,1;`
`Â Â Â Â Â Â Â Â Â Â Â `[`erasequest`](/erasequest "wikilink")`Â 7054;Â `**`//Removes` `the` `quest` `7054` `from` `the` `players` `quest` `log`**
`Â Â Â Â Â Â Â Â Â Â Â `[`erasequest`](/erasequest "wikilink")`Â 7055;Â `**`//Removes` `the` `quest` `7055` `from` `the` `players` `quest` `log`**
`Â Â Â Â Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ getÂ itÂ now,Â huh?";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "ONEÂ THOUSANDÂ TIMES!Â -chuckles-";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "(MeowÂ MeowÂ Meow~)";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "["+`[`strcharinfo`](/strcharinfo "wikilink")`(0)+"]";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "(WhatÂ aÂ weirdo..Â Anyways..what'sÂ withÂ thatÂ meowÂ meowÂ sound?)";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "JustÂ keepÂ yourÂ promises.";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "afterÂ theÂ workÂ isÂ done...Ok?";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "OfÂ course!Â Don'tÂ worryÂ aboutÂ that~";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }Â `[`else`](/else "wikilink")`Â `[`if`](/if "wikilink")`(hatcat2008Â ==Â 2)Â {`
`//////////////////Â ScriptÂ ShortenedÂ //////////////////`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "ourÂ situationÂ hasn'tÂ changedÂ atÂ all.Â WouldÂ youÂ mindÂ helpingÂ usÂ onceÂ more?";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "MyuÂ slidesÂ herÂ neckÂ mockingÂ likeÂ she'sÂ slittingÂ herÂ throat.";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "HerÂ mouthÂ looksÂ likeÂ it'sÂ saying.";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "Â 'O.N.E.Â T.H.O.U.S.A.N.D.'Â ";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â `[`switch`](/switch "wikilink")`(`[`select`](/select "wikilink")`("NO!:Sure."))Â {`
`Â Â Â Â Â Â Â `[`case`](/case "wikilink")`Â 1:`
`//////////////////Â ScriptÂ ShortenedÂ //////////////////`
`Â Â Â Â Â Â Â `[`case`](/case "wikilink")`Â 2:`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ knowÂ theÂ drillÂ right?";`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "NeverÂ everÂ touchÂ theÂ WildÂ Roses,Â OnlyÂ huntÂ downÂ theÂ KoboldÂ Archers.";`
`Â Â Â Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "GiveÂ themÂ 1,000Â timesÂ despair!";`
`Â Â Â Â Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â hatcat2008,1;`
`Â Â Â Â Â Â Â Â Â Â Â `[`setquest`](/setquest "wikilink")`Â 7054;Â `**`//Puts` `the` `quest` `7054` `into` `the` `players` `quest` `log`**
`Â Â Â Â Â Â Â Â Â Â Â `[`setquest`](/setquest "wikilink")`Â 7055;Â `**`//Puts` `the` `quest` `7055` `into` `the` `players` `quest` `log`**
`Â Â Â Â Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â Â Â Â Â }`
`Â Â Â }`
`Â Â Â `[`mes`](/mes "wikilink")`Â "[Myu]";`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Meow..";`
`Â Â Â `[`mes`](/mes "wikilink")`Â "ThisÂ Sunshine...makesÂ meÂ sleepy..";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

Related commands: [setquest](/setquest "wikilink"), [erasequest](/erasequest "wikilink"), [changequest](/changequest "wikilink"), [completequest](/completequest "wikilink")

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Checkre

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This allows you to check if a renewal feature is enabled or not in renewal.h, and returns 1 if enabled and 0 for disabled.

The renewal feature to check is determined by type.

`0Â -Â RENEWALÂ (gameÂ renewalÂ serverÂ mode)`
`1Â -Â RENEWAL_CASTÂ (renewalÂ castÂ time)`
`2Â -Â RENEWAL_DROPÂ (renewalÂ dropÂ rateÂ algorithms)`
`3Â -Â RENEWAL_EXPÂ (renewalÂ expÂ rateÂ algorithms)`
`4Â -Â RENEWAL_LVDMGÂ (renewalÂ levelÂ modifierÂ onÂ damage)`
`5Â -Â RENEWAL_ASPDÂ (renewalÂ ASPD)`

Example
`Â Â Â Â Â Â Â Â if(Â checkre(0)Â )`
`Â Â Â Â Â Â Â Â Â Â Â Â Â dispbottomÂ "YouÂ areÂ usingÂ RenewalÂ GameÂ Settings";`
`Â Â Â Â Â Â Â Â else`
`Â Â Â Â Â Â Â Â Â Â Â Â Â dispbottomÂ "YouÂ areÂ usingÂ Pre-RenewalÂ GameÂ Setting";`

You can use as well the following links as references:

============================================================

## Checkriding

Syntax

Description
This function checks, whether the [currently attached](/RID#Usage "wikilink") player has a mount (1 is returned), such as a Peco Peco, or not (0 is returned).

Examples
[`if`](/if "wikilink")`(checkriding())`
`{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ sirÂ alreadyÂ haveÂ aÂ peco,Â goÂ away!";`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Checkweight

Syntax

Description
These functions will compute and return 1 if the total weight of the specified number of specific items does not exceed the invoking character's carrying capacity, and 0 otherwise. It is important to see if a player can carry the items you expect to give them, failing to do that may open your script up to abuse or create some very unfair errors.

The second function will check an array of items and amounts, and also returns 1 on success and 0 on failure.

The functions, in addition to checking to see if the player is capable of holding a set amount of items, also ensure the player has room in their inventory for the item(s) they will be receiving.

If multiple items are involved, it is best to use **checkweight2**, since it can check for all the elements stored in an array. Refer to the last [example](/Checkweight#Examples "wikilink").

Like '[getitem](/getitem "wikilink")', this function will also accept an 'english name' from the database as an argument.

Return Values
| Value | Description                                                  |
|-------|--------------------------------------------------------------|
| 0     | Return if the player does exceed his/her carrying limit.     |
| 1     | Return if the player does not exceed his/her carrying limit. |

Examples
[`if`](/if "wikilink")`Â (`[`checkweight`](/checkweight "wikilink")`(512,10))Â {`
`Â Â Â `[`getitem`](/getitem "wikilink")`Â 512,10;`
`}Â `[`else`](/else "wikilink")`Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "SorryÂ youÂ cannotÂ holdÂ thisÂ amountÂ ofÂ apples";`
`}`
[`close`](/close "wikilink")`;`

Or to put this another way:

[`if`](/if "wikilink")`Â (`[`checkweight`](/checkweight "wikilink")`("Apple",10)Â ==Â 0)Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "SorryÂ youÂ cannotÂ holdÂ thisÂ amountÂ ofÂ apples";`
`}Â `[`else`](/else "wikilink")`Â {`
`Â Â Â `[`getitem`](/getitem "wikilink")`Â 512,10;`
`}`
[`close`](/close "wikilink")`;`

Both examples have the same effect.

Since r19841:

[`if`](/if "wikilink")`Â (!`[`checkweight`](/checkweight "wikilink")`(512,10,513,5))Â {Â `[`mes`](/mes "wikilink")`Â "SorryÂ youÂ cannotÂ holdÂ thisÂ amountÂ ofÂ applesÂ andÂ banana";`

`setarrayÂ .@items[0],512,513;`
`setarrayÂ .@qtys[0],10,5;`
[`if`](/if "wikilink")`Â (!`**`checkweight2`**`(.@items,.@qtys))Â {Â `[`mes`](/mes "wikilink")`Â "SorryÂ youÂ cannotÂ holdÂ thisÂ amountÂ ofÂ applesÂ andÂ banana";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## CID

A **character ID** uniquely identifies a character, not only inside the database, but also in inter-server communication and association of data with a character, such as [character variables](/Variables "wikilink") or [status ailments](/Status_List "wikilink"). The character ID fulfills the same role as a combination of [account ID](/AID "wikilink") and character's slot ID, which means, if two character ids match their account IDs are automatically the same as well.

The Character ID typically increments starting from 150000 and going up.

[Category:Basics](/Category:Basics "wikilink")

============================================================

## Cleararray

Syntax

Description
This command sets a range of elements in an array to given value. If you specify an array variable without index, then index 0 is assumed, otherwise the value setting will start from given index.

Examples
[`setarray`](/setarray "wikilink")`Â @array[0],Â 100,Â 100,Â 100,Â 100,Â 100,Â 100,Â 100,Â 100,Â 100,Â 100,Â 100;`
`cleararrayÂ @array[0],Â 100,Â 11;`

Both lines result in the same array, but using cleararray saves typing.

`cleararrayÂ @array[0],Â 0,Â 127;Â Â //Â numberÂ array`
`cleararrayÂ @strarray$[0],Â "",Â 127;Â //Â stringÂ array`

Deletes entire array.

`setarrayÂ @array[0],Â 1,Â 2,Â 3,Â 4,Â 5,Â 6;`
`cleararrayÂ @array[2],Â 0,Â 2;`

Results in array { 1, 2, 0, 0, 5, 6 }.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Clearitem

Syntax

Description
This command will destroy all items the invoking character has in their inventory (this includes equipped items). It will not affect anything else, like storage or cart.

Examples
[`mes`](/mes "wikilink")`Â "IÂ willÂ nowÂ deleteÂ allÂ itemsÂ inÂ yourÂ inventory...";`
[`clearitem`](/clearitem "wikilink")`;`
[`mes`](/mes "wikilink")`Â "Done!"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Clientinfo.xml

*sclientinfo.xml* is a file that configures your modified Sakray client so that it may connect to rAthena Servers, for non-Sakray and Renewal clients this file is usually called *clientinfo.xml*.

Template
    <?xml version="1.0" encoding="euc-kr" ?>
    <clientinfo>
        <desc>Ragnarok Client Information</desc>
        <servicetype>korea</servicetype>
        <servertype>sakray</servertype>
        <hideaccountlist />
        <passwordencrypt />
        <passwordencrypt2 />
        <extendedslot />
        <readfolder />
        <connection>
            <display>SERVER NAME HERE</display>
            <desc>Ragnarok Online</desc>
            <balloon>this is a tool tip</balloon>
            <address>SERVER IP HERE</address>
            <port>6900</port>
            <version>20</version>
            <langtype>1</langtype>
            <registrationweb>REGISTRATION URL HERE</registrationweb>
            <yellow>
                <admin>2000001</admin>
                <admin>2000002</admin>
                <admin>2000003</admin>
            </yellow>
            <loading>
                <image>loading00.jpg</image>
                <image>loading01.jpg</image>
                <image>loading02.jpg</image>
                <image>loading03.jpg</image>
                <image>loading04.jpg</image>
                <image>loading05.jpg</image>
                <image>loading06.jpg</image>
                <image>loading07.jpg</image>
                <image>loading08.jpg</image>
                <image>loading09.jpg</image>
                <image>loading10.jpg</image>
            </loading>
        </connection>
    </clientinfo>

Explanation
| Tag                  | Description                                                                                                                                                                                                                            |
|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <servicetype>        | Specifies the client service type (country). Affects client behavior for some features. See below for valid values. Should be set to **korea**, unless you know, what you want to achieve by using another value.                      |
| <servertype>         | Specifies the server type this client is intended for. Affects client behavior for some features. See below for valid values. Should be set to **sakray**, unless you know, what you want to achieve by using another value.           |
| <hideaccountlist />  | When present, disallows the client from showing Service Select screen and uses the first <connection> entry automatically.                                                                                                             |
| <passwordencrypt />  | When present, passwords are encrypted (method 1) before being sent to the server. Incompatible with **use_MD5_passwords** defined in .../conf/login_athena.conf.                                                                    |
| <passwordencrypt2 /> | When present, passwords are encrypted (method 2) before being sent to the server. When you use this with <passwordencrypt />, method 2 will be used. Incompatible with **use_MD5_passwords** defined in .../conf/login_athena.conf. |
| <extendedslot />     | When present, all character slots (usually 9) are available. Otherwise only 2-4 are enabled for use, others are displayed as 'Not available'.                                                                                          |
| <readfolder />       | When present, all files are first searched inside the /data/ folder, then inside the [GRF](/GRF "wikilink") archives. Otherwise files inside the /data/ folder are only accessed, when they were not found inside the GRF archives.    |
| <display>            | Displays the name of the server at the Service Select screen.                                                                                                                                                                          |
| <desc>               | Server description.                                                                                                                                                                                                                    |
| <balloon>            | This tag tells the game to display a tooltip when the cursor is over the server name on the server select screen.                                                                                                                      |
| <address>            | IP or DNS address of the server (for DNS, client needs the DNS hex).                                                                                                                                                                   |
| <port>               | Connection server port (default 6900).                                                                                                                                                                                                 |
| <version>            | Must be equal to **client_version_to_connect** defined in .../conf/login_athena.conf.                                                                                                                                              |
| <langtype>           | See table below.                                                                                                                                                                                                                       |
| <registrationweb>    | Web address to open when you click the Register button.                                                                                                                                                                                |
| <yellow>             | Characters with the following Account IDs will be seen in GM sprites and have Yellow name/chat (add the Account IDs of all your GMs here).                                                                                             |
| <aid>                | Use instead of <yellow> to also allow the right-click menu for your GMs.                                                                                                                                                               |
| <loading>            | Define each loading screen in the path .../data/texture/Ã€Â¯Ã€ÃºÃ€ÃŽÃ…ÃÃ†Ã¤Ã€ÃŒÂ½Âº/ (to use more than 10, client also needs Unlimited Loading Screens hex).                                                                                        |

**Note:** All [XML](/wikipedia:XML "wikilink") rules apply, so <tag /> options can also be written as <tag></tag>.

`+-----+------------------------+-------------------+`
`|Â intÂ |Â enumÂ SERVICETYPEÂ Â Â Â Â Â Â |Â "servicetype"Â tagÂ |`
`+-----+------------------------+-------------------+`
`|Â 0Â Â Â |Â SERVICETYPE_KOREAÂ Â Â Â Â Â |Â koreaÂ Â Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 1Â Â Â |Â SERVICETYPE_AMERICAÂ Â Â Â |Â americaÂ Â Â Â Â Â Â Â Â Â Â |`
`|Â 2Â Â Â |Â SERVICETYPE_JAPANÂ Â Â Â Â Â |Â japanÂ Â Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 3Â Â Â |Â SERVICETYPE_CHINAÂ Â Â Â Â Â |Â chinaÂ Â Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 4Â Â Â |Â SERVICETYPE_TAIWANÂ Â Â Â Â |Â taiwanÂ Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 5Â Â Â |Â SERVICETYPE_THAIÂ Â Â Â Â Â Â |Â thaiÂ Â Â Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 6Â Â Â |Â SERVICETYPE_INDONESIAÂ Â |Â indonesiaÂ Â Â Â Â Â Â Â Â |`
`|Â 7Â Â Â |Â SERVICETYPE_PHILIPPINEÂ |Â philippineÂ Â Â Â Â Â Â Â |`
`|Â 8Â Â Â |Â SERVICETYPE_MALAYSIAÂ Â Â |Â malaysiaÂ Â Â Â Â Â Â Â Â Â |`
`|Â 9Â Â Â |Â SERVICETYPE_SINGAPOREÂ Â |Â singaporeÂ Â Â Â Â Â Â Â Â |`
`|Â 10Â Â |Â SERVICETYPE_GERMANYÂ Â Â Â |Â germanyÂ Â Â Â Â Â Â Â Â Â Â |`
`|Â 11Â Â |Â SERVICETYPE_INDIAÂ Â Â Â Â Â |Â indiaÂ Â Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 12Â Â |Â SERVICETYPE_BRAZILÂ Â Â Â Â |Â brazilÂ Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 13Â Â |Â SERVICETYPE_AUSTRALIAÂ Â |Â australiaÂ Â Â Â Â Â Â Â Â |`
`|Â 14Â Â |Â SERVICETYPE_RUSSIAÂ Â Â Â Â |Â russiaÂ Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 15Â Â |Â SERVICETYPE_VIETNAMÂ Â Â Â |Â vietnamÂ Â Â Â Â Â Â Â Â Â Â |`
`|Â 17Â Â |Â SERVICETYPE_CHILEÂ Â Â Â Â Â |Â chileÂ Â Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 18Â Â |Â SERVICETYPE_FRANCEÂ Â Â Â Â |Â franceÂ Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 19Â Â |Â SERVICETYPE_UAEÂ Â Â Â Â Â Â Â |Â uaeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |`
`+-----+------------------------+-------------------+`

`+-----+------------------------+-------------------+`
`|Â intÂ |Â enumÂ ?Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â "servertype"Â tagÂ Â |`
`+-----+------------------------+-------------------+`
`|Â 0Â Â Â |Â ?Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â primaryÂ Â Â Â Â Â Â Â Â Â Â |`
`|Â 1Â Â Â |Â ?Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â sakrayÂ Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 2Â Â Â |Â ?Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â localÂ Â Â Â Â Â Â Â Â Â Â Â Â |`
`|Â 5Â Â Â |Â ?Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â pkÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |`
`+-----+------------------------+-------------------+`

[Category:Client Configuration](/Category:Client_Configuration "wikilink")

============================================================

## Clif

All functions inside clif.c and clif.h will go here. This is where most packet handling codes goes.

[Clif Emotion](/Clif_Emotion "wikilink")

[Clif Specialeffect](/Clif_Specialeffect "wikilink")

[Clif Skill Nodamage](/Clif_Skill_Nodamage "wikilink")

[Clif Skill Fail](/Clif_Skill_Fail "wikilink")

[Clif Displaymessage](/Clif_Displaymessage "wikilink")

[Clif Authfail](/Clif_Authfail "wikilink")

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_authok

Syntax
`intÂ `**`clif_authok`**`(structÂ map_session_dataÂ *sd);`

==Parameters==


See [map_session_data](/map_session_data "wikilink") for more information.
==Description== Tells client that a player (sd) is fully loaded and that it can proceed to the map screen.
Provides client with player position and facing direction as well.
==Example== See bool [pc_authok](/pc_authok "wikilink")(...) in pc.c
[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_charselectok

Syntax
`intÂ `**`clif_charselectok`**`(intÂ id,Â uint8Â ok);`

==Parameters==



1 - Ok

2 - Not ok

==Description== Reply from Char-Server
Tells the player if he can connect to the char-server to select a character.
*I tried to debug this function, but I couldn't reproduce the packet using 2011-03-15aRagexeRE, I'm not sure if this function is still beeing used.*
==Example==

`clif_charselectok(2000001,Â 1);`

The client of the player id 2000001 would be able to connect to select a character.
[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_dropflooritem

Syntax
`intÂ `**`clif_dropflooritem`**`(structÂ flooritem_dataÂ *fitem);`

==Parameters==


==Description== Makes an item appear on the ground. Always return 0.
It's better to use [map_addflooritem](/map_addflooritem "wikilink") (map.c) to make an item apear, also that function already defines an object of flooritem_data.
==Example== See [map_addflooritem](/map_addflooritem "wikilink") (map.c).
[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_Emotion

Syntax
`voidÂ `**`clif_emotion`**`(structÂ block_listÂ *bl,intÂ type);`

Parameters

Description
Notifies all clients in bl's area (including bl itself, if it identifies a player), that bl is using an emotion. Causes each client to display an emotion above bl's head, depending on type.

Example
`clif_emotion(&sd->bl,Â 9);`

This would show a (...) emotion above the head of given player. All players in his or her vicinity would be able to see this as well.

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_getip

Syntax
`uint32Â `**`clif_getip`**`(void);`

==Parameters==


==Description== Gets the Map-Server's IP Address.
==Example==

`uint32Â a_ip;`
`a_ipÂ =Â clif_getip();`

a_ip would have been defined with the server's IP Address.
[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_getport

Syntax
`uint16Â `**`clif_getport`**`(void);`

==Parameters==


==Description== Returns Map-Server's port.
See [Clif_setport](/Clif_setport "wikilink") for more info on how to change the port
==Example==

`uint16Â port;`
`portÂ =Â clif_getport();`

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_refresh_ip

Syntax
`uint32Â `**`clif_refresh_ip`**`(void);`

Parameters

Description
Refreshes map_server ip, returns the new ip if the ip changed, otherwise it returns 0.

Example
`voidÂ chrif_update_ip(intÂ fd)`
`{`
`Â uint32Â new_ip;`
`Â WFIFOHEAD(fd,6);`
`Â new_ipÂ =Â host2ip(char_ip_str);`
`Â ifÂ (new_ipÂ &&Â new_ipÂ !=Â char_ip)`
`Â Â char_ipÂ =Â new_ip;Â //UpdateÂ char_ip`
`Â `**`new_ip` `=` `clif_refresh_ip();`**
`Â ifÂ (!new_ip)Â return;Â //NoÂ change`
`Â WFIFOW(fd,0)Â =Â 0x2736;`
`Â WFIFOL(fd,2)Â =Â htonl(new_ip);`
`Â WFIFOSET(fd,6);`
`}`

From

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_setbindip

Syntax
`voidÂ `**`clif_setbindip`**`(constÂ char*Â ip);`

Parameters

Description
Defines a Bind IP to the Map-Server.

Example
`ifÂ (strcmpi(w1,Â "bind_ip")Â ==Â 0)`
`Â clif_setbindip(w2);`

(From map.c in **int map_config_read(char \*cfgName)**)
A new Bind IP would be set for the Map-Server using a parameter from 'bind_ip'.
**Note that it's not secure to redefine any type of ip on the fly.**
[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_setip

Syntax
`intÂ `**`clif_setip`**`(constÂ char*Â ip);`

Parameters

Description
Defines a IP to the Map-Server.

Example
`ifÂ (strcmpi(w1,Â "map_ip")Â ==Â 0)`
`Â Â map_ip_setÂ =Â clif_setip(w2);`

(From map.c in **int map_config_read(char \*cfgName)**)
A new IP would be set for the Map-Server using a parameter from 'map_ip'.
**Note that it's not secure to redefine any type of ip on the fly.**
[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clif_setport

Syntax
`voidÂ `**`clif_setport`**`(uint16Â port);`

Parameters

Description
Defines a port to the Map-Server.

Example
`ifÂ (strcmpi(w1,Â "map_port")Â ==Â 0)Â {`
`Â clif_setport(atoi(w2));`
`Â map_portÂ =Â (atoi(w2));`
`}`

(From map.c in **int map_config_read(char \*cfgName)**)
A new port would be set for the Map-Server using a parameter from 'map_port'.
**Note that it's not secure to redefine the port on the fly.**

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Clone

Syntax

Description
This command creates a [monster](/monster "wikilink") which is a copy of another player. The first four arguments serve the same purpose as in the monster script command. The <char id> is the character ID of the player to clone (player must be online). If <master id> is given, the clone will be a 'slave/minion' of it. Master_id must be a character ID of another online player.

The mode can be specified to determine the behavior of the clone, it's values are the same as the ones used for the mode field in the mob_db. The default mode is aggressive, assists, can move, can attack.

Flag can be either zero or one currently. If zero, the clone is a normal monster that'll target players, if one, it is considered a summoned monster, and as such, it'll target other monsters. Defaults to zero.

The duration specifies how long the clone will live before it is auto-removed. Specified in seconds, defaults to no limit (zero).

Returned value is the monster ID of the spawned clone. If command fails, returned value is zero.

Usage
[`set`](/set "wikilink")`Â .@player,getcharid(0);`
**`clone`**`Â "prontera",150,150,"Test::OnEvent",.@player;`

or

**`clone`**`Â "prontera",150,150,"Test::OnEvent",getcharid(0);`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Close

Syntax

Description
This command will create a 'close' button in the message window for the invoking character. This is one of the ways to end a speech from an [NPC](/NPC "wikilink"). Once the button is clicked, the NPC script execution will end, and the message box will disappear. If no window is currently on screen, the script ends right away.

Examples
[`mes`](/mes "wikilink")`Â "[Woman]";`
`mesÂ "IÂ amÂ finishedÂ talkingÂ toÂ you,Â clickÂ theÂ closeÂ button";`
`close;`
`mesÂ "ThisÂ commandÂ willÂ notÂ runÂ atÂ all,Â causeÂ theÂ scriptÂ hasÂ ended.";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Close2

Syntax

Description
This command will create a 'close' button in the message window for the invoking character. This is one of the ways to end a speech from an [NPC](/NPC "wikilink"). Once the button is clicked, the message box will disappear, but unlike [close](/close "wikilink") the script execution will continue. So after a close2 command an [end](/end "wikilink") command must follow to terminate the script. If no window is currently on screen, the [invoking character](/RID "wikilink") will get stuck in the NPC.

Examples
[`mes`](/mes "wikilink")`Â "[Woman]";`
`mesÂ "IÂ amÂ finishedÂ talkingÂ toÂ you,Â clickÂ theÂ closeÂ button.";`
`close2;`
[`dispbottom`](/dispbottom "wikilink")`Â "ThisÂ willÂ beÂ shownÂ atÂ theÂ charactersÂ chatÂ window.";`
[`end`](/end "wikilink")`;`

`mesÂ "ThankÂ youÂ forÂ using";`
`mesÂ "theÂ KafraÂ Services.";`
`close2;`
[`cutin`](/cutin "wikilink")`Â "",Â 255;`
`end;`

Probably the most common usage of this command. Removing a previously set cutin, after the NPC dialog is closed.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Comments

A comment is something that is not read by the compiler or interpreter.

Syntax
### Athena Scripting Language

Single line comments begin with double slash `//` and continue to the [end of line](/wikipedia:Newline "wikilink").

`//Â ThisÂ isÂ aÂ commentÂ thatÂ takesÂ upÂ theÂ wholeÂ line.`

`setÂ .@amount,Â 100;Â //Â commentsÂ canÂ goÂ afterÂ scriptÂ commandsÂ too`

Multi-line comments begin with `/*` and end with `*/`

`/*Â MyÂ Kafra`
`Â *Â version:Â 1.0`
`Â *Â by:Â YourÂ Name`
`Â */`

### Athena Source Code

[rAthena](/rAthena "wikilink") is written in C, so single line (`//`) or multi line (`/*` `*/`) [comments](/wikipedia:Comment_(computer_programming)#C "wikilink") can be used.

See Also

[Category:Basics](/Category:Basics "wikilink") [Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Compare

Syntax

Description
This command compares 2 strings and returns if the substring is in the main string or not. This command is not case sensitive.

Return Values
| Value | Description                              |
|-------|------------------------------------------|
| 0     | The substring is not in the main string. |
| 1     | The substring is in the main string.     |

Examples
`//Â dothis;Â willÂ beÂ executedÂ ('BloodyÂ Murderer'Â containsÂ 'Blood').`
`Â Â Â ifÂ (compare("BloodyÂ Murderer","Blood"))`
`Â Â Â Â Â Â Â dothis;`
`//Â dothat;Â willÂ notÂ beÂ executedÂ ('BloodÂ Butterfly'Â doesÂ notÂ containÂ 'Bloody').`
`Â Â Â ifÂ (compare("BloodÂ Butterfly","Bloody"))`
`Â Â Â Â Â Â Â dothat;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Completequest

Syntax

Description
Change the state for the given quest <ID> to "complete" and remove from the users quest log.

Examples
This is an excerpt from

[`jobchange`](/jobchange "wikilink")`Â `[`roclass`](/roclass "wikilink")`(`[`eaclass`](/eaclass "wikilink")`()|`[`EAJL_THIRD`](/Variables#Constants "wikilink")`);`
`Â Â Â `[`set`](/set "wikilink")`Â `[`JobLevel`](/Variables#Parameter_Constants "wikilink")`,Â 1;`
`Â Â Â `[`nude`](/nude "wikilink")`;`
`Â Â Â `[`getitem`](/getitem "wikilink")`Â 6121,1;`
`Â Â Â getitemÂ 6122,1;`
`Â Â Â getitemÂ 2795,1;`
`Â Â Â getitemÂ 5750,1;`
`Â Â Â `[`delitem`](/delitem "wikilink")`Â 6269,1;`
`Â Â Â `[`mes`](/mes "wikilink")`Â "[Dumk]";`
`Â Â Â mesÂ "Congratulations.";`
`Â Â Â mesÂ "WelcomeÂ toÂ yourÂ newÂ life.";`
`Â Â Â `**`completequest`**`Â 7180;Â `**`//Sets` `quest` `7180` `to` `complete,` `then` `removes` `it` `from` `the` `quest` `log.`**
`Â Â Â `[`set`](/set "wikilink")`Â job_sha,28;`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â mesÂ "[Dumk]";`
`Â Â Â mesÂ "It'sÂ aÂ fashionableÂ uniform.";`
`Â Â Â mesÂ "ItÂ usesÂ patternsÂ ofÂ leopardÂ andÂ feathers.";`
`Â Â Â mesÂ "TheÂ fashionÂ worldÂ willÂ beÂ shocked.";`
`Â Â Â next;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Configure

Using **configure** script is a method to generate makefiles before compilation in Unix systems.

When installing rAthena, configure script should be run after [SVN Checkout](/SVN_Checkout "wikilink"), and before compiling.

Basic usage
<onlyinclude><includeonly>

> *Main article: [Configure](/Configure "wikilink").*

</includeonly> To avoid errors in server-client communication, [`PACKETVER`](/PACKETVER "wikilink") must be set to date the client you're going to use has been released at (in YYYYMMDD format), eg `20100730` for 2010-07-30aRagexeRE. Instead of editing [mmo.h](/mmo.h "wikilink") directly, `PACKETVER` can be set to desired date with configure switch `--enable-packetver=YYYYMMDD`.

Run following command, replacing *YYYYMMDD* with your client release date, eg *20100730*.

`Â ./configureÂ --enable-packetver=YYYYMMDD`

Configure script will perform necessary tests and generate makefiles. </onlyinclude>

### Sample output

    checking whether make sets $(MAKE)... yes
    checking for gcc... gcc
    checking for C compiler default output file name... a.out
    checking whether the C compiler works... yes
    checking whether we are cross compiling... no
    checking for suffix of executables...
    checking for suffix of object files... o
    checking whether we are using the GNU C compiler... yes
    checking whether gcc accepts -g... yes
    checking for gcc option to accept ANSI C... none needed
    checking how to run the C preprocessor... gcc -E
    checking whether byte ordering is bigendian... no
    checking whether pointers can be stored in ints (old code)... yes
    checking whether gcc supports -Wno-unused-parameter... yes
    checking whether gcc supports -Wno-pointer-sign... yes
    checking whether gcc can actually use -Wno-pointer-sign... yes
    checking whether gcc supports -Wno-switch... yes
    checking whether gcc supports -fPIC... yes
    checking whether gcc needs -fPIC for shared objects... no
    checking whether gcc supports -fno-strict-aliasing... yes
    checking whether gcc is able to typecast to union... yes
    checking for setrlimit... yes
    checking for strnlen... yes
    checking for inflateEnd in -lz... yes
    checking zlib.h usability... yes
    checking zlib.h presence... yes
    checking for zlib.h... yes
    checking for library containing sqrt... -lm
    checking for library containing clock_gettime... -lrt
    checking whether CLOCK_MONOTONIC is supported and works... yes
    checking for mysql_config... /usr/bin/mysql_config
    checking for mysql_init in -lmysqlclient... yes
    checking mysql.h usability... yes
    checking mysql.h presence... yes
    checking for mysql.h... yes
    checking MySQL library (optional)... yes (5.0.51a)
    checking for pcre_study in -lpcre... yes
    checking PCRE library (optional)... yes
    checking host OS... Linux
    checking for MinGW... no
    configure: creating ./config.status
    config.status: creating Makefile
    config.status: creating src/common/Makefile
    config.status: creating 3rdparty/mt19937ar/Makefile
    config.status: creating src/char/Makefile
    config.status: creating src/login/Makefile
    config.status: creating src/char_sql/Makefile
    config.status: creating src/txt-converter/Makefile
    config.status: creating src/map/Makefile
    config.status: creating src/plugins/Makefile
    config.status: creating src/tool/Makefile

### Setting executable bit

In order to run configure script it must be executable, ie have the *execute* permission set. When checking out a working copy from SVN repository, executable bit should be set automatically thanks to [`svn:executable`](svn:executable) property. However, if it fails for some reason, running `./configure` will bring the following message (or similar):

`Â bash:Â ./configure:Â PermissionÂ denied`

To fix this, set executable permission with:

`Â chmodÂ +xÂ ./configure`

Additional switches
To display all available switches use:

`Â ./configureÂ --help`

### Debug mode

It is possible to compile rAthena in debug mode with `--enable-debug` switch.

### 64-bit operating systems

If you are using a 64-bit OS you have to use `--enable-64bit` switch.

[Category:Installation](/Category:Installation "wikilink")

============================================================

## Connecting

This article covers taking the configuration steps to ensure a successful connection to your servers. You are required to know the in and outs of your OS, as well as what a [LAN IP](/wikipedia:Local_area_network "wikilink") and a [WAN IP](/wikipedia:Wide_area_network "wikilink") are.

Basics of the three servers
### Login Server

The login server handles all login packets from the client. The client sees the login server first and connects to it first. The login server listens on the port 6900 by default and usually reads data from the login table. The login server connects directly to the character server and passes it's information to it once the client has successfully logged in. If your login server won't connect, your players cannot login in, but can play.

### Character Server

The character server handles all character selection and character loading for the map server. The character server receives commands to primarily display characters once the client has logged in. The character server listens on the port 6121 by default. It also handles the loading and saving of most character data. If the character server becomes disconnected, character data saving is not possible.

### Map Server

The map server handles all map functions, including, but not limited to, mob functions, map functions, NPC loading and unloading, as well as NPC processing. the map server is your bread and butter and allows people to play on your server. It listens on the port 5121 by default.

If the character server becomes disconnected from your map server, it's likely the mapserver will disconnect everyone from it. This is not the case when the MySQL server loses its connection to rAthena, as rAthena currently does not restore this connection.

Configuring rAthena for use
After you have finished [compiling](/compiling "wikilink") rAthena, you can set it up for use. There will be four files that we will concentrate on. Any settings we change in these files should **always** be moved to the relevant import folder files. If your compiler hasn't already made a copy of the folder and named it /trunk/conf/import do that now.

##### Using the /conf/import/ folder ()

In this folder, you can 'import' your settings into each of the respected files. All you need is each parameter. When you do this, your settings will never be overwritten when you need to update your SVN, as the import folder is built once. You can throw all of your settings in here and they will remain as they are, and will read AFTER the main settings, which means these settings will take priority.

### Step 1. Interserver Communication Passwords

First, you will need to set an intercommunication password and user. This is one of the most important steps to securing your server.

In order for the char-server to accept commands and packets from the login server, and for the map-server to accept commands and packets from the char-server they have to 'log-in' to each other, using the Server Communication passwords. You MUST set these to something other than defaults, but you can set them to random characters, as long as they are the same in the three places they appear in, which are: , and your login sql table. They are defaulted to s1/p1, and **MUST** be changed.

Changes must be made to the import folder to ensure proper upgradability. A good habit to get into when working with SVN. Simply copy and paste the lines you wish to alter from the .conf file to the relevant .txt file in the import folder. Your trunk/conf/import/char_athena.txt *and* trunk/conf/import/map_athena.txt files should look as follows, with *no* changes made to or :
<code>

    // Server Communication username and password.
    userid: [new user]
    passwd: [new password]

</code>

Your login table should match. Use this SQL query (or make the changes using your favourite SQL gui): <code>

    UPDATE login
    use databasename_rag;
    set `userid` = "[new user]", `user_pass` = "[new password]" where `account_id` = 1;

</code>

For those of us that aren't so familiar with mysql (don't you just love these tutorials?)

<code>

    UPDATE databasename.login SET `userid` = 'MyInterServerUser',
    `user_pass` = 'MyInterServerPassword' WHERE `account_id` = 1;

</code>

**Note**: It should all be on one line. Entering the relevant parameters where needed.

After the user and password is set, you can move on down the page.

### Step 2.

Usually there is nothing to be done here in terms on connection. You may want to edit your login_port to something other than default, but it must be an unused port by your OS.

You can find this out by starting all the services that you need on the server and issuing the following commands to your console:

**If using Windows:**
Goto Start, then click 'Run'. Type 'cmd' and press enter. Run the following command: <code>

    netstat -a

</code> **If using \*nix:** <code>

    $ lsof -i

</code>

Once you have selected a port if you're going to change it, your trunk/conf/import/login_athena.txt file should look as follows, with *no* changes made to (again just copy pasting the lines we want to change from one file to the other):
<code>

    // Login Server Port
    login_port: [new port]

</code>

### Step 3.

This file sets parameters for the char-server to read. When you open this up, there are a few things we need to do in here.

Firstly we should name our server:

When setting server_name, be sure to not use spaces as it says. <code>

    // Server name, use alternative character such as ASCII 160 for spaces.
    // NOTE: Do not use spaces in the name, or guild emblems won't work client-side!
    server_name: [new server name]

</code>

<code>

    // Wisp name for server: used to send wisp from server to players (between 4 to 23 characters)
    wisp_server_name: [new server name]

</code>

Usually, rAthena will auto-detect your external and internal IP if the IP fields are [commented out](/comments "wikilink"), but let's go ahead and remove the two slashes (//) from login_ip and char_ip.

The login_ip will point to the IP address where the login server will be running. Usually this is the localhost, or 127.0.0.1. If the login-server is to be located on the same network as the char-server (but on a different PC), use the LAN IP of the login server's machine. If you are running a dedicated machine in a datacenter, or you know your IP is not going to change, you can set this to your WAN IP.

<code>

    // Login Server IP
    // The character server connects to the login server using this IP address.
    // NOTE: This is useful when you are running behind a firewall or are on
    // a machine with multiple interfaces.
    login_ip: [new ip here]

</code>

The char_ip parameter will **ALWAYS** be your WAN IP, no exceptions. This is the IP that the char-server will accept connections with.

<code>

    // Character Server IP
    // The IP address which clients will use to connect.
    // Set this to what your server's public IP address is.
    char_ip: [your wan ip here]

</code>

If you changed the login_port in login_athena.conf, this setting here will need to match it. <code>

    // Login Server Port
    login_port: [new port]

</code>

Make sure to make any changes in the import folder as always.

### Step 4.

This file sets parameters for the map-server to read.

The char_ip will point to the IP address where the login server will be running. Usually this is the localhost, or 127.0.0.1. If the char-server is to be located on the same network as the map-server (but on a different PC), use the LAN IP of the char server's machine. If you are running a dedicated machine in a datacenter, or you know your IP is not going to change, you can set this to your WAN IP.

<code>

    // Character Server IP
    // The map server connects to the character server using this IP address.
    // NOTE: This is useful when you are running behind a firewall or are on
    // a machine with multiple interfaces.
    char_ip: [new ip here]

</code>

The map_ip parameter will **ALWAYS** be your WAN IP, no exceptions. This is the IP that the map-server will accept connections with.

<code>

    // Map Server IP
    // The IP address which clients will use to connect.
    // Set this to what your server's public IP address is.
    map_ip: [your wan ip here]

</code>

Make sure to make any changes in the import folder as always.

### Step 5.

About midway down this file, you will find your SQL settings. These will be set as accordingly.


If you make any changes in here, copy paste the lines you change into /conf/import/inter_athena.txt and modify them there.

<div>
**NOTES:** (must [recompile your server](/Installation_on_Windows#Compiling "wikilink") after changing)

        char db_hostname[32];

    to

        char db_hostname[YOUR_HOSTNAME_LENGTH];

    ([bugreport:8003](http://rathena.org/board/tracker/issue-8003-31-characters-is-not-long-enough-for-hostnames/))

        char char_server_pw[32] = "ragnarok";

    to

        char char_server_pw[32] = "";

    ([bugreport:7787](http://rathena.org/board/tracker/issue-7787-interc-supplies-default-mysql-password-when-confinter-athenaconf-is-blank/))

</div>
Starting rAthena
When you're all done configuring rAthena, you can start it up. You can do this by simply running each of the three servers, or athena-start.

Client Side
### Diff your client

See [Hexing](/Hexing#Creating_custom_RagRE_client_using_a_DIFF_patcher "wikilink").

### Data Folder

1.  Download the most recent data folder [here](http://svn6.assembla.com/svn/ClientSide/).
2.  Edit your [clientinfo.xml](/Clientinfo "wikilink") as needed.

### Connect

Execute your exe.

Trouble Shooting
Its always best to post in the [client support](http://rathena.org/board/forum/98-client-side/) sub-forum for things that go wrong with the client, and [server support](http://rathena.org/board/forum/23-rathena-server-support/) sub-forum for things that go wrong with rAthena connecting or if errors pop up in your server log.

### CHARACTER_INFO size error!!

To fix this, locate and open in notepad. Find the following line: <code>

    #ifndef PACKETVER
        #define PACKETVER 20110609

Edit this Part, put:

    #define PACKETVER YOURCLIENTDATE

So if my client was 2011-10-25aRagexeRE it would look like:

    #define PACKETVER 20111025

[Category:Configuration](/Category:Configuration "wikilink")

============================================================

## Countitem

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
Countitem will return the number of items of <itemid> the invoking player holds in his inventory.
Like in [getitem](/getitem "wikilink"), you can also write the name of the item ("Name"-column in ItemDB).

Example
    mes "You have "+countitem(501)+"Apples!";
    close;

Will print out the number of Apples the char holds...

    if(countitem("Apple")>=5){
     mes "This will only print if you have 5 or more Apples!";
     close;
    }

============================================================

## Countstr

Syntax

Description
Counts all instances of a search string in the input. By default is case sensitive unless <usecase> is set to 0.

Examples
[`countstr`](/countstr "wikilink")`("testÂ testÂ testÂ Test",Â "test");Â //returnsÂ 3`
[`countstr`](/countstr "wikilink")`("cakeÂ Cake",Â "Cake",Â 0);Â //returnsÂ 2`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Crash_Logging

rAthena can crash in various places and due to various reasons. However, all of them ultimately involve some sort of problem in the source code. There's not much you can do about the crashed server, but what you *can* do is gather information about the crash. The info can then be provided to the [developers](/developers "wikilink") in a bugreport or by private communication.

Information types
The information you will be providing can have various forms, with varying degrees of usefulness. Here's a list, ordered from worst to best option:

1.  **nothing** - Ignore the issue and restart the server, waiting for someone else to fix the problem.
2.  **help plz!** - Inform the developers or other users that there's a problem, but not give any more details.
3.  **unresolved stack trace** - Provide a stack trace generated by say, Cygwin, that only has memory addresses.
4.  **readable stack trace** - Provide a stack trace that has function names.
5.  **backtrace with variables** - Provide a stack trace with function names and local variable names+values.
6.  **core dump / memory dump** - Provide a full memory dump of the crashed process, along with the corresponding binary and source code.

Collection methods
There's lots of software that will let you do automatic, semi-automatic or manual crash information collection.

### Manual

//TODO: [GDB](/GDB "wikilink"), visual studio, windbg hooking, task manager right-click make dump

### Automatic

//TODO: automatic system response, rA plugins and scripts, gdb analysis, UserDump, DebugDiag, ProcDump
Some info at [How to use Coredump/Stackdump](http://www.eathena.ws/board/index.php?showtopic=91817).

[Category:Debugging](/Category:Debugging "wikilink")

============================================================

## Custom_Books

Introduction
Books are Miscellaneous type items in which you can store various kind of information, such as descriptions, stories and guides. You can read them by right-clicking on the item and left-clicking on the small book icon on the top-left corner of the item description.

**Please keep in mind** that in this tutorial I use 2013-08-04 client, which means I work with LUA files. If you use an older client that doesn't support LUA, please read this page for creating items: [Custom Items](/Custom_Items "wikilink").

[center](/File:Custombook1.png "wikilink")

Server-Side Modifications
You have to edit the following file on server-side:

1.  **trunk/db/re/item_db.txt**: The item's name and stats.

Item_db
First, you must create your book. I strongly recommend creating a new item instead of altering an already existing one because players might acquire the original book in some ways. Also, you should find the row "// Misc "Etc" Books" and insert your book after the last one to keep everything in one place.

Let's create a book called "rAthena Book". Currently 11058 is the last ID but there are books up to 11060 so insert a row below that one and write:

`11061,Rathena_Book,rAthenaÂ Book,3,100,200,10,,,,,,,,,,,,,{},{},{}`

This will create an item with the following parameters:

**`11061`**`:Â ID`
**`Rathena_Book`**`:Â DatabaseÂ name`
**`rAthena` `Book`**`:Â NameÂ thatÂ playersÂ see`
**`3`**`:Â TheÂ TypeÂ ofÂ theÂ itemÂ isÂ "Miscellaneous"`
**`100`**`:Â NPCsÂ sellÂ thisÂ bookÂ forÂ 100z`
**`200`**`:Â PlayersÂ canÂ sellÂ thisÂ bookÂ toÂ NPCsÂ forÂ 200z`
**`10`**`:Â TheÂ WeightÂ ofÂ thisÂ itemÂ isÂ 10`
**`Empty`**`:Â TheÂ restÂ ofÂ theÂ parametersÂ remainÂ empty`

Client-Side Modifications
You have to edit the following files on client-side:

1.  **client/System/itemInfo.lua**: This file determines the appearance and the description of the item.
2.  **grf/data/book/**: Here you add your own book's text.
3.  **grf/data/bookitemnametable.txt**: This file determines what items are books. If you skip this step, the Read icons won't appear.

Iteminfo.lua
In your iteminfo.lua, find \[11058\]. This is the last book-type item after we inserted ours. Copy-paste the whole section, change \[11058\] to \[11061\] and fill it with your desired parameters. The first three lines are for items when they are unidentified; since we work with a Miscellaneous type item, they can be skipped. You should focus on the second three lines.

For the item's picture I recommend searching for an already existing item, find it in iteminfo.lua and copy-paste it's ResourceName. It doesn't matter if you have Korean letters in it or some gibberish text, your client can read both of them.

In the description, you can use colors such as in NPC scripts (see at [Basic_Scripting\#Message](/Basic_Scripting#Message "wikilink")). Each ("Sentence",) creates a new row.

`[11061]Â =Â {Â Â Â Â //Â IDÂ ofÂ theÂ book:Â theÂ firstÂ parameterÂ inÂ item_db.txt`
`Â Â Â Â Â Â Â unidentifiedDisplayNameÂ =Â "",`
`Â Â Â Â Â Â Â unidentifiedResourceNameÂ =Â "Â°Ã­Â´Ã«Ä¾Ä‘Ä¾Ã®Ã‡Å˜Ä½Â®Ä…Â®",`
`Â Â Â Â Â Â Â unidentifiedDescriptionNameÂ =Â {`
`Â Â Â Â Â Â Â },`
`Â Â Â Â Â Â Â identifiedDisplayNameÂ =Â "rAthenaÂ Book",Â //Â NameÂ ofÂ theÂ bookÂ thatÂ appearsÂ in-game`
`Â Â Â Â Â Â Â identifiedResourceNameÂ =Â "Â°Ã­Â´Ã«Ä¾Ä‘Ä¾Ã®Ã‡Å˜Ä½Â®Ä…Â®",Â Â //Â ImageÂ ofÂ theÂ book`
`Â Â Â Â Â Â Â identifiedDescriptionNameÂ =Â {Â Â Â //Â DescriptionÂ ofÂ theÂ book`
`Â Â Â Â Â Â Â Â Â Â Â "AÂ bookÂ thatÂ isÂ usedÂ forÂ tutorialÂ purposes.",`
`Â Â Â Â Â Â Â Â Â Â Â "Weight:Â ^77777710^000000"`
`Â Â Â Â Â Â Â },`
`Â Â Â Â Â Â Â slotCountÂ =Â 0,`
`Â Â Â Â Â Â Â ClassNumÂ =Â 0`
`Â Â Â },`
`Â Â Â `

At this point you have an item visible to players but it is still unreadable.

ID.txt
Now we can add the text of the book's. Let's see an example with short comments.

`%FAF0E6Â Â Â Â //Â BackgroundÂ color;Â alsoÂ theÂ colorÂ ofÂ theÂ textÂ whenÂ Auto-ReadÂ isÂ ON`
`^000088rAthenaÂ TutorialÂ Book^000000Â Â Â Â //Â FirstÂ Row`
`ThisÂ bookÂ isÂ justÂ forÂ testingÂ purposes.Â Â Â Â //Â Paragraphs.`
`IfÂ youÂ hitÂ twoÂ entersÂ andÂ keepÂ writing,Â youÂ willÂ createÂ aÂ newÂ ingameÂ paragraphÂ too.`
`YouÂ canÂ colorÂ theÂ text.Â DoÂ notÂ writeÂ tooÂ longÂ lines,Â sinceÂ someÂ playersÂ mightÂ useÂ Auto-Read.`

Bookitemnametable.txt
We are at the last step - we have to add the "Read / Auto-Read" buttons to the item. In this txt look for the last line and add this:

`11061#`

After that patch up your client, reload your item_db and your book is ready to read!

[center](/File:Custombook2.png "wikilink")

[Category:Database](/Category:Database "wikilink") [Category:Data](/Category:Data "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## Custom_Items

Structure
First, let's take a look at the item_db in the db folder, and its structure:

`ID,DBName,ScreenName,Type,Price,Sell,Weight,ATK,DEF,Range,Slot,Job,Class,Gender,Loc,wLV,eLV,`
`Refineable,View,{Script},{OnEquip_Script},{OnUnequip_Script}`


`0Â =Â UsableÂ :Â healing`
`2Â =Â UsableÂ :Â other`
`3Â =Â Misc`
`4Â =Â Armor`
`5Â =Â Weapon`
`6Â =Â Card`
`7Â =Â PetÂ Egg`
`8Â =Â PetÂ Equipment`
`10Â =Â Arrow/Ammunition`
`11Â =Â UsableÂ withÂ delayedÂ consumptionÂ (intendedÂ forÂ 'itemskill').`
`Â Â Â Â Â ItemsÂ usingÂ theÂ 'itemskill'Â scriptÂ commandÂ areÂ consumedÂ afterÂ selectingÂ aÂ target.`
`Â Â Â Â Â AnyÂ otherÂ commandÂ willÂ NOTÂ consumeÂ theÂ item.`
`12Â =Â ShadowÂ Equipment`
`18Â =Â AnotherÂ delayedÂ consumeÂ thatÂ requiresÂ userÂ confirmationÂ beforeÂ usingÂ item.`


`(S.)Â NoviceÂ Â Â Â Â Â Â Â Â (2^00):Â 0x00000001`
`SwordmanÂ Â Â Â Â Â Â Â Â Â Â Â (2^01):Â 0x00000002`
`MageÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (2^02):Â 0x00000004`
`ArcherÂ Â Â Â Â Â Â Â Â Â Â Â Â Â (2^03):Â 0x00000008`
`AcolyteÂ Â Â Â Â Â Â Â Â Â Â Â Â (2^04):Â 0x00000010`
`MerchantÂ Â Â Â Â Â Â Â Â Â Â Â (2^05):Â 0x00000020`
`ThiefÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â (2^06):Â 0x00000040`
`KnightÂ Â Â Â Â Â Â Â Â Â Â Â Â Â (2^07):Â 0x00000080`
`PriestÂ Â Â Â Â Â Â Â Â Â Â Â Â Â (2^08):Â 0x00000100`
`WizardÂ Â Â Â Â Â Â Â Â Â Â Â Â Â (2^09):Â 0x00000200`
`BlacksmithÂ Â Â Â Â Â Â Â Â Â (2^10):Â 0x00000400`
`HunterÂ Â Â Â Â Â Â Â Â Â Â Â Â Â (2^11):Â 0x00000800`
`AssassinÂ Â Â Â Â Â Â Â Â Â Â Â (2^12):Â 0x00001000`
*`Unused`*`Â Â Â Â Â Â Â Â Â Â Â Â Â Â (2^13):Â 0x00002000`
`CrusaderÂ Â Â Â Â Â Â Â Â Â Â Â (2^14):Â 0x00004000`
`MonkÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (2^15):Â 0x00008000`
`SageÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (2^16):Â 0x00010000`
`RogueÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â (2^17):Â 0x00020000`
`AlchemistÂ Â Â Â Â Â Â Â Â Â Â (2^18):Â 0x00040000`
`Bard/DancerÂ Â Â Â Â Â Â Â Â (2^19):Â 0x00080000`
*`Unused`*`Â Â Â Â Â Â Â Â Â Â Â Â Â Â (2^20):Â 0x00100000`
`TaekwonÂ Â Â Â Â Â Â Â Â Â Â Â Â (2^21):Â 0x00200000`
`StarGladiatorÂ Â Â Â Â Â Â (2^22):Â 0x00400000`
`SoulÂ LinkerÂ Â Â Â Â Â Â Â Â (2^23):Â 0x00800000`
`GunslingerÂ Â Â Â Â Â Â Â Â Â (2^24):Â 0x01000000`
`NinjaÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â (2^25):Â 0x02000000`
`GangsiÂ Â Â Â Â Â Â Â Â Â Â Â Â Â (2^26):Â 0x04000000`
`DeathÂ KnightÂ Â Â Â Â Â Â Â (2^27):Â 0x08000000`
`DarkÂ CollectorÂ Â Â Â Â Â (2^28):Â 0x10000000`
`Kagerou/OboroÂ Â Â Â Â Â Â (2^29):Â 0x20000000`
`RebellionÂ Â Â Â Â Â Â Â Â Â Â (2^30):Â 0x40000000`
`AllÂ ClassesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â :Â 0xFFFFFFFF`
`EveryÂ JobÂ ExceptÂ NoviceÂ Â Â :Â 0xFFFFFFFE`


`1Â Â =Â Normal`
`2Â Â =Â Reborn/Trans.Â ClassesÂ (HighÂ Wizards,Â ChampionsÂ etc.)Â (excl.Â Trans-3rdÂ classes)`
`4Â Â =Â BabyÂ ClassesÂ (excl.Â 3rdÂ BabyÂ Classes)`
`8Â Â =Â 3rdÂ ClassesÂ (excl.Â Trans-3rdÂ classesÂ andÂ 3rdÂ BabyÂ classes)`
`16Â =Â Trans-3rdÂ Classes`
`32Â =Â BabyÂ 3rdÂ Classes`


`0Â =Â Female`
`1Â =Â Male`
`2Â =Â NoÂ restrictionÂ (both)`


`(2^0)Â Â Â Â Â Â Â Â 1Â =Â LowerÂ headgear`
`(2^1)Â Â Â Â Â Â Â Â 2Â =Â RightÂ hand`
`(2^2)Â Â Â Â Â Â Â Â 4Â =Â Garment/Robe`
`(2^3)Â Â Â Â Â Â Â Â 8Â =Â AccessoryÂ 1`
`(2^4)Â Â Â Â Â Â Â 16Â =Â Armor`
`(2^5)Â Â Â Â Â Â Â 32Â =Â LeftÂ hand`
`(2^6)Â Â Â Â Â Â Â 64Â =Â Shoes`
`(2^7)Â Â Â Â Â Â 128Â =Â AccessoryÂ 2`
`(2^8)Â Â Â Â Â Â 256Â =Â UpperÂ headgear`
`(2^9)Â Â Â Â Â Â 512Â =Â MiddleÂ headgear`
`(2^10)Â Â Â Â 1024Â =Â CostumeÂ UpperÂ headgear`
`(2^11)Â Â Â Â 2048Â =Â CostumeÂ MiddleÂ headgear`
`(2^12)Â Â Â Â 4096Â =Â CostumeÂ LowerÂ headgear`
`(2^13)Â Â Â Â 8192Â =Â CostumeÂ Garment/Robe`
`(2^15)Â Â Â 32768Â =Â ArrowÂ (arrow-typeÂ itemsÂ only)`
`(2^16)Â Â Â 65536Â =Â ShadowÂ Armor`
`(2^17)Â Â 131072Â =Â ShadowÂ Weapon`
`(2^18)Â Â 262144Â =Â ShadowÂ Shield`
`(2^18)Â Â 524288Â =Â ShadowÂ Shoes`
`(2^20)Â 1048576Â =Â ShadowÂ AccessoryÂ 2`
`(2^21)Â 2097152Â =Â ShadowÂ AccessoryÂ 1`

        1.  Daggers
        2.  One-Handed Swords
        3.  Two-Handed Swords
        4.  One-Handed Spears
        5.  Two-Handed Spears
        6.  One-Handed Axes
        7.  Two-Handed Axes
        8.  Maces
        9.  *(not used)*
        10. Wand/Staff
        11. Bows/Crossbows
        12. Knuckle Weapons
        13. Musical Instruments
        14. Whips
        15. Books
        16. Katars
        17. Revolvers
        18. Rifles
        19. Shotguns
        20. Gatling guns
        21. Grenade launchers
        22. Fuuma shuriken
        23. Two-handed staves
        24. *Max Type*
        25. Dual-wield Daggers
        26. Dual-wield Swords
        27. Dual-wield Axes
        28. Dagger + Sword
        29. Dagger + Axe
        30. Sword + Axe
        1.  Guard, Novice Guard
        2.  Buckler
        3.  Shield, Holy Guard, Evangelist
        4.  Mirror Shield
        1.  Arrows
        2.  Throw-able daggers
        3.  Bullets
        4.  Shells
        5.  Grenades
        6.  Shuriken
        7.  Kunai
        8.  Cannonballs
        9.  Throwable Items (Sling Item)

In the doc folder look for a text file called "item_bonus", it shows all the scripts items can have and how they work.

Structure (Database)
First, let's take a look at item_db table of your Ragnarok database:

    | Field           | Type                  | Null | Key | Default | Extra |
    | id              | smallint(5) unsigned  | NO   | PRI | 0       |       |
    | name_english    | varchar(50)           | NO   | UNI |         |       |
    | name_japanese   | varchar(50)           | NO   |     |         |       |
    | type            | tinyint(2) unsigned   | NO   |     | 0       |       |
    | price_buy       | mediumint(8) unsigned | YES  |     | NULL    |       |
    | price_sell      | mediumint(8) unsigned | YES  |     | NULL    |       |
    | weight          | smallint(5) unsigned  | NO   |     | 0       |       |
    | attack          | smallint(5) unsigned  | YES  |     | NULL    |       |
    | defence         | smallint(5) unsigned  | YES  |     | NULL    |       |
    | range           | tinyint(2) unsigned   | YES  |     | NULL    |       |
    | slots           | tinyint(2) unsigned   | YES  |     | NULL    |       |
    | equip_jobs      | int(10) unsigned      | YES  |     | NULL    |       |
    | equip_upper     | tinyint(2) unsigned   | YES  |     | NULL    |       |
    | equip_genders   | tinyint(1) unsigned   | YES  |     | NULL    |       |
    | equip_locations | mediumint(7) unsigned | YES  |     | NULL    |       |
    | weapon_level    | tinyint(1) unsigned   | YES  |     | NULL    |       |
    | equip_level     | tinyint(3) unsigned   | YES  |     | NULL    |       |
    | refineable      | tinyint(1) unsigned   | YES  |     | NULL    |       |
    | view            | smallint(5) unsigned  | YES  |     | NULL    |       |
    | script          | text                  | YES  |     | NULL    |       |
    | equip_script    | text                  | YES  |     | NULL    |       |
    | unequip_script  | text                  | YES  |     | NULL    |       |


<!-- -->

    0 = Usable : healing
    2 = Usable : other
    3 = Misc
    4 = Armor
    5 = Weapon
    6 = Card
    7 = Pet Egg
    8 = Pet Equipment
    10 = Arrow/Ammunition
    11 = Usable with delayed consumption (intended for 'itemskill').
      Items using the 'itemskill' script command are consumed after selecting a target.
      Any other command will NOT consume the item.
    12 = Shadow Equipment
    18 = Another delayed consume that requires user confirmation before using item.


<!-- -->

    (S.) Novice         (2^00): 0x00000001
    Swordman            (2^01): 0x00000002
    Mage                (2^02): 0x00000004
    Archer              (2^03): 0x00000008
    Acolyte             (2^04): 0x00000010
    Merchant            (2^05): 0x00000020
    Thief               (2^06): 0x00000040
    Knight              (2^07): 0x00000080
    Priest              (2^08): 0x00000100
    Wizard              (2^09): 0x00000200
    Blacksmith          (2^10): 0x00000400
    Hunter              (2^11): 0x00000800
    Assassin            (2^12): 0x00001000
    ''Unused''              (2^13): 0x00002000
    Crusader            (2^14): 0x00004000
    Monk                (2^15): 0x00008000
    Sage                (2^16): 0x00010000
    Rogue               (2^17): 0x00020000
    Alchemist           (2^18): 0x00040000
    Bard/Dancer         (2^19): 0x00080000
    ''Unused''              (2^20): 0x00100000
    Taekwon             (2^21): 0x00200000
    StarGladiator       (2^22): 0x00400000
    Soul Linker         (2^23): 0x00800000
    Gunslinger          (2^24): 0x01000000
    Ninja               (2^25): 0x02000000
    Gangsi              (2^26): 0x04000000
    Death Knight        (2^27): 0x08000000
    Dark Collector      (2^28): 0x10000000
    Kagerou/Oboro       (2^29): 0x20000000
    Rebellion           (2^30): 0x40000000
    All Classes               : 0xFFFFFFFF
    Every Job Except Novice   : 0xFFFFFFFE


<!-- -->

    1  = Normal
    2  = Reborn/Trans. Classes (High Wizards, Champions etc.) (excl. Trans-3rd classes)
    4  = Baby Classes (excl. 3rd Baby Classes)
    8  = 3rd Classes (excl. Trans-3rd classes and 3rd Baby classes)
    16 = Trans-3rd Classes
    32 = Baby 3rd Classes


<!-- -->

    0 = Female
    1 = Male
    2 = No restriction (both)


<!-- -->

    (2^0)        1 = Lower headgear
    (2^1)        2 = Right hand
    (2^2)        4 = Garment/Robe
    (2^3)        8 = Accessory 1
    (2^4)       16 = Armor
    (2^5)       32 = Left hand
    (2^6)       64 = Shoes
    (2^7)      128 = Accessory 2
    (2^8)      256 = Upper headgear
    (2^9)      512 = Middle headgear
    (2^10)    1024 = Costume Upper headgear
    (2^11)    2048 = Costume Middle headgear
    (2^12)    4096 = Costume Lower headgear
    (2^13)    8192 = Costume Garment/Robe
    (2^15)   32768 = Arrow (arrow-type items only)
    (2^16)   65536 = Shadow Armor
    (2^17)  131072 = Shadow Weapon
    (2^18)  262144 = Shadow Shield
    (2^18)  524288 = Shadow Shoes
    (2^20) 1048576 = Shadow Accessory 2
    (2^21) 2097152 = Shadow Accessory 1

        1.  Daggers
        2.  One-Handed Swords
        3.  Two-Handed Swords
        4.  One-Handed Spears
        5.  Two-Handed Spears
        6.  One-Handed Axes
        7.  Two-Handed Axes
        8.  Maces
        9.  *(not used)*
        10. Wand/Staff
        11. Bows/Crossbows
        12. Knuckle Weapons
        13. Musical Instruments
        14. Whips
        15. Books
        16. Katars
        17. Revolvers
        18. Rifles
        19. Shotguns
        20. Gatling guns
        21. Grenade launchers
        22. Fuuma shuriken
        23. Two-handed staves
        24. *Max Type*
        25. Dual-wield Daggers
        26. Dual-wield Swords
        27. Dual-wield Axes
        28. Dagger + Sword
        29. Dagger + Axe
        30. Sword + Axe
        1.  Guard, Novice Guard
        2.  Buckler
        3.  Shield, Holy Guard, Evangelist
        4.  Mirror Shield
        1.  Arrows
        2.  Throw-able daggers
        3.  Bullets
        4.  Shells
        5.  Grenades
        6.  Shuriken
        7.  Kunai
        8.  Cannonballs
        9.  Throwable Items (Sling Item)

In the doc folder look for a text file called "item_bonus", it shows all the scripts items can have and how they work.

Defining Items clientside (Renewal Clients &lt;
2012-04-10a & Main Clients &lt;= 2012-07-10a)= After you make your item, put it in your item_db2.txt, so that you will not run into conflicts when updating the SVN later. Then go to your data folder and modify the following files, one after another.

idnum2itemdisplaynametable.txt
This file holds the item names, as displayed inside the client. Each item added as:

`ItemID#ItemName#`

ItemID is the number from your ID column inside the item db. If your item name contains spaces, replace those with _ (underscore).

idnum2itemdesctable.txt
This file contains the description of your item, when it is right-clicked. The syntax for an item is:

`ItemID#`
`ItemÂ DescriptionÂ LineÂ 1`
`ItemÂ DescriptionÂ LineÂ 2`
`#`

You can use any amount of lines for the description. If your description contains a \#, make sure it is followed by a space character.

idnum2itemresnametable.txt
This file sets the inventory and drop-sprite for an the item. Item is defined as follows:

`ItemID#SpriteName#`

The SpriteName is the name of the files in collection and item folders inside texture and the ones inside sprite folder. If you want to use the look of an another item, search for it's id and copy the sprite name from there.

itemslotcounttable.txt
In this file you set the amount of visible slots for the item. You do not need to add 0 slot items or items, which do not have slots at all (i. e. usable items). Syntax:

`ItemID#NumberOfSlots#`

NumberOfSlots should be a number from 1-4, larger values might have undesired effects.

Files for non-identified items
The following files specify the name, description and look for items, which have not yet been identified. Their syntax follows the same rules as for the files with *idnum* prefix. Normally the same text is entered for non-equipment and generic description (which can be copied from official items) is used for equipment of all sorts (weapons, armor, headgears).


Defining Items Clientside (For New Clients)
For newer clients all the information which were earlier specified in txt files have been combined into a single file :

System/ItemInfo.lub
Since ItemInfo.lub is compiled, you need to decompile it to lua , add your customs and recompile back to lub file (Some have said that renaming a decompiled file to lub also works) Syntax:

`[`<item id>`]Â =Â {`
`Â Â Â unidentifiedDisplayNameÂ =Â `<item name to show when not magnified>`,`
`Â Â Â unidentifiedResourceNameÂ =Â `<file name prefix used for all the images and drop sprite when not magnified>`,`
`Â Â Â unidentifiedDescriptionNameÂ =Â {Â `<comma separated list of strings>`,`<to get multiple lines>`,`<in item description>`Â },`
`Â Â Â identifiedDisplayNameÂ =Â `<item name to show when magnified>`,`
`Â Â Â identifiedResourceNameÂ =Â `<file name prefix used for all the images and drop sprite when magnified>`,`
`Â Â Â identifiedDescriptionNameÂ =Â {Â `<same format as unidentifiedDescriptionName but for magnified items>`Â },`
`Â Â Â slotCountÂ =Â `<number of slots>`,`
`Â Â Â ClassNumÂ =Â `<View ID - yes the same one that was there item_db>
`Â },`

You can also put the different values in DescriptionName in separate lines.

Example: Lets say i want to add a weapon to item id 25000 - a One handed sword named Devastator with 3 slots & the image files & drop sprite files are all named Black_Sword.\* . Also i want to display a Sword when not magnified.

`[25000]Â =Â {`
`Â Â Â unidentifiedDisplayNameÂ =Â "Sword",`
`Â Â Â unidentifiedResourceNameÂ =Â "Â¼Ã’ÂµÃ¥",`
`Â Â Â unidentifiedDescriptionNameÂ =Â {Â "UnidentifiedÂ item,Â canÂ beÂ identifiedÂ withÂ [Magnifier]."Â },`
`Â Â Â identifiedDisplayNameÂ =Â "Devastator",`
`Â Â Â identifiedResourceNameÂ =Â "Black_Sword",`
`Â Â Â identifiedDescriptionNameÂ =Â {Â `
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "AnÂ UnholyÂ SwordÂ thatÂ wasÂ createdÂ withÂ theÂ soleÂ purposeÂ ofÂ destruction",`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "ClassÂ :^777777Â Sword^000000",`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "AttackÂ :^777777Â 325^000000",`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "WeightÂ :^777777Â 80^000000",`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "WeaponÂ LevelÂ :^777777Â 4^000000",`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "RequiredÂ LevelÂ :^777777Â 100^000000",`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "ApplicableÂ JobÂ :^777777Â Novice,Â SwordsmanÂ Class,Â MerchantÂ Class,Â ThiefÂ Class^000000"`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },`
`Â Â Â slotCountÂ =Â 3,`
`Â Â Â ClassNumÂ =Â 2`
`Â },`

Allocating Items on Client Side
Your custom item will have 4 (6 in case its a headgear or garment) files:

`1)Â DropÂ spriteÂ ->Â Helmet_drop.sprÂ `
`2)Â DropÂ actÂ fileÂ ->Â Helmet_drop.act`
`3)Â ItemÂ InventoryÂ imageÂ ->Â Helmet_item.bmp`
`4)Â ItemÂ CollectionÂ imageÂ ->Â Helmet_collection.bmpÂ (theÂ oneÂ youÂ seeÂ onÂ itsÂ descriptionÂ window)`
`5)Â HeadgearÂ ViewÂ spriteÂ ->Â Helmet.spr`
`6)Â HeadgearÂ ViewÂ actÂ fileÂ ->Â Helmet.act`

Lets say i downloaded a custom item called Helmet which serves as a headgear and the above six files were in them.

Step 1:
We place the first four files based on what we specified in id2numresnametable.txt (IdentifiedResourceName in Iteminfo.lub). For our example lets say i used "Helmet" as the resource name :

`i)Â Â Â CopyÂ Helmet_drop.sprÂ toÂ [ROÂ Folder]\data\sprite\Â¾Ã†Ã€ÃŒÃ…Ã›\Helmet.spr`
`ii)Â Â CopyÂ Helmet_drop.actÂ toÂ [ROÂ Folder]\data\sprite\Â¾Ã†Ã€ÃŒÃ…Ã›\Helmet.act`
`iii)Â CopyÂ Helmet_item.bmpÂ toÂ [ROÂ Folder]\data\texture\Ã€Â¯Ã€ÃºÃ€ÃŽÃ…ÃÃ†Ã¤Ã€ÃŒÂ½Âº\item\Helmet.bmp`
`iv)Â Â CopyÂ Helmet_collection.bmpÂ toÂ [ROÂ Folder]\data\texture\Ã€Â¯Ã€ÃºÃ€ÃŽÃ…ÃÃ†Ã¤Ã€ÃŒÂ½Âº\collection\Helmet.bmpÂ `

Step 2 (only for Headgears):
For displaying headgear on the character there will be two additional files (sprite & act) or 4 if the sprite author intended for a separate set of files for male & female. In my example i have considered the first scenario.

The filename for headgear sprite are now specified in accname.lua file <b>(details of which is available in the [View IDs Section](/Custom_Items#View_IDs.2C_Having_A_Custom_Headgear_Without_Xray "wikilink"))</b>

lets say i used

`[ACCESSORY_IDs.HELMET]Â =Â "_Helmet",`

then we need to:

`i)Â Â Â CopyÂ Helmet.sprÂ toÂ [ROÂ Folder]\data\sprite\Â¾Ã‡Â¼Â¼Â»Ã§Â¸Â®\Â¿Â©\Â¿Â©_Helmet.sprÂ (Female)`
`ii)Â Â CopyÂ Helmet.actÂ toÂ [ROÂ Folder]\data\sprite\Â¾Ã‡Â¼Â¼Â»Ã§Â¸Â®\Â¿Â©\Â¿Â©_Helmet.actÂ `
`iii)Â CopyÂ Helmet.sprÂ toÂ [ROÂ Folder]\data\sprite\Â¾Ã‡Â¼Â¼Â»Ã§Â¸Â®\Â³Â²\Â³Â²_Helmet.sprÂ (Male)`
`iv)Â Â CopyÂ Helmet.actÂ toÂ [ROÂ Folder]\data\sprite\Â¾Ã‡Â¼Â¼Â»Ã§Â¸Â®\Â³Â²\Â³Â²_Helmet.actÂ `

Now it is ready to be used provided you have added entries properly to the lua files.

Specifications of the files
1) Drop sprites - ideally have 1 frame & its act file will be just an empty act (only header will be there inside)

2) Equip sprites - typically have 3+ frames to show images for various orientations & its act file will have the info on where to place each frame.

3) Item bmp - 24x24 size 256 bit bmp file.

4) Collection bmp - 75x100 size bmp file (usually 256 bit but there is no restriction)

<b>How to differentiate between sprite files?</b>

Open both sprite files in [Spr Conview](http://ratemyserver.net/download_agent.php?type=1&file_num=10). The number of frames in the files can be seen at bottom (Sprite: <currentframe>/<total>). If it says Sprite: 1/1 then its a drop sprite and the other is equip sprite.

Sometimes what sprite authors do is they simply copy the original sprite itself to make a drop sprite. In this case you will see both of them as identical when opened in Spr Conview & we don't need to worry about which one is which (since they are the same). If this process confused you, [here is an example folder](http://www.mediafire.com/?8lzt4cbot100w44), the sprite is done by drkangel. The folder is virus free.

View IDs, Having A Custom Headgear Without Xray
Look in your data folder and make sure there is a folder named "lua files", if there is not make it.[Download the most recent lub package](http://svn6.assembla.com/svn/ClientSide/Lua_Project/lubs/) and extract it to your lua files folder in your data folder. [Download the most recent accname.lua and accessoryid.lua](http://svn6.assembla.com/svn/ClientSide/Lua_Project/lua%20files/datainfo/), put it in your datainfo folder that is inside the lua files folder. Now download [this lub compiling tool](http://svn6.assembla.com/svn/ClientSide/Lua_Project/tool/luac5.0.2.exe), and put it in the datainfo folder. Now, Open accessoryid.lua in the datainfo folder with notepad or a text editor of your choice, go all the way down until the names stop. Add your custom gears before the } symbol. You should use a high number just like with your custom item's database ID, or use unused IDs to be sure you won't have to redo them all in the future, or at least for a while. Example:

`Â Â Â ACCESSORY_PINKBUNNY_HAIRBANDÂ =Â 663,`
`Â Â Â ACCESSORY_GREENBUNNY_HAIRBANDÂ =Â 664,`
`Â Â Â ACCESSORY_OLD_ELFEARÂ =Â 665,`
`Â Â Â ACCESSORY_THA_MAERO_MASKÂ =Â 666,`
`Â Â Â ACCESSORY_THANATOS_MAI_MASKÂ =Â 667,`
`Â Â Â --668Â free`
`Â Â Â ACCESSORY_FISHPINÂ =Â 669,`
`Â Â Â ACCESSORY_CUSTOM_HATÂ =Â 900,`
`}`

*You must compile to lub if you leave space between IDs, if you don't plan on compiling to lub, make sure you do not skip any numbers.*

Now open accname.lua, do basically the same thing but just in a different way, and for the sprite. Add your item to the bottom, have it look like the ones above it, except have your items name and the item's sprite name.

`Â Â Â [ACCESSORY_IDs.ACCESSORY_PINKBUNNY_HAIRBAND]Â =Â "_Ã‡ÃŽÃ…Â©Ã…Ã¤Â³Â¢Â¸Ã“Â¸Â®Â¶Ã¬",`
`Â Â Â [ACCESSORY_IDs.ACCESSORY_GREENBUNNY_HAIRBAND]Â =Â "_Â±Ã—Â¸Â°Ã…Ã¤Â³Â¢Â¸Ã“Â¸Â®Â¶Ã¬",`
`Â Â Â [ACCESSORY_IDs.ACCESSORY_OLD_ELFEAR]Â =Â "_Â°Ã­Â´Ã«Â¿Ã¤ÃÂ¤Ã€Ã‡Â±Ã",`
`Â Â Â [ACCESSORY_IDs.ACCESSORY_THA_MAERO_MASK]Â =Â "_Ã…Â¸Â³ÂªÃ…Ã¤Â½ÂºÃ€Ã‡Â½Â½Ã‡Ã„Â°Â¡Â¸Ã©",`
`Â Â Â [ACCESSORY_IDs.ACCESSORY_THANATOS_MAI_MASK]Â =Â "_Ã…Â¸Â³ÂªÃ…Ã¤Â½ÂºÃ€Ã‡ÃÃµÂ¿Ã€Â°Â¡Â¸Ã©",`
`Â Â Â [ACCESSORY_IDs.ACCESSORY_FISHPIN]Â =Â "_Â¹Â°Â°Ã­Â±Ã¢Ã‡Ã‰",`
`Â Â Â [ACCESSORY_IDs.ACCESSORY_CUSTOM_HAT]Â =Â "_Sprite_Name_Here",`
`}`

Delete the accname.lub and accessoryid.lub. Now that you are done, make sure luac.exe is in your datainfo folder, right click the luac.exe, create a shortcut, right click the shortcut, and click properties, in the target area, add right after the quotes, with the quotes:

`-oÂ "accessoryid.lub"Â "accessoryid.lua"`

So that it looks something like this:

`"C:\ProgramÂ FilesÂ (x86)\Gravity\RO\data\luaÂ files\datainfo\luac5.0.2.exe"Â -oÂ "accessoryid.lub"Â "accessoryid.lua"`

Do this also to "accname.lub" except instead of accessoryid in the quotes, do accname. If there is any lua file leftover, you may want to move it somewhere else just for future changes, like My Documents. For future reference, this is also how you turn the other lub files to lua files.

Modifications
Sprite Replacement
To replace a headgear with your customized headgear, just delete one of the items you want, and replace your customised item ID with that id.

Lets say you have something like this:

`15000,Angel_Wing,AngelÂ Wing,4,,10,10,0,,1,0,0,3,0,0,0,0,0,{},{},{}`

And there's an item you wont need, such as:

`2220,Hat,Hat,5,1000,,200,,2,,0,10477567,2,256,,0,1,16,{},{},{}`

Well, to replace it, just delete everything in the hat line but its ID, and paste there your custom item, all the line but the ID. Should be like this:

**`2220`**`,Hat,Hat,5,1000,,200,,2,,0,10477567,2,256,,0,1,16,{},{},{}`
`15000,`**`Angel_Wing,Angel` `Wing,4,,10,10,0,,1,0,0,3,0,0,0,0,0,{},{},{}`**
`vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv`
**`2220,Angel_Wing,Angel` `Wing,4,,10,10,0,,1,0,0,3,0,0,0,0,0,{},{},{}`**

All you need to do now is changing the View ID to the Hat, and change your file names to its name. You can find them on the idnum2resnametable.txt Search for 2220 and the gibberish besides it, w/o the \# \# is the file name, then rename it to your custom item name.

Remember to add the files to data\\sprite\\Â¾Ã†Ã€ÃŒÃ…Ã› (Icon sprite) and both data\\sprite\\Â¾Ã‡Â¼Â¼Â»Ã§Â¸Â®\\Â³Â² (Male Item Sprite) and data\\sprite\\Â¾Ã‡Â¼Â¼Â»Ã§Â¸Â®\\Â¿Â© (Female Item Sprite). Remember, these 2 last item names, must have either a Â³Â²_ for male or Â¿Â©_ for female, at the beginning of the name, both .spr and .act. Also, don't forget to change the other files:

idnum2itemdisplaynametable.txt , idnum2itemdesctable.txt , idnum2itemdesctable.txt , num2itemdesctable.txt , num2itemdisplaynametable.txt , num2itemresnametable.txt and itemslotcounttable.txt

Use these files if you want to replace sprites, they will be useful.


Item Restrictions
Look on your db folder for a file called item_trade.txt and open it

Now, the pattern for a flag is:

`ItemÂ ID,Â TradeMask,Â GM-LevelÂ Override`


`1:ItemÂ can'tÂ beÂ dropped`
`2:ItemÂ can'tÂ beÂ tradedÂ (norÂ vended)`
`4:ItemÂ canÂ onlyÂ beÂ tradedÂ withÂ weddedÂ partner`
`8:ItemÂ can'tÂ beÂ soldÂ toÂ NPCs`
`16:ItemÂ can'tÂ beÂ placedÂ inÂ theÂ cart`
`32:ItemÂ can'tÂ beÂ placedÂ inÂ theÂ storage`
`64:ItemÂ can'tÂ beÂ placedÂ inÂ theÂ guildÂ storage`


Item Script
Okay, I'll update this as I go; otherwise, I wont have anything new to show. First with usable items.

Well, there are 3 types of usables:

1.- Healing items, they have in the type field a 0.

2.- Other uses items, such as fly wings and so, which doesn't heal, but does have an instant effect, they have in the type field a 2.

3.- Usable items, which are skills that requires a target selection, therefore they have a delayed use, and in newer SVNs the item wont be gone until the target is chosen and the cast has finished. Means, you wont lose the item if the skill hasn't been done. They have in the type field an 11.

Now, for an item skill, the pattern for a skill is:

`itemskillÂ `<skill id>`,`<skill level>`;`

Without &lt;&gt; of course.

Now, we go to our db\\skill_db.txt and search for the blessing ID, searching for AL_ or blessing, but first, the structure of a skill:

`id,range,hit,inf,element,nk,splash,max,list_num,castcancel,cast_defence_rate,inf2,maxcount,skill_type,blow_count,name,description`

Now, the AL_BLESSING or Blessing Skill:

`34,9,6,16,0,0x1,0,10,1,yes,0,0,0,magic,0,Â Â AL_BLESSING,Blessing`

We grab the ID and put it on our code:

`itemskillÂ 34,`<skill lvl>`;`

Don't mind the actual level of the skill_db.txt for the skill level part. You can actually put the level you want here below 99, so lets pick 4:

`itemskillÂ 34,4;`

And finally, insert it on the code.

    ,{ itemskill 34,4; },{},{}

There, we have a Lvl 4 Blessing item skill.

Remember, one space before and one after the script, NOT TAB!

And so on with other skills. Just remember these steps and they should be fine. And remember, itemskill is NOT the same as skill. itemskill will make you CAST that skill, while skill will GIVE you the skill. If you give an item, whether delayed use or normal usable two itemskill commands, only the latter will come into effect, as you cannot cast two skills at the same time.

Now, for Potions.

Instead of using itemskill, we will use itemheal:

`,{Â itemhealÂ 100,0;Â },{},{}`

The green is the HP, the blue is the SP. To add that random heal amount effect, just pick a set amount, let's say 120, then pick 1 or 2 numbers, up to you. Then, add the rand() command, like this:

`,{Â itemhealÂ rand(120,9,49),0;Â },{},{}`

Explanation: This item will heal about 49~120 hp and 0 SP. To heal SP you change the 0 to a number. Like this:

`,{Â itemhealÂ rand(120,9,49),50;Â },{},{}`

It will now heal 50 SP. Now, for skilleffect and sc_start.

Okay, let's see. Here's a example of an item casting a skill and simulating a skill.

`,{Â itemskillÂ 34,10;Â skilleffectÂ 29,0;Â sc_startÂ 12,140000,5;Â },{},{}`

skilleffect will display on your client a skill visual effect. The pattern is:

`skilleffectÂ `<skill ID>`,`<number>`;`

skill ID
Self-explanatory.

number
Have you seen those skills that shows up numbers upon casting? Such as heal? Well, putting a number there will display it. But only works on skills with numbers floating.

sc_start has the following pattern:

`sc_startÂ `<status id>`,`<duration>`,`<val1>`[,`<unit id>`];`

status id
Refer to const.txt in your db folder for all effects. Open it with a text editor then search by either clicking edit, then find, or press and hold the ctrl key, and while still holding it press the f key, then release, and search for "SC_ALL -1". Everything below this is an effect. The effects stop at "e_gasp 0" which are emoticons.

duration
Is the amount time in milliseconds (1000 msec = 1 sec) that the status will be active.

val1
Typically it's the level of the skill, associated with this status.

unit id
Allows to start the status on an other unit, than the attached player. For players this is account id. This parameter is optional, and can be omitted.

Now, for the item I said, it will show you the visual effect of Blessing and cast on you a lvl 5 Agi-Up! skill for 140 seconds.

For more item scripts see script_commands.txt in your doc folder, as well as item_bonus.txt in your doc folder.

==Weapon Sprite Solution (Renewal Clients &lt;= 2012-04-10a & Main Clients &lt;= 2012-07-10a)== For these clients, Weapons are limited to use a range of Item IDs hardcoded in the clientn for each type. For e.g.

`1265,Bloody_Roar,BloodyÂ Roar,4,,10,1000,120,,1,0,4096,7,2,34,4,75,1,16,{Â bonusÂ bIgnoreDefRace,RC_DemiHuman;Â bonusÂ bFlee,-160;Â bonusÂ bFlee2,-160;Â bonusÂ bNoRegen,1;Â bonusÂ bNoRegen,2;Â },{},{}`
`1266,Test,Test,4,4000,2000,10,165,,1,0,4096,7,2,34,3,33,1,16,{}`

`//Â 1-HandedÂ Axes`
`1301,Axe,Axe,4,500,,800,38,,1,3,8803555,7,2,2,1,3,1,6,{}`

Here the item 1266 is a custom katar and it does show up as a katar (if you have the proper sprite files ofcourse). but if i use some id like say 22000, client wont display it. So what is the range of item ids you can use? Look below:


<!-- -->


<!-- -->


<!-- -->


<!-- -->


<!-- -->


<!-- -->


<!-- -->


<!-- -->


The number of unused Item IDs left known for a range has also been mentioned above. Best practice to follow check in your range in official db before adding custom weapon.

Weapon Sprite Solution (For New Clients)
For new clients the view id system is also applicable to client. To add a custom weapon you need to first edit a file called weapontable.lub in your data folder

`data/luafiles514/luaÂ files/datainfo/weapontable.lub`

I will be adding <b>Oriental_Sword</b> which will be a 1-Handed sword. Open weapontable.lub. First you will see a table called <b>Weapon_IDs</b>. Take note of the first 30 values in this table - these are the only available Weapon types in the client right now.

Anyways go to the last entry which should be for Wizardy Staff = 97. You can use a view id after that like shown below

`Â WEAPONTYPE_Oriental_SwordÂ =Â 98,`

Come down and you see the next table called <b>WeaponNameTable</b>. Here is where you add your sprite name suffix.
What do i mean by that? Its the last part in your weapon sprite & act file. Before it used to be _<Item ID>.

`data/sprite/`<job dependent folder>`/`<job dependent prefix>`_`<gender><weapon suffix>`.spr`

OK Back to topic. so I add my entry like shown below.

`[Weapon_IDs.WEAPONTYPE_Oriental_Sword]Â =Â "_Oriental"`

Lastly come down further in weapontable.lub and you see the last table called <b>Expansion_Weapon_IDs</b>.
Remember the 30 types i told you to take note of ? here we assign one of those to our custom (like a mapping or connection).
Since mine is a 1-Handed Sword I specify it like below.

`[Weapon_IDs.WEAPONTYPE_Oriental_Sword]Â =Â Weapon_IDs.WPCLASS_WEAPONTYPE_SWORDÂ `

<b>Now for the most important part. For our client to actually pick up all these details we need to provide the view id which we used in Weapon_IDs table as the ClassNum value in ItemInfo.lua. Check the [ItemInfo.lub format](/Custom_Items#System.2FItemInfo.lub "wikilink") shown above for details.</b>

With this your weapon sprite will become visible while attacking.

[Category:Database](/Category:Database "wikilink") [Category:Data](/Category:Data "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## Custom_Jobs

\[Guide\] Add Custom Job

By: **Ratalaika**

On this page, you will be able to learn the steps on how to add your Custom Job. First off:

**1.** Open the file

Search for the lines:

`Â Â Â JOB_SUMMER,`
`Â Â Â JOB_MAX_BASIC,`

Then replace it with:

`Â Â Â JOB_SUMMER,`
`Â Â Â JOB_BURGLAR=Â 35,`
`Â Â Â JOB_MAX_BASIC,`

Save the file.

Next, open

Search for the lines:

`Â Â Â Â Â Â Â Â Â Â Â {Â "ninja",Â Â Â Â 25Â },`
`Â Â Â Â Â Â Â Â Â Â Â {Â "highÂ novice",Â Â Â Â 4001Â },`

Then replace it with:

`Â Â Â Â Â Â Â Â Â Â Â {Â "ninja",Â Â Â Â 25Â },`
`Â Â Â Â Â Â Â Â Â Â Â {Â "burglar",Â Â Â Â 35Â },`
`Â Â Â Â Â Â Â Â Â Â Â {Â "highÂ novice",Â Â Â Â 4001Â },`

Save the file and open

Search for the lines:

`Â Â Â MAPID_NINJA,`
`Â Â Â MAPID_XMAS,`
`Â Â Â MAPID_SUMMER,`

Then replace it with:

`Â Â Â MAPID_NINJA,`
`Â Â Â MAPID_XMAS,`
`Â Â Â MAPID_SUMMER,`
`Â Â Â MAPID_BURGLARÂ =Â 0x0E,`

Save the file and open

Search for the lines:

`Â Â Â ifÂ (jobmaskÂ &Â 1<<JOB_NINJA)`
`Â Â Â Â Â Â Â bclass[0]Â |=Â 1<<MAPID_NINJA;`
`}`

Then replace it with:

`Â Â Â ifÂ (jobmaskÂ &Â 1<<JOB_NINJA)`
`Â Â Â Â Â Â Â bclass[0]Â |=Â 1<<MAPID_NINJA;`
`Â Â Â //itemsÂ job`
`Â Â Â ifÂ (jobmaskÂ &Â 1<<35)`
`Â Â Â Â Â Â Â bclass[0]Â |=Â 1<<MAPID_BURGLAR;`
`}`

Save the file and open

Search for the lines:

`Â Â Â Â Â Â Â caseÂ JOB_SUMMER:`
`Â Â Â Â Â Â Â Â Â Â Â class_Â =Â MAPID_SUMMER;`
`Â Â Â Â Â Â Â Â Â Â Â break;`
`Â Â Â Â Â Â Â default:`
`Â Â Â Â Â Â Â Â Â Â Â returnÂ -1;`
`Â Â Â }`
`Â Â Â returnÂ class_;`
`}`

Then replace it with:

`Â Â Â Â Â Â Â caseÂ JOB_SUMMER:`
`Â Â Â Â Â Â Â Â Â Â Â class_Â =Â MAPID_SUMMER;`
`Â Â Â Â Â Â Â Â Â Â Â break;`
`Â Â Â Â Â Â Â caseÂ JOB_BURGLAR:`
`Â Â Â Â Â Â Â Â Â Â Â class_Â |=Â MAPID_BURGLAR;`
`Â Â Â Â Â Â Â Â Â Â Â break;`
`Â Â Â Â Â Â Â default:`
`Â Â Â Â Â Â Â Â Â Â Â returnÂ -1;`
`Â Â Â }`
`Â Â Â returnÂ class_;`
`}`

Search for the lines:

`Â Â Â Â Â Â Â caseÂ MAPID_SUMMER:Â Â Â Â Â Â Â Â Â Â returnÂ JOB_SUMMER;`

Replace it with:

`Â Â Â Â Â Â Â caseÂ MAPID_BURGLAR:Â Â Â Â Â Â Â Â Â Â Â Â returnÂ JOB_BURGLAR;`

Finally search for the lines:

`Â Â Â caseÂ JOB_SUMMER:`
`Â Â Â Â Â Â Â returnÂ msg_txt(621);`

And replace it with:

`Â Â Â caseÂ JOB_BURGLAR:`
`Â Â Â Â Â Â Â returnÂ msg_txt(700);`

Now you have finally modified the src files, once that is done recompile it.

**2.** Now we need to edit the **db** files, in order to do that, find the **db** folder. Once the folder is opened, look for and open it.

Once done, look for the lines:

`Job_GunslingerÂ Â Â Â 24`
`Job_NinjaÂ Â Â Â 25`
`Job_XmasÂ Â Â Â 26`

Then replace it with:

`Job_GunslingerÂ Â Â Â 24`
`Job_NinjaÂ Â Â Â 25`
`Job_XmasÂ Â Â Â 26`
`Job_BurglarÂ Â Â Â 35`

Now after that, find the lines that are shown below (The lines are still under **const.txt**):

`EAJ_TAEKWONÂ Â Â Â 0x7`
`EAJ_GUNSLINGERÂ Â Â Â 0x9`
`EAJ_NINJAÂ Â Â Â 0x0A`

Then replace it with:

`EAJ_TAEKWONÂ Â Â Â 0x7`
`EAJ_GUNSLINGERÂ Â Â Â 0x9`
`EAJ_NINJAÂ Â Â Â 0x0A`
`EAJ_BURGLARÂ Â Â Â 0x0E`

Once you have finished editing those lines, save it then close.

Now, you will have to look for the txt file named **exp.txt**.

`MaximumÂ LevelÂ SyntaxÂ line:Â `**`0:1:2:3:4:5:6:7:8:9:10:11:12...`**

Then replace it with:

`MaximumÂ LevelÂ SyntaxÂ line:Â `**`0:1:2:3:4:5:6:7:8:9:10:11:12:35...`**

In the same file we look for:

`yourÂ maxÂ level,1:2:3:4:5:6:26:4046,1`

We need to change to code like this:

`yourÂ maxÂ level,1:2:3:4:5:6:26:4046:35,1`

We need to edit job_db1.txt And at the end of everything we need to paste this:

`//Burglar`
`35,Â Â Â Â 28000,70Â Â Â ,500Â Â ,200Â Â ,400Â Â ,500Â Â ,550Â Â ,600Â Â ,650Â Â ,700Â Â ,700Â Â ,750Â Â ,650Â Â ,700Â Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000Â ,2000`

This line is the one of the swordman but you can copy any other just changing the first number which is the jobid or if you prefer you can make your own.

Edit the file job_db2.txt At the end:

`//Burglar`
`35,0,1,0,0,0,3,0,0,0,5,0,0,0,1,0,0,0,3,0,0,0,5,0,0,0,6,0,0,0,2,0,0,1,0,0,5,0,3,0`

1,0,3,0,6,0,2,1,0,1,1

This line is the Swordsman you can copy any classes job id (first number) or you can make your own

Now it's time to add this skill to skill_tree.txt At the end of everything we put this

`//Burglar`
`//REQUIRED`
`35,1,9,0,0,0,0,0,0,0,0,0,0Â //NV_BASIC#BasicÂ Skill#`
`35,142,1,0,0,0,0,0,0,0,0,0,0Â //NV_FIRSTAID#FirstÂ Aid#`
`//WhatÂ everÂ skillsÂ youÂ wantÂ youÂ canÂ add`
`35,2,10,0,0,0,0,0,0,0,0,0,0Â //SM_SWORD#SwordÂ Mastery#`
`35,4,10,0,0,0,0,0,0,0,0,0,0Â //SM_RECOVERY#IncreaseÂ HPÂ Recovery#`
`35,5,10,0,0,0,0,0,0,0,0,0,0Â //SM_BASH#Bash#`
`35,6,10,0,0,0,0,0,0,0,0,0,0Â //SM_PROVOKE#Provoke#`
`35,7,10,5,5,0,0,0,0,0,0,0,0Â //SM_MAGNUM#MagnumÂ Break#`
`35,8,10,6,5,0,0,0,0,0,0,0,0Â //SM_ENDURE#Endure#`
`35,26,2,24,1,0,0,0,0,0,0,0,0Â //AL_TELEPORT#Teleport#`
`35,27,4,26,2,0,0,0,0,0,0,0,0Â //AL_WARP#WarpÂ Portal#`
`35,28,10,0,0,0,0,0,0,0,0,0,0Â //AL_HEAL#Heal#`
`35,33,10,22,3,0,0,0,0,0,0,0,0Â //AL_ANGELUS#Angelus#`
`35,34,10,22,5,0,0,0,0,0,0,0,0Â //AL_BLESSING#Blessing#`
`35,35,1,28,2,0,0,0,0,0,0,0,0Â //AL_CURE#Cure#`
`//REQUIRED`
`35,410,1,0,0,0,0,0,0,0,0,0,0Â //WE_CALLBABY#CallÂ Baby#`
`35,681,1,0,0,0,0,0,0,0,0,0,0Â //ALL_INCCARRY#EnlargeÂ WeightÂ LimitÂ R#`

And that's the skill that will take the Job you want to put your job of copying the line you want such as:

`//DoubleÂ AttackÂ Skill`
`12,48,10,0,0,0,0,0,0,0,0,0,0Â //TF_DOUBLE#DoubleÂ Attack#`

And so it is our job so we would have to modify

`35,48,10,0,0,0,0,0,0,0,0,0,0Â //TF_DOUBLE#DoubleÂ Attack#`

We changed the first number to get the id of our job if you design your own set of skills you can't forget to put these:

`35,1,9,0,0,0,0,0,0,0,0,0,0Â //NV_BASIC#BasicÂ Skill#`
`35,142,1,0,0,0,0,0,0,0,0,0,0Â //NV_FIRSTAID#FirstÂ Aid#`
`35,410,1,0,0,0,0,0,0,0,0,0,0Â //WE_CALLBABY#CallÂ Baby#`
`35,681,1,0,0,0,0,0,0,0,0,0,0Â //ALL_INCCARRY#EnlargeÂ WeightÂ LimitÂ R#`

Please refer to [adding new skills](/adding_new_skills "wikilink") to add new custom skills.

If you do not put them there will be errors

Next, open the file

Look for this:

`620:Â Ninja`
`621:Â Summer`

And add your custom class before "Summer"

`620:Â Ninja`
`621:Â Summer`
`700:Â Burglar`

And with that ends the server-side modifications.

Client Side: (XRAY Required unless you plan to replace 3rd class id's.)

first start by editing

Class_tab.txt

Find this

`!52`
`Â°Ã‹Â»Ã§`
`Â¸Â¶Â¹Ã½Â»Ã§`

Add your custom class

`!35`
`Burglar`
`!52`
`Â°Ã‹Â»Ã§`
`Â¸Â¶Â¹Ã½Â»Ã§`

Second edit

imf_tab.txt

Find this

`!52`
`Â°Ã‹Â»Ã§`
`Â¸Â¶Â¹Ã½Â»Ã§`

Add your custom class

`!35`
`Â¼ÂºÃÃ·Ã€Ãš`
`!52`
`Â°Ã‹Â»Ã§`
`Â¸Â¶Â¹Ã½Â»Ã§`

Third edit

reality_dir_tab.txt

Find this

`!52`
`Â°Ã‹Â»Ã§\\Â°Ã‹Â»Ã§`
`Â¸Â¶Â¹Ã½Â»Ã§\\Â¸Â¶Â¹Ã½Â»Ã§`

Add your custom class (!35)

`!35`
`Â¼ÂºÃÃ·Ã€Ãš\\Â¼ÂºÃÃ·Ã€Ãš`
`!52`
`Â°Ã‹Â»Ã§\\Â°Ã‹Â»Ã§`
`Â¸Â¶Â¹Ã½Â»Ã§\\Â¸Â¶Â¹Ã½Â»Ã§`

Fourth edit

reality_tab.txt

Find this

`!52`
`Â°Ã‹Â»Ã§`
`Â¸Â¶Â¹Ã½Â»Ã§`

Add your custom class (!35)

`!35`
`Â¼ÂºÃÃ·Ã€Ãš`
`!52`
`Â°Ã‹Â»Ã§`
`Â¸Â¶Â¹Ã½Â»Ã§`

Fourth edit

monstrosity_tab.txt

Find this

`!47`
`1_M_01`
`1_M_02`
`1_M_03`

Add your custom class ()

`!35`
`Burglar`
`!47`
`1_M_01`
`1_M_02`
`1_M_03`
`1_M_04`

Now copy the sprite files that will go on

Male:

`sprite\Ã€ÃŽÂ°Â£ÃÂ·\Â¸Ã¶Ã…Ã«\Â³Â²`

Female:

`sprite\Ã€ÃŽÂ°Â£ÃÂ·\Â¸Ã¶Ã…Ã«\Â¿Â©`

Male:

`Burglar_Â³Â².spr`
`Burglar_Â³Â².act`

Female:

`Burglar_Â¿Â©.spr`
`Burglar_Â¿Â©.act`

[Category:Customization](/Category:Customization "wikilink") [Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Custom_Maps

Adding Custom Maps
The process of adding in maps on the server end is relatively fool-proof, and is very easy to do. As long as you follow this guide, you should have few problems when attempting to add in the maps you want.

Conf Folder
### Maps_athena

First what you are going to want to do is open up 'maps_athena.conf' in the 'conf' folder, and scroll all the way to the bottom. Once you get there, just copy the format of how the other maps are listed, so it will be like map: Custom_Map. Remember not to use spaces, either use no spaces or underscores instead of spaces. Save that file and close it, we won't need it again. **NOTE:** Don't put .rsw at the end of the name, that is a depreciated method of placing maps(If it is even still supported).

### Grf-files

This is a short step, in the 'conf' folder again. Open up grf-files.txt and simply make sure that if your custom map is in a GRF, to add said GRF to the GRF list following the format provided in the file. If your map is in a data folder, make sure to add the correct path to your data folder in the data folder section, but do not include \\data in your path. Example:

`//-----------------------------------------`
`//GRFÂ List`
`//-----------------------------------------`
`//Â grf:Â C:\path\to\RO\data.grf`
`//Â YouÂ mayÂ addÂ moreÂ inÂ thisÂ format`
`//Â grf:Â `<data file path>
`grf:Â C:\ProgramÂ FilesÂ (x86)\Gravity\RO\data.grf`
`grf:Â C:\ProgramÂ FilesÂ (x86)\Gravity\RO\rdata.grf`
`//------Â OthersÂ ---------------------------`
`//Â DataÂ DirectoryÂ (withoutÂ theÂ actualÂ data\Â though)`
`//Â theÂ belowÂ exampleÂ wouldÂ useÂ C:\path\to\RO\data\`
`//data_dir:Â C:\path\to\RO\`
`data_dir:Â C:\ProgramÂ FilesÂ (x86)\Gravity\RO\`

Db Folder
The next modification needed is to a file called 'map_index.txt', which is located in the 'db' folder. As before, scroll to the bottom of the file. You may notice a header placed in // (Comment) tags, which tells you to place your custom map after it. Read it, and as before, follow the format this file is using for map entries, just type the name of your map then use the tab key and place 1250 for the starting id of your map.

Example: invek<tab>1250

Anyways, once you put an entry for your maps at the bottom of the file, save it and close it.

Before you leave the 'db' folder, you have the option of deleting the file 'map_cache.dat', which is what the server uses as a list of maps that it has installed. You can see the map_cache.dat inside your db/re folder the the renewal and db/pre-re folder for the pre-renewal. rAthena made a decision to have a two map_cache.dat because of renewal maps should not be appearing in your pre-renewal server.

If the server can't find a map on the list when something requests it, the server considers the map non-existant. I'm not sure of any issue existing that stems from deleting it (other than if you try to start the server without a new one generated), but if you feel uncomfortable in doing so, leave it alone. Regardless of whatever you chose to do, head up a folder, and look for the program 'mapcache.exe'. All you have to do is execute this program, and it will begin to either recreate the mapcache with your custom maps added, or simply skip along the already added maps and when it comes upon your custom maps, it will add them into the cache. **NOTE:** I like to open up a copy of cmd.exe that sits in the same folder and execute mapcache using it, which allows me to read the end output,(where you should see your custom maps being cached) just as a confirmation. **NOTE:** Whatever OS you use to create the mapcache, it should be valid on any OS rAthena is running on.

Fire up the server, and hop in-game to check if the map exists.

Client Side
Go into your data folder and locate 'mapnametable.txt'. Open it, scroll to the bottom, and as before follow the same format. Add your map's file name followed by .rsw and then in between the pound symbols, put what you want to show up as the name of the map when the user uses /where. Don't forget to add the .gat, .gnd and .rsw files of your new custom map to your data folder.

Example:

invek.rsw\#Town Of Beginnings\#

invek.rsw = your custom map file name (rsw).

Town Of Beginnings = The title of your custom map when a player uses /where command.

Common Errors
### Successfully added, but in-game it doesn't exist

Run the mapcache again without deleting your mapcache you built the first time, and check the end output. If it states a second time that it 'Successfully Added' the map, and the server still states the map doesn't exists, this usually is a sign that the name of the map exceeds 11 characters (e.g.: hallowstation is 13 characters, while hal_station is 11), and can be confirmed if you check the map server's output for removed maps and find the first 11 characters of your maps name listed.

### Mapcache cannot find my map

Check to see if your settings in grf-files.txt are correct, and that the name of the map is correct in maps_athena.conf and map_index.txt

### /Where shows unknown map

That is due to a client side file not being updated, see above for more information.

### Black squares on my map that causes parts of it to flash

Black squares and flashing spots on the map are the result of saving the map in certain revisions. To ensure clear quality maps, it is recommended that users edit in BrowEdit r620 and save their maps in BrowEdit r586. If you're still experiencing black squares even after saving your maps in r586, it can be that your .rsw files are being saved with the wrong hex codes. To fix this, follow the instructions [here](https://rathena.org/board/topic/61531-resolved-browedit-help-about-walking/#entry92618). [Category:Customization](/Category:Customization "wikilink")

============================================================

## Custom_Pets

To be able to use this guide, one must have basic understanding on how to edit rAthena databases, specifically the item DB. I will not be explaining much on editing those

The Pet DB
The information about pets are stored in the pet_db.txt file in the db folder. Here is a quick rundown of what the database contains. We will look at a Poring, as an example.

    MobID,Name,JName,ItemID,EggID,AcceID,FoodID,
    Fullness,HungryDelay,R_Hungry,,R_Full,Intimate,Die,
    Capture,Speed,S_Performance,talk_convert_class,
    attack_rate,defence_attack_rate,change_target_rate, pet_script

    1002,PORING,Poring,619,9001,10013,531,80,20,50,100,250,20,2000,400,1,0,350,400,800,{ petloot 10; }

\* **MobID:** Obvious, check mob_db.txt for a monster's MobID.


As to pet skills, pet_db gives an in depth explanation on how to use it. It's quite simple to give your custom pet custom skills, so I will not be detailing this in this guide. If you want your custom pets to use skills, you may have to change:

    // Does the pet need its equipment before it does its skill? (Note 1)
    pet_equip_required: yes

to no, since they will not have equipment.

The Item DB
Taming items and pet egg information are stored in the item_db.txt file. A taming item format is the following, using an Unripe Apple(619) as an example:

    619,Unripe_Apple,Unripe Apple,11,1000,,50,,,,,0xFFFFFFFF,7,2,,,,,,{ pet 1002; },{},{}

Important to note is the part in bold. The ETC item you use for custom taming items will need to follow this same format.
A pet egg format is the following, using a Poring Egg(9001) as an example:

    9001,Poring_Egg,Poring Egg,7,,10,0,,,,,,,,,,,,,{},{},{}

This part is very easy, as you can see.
Basically, model your taming items and eggs to these formats, and you will not need to know any specifics.

Replacing A Pet
The easiest way to have a custom pet is to replace a current pet. Say you want a Succubus (1370). Choose a pet that you don't want anymore. For our example, we will replace a Poring. To do this, simply replace the following to get a custom pet that has the exact same status and skills as a Poring.

    1370,SUCCUBUS,Succubus,619,9001,0,531,80,20,50,100,250,20,2000,400,1,0,350,400,800,{ petloot 10; }

You can customize this further by editing the values you wish. Notice that the accessory value has been changed to 0.
Next, you must edit item_db.txt for information about the taming item. To do this, search for the Poring taming item, Unripe Apple(619). Replace the following values, following the format of the Item DB explained above:

    619,Unripe_Apple,Unripe Apple,11,1000,,50,,,,,0xFFFFFFFF,7,2,,,,,,{ pet 1370; },{},{}

Now you are done, and have a Succubus instead of a Poring. To catch a Succubus, you will use an Unripe Apple (619). To change the item descriptions and egg sprites, please refer to another section of this guide.

Adding A New Pet
I didn't like the idea of replacing an existing pet, so I sought to add in pets. The process is a little similar to replacing a pet. Instead, you create a new line in pet_db.txt with your new pet information. As an example, we will add a Succubus to the pet_db.

    1370,SUCCUBUS,Succubus,739,9031,0,537,80,20,20,100,250,20,150,200,1,0,800,400,200,
    { petskillbonus bLuk,20,10,90; }

I made the Succubus's taming item a Rouge(739), her food Pet Food(537), her capture rate 1.5%, and her pet skill +20 Luck for 10 seconds every 90 seconds.
Add the above line to the end of pet_db, and you are done. Now we have all the original pets AND a Succubus.
The next step is to create a taming item and an egg for this Succubus. To create the taming item, go to item_db, and pick an item you want to use for the taming item. I suggest using an ETC item, as they really do not serve much purpose. Edit the values accordingly to follow the pet taming item format. An example of Rouge for the Succubus taming item:

    739,Rouge,Rouge,11,,5000,10,,,,,0xFFFFFFFF,7,2,,,,,,{ pet 1370; },{},{}

Do not forget the bold part. This signifies which pet this taming item will capture. Also, count properly the number of commas you need. Map Server will give errors if the syntax is incorrect.
Next, we need a pet egg. This, you will have to actually create. Choose an available Item ID. I suggest starting from 9028, if not already used, and work your way up, for pet eggs. Add a line to item_db.txt with the values for a pet egg. For example, a Succubus egg:

    9031,Succubus_Egg,Succubus Egg,7,,10,0,,,,,,,,,,,,,{},{},{}

The egg ID is 9031, as you can also see from the entry in pet_db.
After doing this, you now have added a Succubus into the database, with her own taming item and egg. Everything is now ready on the server side.

Egg Sprites and Item Descriptions
In order for your client to not crash, you must have information and a sprite for the pet egg. Go to your idnum2itemdesctable.txt, idnum2itemdisplaynametable.txt, num2itemdesctable.txt, and num2itemdisplaynametable.txt, and create a new entry for the egg. I will not go into detail on how to do this; there are other guides for this. You may also choose to edit the item description of the taming item, though this is not necessary.
Next, you have to give the egg a sprite, or else your client will crash. To do this, edit idnum2itemresnametable.txt and num2itemresnametable.txt and add in an entry for the egg. Refer to this topic for what to use for egg sprites. If you have no clue how to work with resnametables, then search the forums.
I will give examples of the values I put in my tables.
idnum2itemdesctable and num2itemdesctable:

    9031#
    An egg in which a Succubus Cute Pet rests. Can be hatched by using a ^33CC33Pet Incubator^000000.
    Class :^777777 Monster Egg^000000
    #

idnum2itemdisplaynametable and num2itemdisplaynametable:

    9031#Succubus_Egg#

idnum2itemresnametable and num2itemresnametable:

    9031#ÃÃ¶Â¼Ã“Â¼ÂºÂ¾Ã‹#

Pettalktable
By default, your pet will talk like a Poring. If you wish to change this, edit the talk_convert_class value in pet_db to the ID of one of the original pets. For example, to make our Succubus talk like a Zealotus, edit her talk_convert_class to 1200. Now she will talk like a Zealotus.
If you want to edit what she says, then you may. However, note that if you edit this, both the Zealotus and Succubus will say the same things. It is not currently possibly to add in talk for Succubus and not replace anything. I recommend choosing a pet that you or your clients may never use, and replace that pet's dialogue.

Q&A
Q. What will the pet portrait be?
A. The pet portrait will be a Poring by default. Customised images should be placed in:


data\\texture\\Ã€Â¯Ã€ÃºÃ€ÃŽÃ…ÃÃ†Ã¤Ã€ÃŒÂ½Âº\\illust

Q. What will the new pet's performance be?
A. Nothing. The sprite will disappear and reappear quickly. Your game won't crash.
Q. How many pets can I add?
A. Up to 300. I believe that if you change the MAX_PET_DB value in pet.h in the src/map folder, you can add more. Note that you will have to recompile.
Q. Why does the egg name become red when I try to hatch it and the pet not show up?
A. This is caused by the egg being spawned via an @item command (or equivalent). To create the egg you need to use the @makeegg command.
[Category:Customization](/Category:Customization "wikilink") [Category:Data](/Category:Data "wikilink") [Category:Database](/Category:Database "wikilink")

============================================================

## Custom_weapons

The ID
Why the ID first? The ID controls what type of weapon sprite is displayed. Going outside the ID range will cause you to "punch" when attacking.

Open your and find the section with the weapon type you need. The allowable range is usually obvious.

| Item ID     | Item Type                |
|-------------|--------------------------|
| 1100-1149   | One-Handed Sword         |
| 1150-1199   | Two-Handed Sword         |
| 1200-1249   | Knife                    |
| 1250-1299   | Katar                    |
| 1300-1349   | One-Handed Axe           |
| 1350-1399   | Two-Handed Axe           |
| 1400-1449   | One-Handed Spear         |
| 1450-1499   | Two-Handed Spear         |
| 1500-1549   | Mace                     |
| 1550-1599   | Book                     |
| 1600-1649   | Rod                      |
| 1700-1749   | Bow                      |
| 1750-1799   | Arrow                    |
| 1800-1849   | Knuckle                  |
| 1900-1949   | Instrument               |
| 1950-1999   | Whip                     |
| 13000-13099 | Knife                    |
| 13100-13149 | Handgun                  |
| 13150-13199 | Other Gunslinger Weapons |
| 13300-13399 | Shuriken                 |
| 13400-13499 | One-Handed Sword         |

### Example

To make a custom bow, searching for "Bows" in item_db shows that bow IDs start at 1701 and end at 1749. Since there are no remaining IDs, commenting out an unused bow would work.

Otherwise, skip to the next set of bows, which start at 18101. Select an open ID in that range.

The Sprite
The client requires a sprite for every job the weapon can be used by. Some programs can automatically organize the files:


Don't forget to give the weapon an icon in **/sprite/Â¾Ã†Ã€ÃŒÃ…Ã›/**, as well as an inventory icon and collection image in **/texture/Ã€Â¯Ã€ÃºÃ€ÃŽÃ…ÃÃ†Ã¤Ã€ÃŒÂ½Âº/item/** and **/texture/Ã€Â¯Ã€ÃºÃ€ÃŽÃ…ÃÃ†Ã¤Ã€ÃŒÂ½Âº/collection/**.

Other Client Data
Lastly, the client data tables need to be filled out:


*And... you are done!*

Additionally for the sprite to display you can place the custom weapon sprites in the following folder "data/sprite/Ã€ÃŽÂ°Â£ÃÂ·"

|                  |                                                |
|------------------|------------------------------------------------|
| Â´Ã‘Ã€Ãš             | Ninja weapon sprites                           |
| Â¸Â¶Â¹Ã½Â»Ã§           | Mage weapon sprites                            |
| Â¸Ã¹Ã…Â©             | Monk weapon sprites                            |
| Â¿Â¬Â±ÃÂ¼ÃºÂ»Ã§         | Alchemist weapon sprites                       |
| Â¿Ã®Â¿ÂµÃ€Ãš           | GM Weapon sprites                              |
| Â±Ã¢Â»Ã§             | Knight weapon sprites                          |
| Â±ÃƒÂ¼Ã¶             | Archer weapon sprites                          |
| Â»Ã³Ã€ÃŽ             | Merchant weapon sprites                        |
| Â°Ã‡Â³ÃŠ             | Gunslinger weapon sprites                      |
| Â°Ã‹Â»Ã§             | Swordsman weapon sprites                       |
| ÂµÂµÂµÃ             | Thief weapon sprites                           |
| Â·ÃŽÂ±Ã—             | Rogue weapon sprites                           |
| Â¼Â¼Ã€ÃŒÃÃ¶           | Sage weapon sprites                            |
| Â¼ÂºÃÃ·Ã€Ãš           | Acolyte weapon sprites                         |
| Â½Â´Ã†Ã›Â³Ã«ÂºÃ±Â½Âº       | Super novice weapon sprites                    |
| Â½Ã…Ã†Ã¤Ã„ÃšÃ…Â©Â·Ã§Â¼Â¼Ã€ÃŒÂ´Ãµ | Crusader weapon sprites (when mounted on peco) |
| Â¾Ã®Â¼Â¼Â½Ã…           | Assassin weapon sprites                        |
| Â¹Â«ÃˆÃ±             | Dancer weapon sprites                          |
| Â¹Ã™ÂµÃ¥             | Bard weapon sprites                            |
| ÃÂ¦ÃƒÂ¶Â°Ã¸           | Blacksmith weapon sprites                      |
| Ã€Â§Ã€ÃºÂµÃ¥           | Wizard weapon sprites                          |
| Ã…Â©Â·Ã§Â¼Â¼Ã€ÃŒÂ´Ãµ       | Crusader weapon sprites                        |
| Ã†Ã¤Ã„ÃšÃ†Ã¤Ã„Ãš_Â±Ã¢Â»Ã§   | Knight weapon sprites (when mounted on peco)   |
| ÃƒÃŠÂºÂ¸Ã€Ãš           | Novice weapon sprites                          |
| Ã‡ÃÂ¸Â®Â½ÂºÃ†Â®         | Priest weapon sprites                          |
| Ã‡Ã¥Ã…Ã             | Hunter weapon sprites                          |

Troubleshooting
**Q: Weapon is an Unknown Item.**

A: An error in resnametable. The client is not reading any value, so it becomes unknown.

**Q: The weapon sprite shows fine when standing, turns to punches when attacking.**

A: The ID for the weapon isn't in the allowed range. Make sure the value is correct.

**Q: The weapon sprite doesn't show at all.**

A: Re-check file/folder names and placement.

[Category:Customization](/Category:Customization "wikilink")

============================================================

## Cutin

Syntax

Description
This command will display a picture, usually an [NPC](/NPC "wikilink") illustration, also called cutin, for the [currently attached](/RID#Usage "wikilink") client. The *position* parameter determines the placement of the illustration and takes following values:

| Value | Description                                                    |
|-------|----------------------------------------------------------------|
| 0     | Bottom-Left Corner                                             |
| 1     | Bottom-Middle                                                  |
| 2     | Bottom-Right Corner                                            |
| 3     | Middle of screen in a movable window with an empty title bar.  |
| 4     | Middle of screen without the window header, but still movable. |

The picture is read from **data\\texture\\ìœ ì €ì¸í„°íŽ˜ì´ìŠ¤\\illust**, from both the [GRF](/GRF "wikilink") archive and data folder, and is required to be a bitmap. The file extension **.bmp** can be omitted. Magenta color () is considered transparent. There is no limit placed on the size of the illustrations by the client, although loading of large pictures (about 700x700 and larger) causes the client to freeze shortly (lag). Typically the size is about 320x480. New illustrations can be added by just putting the new file into the location above.

The client is able to display only one **cutin** at the same time and each new one will cause the old one to disappear. To delete the currently displayed illustration without displaying a new one, an empty file name and position 255 must be used.

Examples
`cutinÂ "kafra_7",2;`

Displays the Comodo Kafra illustration in lower right corner.

[`mes`](/mes "wikilink")`Â "SeeÂ you.";`
[`close2`](/close2 "wikilink")`;`
`cutinÂ "",255;`
[`end`](/end "wikilink")`;`

Typical way to end a script, which displayed an illustration during a dialog with a player.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Cutincard

Syntax

Description
This command displays the card illustration, also known as card cutin, for given card item. Specifying an item, which does not have an illustration associated might cause the client to crash or display errors.

The card pictures are loaded by the client from **data\\texture\\ìœ ì €ì¸í„°íŽ˜ì´ìŠ¤\\cardbmp** and **data\\texture\\ìœ ì €ì¸í„°íŽ˜ì´ìŠ¤\\illust** from both the GRF archive and data folder. The item-illustration associations are read by the server from **data\\num2cardillustnametable.txt** inside the server's GRF. If the file is missing, cutincard will not work.

Since card cutins are cutins as well, they are removed by using the [cutin](/cutin "wikilink") command.

Examples
`cutincardÂ 4001;`

Displays card illustration for a Poring Card.

[Category:Script Command](/Category:Script_Command "wikilink") [Category:Obsolete Script Command](/Category:Obsolete_Script_Command "wikilink")

============================================================

## Data-Folder

C
Custom Books
Custom Items
Custom Mobs
C cont.
Custom Pets
D
[Data Folder Structure](Data-Folder-Structure)
Data/Sound Files
W
Weather without using mapflag

============================================================

## DATA.INI

**DATA.INI** is a client-side file, which is used to specify multiple [GRF](/GRF "wikilink") archives to be loaded by the client. It is only supported by [hexed](/Hexing "wikilink") clients, which have been diffed with the option *\[Data\] Enable Multiple GRFs*. Official clients for main servers and [Sakray](/Sakray "wikilink") read data.grf, and rdata.grf or sdata.grf respectively.

File Format
The file follows default [INI file](/wikipedia:INI_file "wikilink") conventions. All entries are part of the section *data*. Each entry consists of a zero-based priority index as key name (0 = highest priority, 9 = lowest priority) and the GRF archive name as value. The file is stored in the same folder as the client it is supposed to be used by. Typical DATA.INI:

`[data]`
`0=yourserver.grf`
`1=rdata.grf`
`2=data.grf`

yourserver.grf
Normally the archive of your server is on the position 0 to override all other archives.

rdata.grf
Contains data from the test server, before it gets into data.grf, allowing to use pre-release content. For old Sakray clients this archive was called **sdata.grf**.

data.grf
The official main archive, which hosts the most vital data for the client. If it is missing, the client is most likely to crash during start-up.

Maximum amount of archives, that can be specified, is 10.

Other Names
You can also rename the **DATA.INI** file to any name that is 8 characters long (including the extension). Then, just edit your client with a [Hex Editor](/Hex_Editor "wikilink"). Find DATA.INI and replace with your new filename.

### Advanced name modification

This preferably requires an disassembler, I will use [OllyDbg](http://www.ollydbg.de/) 1.10 (I have not tested 2.0, yet) for this quick guide (I'll move it to wiki later, currently I have other stuff to do inside the wiki).

Start up OllyDbg, go to menu File -&gt; Open and find the client executable to patch. The loading and analysis process may take a while, but once the progress bar on the button is gone, right click into the code window, choose "Search for" and "All referenced text strings".

[<File:Datainiedit1.png>](/File:Datainiedit1.png "wikilink")

After another short while, all found and referenced strings are shown, you are interested in "DATA.INI" of course. Press "Home" key on your keyboard to get to the top of the list, then right click the list, and choose "Search for text". In the popup window, enter "data.ini" (without quotes), uncheck case-sensitive, check entire scope and click OK.

The selection inside the list should jump to a line with ".\\data.ini" inside it (unless the diff has changed since I last used diffs, a few years ago).

[<File:Datainiedit3.png>](/File:Datainiedit3.png "wikilink")

Press "Enter" key on your keyboard while the entry is highlighted, which should move you to the code position, where the string is used. Also as you could see in the list, the code shows, that there are two occurrences in the code, where ".\\data.ini" is used.

[<File:Datainiedit4.png>](/File:Datainiedit4.png "wikilink")

In my case, there is a lot of space after the text strings at offset 0x68dd38, so you just need to change the two occurrences to point there. To do that, mark one of the lines, that refer to ".\\data.ini" (PUSH 68DCF9 in this case) and hit "Space" key on your keyboard, which opens a assembling line. All you have to do is to update the value (68DCF9), to the offset, where you intend to place your new name (68DD38), after editing click "Assemble", then "Cancel". Repeat the same for the other line as well. The edited lines should turn red.

[<File:Datainiedit5.png>](/File:Datainiedit5.png "wikilink")

Now you could also add the string in there, but that can be done more easily inside the hex editor later. Note, that the offset inside OllyDbg (and most of the assemblers) is actual offset +0x400000, so you need to subtract the value, to get the correct offset in hex editor (in this case 0x68DD38 - 0x400000 = 0x28DD38). Remains to apply the changes, which is done by right clicking the code, choosing "Copy to executable" and "All modifications". You are asked, what you want to copy; unless you modified something else as well, clicking "Copy All" will do. Another window will popup, which is the modified file (title bar icon "D"). Right click it's contents and choose "Save file" and save the file under a name of your choice.

[<File:Datainiedit6.png>](/File:Datainiedit6.png "wikilink")

You can close OllyDbg now, remains setting the new name. As said before, you need to convert the disassembler offset, to an absolute one and go to that offset on a hex editor of your choice.

[<File:Datainiedit7.png>](/File:Datainiedit7.png "wikilink")

The first mark shows the old position of the name, which is no longer used, the second mark, is on the offset, where the new name is read. As you seen in this case, you have plenty of space. Make sure, that the name ends with a zero byte (00).

[Category:Client Configuration](/Category:Client_Configuration "wikilink") [Category:File Formats](/Category:File_Formats "wikilink")

============================================================

## Database-Configuration

Database are files that being used by [[Map Server]].
 /db/
Database files are separated by [[Renewal]] and [[Pre-Renewal]] type server.
 /db/pre-re/
 /db/re/
For customzation purpose, [[rAthena]] is supporting to import database file which since the implementation moved the item_db2.txt, pet_db2.txt, and mob_db2.txt to the import folder.
 /db/import/
Database files are used for:
* Player database
* Item database
* Monster database
* Skill database
* Homunculus
* Mercenary
* Castle
* Map
* Quest
* Packet Data

============================================================

## Data_Folder_Structure

[Category:Client Configuration](/Category:Client_Configuration "wikilink") [Category:Data](/Category:Data "wikilink")

Description
This page currently explains the data folder structure as recognized by the client.
**Take note of this**: Â¿Â© (ì—¬) is female, Â³Â² (ë‚¨) is male.

Data Structure
**data**
Holds various text files, for items, the bard and dancer scream and frost joker skill messages, error messages, map files (.rsw,.gnd,.gat), etc.

:\* **ai**
The **ai** in here means "Artificial Intelligence". As the name implies, this contains all the functions for the AIs (Mercenaries and Homunculus).

:\* **book**
Where the contents of books are.

:\* **imf**
Contains files that control the thumbnail views of characters in the Character Selection Screen.

:\* **lua files**
Interface coding.

:\* **lua514**
Just another set of LUA files which are much more updated.

:\* **model**
Various map model's. Examples of model's are statues, foliage, street lights, ect. Folder also contains various sub folders which are too many to list.

:\* **palette**
Folder body and hair for palettes.

:\*\* **Â¸Ã¶ (ëª¸)**
Folder for cloth palettes.

:\*\* **Â¸Ã“Â¸Â® (ë¨¸ë¦¬)**
Folder for hair palettes.

:\* **sprite**
Base folder for sprites. Has a sprite for a shadow (goes underneath the character?), a numbers sprite for countdowns (or counting for something).

:\*\* **Â¸Ã³Â½ÂºÃ…Ã (ëª¬ìŠ¤í„°)**
Folder for monster sprites.

:\*\* **Â¾Ã†Ã€ÃŒÃ…Ã› (ì•„ì´í…œ)**
Folder for drop sprites, for items and skills.

:\*\* **Â¾Ã‡Â¼Â¼Â»Ã§Â¸Â® (ì•…ì„¸ì‚¬ë¦¬)**
Item sprites.

:\*\* **Â¹Ã¦Ã†Ã (ë°©íŒ¨)**
Folder for shield sprites.

:\*\* **Ã€ÃŽÂ°Â£ÃÂ· (ì¸ê°„ì¡±)**
Hair and job sprites base folder.

:\*\*\* **Â¸Ã¶Ã…Ã« (ëª¸í†µ)**
Job sprites folder.

:\*\*\* **Â¸Ã“Â¸Â®Ã…Ã« (ë¨¸ë¦¬í†µ)**
Hair folder.

:\*\* **Ã€ÃŒÃ†Ã‘Ã†Â® (ì´íŒ©íŠ¸)**
Status effects and other effects. Examples are curse, sleep, the time o attack that pops up in PVP.

:\*\* **book**
Book sprites. Examples are the open book with pages turning, shown when a book can be read.

:\*\* **homun**
Homunculus sprites.

:\*\* **npc**
NPC sprites.

:\* **texture**
Folder for various .bmp images, from items to interface and other things like that. The logo is also stored here, the logo is shown in screenshots, on the lower right hand side. Various map textures in main and sub folders, too many to list.

:\*\* **effect**
Folder for skill effects. Effects have to be .tga format.

:\*\* **Ã€Â¯Ã€ÃºÃ€ÃŽÃ…ÃÃ†Ã¤Ã€ÃŒÂ½Âº (ìœ ì €ì¸í„°íŽ˜ì´ìŠ¤)**
Similar to its main folder, texture. Has the world map, login background, and loading screens as well.

:\*\*\* **basic_interface**
Interface images, buttons and other graphics having to do with menus.

:\*\*\* **battle_field**
Help buttons.

:\*\*\* **cardbmp**
Card images for when you click view in-game or right click the card. Image has to be .bmp format.

:\*\*\* **collection**
Images for items, the image will show up to the left of the description for the item. Has to be .bmp format.

:\*\*\* **illust**
Images for NPCs, pets, and quest images. Examples are kafra, or the flag in the novice grounds. They have to have the transparent pink background, and be .bmp.

:\*\*\* **item**
Images for the items when seen in the inventory. Images have to have the transparent pink background and be .bmp.

:\*\*\* **login_interface**
As the name suggests, the login interface. Images for character selection, and the login screen. Also has some warning images. .bmp format and needs transparency.

:\*\*\* **map**
Map images, the map is displayed in the upper right hand corner.

:\* **wav**
All the game sounds for monsters, and attacks.

:\*\* **effect**
All the game sounds for skills.

============================================================

## Day

Syntax

Description
These two commands will switch the entire server between day and night mode respectively. If your server is set to cycle between day and night by [configuration](/:Category:Configuration "wikilink"), it will eventually return to that cycle.

Examples
`-Â Â scriptÂ Â DayNightÂ Â Â Â -1,{`
`Â Â Â `[`end`](/end "wikilink")`;`
[`OnClock`](/OnClock "wikilink")`0600:`
`Â Â Â day;`
`Â Â Â end;`
[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â //Â settingÂ correctÂ modeÂ uponÂ serverÂ start-up`
`Â Â Â `[`if`](/if "wikilink")`(`[`gettime`](/gettime "wikilink")`(3)>=6Â &&Â gettime(3)<18)`
`Â Â Â {`
`Â Â Â Â Â Â Â end;`
`Â Â Â }`
`OnClock1800:`
`Â Â Â night;`
`Â Â Â end;`
`}`

This script allows to emulate the day/night cycle as the server does, but also allows triggering additional effects upon change, like announces, gifts, etc. The day/night cycle set by configuration should be disabled, when this script is used.

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Deactivatepset

Syntax

Description
This command disables previously enabled set of [PCRE](/PCRE "wikilink") patterns from firing. The expressions themselves remain defined, and can be re-enabled with [activatepset](/activatepset "wikilink"). To remove a pattern set completely, [deletepset](/deletepset "wikilink") must be used.

If -1 is passed as set number, all currently defined sets are disabled.

Examples
`deactivatepsetÂ -1;`
[`activatepset`](/activatepset "wikilink")`Â 2;`

Disables all currently enabled pattern sets and enables only pattern set 2 (assumed to be previously defined).

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Death_penalty_type

Death penalty refers to a penalty that should be applied to a player who has died. This death penalty can be applied to players who die in a specific map or if they die anywhere (this applies for the EXP loss). Some of these penalties can be **EXP**, **Zeny**, and even **Item** loss. You can find configuration for **EXP** and **Zeny** loss through .../conf/battles/[exp.conf](https://raw.githubusercontent.com/rathena/rathena/master/conf/battle/exp.conf) while **Items** can be configured through .../npc/mapflag/[nightmare.txt](https://raw.githubusercontent.com/rathena/rathena/master/npc/mapflag/nightmare.txt)

Losses
Some losses stated in the .../conf/battles/[exp.conf](https://raw.githubusercontent.com/rathena/rathena/master/conf/battle/exp.conf) are:

`//Â WhenÂ aÂ playerÂ dies,Â howÂ shouldÂ weÂ penalizeÂ them?`
`//Â 0Â =Â NoÂ penalty.`
`//Â 1Â =Â LoseÂ %Â ofÂ currentÂ levelÂ whenÂ killed.`
`//Â 2Â =Â LoseÂ %Â ofÂ totalÂ experienceÂ whenÂ killed.`
`death_penalty_type:Â 1`
`//Â BaseÂ exp.Â penaltyÂ rateÂ (EachÂ 100Â isÂ 1%Â ofÂ theirÂ exp)`
`death_penalty_base:Â 100`
`//Â JobÂ exp.Â penaltyÂ rateÂ (EachÂ 100Â isÂ 1%Â ofÂ theirÂ exp)`
`death_penalty_job:Â 100`
`//Â WhenÂ aÂ playerÂ diesÂ (toÂ anotherÂ player),Â howÂ muchÂ zenyÂ shouldÂ weÂ penalizeÂ themÂ with?`
`//Â NOTE:Â ItÂ isÂ aÂ percentageÂ ofÂ theirÂ zeny,Â soÂ 100Â =Â 1%`
`zeny_penalty:Â 0`

**Note:** *Zeny loss is based within maps with the [PvP Mapflag](/Mapflag#pvp "wikilink").*

Nightmare Mode
Moving out from .../conf/battles/[exp.conf](https://raw.githubusercontent.com/rathena/rathena/master/conf/battle/exp.conf), head into .../conf/mapflag/[nightmare.txt](https://raw.githubusercontent.com/rathena/rathena/master/npc/mapflag/nightmare.txt). In this mapflag, you get to specify what items players can drop on their death within whatever map you wish (It's not just for PvP Maps since you can also die by monsters.. not just players).

The structure for this is as followed:

<map><tab>`mapflag`<tab>`pvp_nightmaredrop`<tab><ID>`,`<type>`,`<percent>




30 = .3%

300 = 3%

3000 = 30%

10000 = 100%

See Also..

============================================================

## Debugmes

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will send the message to the server console (map-server window). It will not be displayed anywhere else.

Examples
        debugmes strcharinfo(0)+" has just done this that and the other";
        // You would see in the map-server window "NAME has just done this that and
        // the other"

[Script Example](http://rathena.org/board/topic/74852-make-npc-hide/#entry159739)

============================================================

## Defining_Warp_Points

These kind of [scripts](/Scripting "wikilink") are used to show a warp in-game and define where to warp a player.

Basic syntax
<from map name>`,`<fromX>`,`<fromY>`,`<facing>`(tab)warp(tab)`<warp name>`(tab)`<spanx>`,`<spany>`,`<to map name>`,`<toX>`,`<toY>

**From map name**, **fromX** and **fromY** defines where the warp will be placed. **facing** is not irrelevant so you can set it to zero.

**warp name** declares the warp's name so you can enable or disable it using @enablenpc or @disablenpc atcommands.

SpanX and SpanY will make the warp sensitive to a character who didn't step directly on it, but walked into a zone which is centered on the warp from coordinates and is SpanX in each direction across the X axis and SpanY in each direction across the Y axis.

So here is an example how our warp must look:

`prontera,107,215,0Â warpÂ Â Â Â prt01Â Â Â 2,2,prt_in,240,139`

When we have completed defining our warp, we can add it to a existing warp file (placed in folder) or create a new file. If you choose the last don't forget to [add the new file to script list](/Adding_Script "wikilink")!

[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Defpattern

Syntax

Description
This command defines a [PCRE](/PCRE "wikilink") pattern in given pattern set, which triggers an event, when a player chat line matches the [regular expression](/wikipedia:Regular_expression "wikilink"). Parameter *set number* can be any number to identify the set, to add the pattern to. The *event label* must be inside the same NPC, as the defpattern command. Typically this command is called in the [OnInit](/OnInit "wikilink") label.

Initially a newly created pattern set is disabled and must be enabled with [activatepset](/activatepset "wikilink"), before it starts to match chat against the patterns. Once a pattern set is enabled, all public chat in the vicinity of the NPC is matched against all patterns inside the set, and if one of them matches, *event label* is called. Each match inside the PCRE pattern will result in a variable being set, but at most 10 ($@p1$ through $@p9$, and $@p0$ for the entire matched string), before the event label script is run.

To reset a pattern set, [deletepset](/deletepset "wikilink") must be used to delete the old set, and defpattern to populate the set with new patterns.

Examples
`prontera,150,150,0Â scriptÂ Â StrangeÂ SpotÂ Â Â Â -1,{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "^808080YouÂ wonder,Â whatÂ thisÂ couldÂ beÂ for...^00000";`
`Â Â Â Â `[`close`](/close "wikilink")`;`
`OnHealPlayer:`
`Â Â Â Â `[`percentheal`](/percentheal "wikilink")`Â 100,Â 100;`
`Â Â Â Â `[`specialeffect2`](/specialeffect2 "wikilink")`Â EF_HEAL;`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`OnInit:`
`Â Â Â Â defpatternÂ 1,Â "([^:]+):.*\\shealÂ plz(\\s.*)?",Â "OnHealPlayer";`
`Â Â Â Â `[`activatepset`](/activatepset "wikilink")`Â 1;`
`}`

This makes the NPC heal everyone in it's vicinity, who says "heal plz".

See also , which extensively demonstrates the usage of PCRE commands.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Deletearray

Syntax

Description
This command deletes a range of values within given array and shifts remaining values to fill the deletion gap.

**Important:** Currently (r14395) the command uses [getarraysize](/getarraysize "wikilink") internally, which leads to unpredictable results with arrays, that contain empty elements. It is recommended to use a combination of [copyarray](/copyarray "wikilink") and [cleararray](/cleararray "wikilink") instead.

Examples
**`deletearray`**`Â @array,Â 10;`

Deletes the first 10 elements of the array and shifts all other values by one to the left.

[`copyarray`](/copyarray "wikilink")`Â @array[0],Â @array[10],Â 90;`
[`cleararray`](/cleararray "wikilink")`Â @array[90],Â 0,Â 10;`

Assuming *@array* has 100 elements, this achieves the same effect as the example above, but works properly even if *@array* has empty element(s).

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Deletepset

Syntax

Description
This command deletes previously defined [PCRE](/PCRE "wikilink") pattern set, so a new one can be [defpattern](/defpattern "wikilink")'ed. To only disable one or all pattern sets, [deactivatepset](/deactivatepset "wikilink") must be used. Unlike deactivatepset, this command does not support -1 as *set number*, to delete all pattern sets.

Examples
`deletepsetÂ 1;`
[`defpattern`](/defpattern "wikilink")`Â 1,Â "([^:]+):.*\\ssorry.*",Â "Lquote3";`

Deletes previously defined pattern set 1, to set up a new one.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Delitem

Syntax

Description
This command will take a specified amount of given item from the [invoking](/RID#Usage "wikilink") character. The items are destroyed - there is no way an [NPC](/NPC "wikilink") can simply own and have an inventory of items, other than by destroying and recreating them when needed.

Before items are deleted, the script should check, if the player has given amount of items. If there are not enough items, they are deleted anyway, but the script is terminated with an error then, to prevent exploits. If the specified item does not exist, nothing will be deleted, but the script is terminated with an error as well.

If *account id* is given, the items are deleted from the character, which is currently online on that account instead. If the player is not online, the script terminates.

Examples
`delitemÂ 502,Â 10;Â Â //Â Orange_Potion`

Removes 10 Orange Poitions from currently attached character.

`delitemÂ 617,Â 0,Â 2000110;Â Â //Â Old_Violet_Box`

Removes 1 Old Violet Box from an online player on account 2000110.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Detachnpctimer

Syntax

Description
Use to remove the RID attached to an NPC used by "[attachnpctimer](/attachnpctimer "wikilink") {"<character name>"};" You can only use this when the NPC Timer is not running, use "stopnpctimer" to stop the NPC Timer.

Examples
<NPC Header>`Â {`
`Â Â Â //Â WeÂ needÂ toÂ useÂ attachnpctimerÂ becauseÂ theÂ mesÂ commandÂ belowÂ needsÂ RIDÂ attach`
`Â Â Â `[`attachnpctimer`](/attachnpctimer "wikilink")`;`
`Â Â Â `[`initnpctimer`](/initnpctimer "wikilink")`;`
`Â Â Â `[`npctalk`](/npctalk "wikilink")`Â "IÂ cantÂ talkÂ rightÂ now,Â giveÂ meÂ 10Â seconds";`
`Â Â Â `[`end`](/end "wikilink")`;`
[`OnTimer`](/OnTimer "wikilink")`5000:`
`Â Â Â npctalkÂ "OkÂ 5Â secondsÂ more";`
`Â Â Â end;`
`OnTimer6000:`
`Â Â Â npctalkÂ "4";`
`Â Â Â end;`
`OnTimer7000:`
`Â Â Â npctalkÂ "3";`
`Â Â Â end;`
`OnTimer8000:`
`Â Â Â npctalkÂ "2";`
`Â Â Â end;`
`OnTimer9000:`
`Â Â Â npctalkÂ "1";`
`Â Â Â end;`
`OnTimer10000:`
`Â Â Â `[`stopnpctimer`](/stopnpctimer "wikilink")`;`
`Â Â Â mesÂ "[Man]";`
`Â Â Â mesÂ "OkÂ weÂ canÂ talkÂ now";`
`Â Â Â `[`detachnpctimer`](/detachnpctimer "wikilink")`;`
`Â Â Â //Â andÂ rememberÂ attachnpctimerÂ andÂ detachnpctimerÂ canÂ onlyÂ useÂ whileÂ theÂ NPCÂ timerÂ isÂ notÂ runningÂ !`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Diff

Diff files
A diff file is a file to make:


Creating .diff files using the tortoise menu
1.  right click on the folder
2.  goto TortoiseSVN menu
3.  click create patch
4.  save as .diff file

Manually Creating .diff files (knowing the mechanics and repairing .diffs if needed)
1.  create a new txt file
2.  rename the .txt extention to .diff
3.  start with pointing out the index (path where the diff files will patch)

4.  add a ========================================= line to indicate the next file

5.  add the patch of the file where content will be removed (---) and add the revision

6.  add the path of the file where content will be added (+++) and add (working copy)

7.  add the location of the lines that need to be modified in this way:
    1.  @@
    2.  -100: start reading original lines at line 100
    3.  ,5: read 5 original lines
    4.  +100: start reading new lines at line 100
    5.  ,7: read 7 new lines
    6.  @@


8.  add a <space> and write a line that is from the original text (this line will be unmodified) and all others starting with a space

9.  add a "-" and write the line that must be modified

10. add a "+" and write the line that need to be placed to replace or added to the original code

line2: this line will be unmodified line3:-this line will be deleted line4:+this line will replace line 3 line5:+this line will add a line of code line6: this line will be unmodified, but will move down one line line7: line8: this line will be unmodified, move down one line (same as the line above since an <enter> counts as a line)\[/code\]

\#\*\*\[color=red\]NOTICE= THE <enter> ON LINE 7 MUST START WITH A <space> as well\[/color\]

Using .diff/.patch files to patch your server
**Windows**:

1.  go place the folder in the index folder
2.  richt click the \*.diff file and go to TortoiseSVN menu
3.  click patch

**Linux**:

`cdÂ /path/to/your/server/folder`
`patchÂ -p0Â <Â /path/to/patch/file/filename.extension`

Example of a .diff file
`Index:Â map/clif.c`
`===================================================================`
`---Â map/clif.cÂ Â (revisionÂ 13318)`
`+++Â map/clif.cÂ Â (workingÂ copy)`
`@@Â -6745,7Â +6745,7Â @@`
`Â Â Â Â /*==========================================`
`Â Â Â Â Â *Â MarryÂ [DracoRPG]`
`Â Â Â Â Â *------------------------------------------*/`
`-Â Â Â voidÂ clif_marriage_process(structÂ map_session_dataÂ *sd)`
`+Â Â Â /*voidÂ clif_marriage_process(structÂ map_session_dataÂ *sd)`
`Â Â Â Â {`
`Â Â Â Â Â Â Â Â intÂ fd;`
`Â Â Â Â Â Â Â Â nullpo_retv(sd);`
`@@Â -6755,8Â +6755,8Â @@`
`Â Â Â Â Â Â Â Â WFIFOW(fd,0)=0x1e4;`
`Â Â Â Â Â Â Â Â WFIFOSET(fd,packet_len(0x1e4));`
`Â Â Â Â }`
`+Â Â Â */`
`-Â Â Â `
`Â Â Â Â Â /*==========================================`
`Â Â Â Â Â Â *Â NoticeÂ ofÂ divorce`
`Â Â Â Â Â Â *------------------------------------------*/`
`Index:Â map/clif.h`
`===================================================================`
`---Â map/clif.hÂ Â (revisionÂ 13318)`
`+++Â map/clif.hÂ Â (workingÂ copy)`
`@@Â -53,8Â +53,8Â @@`
`Â Â Â Â Â #endif`
`Â Â Â Â Â `
`Â Â Â Â Â //Â packetÂ DB`
`-#defineÂ MAX_PACKET_DBÂ Â Â Â Â Â 0x400`
`-#defineÂ MAX_PACKET_VERÂ Â Â Â Â 22`
`+#defineÂ MAX_PACKET_DBÂ Â Â Â Â Â 0x500`
`+#defineÂ MAX_PACKET_VERÂ Â Â Â Â 23`
`Â Â Â Â Â `
`Â Â Â Â Â structÂ s_packet_dbÂ {`
`Â Â Â Â Â Â Â Â shortÂ len;`

See Also

[Category:File Formats](/Category:File_Formats "wikilink")

============================================================

## Disablenpc

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
These two commands will disable and enable, respectively, an NPC object specified by name. The disabled NPC will disappear from sight and will no longer be triggerable in the normal way. It is not clear whether it will still be accessible through '[donpcevent](/donpcevent "wikilink")' and other triggering commands, but it probably will be. You can disable even warp NPCs if you know their object names, which is an easy way to make a map only accessible through walking half the time. Then you '[enablenpc](/enablenpc "wikilink")' them back.

You can also use these commands to create the illusion of an NPC switching between several locations, which is often better than actually moving the NPC - create one NPC object with a visible and a hidden part to their name, make a few copies, and then disable all except one.

Examples
    prontera,100,100,4  script  Tim 81,{
        disablenpc "timsbrothertom";
        mes "Hey you, I disabled my brother Tom by accident :S";
        mes "Can you help me to enable him back?";
        next;
        if(select("Yes, sure!:No!") == 2) close;
        enablenpc "timsbrothertom";
        mes "Thank you very much! He is back now :)";
        close;
    }
    prontera,102,100,4  script  Tom#1::timsbrothertom   81,{
        mes "Hi, I'm Tims brother!";
        close;
    }

============================================================

## Disable_GM_monster_drops

Introduction
If your server has several GMs, it may be wise to disable monsters dropping items should they attack them. If you feel insecure about your GMs, it might be wise to implement this modification in order to limit how far they can use their GM abilities.

GMs may be able to warp to dungeons and warp around to actively seek MvPs, or may be able to cast many skills with few limitations. The optimum idea would be to disable them from doing this completely, however it restricts the commands the GMs can use. Instead, we can set a limit on what level GMs must be in order to receive drops.

Open /src/map/battle.h
**Find:**

`Â Â Â intÂ bg_flee_penalty;`

*'Below add:*

`Â Â Â intÂ gm_monsterdrop_lv;`

Open /src/map/battle.c
**Find:**

`Â Â Â {Â "bg_flee_penalty",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &battle_config.bg_flee_penalty,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 20,Â Â Â Â Â 0,Â Â Â Â Â Â INT_MAX,Â Â Â Â Â Â Â Â },`

**Below add:**

`Â Â Â {Â "gm_monsterdrop_lv",Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &battle_config.gm_monsterdrop_lv,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0,Â Â Â Â Â 0,Â Â Â Â Â Â 99,Â Â Â Â Â Â Â Â },`

Open /src/map/mob.c
*Scroll to or find the function mob_db*

**Find:**

`Â Â Â if(srcÂ &&Â src->typeÂ ==Â BL_MOB)`
`Â Â Â Â Â Â Â mob_unlocktarget((structÂ mob_dataÂ *)src,tick);`

**Below add:**

`Â Â Â if(Â (mvp_sdÂ &&Â pc_isGM(mvp_sd))Â ||Â (sdÂ &&Â pc_isGM(sd))Â )`
`Â Â Â {`
`Â Â Â Â Â Â Â if(Â mvp_sdÂ &&Â pc_isGM(mvp_sd)Â <Â battle_config.gm_monsterdrop_lvÂ )`
`Â Â Â Â Â Â Â Â Â Â Â typeÂ |=Â 1;`
`Â Â Â Â Â Â Â elseÂ if(Â sdÂ &&Â pc_isGM(sd)Â <Â battle_config.gm_monsterdrop_lvÂ )`
`Â Â Â Â Â Â Â Â Â Â Â typeÂ |=Â 1;`
`Â Â Â }`

Open /conf/battle/gm.conf
**Find:**

`//Â [GM]Â Can'tÂ beÂ kickedÂ fromÂ aÂ chat?Â (NoÂ orÂ mimimumÂ GMÂ level)`
`gm_kick_chat:Â no`

**Below add:**

`//Â [GM]Â MinimumÂ GMÂ levelÂ toÂ receiveÂ dropsÂ fromÂ monstersÂ (0Â =Â disabled.)`
`gm_monsterdrop_lv:Â 40`

*When set to 40, a GM must be **equal to or above** GM level 40 in order to receive drops.*

[Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Dispbottom

Syntax

Description
This command will send the given message with color into the invoking character's chat window.
The color format is in RGB (0xRRGGBB). The color is by default green.

Example
[`mes`](/mes "wikilink")`Â "[Woman]";`
`mesÂ "Hi,Â lookÂ atÂ yourÂ chatÂ window!";`
[`dispbottom`](/dispbottom "wikilink")`Â "YouÂ reallyÂ didÂ itÂ :D";`
[`close`](/close "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Divorce

Syntax

Description
This function will "un-marry" the invoking character from whoever they were married to. Both will no longer be each other's marriage partner, (at least in latest GIT, which prevents the cases of multi-spouse problems). It will return 1 upon success or 0 if the character was not married at all.

This function will also destroy both wedding rings and send a message to both players, telling them they are now divorced.

Examples
Here are two examples for divorce() usage:
This one is part of the custom rA marriage script:

`Â Â Â `[`if`](/if "wikilink")`Â (!(`**`divorce`**`()))Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "["+@name$+"]";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "WhereÂ hasÂ "+$@divorcer$+"Â goneÂ to?Â IÂ can'tÂ divorceÂ youÂ unlessÂ youÂ bothÂ areÂ here...";`
`Â Â Â Â Â Â Â `[`emotion`](/emotion "wikilink")`Â e_swt2;`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`

This next example is a less efficient way to check, perform menu command, then execute divorce

[`mes`](/mes "wikilink")`Â "SoÂ youÂ wantÂ toÂ getÂ aÂ divorce?";`
[`menu`](/menu "wikilink")`Â "Â -Â Yeah!",L_Divorce,"Â -Â Nah,Â iÂ wasÂ onlyÂ joking!",-;`
[`close`](/close "wikilink")`;`
`L_Divorce:`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Ok,Â let'sÂ getÂ youÂ un-married!";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â divorce();`
`Â Â Â `[`mes`](/mes "wikilink")`Â "I'veÂ alsoÂ destroyedÂ yourÂ rings,Â justÂ toÂ makeÂ thingsÂ official!";`
`Â Â Â `[`close`](/close "wikilink")`;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Doevent

Syntax

Description
This command invokes a script at given event label in an another [NPC](/NPC "wikilink"). The parameter *event label* has the form "NpcName::OnLabel" and unlike in [donpcevent](/donpcevent "wikilink"), it cannot target multiple NPCs by omitting the NPC name. It works much like a [goto](/goto "wikilink") command into an another NPC. If there was an [RID](/RID "wikilink") attached to the invoking script, it will be attached to the invoked script as well.

This command is not used very much, because it is more limited than donpcevent and passing RID to another script is usually not required.

Examples
`prontera,150,150,3Â scriptÂ Â NPC1Â Â Â Â 53,{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "Let'sÂ see,Â noÂ oneÂ look,Â soÂ letÂ asÂ deal.";`
`Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â doeventÂ "NPC2::OnTalk";`
`Â Â Â Â mesÂ "Damn,Â weÂ wereÂ spotted,Â soÂ noÂ tradeÂ forÂ you.";`
`Â Â Â Â `[`close`](/close "wikilink")`;`
`}`
`prontera,152,150,5Â scriptÂ Â NPC2Â Â Â Â 53,{`
`Â Â Â Â //Â ...`
`OnTalk:`
`Â Â Â Â `[`npctalk`](/npctalk "wikilink")`Â "EveryoneÂ look,Â "+`[`strcharinfo`](/strcharinfo "wikilink")`(0)+"Â triesÂ toÂ buyÂ forbiddenÂ goods!";`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`}`

Every time a player talks to NPC1, NPC2 will scream into it's area, what the player is about to do. Since doevent passes the RID to NPC2, it can use strcharinfo to retrieve the player's name.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Donpcevent

Syntax

Description
This command invokes the event label code within an another [NPC](/NPC "wikilink") or NPCs. If *event label* has the form "NpcName::OnLabel", then only given NPC's event label will be invoked (much like [goto](/goto "wikilink") into another NPC). If the form is "::OnLabel" (*NpcName* ommited), the event code of all NPCs with given label will be invoked, one after another. In both cases the invoked script will run without an attached [RID](/RID "wikilink"), whether or not the invoking script was attached to a player. The event label name is required to start with *On*.

This command can be used to make other NPCs act, as if they were responding to the invoking NPC's actions, such as using an [emotion](/emotion "wikilink") or [talking](/npctalk "wikilink").

The command **cmdothernpc** is equivalent to **donpcevent** "<npc name>::OnCommand<command>" and an approximation to the [AEGIS](/AEGIS "wikilink") script command with same name.

Examples
`prontera,150,150,3Â scriptÂ Â NPCÂ 53,{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "HeyÂ NPC2Â copiesÂ whatÂ IÂ do.";`
`Â Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â Â `[`set`](/set "wikilink")`Â .@emote,Â `[`rand`](/rand "wikilink")`(1,30);`
`Â Â Â Â donpceventÂ "NPC2::OnEmote";`
`OnEmote:`
`Â Â Â Â `[`emotion`](/emotion "wikilink")`Â .@emote;`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`}`
`prontera,152,150,5Â scriptÂ Â NPC2Â Â Â Â 53,{`
`Â Â Â Â mesÂ "HeyÂ NPCÂ copiesÂ whatÂ IÂ do.";`
`Â Â Â Â close2;`
`Â Â Â Â setÂ .@emote,Â rand(1,30);`
`Â Â Â Â donpceventÂ "NPC::OnEmote";`
`OnEmote:`
`Â Â Â Â emotionÂ .@emote;`
`Â Â Â Â end;`
`}`

Whichever of the both NPCs is talked to, both will show a random emotion at the same time.

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## DragonNPCHandle

Rune Knight Dragon : NPC Handle
This page is a short explanation of the available functions to handle **RK Dragons**

### checkdragon()

Allows you to check if the player is mounting a dragon. Example below

`if(Â checkdragon()Â )`
`Â Â Â dispbottomÂ "YouÂ areÂ mounting!";`
`else`
`Â Â Â dispbottomÂ "YouÂ areÂ notÂ mounting";`

### setdragon({optional Color})

Allows you to set a player to mount a dragon with a color of your choice.
It's only param **Color** allows you to set which of the color the dragon will be, there are 5 options


When color is *not provided* the green dragon will be used, below is an **Example** with conjunction of *checkdragon()*

`if(Â checkdragon()Â )Â {`
`Â Â Â mesÂ "YouÂ areÂ alreadyÂ mounting";`
`Â Â Â close;`
`}Â elseÂ {`
`Â Â Â mesÂ "SelectÂ theÂ colorÂ ofÂ yourÂ dragon";`
`Â Â Â setÂ .@choice,select("GreenÂ Dragon","BrownÂ Dragon","GrayÂ Dragon","BlueÂ Dragon","RedÂ Dragon");`
`Â Â Â //NoticeÂ weÂ passÂ theÂ numberÂ ofÂ theÂ chosenÂ menuÂ toÂ setdragonÂ soÂ itÂ picksÂ theÂ colorÂ theÂ userÂ wants`
`Â Â Â setdragon(.@choice);`
`}`

Changelog

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## DynDNS_Guide

Disclaimer
This guide isn't meant to be a complete rAthena configuration guide, and it assumes you completed already the main configuration steps. If your server isn't working, please refer to the [Installation](/Installation "wikilink") and [:Category:Configuration](/:Category:Configuration "wikilink") guides before following this one.

In this guide will be shown how to configure your server to run with the DynDNSÂ® service from [Dynamic Network Services, Inc.](http://dynamicnetworkservices.com/), but you can follow similar steps to setup it with any other Dynamic DNS service.
DynDNSÂ® is registered trademarks of Dynamic Network Services Inc.

Requirements
To follow this guide successfully, you will need:


Register an account
Before setting up your server to use DunDNS, you need to register an account on [<http://www.dyndns.org>](http://www.dyndns.org). You'll find a "Create account" link near the top-right of their home page.

Fill the registration form as described in the following image, then follow the instructions you will get by email on how to activate your account:
[DynDNS account registration form](/Image:dysdns1.jpg "wikilink")

Go back to the DynDNS website and login with the new account you created.
It will show a list of actions you can perform. Choose "My Hosts", then "Add New Hostname". Fill the page as follows.
[DynDNS host creation form](/Image:dysdns2.jpg "wikilink")

Updater client
You can find an updater client for your OS in the DynDNS website. After you login, choose "Support" from the top menu, then "Update Clients" from the left menu.
Download either [DynDNS Updater (Windows)](http://www.dyndns.com/support/clients/windows.html) or [ddclient (Linux)](http://www.dyndns.com/support/clients/unix.html)

### Windows

**DynDNS Updater** You can refer to the official [DynDNS Updater Guide](https://www.dyndns.com/support/clients/dyndns-updater-guide.html#setup-install) to get help on the setup and configure steps.
Make sure you choose the "Install as a Service", "Show a Tray Icon" and "Start with Windows" options during the setup process.

### Linux

**ddclient**

#### Installation

If your Linux distribution offers the ddclient package in its own packages repository, install it with your favorite package manager (package name should be `ddclient`). Jump to the configuration section below.
Else, if your distribution doesn't provide any ddclient package, or you want to install the one on the DynDNS client, these are the steps to follow:

1.  Move the downloaded file (ddclient.tar.gz) to your home directory if you saved it anywhere else.
2.  Open a Console/Terminal and move to your home directory
    `$` `cd`
3.  Extract the downloaded tarball
    `$` `tar` `xzvf` `ddclient.tar.gz`
4.  Move to the extracted folder
    `$` `cd` `ddclient-*`
5.  Get root privileges (one of the following commands, depending on your distribution)
    `$` `sudo` `su`
    `$` `su`
6.  Copy the ddclient executable to the proper directory
    `#` `cp` `ddclient` `/usr/sbin/`
7.  Setup ddclient's startup script
        `#` `cp` `sample-etc_rc.d_init.d_ddclient` `/etc/init.d/ddclient`
        `#` `rc-config` `add` `ddclient` `default`
        `#` `cp` `sample-etc_rc.d_init.d_ddclient` `/etc/rc.d/init.d/ddclient`
        `#` `/sbin/chkconfig` `--add` `ddclient`
        `#` `cp` `sample-etc_rc.d_init.d_ddclient` `/etc/init.d/ddclient`
        `#` `update-rc.d` `ddclient` `defaults`
        `#` `cp` `sample-etc_rc.d_init.d_ddclient.lsb` `/etc/init.d/ddclient`
        `#` `insserv` `ddclient`
        PM the [guide author](http://www.eathena.ws/board/index.php?act=Msg&CODE=4&MID=144476) asking for help with your \*nix distribution and it will get added to this list

8.  Create the config directory for the program
    `#` `mkdir` `/etc/ddclient`

#### Configuration

Configuration for ddclient is done through a text-format config file (`/etc/ddclient/ddclient.conf`)

1.  If you didn't do this yet, get root privileges (one of the following commands, depending on your distribution)
    `$` `sudo` `su`
    `$` `su`
2.  Open the config file in your favorite text editor (replace `vim` with the text editor you prefer)
    `#` `vim` `/etc/ddclient/ddclient.conf`
3.  Edit the below template to complete/write the config file:<code><nowiki>\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#
4.  Basic configuration file for ddclient
5.  6.  /etc/ddclient/ddclient.conf
    1.  1.

daemon=300 \# check every 300 seconds cache=/tmp/ddclient.cache pid=/var/run/ddclient.pid \# record PID in file. ssl=no \# use ssl-support. Works with ssl-library

use=web, web=checkip.dyndns.com/, web-skip='IP Address'

1.  1.  Replace Username with the username you used to register in the DynDNS website

login=Username

1.  1.  Replace Password with the password you used to register in the DynDNS website

password=Password

1.

protocol=dyndns2 server=members.dyndns.org wildcard=yes

1.  1.  Replace your-host-name.game-server.cc with the real host name you added to your DynDNS account

your-host-name.game-server.cc

1.

</nowiki></code>

1.  Start the ddclient updater
        `#` `/etc/init.d/ddclient` `start`
        `#` `/etc/rc.d/init.d/ddclient` `start`
        PM the [guide author](http://www.eathena.ws/board/index.php?act=Msg&CODE=4&MID=144476) asking for help with your \*nix distribution and it will get added to this list

rAthena settings
You will need to configure rAthena properly in order to allow it to use the newly created DynDNS address.
Below are the required settings (use your favorite text editor to edit the files). Replace: `LAN_IP` with your LAN IP address, `DYNDNS_HOST` with your DynDNS Hostname and `SUBNET_MASK` with your LAN Subnet Mask.


bind_ip: LAN_IP char_ip: DYDNDNS_HOST</code>


bind_ip: LAN_IP map_ip: DYNDNS_HOST</code>


Client settings
The client needs to be configured as well in order to let it connect through the DynDNS hostname. Edit the [clientinfo.xml](/clientinfo.xml "wikilink") file as follows:

    <address>
    LAN_IP

    </address>
    \[/code\]

    <address>
    DYNDNS_HOST

    </address>
    \[/code\]

Useful Links

[Category:Client Configuration](/Category:Client_Configuration "wikilink") [Category:Configuration](/Category:Configuration "wikilink")

============================================================

## Eaclass

Syntax

Description
This command returns the certain 'eA-jobid' of a character. The job id is an optional parameter to return other jobs 'eA-jobid''s

A list of all id's is listed in here:

Use
You can use this system to check a characters job with quick-bitwise operators.

    if(eaclass()&EAJ_MAGE)

would check if you are part of the mage-class, means: mage, wizard, sage, high-mage,high wizard and professor.

Useful command connected to this
If you want to use this system in his best you also need this command: [roclass()](/Roclass "wikilink")

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Editing_the_wiki

Welcome to the rAthena wiki!
The rAthena wiki could always use some help. It is an ever changing repository of information related to rAthena, such as installation, configuration, scripting and even some client support. The wiki thanks you for stopping by and showing some interest in helping get the wiki full of the most useful information for rAthena.

### Where to Begin?

All users must login to the wiki using their forum account. Any member with more than 1 post on the forums can edit the wiki, but please keep in mind that the rAthena wiki is released under the [GNU Free Documentation License](/wikipedia:GNU_Free_Documentation_License "wikilink") Version 1.2. This means that the wiki and any works put on it can be edited at will. They may also be distributed, provided all history and copylefts remain intact. Please see read this page for more information.

Don't know where to start? Check the [Special:WantedPages](/Special:WantedPages "wikilink") page and create a page that is listed there!

Please do not create pages for custom content, such as custom projects not relating to rAthena in any way. A full list of content that should not be on the wiki is listed at [Editing the wiki](/Editing_the_wiki "wikilink").

Please see [Wiki Projects](/:Category:Wiki_Projects "wikilink") for any ongoing projects that you might be able to help with!

### License Requirements

The rAthena wiki is to be released under the [GNU Free Documentation License](/wikipedia:GNU_Free_Documentation_License "wikilink"). For those that do not know, this license allows anyone to edit your work on the wiki at will, provided that all pertinent history is remained intact and all copylefts are abided by. This work can also be redistributed, again, provided that all copylefts remain intact.

### Editing Requirements

You might be eager to start editing. The first question is....how do I start?

With the rAthena wiki, you can use IPB BBCodes to format your work, but there is a helpful toolbar at the top of the edit box to help you as well.

You can create a new page, but make sure that the page you are creating [doesn't exist yet](/Special:AllPages "wikilink") and preferably is already [being linked to](/Special:WantedPages "wikilink"). If it already exists, maybe you can head over and help edit in something that might be missing that someone forgot.

### General Rules for the rA wiki

These guidelines/rules should be followed on the rAthena wiki. If not followed, your account is at risk for being banned from the wiki **as well as** from the forums. You have been warned.


### General tips for editing a wiki

These tips should be referenced when you need to edit/write an article.


### Script Command Pages

As a general rule of thumb, the following format should be used in order to keep the articles in a uniform fashion.

`==Syntax==`
`*'''scriptcommand'''(<argument1>,Â <"argument2">);`
``
`==Description==`
`ThisÂ commandÂ doesÂ thisÂ andÂ that,Â andÂ argumentsÂ meanÂ thatÂ andÂ this.`
``
`==Examples==`
`Â [[/mes|mes]]Â "...";`
`Â [[/if|if]](scriptcommand(1,Â "abc"))`
`Â {`
`Â Â Â Â Â mesÂ "...";`
`Â }`
`Â [[/close|close]];`
``
`==SeeÂ Also==`
`*Â [[/related_script_command_1|relatedÂ scriptÂ commandÂ 1]]`
`*Â [[/related_script_command_2|relatedÂ scriptÂ commandÂ 2]]`
``
`[[/Category:Script_Command|Category:ScriptÂ Command]]`

============================================================

## Edit_Max_Level

One of the most common issues during server configurations is setting the max base and job levels. The process involves a 2-part editing--the source code and the configuration files.

Editing The Source Code
### \\src\\map\\map.h

Open ***\\src\\map\\map.h*** and look for this line of code:

`#defineÂ MAX_LEVELÂ `***`160`***

Change ***160*** to your desired maximum value, i.e.

`#defineÂ MAX_LEVELÂ `***`1000`***

Compiling The Server
After editing the source code, you must recompile your binaries for the changes to take effect.

See [Compiling](/Compiling "wikilink").

Editing The Configuration and Database Files
### \\conf\\battle\\client.conf

Open ***\\conf\\battle\\client.conf*** and look for this line of code:

`max_lv:Â `***`99`***

and

`aura_lv:Â `***`99`***

Modify these to your desire values. But take note of the maximum values had in your source. Any value exceeding the supported values will be automatically reverted to **99**.

### \\db\\(pre-)re\\job_exp.txt

sets the final maximum values for the base and job levels. The included file supports up to base level 1000.

Each entry under job_exp.txt is in the format

`MaxÂ Level,ClassÂ list,TypeÂ (0Â -Â BaseÂ ExpÂ /Â 1Â -Â JobÂ Exp),ExpÂ 1,2,3,...`
`Example:Â //BaseÂ -Â NormalÂ andÂ BabyÂ Jobs`
`Â Â Â Â Â Â Â Â Â 99,0:1:2:3:4:5:6:7:8:9:10:11:12:13:14:15:...Â =Â 99Â BaseÂ levelÂ forÂ NormalÂ JobsÂ andÂ babyÂ Jobs`

Edit the Max Level values to your desired values. You can also set the maximum Job level under this file. Each entry is labeled accordingly.

[Category:Configuration](/Category:Configuration "wikilink") [Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Emotion

Syntax

Description
This command makes an object display an emotion sprite above their own as if they were doing that emotion. For a full list of emotion numbers, see '' under 'e_'. The not so obvious ones are 'e_what' (a question mark) and 'e_gasp' (the exclamation mark).

The optional target parameter specifies who will get the emotion on top of their head. Target value can be:

| Value | Description   |
|-------|---------------|
| 0     | NPC (default) |
| 1     | Player.       |

Target name parameter allows displaying emotion on top of other NPC/PC. If the specified name is not found, the command does nothing.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Enablewaitingroomevent

Syntax

Description
These commands will enable and disable triggering the waiting room event respectively. Optionally, giving an [NPC](/NPC "wikilink") name will do that for a specified NPC, rather than the current one. The chat room will not disappear when triggering is disabled and enabled in this manner and players will not be kicked out of it. Enabling a chat room event will also cause it to immediately check whether the number of users in it exceeded the trigger amount and trigger the event accordingly.

Commands **enablearena** and **disablearena** are parameter-less aliases, which might have been introduced for sake of compatibility with official [AEGIS](/AEGIS "wikilink") scripts.

Examples
[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â Â `[`waitingroom`](/waitingroom "wikilink")`Â "MerchantÂ Area",Â 1,Â "OnWarpToArea";`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`OnWarpToArea:`
`Â Â Â Â `[`warp`](/warp "wikilink")`Â "merchant",Â 0,Â 0;`
`Â Â Â Â end;`
`OnClock1900:`
`Â Â Â Â disablewaitingroomevent;`
`Â Â Â Â end;`
`OnClock2000:`
`Â Â Â Â enablewaitingroomevent;`
`Â Â Â Â end;`

This would disable warping to the merchant area from 7.00pm to 8.00pm (ex. restricting deals during [WoE](/WoE "wikilink")).

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Enable_items

Syntax

Description
These commands enable and disable item usage and equipping while scripts are running in a particular [NPC](/NPC "wikilink") for the [currently attached](/RID#Usage "wikilink") character. Item usage and equipping is disabled in all NPCs by default, to prevent possible exploits.

Items can be enabled for only single NPC at same time, each new call to enable_items or disable_items will affect any following scripts. When item usage is enabled for a particular NPC, it will last until either disable_items is called or the character logs out, which usually is not desired, thus disable_items should be called as soon as possible, when item usage in scripts is no longer needed.

Examples
[`set`](/set "wikilink")`Â .@potcount,Â `[`countitem`](/countitem "wikilink")`(569);`
[`getitem`](/getitem "wikilink")`Â 569,Â 1;Â Â //Â Novice_Potion`
`enable_items;`
[`mes`](/mes "wikilink")`Â "[Tutor]";`
`mesÂ "IÂ gaveÂ youÂ aÂ "+`[`getitemname`](/getitemname "wikilink")`(569)+",Â tryÂ toÂ drinkÂ it.";`
`mesÂ "";`
`mesÂ "Note,Â ifÂ youÂ tryÂ toÂ foolÂ meÂ andÂ doÂ notÂ use,Â I'llÂ takeÂ itÂ againÂ fromÂ you.";`
[`next`](/next "wikilink")`;`
`disable_items;`
`mesÂ "[Tutor]";`
[`if`](/if "wikilink")`(countitem(569)>.@potcount)`
`{`
`Â Â Â Â `[`delitem`](/delitem "wikilink")`Â 569,Â 1;`
`Â Â Â Â mesÂ "IÂ said,Â IÂ willÂ takeÂ itÂ back,Â whenÂ youÂ doÂ notÂ drinkÂ it.";`
`}`
`else`
`{`
`Â Â Â Â mesÂ "WellÂ done.";`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## End

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will stop the execution for this particular script. It is the normal way to end a script which does not use [mes](/mes "wikilink"), otherwise use [close](/close "wikilink").

Examples
       if(BaseLevel <= 10) {
          npctalk "Look at that you are still a n00b";
          end;
       }
       if(BaseLevel <= 20) {
          npctalk "Look at that you are getting better, but still a n00b";
          end;
       }
       if(BaseLevel <= 30) {
          npctalk "Look at that you are getting there, you are almost 2nd profession now right???";
          end;
       }
       if(BaseLevel <= 40) {
          npctalk "Look at that you are almost 2nd profession";
          end;
       }

Notes
Without the use of 'end' it would travel through all the if's until the end of the script. If you were Level 10 or less, you would see all the speech lines, the use of 'end' stops this, and ends the script.

============================================================

## Equip

Syntax

Description
These commands are to equip a equipment on the attached character. The equip function will equip the item ID given when the player has this item in his/her inventory, while the autoequip function will equip the given item ID when this is looted. The option parameter of the autoequip is 1 or 0, 1 to turn it on, and 0 to turn it off.

Examples
`//Â ThisÂ willÂ equipÂ aÂ 1104Â (falchion)Â onÂ theÂ characterÂ ifÂ thisÂ isÂ inÂ theÂ inventory.`
`equipÂ 1104;`

`//Â TheÂ invokedÂ characterÂ willÂ nowÂ automaticallyÂ equipÂ aÂ falchionÂ whenÂ it'sÂ looted.`
`autoequipÂ 1104,1;`
`//Â TheÂ invokedÂ characterÂ willÂ noÂ longerÂ automaticallyÂ equipÂ aÂ falchion.`
`autoequipÂ 1104,0;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Equipment_Leveling

Introduction and Important Notices
<small>''(Original topic by Epoque: [Equipment leveling system](http://www.eathena.ws/board/index.php?showtopic=201038)) ''</small>

Well, I suddenly had the urge to change the whole Refine system for Ragnarok. Don't ask me why, it was a spur of the moment thing. So, I ended up re-modelling the system and implemented a "weapon leveling" system instead.

Now, please bear in mind this was created on trunk 13304. So there may be incompatibility issues at the moment. I plan on importing it into earlier revision(s), so I'll release multiple diff patches.

So, the diff is online. There are a few notes I should include though:


**Test this at your own risk**. Like I said, this was just a little project I made up. Took me a couple of days, and I'll be porting it to Stable and earlier revisions of the SVN too.

Other Information
I modified @refine also, so that if your equipment's maximum level is set differently than other equipment, or perhaps you've lowered all equipment's levels to below 10 (or increased it?), then @refine will only refine to the maximum that you set for the level of that equipment. IE, if you set an Armor to only level to level 5, it will only refine using @refine to level 5.

I recommend you only test this by downloading the Head Revision of the SVN and applying it to that to play with it. Importing it into a pre-existing project could cause many complications. It's recommended to just play with for now. (It's only a fun little side-project, nothing that should be implemented large-scale unless you really want to)

Installation
You can download the .diff file [here](http://www.darkorigin.org/WLevelling.diff) , and simply use TortoiseSVN to apply that patch to your <server>\\src\\ folder. This will modify SQL queries and some of the structures required to hold the EXP information.

How to apply this diff for Linux First cd into the directory where you Athena is located and then into the src folder then do the following:

`wgetÂ `[`http://www.darkorigin.org/WLevelling.diff`](http://www.darkorigin.org/WLevelling.diff)
`patchÂ <Â WLevelling.diff`

Then, copy the attached files to the stated locations:

`CopyÂ thisÂ fileÂ toÂ db\equip_exp.txt`
`CopyÂ thisÂ fileÂ toÂ db\item_exp.txt`

After this, open conf\\battle\\items.conf and append the following to the bottom:

<code>

    // How much user experience will go towards the equipment for levelling?
    // Value is x/100 (so 1 = 0.01%, 100 = 1%)
    // If the value is less than 0, the experience gained will be fixed to -wlv_userexp
    // IE: wlv_userexp: -50 will fix EXP after every kill to 50 for the equipment
    // NOTE: 0 = disable the entire levelling system
    wlv_userexp: 5

    // What is the maximum level for the equipment to obtain
    // The minimum is 1 and the maximum is 20.
    // NOTE: 0 = default maximum refine (10)
    wlv_maxlevel: 5

    // Take away EXP for the weapon from the user's gained experience?
    // NOTE: Recommended set to 0/no at the moment. There's an EXP bug.
    // 1 : Player Gained EXP = Base EXP - Weapon EXP
    // 0 : Player Gained EXP = Base EXP (Weapon still gains x% EXP)
    wlv_takeexp: 0

    // What is the maximum EXP a piece of equipment can gain?
    // NOTE: 0 = disabled
    wlv_maxexp: 0

    // Can equipment level up multiple times in a go? (Note 1)
    wlv_multilevel: yes

    // Will the user still benefit from the DEF bonuses for each level? (Note 1)
    wlv_gaindefbonus: no

</code>

And, finally, perform the following MySQL Query on your database:

`` ALTERÂ TABLEÂ `inventory`Â ADDÂ `exp`Â MEDIUMINT(10)Â NOTÂ NULLÂ DEFAULTÂ '0'; ``
`` ALTERÂ TABLEÂ `cart_inventory`Â ADDÂ `exp`Â MEDIUMINT(10)Â NOTÂ NULLÂ DEFAULTÂ '0'; ``
`` ALTERÂ TABLEÂ `storage`Â ADDÂ `exp`Â MEDIUMINT(10)Â NOTÂ NULLÂ DEFAULTÂ '0'; ``
`` ALTERÂ TABLEÂ `guild_storage`Â ADDÂ `exp`Â MEDIUMINT(10)Â NOTÂ NULLÂ DEFAULTÂ '0'; ``

Optionally, you can change the "+" symbol in-game by editing your client using PSPad HEX editor:

Find (NOT in Text search mode):

`2F2FÂ 0000Â 2B25Â 6420Â 0000`

Replace with:

`2F2FÂ 0000Â 4C76Â 2E25Â 6420`

And you should be pretty much set. I do want feedback on this system if possible, since I want to flatten out any bugs and officially release this as a full release.

Thanks!

[Category:Customization](/Category:Customization "wikilink") [Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Ergo_patcher

[Category:Patchers](/Category:Patchers "wikilink")

Folder structure
<div style="background:#ececec">
MainFolder

</div>
Installation
1. Extract the RAR-Archive
2. Copy your Ragnarok Online Client into the RO Folder (Directly)
3. Open the Config-File "**PatcherConfig.xml**"
and set all necessary XML Attributes (*See also "extended Configuration below"*)

<div style="background:#ececec">
<HTTPLink_Patcher_List><http://yourwebsite.com/Patches.xml></HTTPLink_Patcher_List>
<HTTPLink_Patches_Directory><http://yourwebsite.com/PatchesFolder/></HTTPLink_Patches_Directory>
<RagnarokEXEName>YourRagnarokOnline.exe</RagnarokEXEName>

</div>
Extended Configuration
#### General Configuration

<div style="background:#ececec">
`Â `<InitRequired>`false`</InitRequired>
`Â Â `<WindowTitle>`YourWindowTitle`</WindowTitle>
`Â Â `<BackGroundPic>`214200.jpg`</BackGroundPic>
`Â Â `<window_height>`450`</window_height>
`Â Â `<window_width>`750`</window_width>
`Â Â `<HTTPLink_Patcher_List>[`http://yourwebsite.com/Patches.xml`](http://yourwebsite.com/Patches.xml)</HTTPLink_Patcher_List>
`Â Â `<HTTPLink_Patches_Directory>[`http://yourwebsite.com/PatchesFolder/`](http://yourwebsite.com/PatchesFolder/)</HTTPLink_Patches_Directory>
`Â Â `<RagnarokEXEName>`YourRagnarokOnline.exe`</RagnarokEXEName>
`Â Â `<MetroColor>`Lime`</MetroColor>
`Â Â `<BoarderSize>`1`</BoarderSize>
`Â Â `<GRFINI_Name>`Test`</GRFINI_Name>

</div>
<InitRequired> Ignore this.
<WindowTitle> Your windowtitle. ALphanumeric.
<BackGroundPic> Your patcher Background Image. Drop the Image into the System/Images folder.
<window_height> The height of the window. (Without the upper boarder)
<window_width> The width of the window. (Without the left/right boarder)
<MetroColor> Possible Colors are: **"Red", "Green", "Blue", "Purple", "Orange", "Lime", "Emerald", "Teal", "Cyan", "Cobalt", "Indigo", "Violet", "Pink", "Magenta", "Crimson", "Amber", "Yellow", "Brown", "Olive", "Steel", "Mauve", "Taupe", "Sienna"**
<BoarderSize> The size of the boarder around the patcher window in pixels. The color is the same as *MetroColor*

#### Buttons (Buttons List - *repeatable*')

This elements is a list of all buttons on the window. It is possible to repeat the buttons. (Add as much as you need)

<div style="background:#ececec">
`Â `<ButtonsSetter>
`Â Â Â Â `<ButtonSettings>
`Â Â Â Â Â Â `<Button_Title>`Website`</Button_Title>
`Â Â Â Â Â Â `<OpenWebsite>[`http://www.youtube.com/`](http://www.youtube.com/)</OpenWebsite>
`Â Â Â Â Â Â `<OpenProgramm>`setup.exe`</OpenProgramm>
`Â Â Â Â Â Â `<ButtonBackGround>`background.jpg`</ButtonBackGround>
`Â Â Â Â Â Â `<ButtonBackGround_Hover>`background_hover.jpg`</ButtonBackGround_Hover>
`Â Â Â Â Â Â `<ButtonBackGround_Inactive>`background_inactive.jpg`</ButtonBackGround_Inactive>
`Â Â Â Â Â Â `<Margin_Top>`210`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`400`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`50`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<DisableOnPatching>`true`</DisableOnPatching>
`Â Â Â Â Â Â `<KillPatcherOnClick>`false`</KillPatcherOnClick>
`Â Â Â Â Â Â `<KillMusikOnClick>`true`</KillMusikOnClick>
`Â Â Â Â Â Â <Font>`
`Â Â Â Â Â Â Â Â <font>Impact</font>`
`Â Â Â Â Â Â Â Â <fontsize>12</fontsize>`
`Â Â Â Â Â Â Â Â <color>#488864</color>`
`Â Â Â Â Â Â Â Â <bold>true</bold>`
`Â Â Â Â Â Â </Font>`
`Â Â Â `</ButtonSettings>
`Â Â `</ButtonsSetter>

</div>
This Element is a List of Buttons.
<Button_Title>Website</Button_Title>
This is the Button label text. (Shown on the Button)
<OpenWebsite><http://www.youtube.com/></OpenWebsite>
Any Website. (Will be opened in the standard Browser on click)
<OpenProgramm>setup.exe</OpenProgramm>
Any EXE in your RO/ Folder. (Like Setup.exe or your Client EXE)
**Note: If both are set the Button will open Both!
**

<ButtonBackGround>background.jpg</ButtonBackGround>
Drop the image into the System/Images folder.
<ButtonBackGround_Hover>background_hover.jpg</ButtonBackGround_Hover>
Drop the image into the System/Images folder.
<ButtonBackGround_Inactive>background_inactive.jpg</ButtonBackGround_Inactive>
This entry is only required for the Mute Music button..
<Margin_Top>210</Margin_Top>
The Y-Position
<Margin_Left>400</Margin_Left>
The X-Position
<Size_Width>50</Size_Width>
The width of the button in pixels.
<Size_Height>50</Size_Height>
The height of the button in pixels.
<DisableOnPatching>true</DisableOnPatching>
Should the button be disabled while patching?
<KillPatcherOnClick>false</KillPatcherOnClick>
Should the button also close the patcher when its clicked?
<KillMusikOnClick>true</KillMusikOnClick>
Should the button mute the Background Music?
&lt;Font&gt; &lt;font&gt;Impact&lt;/font&gt; The font of the button label. The font must be installed on the PC. &lt;fontsize&gt;12&lt;/fontsize&gt; The fontsize. &lt;color&gt;\#488864&lt;/color&gt; The Color or the Label text. In HEX. (See here for color examples: http://www.color-hex.com/) &lt;bold&gt;true&lt;/bold&gt; Should the Label be Bold true/false. &lt;/Font&gt;

In this Example I added a second button "Registration". Directly under the given button "Website".

<div style="background:#ececec">
`Â `<ButtonsSetter>
`Â Â Â Â `<ButtonSettings>
`Â Â Â Â Â Â `<Button_Title>`Website`</Button_Title>
`Â Â Â Â Â Â `<OpenWebsite>[`http://www.youtube.com/`](http://www.youtube.com/)</OpenWebsite>
`Â Â Â Â Â Â `<OpenProgramm>`setup.exe`</OpenProgramm>
`Â Â Â Â Â Â `<ButtonBackGround>`background.jpg`</ButtonBackGround>
`Â Â Â Â Â Â `<ButtonBackGround_Hover>`background_hover.jpg`</ButtonBackGround_Hover>
`Â Â Â Â Â Â `<ButtonBackGround_Inactive>`background_inactive.jpg`</ButtonBackGround_Inactive>
`Â Â Â Â Â Â `<Margin_Top>`210`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`400`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`50`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<DisableOnPatching>`true`</DisableOnPatching>
`Â Â Â Â Â Â `<KillPatcherOnClick>`false`</KillPatcherOnClick>
`Â Â Â Â Â Â `<KillMusikOnClick>`true`</KillMusikOnClick>
`Â Â Â Â Â Â <Font>`
`Â Â Â Â Â Â Â Â <font>Impact</font>`
`Â Â Â Â Â Â Â Â <fontsize>12</fontsize>`
`Â Â Â Â Â Â Â Â <color>#488864</color>`
`Â Â Â Â Â Â Â Â <bold>true</bold>`
`Â Â Â Â Â Â </Font>`
`Â Â Â `</ButtonSettings>
`TheÂ secondÂ Button:`

<div style="background:#b0bca7">
`Â Â Â `<ButtonSettings>
`Â Â Â Â Â Â `<Button_Title>`Register`</Button_Title>
`Â Â Â Â Â Â `<OpenWebsite>[`http://yourwebsite.com/register.php`](http://yourwebsite.com/register.php)</OpenWebsite>
`Â Â Â Â Â Â `<OpenProgramm></OpenProgramm>
`Â Â Â Â Â Â `<ButtonBackGround>`background.jpg`</ButtonBackGround>
`Â Â Â Â Â Â `<ButtonBackGround_Hover>`background_hover.jpg`</ButtonBackGround_Hover>
`Â Â Â Â Â Â `<ButtonBackGround_Inactive>`background_inactive.jpg`</ButtonBackGround_Inactive>
`Â Â Â Â Â Â `<Margin_Top>`250`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`400`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`50`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<DisableOnPatching>`true`</DisableOnPatching>
`Â Â Â Â Â Â `<KillPatcherOnClick>`false`</KillPatcherOnClick>
`Â Â Â Â Â Â `<KillMusikOnClick>`true`</KillMusikOnClick>
`Â Â Â Â Â Â <Font>`
`Â Â Â Â Â Â Â Â <font>Impact</font>`
`Â Â Â Â Â Â Â Â <fontsize>12</fontsize>`
`Â Â Â Â Â Â Â Â <color>#488864</color>`
`Â Â Â Â Â Â Â Â <bold>true</bold>`
`Â Â Â Â Â Â </Font>`
`Â Â Â `</ButtonSettings>
`Â Â `</ButtonsSetter>

</div>
</div>
#### Webbrowsers (Webbrowser List - *repeatable*')

[<File:Ergo_Patcher_Webbrowser_Element.PNG>â€Ž](/File:Ergo_Patcher_Webbrowser_Element.PNGâ€Ž "wikilink")

<div style="background:#ececec">
`Â `<Webbrowsers>
`Â Â Â Â `<WebBrowserSettings>
`Â Â Â Â Â Â `

<HTML>
<http://google.de>

</HTML>
<Margin_Top>3</Margin_Top>
<Margin_Left>3</Margin_Left>
<Size_Width>380</Size_Width>
<Size_Height>270</Size_Height>
</WebBrowserSettings>
</Webbrowsers>

</div>
The webbrowser element could be used to show a patch history. It opens a website and shows it on the patcher window.
NOTE: The Sliders will be shown as soon as the content of the website is to big for the webbrowser. If the website is just as big as the webbrowser the sliders wont be there.

#### Labels (Labels List - *repeatable*')

<div style="background:#ececec">
`Â `<LabelSetting>
`Â Â Â Â `<LabelSettings>
`Â Â Â Â Â Â `<Text>`Username:`</Text>
`Â Â Â Â Â Â `<Margin_Top>`15`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`400`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`200`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<Hidden>`false`</Hidden>
`Â Â Â Â Â Â `<LabelFont>
`Â Â Â Â Â Â Â Â `<font>`Impact`</font>
`Â Â Â Â Â Â Â Â `<fontsize>`12`</fontsize>
`Â Â Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â Â Â Â Â `<bold>`true`</bold>
`Â Â Â Â Â Â `</LabelFont>
`Â Â Â Â `</LabelSettings>
`Â Â `</LabelSetting>

</div>
Labels are just a text on the patcher window. Some labels are preset and the text will be auto set by the patcher. (Loadingbar- Labels)
The "Hidden" entry is for those labels which are preset by the patcher. (If don't wish to show the Downloading file for example.)

#### Loading Bars (Fixed Element - *not Repeatable*')

[<File:Ergo_Pather_Loading_Bars_and_Labels.PNG>â€Ž](/File:Ergo_Pather_Loading_Bars_and_Labels.PNGâ€Ž "wikilink")

<div style="background:#ececec">
`Â `<LoadingBarSetter>
`Â Â `
`Â Â Â `<CompleteProgressBar>
`Â Â Â Â Â Â `<Margin_Top>`365`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`15`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`720`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`10`</Size_Height>
`Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â `</CompleteProgressBar>
`Â Â Â Â `
`Â Â Â `<SingleFileProgressBar>
`Â Â Â Â Â Â `<Margin_Top>`390`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`15`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`720`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`10`</Size_Height>
`Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â `</SingleFileProgressBar>
`Â Â Â Â `
`Â Â Â `<CurrentFileLabel>
`Â Â Â Â Â Â `<Text>`LoadingBarLabel`</Text>
`Â Â Â Â Â Â `<Margin_Top>`395`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`400`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`200`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<Hidden>`false`</Hidden>
`Â Â Â Â Â Â `<LabelFont>
`Â Â Â Â Â Â Â Â `<font>`Impact`</font>
`Â Â Â Â Â Â Â Â `<fontsize>`12`</fontsize>
`Â Â Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â Â Â Â Â `<bold>`true`</bold>
`Â Â Â Â Â Â `</LabelFont>
`Â Â Â Â `</CurrentFileLabel>
`Â Â Â Â `
`Â Â Â `<DownloadSpeedLabel>
`Â Â Â Â Â Â `<Text>`0Â kb/s`</Text>
`Â Â Â Â Â Â `<Margin_Top>`395`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`600`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`200`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<Hidden>`false`</Hidden>
`Â Â Â Â Â Â `<LabelFont>
`Â Â Â Â Â Â Â Â `<font>`Impact`</font>
`Â Â Â Â Â Â Â Â `<fontsize>`12`</fontsize>
`Â Â Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â Â Â Â Â `<bold>`true`</bold>
`Â Â Â Â Â Â `</LabelFont>
`Â Â Â Â `</DownloadSpeedLabel>
`Â Â Â Â `
`Â Â Â `<PercentageLabel>
`Â Â Â Â Â Â `<Text>`YourÂ LabelÂ Text`</Text>
`Â Â Â Â Â Â `<Margin_Top>`370`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`15`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`300`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<Hidden>`false`</Hidden>
`Â Â Â Â Â Â `<LabelFont>
`Â Â Â Â Â Â Â Â `<font>`Impact`</font>
`Â Â Â Â Â Â Â Â `<fontsize>`12`</fontsize>
`Â Â Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â Â Â Â Â `<bold>`true`</bold>
`Â Â Â Â Â Â `</LabelFont>
`Â Â Â Â `</PercentageLabel>
`Â Â Â Â `
`Â Â Â `<PercentageLabelSingleFile>
`Â Â Â Â Â Â `<Text>`YourÂ LabelÂ Text`</Text>
`Â Â Â Â Â Â `<Margin_Top>`395`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`15`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`50`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<Hidden>`false`</Hidden>
`Â Â Â Â Â Â `<LabelFont>
`Â Â Â Â Â Â Â Â `<font>`Impact`</font>
`Â Â Â Â Â Â Â Â `<fontsize>`12`</fontsize>
`Â Â Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â Â Â Â Â `<bold>`true`</bold>
`Â Â Â Â Â Â `</LabelFont>
`Â Â Â Â `</PercentageLabelSingleFile>
`Â Â Â Â `
`Â Â Â `<ProzessedFilesLabel>
`Â Â Â Â Â Â `<Text>`YourÂ LabelÂ Text`</Text>
`Â Â Â Â Â Â `<Margin_Top>`370`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`320`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`300`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<Hidden>`false`</Hidden>
`Â Â Â Â Â Â `<LabelFont>
`Â Â Â Â Â Â Â Â `<font>`Impact`</font>
`Â Â Â Â Â Â Â Â `<fontsize>`12`</fontsize>
`Â Â Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â Â Â Â Â `<bold>`true`</bold>
`Â Â Â Â Â Â `</LabelFont>
`Â Â Â Â `</ProzessedFilesLabel>
`Â Â Â Â `
`Â Â Â `<ProzessInfoLabel>
`Â Â Â Â Â Â `<Text>`YourÂ LabelÂ Text`</Text>
`Â Â Â Â Â Â `<Margin_Top>`160`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`300`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`300`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<Hidden>`false`</Hidden>
`Â Â Â Â Â Â `<LabelFont>
`Â Â Â Â Â Â Â Â `<font>`Impact`</font>
`Â Â Â Â Â Â Â Â `<fontsize>`12`</fontsize>
`Â Â Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â Â Â Â Â `<bold>`true`</bold>
`Â Â Â Â Â Â `</LabelFont>
`Â Â Â Â `</ProzessInfoLabel>
`Â Â `</LoadingBarSetter>

</div>
#### SSO Login (Fixed Element - *not Repeatable*')

To use this feature you need to hex your client exe with following patches: *skip license Screen*' - not needed but nice
*skip Service Selection Screen*' - also not required but nice to have
*use SSO Login Packet*' - Required
[<File:Ergo_Pather_SSO-Login.PNG>](/File:Ergo_Pather_SSO-Login.PNG "wikilink")

<div style="background:#ececec">
<SSOLoginSetter>
`Â Â Â Â `<EnableSSOLoginPackage>`true`</EnableSSOLoginPackage>
`Â Â Â Â `<RagOrSakParameter>`-1rag1`</RagOrSakParameter>
`Â Â Â Â `<ClientinfoXMLFileName>`clientinfo.xml`</ClientinfoXMLFileName>
`Â Â Â Â `<CheckLogin>`true`</CheckLogin>
`Â Â Â Â `<LinkToPHPCheckLogin>[`http://kasuminator.bplaced.net/test.php`](http://kasuminator.bplaced.net/test.php)</LinkToPHPCheckLogin>
`Â Â Â Â `<LoginCheckImage>
`Â Â Â Â Â Â `<ToggleActive>`correct.png`</ToggleActive>
`Â Â Â Â Â Â `<ToggleInactive>`wrong.png`</ToggleInactive>
`Â Â Â Â Â Â `<Margin_Top>`35`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`705`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`25`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`25`</Size_Height>
`Â Â Â Â `</LoginCheckImage>
`Â Â Â Â `<PasswordCheckImage>
`Â Â Â Â Â Â `<ToggleActive>`correct.png`</ToggleActive>
`Â Â Â Â Â Â `<ToggleInactive>`wrong.png`</ToggleInactive>
`Â Â Â Â Â Â `<Margin_Top>`85`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`705`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`25`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`25`</Size_Height>
`Â Â Â Â `</PasswordCheckImage>
`Â Â Â Â `<LoginButton>
`Â Â Â Â Â Â `<Button_Title>`Start`</Button_Title>
`Â Â Â Â Â Â `<OpenWebsite>`AÂ Website.`</OpenWebsite>
`Â Â Â Â Â Â `<OpenProgramm>`AnÂ EXEÂ withinÂ YourÂ ROÂ Folder`</OpenProgramm>
`Â Â Â Â Â Â `<ButtonBackGround>`background.jpg`</ButtonBackGround>
`Â Â Â Â Â Â `<ButtonBackGround_Hover>`background_hover.jpg`</ButtonBackGround_Hover>
`Â Â Â Â Â Â `<ButtonBackGround_Inactive>`background_inactive.jpg`</ButtonBackGround_Inactive>
`Â Â Â Â Â Â `<Margin_Top>`125`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`400`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`50`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<DisableOnPatching>`true`</DisableOnPatching>
`Â Â Â Â Â Â `<KillPatcherOnClick>`false`</KillPatcherOnClick>
`Â Â Â Â Â Â `<KillMusikOnClick>`true`</KillMusikOnClick>
`Â Â Â Â Â Â `<Font>
`Â Â Â Â Â Â Â Â `<font>`Impact`</font>
`Â Â Â Â Â Â Â Â `<fontsize>`12`</fontsize>
`Â Â Â Â Â Â Â Â `<color>`#488864`</color>
`Â Â Â Â Â Â Â Â `<bold>`true`</bold>
`Â Â Â Â Â Â `</Font>
`Â Â Â Â `</LoginButton>
`Â Â Â Â `<LoginInput>
`Â Â Â Â Â Â `<Margin_Top>`35`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`400`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`300`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`25`</Size_Height>
`Â Â Â Â Â Â `<PreSetValue>`kasuminator`</PreSetValue>
`Â Â Â Â `</LoginInput>
`Â Â Â Â `<PasswordInput>
`Â Â Â Â Â Â `<Margin_Top>`85`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`400`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`300`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`25`</Size_Height>
`Â Â Â Â Â Â `<PreSetValue>`ImInput`</PreSetValue>
`Â Â Â Â `</PasswordInput>
`Â Â Â Â `<RememberUsername>
`Â Â Â Â Â Â `<Hidden>`false`</Hidden>
`Â Â Â Â Â Â `<Margin_Top>`115`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`720`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`50`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`50`</Size_Height>
`Â Â Â Â Â Â `<Remember>`true`</Remember>
`Â Â Â Â `</RememberUsername>
`Â Â `</SSOLoginSetter>

</div>
<div style="background:#ececec">
<?php<br>
`Â Â Â Â $UsernameÂ =Â $_POST["username"];`
`Â Â Â Â Â $PasswordÂ =Â $_POST["password"];`
`Â Â Â Â Â echoÂ "PASSWORD:OK";`
`Â Â Â Â Â echoÂ "LOGIN:OK";`
`?>`

</div>
**Warning! I do not recommending using this PHP! Its just an example!**
How to enable that function:
<CheckLogin>true</CheckLogin> Set this to true.
<LinkToPHPCheckLogin><http://yourwebsite.com/checklogin.php></LinkToPHPCheckLogin> Add here the link to the PHP.
Setting both of this elements will also enable the icons which show the player what went wrong:

<div style="background:#ececec">
`Â Â Â `<LoginCheckImage>
`Â Â Â Â Â Â `<ToggleActive>`correct.png`</ToggleActive>
`Â Â Â Â Â Â `<ToggleInactive>`wrong.png`</ToggleInactive>
`Â Â Â Â Â Â `<Margin_Top>`35`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`705`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`25`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`25`</Size_Height>
`Â Â Â Â `</LoginCheckImage>
`Â Â Â Â `<PasswordCheckImage>
`Â Â Â Â Â Â `<ToggleActive>`correct.png`</ToggleActive>
`Â Â Â Â Â Â `<ToggleInactive>`wrong.png`</ToggleInactive>
`Â Â Â Â Â Â `<Margin_Top>`85`</Margin_Top>
`Â Â Â Â Â Â `<Margin_Left>`705`</Margin_Left>
`Â Â Â Â Â Â `<Size_Width>`25`</Size_Width>
`Â Â Â Â Â Â `<Size_Height>`25`</Size_Height>
`Â Â Â Â `</PasswordCheckImage>

</div>
#### Background Music

**Note: All Buttons can mute the Music.**
Drop a song into the folder System/Songs/

<div style="background:#ececec">
<BackgroundMusik>
<PlayMusik>true</PlayMusik>
<RepeatPlayList>true</RepeatPlayList>
<Muted>true</Muted>
<MuteButton>
<Button_Title />
<OpenWebsite>A Website.</OpenWebsite>
<OpenProgramm>An EXE within Your RO Folder</OpenProgramm>
<ButtonBackGround>sound.png</ButtonBackGround>
<ButtonBackGround_Hover />
<ButtonBackGround_Inactive>mute.png</ButtonBackGround_Inactive>
<Margin_Top>320</Margin_Top>
<Margin_Left>675</Margin_Left>
<Size_Width>50</Size_Width>
<Size_Height>50</Size_Height>
<DisableOnPatching>true</DisableOnPatching>
<KillPatcherOnClick>true</KillPatcherOnClick>
<KillMusikOnClick>true</KillMusikOnClick>
&lt;Font&gt; &lt;font&gt;Impact&lt;/font&gt; &lt;fontsize&gt;12&lt;/fontsize&gt; &lt;color&gt;\#FF000000&lt;/color&gt; &lt;bold&gt;true&lt;/bold&gt; &lt;/Font&gt;
</MuteButton>
<Songs>
<Song>
<FileName>YourSong.mp3</FileName>
</Song>
<Song>
<FileName>SeconfSong.mp3</FileName>
</Song>
</Songs>
</BackgroundMusik>

</div>
Adding Patches
Create a GRF with all items/files you want to update in your client.
Upload this GRF File on your server.. the path should be set here:
<HTTPLink_Patches_Directory><http://yourwebsite.com/PatchesFolder/></HTTPLink_Patches_Directory>
Now add the patch to the patchlist.

<div style="background:#ececec">
<?xml version="1.0" encoding="utf-8"?>
<PatchList xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<patches>
<Patch>
<FileName>patchmecom.grf</FileName>
<Date>2005-01-01T00:00:00</Date>
<Destination>basegrf.grf</Destination>
</Patch>
<Patch>
<FileName>patchmecom2.grf</FileName>
<Date>2005-01-01T00:00:00</Date>
<Destination>basegrf.grf</Destination>
</Patch>
<Patch>
<FileName>patch_override.grf</FileName>
<Date>2005-01-01T00:00:00</Date>
<Destination>data/</Destination>
</Patch>
<Patch>
<FileName>patch_overrideme.grf</FileName>
<Date>2005-01-01T00:00:00</Date>
<Destination>data/</Destination>
</Patch>
</patches>
</PatchList>

</div>
One patch should look like this:
<Patch>
<FileName>yourpatch.grf</FileName>
<Date>2016-03-01T00:00:00</Date>
<Destination>data/</Destination>
</Patch>
The Date is very important. The patcher decides witch patch to do first by the date!
The format is: JJJJ-MM-DDTHH-MM-SS (JEAR-MONT-DAYT-HOUR-MINUTE-SECOND)
The Destination can be a folder insinde your RO Folder. The patcher will then extract all files into the destination folder!
Leave <Destination></Destination> Empty if you want to update files inside the Mainfolder RO/.
If you wish to update a GRF inside your ro folder set <Destination>rdata.grf</Destination> to an GRF File (in this example our patch will be added to rdata.grf).
The FileName should never be used twice!
This patcher also supports .ZIP Files as packeges to extract. (Your user would download only the patcher. The patcher himself downloads the complete client!)
Now upload the Patches.XML on your server. The path should be set here: <HTTPLink_Patcher_List><http://yourwebsite.com/Patches.xml></HTTPLink_Patcher_List>

============================================================

## Escape_sql

Syntax

Description
Converts the value to a string and escapes special characters so that it is safe to use in query_sql().

Returns the escaped form of the given value.

Examples
`setÂ .@str$,Â "John'sÂ Laptop";`
`setÂ .@esc_str$,Â escape_sql(.@str$);Â Â Â Â //Â EscapedÂ string:Â John\'sÂ Laptop`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Explode

Syntax

Description
Breaks a string up into substrings based on the specified delimiter. Substrings will be stored within the specified string [array](/array "wikilink"). Only the 1st char of the delimiter parameter will be used. If an empty string is passed as a delimiter, the string will be placed in the array in it's original form.

Examples
[`explode`](/explode "wikilink")`(.@my_array$,Â "Explode:Test:1965:red:PIE",Â ":");`
`//.@my_array$Â contentsÂ willÂ be...`
`//.@my_array$[0]:Â "Explode"`
`//.@my_array$[1]:Â "Test"`
`//.@my_array$[2]:Â "1965"`
`//.@my_array$[3]:Â "red"`
`//.@my_array$[4]:Â "PIE"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Favorite_tab

The new Favorite Item Tab addition allows players to move items into the new tab which then gets saved. It acts like any other tab in your inventory, but it's meant for you to keep items you find to be "personal", "productive" or even your "favorite" in there. This new addition to rAthena has been introduced in [r16518](http://trac.rathena.org/changeset/16518/rathena).

How do I get it?
Along with the new addition in [r16518](http://trac.rathena.org/changeset/16518/rathena), you can download the SQL file here: that will update your SQL table so that your server won't give you any errors.

What client supports this?
Clients that are dated 2011-11-22aRagexeRE client and above will support this new Favorite Tab.

Msgstringtable
In order for you to get the actual tab working, you would need to get an updated [msgstringtable.txt](http://pastebin.com/MxVxnCtH). If you wish to change what's written in your tabs, find these lines:


What you Must Know
Without this Favorite Tab added to your SQL, you will encounter a SQL Error which would be indicating a missing column. The error that will be appearing would be:

`[SQL]:Â DBÂ errorÂ -Â UnknownÂ columnÂ 'favorite'Â inÂ 'fieldÂ list'`
`` [Debug]:Â atÂ c:\rathena\src\char\char.c:1225Â -Â SELECTÂ `id`,Â `nameid`,Â `amount`,Â ` ``
`` equip`,Â `identify`,Â `refine`,Â `attribute`,Â `expire_time`,Â `favorite`,Â `card0`,Â ` ``
`` card1`,Â `card2`,Â `card3`Â FROMÂ `inventory`Â WHEREÂ `char_id`=?Â LIMITÂ 100 ``

and

`[SQL]:Â DBÂ errorÂ -Â StatementÂ notÂ preparedÂ `

This SQL error will cause players to have their items "disappeared" every time they relog. Fixing this is easy as to just updating your database with this code:

`` ALTERÂ TABLEÂ `inventory`Â Â ADDÂ COLUMNÂ `favorite`Â TINYINT(3)Â UNSIGNEDÂ NOTÂ NULLÂ DEFAULTÂ '0'Â AFTERÂ `expire_time`; ``

Further Updates
Further updates to the Favorite Tab functionality has been introduced in:

============================================================

## Flagemblem

Syntax

Description
This command only works when run by the [NPC](/NPC "wikilink") objects which have sprite id 722, which is a 3D guild flag sprite. If it isn't, the data will change, but nothing will be seen by anyone. If it is invoked in that manner, the emblem of the specified guild will appear on the flag, though, if any players are watching it at this moment, they will not see the emblem change until they move out of sight of the flag and return.

This is commonly used in official guildwar scripts with a function call which returns a guild id.

Examples
`Â Â Â //Â ThisÂ willÂ changeÂ theÂ emblemÂ onÂ theÂ flagÂ toÂ thatÂ ofÂ theÂ guildÂ thatÂ owns`
`Â Â Â //Â "guildcastle"`
`Â Â Â `**`flagemblem`**`Â `[`GetCastleData`](/GetCastleData "wikilink")`("guildcastle",1);Â `

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## FM_HelloWorld

<div style="clear: both;">
</div>
<div style="background:#400; color: #fff; padding-left: 3px;">
These FM (Follow Me) Tutorials are a collaboration of NPC's that are meant to teach you how to effectively use commands in the Athena Scripting Language and to help you better yourself as an rAthena Scripter.

All Tutorials found on here regarding FM Tutorials are based on the following conditions:


</div>
<div style="background:#004; color: #fff; padding-left: 3px; float: right;">
This Tutorial **FM_HelloWorld** will help you understand the following:


</div>
<div id="Introduction">
</div>
Introduction
<div id="Introduction-WhatNPC">
</div>
What is a NPC?

NPC's (Also Known as **N**on-**P**layable **C**haracters) are found in EVERY game you have every played in your entire life. Whether it's a shop that you buy items at, a random person walking around in town, or a person that has a quest for you. Any character you see or possibly don't see, that can interact with the player that is not controlled by another player is a NPC.

<div id="Introduction=WhatScripting">
</div>
What is NPC Scripting?

NPC Scripting is a psuedo-language built around the C Source Code from the rAthena Emulator. This langauge allows us to directly create NPC's that can interact with the Server Community.

<div id="Introduction-WhyHere">
</div>
Why are YOU Here?

NPC Scripting can be as complicated as you want to make it. Fortunately, you have to start somewhere, and that somewhere, is right here!

<!-- -->


Every NPC Scripter has gone through some kind of tutorial, learned from some kind of script, and that's exactly what we are going to focus on today. Following this guide will teach you step by step instructions on creating and maintaining your own set of unique and customizable NPC's!

<div id="Comments">
</div>
Comments

Comments are basically bits of information that you want to store in the file, but not necessarily be read by the server. In order to add a comment, whether it's to a config file (as we are about to do) or a NPC Script File, simply please // in front of ANY text on a line...


<div id="LocatingNPCFolder">
</div>
Locating the NPC Folder

First, you must locate your root installation. Normally this could be something like 'c:\\rAthena\\' or maybe your desktop at 'c:\\documents and settings\\<your_name>\\desktop\\rAthena\\' or 'c:\\users\\<your_name>\\desktop\\rAthena\\' no matter where the location, simply find this directory. Inside, you will find a folder called /npc/ ... Here, all NPC Files are located.

<div id="CreatingCustomNPCFolder">
</div>
Creating Your Own Custom Folder

Whenever you script, it is nice to have all your custom scripts belonging to you in a special place. For this, we will create the directory that will be used for all FM Tutorials. Simply navigation to your /NPC/ folder, and create a new folder called /FM_Tutorials/

<div id="CustomConfig-Create">
</div>
Creating Custom Configuration File
<div id="CustomConfig-What">
</div>
What is a Configuration File?

You may notice a few **\*.conf** files at the bottom. These are configuration files... There is ONE file in particular that you will need to focus on for this tutorial session. This file is called **scripts_main.conf**. This file, controls and imports all other \*.conf files and uses them to house collections of npc's in segregated areas.

<div id="CustomConfig-How">
</div>
How To?

Open Notepad, or your editor of choice, I'm currently using Notepad++ and Sublime 2, however this is all relative and unique to the individual. Create a blank file (because we don't know what exactly we will be importing just yet) and Save in the in the NPC folder as **FM_Tutorials.conf**.

<div id="CustomConfig-WhyImportant">
</div>
Why is This Important ?

The reason we use our custom configuration file is simple. In the event of a new rAthena Release, files copied over, will generally overwrite the ones that came natively with rAthena. This includes the file **scripts_main.conf** and all OTHER **\*.conf** files you see there. The reason we create our own, is because on an update, our file will NOT be overwritten, and thus the only thing we have to do to restore it, is to simply add the import line back into the file **scripts_main.conf**.

<div id="ImportCustomConfig-What">
</div>
Importing Custom Configuration File
<div id="ImportCustomConfig-How">
</div>
How To?

Now that we have our custom configuration file **FM_Tutorials.conf**. We can now look at the line for import to place into **scripts_main.conf**.

<!-- -->


Notice! The line that we place in **scripts_main.conf** is the ONLY line we may have to re-add in the event of a SVN Update that may or may not modify this file!

<!-- -->


You may notice some other lines in this file that look similar to each other... These are the **import** tags. Anywhere near the bottom of the page add the following line:


<div id="HelloWorld-NPC">
</div>
Creating Our First FM_HelloWorld NPC

We are now ready to begin creating our first npc! Again, you can use whatever editor you feel most comfortable in! All Examples will be in Plain Text.

<div id="HelloWorld-MainStructure">
</div>
Main NPC Structure

The **Main NPC Structure** looks like the following:

<!-- -->

    prontera,158,173,4  script  FM_HelloWorld   47,{

    }

Let's now break down each component of the NPC Header (Please note, the spacing between the sections are TABS, NOT SPACES, and will be referenced with a {TAB} marker.

Notice, these sections are separated by TABS and NOT SPACES (Here is the same text using our {TAB} example.

    prontera,158,173,4{TAB}script{TAB}FM_HelloWorld{TAB}47,{

    }

<div id="HelloWorld-MainStructure-Map">
</div>
### Map


To put it simply, this is the mapname that the NPC will be placed on. In earlier versions of rAthena it was required to put the \*.gat extension on these maps, however, this has been changed and you can now simply use the mapname without the extension. (However, if you are unsure about the extension feature, you can STILL use the .gat extension the map name). A List of available server maps can be found in the following location.


This file contains all the loaded maps. Please Keep in Mind // in front of ANY line means this is commented out and does not get read from the server.

<div id="HelloWorld-MainStructure-XY">
</div>
### X,Y


These are the coordinates that the NPC will be located at. This can be hard to determine since you do not have any active way of determining "Where you are" in the world of Ragnarok. However, there is a small trick you can do to figure out where you should place your NPC.

<!-- -->


Login to your server and walk around... Stand exactly where you would like your NPC to stand, and type in the following command:



This will message you the x and y coordinates that you can use to place your npc file exactly where you want it displayed.

<div id="HelloWorld-MainStructure-Direction">
</div>
### Direction


Direction can be tricky to understand. In simple terms, there are 8 different location points... Depending on which way you want the NPC to face.

<!-- -->

    [1][8][7]
    [2][0][6]
    [3][4][5]


My suggestion, is to fiddle with the values 1-8 until you determine which one you like the most.

<div id="HelloWorld-ScriptType">
</div>
### Script Type


There are two types of scripts you can create in the Athena Scripting Language. These types are:

shop
A shop script is a simple buy / sell npc that allows you to place items into it, at specific buy and sell prices. This will be covered in a later tutorial.

script
This is exactly what we are doing right now. a script NPC is one that utilizes command functions to interact with a player and perform different tasks based on numerous checks.

<div id="HelloWorld-NPCName">
</div>
### NPC Name


This is the display that you see when you look at the NPC in-game. This display name can be pretty long, up to about 24 characters I believe, and can include spaces.

<div id="HelloWorld-NPCID">
</div>
### NPC ID


The NPC ID, is a Unique Identifier to the Sprite File for the NPC's. A suitable list can be found at this URL: <http://nn.nachtwolke.com/dev/npclist/> , however there are many sits that allow you to view NPC ID's.

<!-- -->


For the sake of ease, all npc's created by the AS Tutorials, will use the Sprite ID 47.


<div id="HelloWorld-OpenCloseBrackets">
</div>
### Open and Close Brackets


The Brackets { and } you will see many times, along with the command ( )... It is important to note, that every beginning has an end.

<!-- -->


The Main NPC Structure utilizes these brackets { } and anything that the npc says, does, or doesn't do, will be located inside.

<div id="FirstCommands">
</div>
Our First Commands

In this tutorial, we will be covering Two (2) of the most basic commands of NPC Scripting. These two commands are found below.

<div id="FirstCommands-MES">
</div>
### 'mes' Command


The [mes](/Mes "wikilink") statement simply allows us to tell the NPC what to display in the dialog box.

<!-- -->


Let's go ahead and add a mes line to our NPC in order him to say the phrase "Hello World"

<!-- -->


Within the **NPC's Main Structure** we will place the following code

<!-- -->

    mes "Hello World";


There are a few things to notice about this command:



If you have done the following correctly your current npc script should now look like:

<!-- -->

    prontera,158,173,4  script  FM_HelloWorld   47,{
        mes "Hello World";
    }

However, we cannot end just there. If we do not include a special close argument, this will freeze on the users screen, because they have no way of getting this dialog box to close.

<div id="FirstCommands-CLOSE">
</div>
### 'close' Command


The close command, simply allows the users to close the dialog box at specific times (whenever it's read in the file)

<!-- -->


In order for us to use this command, we would have to have first shown something in the dialog box.

:; Have we already done this? Yes! We called the [mes](/Mes "wikilink") command which opened a dialog box!



Now let's simply add the following line after the [mes](/Mes "wikilink") command.

<!-- -->

    close;


This will tell the script that we are done showing messages to the user for now, would like the user to stop talking to the npc, and offer the close option.

<!-- -->


Once again, if all went according to plan, your NPC should contain the following code:

<!-- -->

    prontera,158,173,4  script  FM_HelloWorld   47,{
        mes "Hello World";
        close;
    }

<div style="background:#400; color:#fff; padding-left:3px;">
This concludes the scripting portion of this tutorial. Please save your work as the following:


</div>
<div id="AddToConfig">
</div>
Adding Our FM_HelloWorld NPC to Configuration File

Adding a script to our configuration file tells the server that we want to include this script when it builds the npc's to load into the server.

<div id="AddToConfig-How">
</div>
How To?

Open your Custom Configuration File: **FM_Tutorials.conf**

<!-- -->


This configuration file is currently blank. We are going to add two lines to this file.


<!-- -->

    // FM_HelloWorld Tutorial NPC
    npc: npc/FM_Tutorials/FM_HelloWorld.txt


A few things to note:


<div id="Testing">
</div>
Testing Our FM_HelloWorld NPC

Congradulations! You have successfully finished your first tutorial on NPC Scripting!

<div id="Testing"-How>
</div>
How To?

In order to test to see if your NPC now loads, simply run your server and login. Move your character to the location where you wanted to place the npc and you should now see him in your server and he will speak to you if you click it!

[Category:Scripting_Tutorials](/Category:Scripting_Tutorials "wikilink") [Category:FM_Tutorials](/Category:FM_Tutorials "wikilink")

============================================================

## Folder_Structure

| Location                     | Description                                                                                                                                               |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| **/3rdparty/**               | 3rd party files, such as mysql.h                                                                                                                          |
| **/conf/**                   | Main configuration settings, such as connection settings, battle settings and [mapflags](/mapflag "wikilink").                                            |
| /conf/import/                | [Import folder](/Import_folder "wikilink"), mainly used to keep your configuration settings after an SVN update.                                          |
| /conf/battle/                | Where you will find settings to change the rates, drops, max stats and such for your server.                                                              |
| /conf/msg_conf/import/      | Used for importing message files.                                                                                                                         |
| /conf/msg_conf/import-tmpl/ | Template files for importing message files.                                                                                                               |
| /conf/msg_conf/             | Message files, available for English (default), Chinese, France, Germany, Indonesian, Portugese, Russian, Spain, and Thai                                 |
| **/db/**                     | Databases, such as the job_db, experience tables, item and mob flat-file databases.                                                                      |
| /db/import/                  | Database files for importing/customizations purpose.                                                                                                      |
| /db/import-tmpl/             | Template files for database import.                                                                                                                       |
| /db/pre-re/                  | Pre renewal database files.                                                                                                                               |
| /db/re/                      | Renewal database files.                                                                                                                                   |
| **/doc/**                    | Various documented settings, mainly for database settings.                                                                                                |
| /doc/samples/                | Sample scripts.                                                                                                                                           |
| **/log/**                    | If you generate any log files, such as **picklog** or **atcommandlog**, they will be stored and updated here.                                             |
| **/npc/**                    | Any NPC/spawn file you will find in the game is in here.                                                                                                  |
| /npc/airports/               | The airports and airship scripts are in here, and any NPC related to them.                                                                                |
| /npc/battlegrounds           | Battlegrounds scripts can be found in here.                                                                                                               |
| /npc/cities/                 | Any non-quest, non-kafra [NPC](/NPC "wikilink") found in the towns are here.                                                                              |
| /npc/custom/                 | Any NPC not officially supported by rAthena is located in here. Here is where you will find your healers, warpers and MVP arenas.                         |
| /npc/events/                 | Any official events, such as twin-towers or Christmas events on the official servers.                                                                     |
| /npc/guides/                 | Any guides in the cities.                                                                                                                                 |
| /npc/guild/                  | [WoE](/War_of_Emperium "wikilink") scripts and functions are in here.                                                                                     |
| /npc/guild2/                 | WoE:SE scripts and functions.                                                                                                                             |
| /npc/jobs/                   | Job changing scripts and quests, as well as functions.                                                                                                    |
| /npc/kafras/                 | Kafra scripts and functions.                                                                                                                              |
| /npc/mapflags/               | Folder with all the [mapflags](/mapflag "wikilink"), such as noteleport, pvp and gvg.                                                                     |
| /npc/merchants/              | Any official merchants in here.                                                                                                                           |
| /npc/mobs/                   | Spawn scripts for fields, dungeons as well as city cleaners in here.                                                                                      |
| /npc/other/                  | Scripts that don't really fit anywhere else, like the marriage script.                                                                                    |
| /npc/pre-re/                 | Pre Renewal scripts                                                                                                                                       |
| /npc/quests/                 | Official Quests, such as the Sign Quest or Thanatos Tower.                                                                                                |
| /npc/re/                     | Renewal scripts                                                                                                                                           |
| /npc/warps/                  | Warp portals, and scripts, that behave that way.                                                                                                          |
| **/save-tmpl/**              | If using TXT, this is where all your player information is to be stored, such as accounts, characters and guilds.                                         |
| **/sql-files/**              | If using SQL, this is where the pre-made database dumps are, that will populate your database with the correct tables and such.                           |
| **/src/**                    | All source files, the meat and potatoes of the emu.                                                                                                       |
| /src/char/                   | Character server source files.                                                                                                                            |
| /src/common/                 | Common between both TXT and SQL server settings. [mmo.h](/mmo.h "wikilink") is in here, the file that will modify most of the hard-coded server settings. |
| /src/config/                 | Some config source files, such as const.h, core.h, renewal.h, and secure.h                                                                                |
| /src/config/classes/         | Another config files, general.h.                                                                                                                          |
| /src/custom/                 | Alternative source files for 'simple' customization atcommand and script command.                                                                         |
| /src/login/                  | Login server source files.                                                                                                                                |
| /src/map/                    | Map server source files.                                                                                                                                  |
| /src/plugins/                | Plugins source files.                                                                                                                                     |
| /src/test/                   |                                                                                                                                                           |
| /src/tool/                   | [Tools](http://rathena.svn.sourceforge.net/svnroot/rathena/trunk/src/txt-converter/) source files, such as the mapcache maker.                            |
| **/tools/**                  | Contains tool scripts for various maintenance-related tasks.                                                                                              |
| **/vcproj-9/**               | Project 9 Files,Files used if Using MS Visual Studio C++ 2008                                                                                             |
| **/vcproj-10/**              | Project 10 Files,Files used if using MS Visual Studio C++ 2010                                                                                            |
| **/vcproj-12/**              | Project 12 Files,Files used if using MS Visual Studio C++ 2012                                                                                            |
| **/vcproj-13/**              | Project 13 Files,Files used if using MS Visual Studio C++ 2013                                                                                            |

============================================================

## Freeloop

Syntax

Description
Toggling this to enabled (1) allows the script instance to bypass the infinite loop protection, allowing your script to loop as much as it may need. Disabling (0) will warn you if an infinite loop is detected.

The command will return the state of freeloop for the attached script, even if no argument is provided.

Examples
[`freeloop`](/freeloop "wikilink")`(1);Â //Â allowÂ scriptÂ toÂ loopÂ freely`
`//Â doÂ yourÂ longÂ loopÂ stuffÂ here`
[`freeloop`](/freeloop "wikilink")`(0);Â //Â turnÂ infinityÂ loopÂ warningÂ backÂ on`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Function

Syntax

Description
This will define a function object, callable with the '[callfunc](/callfunc "wikilink")' command (see below). This object will load on every map server separately, so you can get at it from anywhere. It's not possible to call the code in this object by anything other than the '[callfunc](/callfunc "wikilink")' script command.

The code part is the script code that will execute whenever the function is called with '[callfunc](/callfunc "wikilink")'. It has to be in curly brackets, unlike elsewhere where we use curly brackets, these do NOT signify an optional parameter.

Usage
`functionÂ Â Â scriptÂ Â Test-FunctionÂ Â Â {`
`if(.@xÂ ==Â 1)`
`Â Â Â Â setÂ .@y,1;`
`else`
`Â Â Â Â setÂ .@y,0;`
`return;`
`}`

============================================================

## GDB

GDB stands for GNU DeBugger. It is a program for \*nix related systems that allows you to view stacktrace and coredumps of your servers if/when they crash.

Getting GDB
Typically GDB comes installed on most \*nix distro's. It comes installed on FreeBSD 7.1-RELEASE or newer if the ports collection is installed. Typically, it will be located in /usr/bin/gdb, but if it is not, you can either compile it from source or install it using your package manager for your distribution.

Debian Based (apt-get, aptitude or synaptic)
On Debian based systems, you can use apt-get or aptitude, or the synaptic package manager to install gdb. If you prefer the terminal, you can issue ONE of the following to install gdb:

`[sudo]Â aptitudeÂ installÂ gdb`
`[sudo]Â apt-getÂ installÂ gdb`

If you have access to gdm and the synaptic package manager, you can simply search for 'gdb' and mark for complete installation.

YUM based (Redhat systems)
On YUM based systems, you can simply issue the following to install gdb via RPM packages:

`yumÂ installÂ gdb`

\*BSD based
Typically GDM will come with an install of FreeBSD, but if it's not, it is best to make it from source, skip ahead.

Compiling from source
Use your favourite download manager (wget, etc) to get the .tar.gz of the latest stable version of gdb from gdb's website. (http://www.gnu.org/software/gdb/)

Extract the .tar.gz using the following command:

`tarÂ -zxfÂ gdb-x.xx.tar.gz`

You need a GCC compatible compiler, so if you don't have one, get one now. there is a 99% chance that your distribution comes with a gcc compiler.

`./configureÂ &&Â makeÂ &&Â makeÂ install`

Should install it for use. If you're on a \*BSD based system, you may have to issue the following command to be able to use it.

`%Â rehash`

Using gdb with rAthena
Find out which program(map/char/login server) crashed and it's core file (should be named the same as the server file with an additional ".core" extension).. then on the console, type:

`gdbÂ xxx-serverÂ xxx-server_sql.core`

You should get some limited output of the problem, or if the servers do not have a trace, you will get the following error:

`NoÂ stack.`

In case, there is no core file generated, you may need to enable core file generation before starting your servers with the following command:

`ulimitÂ -cÂ unlimited`

If a valid dump was found, you should get a prompt

`gdb>`

At that prompt, type:

`gdb>Â btÂ full`

And that will give you a full output of the problem area and a line number in which you should look for the crash. This just told you where the crash is located and what line you should look at to fix it. If you feel that is a development problem, feel free to submit a bug with that full report and one of the core developers can look into it.

See Also

[Category:Debugging](/Category:Debugging "wikilink")

============================================================

## General_Shop_creation

Shops are very similar to [Basic Scripting](/Basic_Scripting "wikilink"), although since there is only one line to find errors on, it's recommended to understand basic scripts first.
There are five parts to any shop script, tab separated to handle spaces in the name

`prontera,153,194,4`<TAB>`shop`<TAB>`CardÂ SellerÂ Uno`<TAB>`93,4001:-1,4002:-1,4003:10575,4004:-1`
`-Â Â Â Â Â Â AÂ Â Â Â Â Â Â --B-Â Â Â Â Â -Â C-Â Â Â Â Â -Â Â Â Â Â DÂ Â Â Â Â Â -Â Â Â Â -E-Â -Â F_1Â -Â -Â F_2Â -Â -Â Â Â F_3Â Â -Â -Â F_4Â -`

A
Location! This is the map and coordinates (".gat" is not necessary)

B
Direction. Face your Shop any direction from this chart:

`[1][8][7]`
`[2][0][6]`
`[3][4][5]`

C
NPC Type, shop in this case

D
NPC Name, same as other NPCs

E
NPC sprite number, a list for which can be found in [External Links](/#External_Links "wikilink")

F
Items being sold! Notice there are no curly brackets like normal scripts. Don't add them, it will error out and skip your shop

<!-- -->

F\#: Item format is <ItemID>:<price>,<ItemID>,<price>...

The limit for items per shop is 100. You can add more, it will just stop at 100

The prices are a bit odd: -1 means 'read from item_db' and any other amount is an absolute price.

If you use absolute prices you open yourself to money exploits, it's best to just make sure all your item_db (SQL or TXT) items are priced!

Shop Duplicating
Guess what! It's exactly the same as NPC duplicating! Except for the NPC type and primary contents

`-`<TAB>`shop`<TAB>`CardÂ Seller#01::cardtwin`<TAB>`93,4001:-1,...`

And to run a duplicate, identical

`prontera,154,193,3`<TAB>`duplicate(cardtwin)`<TAB>`CardÂ SellerÂ Deus`<TAB>`93`
`prontera,150,193,5`<TAB>`duplicate(cardtwin)`<TAB>`CardÂ SellerÂ Deus`<TAB>`93`

External Links
**Reference Manuals for scriping commands**


**Sprite lists**


**Color Charts**


**Support, Request and Release**


[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Getarg

Syntax
    <default value>
    \]);


Description
This function retrieves a parameter inside a function, which was passed into an invoking [callsub](/callsub "wikilink") or [callfunc](/callfunc "wikilink") call. The parameters are referred to by an zero-based *index*, which means, the first parameter has index 0, the second parameter 1, and so on. Optionally a *default value* can be specified, which will be used, when no parameter was passed with given index (optional parameter functionality for script functions).

If there is no such parameter at given index and no default value exists, or if the invoking script is not a function, the script terminates with an error.

The parameter *default value* is available since .

Examples
`Â Â Â Â `[`callsub`](/callsub "wikilink")`Â L_dosomething,Â "toast";`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`L_dosomething:`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "*doesÂ somethingÂ withÂ aÂ "+getarg(0,Â "notÂ recognizedÂ thing")+"*";`
`Â Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â Â `[`return`](/return "wikilink")`;`

This results in message *\*does something with a toast\**. If "toast" were not passed as parameter, the message would be *\*does something with a not recognized thing\**.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getargcount

Syntax

Description
To be used inside functions/callsub labels, returns quantity of arguments provided

Examples
In **callsub**:

    mapname,x,y,z<TAB>script<TAB>SampleCallSub<TAB>123,{
          mes "The number of arguments in the callsub is: "+callsub(SAMPLE_CS,1,2,3,4,5,6);
    close;

    SAMPLE_CS:
        return getargcount();
    end;
    }

    //This should return the message:
    //The number of arguments in the callfunc is 6

In **callfunc**:

    mapname,x,y,z<TAB>script<TAB>SampleCallSub<TAB>123,{
          mes "The number of arguments in the callfunc is: "+callfunc(SAMPLE_CS,1,2,3,4,5);
    close;

    }
    function<TAB>script<TAB>funcName<TAB>{
         return getargcount();
    }

    //This should return the message:
    //The number of arguments in the callfunc is 5

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getarraysize

Syntax

Description
This function returns the number of values that are contained inside the specified array. Notice that zeros and empty strings at the end of this array are not counted towards this number.

Examples
[`setarray`](/setarray "wikilink")`Â @array[0],Â 100,Â 200,Â 300,Â 400,Â 500,Â 600;`
[`set`](/set "wikilink")`Â @arraysize,Â `[`getarraysize`](/getarraysize "wikilink")`(@array);`

This will make @arraysize == 6. But if you try this:

[`setarray`](/setarray "wikilink")`Â @array[0],Â 100,Â 200,Â 300,Â 400,Â 500,Â 600,Â 0;`
[`set`](/set "wikilink")`Â @arraysize,Â `[`getarraysize`](/getarraysize "wikilink")`(@array);`

@arraysize will still equal 6, even though you've set 7 values.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getbrokenid

Syntax

Description
This function will search the invoking character's inventory for any broken items, and will return their item ID numbers. Since the character may have several broken items, 1 given as an argument will return the first one found, 2 will return the second one, etc. Will return 0 if no such item is found.

Examples
`//Â Let'sÂ seeÂ ifÂ theyÂ haveÂ anythingÂ broken:`
`Â Â Â ifÂ (getbrokenid(1)==0)Â gotoÂ Skip;`
`//Â TheyÂ do,Â soÂ let'sÂ printÂ theÂ nameÂ ofÂ theÂ firstÂ brokenÂ item:`
`Â Â Â mesÂ "Oh,Â IÂ seeÂ youÂ haveÂ aÂ brokenÂ "+getitemname(getbrokenid(1))+"Â here!";`
`Skip:`
`Â Â Â mesÂ "YouÂ don'tÂ haveÂ anythingÂ broken,Â quitÂ botheringÂ me.";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getcastledata

Syntax

== Description == This function returns the castle ownership information for the castle referred to by its map name. Castle information is stored in \`guild_castle\` SQL table.

== Type of datas == Types of data correspond to \`guild_castle\` table columns:

`` 1Â -Â `guild_id`Â Â Â -Â GuildÂ ID. ``
`` 2Â -Â `economy`Â Â Â Â -Â CastleÂ EconomyÂ score. ``
`` 3Â -Â `defense`Â Â Â Â -Â CastleÂ DefenseÂ score. ``
`` 4Â -Â `triggerE`Â Â Â -Â NumberÂ ofÂ timesÂ theÂ economyÂ wasÂ investedÂ inÂ today. ``
`` 5Â -Â `triggerD`Â Â Â -Â NumberÂ ofÂ timesÂ theÂ defenseÂ wasÂ investedÂ inÂ today. ``
`` 6Â -Â `nextTime`Â Â Â -Â unused ``
`` 7Â -Â `payTime`Â Â Â Â -Â unused ``
`` 8Â -Â `createTime`Â -Â unused ``
`` 9Â -Â `visibleC`Â Â Â -Â IsÂ 1Â ifÂ aÂ KafraÂ wasÂ hiredÂ forÂ thisÂ castle,Â 0Â otherwise. ``
`` 10Â -Â `visibleG0`Â Â -Â IsÂ 1Â ifÂ theÂ 1stÂ guardianÂ isÂ presentÂ (SoldierÂ Guardian) ``
`` 11Â -Â `visibleG1`Â Â -Â IsÂ 1Â ifÂ theÂ 2ndÂ guardianÂ isÂ presentÂ (SoldierÂ Guardian) ``
`` 12Â -Â `visibleG2`Â Â -Â IsÂ 1Â ifÂ theÂ 3rdÂ guardianÂ isÂ presentÂ (SoldierÂ Guardian) ``
`` 13Â -Â `visibleG3`Â Â -Â IsÂ 1Â ifÂ theÂ 4thÂ guardianÂ isÂ presentÂ (ArcherÂ Guardian) ``
`` 14Â -Â `visibleG4`Â Â -Â IsÂ 1Â ifÂ theÂ 5thÂ guardianÂ isÂ presentÂ (ArcherÂ Guardian) ``
`` 15Â -Â `visibleG5`Â Â -Â IsÂ 1Â ifÂ theÂ 6thÂ guardianÂ isÂ presentÂ (KnightÂ Guardian) ``
`` 16Â -Â `visibleG6`Â Â -Â IsÂ 1Â ifÂ theÂ 7thÂ guardianÂ isÂ presentÂ (KnightÂ Guardian) ``
`` 17Â -Â `visibleG7`Â Â -Â IsÂ 1Â ifÂ theÂ 8thÂ guardianÂ isÂ presentÂ (KnightÂ Guardian) ``

All types of data have their meaning determined by War of Emperium scripts, with exception of:

`` -Â `guild_id`Â thatÂ isÂ alwaysÂ consideredÂ IDÂ ofÂ theÂ guildÂ thatÂ ownsÂ theÂ castle, ``
`` -Â `defense`Â thatÂ isÂ usedÂ inÂ GuardiansÂ &Â EmperiumÂ HPÂ calculations, ``
`` -Â `visibleG`Â thatÂ isÂ alwaysÂ consideredÂ toÂ holdÂ guardianÂ presenceÂ bits. ``

The **'setcastledata**' command will behave identically, but instead of returning values for the specified types of accessible data, it will alter them and cause them to be sent to the char-server for storage.

Changing Guild ID or Castle Defense will trigger additional actions, like recalculating guardians' HP.

============================================================

## Getcharid

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return a unique ID number of the invoking character, or, if a character name is specified, of that character.

For most purposes other than printing it, a number is better to have than a name (people do horrifying things to their character names).

If the character is not in a party or not in a guild, the function will return 0 if guild or party number is requested. If a name is specified and the character is not found, 0 is returned.

If [getcharid](/getcharid "wikilink")(0) returns a zero, the script got called not by a character and doesn't have an attached [RID](/RID "wikilink"). Note that this will cause the map server to print "player not attached!" error messages, so it is preferred to use '[playerattached](/playerattached "wikilink")' to check for the character attached to the script.

Type Values
| Value | Description             |
|-------|-------------------------|
| 0     | Character ID number.    |
| 1     | Party ID number.        |
| 2     | Guild ID number.        |
| 3     | Account ID number.      |
| 4     | Battleground ID number. |

Examples
[`if`](/if "wikilink")`(Â `**`getcharid`**`(2)Â ==Â 0Â )Â `[`mes`](/mes "wikilink")`Â "OnlyÂ membersÂ ofÂ aÂ guildÂ areÂ allowedÂ here!";`

============================================================

## Getcharip

Syntax

Description
This function will return the IP address of the invoking character, or, if a player is specified, of that character. A blank string is returned if no player is attached.

Examples
`Â //Â OutputsÂ IPÂ addressÂ ofÂ attachedÂ player.`
`Â Â Â Â Â mesÂ "YourÂ IP:Â "Â +Â getcharip();`

`Â //Â OutputsÂ IPÂ addressÂ ofÂ characterÂ "Silver".`
`Â Â Â Â Â mesÂ "Silver'sÂ IP:Â "Â +Â getcharip("Silver");`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getd

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
Returns a reference to a variable, the name can be constructed dynamically. Refer to [setd](/setd "wikilink") for usage.

This can also be used to set an array dynamically:

`Â setarrayÂ getd(".array[0]"),Â 1,Â 2,Â 3,Â 4,Â 5;`

Examples
[`set`](/set "wikilink")`Â .@mob_id,Â 1002;`
[`dispbottom`](/dispbottom "wikilink")`Â getd(".prize_"Â +Â .@mob_id);Â //Â displaysÂ theÂ valueÂ ofÂ .prize_1002`

============================================================

## Getelementofarray

Syntax

Description
This command retrieves the value of the element of given array at given index. This is equivalent to using:

`array[index]`

The reason for this is, that this short form is internally converted into a call to getelementofarray, when the script is loaded.

Examples
[`setarray`](/setarray "wikilink")`Â @array[0],Â 1,Â 2,Â 3;`
[`set`](/set "wikilink")`Â @varl,Â getelementofarray(@array,Â 2);Â Â //Â retrievesÂ 3`
`setÂ @vars,Â @array[2];Â Â //Â retrievesÂ 3Â asÂ well`
[`if`](/if "wikilink")`(@varl!=@vars)`
`{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "ThisÂ willÂ neverÂ beÂ shown";`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getequipid

Syntax

Description
This function returns the id of the item, which occupies given *equipment slot* on [currently attached](/RID#Usage "wikilink") character. When the slot is empty, -1 will be returned. If an item occupies multiple slots, each of them returns the same item id. Equipment slot can be one of the following constants:

| Value                            | Description               |
|----------------------------------|---------------------------|
| **EQI_HEAD_TOP (1)**           | Upper headgear            |
| **EQI_ARMOR (2)**               | Armor                     |
| **EQI_HAND_L (3)**             | Left hand (weapon/shield) |
| **EQI_HAND_R (4)**             | Right hand (weapon)       |
| **EQI_GARMENT (5)**             | Garment                   |
| **EQI_SHOES (6)**               | Shoes                     |
| **EQI_ACC_L (7)**              | Left accessory            |
| **EQI_ACC_R (8)**              | Right accessory           |
| **EQI_HEAD_MID (9)**           | Middle headgear           |
| **EQI_HEAD_LOW (10)**          | Lower headgear            |
| **EQI_COSTUME_HEAD_LOW (11)** | Lower Costume Headgear    |
| **EQI_COSTUME_HEAD_MID (12)** | Middle Costume Headgear   |
| **EQI_COSTUME_HEAD_TOP (13)** | Upper Costume Headgear    |
| **EQI_COSTUME_GARMENT (14)**   | Costume Garment           |

Examples
[`if`](/if "wikilink")`((`[`getequipid`](/getequipid "wikilink")`(EQI_ARMOR)==2341)Â ||Â (`[`getequipid`](/getequipid "wikilink")`(EQI_ARMOR)==2342))`
`{//Â equipped;Â thereÂ areÂ twoÂ kindsÂ ofÂ legionÂ plateÂ armor,Â withÂ (2342)`
`Â //Â andÂ withoutÂ (2341)Â aÂ cardÂ slot.`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ wearingÂ someÂ "+`[`getitemname`](/getitemname "wikilink")`(2341)+",";`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "pleaseÂ dropÂ thatÂ inÂ yourÂ stashÂ beforeÂ continuing";`
`}`
[`else`](/else "wikilink")`Â if((`[`countitem`](/countitem "wikilink")`(2341)>0)Â ||Â (countitem(2342)>0))`
`{//Â inventory`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ haveÂ someÂ "+getitemname(2341)+"Â inÂ your"`
`Â Â Â Â mesÂ "inventory,Â pleaseÂ dropÂ thatÂ inÂ yourÂ stash";`
`Â Â Â Â mesÂ "beforeÂ continuing";`
`}`
[`else`](/else "wikilink")
`{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "IÂ willÂ letÂ youÂ pass.";`
`Â Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â Â `[`warp`](/warp "wikilink")`Â "place",50,50;`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`}`
[`close`](/close "wikilink")`;`

This makes players being able to warp into given place only, if they have neither legion plate armor equipped, nor in their inventory, to prevent them from equipping it later.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getequipisequiped

Syntax

Description
This functions will return 1 if there is an equipment placed on the specified equipment slot and 0 otherwise. For a list of equipment slots see '[getequipid](/getequipid "wikilink")'. Function originally used by the refining NPCs:

Examples
`ifÂ (`[`getequipisequiped`](/getequipisequiped "wikilink")`(EQI_HEAD_TOP))Â gotoÂ L_equipped;`
`Â Â Â `[`mes`](/mes "wikilink")`Â "[Refiner]";`
`Â Â Â mesÂ "DoÂ youÂ wantÂ meÂ toÂ refineÂ yourÂ dumbÂ head?";`
`Â Â Â mesÂ "IÂ meanÂ hat?";`
`Â Â Â `[`close`](/close "wikilink")`;`
`L_equipped:`
`Â Â Â mesÂ "[Refiner]";`
`Â Â Â mesÂ "That'sÂ aÂ fineÂ hatÂ youÂ areÂ wearingÂ there...";`
`Â Â Â close;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getequipname

Syntax

Description
Returns the item's [jname](/jname "wikilink") equipped on the <equipment slot>. If the character is not wearing any equipment on <equipment slot>, it will return an empty [string](http://en.wikipedia.org/wiki/String_%28computer_science%29).

Type Values
| Value          | Equivalent Number | Description                                     |
|----------------|-------------------|-------------------------------------------------|
| EQI_HEAD_TOP | 1                 | Upper head gear.                                |
| EQI_ARMOR     | 2                 | Armor (such as shirts, coats and plates).       |
| EQI_HAND_L   | 3                 | What is in your Left hand.                      |
| EQI_HAND_R   | 4                 | What is in your Right hand.                     |
| EQI_GARMENT   | 5                 | Garment (such as mufflers, hoods, manteaus).    |
| EQI_SHOES     | 6                 | What foot gear the player has on.               |
| EQI_ACC_L    | 7                 | Left accessory slot; Accessory 1.               |
| EQI_ACC_R    | 8                 | Right accessory slot; Acessory 2.               |
| EQI_HEAD_MID | 9                 | Middle Headgear (such as masks and glasses).    |
| EQI_HEAD_LOW | 10                | Lower Headgear (such as beards and some masks). |

Examples
    if (getequipname(3) == "") { // EQI_HAND_L
        mes "Come back when you're wearing something on your Left Hand!!";
    } else {
        mes "Nice, I see you got a "+getequipname(EQI_HAND_L)+" with you!";
    }
    close;

See Also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Getequippedon

Introduction
### Why use this command

An often unknown feature of equipment is that they can be slotted wherever they like. More specifically, cards can be defined to be slotted in more than just one type of equipment. You can define that a card can be equipped in either an Armor, a Shield or a Garment. The only problem is that, if you want a card to perform different scripts when in different items, you may run into problems finding which type of equipment the card is slotted in.

This command is designed to combat the problem, and to return the type of item the card is slotted in.

### Example of a card

    4490,Multislot_Card,Multislot Card,6,2,,10,,,,,,,,52,,,,,{},{},{}

This card can be slotted in an Armor (16), a Shield (32) or a Garment (4) *(16 + 32 + 4 = 52)*. However, let's say that you want the following effects to apply:

    [Slotted in Shield]
    MDEF + 3
    [Slotted in Armor]
    DEF + 4
    [Slotted in Garment]
    FLEE + 10

We wouldn't be able to differentiate where the card is currently slotted without coding a long, complicated function to find out. This wouldn't be very effective when the player's status has to be recalculated.

Open /src/map/script.c
Insert the following code somewhere:

    /*=======================================================
    * Returns where the current item is equipped.
    *-------------------------------------------------------*/
    BUILDIN_FUNC(getequippedon)
    {
        int i = current_equip_item_index; // Store here for neater code.
        TBL_PC *sd;
        if ((sd = script_rid2sd(st))!= NULL)
        {
            switch(i)
            {
                case EQI_HAND_L:
                    script_pushint(st, (sd->inventory_data[i]->type == IT_ARMOR ? EQP_SHIELD : EQP_WEAPON));
                    break;
                default:
                    script_pushint(st, sd->status.inventory_data[i].equip);
                    break;
            }
        }
        else
            script_pushint(st,0);
        return 0;
    }

Find

       BUILDIN_DEF(getequippercentrefinery,"i"),

Add below

       BUILDIN_DEF(getequippedon,""),

Usage
To use this command now, perhaps for the aformentioned card, use it as follows:

    4490,Multislot_Card,Multislot Card,6,2,,10,,,,,,,,52,,,,,{ if(getequippedon()==EQP_ARMOR) { bonus bDef,4; } else
    if(getequippedon()==EQP_SHIELD) { bonus bMdef,3; } else bonus bFlee,10; },{},{}

[Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Getequiprefinerycnt

Syntax

Description
This returns the current refine level for a particular item in the specified equipment slot.

### Slot Values

| Value | Type            |
|-------|-----------------|
| 1     | Upper Headgear  |
| 2     | Armor           |
| 3     | Left Hand       |
| 4     | Right Hand      |
| 5     | Garment         |
| 6     | Foot Gear       |
| 7     | Accessory 1     |
| 8     | Accessory 2     |
| 9     | Middle Headgear |
| 10    | Lower Headgear  |

Example
This can be used to check if you have reached a maximum refine value, default for this is +10:

`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`(`**`getequiprefinerycnt`**`(EQI_HEAD_TOP)Â <Â 10)Â gotoÂ L_Refine_HeadGear;`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "Sorry,Â it'sÂ notÂ possibleÂ toÂ refineÂ hatsÂ betterÂ thanÂ +10";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â L_Refine_HeadGear:`
`Â Â Â Â Â Â Â mesÂ "IÂ willÂ nowÂ upgradeÂ yourÂ "+getequipname(EQI_HEAD_TOP);`

============================================================

## Getequipweaponlv

Syntax

Description
This function returns the weapon level for the weapon equipped in the specified equipment slot on the invoking character. For a list of equipment slots see '[getequipid](/getequipid "wikilink")'.

Only EQI_HAND_L and EQI_HAND_R normally make sense, since only weapons have a weapon level. You can, however, probably, use this field for other equippable custom items as a flag or something. If no item is equipped in this slot, or if it doesn't have a weapon level according to the database, 0 will be returned.

Examples
[`switch`](/switch "wikilink")`Â (`[`getequipweaponlv`](/getequipweaponlv "wikilink")`(EQI_HAND_R))Â {`
[`case`](/case "wikilink")`Â 1:`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ holdingÂ aÂ lvlÂ 1Â weapon";`
`Â Â Â `[`break`](/break "wikilink")`;`
`caseÂ 2:`
`Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 2Â weapon";`
`Â Â Â break;`
`caseÂ 3:`
`Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 3Â weapon";`
`Â Â Â break;`
`caseÂ 4:`
`Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 4Â weapon";`
`Â Â Â break;`
`caseÂ 5:`
`Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 5Â weapon,Â hm,Â mustÂ beÂ aÂ customÂ design";`
`Â Â Â break;`
`default:`
`Â Â Â mesÂ "SeemsÂ youÂ don'tÂ haveÂ aÂ weaponÂ on";`
`Â Â Â break;`
`}`

Or for the left hand, cause it can hold a weapon or a shield:

`Â Â Â `[`if`](/if "wikilink")`(`[`getequipid`](/getequipid "wikilink")`(EQI_HAND_R)==0)Â `[`goto`](/goto "wikilink")`Â L_NothingEquiped;`
`Â Â Â switchÂ (getequipweaponlv(EQI_HAND_L))Â {`
`Â Â Â `[`case`](/case "wikilink")`Â 0:`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ holdingÂ aÂ shield,Â soÂ itÂ doesntÂ haveÂ aÂ level";`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â caseÂ 1:`
`Â Â Â Â Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 1Â weapon";`
`Â Â Â Â Â Â Â break;`
`Â Â Â caseÂ 2:`
`Â Â Â Â Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 2Â weapon";`
`Â Â Â Â Â Â Â break;`
`Â Â Â caseÂ 3:`
`Â Â Â Â Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 3Â weapon";`
`Â Â Â Â Â Â Â break;`
`Â Â Â caseÂ 4:`
`Â Â Â Â Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 4Â weapon";`
`Â Â Â Â Â Â Â break;`
`Â Â Â caseÂ 5:`
`Â Â Â Â Â Â Â mesÂ "YouÂ areÂ holdingÂ aÂ lvlÂ 5Â weapon,Â hm,Â mustÂ beÂ aÂ customÂ design";`
`Â Â Â Â Â Â Â break;`
`Â Â Â }`
`Â Â Â `[`close`](/close "wikilink")`;`
`L_NothingEquiped:`
`Â Â Â mesÂ "SeemsÂ youÂ haveÂ nothingÂ equipped";`
`Â Â Â close;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getexp

Syntax

Description
This command will give the invoking character a specified number of base and job experience points. Can be used as a quest reward. Negative values won't work.

Note that 'getexp' is subject to the **'quest_exp_rate**' config option, which adjusts the gained value. If you want to bypass this, use the 'set' method.

Examples
`//Â getÂ 10,000Â baseÂ expÂ andÂ 5,000Â jobÂ exp`
`getexpÂ 10000,5000;`

You can also use the "set" command with the constants defined in 'db/const.txt':

`//Â TheseÂ 2Â combinedÂ hasÂ theÂ sameÂ effectÂ asÂ theÂ firstÂ example`
`setÂ BaseExp,Â BaseExp+10000;`
`setÂ JobExp,Â JobExp+5000;`

You can also reduce the amount of experience points:

`setÂ BaseExp,BaseExp-10000;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getguildmaster

Syntax

Description
This function return the name of the master of the guild which has the specified ID number. If there is no such guild, "null" will be returned.

Examples
[`if`](/if "wikilink")`Â (`[`getcharid`](/getcharid "wikilink")`(2))Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YourÂ guildÂ master'sÂ nameÂ is:";`
`Â Â Â `[`mes`](/mes "wikilink")`Â `[`getguildmaster`](/getguildmaster "wikilink")`(`[`getcharid`](/getcharid "wikilink")`(2));`
`}Â `[`else`](/else "wikilink")`Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ notÂ inÂ aÂ guild.";`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getguildmasterid

Syntax

Description
This function will return the character ID number of the guild master of the guild specified by the ID. 0 if the character is not a guild master of any guild.

Examples
<NPC Header>`Â {`
`Â Â Â `[`set`](/set "wikilink")`Â .@guild_id,Â `[`getcharid`](/getcharid "wikilink")`(2);`
`Â Â Â `[`if`](/if "wikilink")`Â (.@guild_idÂ ==Â 0)Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ areÂ notÂ inÂ aÂ guild.";`
`Â Â Â }Â `[`else`](/else "wikilink")`Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "YourÂ GuildÂ Master'sÂ char_idÂ is:";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â `[`getguildmasterid`](/getguildmasterid "wikilink")`(.@guild_id);`
`Â Â Â }`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getguildmember

Syntax

Description
This command will find all members of a specified guild and returns their names (or character id or account id depending on the value of "type") into an array of temporary global variables.

Upon executing this,

| Array                      | Description                                                                                                                        |
|----------------------------|------------------------------------------------------------------------------------------------------------------------------------|
| **$@guildmembername$\[\]** | is a global temporary string array which contains all the names of these guild members (only set when type is 0 or not specified). |
| **$@guildmembercid\[\]**   | is a global temporary number array which contains the character id of these guild members (only set when type is 1).               |
| **$@guildmemberaid\[\]**   | is a global temporary number array which contains the account id of these guild members (only set when type is 2).                 |
| **$@guildmembercount**     | is the number of guild members that were found.                                                                                    |

The guild members will be found regardless of whether they are online or offline. Note that the names come in no particular order.

Be sure to use **$@guildmembercount** to go through this array, and not '[getarraysize](/getarraysize "wikilink")', because it is not cleared between runs of '[getguildmember](/getguildmember "wikilink")'.

For usage examples, see '[getpartymember](/getpartymember "wikilink")'.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getguildname

Syntax

Description
This function returns a guild's name given an ID number. If there is no such guild, "null" will be returned;
This is used all over the WoE controlling scripts. You could also use it for a guild-based event.

Examples
`//Â WouldÂ printÂ whatÂ everÂ guildÂ 10007Â is,Â inÂ myÂ caseÂ thisÂ wouldÂ returnÂ "AlcoROhics"`
[`mes`](/mes "wikilink")`Â "TheÂ guildÂ "+`**`GetGuildName`**`(10007)+"Â areÂ allÂ niceÂ people.";`

`//Â ThisÂ willÂ doÂ theÂ sameÂ asÂ above:`
[`set`](/set "wikilink")`Â @var,10007;`
[`mes`](/mes "wikilink")`Â "WeÂ haveÂ someÂ friendsÂ inÂ "+`**`GetGuildName`**`(@var)+",Â youÂ know.";`

[announce](/announce "wikilink") "The \[" + [getcastlename](/getcastlename "wikilink")([strnpcinfo](/strnpcinfo "wikilink")(2)) + "\] castle has been conquered by the \[" + **getguildName**(.@GID) + "\] guild.",bc_all|bc_woe;

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Gethominfo

Syntax

Description
Retrieves information about homunculus of the [currently attached](/RID "wikilink") character. Type specifies what information to retrieve and can be one of the following:

| Value | Description                                                 |
|-------|-------------------------------------------------------------|
| 0     | Database ID                                                 |
| 1     | Class                                                       |
| 2     | Name                                                        |
| 3     | Friendly level (intimacy score), 100000 is full loyalty     |
| 4     | Hungry level, 100 is completely full                        |
| 5     | Rename flag. 0 means this homunculus has not been named yet |
| 6     | Level                                                       |

If the character does not have a homunculus, the command returns "null" for name and 0 for all other types.

Examples
[`if`](/if "wikilink")`(gethominfo(0))`
`{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "That'sÂ someÂ sweetÂ "+gethominfo(2)+"Â youÂ haveÂ there.";`
`}`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getinventorylist

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command sets a bunch of arrays with a complete list of whatever the invoking character has in their inventory, including all the data needed to recreate these items perfectly if they are destroyed. Here's what you get:

Return Values
| Value                         | Description                                                 |
|-------------------------------|-------------------------------------------------------------|
| @inventorylist_id\[\]        | array of item ids.                                          |
| @inventorylist_amount\[\]    | their corresponding item amounts.                           |
| @inventorylist_equip\[\]     | whether the item is equipped or not.                        |
| @inventorylist_refine\[\]    | for how much it is refined.                                 |
| @inventorylist_identify\[\]  | whether it is identified.                                   |
| @inventorylist_attribute\[\] | whether it is broken.                                       |
| @inventorylist_card1\[\]     | These four arrays contain card data for the items.          |
| @inventorylist_card2\[\]     | These data slots are also used to store names               |
| @inventorylist_card3\[\]     | inscribed on the items, so you can explicitly check         |
| @inventorylist_card4\[\]     | if the character owns an item made by a specific craftsman. |
| @inventorylist_expire\[\]    | expire time (Unix time stamp). 0 means never expires.       |
| @inventorylist_count         | the number of items in these lists.                         |

Notes
This could be handy to save/restore a character's inventory, since no other command returns such a complete set of data, and could also be the only way to correctly handle an NPC trader for carded and named items who could resell them - since NPC objects cannot own items, so they have to store item data in variables and recreate the items.

Notice that the variables this command generates are all local and numeric.

**Be careful to use @inventorylist_count instead of getarraysize(@inventorylist_id), because the array doesn't get cleared before the execution of getinventorylist... so it could contain old data at indexes higher than @inventorylist_count.**

Examples
        getinventorylist;
        for(set .@i,0; .@i < getarraysize(@inventorylist_id); .@i++){
            if(@inventorylist_id[.@i] == 512){ // 512 is the item id for apple
                mes "You have an apple with you!";
                close;
            }
        }
        mes "You don't have an apple with you :(";
        close;

============================================================

## Getitem

Syntax

Description
This command will give a specific amount of specified items to the target character. If the character is not online, nothing will happen. If <character ID> is not specified, items will be created in the invoking character inventory instead.

In the first and most commonly used version of this command, items are referred to by their database ID number found inside .

Giving an item ID of -1 will give a specified number of random items from the list of those that fall out of Old Blue Box. Unlike in all other cases, these will be unidentified, if they turn out to be equipment. This is exactly what's written in the Old Blue Box's item script.

Other negative IDs also correspond to other random item generating item tables:

Giving an item ID of -2 will produce the effects of Old Violet Box. Giving an item ID of -3 will produce the effects of Old Card Album. Giving an item ID of -4 will produce the effects of Gift Box. Giving an item ID of -5 will produce the effects of Worn Out Scroll, which, in current SVN, drops only Jellopies anyway.

This transaction is logged if the log script generated transactions option is enabled.

You may also create an item by it's name in the 'english name' field in the item database:

Which will do what you'd expect. If it can't find that name in the database, apples will be created anyway. It is often a VERY GOOD IDEA to use it like this.

This is used in pretty much all NPC scripts that have to do with items and quite a few item scripts. For more examples check just about any official script.

Examples
`getitemÂ 502,10;Â //Â TheÂ personÂ willÂ receiveÂ 10Â apples`
`getitemÂ 617,1;Â Â //Â TheÂ personÂ willÂ receiveÂ 1Â OldÂ VioletÂ Box`
`getitemÂ "RED_POTION",10;`

See Also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Getitem2

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will give an amount of specified items to the invoking character. If an optional character ID is specified, and that character is currently online, items will be created in their inventory instead. If they are not online, nothing will happen. It works essentially the same as '[getitem](/getitem "wikilink")' (it even works for negative ID numbers the same way, which is kinda silly) but is a lot more flexible, since it allows you to give the player an item altered with it's specific properties.

Notes
Card1-card4 values are also used to store name information for named items, as well as the elemental property of weapons and armor. You can create a named item in this manner, however, if you just need a named piece of standard equipment, it is much easier to the '[getnameditem](/getnameditem "wikilink")' function instead.

You will need to keep these values if you want to destroy and then perfectly recreate a named item, for this see '[getinventorylist](/getinventorylist "wikilink")'.

If you still want to try creating a named item with this command because '[getnameditem](/getnameditem "wikilink")' won't do it for you cause it's too limited, you can do it like this. Careful, minor magic ahead.

Examples
`//Â First,Â let'sÂ getÂ anÂ IDÂ ofÂ aÂ characterÂ who'sÂ nameÂ willÂ beÂ onÂ theÂ item.`
`//Â OnlyÂ anÂ existingÂ character'sÂ nameÂ mayÂ beÂ there.`
`//Â Let'sÂ assumeÂ ourÂ characterÂ isÂ 'Adam'Â andÂ findÂ hisÂ ID.`
`setÂ @charid,getcharid(0,"Adam");`

`//Â NowÂ weÂ splitÂ theÂ characterÂ IDÂ numberÂ intoÂ twoÂ portionsÂ withÂ aÂ binary`
`//Â shiftÂ operation.Â IfÂ youÂ don'tÂ understandÂ whatÂ thisÂ does,Â justÂ copyÂ it.`
`setÂ @card3,Â @charidÂ &Â 65535;`
`setÂ @card4,Â @charidÂ >>Â 16;`

`//Â IfÂ you'reÂ inscribingÂ non-equipment,Â @card1Â mustÂ beÂ 254.`
`//Â ArrowsÂ areÂ alsoÂ notÂ equipment.Â :)`
`setÂ @card1,254;`

`//Â ForÂ namedÂ equipment,Â card2Â meansÂ theÂ StarÂ CrumbsÂ andÂ elementalÂ `
`//Â crystalsÂ usedÂ toÂ makeÂ thisÂ equipment.Â ForÂ everythingÂ else,Â it'sÂ 0.`

set @card2,0;

`//Â Now,Â let'sÂ giveÂ theÂ characterÂ whoÂ invokedÂ theÂ scriptÂ someÂ `
`//Â Adam'sÂ Apples:`
`getitem2Â 512,1,1,0,0,@card1,@card2,@card3,@card4;`

This wasn't tested with all possible items, so I can't give any promises, experiment first before relying on it.

To create equipment, continue this example it like this:

`//Â We'veÂ alreadyÂ haveÂ card3Â andÂ card4Â loadedÂ withÂ correct`
`//Â valuesÂ soÂ we'llÂ justÂ setÂ upÂ card1Â andÂ card2Â withÂ data`
`//Â forÂ anÂ IceÂ Stiletto.`
`//Â IfÂ you'reÂ inscribingÂ equipment,Â @card1Â mustÂ beÂ 255.`
`setÂ @card1,255;`
`//Â That'sÂ theÂ numberÂ ofÂ starÂ crumbsÂ inÂ aÂ weapon.`
`setÂ @sc,2;`
`//Â That'sÂ theÂ numberÂ ofÂ elementalÂ propertyÂ ofÂ theÂ weapon.`
`setÂ @ele,1;`
`//Â AndÂ that'sÂ theÂ wackyÂ formulaÂ thatÂ makesÂ themÂ into`
`//Â aÂ singleÂ number.Â Â Â Â `
`setÂ @card2,@ele+((@sc*5)<<8);`
`//Â ThatÂ willÂ makeÂ usÂ anÂ Adam'sÂ +2Â VVSÂ IceÂ Stiletto:`
`getitem2Â 1216,1,1,2,0,@card1,@card2,@card3,@card4;`

ETC
Experiment with the number of star crumbs - I'm not certain just how much will work most and what it depends on. The valid element numbers are:

`1Â -Â Ice,Â 2Â -Â EarthÂ 3Â -Â FireÂ 4Â -Â Wind.`
`Â Â Â `

You can, apparently, even create duplicates of the same pet egg with this command, creating a pet which is the same, but simultaneously exists in two eggs, and may hatch from either, although, I'm not sure what kind of a mess will this really cause.

============================================================

## Getitembound

Syntax
`getitemboundÂ `<item id>`,`<amount>`,`<bound type>`{,`<account ID>`};`
`getitemboundÂ "`<item name>`",`<amount>`,`<bound type>`{,`<account ID>`};`

Description
This command behaves identically to [getitem](/getitem "wikilink"), but the items created will be bound to the target character as specified by the bound type. All items created in this manner cannot be dropped, sold, vended, auctioned, or mailed, and in some cases cannot be traded or stored.

Valid bound types are:

`Bound_AccountÂ :Â AccountÂ BoundÂ item`
`Bound_GuildÂ Â Â :Â GuildÂ BoundÂ item`
`Bound_PartyÂ Â Â :Â PartyÂ BoundÂ item`
`Bound_CharÂ Â Â Â :Â CharacterÂ BoundÂ item`

Examples
Give the item Jellopy (item ID: 909) to the player, and make it account-bound:

`getitemboundÂ 909,1,Bound_Account;`
`getitemboundÂ "Jellopy",1,Bound_Account;`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getitembound2

Syntax

Description
This command behaves identically to 'getitem2', but the items created will be bound to the target character as specified by the bound type. All items created in this manner cannot be dropped, sold, vended, auctioned, or mailed, and in some cases cannot be traded or stored.

Valid bound types are:

`Bound_AccountÂ :Â AccountÂ BoundÂ item`
`Bound_GuildÂ Â Â :Â GuildÂ BoundÂ item`
`Bound_PartyÂ Â Â :Â PartyÂ BoundÂ item`
`Bound_CharÂ Â Â Â :Â CharacterÂ BoundÂ item`

============================================================

## Getiteminfo

Syntax

Description
This function will look up the item with the specified ID number in the database and return the info set by TYPE argument. It will return -1 if there is no such item.

### Valid Types

| Value | Type                                                             |
|-------|------------------------------------------------------------------|
| 0     | Buy Price                                                        |
| 1     | Sell Price                                                       |
| 2     | Item Type                                                        |
| 3     | MaxChance (Max drop chance of this item e.g. 1 = 0.01% , etc..

| 4     | Sex                                                              |
| 5     | Equip                                                            |
| 6     | Weight                                                           |
| 7     | Atk                                                              |
| 8     | Def                                                              |
| 9     | Range                                                            |
| 10    | Slots                                                            |
| 11    | Look                                                             |
| 12    | Equip Level                                                      |
| 13    | Weapon Level                                                     |
| 14    | View ID                                                          |

Example
[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getitemname

Syntax

Description
Retrieves the display name for an item given by ID from the 3rd column in the item database. If there is no such item, "null" is returned as name.

Examples
[`mes`](/mes "wikilink")`Â "See?Â WheneverÂ youÂ findÂ someÂ "+getitemname(512)+",Â bringÂ itÂ toÂ me.";`

Will turn into: "See? Whenever you find some Apple, bring it to me."

`mesÂ "See?Â WheneverÂ youÂ findÂ someÂ "+getitemname(12)+",Â bringÂ itÂ toÂ me.";`

Since there is usually no item with ID 12, this will turn into: "See? Whenever you find some null, bring it to me."

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getitemslots

Syntax

Description
This function will look up the item with the specified ID number in the database and return the number of slots this kind of items has - 0 if they are not slotted. It will also be 0 for all non-equippable items, naturally, unless someone messed up the item database. It will return -1 if there is no such item.

Example
`setÂ @slots,Â getitemslots(1205);`
`//Â @slotsÂ nowÂ hasÂ theÂ amountÂ ofÂ slotsÂ ofÂ theÂ itemÂ withÂ IDÂ 1205.`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getmapguildusers

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return the number of users of the guild_id currently located on the specified map.

Example 1
`//Â ThisÂ willÂ returnÂ theÂ numberÂ ofÂ usersÂ ofÂ theÂ guild_idÂ 1Â thatÂ areÂ inÂ payon.`
[`mes`](/mes "wikilink")`Â "YouÂ haveÂ "+`**`getmapguildusers`**`("payon",1)+"Â guildÂ membersÂ inÂ Payon.";`

============================================================

## Getmapusers

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return the number of users currently located on the specified map.

It is often used in the PVP scripts to check if a PVP room is full of not, if the number returned it equal to the maximum allowed it will not let you enter.

Example 1
`//ThisÂ willÂ askÂ theÂ playerÂ whatÂ mapÂ theyÂ wantÂ toÂ checkÂ thatÂ hasÂ playersÂ andÂ returnÂ theÂ value`
`//ofÂ theÂ playersÂ onÂ theÂ map`
[`input`](/input "wikilink")`Â @map$;`
[`mes`](/mes "wikilink")`Â `**`getmapusers`**`(@map$);`

============================================================

## Getmapxy

Syntax

Description
This function will locate a character object, [NPC](/NPC "wikilink") object or pet's coordinates and place their coordinates into the variables specified when calling it. It will return 0 if the search was successful, and -1 if the parameters given were not variables or the search was not successful.

Type is the type of object to search for:

| Value | Description      |
|-------|------------------|
| 0     | Character object |
| 1     | NPC object       |
| 2     | Pet object       |
| 3     | Monster object   |

While 3 is meant to look for a monster object, no searching will be done if you specify type 3, and the function will always return -1.

The search string is optional. If it is not specified, the location of the invoking character will always be returned for types 0 and 2, the location of the NPC running this function for type 1. If a search string is specified, for types 0 and 1, the character or NPC with the specified name will be located. If type is 3, the search will locate the current pet of the character who's name is given in the search string, it will NOT locate a pet by name.

Examples
`prontera,164,301,3Â scriptÂ Â MehÂ 730,{`
`Â Â Â `[`mes`](/mes "wikilink")`Â "MyÂ nameÂ isÂ Meh.Â I'mÂ hereÂ soÂ thatÂ NyahÂ canÂ findÂ me.";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`
`prontera,164,299,3Â scriptÂ Â NyahÂ Â Â Â 730,{`
`Â Â Â mesÂ "MyÂ nameÂ isÂ Nyah.";`
`Â Â Â mesÂ "IÂ willÂ nowÂ searchÂ forÂ MehÂ allÂ acrossÂ theÂ world!";`
`Â Â Â ifÂ (`**`getmapxy`**`(@mapname$,@mapx,@mapy,1,"Meh")!=0)Â gotoÂ Notfound;`
`Â Â Â mesÂ "AndÂ IÂ foundÂ himÂ onÂ mapÂ "+@mapname$+"Â atÂ X:"+@mapx+"Â Y:"+@mapy+"Â !";`
`Â Â Â close;`
`Notfound:`
`Â Â Â mesÂ "IÂ can'tÂ seemÂ toÂ findÂ MehÂ anywhere!";`
`Â Â Â close;`
`}`

Notice that NPC objects disabled with '[disablenpc](/disablenpc "wikilink")' will still be located.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getmercinfo

Syntax

Description
Retrieves information about mercenary of the [currently attached](/RID "wikilink") character. If char ID is given, the information of that character is retrieved instead. Type specifies what information to retrieve and can be one of the following:

| Value | Type                                           |
|-------|------------------------------------------------|
| 0     | Database ID                                    |
| 1     | Class                                          |
| 2     | Name                                           |
| 3     | Faith value for this mercenary's guild, if any |
| 4     | Calls value for this mercenary's guild, if any |
| 5     | Kill count                                     |
| 6     | Remaining life time in msec                    |
| 7     | Level                                          |

If the character does not have a mercenary, the command returns "" for name and 0 for all other types.

Examples
[`if`](/if "wikilink")`(`**`getmercinfo`**`(0))`
`{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "LooksÂ likeÂ you'veÂ gotÂ aÂ "+`**`getmercinfo`**`(2)+"Â asÂ mercenary.";`
`}`
[`else`](/else "wikilink")
`{`
`Â Â Â Â mesÂ "StillÂ runningÂ aroundÂ withoutÂ aÂ companion?";`
`}`
[`close`](/close "wikilink")`;`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getnameditem

Syntax

Description
This function is equivalent to using 'getitem', however, it will not just give the character an item object, but will also inscribe it with a specified character's name. The player whose name will be inscribed on the item must be online. You may not inscribe items with arbitrary strings, only with names of characters that actually exist. While this isn't said anywhere specifically, apparently, named items may not have cards in them, slots or no - these data slots are taken by the character ID who's name is inscribed. Only one remains free and it's not quite clear if a card may be there.

This function will return 1 if an item was successfully created and 0 if it wasn't for whatever reason. Like 'getitem', this function will also accept an 'english name' from the item database as an item name and will return 0 if no such item exists.

Examples
The command is equivalent to:

[`getitem2`](/getitem2 "wikilink")`Â `<item id>`,Â 1,Â 1,Â 0,Â 0,Â 254,Â 0,Â `<char id>`Â &Â 65535,Â `<char id>`Â >>Â 16;`

[`mes`](/mes "wikilink")`Â "HereÂ youÂ haveÂ yourÂ ownÂ arrow.";`
[`getnameditem`](/getnameditem "wikilink")`Â 1750,Â `[`getcharid`](/getcharid "wikilink")`(0);Â Â //Â Arrow`

Gives the character 1 arrow with it's own name.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getnpcid

Syntax
**getnpcid**(<type>{,"<npc name>"});

Description
Retrieves IDs of the currently invoked NPC. If a unique npc name is given, IDs of that NPC are retrieved instead. Type specifies what ID to retrieve and can be one of the following:

`0Â -Â UnitÂ IDÂ (GID)`

If an invalid type is given or the NPC does not exist, return value is 0.

Examples
`setÂ @gid$,`**`getnpcid`**`(0);`
`mesÂ "MyÂ GIDÂ isÂ "+@n$;`
`close;`

`prontera,50,50,3Â Â Â scriptÂ Â MyNPCNAMEÂ Â Â 123,{`
`setÂ @gid$,`**`getnpcid`**`(0,"MyNPCNAME");`
`setÂ @warpergid$,`**`getnpcid`**`(0,"Warper#1");`
`mesÂ "MyÂ GIDÂ isÂ "+@n$;`
`mesÂ "TheÂ Warper'sÂ NPCÂ IDÂ inÂ PronteraÂ isÂ "+@warpergid$;`
`close;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getnpctimer

Syntax

Description
This script command is one out of a set of commands and functions that create and manage an NPC-based timer. Specifically, 'getnpctimer' provides the timer information. See [\#Parameters](/#Parameters "wikilink") below for the type of information returned. The NPC name may be omitted, in which case the calling NPC is used as target.

Parameters
Its parameter defines what type to return:

`0Â -Â WillÂ returnÂ theÂ currentÂ tickÂ countÂ ofÂ theÂ timer.`
`1Â -Â WillÂ returnÂ 1Â ifÂ thereÂ areÂ remainingÂ "OnTimer`<ticks>`:"Â labelsÂ inÂ theÂ `
`Â Â Â Â specifiedÂ NPCÂ waitingÂ forÂ execution.`
`2Â -Â WillÂ returnÂ theÂ numberÂ ofÂ timesÂ theÂ timerÂ hasÂ triggeredÂ andÂ willÂ trigger`
`Â Â Â Â anÂ "OnTimer`<tick>`:"Â Â labelÂ inÂ theÂ specifiedÂ NPC.`

Examples
[`mes`](/mes "wikilink")`Â "[Man]";`
`mesÂ "IÂ haveÂ beenÂ waitingÂ "+(getnpctimer(0)/1000)+"Â secondsÂ forÂ you";`
`//Â weÂ divideÂ theÂ timerÂ returnedÂ byÂ 1000Â causeÂ itÂ willÂ beÂ displayedÂ inÂ `
`//Â millisecondsÂ otherwise`
[`close`](/close "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getpartnerid

Syntax

Description
This function returns the [character ID](/CID "wikilink") of the invoking character's [marriage](/marriage "wikilink") partner, if any. If the invoking character is not married, it will return 0, which is a quick way to see if they are married:

Examples
`prontera,164,153,3Â scriptÂ Â ManfredÂ 60,{`
`Â Â Â `[`mes`](/mes "wikilink")`Â "[Manfred]";`
`Â Â Â `[`if`](/if "wikilink")`Â (`**`getpartnerid`**`()){Â `
`Â Â Â Â Â Â Â mesÂ "You'reÂ married!";`
`Â Â Â }Â `[`else`](/else "wikilink")`Â {`
`Â Â Â Â Â Â Â mesÂ "Awww,Â you'reÂ notÂ married.";`
`Â Â Â }`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

Another example to retrieve character name of partner using **getpartnerid**()

`mapname,x,y,zÂ Â scriptÂ Â CharnameÂ Â Â Â 60,{`
`ifÂ (`[`getpartnerid`](/getpartnerid "wikilink")`()){`
[`query_sql`](/query_sql "wikilink")`` Â "SELECTÂ `name`Â FROMÂ `char`Â WHEREÂ `char_id`="+ ``[`getpartnerid`](/getpartnerid "wikilink")`()+"Â ",@name$;`
`Â mesÂ "YourÂ PartnerÂ nameÂ isÂ "+@name$;`
`}Â elseÂ {`
`mesÂ "YouÂ don'tÂ haveÂ anyÂ partner";`
`}`
`close;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getpartyleader

Syntax

Description
This function returns some information about the given party-id's leader. When type is omitted, the default information retrieved is the leader's name. Possible types are:

1.  Leader account id
2.  Leader character id
3.  Leader's class
4.  Leader's current map name
5.  Leader's current level as stored on the party structure (may not be current level if leader leveled up recently).

If retrieval fails (leader not found or party does not exist), this function returns "null" instead of the character name, and -1 for the other types.

Examples
[`mes`](/mes "wikilink")`Â "YourÂ PartyÂ LeaderÂ IDÂ :Â "+getpartyleader(`[`getcharid`](/getcharid "wikilink")`(1),2)+"";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getpartymember

Syntax

Description
This command will find all members of a specified party and returns their names (or character id or account id depending on the value of "type") into an array of temporary global variables. There's actually quite a few commands like this which will fill a special variable with data upon execution and not do anything else.

Upon executing this,

| Type | Array                      | Description                                                                                                                        |
|------|----------------------------|------------------------------------------------------------------------------------------------------------------------------------|
| 1    | **$@partymembername$\[\]** | is a global temporary string array which contains all the names of these party members (only set when type is 0 or not specified). |
| 2    | **$@partymembercid\[\]**   | is a global temporary number array which contains the character id of these party members (only set when type is 1).               |
| 3    | **$@partymemberaid\[\]**   | is a global temporary number array which contains the account id of these party members (only set when type is 2).                 |
| 4    | **$@partymembercount**     | is the number of party members that were found.                                                                                    |

The party members will (apparently) be found regardless of whether they are online or offline. Note that the names come in no particular order.

Be sure to use **$@partymembercount** to go through this array, and not '[getarraysize](/getarraysize "wikilink")', because it is not cleared between runs of '[getpartymember](/getpartymember "wikilink")'. If someone with 7 party members invokes this script, the array would have 7 elements. But if another person calls up the [NPC](/NPC "wikilink"), and he has a party of 5, the server will not clear the array for you, overwriting the values instead. So in addition to returning the 5 member names, the 6th and 7th elements from the last call remain, and you will get 5+2 members, of which the last 2 don't belong to the new guy's party. **$@partymembercount** will always contain the correct number, (5) unlike '[getarraysize](/getarraysize "wikilink")()' which will return 7 in this case.

Examples
### Example 1

`//Â getÂ theÂ partyÂ memberÂ names`
[`getpartymember`](/getpartymember "wikilink")`Â `[`getcharid`](/getcharid "wikilink")`(1),0;`
`//Â It'sÂ aÂ goodÂ ideaÂ toÂ copyÂ theÂ globalÂ temporaryÂ $@partymember*****Â `
`//Â variablesÂ toÂ yourÂ ownÂ scopeÂ variablesÂ becauseÂ ifÂ youÂ haveÂ pausesÂ inÂ thisÂ `
`//Â scriptÂ (`[`sleep`](/sleep "wikilink")`,Â `[`sleep2`](/sleep2 "wikilink")`,Â `[`next`](/next "wikilink")`,Â `[`close2`](/close2 "wikilink")`,Â `[`input`](/input "wikilink")`,Â `[`menu`](/menu "wikilink")`,Â `[`select`](/select "wikilink")`,Â orÂ `[`prompt`](/prompt "wikilink")`),Â `
`//Â anotherÂ playerÂ couldÂ clickÂ thisÂ NPC,Â triggerÂ '`[`getpartymember`](/getpartymember "wikilink")`',Â andÂ `
`//Â overwriteÂ theÂ $@partymember*****Â `[`variables`](/Variables#Global_Variables "wikilink")`.`
[`set`](/set "wikilink")`Â .@count,Â $@partymembercount;`
[`copyarray`](/copyarray "wikilink")`Â .@name$[0],Â $@partymembername$[0],Â $@partymembercount;`
`//Â listÂ theÂ partyÂ memberÂ names`
[`for`](/for "wikilink")`Â (`[`set`](/set "wikilink")`Â .@i,0;Â .@iÂ <Â .@count;Â `[`set`](/set "wikilink")`Â .@i,Â .@i+1)Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â (.@iÂ +1)Â +Â ".Â ^0000FF"Â +Â .@name$[.@i]Â +Â "^000000";`
`}`
[`close`](/close "wikilink")`;`

### Example 2

[`set`](/set "wikilink")`Â .register_num,Â 5;Â //Â HowÂ manyÂ partyÂ membersÂ areÂ required?`
`//Â getÂ theÂ charIDÂ andÂ accountIDÂ ofÂ character'sÂ partyÂ members`
[`getpartymember`](/getpartymember "wikilink")`Â `[`getcharid`](/getcharid "wikilink")`(1),Â 1;`
[`getpartymember`](/getpartymember "wikilink")`Â `[`getcharid`](/getcharid "wikilink")`(1),Â 2;`
[`if`](/if "wikilink")`Â (Â $@partymembercountÂ !=Â .register_numÂ )Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "PleaseÂ formÂ aÂ partyÂ ofÂ "+Â .register_numÂ +"Â toÂ continue";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`
`//Â loopÂ throughÂ bothÂ andÂ useÂ '`[`isloggedin`](/isloggedin "wikilink")`'Â toÂ countÂ onlineÂ partyÂ members`
[`for`](/for "wikilink")`Â (Â `[`set`](/set "wikilink")`Â .@i,Â 0;Â .@iÂ <Â $@partymembercount;Â `[`set`](/set "wikilink")`Â .@i,Â .@iÂ +1Â )`
`Â Â Â `[`if`](/if "wikilink")`Â (Â `[`isloggedin`](/isloggedin "wikilink")`(Â $@partymemberaid[.@i],Â $@partymembercid[.@i]Â )Â )`
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â .@count_online,Â .@count_onlineÂ +1Â ;`
`//Â WeÂ searchÂ `[`accountID`](/AID "wikilink")`Â &Â `[`charID`](/CID "wikilink")`Â becauseÂ aÂ singleÂ partyÂ canÂ haveÂ multipleÂ `
`//Â charactersÂ fromÂ theÂ sameÂ account.Â WithoutÂ searchingÂ throughÂ theÂ charID,Â `
`//Â ifÂ aÂ playerÂ hasÂ 2Â charactersÂ fromÂ theÂ sameÂ accountÂ insideÂ theÂ partyÂ butÂ `
`//Â onlyÂ 1Â charÂ online,Â itÂ wouldÂ countÂ theirÂ onlineÂ charÂ twice.`
[`if`](/if "wikilink")`Â (Â .@count_onlineÂ !=Â .register_numÂ )Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "AllÂ yourÂ partyÂ membersÂ mustÂ beÂ onlineÂ toÂ continue";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`
`//Â copyÂ theÂ arrayÂ toÂ preventÂ playersÂ cheatingÂ theÂ system`
[`copyarray`](/copyarray "wikilink")`Â .@partymembercid,Â $@partymembercid,Â .register_num;`
[`mes`](/mes "wikilink")`Â "AreÂ youÂ readyÂ ?";`
[`next`](/next "wikilink")`;Â //Â carefulÂ here`
[`select`](/select "wikilink")`Â "Yes";`
`//Â WhenÂ aÂ scriptÂ hitsÂ aÂ `[`next`](/next "wikilink")`,Â `[`menu`](/menu "wikilink")`,Â `[`sleep`](/sleep "wikilink")`Â orÂ `[`input`](/input "wikilink")`Â thatÂ pausesÂ theÂ script,Â `
`//Â playersÂ canÂ inviteÂ orÂ /leaveÂ andÂ makeÂ changesÂ inÂ theirÂ party.Â ToÂ preventÂ `
`//Â this,Â weÂ callÂ `[`getpartymember`](/getpartymember "wikilink")`Â againÂ andÂ compareÂ withÂ theÂ originalÂ values.`
[`getpartymember`](/getpartymember "wikilink")`Â `[`getcharid`](/getcharid "wikilink")`(1),Â 1;`
[`if`](/if "wikilink")`Â (Â $@partymembercountÂ !=Â .register_numÂ )Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "You'veÂ madeÂ changesÂ toÂ yourÂ partyÂ !";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`
[`for`](/for "wikilink")`Â (Â `[`set`](/set "wikilink")`Â .@i,Â 0;Â .@iÂ <Â $@partymembercount;Â `[`set`](/set "wikilink")`Â .@i,Â .@iÂ +1Â )Â {`
`Â Â Â `[`if`](/if "wikilink")`Â (Â .@partymembercid[.@i]Â !=Â $@partymembercid[.@i]Â )Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "You'veÂ madeÂ changesÂ toÂ yourÂ partyÂ !";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`}`
`//Â Finally,Â it'sÂ safeÂ toÂ startÂ theÂ event!`
[`warpparty`](/warpparty "wikilink")`Â "event_map",Â 0,0,Â `[`getcharid`](/getcharid "wikilink")`(1);`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getpartyname

Syntax

Description
This function will return the name of a party that has the specified ID number. If there is no such party ID, "null" will be returned.

Lets say the ID of a party was saved as a global variable:

Examples
`//Â ThisÂ wouldÂ returnÂ theÂ nameÂ ofÂ theÂ partyÂ fromÂ theÂ IDÂ storedÂ inÂ aÂ variable`
[`mes`](/mes "wikilink")`Â "You'reÂ inÂ theÂ "+Â `[`getpartyname`](/getpartyname "wikilink")`($@var)Â +"Â party,Â IÂ know!";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getrandgroupitem

Syntax

Description
Similar like [groupranditem](/groupranditem "wikilink"), this command allows players to obtain the specified quantity of a random item from the group "<group id>". The different groups and their group number are specified in db/(pre-)re/item_group_db.txt

For example, obtaining three of the same random item from Old Blue Box:

`getrandgroupitem(1,3);`
`getrandgroupitem(IG_BlueBox,3);Â //seeÂ const.txtÂ atÂ 'ItemÂ GroupÂ ID'Â section`

If quantity is 0, and if the item(s) at specified IG_ has defined amount, the amount of the item that will be obtained, will according to the amount on that IG_ data.

By default, if getrandgroupitem is used to get random item from IG_ which has more than defined random group, it always read random group 1, other item that as random item at random group &gt; 2 never been touched. Use 'sub_group' to choose which random group will be obtained.

Examples
### Item Group List

`IG_ExGetGroupItem,Coat,2,2,1`
`IG_ExGetGroupItem,Muffler,2,3,1`
`IG_ExGetGroupItem,Yggdrasilberry,10,7,1`
`IG_ExGetGroupItem,Yggdrasilberry,10,7,2`
`IG_ExGetGroupItem,Seed_Of_Yggdrasil,5,15,2`

### Script Command Usage

`'getrandgroupitem(IG_ExGetGroupItem,1)'`


`'getrandgroupitem(IG_ExGetGroupItem,0)'`


`'getrandgroupitem(IG_ExGetGroupItem,0,2)'`


See also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Getrevision

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will return the SVN revision number that the server is currently running on.

Example
Here is a sample script which might be a help to you:

`ifÂ (Â get_revision()Â >=Â 15000Â )`
`mesÂ "WelcomeÂ toÂ rAthenaÂ !";`

============================================================

## Getscrate

Syntax

Description
This function will return the chance of a status effect affecting the invoking character, in percent, modified by the their current defense against said status. The 'base rate' is the base chance of the status effect being inflicted, in percent.

You can see the full list of available effect types you can possibly inflict in under **Eff_**

Example
`ifÂ (rand(100)Â >Â getscrate(Eff_Blind,Â 50))Â gotoÂ BlindHimNow;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getserverdef

Syntax

Description
Returns a server definition. Valid types are listed in :

`VAR_PACKETVERÂ Â 0`
`VAR_MAX_LEVELÂ Â 1`
`VAR_MAX_STORAGEÂ Â Â Â 2`
`VAR_MAX_INVENTORYÂ Â 3`
`VAR_MAX_ZENYÂ Â Â 4`
`VAR_MAX_PARTYÂ Â 5`
`VAR_MAX_GUILDÂ Â 6`
`VAR_MAX_GUILDLEVELÂ 7`
`VAR_MAX_GUILD_STORAGEÂ Â 8`
`VAR_MAX_BG_MEMBERSÂ 9`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getskilllv

Syntax

Description
This function returns the level of the specified skill that the invoking character has. If they don't have the skill, 0 will be returned. The full list of character skills is available in or , depending on your renewal status.

Examples
There are two main uses for this function, it can check whether the character has a skill or not, and it can tell you if the level is high enough.

Example 1:

`Â Â Â Â Â Â Â Â ifÂ (`**`getskilllv`**`(152))Â `[`goto`](/goto "wikilink")`Â L_HasSkillThrowStone;`
`Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ don'tÂ haveÂ ThrowÂ Stone";`
`Â Â Â Â Â Â Â Â close;`
`Â Â Â Â L_HasSkillThrowStone:`
`Â Â Â Â Â Â Â Â mesÂ "YouÂ haveÂ gotÂ theÂ skillÂ ThrowÂ Stone";`
`Â Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`

Example 2:

`Â Â Â Â Â Â Â ifÂ (`**`getskilllv`**`(28)Â >=Â 5)Â gotoÂ L_HasSkillHeallvl5orMore;`
`Â Â Â Â Â Â Â ifÂ (`**`getskilllv`**`(28)Â ==Â 10)Â gotoÂ L_HasSkillHealMaxed;`
`Â Â Â Â Â Â Â mesÂ "YouÂ healÂ skillÂ isÂ belowÂ levelÂ 5";`
`Â Â Â Â Â Â Â close;`
`Â Â Â L_HasSkillHeallvl6orMore:`
`Â Â Â Â Â Â Â mesÂ "YourÂ healÂ levelÂ isÂ 5Â orÂ more";`
`Â Â Â Â Â Â Â close;`
`Â Â Â L_HasSkillHealMaxed:`
`Â Â Â Â Â Â Â mesÂ "YourÂ healÂ levelÂ hasÂ beenÂ maxed";`
`Â Â Â Â Â Â Â close;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Getstrlen

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return the length of the string given as an argument. It is useful to check if anything input by the player exceeds name length limits and other length limits and asking them to try to input something else.

Examples
        mes "The word 'Hello' has "+getstrlen("Hello")+" characters.";
        // output: The word 'Hello' has 5 characters.

============================================================

## Gettime

Syntax

Description
This function retrieves current system time and date values depending on parameter *type*:

1.  Seconds (0 - 59)
2.  Minutes (0 - 59)
3.  Hours (0 - 23)
4.  Day of Week (0: Sunday - 6: Saturday)
5.  Day of Month (1 - 31)
6.  Month (1 - 12)
7.  Year (1970 - 2038)
8.  Day of Year (1 - 366)

Any other value will cause the function to return -1. Only numbers are returned.

Examples
[`if`](/if "wikilink")`(gettime(4)==6)`
`{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "It'sÂ aÂ Saturday.Â IÂ don'tÂ workÂ onÂ Saturdays.";`
`Â Â Â Â `[`close`](/close "wikilink")`;`
`}`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Gettimestr

Syntax

Description
This function returns the current system time and date as a string, according to given *format*, which has same syntax as the one of C library function [strftime](http://www.cplusplus.com/reference/clibrary/ctime/strftime/). The parameter *max length* specifies the maximum length of the string returned.

Examples
[`mes`](/mes "wikilink")`Â gettimestr("%Y-%m/%dÂ %H:%M:%S",21);`

Would print out the full current date and time, ex. "2010-10/30 07:48:37".

[More Example](http://pastebin.com/raw.php?i=REsVJLmE)

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getvariableofnpc

Syntax

Description
This function retrieves a variable reference to a [permanent NPC variable](/Variables#NPC_Variables "wikilink") in an another NPC script. Note, that the return value behaves like a variable, not like a value, which means, the return value of this function can be used in other script commands, which expect a variable as parameter.

Examples
[`mes`](/mes "wikilink")`Â "TheÂ currentÂ nameÂ ofÂ myÂ co-workerÂ isÂ "+getvariableofnpc(.npcname$,Â "SiteÂ Co-Worker");`

Prints the value of the variable *.npcname$* as if it was used inside the NPC "Site Co-Worker".

`mesÂ "Let'sÂ giveÂ himÂ anÂ anotherÂ name...";`
[`set`](/set "wikilink")`Â getvariableofnpc(.npcname$,Â "SiteÂ Co-Worker"),Â "SleepingÂ Tom";`

Sets the variable *.npcname$* of the NPC "Site Co-Worker" to "Sleeping Tom".

`setÂ .mynpcnamecopy$,Â getvariableofnpc(.npcname$,Â "SiteÂ Co-Worker");`
`setÂ .mynpcnamecopy$,Â "SleepingÂ Tom";`

Will change the variable *.mynpcnamecopy$* to "Sleeping Tom", but keep the variable *.npcname$* of NPC "Site Co-Worker" unaffected, because the first call to set copies the value of *.npcname$* to *.mynpcnamecopy$*, rather than the reference.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Getwaitingroomstate

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return information about the waiting room state for the attached waiting room or for a waiting room attached to the specified NPC if any.

The valid information types are:

| Value | Description                                                                                                           |
|-------|-----------------------------------------------------------------------------------------------------------------------|
| 0     | Number of users currently chatting.                                                                                   |
| 1     | Maximum number of users allowed.                                                                                      |
| 2     | Will return 1 if the waiting room has a trigger set, 0 otherwise.                                                     |
| 3     | Will return 1 if the waiting room is currently disabled, 0 otherwise.                                                 |
| 4     | The Title of the waiting room (string)                                                                                |
| 5     | Password of the waiting room, if any. Pointless, since there is no way to set a password on a waiting room right now. |
| 16    | Event name of the waiting room (string)                                                                               |
| 32    | Whether or not the waiting room is full.                                                                              |
| 33    | Whether the amount of users in the waiting room is higher than the trigger number.                                    |

Example
Here is a sample script which might be a help to you:

`Â `[`if`](/if "wikilink")`(!`**`getwaitingroomstate`**`(32,"HeeroÂ Yuy"))`
`Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "TheÂ roomÂ isÂ currentlyÂ full."`
`Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â }`

============================================================

## Get_monster_gid

Introduction
The ability to control monsters was removed some time ago. To retrieve the GID of a particular monster, to allow further controls, you have to perform a source edit.

Open /src/map/script.c
*Scroll to or find the function BUILDIN_FUNC(monster)*

**Find:**

       int owner;
        unsigned char type;

**Below add:**

       int mob_id;

**Find:**

       mob_once_spawn(sd,m,x,y,str,class_,amount,event,owner,type);

**Replace with:**

       mob_id = mob_once_spawn(sd,m,x,y,str,class_,amount,event,owner,type);
        script_pushint(st, mob_id);

Usage
To use this command now, you can run the following:

    set .@MonsterID, monster("map", x, y, name, class, 1);

Please note, that this only works when **one monster is summoned**. If you wish to retrieve the GID of multiple monsters, you'll have to manually create a loop to summon each, and handle the GID after each summon. Such as below:

    for(set .@i, 0; 10 > .@i; set .@i, .@i + 1)
    {
        set .@MobID, monster("map", x, y, name, class, 1);

        // Do whatever with .@MobID here.
    }

[Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## GID

The **GID** stands for game id or game object id. It uniquely identifies each and every dynamic object ([NPC](/NPC "wikilink"), [monster](/mob "wikilink"), player, item, skill unit) inside the game. For the players a GID is their [account id](/AID "wikilink"), for all other objects it is a server-generated id, that changes each time the object is created.

You can view the id in-game by right-clicking on a object, when your account has enabled game master menu.
==See Also==


[Category:Basics](/Category:Basics "wikilink")

============================================================

## Goto

Syntax

Description
This command will make the script execution jump to the specified label. It is often used by beginners in conjunction with [if](/if "wikilink"), before they get accustomed to other conditional statements, such as [for](/for "wikilink") or [switch](/switch "wikilink"). While advanced scripters typically discourage using [goto](/goto "wikilink"), it can come handy when requiring to leave a complex nested loop without having to use flags or even more complicated code.

Examples
[`if`](/if "wikilink")`Â (`[`checkriding`](/checkriding "wikilink")`())Â `[`goto`](/goto "wikilink")`Â L_riding;`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Yay,Â you'reÂ notÂ ridingÂ aÂ Peco.";`
`Â Â Â `[`close`](/close "wikilink")`;`
`L_riding:`
`Â Â Â `[`mes`](/mes "wikilink")`Â "PleaseÂ dismountÂ yourÂ PecoÂ first.";`
`Â Â Â `[`close`](/close "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## GRF

A [GRF](/GRF "wikilink") is a compressed file archive used by [Ragnarok Online](/Ragnarok_Online "wikilink"). It contains all the compressed graphics, sprites, sound effects, map files, etc. used by the Ragnarok client. The main GRF is usually named "data.grf" or "sdata.grf".

Tools
[GRF Tool](http://sourceforge.net/projects/openkore/files/GRF%20Tool/1.2.0/) - can read GRF/GPFs
[GRF Builder](http://www.grfbuilder.com/#download) - can read/write/merge GRF/GPFs

### GRF Tool

This program can open a grf and extract file(s) from it. It has a Search option and a handy Preview Pane for viewing text and image files before extracting them. To extract a single file, double click it or select it and click Extract. To extract multiple files, hold Ctrl or Shift while you select the files (Ctrl+A for all), then click Extract.

### GRF Builder

This program can open a grf, extract files, create new grfs, and merge grfs. When opening and loading large grfs, it is slower compared to GRF Tool. In addition to the file list view, there is also a tree view. There is a Search option, but it only searches for *exact* file names.

Creating a GRF
1.  Download and extract GRF Builder.
2.  Make a folder named "**data**" somewhere (ex: on your Desktop).
3.  Put files you want to add to your GRF into the "data" folder.
4.  Start grfbuilder.exe
5.  Click **New** and enter a filename (ex: YourRO.grf)
6.  Click **Merge dir**, browse to the "data" folder, and click OK.
7.  A progress bar will show as files are being added.
8.  Click **Close**, then exit GRF Builder.

What about G**P**Fs?
GPF is the same file format as GRF. The different file extension it is only used to differentiate patches from base archives.

See Also

[Category:Client Configuration](/Category:Client_Configuration "wikilink") [Category:File Formats](/Category:File_Formats "wikilink")

============================================================

## Groupranditem

Syntax

Description
Returns the item_id of a random item picked from the group specified. The different groups are constructed in the db/ directory ( (or RE equivalent)).

'sub_group' is used to get the available random items of item group from specified random group. More info, just like the [getrandgroupitem](/getrandgroupitem "wikilink").

Examples
When used in conjunction with other functions, you can get a random item.
For example, for a random pet lure:

[`getitem`](/getitem "wikilink")`Â `[`groupranditem`](/groupranditem "wikilink")`(15),1;`

Item script for Old Blue Box:
[getitem](/getitem "wikilink") [groupranditem](/groupranditem "wikilink")(IG_BlueBox),1;

This could translate to the following, as they both mean the same thing:
[getitem](/getitem "wikilink") [groupranditem](/groupranditem "wikilink")(1),1;

Or make everything random!

[`set`](/set "wikilink")`Â @groupid,`[`rand`](/rand "wikilink")`(1,62);`
[`set`](/set "wikilink")`Â @randvalue,`[`rand`](/rand "wikilink")`(1,999);`
[`getitem`](/getitem "wikilink")`Â `[`groupranditem`](/groupranditem "wikilink")`(@groupid),@randvalue;`
[`dispbottom`](/dispbottom "wikilink")`Â "You'veÂ beenÂ givenÂ aÂ randomÂ amountÂ ofÂ randomÂ itemsÂ fromÂ aÂ randomÂ itemÂ group.";`

See also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Group_Permissions

What are Group Permissions
Ever since rAthena , a new system has replaced the old GM IDs with a new Grouping system. With this new Grouping System, each group has its own unique ID and Name, lists of available commands and other permissions, and a list of other groups it inherits from. More information can be found in your .

With this in mind, there is a file called permissions.txt that can be found in your . It lays out all of the permissions that groups can get. You can add such permissions in your .

Adding Permissions
For this guide, I'll be using the group "players". This group is located in :

`{`
`Â Â Â id:Â 0Â /*Â groupÂ 0Â isÂ theÂ defaultÂ groupÂ forÂ everyÂ newÂ accountÂ */`
`Â Â Â name:Â "Player"`
`Â Â Â level:Â 0`
`Â Â Â inherit:Â (Â /*emptyÂ list*/Â )`
`Â Â Â commands:Â {`
`Â Â Â Â Â Â Â /*Â noÂ commandsÂ byÂ defaultÂ */`
`Â Â Â }`
`Â Â Â permissions:Â {`
`Â Â Â Â Â Â Â /*Â withoutÂ thisÂ basicÂ permissionsÂ regularÂ playersÂ couldÂ notÂ `
`Â Â Â Â Â Â Â tradeÂ orÂ partyÂ */`
`Â Â Â Â Â Â Â can_trade:Â true`
`Â Â Â Â Â Â Â can_party:Â true`
`Â Â Â }`
`},`

As you can see, the **permissions:** section is what holds all the permissions that group can do. Now, lets say I want my players to be allowed to join protected (password) chats. What I would do is right after **can_party: true**, I will add **join_chat: true**. Doing so will result in it looking like this:

`Â Â Â permissions:Â {`
`Â Â Â Â Â Â Â /*Â withoutÂ thisÂ basicÂ permissionsÂ regularÂ playersÂ couldÂ notÂ `
`Â Â Â Â Â Â Â tradeÂ orÂ partyÂ */`
`Â Â Â Â Â Â Â can_trade:Â true`
`Â Â Â Â Â Â Â can_party:Â true`
`Â Â Â Â Â Â Â join_chat:Â true`
`Â Â Â }`

True or False?
Now you may ask, "**Why do I need to put true? Why can't it be false?**" or something similar. Well, to put it this way, setting it to **true** allows that group to be able to do such a permission or "privilege". By setting it to **false**, that group will not be able to do that such permission.

What are my Permissions?
As mentioned before, head on over to . That is where all the permissions for your groups can be found.

`TheseÂ areÂ possibleÂ permissionsÂ ofÂ playerÂ groups,Â configuredÂ inÂ conf/groups.conf.`
`can_tradeÂ :Â AbilityÂ toÂ tradeÂ orÂ otherwiseÂ distributeÂ itemsÂ (drop,Â storage,Â vendingÂ etc)`
`can_partyÂ :Â AbilityÂ toÂ joinÂ parties.`
`all_skillÂ :Â AbilityÂ toÂ useÂ allÂ skills.`
`all_equipmentÂ :Â AbilityÂ toÂ equipÂ anythingÂ (canÂ causeÂ clientÂ errors).`
`skill_unconditionalÂ :Â AbilityÂ toÂ useÂ skillsÂ withoutÂ meetingÂ theÂ requiredÂ conditionsÂ (SP,Â items,Â etc...).`
`join_chatÂ :Â AbilityÂ toÂ joinÂ aÂ passwordÂ protectedÂ chatrooms.`
`kick_chatÂ :Â ProtectionÂ fromÂ beingÂ kickedÂ fromÂ aÂ chat.`
`hide_sessionÂ :Â HidesÂ playerÂ sessionÂ fromÂ beingÂ displayedÂ byÂ @commands.`
`who_display_aidÂ :Â AbilityÂ toÂ seeÂ GMsÂ andÂ Account/CharÂ IDsÂ inÂ theÂ @whoÂ command.`
`hack_infoÂ :Â AbilityÂ toÂ receiveÂ allÂ informationsÂ aboutÂ anyÂ playerÂ thatÂ tryÂ toÂ hack,Â spoofÂ aÂ name,Â etc.`
`any_warpÂ :Â AbilityÂ toÂ bypassÂ nowarp,Â nowarpto,Â noteleportÂ andÂ nomemoÂ mapflags.`
`Â Â Â Â Â Â Â Â Â Â ThisÂ optionÂ isÂ mainlyÂ usedÂ inÂ commandsÂ whichÂ modifyÂ aÂ character's`
`Â Â Â Â Â Â Â Â Â Â map/coordinatesÂ (likeÂ @memo,Â @mapmove,Â @go,Â @jump,Â etc...).`
`view_hpmeterÂ :Â AbilityÂ toÂ seeÂ HPÂ barÂ ofÂ everyÂ player.`
`view_equipmentÂ :Â AbilityÂ toÂ viewÂ playersÂ equipmentÂ regardlessÂ ofÂ theirÂ setting.`
`use_checkÂ :Â AbilityÂ toÂ useÂ clientÂ commandÂ /checkÂ (displayÂ characterÂ status).`
`use_changemaptypeÂ :Â AbilityÂ toÂ useÂ clientÂ commandÂ /changemaptype.`
`all_commands:Â AbilityÂ toÂ useÂ ALLÂ atcommands/charcommands.`
`receive_requests:Â AbilityÂ toÂ receiveÂ @requests.`
`show_bossmobs:Â AbilityÂ toÂ seeÂ bossÂ mobsÂ withÂ @showmobs.`
`disable_pvm:Â AbilityÂ toÂ disableÂ PlayerÂ v.s.Â Monster.`
`disable_pvp:Â AbilityÂ toÂ disableÂ PlayerÂ v.s.Â Player.`

============================================================

## Guardian

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This command is *roughly* equivalent to '[monster](/Monster "wikilink")', but is meant to be used with castle guardian monsters and will only work with them. It will set the guardian characteristics up according to the castle's investment values and set the things up that only castle guardians need.

**Since trunk :** Returns the id of the mob or 0 if an error occurred. When 'guardian index' isn't supplied it produces a temporary guardian.

Temporary guardians are not saved with the castle and can't be accessed by '[guardianinfo](/Guardianinfo "wikilink")'.

============================================================

## Guardianinfo

Syntax
**guardianinfo**("<map name>", <guardian number>, <type>);

Description
This function will return various info about the specified guardian, or -1 if it fails for some reason. It is primarily used in the castle manager NPC.

Map name and guardian number (value between 0 and 7) define the target. Type indicates what information to return:

`0Â -Â visibilityÂ (whetherÂ theÂ guardianÂ isÂ installedÂ orÂ not)`
`1Â -Â max.Â hp`
`2Â -Â currentÂ hp`

Examples
From

`mesÂ "["+`[`strnpcinfo`](/strnpcinfo "wikilink")`(1)+"]";`
`Â Â Â mesÂ "WillÂ youÂ summonÂ aÂ Guardian?Â It'llÂ beÂ aÂ protectorÂ toÂ defendÂ usÂ loyally.";`
`Â Â Â mesÂ "PleaseÂ selectÂ aÂ guardianÂ toÂ defendÂ us.";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`for`](/for "wikilink")`(Â setÂ .@i,Â 0;Â .@iÂ <=Â 7Â ;Â setÂ .@i,Â .@i+1Â )Â {`
`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`Â (.@guardiantype[.@i]Â ==Â 1)Â {Â `[`set`](/set "wikilink")`Â .@type$,"GuardianÂ Soldier";Â }`
`Â Â Â Â Â Â Â `[`else` `if`](/else_if "wikilink")`Â (.@guardiantype[.@i]Â ==Â 2)Â {Â setÂ .@type$,"GuardianÂ Archer";Â }`
`Â Â Â Â Â Â Â `[`else`](/else "wikilink")`Â {Â setÂ .@type$,"GuardianÂ Knight";Â }`
`Â Â Â Â Â Â Â ifÂ (`**`guardianinfo`**`(`[`strnpcinfo`](/strnpcinfo "wikilink")`(2),.@i,0))Â {`
`Â Â Â Â Â Â Â Â Â Â Â `[`setarray`](/setarray "wikilink")`Â .@gname$[.@i],Â .@type$Â +Â "Â -Â ImplementedÂ ("Â +Â `**`guardianinfo`**`(`[`strnpcinfo`](/strnpcinfo "wikilink")`(2),.@i,2)Â +Â "/"Â +Â `**`guardianinfo`**`(`[`strnpcinfo`](/strnpcinfo "wikilink")`(2),.@i,1)Â +Â ")";`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â elseÂ {`
`Â Â Â Â Â Â Â Â Â Â Â `[`setarray`](/setarray "wikilink")`Â .@gname$[.@i],Â .@type$Â +Â "Â -Â NotÂ Implemented";`
`Â Â Â Â Â Â Â }`
`Â Â Â }`

In this code, [strnpcinfo](/strnpcinfo "wikilink")(2) is the hidden part of the NPC's display name e.g Guardian\#*archer1*

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Guildchangegm

Syntax

Description
This function will change the Guild Master of a guild. The ID is the Guild's ID, and the new Guild Master's name must be passed.

Returns 1 on success, 0 otherwise.

Examples
Lets say, that my char's name is -Caleb-, and i'm the Guild Master of "Wikithena" with Guild ID: 1324. I'm going to transfer ownership of the guild to a guy called Akkarin. This is what we can do:

[`mes`](/mes "wikilink")`Â "HeyÂ "+`[`strcharinfo`](/strcharinfo "wikilink")`(0)+"!";`
[`set`](/set "wikilink")`Â @GID,`[`getcharid`](/getcharid "wikilink")`(2);Â '''//GetÂ theÂ IDÂ ofÂ theÂ GuildÂ you'reÂ in,Â ifÂ any`
`Â Â Â `[`if`](/if "wikilink")`(@GID==0)Â `[`goto`](/goto "wikilink")`Â L_NoGuild;`
`Â Â Â `[`if`](/if "wikilink")`(`[`strcharinfo`](/strcharinfo "wikilink")`(0)==`[`getguildmaster`](/getguildmaster "wikilink")`(@GID))Â `[`goto`](/goto "wikilink")`Â L_GuildMaster;`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ needÂ toÂ beÂ theÂ GuildÂ MasterÂ ofÂ theÂ GuildÂ youÂ wantÂ toÂ transferÂ ownershipÂ of.";`
`Â Â Â close;`
`L_GuildMaster:`
`Â Â Â `[`mes`](/mes "wikilink")`Â "SoÂ youÂ wannaÂ changeÂ ownershipÂ huh?!Â ThisÂ canÂ beÂ arrangedÂ :)";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â mesÂ "AllÂ IÂ needÂ youÂ toÂ doÂ isÂ typeÂ inÂ theÂ nameÂ ofÂ theÂ characterÂ youÂ wantÂ toÂ beÂ theÂ newÂ GuildÂ Master.";`
`Â Â Â `[`input`](/input "wikilink")`Â @newgm$;Â `**`//Here` `you` `would` `type` `the` `name` `Akkarin`**
`Â Â Â if(`[`getcharid`](/getcharid "wikilink")`(0,@newgm$)Â ==Â 0)Â gotoÂ L_NotExist;Â `**`//Check` `to` `see` `if` `"Akkarin"` `actually` `exisits`**
`Â Â Â mesÂ "Ah,Â soÂ youÂ wantÂ "+@newgm+"Â toÂ beÂ theÂ newÂ GuildÂ MasterÂ ofÂ "+`[`GetGuildName`](/GetGuildName "wikilink")`(@GID)+"?";Â `**`//Fetch` `the` `name` `of` `the` `guild` `using` `the` `Guild` `ID` `and` `getguildname().`**
`Â Â Â next;`
`Â Â Â `[`switch`](/switch "wikilink")`Â (`[`select`](/select "wikilink")`("Â -Â Yes,Â doÂ it!:Â -Â I'llÂ needÂ toÂ thinkÂ aboutÂ it.."))Â {`
`Â Â Â `[`case`](/case "wikilink")`Â 1:`
`Â Â Â Â Â Â Â if(`**`guildchangegm`**`(@GID,@newgm$))Â ==Â 1){Â '''//IfÂ commandÂ returnedÂ aÂ successÂ valueÂ (1)`
`Â Â Â Â Â Â Â Â Â Â Â mesÂ "Awesome,Â you'reÂ noÂ longerÂ in-charge!";`
`Â Â Â Â Â Â Â }Â elseÂ {`
`Â Â Â Â Â Â Â Â Â Â Â mesÂ "SomethingÂ wentÂ wrong,Â andÂ iÂ don'tÂ knowÂ whyÂ D:!";`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â `[`case`](/case "wikilink")`Â 2:`
`Â Â Â Â Â Â Â mesÂ "ComeÂ backÂ whenÂ you'veÂ madeÂ upÂ yourÂ mind!";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`L_NoGuild:`
`Â Â Â mesÂ "YouÂ needÂ toÂ beÂ inÂ aÂ guildÂ firstÂ o.O";`
`Â Â Â close;`
`L_NotExist:`
`Â Â Â mesÂ "ThatÂ characterÂ doesn'tÂ exist.Â MakeÂ sureÂ you'veÂ typedÂ theirÂ nameÂ correctly!";`
`Â Â Â close;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Guildgetexp

Syntax

Description
This will give the specified amount of guild experience points to the [guild](http://irowiki.org/wiki/Guild_System) the invoking character belongs to. It will silently fail if they do not belong to any guild.

Examples
`//Â thisÂ isÂ theÂ itemÂ scriptÂ ofÂ TribalÂ Solidarity`
[`guildgetexp`](/guildgetexp "wikilink")`Â `[`rand`](/rand "wikilink")`(600000,1200000);`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Guildopenstorage

Syntax

Description
This function works the same as '[openstorage](/openstorage "wikilink")' but will open a guild storage window instead for the guild storage of the guild the invoking character belongs to. This is a function because it returns a value - 0 if the guild storage was opened successfully and 1 if it wasn't. (Notice, it's a ZERO upon success.) Since guild storage is only accessible to one character at one time, it may fail if another character is accessing the guild storage at the same time.

This will also fail and return 2 if the character does not belong to any guild.

Example
`ifÂ (`[`guildopenstorage`](/guildopenstorage "wikilink")`()Â ==Â 1)Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "[KafraÂ Employee]";`
`Â Â Â mesÂ "I'mÂ sorryÂ butÂ anotherÂ guildÂ memberÂ isÂ usingÂ theÂ guildÂ storage";`
`Â Â Â mesÂ "rightÂ now.Â Â PleaseÂ waitÂ untilÂ thatÂ personÂ isÂ finished.";`
`Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â `[`cutin`](/cutin "wikilink")`Â "",Â 255;`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Guildskill

Syntax

Description
This command will bump up the specified guild skill by the specified number of levels. This refers to the invoking character and will only work if the invoking character is a member of a guild AND it's guild master, otherwise no failure message will be given and no error will occur, but nothing will happen - same about the guild skill trying to exceed the possible maximum. The full list of guild skills is available in (and RE equivalent), these are all the GD_ skills at the end.

The flag parameter is currently not functional and it's a mystery of what it would actually do. (Though probably, like for character skills, it would allow temporary bumping.) Using this command will bump the guild skill up permanently.

You might want to make a quest for getting a certain guild skill, make it hard enough that all the guild needs to help or something. Doing this for the Glory of the Guild skill, which allows your guild to use an emblem, is a good idea for a fun quest. (Wasting a level point on that is really annoying :D)

Examples
This would give your character's guild one level of Approval (GD_APPROVAL ID 10000). Notice that if you try to add two levels of Approval, or add Approval when the guild already has it, it will only have one level of Approval afterwards.

**`guildskill`**`Â 10000,1,0;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Hasquest

Syntax

Description
This command is part of the Questlog System and checks if the invoking character has the Quest with the selected ID or not.

Return Values
| Value | Description                           |
|-------|---------------------------------------|
| 0     | The character doesn't have the quest. |
| 1     | The character has the quest.          |

Examples
[`if`](/if "wikilink")`(`**`hasquest`**`(50000))`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Yeah!Â YouÂ haveÂ theÂ QuestÂ withÂ IDÂ 50000";`
[`else`](/else "wikilink")
`Â Â Â mesÂ "YouÂ don'tÂ haveÂ theÂ questÂ withÂ IDÂ 50000!";`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Heal

Syntax

Description
This command will heal a set amount of HP and/or SP on the invoking character.

Examples
    heal 30000,0; // This will heal 30,000 HP
    heal 0,30000; // This will heal 30,000 SP
    heal 300,300; // This will heal 300 HP and 300 SP

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Hexing

As **hexing** is considered the process of modifying raw contents of a file on byte-level with a [hex editor](/Hex_Editor "wikilink"), regardless of the actual purpose of the file (text, image or another application). Such modifications may require exact knowledge of the files' format for the modification to succeed, as opposed to a high-level editing application such as an image editor.

Creating custom RagRE client using a DIFF patcher
RagRE is the abbreviation for Ragnarok Renewal client (ragexeRE.exe), which is normally updated by Gravity weekly, to add new items or features, to fix bugs and the like. This is also the client, which is currently used for rAthena. Although it is possible to use an unmodified client with rAthena (up to 2010/08/04), it is typically modified using a DIFF patcher.

Each new client requires [Shin's Diff Patcher](http://rathena.org/board/topic/53420-shins-diff-patcher/) and the [Wee Diff Gen plugin](http://rathena.org/board/topic/53421-weediffgen/2).

### Diffing your client

#### Download your client

Download a client from [here](http://subversion.assembla.com/svn/weetools/clients/). Extract the executable from the zip file, extracting requires [7zip](http://www.7-zip.org/download.html). I recommend making a folder and naming it "RagRe Exes" and in that folder create a folder with the name being your client's date. For example if my RagRe exe was "2011-04-27aRagexeRE", I would name the folder I am extracting it to "2011-04-27a", this is just to be organized and makes your exe easy to find.

#### Diffing

Download Shin's Diff Patcher and the Wee Diff Gen plugin located above. If you did not download the Plain Diff Plugin, ignore the following sentence, as WeeDiffGenerator will be the main plugin. From the drop down menu under "Select patch engine" select "WeeDiffGenerator". For "Source Executable" click "Select" and navigate to your RagRe exe's location, then select the executable. It will ask if you want it to auto-select recommended patches, click yes. Now a list of diffs will show up, with check boxes to the left. Simply decide what diff you would like to apply to your client, and click the check box. For some diffs like "Fix camera angles" you can select more than one, but its recommended that you only select one. This may change in the future. Some diffs like "Increase Headgear View ID" will have a text box pop up prompting you to enter a value. Once you are done selecting what diffs you would like to apply, make sure the "Output executable" location is alright with you, you only need to change it if you want the output executable to be saved somewhere other than the folder of the source executable's location. Click "Patch it!" and your diffed exe will now appear in either the folder where your source executable is, or where you chose to save it.

### Follow-up modifications to diffed clients

These modifications are usually applied to already DIFFed clients for finer customization, which is not possible with a DIFF by itself.

#### Custom Window Title

Requires a client, which has been patched to allow custom window title and [HxD](http://mh-nexus.de/en/hxd/), or any other hex editor.

Steps:

1.  First, you need to know what the current *window title* is.
2.  Start your client in Windowed mode to check.
3.  After closing the client, load it inside the hex editor.
4.  When the file loads, it should look something like this:
    <center>
    [Editing a ragexeRE with HxD](/Image:Hxd-main.png "wikilink")

    </center>
5.  Press **Ctrl+F** to open the Find window and input the window title. As the window title is usually stored at the beginning of the hexed client, a partial title will do.
6.  When you find the section, it will look something like this:
    <center>
    [Current Window Title](/Image:Hxd-custtitle.png "wikilink")

    </center>
7.  Now, on the **right** side (ASCII text), start where the current Window Title starts and begin overwriting it with your NEW window title.
8.  If there are leftover words after you have typed your NEW window title, switch to the **left** side (Hexadecimal) and over-write the rest of the title with 00 (zeros).
9.  Save.

#### Custom data.ini

You can rename the [DATA.INI](/DATA.INI "wikilink") file to any name that is 8 characters long (including the extension). Then, just edit your client with a Hex Editor. Find DATA.INI and replace with your new filename.

#### Custom Font

You can rename the font to any Windows Font. Just edit your client with a Hex Editor. You must find the default font and that is Arial and replace with your Font style (i.e Comic Sans Ms) **NOTE:** capital letters is incentive.

#### Custom clientinfo.xml

You can rename the [clientinfo.xml](/clientinfo.xml "wikilink") file to any name that is 15 characters long (including the extension). Then, just edit your client with a Hex Editor. Find clientinfo.xml and replace with your new filename. Note, that for newer and non-[sakray](/sakray "wikilink") clients, this file is called clientinfo.xml.

Find-Replace Hexing
This technique is used for single features, rather than a collection of features, and is often applicable across different client versions. Such edits are distributed as a single or a set of two line edits, which specify what should be *found* and what should the found character sequence be *replaced* with, and mostly retain the length (both lines specify same amount of characters).

The character sequences are applied using a hex editor and represented by hexadecimal values of bytes, optionally each byte (two hexadecimal numbers) separated by a space. A typical find-replace hex looks like this (anti-quake patch for certain client versions[1](http://www.eathena.ws/board/index.php?showtopic=249328)):

`F:Â C390909090558BEC8B4508568BF1894604`
`R:Â C390909090C214008B4508568BF1894604`

### Application

[thumb|359px|Find and replace dialog in HxD, with a hex code ready.The](/Image:Hxd-findreplace.png "wikilink") first one is copied and pasted into hex editor find/replace window's *find* field, the latter is pasted into the *replace with* field. The search is set to be case-sensitive and then all occurrences are replaced.

The author of such **hex** may want to specify the correct amount of hits for verification. If the search does not yield any result, the hex is incompatible. The hex must **never be applied partially**, such as omitting first two bytes, as that can lead to undefined behavior.

### Variable Codes

In some instances the hex requires some variable bytes, whose value is either adjustable (replace line only) or varying among clients (both lines). This kind of *wild card* is expressed with:


Example (vending max. sell price unlocking):

`F:Â 3DF1B9F505`
`R:Â 3DXXXXXXXX`

Low-Level Hexing
Low-Level Hexing is an Ultimate Hexing Sakexe by using OllyDbg. This is Advanced technique. You need some x86 Assembly language knowledge for using this technique in order to discern the runtime order of the EXE you're looking at. The more Assembly you know, the better, as you'll be more adept at seeing what is going on.

It's necessarily quite apt to point out that in more recent times, the EXEs Gravity has put out have made things a little harder. As an example, a recent EXE, 2012-10-17bRagexeRE includes [Themida](http://anonym.to/?http://www.oreans.com/themida.php) protection, which includes anti-debugger measures. Fortunately, these anti-debugging measures aren't wholly preventative, but still provide an additional challenge; StrongOD and Phant0m allow for skipping of the anti-debug challenge, however, the other features of Themida mean that someone without experience in assembly language would be incredibly confused about the output.

### Programs needed


### Loading the Sakexe

Run *OLLYDBG.EXE* and select menu File &gt; Open. Then choose the Sakexe you want to Hex. If your Sakexe needs some parameters to launch (ex: 1sak1). Enter that parameter in *Arguments* field. Then press Open Button.

### Finding WinMain function

WinMain is an entry point in Windows GUI (**G**raphical **U**ser **I**nterface) applications, that is, where an application's code starts executing. This applies to the Ragnarok client as well, thus it is important to know it's location. Different compilers produce different WinMain locations.

**Note:** If you have the Windows platform SDK installed, scan the import libraries first to resolve names of a lot of common functions, such as WinMain, before hexing. This will make things easier, because you do not have to deal with plain addresses. To scan the libraries, press **Ctrl+O**, browse for the \*.lib files, and then click scan. Analyze (Ctrl+A) the client afterwards, to apply the scan results.

#### 2010-08-10aRagexeRE and older (Visual C++ 6.0)

All clients before 2010-08-18aRagexeRE (this includes all Sakexe clients) are compiled with Visual C++ 6.0 and their WinMain can be found as a CALL after the first CALL to GetModuleHandle. You can find it by a scroll down 10 - 20 lines from current position after loading Sakexe.

`PUSHÂ Â Â Â ESI`
`CALLÂ Â Â Â DWORDÂ PTRÂ DS:[<&KERNEL32.GetModuleHandleA>]`
`PUSHÂ Â Â Â EAX`
`CALLÂ Â Â Â Private.00694780Â <---Â ThisÂ isÂ WinMainÂ call.`
`MOVÂ Â Â Â Â [LOCAL.24],EAX`
`PUSHÂ Â Â Â EAX`

Pressing Enter when **CALL Private.00694780** is highlighted, will make you to go to the WinMain function.

#### 2010-08-18aRagexeRE and newer (Visual C++ 9.0)

Newer clients are compiled with Visual C++ 9.0, which is part of Visual Studio 2008. The structure of the entry point is completely different and more complex than the one of the older clients. After loading the client, the position is set to a CALL which is followed by a JMP.

`CALLÂ Â Â Â Private.0074763E`
`JMPÂ Â Â Â Â Private.00746D24`

The CALL is not important, as it only contains compiler specific stuff. Selecting the JMP and pressing Enter will make you go the code position, where WinMain is located. Scroll down, until you find a PUSH 400000, which is an equivalent to the GetModuleHandle call in older clients. The CALL after it is the WinMain function.

`JMPÂ Â Â Â Â SHORTÂ Private.00746E56`
`PUSHÂ Â Â Â 0A`
`POPÂ Â Â Â Â EAX`
`PUSHÂ Â Â Â EAX`
`PUSHÂ Â Â Â ESI`
`PUSHÂ Â Â Â 0`
`PUSHÂ Â Â Â 400000`
`CALLÂ Â Â Â Private.00745790Â <---Â ThisÂ isÂ WinMainÂ call.`
`MOVÂ Â Â Â Â DWORDÂ PTRÂ DS:[8AE16C],EAX`
`CMPÂ Â Â Â Â DWORDÂ PTRÂ DS:[8AE160],0`

Pressing Enter when **CALL Private.00745790** is highlighted, will make you to go to the WinMain function.

### Disable some instructions with NOP Instruction

We can disable some instruction with NOP Instruction. By Right Click on the lines you want to replace by NOP. Then, Select *Binary &gt; Fill with NOPs*. You can also replace more one line in once *Fill with NOPs*.

### Changing instruction to other instruction

We can change an instruction to other instruction by pressing *Space Bar*. With the power of *Space bar*. We can completely make modifications to our Sakexe. Such as changing *jxx* to *jmp*.

### Save our changes to Sakexe

All changes in OllyDbg is not affected on our Sakexe until we save these changes. You can *Right Click* on anywhere in CPU Window. Then select *Copy to executable &gt; All modifications*. Dialog *Copy selection to executable file* will appear. Press *Copy all* and other window will appear. Right Click on anywhere in this window and select *Save file* and *Save file as* dialog will appear. Type desired file name and press *Save* Button. You can overwrite original file. OllyDbg will automatically backup our original Sakexe if we choose overwrite original file.

See Also

External Links

[Category:Client Configuration](/Category:Client_Configuration "wikilink")

============================================================

## Hex_Editor

[thumb|Typical hex editor: HxD](/Image:Hxd-main.png "wikilink")

A what?
A **hex editor** (or *binary file editor* or *byte editor*) is a type of computer program that allows a user to manipulate the fundamental binary (0 / 1, zero / one) data that makes up computer files. Note that computer files can be very small (just a name, with no content) to very large (content spanning multiple hard disks). A typical computer file occupies multiple areas on the platter(s) of a disk drive, whose contents are put together to form the file. For more details see the [related Wikipedia article](/wikipedia:Hex_editor "wikilink").

Applications
XVI32
One of the best Hex Editors, and probably the most user friendly is [<http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm> XVI32](/http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm_XVI32 "wikilink"). The name XVI32 is derived from XVI, the roman notation for the number 16.

Other Editors
A fairly comprehensive comparison chart can be found on [wikipedia:Comparison_of_hex_editors wikipedia](/wikipedia:Comparison_of_hex_editors_wikipedia "wikilink")

Common RO Related Uses
The most common uses for a hex editor are:
\* Changing [DATA.INI](/DATA.INI "wikilink") to something else


External Links
<http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm>
<http://en.wikipedia.org/wiki/Comparison_of_hex_editors>

[Category:Tools](/Category:Tools "wikilink")

============================================================

## History_of_Ragnarok_Emulation

[<File:1550.gif>](/File:1550.gif "wikilink")Â A book documenting the history of rAthena. There's a whole chapter dedicated to rAthena Users.

About
This article is a duplicate copy ofÂ [Ragnarok Online - rAthena: Another Dimension](http://rathena.org/board/topic/91277-ragnarok-online-rathena-another-dimension/), but this article contains the game updates from kRO and the corresponding rAthena updates. Our goals are to inform users about the kRO/rAthena updates and close the gap between rAthena and official servers.

Updates
ALPHA
`ReleaseÂ Date:Â AugustÂ 31,Â 2002`
`PatchÂ File:Â `
`Client:Â RagnarokÂ AlphaÂ `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â NotÂ Implemented`
`rAthenaÂ Status:Â NotÂ Implemented`

Patch Info:

Prontera village, Morocc village, alpha culvert and some other dungeons. Novice + basic classes, except magician which was never implemented. All maps from alpha were scrapped.

BETA
`ReleaseÂ Date:Â Â Â `
`PatchÂ File:Â `
`Client:Â RagnarokÂ BetaÂ `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â NotÂ ImplementedÂ `
`rAthenaÂ Status:Â NotÂ Implemented`

Patch Info: Prontera, Alberta, old Payon + Archer's village, Izlude + Byalan dungeon, Geffen + Geffen dungeon, Prontera Maze/Hidden temple, Mt. Mjolnir and Coal Mine dungeon, Orc Dungeon, Morocc + Pyramid and Sphinx dungeons. Magician class added.

BETA 2
`ReleaseÂ Date:Â Â Â `
`PatchÂ File:Â `
`Client:Â RagnarokÂ BetaÂ 2Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â NotÂ ImplementedÂ `
`rAthenaÂ Status:Â NotÂ ImplementedÂ `

Patch Info: Aldebaran and Clock Tower, Glast Heim, Ant Hell, Novice Grounds. Lutie was added for the Christmas event at the end of the beta. Obviously also a lot of game play changes, for instance cards were implemented in this version as well as 2-1 classes and PvP rooms.

Â 

Episode 1.0 : Start of the Adventure
`ReleaseÂ Date:Â 2002.08.03`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â ImplementedÂ `
`rAthenaÂ Status:Â ImplementedÂ `

Patch Info: -

Â 

Episode 2.0 : Lutie
`ReleaseÂ Date:Â 2002.12.17`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Implemented`
`rAthenaÂ Status:Â Implemented`

Patch Info: -

Â 

Episode 3.0 : Comodo
`ReleaseÂ Date:Â 2003.02.04`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â ImplementedÂ `
`rAthenaÂ Status:Â ImplementedÂ `

Patch Info: -

Â 

Episode 4.0 : War of Emperium
`ReleaseÂ Date:Â 2003.05.02`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â ImplementedÂ `
`rAthenaÂ Status:Â ImplementedÂ `

Patch Info: -

Episode 5.0 : Yuno
`ReleaseÂ Date:Â 2003.07.15`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â ImplementedÂ `
`rAthenaÂ Status:Â ImplementedÂ `

Patch Info: -

Episode 6.0 : Global Project
`ReleaseÂ Date:Â Â Â 2003.05.02`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â ImplementedÂ `
`rAthenaÂ Status:Â ImplementedÂ `

Patch Info: -

Sub Patches:

1.  2003.10.11 : Amatsu
2.  2003.10.11 : Kunlun / Gonryun
3.  2003.11.25 : Weddings/Marriage
4.  2004.01.13 : Super Novice

Episode 7.0 : Umbala ~ Village of the Utan Tribe
`ReleaseÂ Date:Â Â Â 2004.01.30`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â ImplementedÂ `
`rAthenaÂ Status:Â ImplementedÂ `

Patch Info: -

Sub Patches:

1.  2004.02.02 : 2-1 and 2-2 class in Sakray

Episode 8
### Episode 8.1.1 : Niflheim ~ City of the Dead

`ReleaseÂ Date:Â Â Â 2004.02.24`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â ImplementedÂ `
`rAthenaÂ Status:Â ImplementedÂ `

Patch Info: -

### Episode 8.1.2 : Louyang & Jawaii

`ReleaseÂ Date:Â Â Â 2004.#.#`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

### Episode 8.2 : Ayothaya

`ReleaseÂ Date:Â Â Â 2004.#.#`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

Episode 9.0 : Rebirth
`ReleaseÂ Date:Â Â Â 2004.04.19`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

Episode 10
### Episode 10.1 : Einbroch

`ReleaseÂ Date:Â Â Â 2005.#.#`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

### Episode 10.2 : Lighthalzen

`ReleaseÂ Date:Â Â Â 2005.#.#`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

### Episode 10.3 : Noghalt

`ReleaseÂ Date:Â Â Â 2005.#.#`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

### Episode 10.4 : Hugel

`ReleaseÂ Date:Â Â Â 2005.#.#`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

Episode 11
### Episode 11.1 : Rachel

`ReleaseÂ Date:Â Â Â 200#.#.#`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

### Episode 11.2 : Veins

`ReleaseÂ Date:Â Â Â 200#.#.#`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

### Episode 11.3 : Nameless Islandâ€‹

`ReleaseÂ Date:Â Â Â 2007.04.10`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â ImplementedÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

SubÂ Patches:

1.  2007.04.10 : Mercenary System

Episode 12 : Satan Morrocâ€‹
`ReleaseÂ Date:Â Â Â 2007.10.17`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â Â Â Implemented`

Patch <Info:->

Sub Patches:

1.  2007.10.17 : Moscovia
2.  2007.11.21 : WoE: SE (Schwaltzvald)
3.  2007.11.21 : WoE: SE (Arunafeltz)
4.  2007.12.05 : World Map System
5.  2007.12.10 : Battlegrounds
6.  2007.12.12 : Endless Tower & Sealed Shrine

Episode 13
### Episode 13.1 : Ash Vacuum

`ReleaseÂ Date:Â Â Â 2008.06.25`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

Sub Patches:

1.  2008.08.25 : Poring Wars
2.  2008.11.19 : Improved Pet System

Â 

### Episode 13.2 : Encounterâ€‹

`ReleaseÂ Date:Â Â Â 2008.12.17`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

Sub Patches:

1.  2008.12.23 : New Pets
2.  2009.02.25 : Hidden Slot Enchantment
3.  2009.03.11 : Endless Tower Fixes
4.  2009.04.08 : New Hairstyles
5.  2009.06.17 : Renewal Release (3-1 Jobs)
6.  2009.08.19 : Brasilis
7.  2009.10.14 : 3-2 Jobs

Â Â 

### Episode 13.3 : El Dicastesâ€‹

`ReleaseÂ Date:Â Â Â 2009.12.23`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â Â Â ImplementedÂ `

Patch Info: -

Sub Patches:

1.  2010.03.17 : Party Recruiting System
2.  2010.03.31 : Baby 3rd Jobs
3.  2010.05.12 :

Â 

Episode 14
### Episode 14.1 : Bifrost

`ReleaseÂ Date:Â Â Â 2010.06.30`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â PartiallyÂ ImplementedÂ `

Patch Info: - Sub Patches: Â 

#### Memorial Dungeon, Misty Labyrinth Forest

1.  2010.07.28 : Equipment Synthesis, Costume System
2.  2010.08.18 : Search Vending Shops
3.  2010.09.29 : Indonesia Localized Map, Dewata
4.  2010.11.24 :â€‹

5.  2010.12.29 : Super Novice Expansion
6.  2011.03.09 : Replay System
7.  2011.03.30 : Biolabs 4th Floor
8.  2011.05.25 : Thanatos Tower Changes.
9.  2011.06.29 : (WoE1 Renewal)â€‹

10. 2011.08.17 : 7x7 Padding around NPCs.
11. 2011.08.31 : (Class Balance + Homunculus S)

12. 2011.09.28 : Philippines localized map, Port Malaya
13. 2011.11.02 : Kagero and Oboro Job Classes
14. 2011.11.16 : New Alberta.
15. 2011.11.30 : Eden Quests for levels 100~110.
16. 2011.12.07 : Nightmare mode for Pyramid Dungeon.
17. 2011.12.14 : Party System improvements

Â  Â 

### Episode 14.2 : Eclage

`ReleaseÂ Date:Â Â Â 2011.12.21`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â PartiallyÂ ImplementedÂ `

Patch Info: Sub Patches:

1.  2011.12.27 : Battlegrounds Queue System
2.  2012.02.08 : New Carts for Mechanics & Genetics.
3.  2012.02.08 : Guild Creation system to no longer allow blank space(s) in the name.
4.  2012.03.21 : Eden Quests for Level 111 ~ 120.
5.  2012.03.21 : Falcon Flute
6.  2012.03.28 : Navigation System.
7.  2012.03.28 : New Izlude + Novice Training Academy + New Character Creation Method (5 copies of Izlude)
8.  2012.04.04 : HP Bars added to Monsters.
9.  2012.04.18 : Changes to Enchanting on Malangdo
10. 2012.04.25 : WoE: Training EditionÂ 
11. 2012.04.25 : Transcendent quest to waive the cost of transcending.
12. 2012.05.30 : Old Glastheim memorial dungeon
13. 2012.06.13 : Monster Shadow Size
14. 2012.07.11 : Headgear Synthesis QuestsÂ 
15. 2012.07.25 : WoE:TE Mini God Item quest + guild and daily quests in siege areas.
16. 2012.08.14 : Job EXP increased from Monsters with lvl 100+.
17. 2012.08.22 : Heroes' Trails (Part 1)â€‹Â 

18. 2012.08.22 :â€‹

19. 2012.09.19 : Champion Mobs.
20. 2012.10.10 : Ranger Falcon changed to Owl
21. 2012.10.17 : Heroes' Trails (Part 2)â€‹

22. 2012.10.31 : Eden Quests for levels 131~140
23. 2012.12.18 : Horror Toy Factory Memorial Dungeon
24. 2012.12.18 : Shadow System

Â Â 

### Episode 14.3 : Decisive Battle (Part 1)

`ReleaseÂ Date:Â Â Â 2012.12.28`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â Â Â PartiallyÂ ImplementedÂ `

Patch Info: -

Sub Patches:

1.  2013.02.20 : Equipment Comparison System
2.  2013.03.13 : 'Clock Tower Dungeon' Nightmare Mode

### Episode 14.3 : Decisive Battle (Part 2)

`ReleaseÂ Date:Â Â Â 2013.03.20`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â Â Â PartiallyÂ ImplementedÂ `

Patch Info: -

Sub Patches:

1.  2013.03.20 : Level Increased to 175 / 60.
2.  2013.03.20 : New Third Class Skills
3.  2013.05.22 : Max Zeny Vending Price = 1 Billion Zeny.
4.  2013.06.12 : Bank System
5.  2013.06.26 : Clan System (Golden mace Guild, Sword Guild, Crossbow Guild and Rod Guild)

Â 

Episode 15
### Episode 15.1 : Fantasmagorica

`ReleaseÂ Date:Â Â Â 2013.07.03`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â Â Â PartiallyÂ ImplementedÂ `

Patch Info: -

Sub Patches:

\#\*Lots of NPC placement changes.

\#\*5 New Quests

\#\*Memorial Dungeon, Charleston Factory

\#\*New Items

1.  2013.07.31 : Rebellion Class
2.  2013.08.02 : Rebellion Weapons
3.  2013.08.14 : New Clothing Dyes for Kagerou & Oboro classes.
4.  2013.08.21 : Max HP Limits (lvl 99 = 330k, 150 = 660k, 175 = 1.1m)
5.  2013.09.25 : Heroes' Trail Part (Part 3)â€‹â€‹â€‹

#### Fenrir and Airship Assault Memorial Dungeons

1.  2013.12.17 : Nightmare Biolabs

Â Â 

### Episode 15.2 Memory Record

`ReleaseÂ Date:Â Â Â 2013.12.2`
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Â Â NowÂ CheckingÂ `
`rAthenaÂ Status:Â NotÂ ImplementedÂ `

Patch Info: -

Misc Updates
Urdr
### Urdr \*(PK) Game Server

`ReleaseÂ Date:Â Â Â `
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â Implemented`
`rAthenaÂ Status:Â Implemented`

Patch Info: PK \*(Player Kill) Server, Governing by certain rules

RWC
### kRO RWC 2013

`ReleaseÂ Date:Â Â Â `
`PatchÂ File:Â `
`Client:Â `
`Ragexe:Â `
`Ragexe_RE:Â `
`DownloadÂ Link:Â `
`eAthenaÂ Status:Â NotÂ Implemented`
`rAthenaÂ Status:Â NotÂ Implemented`

Patch Info: This Client is exclusively distributed by kRO to All RO Official Servers. This Client can't be downloaded by public and can ONLY BE USED IN RWC \*(Ragnarok World Championships) Tournaments. It has different ragexe. Its clientinfo.xml has different IP Address Structure \*(Only Ragnarok Online Officials set a particular IP Address for this Client.) The Official Rules of Engagement usually change every year.

Credits

[Category:rAthena](/Category:rAthena "wikilink")

============================================================

## Home

# Welcome to rAthena

rAthena is an [open-source](http://en.wikipedia.org/wiki/Open_source) project, emulating a [Ragnarok Online](http://en.wikipedia.org/wiki/Ragnarok_Online) [Server](http://en.wikipedia.org/wiki/Server). It is written in programming language C and is version controlled via Git.

rAthena runs on most common [Operating Systems](http://en.wikipedia.org/wiki/Operating_system). For a full list, please see the [System Requirements](System-Requirements).

[Help & Support](http://rathena.org/board/forum/3-support-releases/) 

## Getting Started
* [Installation](installations) instructions
* [Transitioning from SVN to GIT](http://rathena.org/board/topic/87120-transitioning-from-svn-to-git/)
* [Compiling](compiling) on your OS
* [Connecting](connecting) & Starting rAthena

## Configure your Server
* [Scripting](scripting) like a pro!
* Server [Modifications](Server_Modifications) and what to expect
* [Database configuration](Ddatabase-Configuration)
* [Customize](customizing) your server!

## Setup the Client
* [Data folder](Data-Folder)
* [Spriting](spriting), pixel by pixel
* [Mapping](mapping) tutorials
* [Client Configs](diff) make you original
* [Patchers](patchers) keep you up-to date!

============================================================

## Hommutate

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will try to mutate the invoking player's Homunculus into a Homunculus S. The Strange Embryo (ID 6415) is deleted upon success.

The command will fail if the invoking player does not have an evolved Homunculus at level 99 or above, if it is not in the embryo state (from the 'morphembryo' command), or if the invoking player does not possess a Strange Embryo. The /swt emotion is shown upon failure.

If the optional parameter <ID> is set, the invoking player's Homunculus will change into the specified Homunculus ID. Otherwise, a random Homunculus S will be chosen. See 'db/homunculus_db.txt' for a full list of IDs.

Returns 1 upon success and 0 for all failures.

Example
Here is a sample script which might be a help to you:

[`set`](/set "wikilink")`Â .@h,Â `[`select`](/select "wikilink")`("Eira:Bayeri:Sera:Dieter:Elanor");`
[`if`](/if "wikilink")`Â (.@h)Â {`
`Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "IÂ willÂ mutateÂ nowÂ yourÂ .@h";`
`Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â `**`hommutate`**`Â 6047+.@i;`
`}`
`Â Â Â Â Â `[`else`](/else "wikilink")`Â `**`hommutate`**`;`
`Â Â Â Â Â `[`close`](/close "wikilink")`;`

============================================================

## If

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This is the basic conditional statement command, and just about the only one available in this scripting language.

The condition can be any expression. All expressions resulting in a non-zero value will be considered True, including negative values. All expressions resulting in a zero are false.

If the expression results in True, the statement will be executed. If it isn't true, nothing happens and we move on to the next line of the script.

`Â Â Â ifÂ (1)Â Â mesÂ "ThisÂ willÂ alwaysÂ print.";`
`Â Â Â ifÂ (0)Â Â mesÂ "AndÂ thisÂ willÂ neverÂ print.";`
`Â Â Â ifÂ (5)Â Â mesÂ "ThisÂ willÂ alsoÂ alwaysÂ print.";`
`Â Â Â ifÂ (-1)Â mesÂ "FunnyÂ asÂ itÂ is,Â thisÂ willÂ alsoÂ printÂ justÂ fine.";`

For more information on conditional operators see the operators section above. Anything that is returned by a function can be used in a condition check without bothering to store it in a specific variable:

`Â Â Â ifÂ (strcharinfo(0)Â ==Â "DanielÂ Jackson")Â mesÂ "ItÂ isÂ true,Â youÂ areÂ Daniel!";`

With the Advanced scripting engine, we got nested if's. That is:

    if (<condition>)
        dothis;
    else
        dothat;

If the condition doesn't meet, it'll do the action following the else. We can also group several actions depending on a condition, the following way:

    if (<condition) {
        dothis1;
        dothis2;
        dothis3;
    } else {
        dothat1;
        dothat2;
        dothat3;
        dothat4;
    }

Remember that if you plan to do several actions upon the condition being false, and you forget to use the curlies (the { } ), the second action will be executed regardless the output of the condition, unless of course, you stop the execution of the script if the condition is true (that is, in the first grouping using a return; , and end; or a close; )

Also, you can have multiple conditions nested or chained, and don't worry about limits as to how many nested if you can have, there is no spoon ;)

    if (<condition 1>)
        dothis;
    else if (<condition 2>){
        dotheother;
        do that;
        end;
    } else
        do this;

Examples
        set .@var1,1;
        input .@var2;
        if(.@var1 == .@var2)
           close;
        mes "Sorry that is wrong";
        close;

        input .@var2;
        if(.@var2 != 1) mes "Sorry that is wrong";
        close;

Notice examples 1 and 2 have the same effect.

        mes "[Quest Person]";
        if(countitem(512) >= 1) {
           mes "Oh an apple, I didn't want it, I just wanted to see one";
           close;
        }
        // The number 512 was found from item_db, it is the item number for the Apple.
        mes "Can you please bring me an apple?";
        close;

        mes "[Multi Checker]";
        if(queststarted == 1 && countitem(512) >= 5) {
           // This will only be done if the quest has been started AND you have 5 apples with you
           mes "[Multi Checker]";
           mes "Well done you have started the quest of got me 5 apples";
           mes "Thank you";
           set queststarted,0;
           delitem 512,5;
           close;
        }
        mes "Please get me 5 apples";
        set queststarted,1;
        close;

        set .@var1,.@var1+1;
        mes "[Forgetful Man]";
        if (.@var == 1) mes "This is the first time you have talked to me.";
        if (.@var == 2) mes "This is the second time you have talked to me.";
        if (.@var == 3) mes "This is the third time you have talked to me.";
        if (.@var == 4) {
           mes "This is the forth time you have talked to me, but I think I am getting amnesia, I have forgotten about you.";
           set .@var,0;
        }
        close;

If you plan to something like this, better look at the '[switch](/switch "wikilink")' command.

        mes "[Person Checker]";
        if($name$ != null && $name$ == strcharinfo(0)) {
           mes "[Person Checker]";
           mes "You are the person that " +$name2$+ " just mentioned";
           mes "nice to meet you";
        } else if($name$ != null){
           mes "[Person Checker]";
           mes "You are not the person that " +$name2$+ " mentioned";
        } else {
           mes "Please tell me someones name";
           next;
           input $name$;
           set $name2$,strcharinfo(0);
           mes "[Person Checker]";
           mes "Thank you";
        }
        set $name$,null;
        set $name2$,null;
        close;

See '[strcharinfo](/strcharinfo "wikilink")' for explanation of what this function does.

============================================================

## Implode

Syntax

Description
Combines all substrings within the specified string array into a single string. If the glue parameter is specified, it will be inserted in between each substring.

Examples
[`setarray`](/setarray "wikilink")`Â .@my_array$[0],Â "This",Â "is",Â "a",Â "test";`
[`implode`](/implode "wikilink")`(.@my_array$,Â "Â ");Â //returnsÂ "ThisÂ isÂ aÂ test"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Import_folder

What is import folder?
The import folder is a way to input your settings into the emulator without changing any of the original settings that provide by emulator. As this directory is not overwritten when you perform an update for you local copy, you can keep all of your settings without worrying about conflicts.

Import folder available for for server configuration and for database files. The server will reads the original files first on and then the import files will be read after that. So, we recommended to place every your custom values on those import files.

Since import is implemented for files, *item_db2.txt*, *mob_db2.txt*, and *pet_db2.txt* are moved to .

Import for configuration files
Import for database files
[Category:Configuration](/Category:Configuration "wikilink")

============================================================

## Initnpctimer

Syntax

Description
This script command will begin an NPC-attached timer on the running or specified NPC. The timer will run internally in the NPC and is not attached to any player, so will continue to run even when there are no players logged on. It is important to note that an NPC can only run a single timer on itself at any given time. In order to process multiple timers, the script would have to use player based timers such as [addtimer](/addtimer "wikilink").

The timer runs in milliseconds (1/1000th of a second) from 0, and calling this script command will begin a new timer (if a timer is not already running on the NPC) or reset the current timer on the NPC. To completely stop the NPC timer, the script command [stopnpctimer](/stopnpctimer "wikilink") must be called, and to resume the timer (without resetting the current tick) the script command [startnpctimer](/startnpctimer "wikilink") must be called.

The script can access a timer event by creating a label matching the format "OnTimer<tick>:" where the <tick> is replaced with a millisecond value to occur on. The NPC timer does not reset automatically once reaching one of these labels, therefore it is possible to multiple labels with incremented <tick> values to handle the same NPC timer (see [Examples](/#Examples "wikilink")).

Parameters
### Attach Flag

The flag value determines whether a player should be directly associated with this NPC timer. When flag is specified (a value of 1) the script will attach the player who is currently attached to the script, to the timer. If no player is attached to the script when this flag is specified, then the [initnpctimer](/initnpctimer "wikilink") call will fail.

If a player is successfully attached to the NPC timer, and logs out of the game, then the event label "OnTimerQuit:" will run on the NPC (the player will still be logged in at this point) to allow cleaning up and handling of the timer.

### NPC Name

If specified, the call to [initnpctimer](/initnpctimer "wikilink") will not apply to the current running script but will take effect on the NPC which exists with the passed NPC name. If an NPC could not be found with this name then the [initnpctimer](/initnpctimer "wikilink") call will fail.

Examples

`Â Â Â Â initnpctimer;`
`Â Â Â Â end;`
[`OnTimer`](/OnTimer "wikilink")`1000:`
`Â Â Â Â `[`announce`](/announce "wikilink")`Â "1Â secondÂ hasÂ passed!",Â bc_all|bc_npc;`
`Â Â Â Â initnpctimer;`
`Â Â Â Â `[`end`](/end "wikilink")`;`


`Â Â Â Â initnpctimer;`
`Â Â Â Â end;`
[`OnTimer`](/OnTimer "wikilink")`5000:`
`Â Â Â Â `[`announce`](/announce "wikilink")`Â "5Â secondsÂ haveÂ passed!",Â bc_all|bc_npc;`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`Â OnTimer10000:`
`Â Â Â Â announceÂ "10Â secondsÂ haveÂ passed!!",Â bc_all|bc_npc;`
`Â Â Â Â `[`stopnpctimer`](/stopnpctimer "wikilink")`;`
`Â Â Â Â end;`


`Â Â Â Â initnpctimerÂ 1;`
`Â Â Â Â end;`
[`OnTimer`](/OnTimer "wikilink")`60000:`
`Â Â Â Â `[`percentheal`](/percentheal "wikilink")`Â 10,Â 0;`
`Â Â Â Â `[`message`](/message "wikilink")`Â `[`strcharinfo`](/strcharinfo "wikilink")`(0),Â "YouÂ wereÂ healedÂ 10%Â HP!";`
`Â Â Â Â initnpctimerÂ 1;`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`OnTimerQuit:`
`Â Â Â Â `[`stopnpctimer`](/stopnpctimer "wikilink")`;`
`Â Â Â Â `[`end`](/end "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Input

Syntax

Description
This command will make an input box pop up on the client connected to the [invoking character](/RID#Usage "wikilink"), to allow entering of a string or digits only, depending on variable's type.

Normally you cannot input a negative number with this command, to prevent exploits in badly written scripts, which would let people, for example, put negative amounts of [Zeny](/Zeny "wikilink") into a bank script and receive free Zeny as result. The default values for *min value* and *max value* are specified as *input_min_value* and *input_max_value* respectively in **conf/script_athena.conf**.

Since r12192 (Trunk) and r12302 (Stable) the command has two additional optional arguments and a return value to safely override this behavior, when required. Depending on used variable type the min and max values, and the return value have different meaning:


Examples
[`mes`](/mes "wikilink")`Â "[Woman]";`
`mesÂ "TryÂ andÂ guessÂ theÂ numberÂ IÂ amÂ thinkingÂ of.";`
`mesÂ "TheÂ numberÂ willÂ beÂ betweenÂ 1Â andÂ 10.";`
[`next`](/next "wikilink")`;`
[`set`](/set "wikilink")`Â .@number,Â `[`rand`](/rand "wikilink")`(1,Â 10);`
[`while`](/while "wikilink")`(input(.@guess,Â 1,Â 10))`
`{`
`Â Â Â Â mesÂ "[Woman]";`
`Â Â Â Â mesÂ "Didn'tÂ youÂ listenÂ before?Â TheÂ numberÂ isÂ betweenÂ 1Â andÂ 10.";`
`Â Â Â Â next;`
`}`
`mesÂ "[Woman]";`
[`if`](/if "wikilink")`(.@guess==.@number)`
`{`
`Â Â Â Â mesÂ "WellÂ done,Â thatÂ wasÂ theÂ numberÂ IÂ wasÂ thinkingÂ of.";`
`}`
`else`
`{`
`Â Â Â Â mesÂ "Sorry,Â thatÂ wasn'tÂ theÂ numberÂ IÂ wasÂ thinkingÂ of.";`
`}`
[`close`](/close "wikilink")`;`

`mesÂ "[Man]";`
`mesÂ "YouÂ needÂ aÂ passwordÂ toÂ pass.";`
`next;`
`inputÂ .@pwd$;`
`if(.@pwd$!="s3cr3t")`
`{`
`Â Â Â Â mesÂ "[Man]";`
`Â Â Â Â mesÂ "GetÂ out.";`
`Â Â Â Â close;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Install-MySQL

Introduction
This article will guide you through the installation and configuration stages of MySQL for your particular Operating System. What is a MySQL database? [MySQL](/wikipedia:MySQL "wikilink") is a multi-user access database that stores a number of different kinds of information in scaleable tables. In layman's terms, it puts a bunch of stuff in charts for your server to read. rAthena no longer supports text based save files (for Accounts, Characters, etc.) and requires a MySQL database to create these save files.

Windows
This guide will instruct you on installing MySQL on Windows Vista/7, although it should work relatively the same with Windows XP. This guide also assumes you have already [installed your rAthena server](/Installation_on_Windows "wikilink").
**<big>Uninstallation Note</big>**
Before continuing, it is important to note that if you make an error and decide to start again by uninstalling the MySQL database and software, that you make sure you do a *thorough* uninstallation, and then reboot Windows before trying again. A couple tips to make sure your uninstallation is thorough:


`C:\Users\`<YOUR_USER_NAME>`\AppData\Roaming\MySQLÂ `


and:

`C:\ProgramData\MySQL`


Just delete the whole folder.



Delete the whole MySQL folder.


### Download

To install MySQL Server you will first need to download the package corresponding to your version of Windows. [MySQL Community Server](http://dev.mysql.com/downloads/mysql/) is available for free and is exactly what is needed. Version 5.5 currently works well with rAthena and is recommended. **ENSURE** that you download the appropriate bit version (32 or 64) for your system, if you do not, you will receive errors during the execution wizard. This software installs the server on your computer that stores the data files and tables. Although alone, without prior knowledge of MySQL it is very difficult to operate and configure your servers data. That is why you will need MySQL Workbench.
[MySQL Workbench](http://dev.mysql.com/downloads/workbench/5.2.html) is a tool for viewing your MySQL database in a GUI environment. As said, it is not required but very beneficial; in addition, it is required by this guide. To be able to install and run MySQL Workbench 5.2 your System also needs to have the libraries listed below installed. The listed items are provided as links to the corresponding download pages where you can fetch the necessary files.

[Microsoft .NET Framework 4 Client Profile](http://www.microsoft.com/download/en/details.aspx?id=17113)
[Microsoft Visual C++ 2010 Redistributable Package (x86)](http://www.microsoft.com/download/en/details.aspx?id=5555)

### Configure rAthena Files

Before you begin with your MySQL installation, you need to setup your server conf files to be ready for the database you are about to install. I choose to do this in advance, because it allows you to have the usernames and passwords ready for use so you don't have to go back and set them, and you can just run your server afterwards with everything all ready.


`userid:Â s1`
`passwd:Â p1`

Change these to whatever you want, but something secure. For this guide we will use "FishUser" and "FishPassword"

`userid:Â FishUser`
`passwd:Â FishPassword`

Make sure these are the same in both map_athena and char_athena otherwise you will have errors.


### Install MySQL

First, you will need to install the MySQL server where all the data will be stored. After downloading the [MySQL Community Server](http://dev.mysql.com/downloads/mysql/), run the installer and use the following steps (*for this installation version 5.5.28 was used*).

1.  Click next and accept the license agreement.
2.  Click "Typical" for Setup Type; then click "Install" (you may have to allow UAC control from windows).
3.  Click "Next" when the MySQL Enterprise tool pops up, this is a simple advertisement.
4.  After installation is finished the completion screen with a "Finish" button will show, make sure you have "Launch the MySQL Instance Configuration Wizard" **CHECKED**! The configuration wizard will allow you to setup the server to accept the kind of data you want and by setting it up now you will most likely never have to configure it again.
5.  Click "Next" at the first screen, and then click "[Standard Configuration](http://i.imgur.com/YlMPbm8.png)" and hit "Next".
6.  Check both "Install As Windows Service" and "Include Bin Directory in Windows PATH" for the Service Name, name it "*MySQL5*" and ensure "Launch the MySQL Server Automatically is **CHECKED**. ([Image](http://i.imgur.com/onQiIsh.png))
7.  On the next screen, you will need to select the root password. This password is very important as you will **never be able to retrieve it** so make sure you write it down somewhere safe. The "root" access to your MySQL database can pretty much do anything to your data, so make sure you keep this information safe. If you want to enable root access from a remote machine, check the included box. You probably won't need to enable that unless you know what you're doing. Keep the password you selected available for now.
8.  On the next screen just click "Execute" to run the configuration unless you want to go back and change something.
9.  Once it is finished, hit "Finish" to close the wizard. It will report if there are any errors (there shouldn't be).

### MySQL Workbench

Next it is time to install the MySQL Workbench application. This application will allow you to edit your database and prepare it for eAthena, as well as perform maintenance in the future.

1.  Run the MySQL Workbench installer and click "Next" on the first screen.
2.  Choose your installation directory. The default directory should be fine. Click "Next" to proceed.
3.  Select "Complete" and click "Next", and then install, granting permissions when prompted.
4.  Once the wizard is completed, hit "Finish" and the default Workbench screen will come up.
5.  This is called the Home Screen and should look like [this](http://i.imgur.com/iuSqaFC.png).
6.  You need to create a new server instance to host your files for rAthena to access. Select "New Server Instance" under the "Server Administration" section.
7.  A window will pop up, select "localhost" and click "Next". This installs the instance on the localhost, which is your computer.
8.  On the next screen, leave everything the default. Where it says "Username" leave that at root, so you have root access. Under that, click "[Store in Vault](http://i.imgur.com/3WD8m8b.png)" and enter the root password from earlier (it's alright to copy/paste the password if you put it in a text file).
9.  After it has successfully tested the database connection, click "Next"
10. On the next screen, leave the configuration settings defaulted. It should point to the existing service (MySQL5 from earlier) and the default path is fine. ([Image](http://imageshack.us/a/img600/1089/defaultwindowsconfig.jpg))
11. On the next screen hit "Next" and then "Continue" on the popup. Leave the Server Instance with the default name of

`mysqld@localhost`

You are now ready to install your rAthena databases.

### Database Installation

It is now time to install the pre-installed database files that will allow your rAthena server to connect to your MySQL database and properly store data, such as characters, items, and guilds. Open up MySQL Workbench to the home screen.

1.  Double click "localhost" on the left under the "SQL Development" section. ([Image](http://i.imgur.com/HwXFbe5.png))
2.  On the next screen (after a small loading bubble pops up), you will have access to the specific tables that were mentioned earlier. You will enter this screen in the future when you want to edit accounts and other things directly (not common).
3.  We need to install a new "Schema", this is like a folder where all the database tables are stored. [Click the yellow cylinder looking thing in the upper left to create a new Schema](http://i.imgur.com/70F2Ckl.png). Name it "ragnarok" - **NOTE!** Lower case is important here, make sure it is exactly "ragnarok". The server collation should be "Server Default".
4.  Click "Apply" to create the Schema. A window will pop up with the actual commands that are going to take place; click "Apply" again to finalize your order.
5.  Now right click 'ragnarok' under "Object Browser" and click "Set as default schema", a line will appear through it telling the browser that any commands you make now will be ordered to that Schema.
6.  Next, [click the button directly to the left of the one you just did](http://i.imgur.com/ntGId6y.png), it says "SQL" with a tiny folder. Navigate to your rAthena/sql-files/ folder, and open the sql script file "main.sql".
7.  You'll see a bunch of code appear, these are commands that will tell the browser to create plain databases for your rAthena server. Click the yellow lightning bolt in the upper left hand corner to execute it and allow it to finish (ensure you click the first lightning bolt, the one without a cursor symbol or a magnifying glass over it).
8.  After it finishes, a bunch of executed commands will appear on the bottom of the screen. You can now expand the ragnarok schema to see a bunch of tables. ([Image](http://i.imgur.com/GdUYaiU.png))
9.  Now, do the same thing for a schema called "log", but open and execute logs.sql instead of main.sql. Ensure the tables are there as well.
10. Close the existing query tabs by hitting the "X" in the upper right of the tab. With the ragnarok tables still open, scroll down to the "login" table and **RIGHT click** it, then select "Edit Table Data".
11. Here you'll see existing account information that players can log in with to make characters. If you remember, the first account is the server communication account and it has the default password that you were asked to reset earlier. For our example we chose "FishUser" and "FishPassword". Enter these in the "username" and "password" field. And then create your first GM account by clicking where the word "null" is on the row with a ' \* ' and enter "2000000" for the "account_id" field, with a username and password that you like. For this guide we chose a username of "AthenaGM" and a password of "12345" and a sex of "M". To enable full administrator GM, just set the "group_id" to "99". Zero out everything else. [When you are finished it should look like THIS](http://i.imgur.com/fgkz4uC.png).
12. Hit the "Apply" button in the corner and then again when the code prompt appears. This should modify your tables. After it is done, you may close the SQL Editor by clicking the "X" on the tab at upper left corner. Hitting the "X" in the upper right closes the whole workbench. If you accidentally close it, just open it again.
13. On the Workbench Home Screen, click "Manage Security" under Server Administration. Select "mysqld@localhost" and then click "OK".
14. The next screen is the security window. You want to add an account that your server can use to access the databases that is NOT the root account, for enhanced security. Click "Add Account" in the lower left of the default screen.
15. The login name needs to be "ragnarok", and the password we selected earlier for this guide is "Fish". The system will tell you how strong your password is... Fish is a very weak password. Leave the connectivity limit box defaulted and then hit "Apply" in the lower right. ([Image](http://i.imgur.com/00X2bQX.png))
16. You'll see the account show up in the left above root. Select it and then click the "Administrative Roles" tab.
17. Ensure that the "MonitorAdmin", "DBManager", "DBDesigner" and "BackupAdmin" are checked. Some of these will select themselves based on what you click. Then click "Apply". As a note, this step isn't entirely necessary but provides increased security. The simpler step is to just give the user all privileges by clicking the "DBA" option at the top. ([Image](http://i.imgur.com/fddQevd.png))
18. Click the "Schema Privileges" tab.
19. In this tab, click "ragnarok" and then click the only available button, which is "Add Entry...".
20. Leave "Any Host" selected and change Schema to "Selected Schemas". Then select the "ragnarok" schema and hit OK.
21. At the bottom, hit "Select 'ALL'" to enable all database privileges for this Schema. This allows your *ragnarok* user to have access to all the tables in the schema of the same name. In other words, it allows your server to read/write the tables in the database you made. Make sure you click "Save Changes".
22. Do the same for the "log" schema you made. When you are [done it should look like this](http://i.imgur.com/I2vfBbG.png).

**Congratulations!** You have successful installed the MySQL database and are ready to run your server! See below for further adjustments.

#### Additional Configurations

##### item_db and mob_db

Open your SQL editor by double clicking your connection under SQL development. Right click ragnarok, and set it as your default schema, then right click it again and choose "Alter schema...", then change collation from latin1 to utf8 - default collation.([Image](http://i.imgur.com/XLL88ew.png)) Then open item_db.sql and mob_db.sql(item_db_re.sql or mob_db_re.sql for Renewal servers) with a text editor, they are located in your sql-files folder, and select all of the text by either right clicking and choosing select all, or clicking edit and select all, then copy by doing basically the same thing for selecting but choose copy; you can also press and hold ctrl and C, then release. Now go back to the SQL editor, and in the white box below the tab that says SQL editor paste the contents of either item_db.sql or mob_db.sql (item_db_re.sql or mob_db_re.sql for Renewal servers), execute, and then do the other one and execute. ([Image](http://i.imgur.com/aK9CYNs.png)) Next, open inter_athena.conf in your conf folder, look for:

`//UseÂ SQLÂ item_dbÂ andÂ mob_dbÂ forÂ theÂ mapÂ server`
`use_sql_db:Â no`

And change no to yes. Note that if you have a modified version of Athena such as 3CeAM you will have to manually add the modifications from the item_db in the db folder to your MySQL item_db, and also for mob_db. If you do not you will get errors when running your server.

##### Enabling Logging

Simply open log_athena.conf in your conf folder, and look for:

`//Â UseÂ MySQLÂ Logs?Â (SQLÂ VersionÂ Only)`
`sql_logs:Â 0`

Change 0 to 1. You can also go through and change logging options. Your logs will be stored within your log schema. To view IPs in loginlog, you must click it, then right click it and choose alter table, then click on the columns tab. For the PK row, check all of the boxes, then apply it. Now you can double click on the loginlog and view the IPs, though after you are done alter the table again and uncheck all the boxes, this helps insure security. This should only be done for IP bans.

##### Increasing Security

**Use MD5 to encrypt your password**
\*\* **WARNING:** This will turn your passwords gibberish, just numbers and letters, making them unreadable so be sure to note down your password, either in a text file on your C drive, or on a piece of paper. In MySQL Workbench, click edit, then preferences, then click the SQL Queries tab. Uncheck "(Safe Updates) Forbid UPDATE and DELETE statements without a WHERE clause...", then click OK. Make ragnarok your default schema, by right clicking its name and clicking "Set as Default Schema", now click File, then Open SQL script, and open convert_passwords.sql. Then click the execute icon.

Linux
To Install the Mysql Server there is really only a few things that you have to do.

### Installing MySQL

From your terminal, type

`sudoÂ yumÂ installÂ mysql-server*`


`sudoÂ apt-getÂ installÂ mysql-server`

After your Operating System downloaded and installed MySQL, you will see your terminal window changed and you will be prompted to provide the root password for the MySQL server

### Setting up your own user

Once the server has been installed you will need to call the server from terminal with this command.

`mysqlÂ -uÂ root`

or

`mysqlÂ -uÂ rootÂ -p`

then, type in your password.

You are now logged into the MySQL server as root. The best way to use your own SQL server is to have a username of your own control with your own password. The next command will create your own user. The `IDENTIFIED` `BY` clause defines the password.

`CREATEÂ USERÂ 'ragnarok'@'%'Â IDENTIFIEDÂ BYÂ 'ragnarok';`
`GRANTÂ ALLÂ PRIVILEGESÂ ONÂ 'ragnarok'.*Â toÂ 'ragnarok'@'%'Â IDENTIFIEDÂ BYÂ 'ragnarok';`
`flushÂ privileges;`

If that doesn't work it my be due to a version syntax error, try the following.

      CREATE USER 'ragnarok'@'%' IDENTIFIED BY 'ragnarok';
      GRANT ALL PRIVILEGES ON ragnarok.* to 'ragnarok'@'%' IDENTIFIED BY 'ragnarok';

### Installing the Tables

      cd /path/to/rathena/

Note: Afterwards issue this command lines, please have your password prepared since every after command lines issued you will be prompted for it.

      mysql -u root -p ragnarok < main.sql

      mysql -u root -p ragnarok < logs.sql

      mysql -u root -p ragnarok < item_db.sql

      mysql -u root -p ragnarok < item_db2.sql

      mysql -u root -p ragnarok < item_db_re.sql

      mysql -u root -p ragnarok < item_db2_re.sql

      mysql -u root -p ragnarok < item_cash_db.sql

      mysql -u root -p ragnarok < item_cash_db2.sql

      mysql -u root -p ragnarok < mob_db.sql

      mysql -u root -p ragnarok < mob_db2.sql

      mysql -u root -p ragnarok < mob_db_re.sql

      mysql -u root -p ragnarok < mob_skill_db.sql

      mysql -u root -p ragnarok < mob_skill_db2.sql

      mysql -u root -p ragnarok < mob_skill_db_re.sql

[Category:Installation](/Category:Installation "wikilink")

============================================================

## Install-on-Centos

This guide covers how to install rAthena on [CentOS](http://en.wikipedia.org/wiki/CentOS) and other [versions of Linux](http://en.wikipedia.org/wiki/List_of_Linux_distributions#RPM-based) that use [yum](http://en.wikipedia.org/wiki/Yellowdog_Updater,_Modified).

# Requirements
* CentOS or an RPM-based Linux that has the 'yum' command
* root access or access to an account that has [sudo privileges](http://en.wikipedia.org/wiki/Sudo)
* an Internet connection to download install packages


# Prerequisites
All of these commands will be typed at the [command-line interface](http://en.wikipedia.org/wiki/Command-line_interface).
## Install Prerequisites
* Login to your server via [SSH](http://en.wikipedia.org/wiki/Secure_Shell), or if you are already logged into a [GUI](wikipedia:http://en.wikipedia.org/wiki/Graphical_user_interface) press Ctrl+Alt+T to open a terminal window.
* Type the following command (this will install GCC, Make, MySQL, MySQL header files, MySQL Server, PCRE header files, and Zlib header files)
 
 `yum install gcc make mysql mysql-devel mysql-server pcre-devel zlib-devel`
* (Optional) type the following command to install some additional packages: 

 `yum -y install dos2unix gdb nano screen unzip wget zip`

## Now Install GIT
Add additional repository so yum can find GIT:

` rpm -Uvh http://repo.webtatic.com/yum/centos/5/latest.rpm`

Install the latest version of git

` yum install --enablerepo=webtatic git-all`

To work around Missing Dependency: perl(Git) errors:

` yum install --enablerepo=webtatic --disableexcludes=main  git-all`


## Create a non-root Linux user
By the [principle of least privilege](http://en.wikipedia.org/wiki/Principle_of_least_privilege), it is recommended you do **NOT** run rAthena as root. 
Type the following command to create a non-root Linux account:

`useradd --create-home --shell /bin/bash rathena4444`

`--create-home` = create the user's home directory

`--shell` = sets their login shell to [Bash](http://en.wikipedia.org/wiki/Bash_(Unix_shell))

`rathena4444` = the login name of the new Linux account

`4444` = pick your own random numbers to make the username more unique

* Set a password for the new user (run this command and follow the prompts):

`passwd rathena4444`

## Configure MySQL

### Set a root password
The default MySQL Server install creates a MySQL user 'root'@'localhost' with NO password. It is recommended you create a password for the root user. 
* Run MySQL Service:

`service mysqld start`
* Run this command and follow the prompts: 

`mysql_secure_installation`
* Login to your MySQL Server as root: 
* When prompted, enter your root MySQL password.

`mysql --user=root -p`
* Now your prompt should look like this (the MySQL command prompt): 

`mysql>`
* In case your mysql server isn't started, you may have to start it with:

`/etc/init.d/mysqld start`

### Create SQL database for rAthena
* At the MySQL prompt, type this to [create a database](http://dev.mysql.com/doc/refman/5.5/en/create-database.html) (replace `rathena4444` with the Linux username you created earlier): 

`mysql> CREATE DATABASE rathena4444_rag;`

* Create a separate database for logs: 

`mysql> CREATE DATABASE rathena4444_log;`

### Setup a MySQL user for rAthena
* At the MySQL prompt, type something like this to create a new MySQL user: 

`CREATE USER 'rathena4444'@'localhost' IDENTIFIED BY 'secretpassword';`

`rathena4444` = the name of the MySQL user (we named it the same as the Linux user to make it easier to identify)

`localhost` = the hostname or IP it will connect from

`secretpassword` = the password for this MySQL user

* [Grant privileges](http://dev.mysql.com/doc/refman/5.5/en/grant.html) to the 'rathena' MySQL user:

`mysql> GRANT SELECT,INSERT,UPDATE,DELETE ON rathena4444\_rag.* TO 'rathena4444'@'localhost';`

`mysql> GRANT SELECT,INSERT ON rathena4444\_log.* TO 'rathena4444'@'localhost';`
(note the [escaped underscore](http://dev.mysql.com/doc/refman/5.5/en/string-literals.html#character-escape-sequences))

# Install rAthena
## Login as your non-root Linux user
The rest of the setup is done as rathena4444 (the Linux user you created in step 2.2)
* Logout from root SSH (or minimize the window).
* Login to your server via SSH as the rathena4444 Linux user.

## Cloning The Repository
You can obtain the latest version of rAthena by typing the following command. This will place rAthena in a folder called rAthena, but you are free to change it to whatever you like:

`git clone https://github.com/rathena/rathena.git ~/rAthena`

## [Import](http://dev.mysql.com/doc/refman/5.5/en/batch-commands.html) MySQL Tables
* Change directory to the '''sql-files''' folder.

`cd rAthena/sql-files/`

* Execute these commands (when prompted, enter your MySQL root password):

`mysql --user=root -p rathena4444_rag < main.sql`

`mysql --user=root -p rathena4444_rag < item_db.sql`

`mysql --user=root -p rathena4444_rag < item_db2.sql`

`mysql --user=root -p rathena4444_rag < mob_db.sql`

`mysql --user=root -p rathena4444_rag < mob_db2.sql`

`mysql -u root -p rathena4444_log < logs.sql`

NOTE: if you want to use different SQL DBs for login/char/map servers this is the list of databases each server use:
* login-server: global_reg_value, ipbanlist, login, loginlog
* map-server: mapreg, item_db, item_db2, mob_db, mob_db2
* char-server: everything else + global_reg_value once again
Note that global_reg_value tables are needed by both login-server and char-server (though it may be different tables)

## Compile Source Code

` cd trunk`

 `./configure`

 `make sql`

*If you're using CentOS 32-bit please use:

` ./configure --disable-64bit`

### How to Recompile
In the future (after you update or edit any file in /src) to recompile, add ''make clean'' before make sql: 

`cd trunk`

`./configure`

`make clean`

`make server`

# Start your rAthena Server
* Change access mode of athena-start file so that you can execute it.
* Use (dos2unix athena-start) if you are getting ^M errors, ie. newline errors 

 `chmod a+x athena-start`

* To Start

` ./athena-start start`

* To Stop

` ./athena-start stop`

* To Restart

` ./athena-start restart`

# See Also

============================================================

## Install-on-Debian

Basic DEB Installation guide
APT-GET and APTITUDE can be used interchangeably depending upon the Debian based Operating System. It needs to be run with sudo or su (depending again on your OS).

`apt-get update`

This part of the article will use subversion to obtain the source code of EA. The structure of subversion will allow the user to download either the trunk or branch of RA. A trunk contains the latest code that would be useful if you are testing or really need a new feature. The branch contains stable source code that has gone through testing and bug fixes to ensure that the server will remain stable with the highest uptime possible.

Linux

This guide is assuming that you already have the operating system installed. Well first off let me congratulate you on your choice to run a linux server. I can honestly not think of any downsides to running a server with a linux operating system. These Guides also assume you have a 32bit version installed.

Deb Based Distributions of Linux

rAthena Installation Guide for Debian/Ubuntu/Knoppix/DSL/and Other DEB based Distro's Other Distro's are only applicable if they have APT-GET or Aptitude installed.

APT-GET - and - Aptitude

can be used in place of the other should you so choose but for the purposes of this guide and my own personal preference I choose to use apt-get

For Debian/Knoppix/and Other Distro's not including Ubuntu it may be necessary to substitute

sudo - for - su

To everyone who is running their Linux with a GUI (Graphical User Interface) I would recommend that you not get too attached to it since we will be using the Terminal/CLI (Command Line Interface). I will give instruction for install a MySQL 5.0 Server at the end. Necessary Programs

Required packages
  [git]: http://packages.debian.org/stable/git
  [make]: http://packages.debian.org/stable/make
  [gcc]: http://packages.debian.org/stable/gcc
  [libmysqlclient-dev]: http://packages.debian.org/stable/libmysqlclient-dev
  [zlib1g-dev]: http://packages.debian.org/stable/zlib1g-dev
  [libpcre3-dev]: http://packages.debian.org/stable/libpcre3-dev
  [PCRE]: PCRE "wikilink"
  [libssl-dev]: http://packages.debian.org/stable/libssl-dev
  [`https://github.com/rathena/rathena.git`]: https://github.com/rathena/rathena.git
  [this section]: Transition_from_SVN_to_GIT#Notes_about_GIT "wikilink"

`[root]# apt-get install git make gcc libmysqlclient-dev zlib1g-dev libpcre3-dev`

### Cloning The Repository

You can obtain the latest version of rAthena by typing the following command. This will place rAthena in a folder called rAthena, but you are free to change it to whatever you like:

`git clone `[`https://github.com/rathena/rathena.git`][]` ~/rAthena`

#### Updating Existing Code

To pull the latest updates for rAthena you can do the following:

`git pull`

Please [this section][] if you're having issues with updating.

### Run configure script

### Compile

` make sql`
` chmod a+x login-server && chmod a+x char-server && chmod a+x map-server`

#### How to Recompile

Recompiling is the same as compiling except you always run this command after you configure it

` make clean sql`

How to Start
Use the following commands:

To Start:

    ./athena-start start

To Stop:

    ./athena-start stop

To Restart:

    ./athena-start restart

if u get error like this : -bash: ./athena-start: /bin/sh^M: bad interpreter

just install dos2unix

    apt-get install dos2unix

then run :

    dos2unix athena-start 

now u will able to use ./athena-start start after chmod a+x athena-start

MYSQL Installation
You may need to run a a distribution upgrade just in case you will be running your mysql in the same vps/dedicated server. To do so you may run the command line:

    apt-get dist-upgrade

After getting the upgrade done you may now install the mysql server, to do so:

    apt-get install mysql-server

You will be prompted with a blue screen asking for your Administration password, please note that you must use a secure password since this will be your root sql password. Once done you may need to check if your mysql server is running. To do so you can:

    service mysql status

If its offline you can turn it on using this command line:

    service mysqld start

If it's online you can start creating your database by running the following command lines:

     mysql -u root -p

You will be asked to type in your root or administration password, after logging in successfully type the following commands to start making your ragnarok database.

     mysql> CREATE DATABASE (your ragnarok database name);

You need to create new user for your ragnarok database.

      mysql> GRANT ALL ON yourragnarokdatabasename.* TO yourdatabaseusername@localhost IDENTIFIED BY "yourdesiredpassword";

Now its time to create required tables. Exit mysql console, by using ctrl + c and start with:

     mysql -u username -password yourragnarokdatabasename  < /path/to/your/ragnarok folder/trunk/sql-files/main.sql 

and all the other necessary sql files.

and done. Now all you have to do is edit your configuration files etc.

============================================================

## Installation

This article is aimed at downloading RAthena and any dependancies required to run it. In this article, you are expected to know basic file and program management of the OS you are attempting to run RAthena on. (Or use Google to search for the answers)

System Requirements
RAthena runs on variety of 32-bit and 64-bit (limited) operating systems, including Windows, Linux and Unix. Hardware requirements are ones of typical server environment, whether virtual or dedicated.

Program Requirements
To run RAthena, the following programs must be installed on the machine that will run RAthena:

### \*nix based

For \*nix, most of these programs will come as [Packages](/wikipedia:Software_package_%28installation%29 "wikilink") with your OS, for example, the FreeBSD Ports collection, or Debians apt-get or aptitude. Please see your OS's help/support pages to find out how to utilize package installations. As a general rule, the following packages will be required to compile RAthena:
[wget](http://www.gnu.org/software/wget/), [subversion](http://subversion.tigris.org/), [GCC](http://gcc.gnu.org/), [make](http://www.gnu.org/software/make/) (if running \*BSD, gmake is needed instead of make.)

#### libmysqlclient15-dev

libmysqlclient15-dev is the library for MySQL and is **required** to compile an SQL version of RAthena. This will most likely need to be installed via packages.

### Windows based

Depending on how you want to compile, one of two methods can be used. We **highly recommend** the use of [Visual C++](http://www.microsoft.com/Express/vc/). [Cygwin](http://www.cygwin.com/) can also be used. If cygwin is used, you have some configuration to do, please see below:

> Expand the development or devel branch in Cygwin and make sure GCC and Make are checked. These are the only 2 things you need, the others are up to you whether you want to download them or not. The downloading and installation of packages may take some time depending on your packages, their size, your network speed, and the remote server's network speed. This shouldn't take too long if it's just GCC and Make.

You will also need [subversion](http://subversion.tigris.org/)

Installing software
### Linux OS's

A simple make and make install is all that is needed for most of the packages. You can find [instructions](/:Category:Installation "wikilink") and readmes in each of the downloads for your distro telling you how to install and compile each package. Once subversion is installed, you can download RAthena's latest source via the [SVN](/SVN "wikilink").
<code>

    ~$ svn co https://rathena.svn.sourceforge.net/svnroot/rathena/trunk

</code> for trunk, or
<code>

    ~$ svn co https://rathena.svn.sourceforge.net/svnroot/rathena/branches/stable

</code> If you want to use stable.

### Windows OS's

When using SVN in Windows, all your commands are in a right click menu integrated into the Windows Shell.
[Image:svnwindows.jpg](/Image:svnwindows.jpg "wikilink")
Simply create a new folder, right click on it and select 'SVN Checkout...' and a dialog box will appear.
[Image:checkout.jpg](/Image:checkout.jpg "wikilink")
Enter your URL (in the example above, simply add /trunk after the URL to checkout Trunk, or /branches/stable for stable) and TSVN will download a fresh copy of RAthena's SVN to that folder.

Compiling
Please see [Compiling](/Compiling "wikilink") for more detailed instructions.

For your OS, you will need to compile binaries if you had downloaded RAthena via the SVN. you can then move on to [:Category:Configuration](/:Category:Configuration "wikilink") and then running RAthena.

See Also

[Category:Basics](/Category:Basics "wikilink")

============================================================

## Installations

These guides are OS specific:
* [CentOS](Install-on-Centos)
* [Debian](Install-on-Debian)
* [FreeBSD](Install-on-FreeBSD)
* [Windows](Install-on-Windows)

Or are you just looking for the [SQL Installation](Install-SQL) guide?

============================================================

## Installation_(CentOS)

This guide covers how to install [rAthena](/rAthena "wikilink") on [CentOS](/wikipedia:CentOS "wikilink") and other [versions of Linux](/wikipedia:List_of_Linux_distributions#RPM-based "wikilink") that use [yum](/wikipedia:Yellowdog_Updater,_Modified "wikilink").

Requirements

Prerequisites
All of these commands will be typed at the [command-line interface](/wikipedia:Command-line_interface "wikilink").

### Install Prerequisites

1.  Login to your server via [SSH](/wikipedia:Secure_Shell "wikilink"), or if you are already logged into a [GUI](/wikipedia:Graphical_user_interface "wikilink") press Ctrl+Alt+T to open a terminal window.
2.  Type the following command (this will install GCC, Make, MySQL, MySQL header files, MySQL Server, PCRE header files, and Zlib header files)

        yum install gcc make mysql mysql-devel mysql-server pcre-devel zlib-devel

3.  (Optional) type the following command to install some additional packages:

        yum -y install dos2unix gdb nano screen unzip wget zip

### Now Install GIT

Install the latest version of git

`yumÂ installÂ git`

To work around Missing Dependency: perl(Git) errors:

`yumÂ install--disableexcludes=mainÂ Â git`

### Create a non-root Linux user

By the [principle of least privilege](/wikipedia:Principle_of_least_privilege "wikilink"), it is recommended you do **NOT** run rAthena as root.

1.  Type the following command to create a non-root Linux account:

        useradd --create-home --shell /bin/bash rathena4444

    `--create-home` = create the user's home directory

    `--shell` = sets their login shell to [Bash](/wikipedia:Bash_(Unix_shell) "wikilink")

    **`rathena4444`** = the login name of the new Linux account

    *`4444`* = pick your own random numbers to make the username more unique

2.  Set a password for the new user (run this command and follow the prompts):

        passwd rathena4444

### Configure MySQL

#### Set a root password

The default MySQL Server install creates a MySQL user 'root'@'localhost' with NO password. It is recommended you create a password for the root user.

1.  Run MySQL Service:

        service mysqld start

2.  Run this command and follow the prompts:

        mysql_secure_installation

3.  Login to your MySQL Server as root:

    *When prompted, enter your root MySQL password.*

        mysql --user=root -p

4.  Now your prompt should look like this (the MySQL command prompt):

        mysql>

    *In case your mysql server isn't started, you may have to start it with:*

        /etc/init.d/mysqld start

#### Create SQL database for rAthena

1.  At the MySQL prompt, type this to [create a database](http://dev.mysql.com/doc/refman/5.5/en/create-database.html) (replace `rathena4444` with the Linux username you created earlier):

        mysql> CREATE DATABASE rathena4444_rag;

2.  Create a separate database for logs:

        mysql> CREATE DATABASE rathena4444_log;

#### Setup a MySQL user for rAthena

1.  At the MySQL prompt, type something like this to create a new MySQL user:

        mysql> CREATE USER 'rathena4444'@'localhost' IDENTIFIED BY 'secretpassword';

    `rathena4444` = the name of the MySQL user (we named it the same as the Linux user to make it easier to identify)

    `localhost` = the hostname or IP it will connect from

    **`secretpassword`** = the password for this MySQL user

2.  [Grant privileges](http://dev.mysql.com/doc/refman/5.5/en/grant.html) to the 'rathena' MySQL user:

        mysql> GRANT SELECT,INSERT,UPDATE,DELETE ON `rathena4444_rag`.* TO 'rathena4444'@'localhost';

        mysql> GRANT SELECT,INSERT ON `rathena4444_log`.* TO 'rathena4444'@'localhost';

    (note the [escaped underscore](http://dev.mysql.com/doc/refman/5.5/en/string-literals.html#character-escape-sequences))

Install [rAthena](/rAthena "wikilink")
### Login as your non-root Linux user

The rest of the setup is done as rathena4444 (the Linux user you created in step 2.2)

1.  Logout from root SSH (or minimize the window).
2.  Login to your server via SSH as the rathena4444 Linux user.

### Cloning The Repository

You can obtain the latest version of rAthena by typing the following command. This will place rAthena in a folder called rAthena, but you are free to change it to whatever you like:

`gitÂ cloneÂ `[`https://github.com/rathena/rathena.git`](https://github.com/rathena/rathena.git)`Â ~/rAthena`

### [Import](http://dev.mysql.com/doc/refman/5.5/en/batch-commands.html) MySQL Tables

1.  Change directory to the **sql-files** folder.

        cd rAthena/sql-files/

2.  Execute these commands:

    *When prompted, enter your MySQL root password.*

        mysql --user=root -p rathena4444_rag < main.sql

        mysql --user=root -p rathena4444_rag < item_db.sql

        mysql --user=root -p rathena4444_rag < item_db2.sql

        mysql --user=root -p rathena4444_rag < mob_db.sql

        mysql --user=root -p rathena4444_rag < mob_db2.sql

        mysql -u root -p rathena4444_log < logs.sql

NOTE: if you want to use different SQL DBs for login/char/map servers this is the list of databases each server use:

1.  login-server: global_reg_value, ipbanlist, login, loginlog
2.  map-server: mapreg, item_db, item_db2, mob_db, mob_db2
3.  char-server: everything else + global_reg_value once again

Note that global_reg_value tables are needed by both login-server and char-server (though it may be different tables)

### [Configure rAthena](/:Category:Configuration "wikilink")

### Compile Source Code

`cdÂ rAthena`
`chmodÂ a+xÂ configure`
`./configure`
`makeÂ server`


`./configureÂ --disable-64bit`

##### How to Recompile

In the future (after you update or edit any file in /src) to recompile, add *make clean* before make sql:

`cdÂ rAthena`
`./configure`
**`make` `clean`**
`makeÂ server`

Start your rAthena Server
`//changeÂ accessÂ modeÂ ofÂ athena-startÂ fileÂ soÂ thatÂ youÂ canÂ executeÂ it.`
`//UseÂ (dos2unixÂ athena-start)Â ifÂ yoÂ uareÂ gettingÂ ^MÂ errorsÂ ie.Â newlineÂ errorsÂ `
`chmodÂ a+xÂ athena-start`

`//ToÂ Start`
`./athena-startÂ start`
`//ToÂ Stop`
`./athena-startÂ stop`
`//ToÂ Restart`
`./athena-startÂ restart`

See Also
[CentOS](/Category:Installation_Guides "wikilink")

============================================================

## Installation_(Debian)

[Debian](/Category:Installation_Guides "wikilink")

Basic DEB Installation guide
APT-GET and APTITUDE can be used interchangeably depending upon the Debian based Operating System. It needs to be run with sudo or su (depending again on your OS).

`apt-getÂ update`

This part of the article will use subversion to obtain the source code of EA. The structure of subversion will allow the user to download either the trunk or branch of RA. A trunk contains the latest code that would be useful if you are testing or really need a new feature. The branch contains stable source code that has gone through testing and bug fixes to ensure that the server will remain stable with the highest uptime possible.

Linux

This guide is assuming that you already have the operating system installed. Well first off let me congratulate you on your choice to run a linux server. I can honestly not think of any downsides to running a server with a linux operating system. These Guides also assume you have a 32bit version installed.

Deb Based Distributions of Linux

rAthena Installation Guide for Debian/Ubuntu/Knoppix/DSL/and Other DEB based Distro's Other Distro's are only applicable if they have APT-GET or Aptitude installed.

APT-GET - and - Aptitude

can be used in place of the other should you so choose but for the purposes of this guide and my own personal preference I choose to use apt-get

For Debian/Knoppix/and Other Distro's not including Ubuntu it may be necessary to substitute

sudo - for - su

To everyone who is running their Linux with a GUI (Graphical User Interface) I would recommend that you not get too attached to it since we will be using the Terminal/CLI (Command Line Interface). I will give instruction for install a MySQL 5.0 Server at the end. Necessary Programs

Required packages

`[root]#Â apt-getÂ installÂ gitÂ makeÂ gccÂ libmysqlclient-devÂ zlib1g-devÂ libpcre3-devÂ build-essentialÂ mysql-client`

Create a non-root Linux user
By the [principle of least privilege](/wikipedia:Principle_of_least_privilege "wikilink"), it is recommended you do **NOT** run rAthena as root.

1.  Type the following command to create a non-root Linux account:

        useradd --create-home --shell /bin/bash rathena4444

    `--create-home` = create the user's home directory

    `--shell` = sets their login shell to [Bash](/wikipedia:Bash_(Unix_shell) "wikilink")

    **`rathena4444`** = the login name of the new Linux account

    *`4444`* = pick your own random numbers to make the username more unique

2.  Set a password for the new user (run this command and follow the prompts):

        passwd rathena4444

Cloning The Repository
You can obtain the latest version of rAthena by typing the following command. This will place rAthena in a folder called rAthena, but you are free to change it to whatever you like:

`gitÂ cloneÂ `[`https://github.com/rathena/rathena.git`](https://github.com/rathena/rathena.git)`Â ~/rAthena`

### Updating Existing Code

To pull the latest updates for rAthena you can do the following:

`gitÂ pull`

Please [this section](/Transition_from_SVN_to_GIT#Notes_about_GIT "wikilink") if you're having issues with updating.

Run configure script
### Compile

`Â makeÂ server`
`Â chmodÂ a+xÂ login-serverÂ &&Â chmodÂ a+xÂ char-serverÂ &&Â chmodÂ a+xÂ map-server`

### How to Recompile

Recompiling is the same as compiling except you always run this command after you configure it

`Â makeÂ clean`
`Â makeÂ server`

How to Start
Use the following commands:

To Start:

    ./athena-start start

To Stop:

    ./athena-start stop

To Restart:

    ./athena-start restart

if u get error like this : -bash: ./athena-start: /bin/sh^M: bad interpreter

just install dos2unix

    apt-get install dos2unix

then run :

    dos2unix athena-start

now u will able to use ./athena-start start after chmod a+x athena-start

MYSQL Installation
You may need to run a a distribution upgrade just in case you will be running your mysql in the same vps/dedicated server. To do so you may run the command line:

    apt-get dist-upgrade

After getting the upgrade done you may now install the mysql server, to do so:

    apt-get install mysql-server

You will be prompted with a blue screen asking for your Administration password, please note that you must use a secure password since this will be your root sql password. Once done you may need to check if your mysql server is running. To do so you can:

    service mysql status

If its offline you can turn it on using this command line:

    service mysqld start

If it's online you can start creating your database by running the following command lines:

     mysql -u root -p

You will be asked to type in your root or administration password, after logging in successfully type the following commands to start making your ragnarok database.

     mysql> CREATE DATABASE (your ragnarok database name);

You need to create new user for your ragnarok database.

      mysql> GRANT ALL ON yourragnarokdatabasename.* TO yourdatabaseusername@localhost IDENTIFIED BY "yourdesiredpassword";

Now its time to create required tables. Exit mysql console, by using ctrl + c and start with:

     mysql -u username -password yourragnarokdatabasename  < /path/to/your/ragnarok folder/trunk/sql-files/main.sql

and all the other necessary sql files.

and done. Now all you have to do is edit your configuration files etc.

See Also

============================================================

## Installation_(Debian)_with_MariaDB

[Debian](/Category:Installation_Guides "wikilink")

Why replace MySQL with MariaDB
MariaDB is a binary drop in replacement for MySQL. That means everything still works exactly the same as before but better!
You may ask why should you replace MySQL with MariaDB. Here's the reasons.


Installing rAthena and MariaDB on Debian based distro
Set up MariaDB
First, we'll tell our system about where to download MariaDB by going to [MariaDB download page](https://downloads.mariadb.org/mariadb/repositories/). Select your OS and your OS version then select MariaDB 5.5. After that, MariaDB server installation instruction will appear on the bottom of the page.

Prerequisite
This article will guide you on how to use Git to obtain the source code of rAthena, build it from source and installing MariaDB in place of MySQL.
This article is based on [Installation (Debian)](/Installation_(Debian) "wikilink") article.
This guide is assuming that you already have the operating system installed. Well first off let me congratulate you on your choice to run a linux server. I can honestly not think of any downsides to running a server with a linux operating system.

Deb Based Distributions of Linux

rAthena Installation Guide for Debian/Ubuntu/Knoppix/DSL/and Other DEB based Distro's Other Distro's are only applicable if they have APT-GET or Aptitude installed.

APT-GET - and - Aptitude

can be used in place of the other should you so choose but for the purposes of this guide and my own personal preference I choose to use apt-get

For Debian/Knoppix/and Other Distro's not including Ubuntu it may be necessary to substitute

sudo - for - su

To everyone who is running their Linux with a GUI (Graphical User Interface) I would recommend that you not get too attached to it since we will be using the Terminal/CLI (Command Line Interface). Necessary Programs

Required packages

`[root]#Â apt-getÂ installÂ gitÂ makeÂ gccÂ libmariadbclient-devÂ zlib1g-devÂ libpcre3-devÂ build-essentialÂ mariadb-client`

Create a non-root Linux user
By the [principle of least privilege](/wikipedia:Principle_of_least_privilege "wikilink"), it is recommended you do **NOT** run rAthena as root.

1.  Type the following command to create a non-root Linux account:

        useradd --create-home --shell /bin/bash rathena4444

    `--create-home` = create the user's home directory

    `--shell` = sets their login shell to [Bash](/wikipedia:Bash_(Unix_shell) "wikilink")

    **`rathena4444`** = the login name of the new Linux account

    *`4444`* = pick your own random numbers to make the username more unique

2.  Set a password for the new user (run this command and follow the prompts):

        passwd rathena4444

Cloning The Repository
You can obtain the latest version of rAthena by typing the following command. This will place rAthena in a folder called rAthena, but you are free to change it to whatever you like:

`gitÂ cloneÂ `[`https://github.com/rathena/rathena.git`](https://github.com/rathena/rathena.git)`Â ~/rAthena`

### Updating Existing Code

To pull the latest updates for rAthena you can do the following:

`gitÂ pull`

Please [this section](/Transition_from_SVN_to_GIT#Notes_about_GIT "wikilink") if you're having issues with updating.

Run configure script
### Compile

`Â makeÂ server`
`Â chmodÂ a+xÂ login-serverÂ &&Â chmodÂ a+xÂ char-serverÂ &&Â chmodÂ a+xÂ map-server`

### How to Recompile

Recompiling is the same as compiling except you always run this command after you configure it

`Â makeÂ clean`
`Â makeÂ server`

How to Start
Use the following commands:

To Start:

    ./athena-start start

To Stop:

    ./athena-start stop

To Restart:

    ./athena-start restart

if u get error like this : -bash: ./athena-start: /bin/sh^M: bad interpreter

just install dos2unix

    apt-get install dos2unix

then run :

    dos2unix athena-start

now u will able to use ./athena-start start after chmod a+x athena-start

Database Installation
You may need to check if your MariaDB server is running. To do so you can:

    service mysql status

If its offline you can turn it on using this command line:

    service mysqld start

If it's online you can start creating your database by running the following command lines:

     mysql -u root -p

You will be asked to type in your root or administration password, after logging in successfully type the following commands to start making your ragnarok database.

     mysql> CREATE DATABASE (your ragnarok database name);

You need to create new user for your ragnarok database.

      mysql> GRANT ALL ON yourragnarokdatabasename.* TO yourdatabaseusername@localhost IDENTIFIED BY "yourdesiredpassword";

Now its time to create required tables. Exit mysql console, by using ctrl + c and start with:

     mysql -u username -password yourragnarokdatabasename  < /path/to/your/ragnarok folder/trunk/sql-files/main.sql

and all the other necessary sql files.

and done. Now all you have to do is edit your configuration files etc.

See Also

============================================================

## Installation_(FreeBSD)

This article is aimed at installing and getting [rAthena](/rAthena "wikilink") to run successfully on a machine running [FreeBSD](/wikipedia:FreeBSD "wikilink") 7.1-RELEASE. It is assumed that FreeBSD was installed with the ports collection and enabled Linux Threading on install. This guide will NOT teach you how to network FreeBSD, install FreeBSD or configure any additional system settings (besides the ones needed to run rAthena and its dependancies).

Before we Start
We will primarily working from the /home/user directory. Your primary user will need to be in the 'wheel' group and be able to su into root. Remember that I will include either $ or \#, depending on who you should be. $ indicates you should be your primary user, and \# indicates you should be root.

Required software
We are going to use FreeBSD's ports collection to download, install and use most of these programs. It is assumed you already installed the ports collection, if you have not, I suggest you do that now.

wget
wget is Linux's download manager and is a very handy tool to have regardless of if we're going to use it. <code>

    # whereis wget
    wget: /usr/ports/www/wget
    # cd /usr/ports/www/wget && make && make install
    # make clean
    # rehash

</code>

gmake
gmake, or GNUMake, is the GCC compiler used for FreeBSD. This is how we will create our binaries. <code>

     # whereis gmake
    gmake: /usr/ports/devel/gmake
    # cd /usr/ports/devel/gmake && make && make install
    # make clean
    # rehash

</code>

unrar
unrar is a tool to unrar .rar's in BSD. <code>

     # whereis unrar
    unrar: /usr/ports/archivers/unrar
    $ cd /usr/ports/archivers/unrar
    $ make clean
    $ make install
    $ rehash

</code>

GCC
GCC is the GNU Compiler Collection and front ends for C, C++ and other languages. Chances are this will already be installed on the machine, but if not, here's what we do: <code>

    # wget http://www.netgull.com/gnu/gcc/gcc-###.tar.gz (Where ## is the version number. visit the mirror to find out)
    # tar -xvf gcc-###.tar.gz
    # cd gcc*
    # make && make install
    # make clean
    # rehash

</code>

gdb
GDB is always handy to have on a development machine, as it can take backtraces of crashes and lay them out for you to see what went wrong. chances are, this will also be installed with FreeBSD, but if it's not, here's how we will install it: <code>

    # wget http://ftp.gnu.org/gnu/gdb/gdb-###.tar.gz (again, where ### is the version number, check out the mirror)
    # tar -xvf gdb-###.tar.gz
    # cd gdb*
    # make && make install
    # make clean
    # rehash

</code>

git
[Git](https://github.com/rathena/rathena) is the versioning system used for rAthena and how we will get our copy of rAthena. <code>

    # whereis git
    git: /usr/ports/devel/git
    # cd /usr/ports/devel/git && make && make install
    # make clean
    # rehash

</code>

Now, let's go ahead and download rAthena. We'll use git for this.

    $ su root
    # adduser //create a rathena user
    # exit
    $ su rathena
    $ cd /home/rathena
    $ git clone https://github.com/rathena/rathena.git rathena
    $

Now, we can populate the tables with the .sql files in rAthena. Navigate to your /sql-files/ folder in the rAthena files you just checked out.

    $ cd /home/rathena/rathena/sql-files
    $ mysql -uuser -ppassword ragnarok < main.sql
    $ mysql -uuser -ppassword ragnarok < logs.sql

Now, you'll want to follow the steps in the [:Category:Configuration](/:Category:Configuration "wikilink") and [Connecting](/Connecting "wikilink") pages to get your rAthena configured. Once you've made all your source changes, you can compile rAthena. While you're in the root of your rAthena folder, issue the following commands to compile your server:

    $ ./configure
    $ gmake clean
    $ gmake server
    $ rehash

**Important Note:** If you are using a 32 bit FreeBSD you have to use

    $ ./configure --disable-64bit

instead

*NOTE:* You should **NEVER** run rAthena as root! This is why you should have setup a new user and this is why you've assigned him/her permissions in the /home/rathena/rathena/ directory! NB : It's better to compile as user instead of root as you wont have permision to alter output file.

And to start your servers, you can simply use the following command:

    $ ./athena-start <command> (start | stop | restart | status)

And that should be it! You should now have a running rAthena on your FreeBSD machine!

[Category:Installation Guides](/Category:Installation_Guides "wikilink")

============================================================

## Installation_on_Windows

Things You Will Need

GIT Clone
***<big>Recommended to use Git Clone because [rAthena](https://github.com/rathena/rathena) is up-to-date</big>***

Compiling
IP info
Next let's get your IP info.


Click Start, then Run... type *cmd* and click OK. Type in *ipconfig* and press the Enter key. You should see something like this:

`EthernetÂ adapterÂ LocalÂ AreaÂ Connection`
`MediaÂ StateÂ .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â :Â MediaÂ disconnected`
`EthernetÂ adapterÂ WirelessÂ NetworkÂ Connection`
`Connection-specificÂ DNSÂ SuffixÂ Â .Â `
`IPÂ Address.Â .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â :Â 192.xxx.x.x`
`SubnetÂ MaskÂ .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â :Â 255.255.255.0`
`DefaultÂ GatewayÂ .Â .Â .Â .Â .Â .Â .Â .Â .Â :Â 192.xxx.x.x`


Click Start and in the search box type *run* then type *cmd* and press then Enter key. Type in *ipconfig* and press the Enter key.

`WindowsÂ IPÂ Configuration`
`WirelessÂ LANÂ adapterÂ WirelessÂ NetworkÂ Connection:`
`Â Â Â Connection-specificÂ DNSÂ SuffixÂ Â .Â :`
`Â Â Â Link-localÂ IPv6Â AddressÂ .Â .Â .Â .Â .Â :Â Gibberish`
`Â Â Â IPv4Â Address.Â .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â :Â 192.xxx.x.xxÂ <Â YourÂ IP!Â (LANÂ IP)`
`Â Â Â SubnetÂ MaskÂ .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â :Â 255.255.255.0`
`Â Â Â DefaultÂ GatewayÂ .Â .Â .Â .Â .Â .Â .Â .Â .Â :Â 192.xxx.x.x`
`EthernetÂ adapterÂ LocalÂ AreaÂ Connection:`
`Â Â Â MediaÂ StateÂ .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â .Â :Â MediaÂ disconnected`
`Â Â Â Connection-specificÂ DNSÂ SuffixÂ Â .Â :`

In place of the x there will be numbers. Open notepad; go back to the console window and right-click it's window title and select option "Select..." then click and drag over your IP address (selection will appear in inverted colors), or just copy the whole thing. For Windows 7 you will need to right click the window with the text, and click mark; then click and drag. This IP address is known as your LAN IP. Next go to [whatismyip.net](http://www.whatismyip.net/) and take note of your IP address from there. This is your WAN IP, just for future reference to make it world-wide.

Conf Folder
Open char_athena.conf and map_athena.conf with notepad, wordpad, or your text editor of choice. If your LAN IP and WAN IP are same then put that one IP down for all of the IP locations. Char_athena: *login_ip* will be the LAN IP, *char_ip* will be WAN IP. Change *server_name* to the name you want your server to be. You can change *wisp_server_name* to what you would like it to be. *wisp_server_name* is the name that shows up when a character logs in and receives a PM about it being night. The rest of things that can be changed here will be explained later. Map_athena: *char_ip* is the LAN IP, *map_ip* is the WAN IP. Be sure to remove the // before each IP line. When you are done, it should look like this:

`//Â CharacterÂ ServerÂ IP`
`//Â TheÂ mapÂ serverÂ connectsÂ toÂ theÂ characterÂ serverÂ usingÂ thisÂ IPÂ address.`
`//Â NOTE:Â ThisÂ isÂ usefulÂ whenÂ youÂ areÂ runningÂ behindÂ aÂ firewallÂ orÂ areÂ on`
`//Â aÂ machineÂ withÂ multipleÂ interfaces.`
`char_ip:Â 192.xxx.x.xÂ <Â LANÂ IP`
`//Â TheÂ mapÂ serverÂ listensÂ onÂ theÂ interfaceÂ withÂ thisÂ IPÂ address.`
`//Â NOTE:Â ThisÂ allowsÂ youÂ toÂ runÂ multipleÂ serversÂ onÂ multipleÂ interfaces`
`//Â whileÂ usingÂ theÂ sameÂ portsÂ forÂ eachÂ server.`
`//bind_ip:Â 127.0.0.1`
`//Â CharacterÂ ServerÂ Port`
`char_port:Â 6121`
`//Â MapÂ ServerÂ IP`
`//Â TheÂ IPÂ addressÂ whichÂ clientsÂ willÂ useÂ toÂ connect.`
`//Â SetÂ thisÂ toÂ whatÂ yourÂ server'sÂ publicÂ IPÂ addressÂ is.`
`map_ip:Â 69.xxx.x.xÂ <Â WANÂ IP`

Rename the import-tmpl folder to import. Leave the conf folder back to the main folder and rename save-tmpl to save.

After Installation
After you have finished configuring at this point, you will need to setup the [MySQL server](/SQL_Installation "wikilink") that rAthena requires.
Once you have completed setting up your server, you may want to look at [Configuration](/:Category:Configuration "wikilink") and [Customization](/:Category:Customization "wikilink").

See Also

[Windows](/Category:Installation_Guides "wikilink")

============================================================

## Instance_check_party

Syntax

Description
This function checks if a party meets certain requirements, returning 1 if all conditions are met and 0 otherwise. It will only check online characters.

| Value  | Description                                                                  |
|--------|------------------------------------------------------------------------------|
| amount | number of online party members (default is 1).                               |
| min    | minimum level of all characters in the party (default is 1).                 |
| max    | maximum level of all characters in the party (default is max level in conf). |

Example
`ifÂ (`[`instance_check_party`](/instance_check_party "wikilink")`(`[`getcharid`](/getcharid "wikilink")`(1),2,2,149))Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YourÂ partyÂ meetsÂ theÂ MemorialÂ DungeonÂ requirements.",`
`Â Â Â `[`mes`](/mes "wikilink")`Â "AllÂ onlineÂ membersÂ areÂ betweenÂ levelsÂ 1-150Â andÂ atÂ leastÂ twoÂ areÂ online.";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}Â elseÂ {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Sorry,Â yourÂ partyÂ doesÂ notÂ meetÂ requirements.";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

See Also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Instance_create

Syntax

Description
Creates an instance for the party of the attached player. The instance name, along with all other instance data, is read from . Upon success, the command generates a unique instance ID, duplicates all listed maps and NPCs, sets the alive time, and triggers the "OnInstanceInit" label in all NPCs inside the instance.

The command returns the instance ID upon success, and these values upon failure:

| Value | Description                                 |
|-------|---------------------------------------------|
| -1    | Invalid type.                               |
| -2    | Party not found.                            |
| -3    | Instance already exists.                    |
| -4    | No free instances (MAX_INSTANCE exceeded). |

See Also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Instance_enter

Syntax

Description
Warps player to the specified instance after the script terminates. The map and coordinates are located in .

The command returns 0 upon success, and these values upon failure:

| Value | Description                                                              |
|-------|--------------------------------------------------------------------------|
| 1     | Party not found.                                                         |
| 2     | Party does not have an instance.                                         |
| 3     | Other errors (invalid instance name, instance doesn't match with party). |

See Also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Ipbanlist

The \`ipbanlist\` table is used in SQL servers to permanently ban a specific IP or a range of IPs.

@jailfor/@jail
To jail a character for a specified time, use the command:

`@jailforÂ `<time>`Â `<char name>

To permanently jail a character, use the command:

`@jailÂ `<char name>

@ban
To ban a character (and their entire account) for a specified time, use the command:

`@banÂ `<time>`Â `<char name>

When they try to login, they will receive this message:

`YouÂ areÂ prohibitedÂ toÂ logÂ inÂ untilÂ YYYY-MM-DDÂ HH:MM:SS`

@block
To permanently block a character (and their entire account), use the command:

`@blockÂ `<char name>

When they try to login, they will receive this message:

`AccountÂ IDÂ blockedÂ byÂ theÂ GameÂ MasterÂ Team.`

ipbanlist
The \`ipbanlist\` table is used in SQL servers to permanently ban a specific IP or a range of IPs.

### rAthena SQL

1.  Connect to your MySQL database and go to the \`ipbanlist\` table
2.  Add in the info:

3.  click Save.
4.  for IP bans in SQL, the changes take effect immediatly, no restart/reload needed

`` INSERTÂ INTOÂ `ipbanlist`Â VALUESÂ (Â '127.0.0.1',Â NOW(),Â NOW()Â +Â INTERVALÂ 1Â YEAR,Â 'FunÂ XD'Â ); ``

ban IP '127.0.0.1' for 1 year.

`` INSERTÂ INTOÂ `ipbanlist`Â VALUESÂ (Â '58.69.*.*',Â NOW(),Â NOW()Â +Â INTERVALÂ 3Â MONTH,Â 'FunÂ XD'Â ); ``

ban IPs that start with '58.69.\*.\*' for 3 months.

To unban the IP just execute this

`` DELETEÂ fromÂ `ipbanlist`Â WHEREÂ `list`='58.69.*.*' ``

[Category:Configuration](/Category:Configuration "wikilink")

============================================================

## Irc

IRC?
[IRC](/IRC "wikilink") stands for [Internet Relay Chat](/wikipedia:Internet_Relay_Chat "wikilink"). Basically, it's chatroom server and client software in general. In [IRC](/IRC "wikilink"), you have servers and channels. Servers hold the channels, and are hosted on dedicated machines. The channels are the actual chatrooms. [IRC](/IRC "wikilink") allows you to chat with people in real-time around the world.

rAthena on IRC
Note that although you may be able to receive support people in the channel, the [Staff](/Staff "wikilink") agreed that the channel is not a support channel, rather just a part of the [rAthena](/rAthena "wikilink") community. So if you really want to ask something, just put your question into the air and wait, instead of *asking whether you may ask* or if someone is currently available.

Connecting to IRC
The official [rAthena](/rAthena "wikilink") channel room can be found [here](irc://irc.rizon.net/rathena).
Web-based IRC chat is available too: <http://go.rathena.org/irc>

To actually connect to [IRC](/IRC "wikilink"), if you do not already have an [IRC client](/wikipedia:Comparison_of_Internet_Relay_Chat_clients "wikilink") and do not wish to run the java chat, you're going to need an IRC client. There are many different IRC clients, and none are really the 'best'. Opinions vary on which are better. The most commonly used IRC client on [Microsoft Windows](/wikipedia:Microsoft_Windows "wikilink") is [mIRC](http://www.mirc.com). The most commonly used client on \*nix is a tossup between [BitchX](http://www.bitchx.org) and [XChat](http://www.xchat.org). Note that XChat is pay-to-use on [Windows](/wikipedia:Microsoft_Windows "wikilink"), but not on \*nix.

For those not looking to go in-depth into manuals to figure out how to connect, you can actually be up and running by simply installing mIRC, and then typing the following two commands into the mIRC command line on the status window:

`Â /nickÂ NickYouWantHere`
`Â /serverÂ irc.rizon.netÂ -jÂ #rathenaÂ `

And you'll be connected.

rAthena Related Channels
Currently there are two public rAthena IRC channels:


\#rathena & \#rathena-dev Channel Rules
**These rules are *in addition* to the Rizon IRC Rules** (which are sent to your IRC client in the MOTD when you connect).

The IRC rules were drafted to maintain peace. Anyone, including people with ranks, are not above the rules. If one fails to comply with the rules, he/she will be banned/kick, under the discretion of the channel operators. The decision of the channel operators are final, and arguing with the operators will only bring you a longer ban period.

`1.Â NoÂ channel/ROÂ serverÂ advertisingÂ inÂ anyÂ form.`

There should be absolutely no private server advertisements of any form. An exception applies if the person is asking for support on a particular issue related to rAthena, including but not limited to Control Panel Setups/Third Party Support.
2. No color abuse (including ascii/extended ascii/color art). Abuse of colored text/ascii/extended ascii is strictly not allowed. Deliberate attempts will result in a ban. There are many other ways to emphasize your text, for example, using _underscores_.
3. No custom IRC bots are allowed. Automated scripts/bots that reply automatically to conversations or specific triggers are not allowed, with the exception of those given consent. Permitted bots include only Wat and Logbot (see below).
4. No racism/bigotry discussion are allowed. Racism of any form, whether direct or indirect, is not allowed. Links to racism-related sites are also not allowed.
5. No pornography/warez links in any form or method. Links to any objectionable website (those not suitable to be viewed by a minor) is not allowed. Pornography of any form, including partial nudity, is greatly frowned upon by community members. Discussion of other illegal materials, including but not limited to warez (illegal, non-licensed software products) on the channel is also prohibited.
6. Comparison between rA and other RO emulators are allowed, with moderation. No comparison, or discussion, in any aspect with regards to other implementations of Aegis, is not allowed. An exception is made for developers and bug-reporters discussing the behavior of Aegis in gameplay as compared to rAthena.
7. Excessive trolling = ban. Causing deliberate annoyance to channel users is greatly frowned upon, and violators of this rule will be seriously dealt with.
8. Do not abuse the channel bot commands (including spamming). Falls under "causing annoyance to other users".
9. No heavy nick changing/excessive channel hopping are allowed Falls under "causing annoyance to other users".
10. No impersonating members of rA forum admins/moderators/channel operators on the IRC server. One shall not impersonate (which means, pretend to be) any member of rAthena, especially the Administrators, Moderators, Support Leaders and Channel Operators.
11. Do not insult any other user in the channel. A rule of thumb: â€œTreat others as you want to be treatedâ€. This means there is no toleration of calling people names, or otherwise playing \*god\* to them.

`12.Â DoÂ notÂ attemptÂ toÂ profitÂ offÂ rAthenaÂ throughÂ anyÂ possibleÂ means.`

This is in relation to rule \#1.

`13.Â Non-EnglishÂ chattingÂ isÂ allowedÂ butÂ shouldÂ beÂ keptÂ toÂ aÂ minimum.`

Non-English usage is tolerable, however, it should be minimal. Most of the people who participate in the rAthena IRC channels are only English-speaking. Use the International Support Forums instead for rAthena support.

`FailureÂ toÂ abideÂ byÂ theÂ rulesÂ willÂ resultÂ in:`
`1.Â BeingÂ kickedÂ outÂ fromÂ theÂ channelÂ (forÂ firstÂ andÂ possiblyÂ secondÂ offence)`
`2.Â TemporaryÂ ban.`
`3.Â PermanentÂ ban.Â (orÂ possiblyÂ aÂ network-wideÂ ban)`

Links
Here you will find links for IRC clients and other related things.

Windows IRC Clients

\*Nix Clients
The \*NIX clients differ. you need to grab the one that best suits your \*nix operating system.


[Category:rAthena](/Category:rAthena "wikilink")

============================================================

## Isbegin_quest

Syntax

Description
Return the state of the quest:

| Value | Description                                                   |
|-------|---------------------------------------------------------------|
| **0** | Quest not started (not in quest log)                          |
| **1** | Quest has been given (state is either "inactive" or "active") |
| **2** | Quest completed                                               |

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Isday

Syntax

Description
These functions determine whether server day or night cycle is currently in effect or not. If the server night is in effect, isday and isnight will return 0 and 1, otherwise 1 and 0 respectively.

Examples
[`if`](/if "wikilink")`(!isday())`
`{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "IÂ doÂ notÂ workÂ atÂ night,Â comeÂ againÂ tomorrow.";`
`Â Â Â Â `[`close`](/close "wikilink")`;`
`}`

`if(isnight())`
`{`
`Â Â Â Â mesÂ "IÂ doÂ notÂ workÂ atÂ night,Â comeÂ againÂ tomorrow.";`
`Â Â Â Â close;`
`}`

These two script fragments achieve the same effect.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Isequipped

Syntax

Description
This function will return 1 if the invoking character has all of the item IDs given equipped (if card IDs are passed, then it checks if the cards are inserted into slots in the equipment they are currently wearing). Theoretically there is no limit to the number of items that may be tested for at the same time. If even one of the items given is not equipped, 0 will be returned.
The function was meant for item scripts to support the cards released by Gravity in February 2005, but it will work just fine in normal NPC scripts.

Examples
`//Â (Poring,SantaÂ Poring,Poporing,Marin)`
[`if`](/if "wikilink")`Â (isequipped(4001,4005,4033,4196))Â `[`mes`](/mes "wikilink")`Â "Wow!Â You'reÂ wearingÂ aÂ fullÂ complementÂ ofÂ possibleÂ poringÂ cards!";`
`//Â (Poring)`
[`if`](/if "wikilink")`Â (isequipped(4001))Â `[`mes`](/mes "wikilink")`Â "AÂ poringÂ cardÂ isÂ useful,Â don'tÂ youÂ think?";`
`Â Â Â `

You can also have the checks in an item script:
**{** [if](/if "wikilink")(isequipped(1602,4004,4004,4004,4004)) {

`Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "AwardedÂ +3Â IntÂ forÂ havingÂ 4Â DropsÂ CardsÂ inÂ aÂ Rod[4].";Â `[`bonus`](/bonus "wikilink")`Â bInt,10;`
`}Â `[`else`](/else "wikilink")`Â {Â `
`Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "4Â DropsÂ CardsÂ inÂ aÂ Rod[4]Â forÂ anÂ extraÂ bonus!";`
`}Â `**`}`**`,`**`{}`**`,`**`{}`**

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Isequippedcnt

Syntax

Description
This function is similar to [isequipped](/isequipped "wikilink"), but instead of 1 or 0, it will return the number of cards in the list given that were found on the invoking character.

If a given parameter is not a card, the function returns the amount of that item equipped on the invoking character.

Example
[`if`](/if "wikilink")`Â (`**`isequippedcnt`**`(4001,4005,4033,4196)=4)Â `[`mes`](/mes "wikilink")`Â "FinallyÂ gotÂ allÂ fourÂ poringÂ cards?";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Isloggedin

Syntax

Description
This function checks, whether an character with given [account id](/AID "wikilink") is currently online (1) or not (0). Additionally a [char id](/CID "wikilink") can be specified, for exact character matching.

Examples
[`input`](/input "wikilink")`Â .@aid;`
`if(isloggedin(.@aid))`
`{`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "AÂ characterÂ withÂ accountÂ idÂ "+.@aid+"Â isÂ currentlyÂ around.";`
`}`
`else`
`{`
`Â Â Â Â mesÂ "Sorry,Â thereÂ isÂ noÂ characterÂ onlineÂ withÂ accountÂ idÂ "+.@aid+",";`
`Â Â Â Â mesÂ "orÂ theÂ accountÂ doesÂ notÂ exist.";`
`}`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Ispartneron

Syntax

Description
The function will [return](/return "wikilink") 1 if the attached character's marriage partner is online. And it'll [return](/return "wikilink") 0 if the character's marriage parter is offline or the character do not have any partner.

Examples
[`if`](/if "wikilink")`Â (ispartneron())Â {`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "ItÂ looksÂ likeÂ yourÂ partnerÂ isÂ online!";`
`}Â `[`else`](/else "wikilink")`Â {`
`Â Â Â Â mesÂ "YourÂ parternÂ isÂ offlineÂ orÂ youÂ doÂ notÂ haveÂ one.";`
`}`
[`close`](/close "wikilink")`;`

See Also

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Is_clientver

Syntax

Description
Checks a character's client version against a specified value. If no char id is given, the command will run for the invoking character. The function will return 1 if the player's version is greater than or equal to the value, and 0 otherwise.

Available types are:

`0Â -Â versionÂ numberÂ (packet_db_ver)`
`1Â -Â clientÂ dateÂ (YYYYMMDD)`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Jobchange

Syntax

Description
This command will change the job class of the invoking character. It does work using the job IDs, but you can also use job names. The full list of job names and the IDs they correspond to can be found in .

This command will also set a permanent character-based variable 'jobchange_level' which will contain the job level at the time right before changing jobs, which can be checked for later in scripts.

**NOTE:** 'upper flag' can alternatively be used to specify the type of job one changes to.

Upper Values
| Value         | Description                    |
|---------------|--------------------------------|
| -1 or not set | Preserves the current job type |
| 0             | Normal/Standard Classes        |
| 1             | High/Advanced Classes          |
| 2             | Baby Classes                   |

Examples
`Â Â Â //Â ThisÂ wouldÂ changeÂ yourÂ playerÂ intoÂ aÂ Swordman`
`Â Â Â `**`jobchange`**`Â 1;`
`Â Â Â `
`Â Â Â //Â ThisÂ wouldÂ changeÂ yourÂ playerÂ intoÂ aÂ SwordmanÂ High`
`Â Â Â `**`jobchange`**`Â 4002;Â `
`Â Â Â `
`Â Â Â //Â ThisÂ wouldÂ changeÂ yourÂ playerÂ intoÂ aÂ Swordman`
`Â Â Â `**`jobchange`**`Â Job_Swordman;Â `
`Â Â Â `
`Â Â Â //Â ThisÂ wouldÂ changeÂ yourÂ playerÂ intoÂ aÂ SwordmanÂ High`
`Â Â Â `**`jobchange`**`Â Job_Swordman_High;Â `
`Â Â Â `
`Â Â Â //Â ThisÂ wouldÂ changeÂ theÂ characterÂ toÂ aÂ highÂ swordsman.Â `
`Â Â Â `**`jobchange`**`Â Job_Swordman,1;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Jobname

Syntax

Description
This command retrieves the name of the given job using the entries 550 -&gt; 650.

Examples
`Â Â Â `[`mes`](/mes "wikilink")`Â "[Kid]";`
`Â Â Â `[`mes`](/mes "wikilink")`Â "IÂ neverÂ thoughtÂ I'dÂ meetÂ aÂ "+`[`jobname`](/jobname "wikilink")`(Class)+"Â hereÂ ofÂ allÂ places.";`
`Â Â Â `[`close`](/close "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Killerrid

Syntax
[killerrid](/killerrid "wikilink")

Explanation
This special variable is set when a player dies and [OnPCDieEvent](/OnPCDieEvent "wikilink") is triggered. [killerrid](/killerrid "wikilink") is set to the [RID](/RID "wikilink") of the killer.

You can use [rid2name](/rid2name "wikilink")([killerrid](/killerrid "wikilink")) to get the player name.

Examples
This will announce the KillerName and the name of player that has been killed.

`-Â Â scriptÂ Â pvp_die_messageÂ -1,{`
[`OnPCDieEvent`](/OnPCDieEvent "wikilink")`:`
`Â Â Â `[`announce`](/announce "wikilink")`Â `[`rid2name`](/rid2name "wikilink")`(`[`killerrid`](/killerrid "wikilink")`)Â +Â "Â justÂ killedÂ "Â +Â `[`strcharinfo`](/strcharinfo "wikilink")`(0),bc_all;`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Killmonster

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will kill all monsters that were spawned with '[monster](/monster "wikilink")' or '[areamonster](/areamonster "wikilink")' and have a specified event label attached to them. Commonly used to get rid of remaining quest monsters once the quest is complete.

If the label is given as "All", all monsters which have their respawn times set to -1 (like all the monsters summoned with '[monster](/monster "wikilink")' or '[areamonster](/areamonster "wikilink")' script command, and all monsters summoned with GM commands, but no other ones - that is, all non-permanent monsters) on the specified map will be killed regardless of the event label value.

As of r12876 [killmonster](/killmonster "wikilink") now supports an optional argument type. Using 1 for type will make the command fire "OnMyMobDead" events from any monsters that do die as a result of this command.

============================================================

## Loops

What are loops?
Loops are things made to make your life easier, at least, if you know how to use them. Loops can be powerfull when used right, but can also bring down any script. Loops come in handy when you need to go through a array, or when you need to do the same thing x times after eachother. The loops available in the Athena scripting language are For, While and Do ... While. All of those will be covered in this article, with their own examples. Also, the special loop commands break; and continue; will be covered. The intention of this page is that you will get to understand how loops work, and how to use them properly.

### [For Loop](/wikipedia:For_loop "wikilink")

The for loop is probably the most seen loop used in rAthena scripting, this is usually used to loop through arrays and execute a series of commands for each array entry. But you can use it every time you need to execute a series of commands x times. For loops are build up of 3 or 4 parts, depending on how they are used. The general buildup for a For loop is as following:

`forÂ (initialization(1);Â condition(2);Â update(3))Â {`
`Â Â Â CodeÂ toÂ execute(4);`
`}`

If you don't know what all parts do, don't panic, since I'm going to explain that now ;)


After all that explaining, it's time for a little example:

[`for`](/for "wikilink")`Â (setÂ @i,0;Â @iÂ <Â 10;Â setÂ @i,@i+1)Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â @i;`
`}`

This is one of the most simple for loops you can think of, but it serves well as executable example. When this for loop is started, a message window will be created with the following context:

    0
    1
    2
    3
    4
    5
    6
    7
    8
    9

Note that the 10 is not there, since @i &lt; 10 is false when @i is 10. What the loops does is the same as explained above. Firstly, the initilization is done (set @i,0;) and the expression is evaluated. Then, the code is executed (mes @i;) and the end of the loop is reached, so it jumps back to the first part, and executes the action (set @i,@i+1) (See how this replaces the initialization part?). Then it starts evaluating the expression (@i &lt; 10), which is true since @i is 1. Because the expression is true, the code inside of the curlies is executed. This keeps on going until the expression is false, which will happen once @i is 10. As soon as that happens, it quits the loop and continues on the first line after the closing curly.

### [While Loop](/wikipedia:While_loop "wikilink")

This loop is almost the same as a for loop, but less automated. With this loop, you'll have to initialize the variable yourself, and increase it yourself. In some situations, this is better then the for loop. The general format for a while loop only contains out of two parts:

`whileÂ (expression(1))Â {`
`Â Â Â CodeÂ toÂ execute(2);`
`}`

Both of these parts are the same as in the for loop, and the way it works is also similar. When the code is reached, the while loop evaluates the expression. If that expression returns true, the code will be executed. A while loop will only stop when break; is used, or the expression returns false. A simple example, doing the same as in the for loop example above, is this:

    set @i,0;
    while (@i < 10) {
        mes @i;
        set @i,@i+1;
    }

The result will be exactly the same. As long as @i is smaller then 10, the code is executed. While loops can be used for a lot of things, including a (theoretically) never ending cycle:

    while (1) {
        mes "I won't go away!";
        next;
    }

Note that the above is a script that will need you to relog!

### [Do ... While Loop](/wikipedia:Do_while_loop "wikilink")

Ah... We've already reached the last loop type. Wow, I actually managed to write stuff about the for and while loop eh... Well then. This loop is basically the same as a while loop, only the way it is executed is slightly different (and the same goes for the coding). Since there isn't much I can explain on loops anymore, I'll just start with the general format:

    do {
        Code to execute(1)
    } while (expression(2));

See how the code and expression changed? Basically, this is a inverted while loop, and the do is only there to let the engine know there is a loop. Once this part of code is reached, the code will be executed first (!). Once the code is executed, the expression is evaluated. If the expression returns true, it loops back to the do, and runs the code again. If you noticed that this way, the code is always executed at least once, good job =). If you didn't, well, then you know it now :P. This is because the engine executes scripts from top to bottom (excluded goto's and such), that way, the engine will first find the do {, then the code, and then the while. Again, the simple example from before:

[`set`](/set "wikilink")`Â @i,0;`
[`do`](/do "wikilink")`Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â @i;`
`Â Â Â `[`set`](/set "wikilink")`Â @i,@i+1;`
`}Â `[`while`](/while "wikilink")`Â (@iÂ <Â 10);`

Again, the results will be the same. In terms of executing, the initialization is done before the do, then the code is executed and the counter is increased. Then the expression is evaluated, and when it returns true, jump back to the do. Also, this is a little more dangerous version of while. Because the expression is evaluated afterwords, using it incorrectly will cause a infinity loop. A BAD example is this:

[`set`](/set "wikilink")`Â @i,0;`
[`do`](/do "wikilink")`Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â @i;`
`Â Â Â `[`set`](/set "wikilink")`Â @i,@i+1;`
`}Â `[`while`](/while "wikilink")`Â (@iÂ !=Â 0);`

Note that this easily happens when comparing two variables in the expression.

### Break and Continue

These two commands are really useful when executing loops, since they can skip parts of the loop, which decreases the execution time. break; completely exits a loop, while continue; will only skip the rest of the current run.

Once a break; is encountered, the script directly jumps to the line after the loop's body, and thus exiting the loop. For example:

    for (set @i,0; @i < 10; set @i,@i+1) {
        if (@i == 4) break;
        mes @i;
    }

This will break out of the loop once @i is equal to 4, meaning the the result of this loop is:

    0
    1
    2
    3

Continue also quits a part of the loop, but will jump to the last line (or the beginning) of the loop. That way, only that run of the loop is not executed. A simple example for continue:

    for (set @i,0; @i < 10; set @i,@i+1) {
        if (@i > 5 && @i <= 8) continue;
        mes @i;
    }

This will return:

    0
    1
    2
    3
    4
    5
    9
    10

The 'mes @i;' code is not executed when the if in front of the continue; is true, which is for @i &gt; 5 and @i &lt;= 8 (5,6,7,8) and thus, those will not be shown in the message window.

Final notes
I might add some more to this page once I think of things missing. Do not hesitate to add them yourself, or to contact me if you don't dare to edit this page ;P. Good luck with loops =) -- Yhn 15:51, 28 June 2007 (CDT)

One note by me: when your loop has only one line (aside from the command word/s), you can dispose of the { }. One line can be:

     if (@a != <nowiki>@b)</nowiki>
         getmapinfo @map$,@x,@y,0;
     else if (@a > <nowiki>@b)</nowiki>
          set @c,getcharid(3);
     else if (@a < <nowiki>@b)</nowiki>
          announce "Foo",bc_map|bc_yellow;
     else
          close;

[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Lua

Lua Background Information
What is Lua?
Lua is a powerful, fast, lightweight, embeddable scripting language.

Lua combines simple procedural syntax with powerful data description constructs based on associative arrays and extensible semantics. Lua is dynamically typed, runs by interpreting bytecode for a register-based virtual machine, and has automatic memory management with incremental garbage collection, making it ideal for configuration, scripting, and rapid prototyping.

Where does Lua come from?
Lua is designed, implemented, and maintained by a team at PUC-Rio, the Pontifical Catholic University of Rio de Janeiro in Brazil. Lua was born and raised in Tecgraf, the Computer Graphics Technology Group of PUC-Rio, and is now housed at Lablua. Both Tecgraf and Lablua are laboratories of the Department of Computer Science of PUC-Rio.

What does Lua stand for?
"Lua" (pronounced LOO-ah) means "Moon" in Portuguese. As such, it is neither an acronym nor an abbreviation, but a noun. More specifically, "Lua" is a name, the name of the Earth's moon and the name of the language. Like most names, it should be written in lower case with an initial capital, that is, "Lua". Please do not write it as "LUA", which is both ugly and confusing, because then it becomes an acronym with different meanings for different people. So, please, write "Lua" right!

Lua and RO
What's it used for?
### The client itself

First application of Lua appeared in the client as a means of customizing the Homunculus and Mercenary AI. Later, Gravity started to move out a lot of hard-coded data and functionality inside the client into Lua scripts, causing X-ray clients to become obsolete.

### The Ragnarok Online Patcher

Recently, the patch and skin information of the official patcher is Lua-based as well, stored in nine files spanning five folders.

[Lua](/wikipedia:Lua_(programming_language) "wikilink") is a free scripting language, which can be both embedded or stand-alone.

How do we use it?
### Client-side gibberish

If you're using Lua files from Gravity, chances are your files are encoded. When you open up a .lua file, you'll notice 2 things.

#### ASCII

Lots and lots of ASCII characters depending on what kind of editor you use:
Notepad
[<File:Accname.lub-notepad.png>](/File:Accname.lub-notepad.png "wikilink")
[Notepad++](http://notepad-plus-plus.org/)
[<File:Accname.lub-notepadpp.png>](/File:Accname.lub-notepadpp.png "wikilink")

#### English

You'll notice some English words that you may find familiar, be it headgear names, job classes, NPC sprites etc. You can manipulate this data to directly affect the client. The most popular reasons for editing the Lua files is to create [Custom Items](/Custom_Items#View_IDs.2C_Having_A_Custom_Item_Without_Xray "wikilink")

### Client-side un-gibberish

The Translation Project team have been keeping their SVN repository up to date with the latest Lua files. They're in plain English, and readable. This makes editing them a whole lot easier!

[Lua_Project](http://subversion.assembla.com/svn/ClientSide/Lua_Project/)

Misc.
A number of development branches have arisen which intended to replace the Athena Scripting Language with Lua, but as of today none have been completed.

External Links

[:Category:Customization](/:Category:Customization "wikilink")

============================================================

## Main_Page

<table>
<tbody>
<tr class="odd">
<td></td>
</tr>
<tr class="even">
<td><p>style=&quot;background: #FCFCFC; border: 1px solid #AAA; vertical-align: top;&quot;</p></td>
</tr>
</tbody>
</table>

|                                                                             |                                                                                                                                            |                                                                             |                                                                                                                                            |                                                                             |                                                                                                                                            |
|-----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| style="background: \#FCFCFC; border: 1px solid \#AAA; vertical-align: top;" | <div style="background: #ACD; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 120%;">
                                                                               **[Getting Started](/Getting_Started "wikilink")**

                                                                               </div>
                                                                               <div style="background: #FCFCFC; vertical-align: top; padding: 5px; margin: 3px; font-size: 120%;text-align: center;font-weight: bold;">
                                                                               [128px|center|link=Getting_Started](/File:Getstarted.png "wikilink") Where Do I Start?

                                                                               <hr>
                                                                               </div>
                                                                               <div>

                                                                               </div>                                                                                                                                      | style="background: \#FCFCFC; border: 1px solid \#AAA; vertical-align: top;" | <div style="background: #ACD; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 120%;">
                                                                                                                                                                                                                                                                                                          **[Configure](/:Category:Configuration "wikilink") your Server**

                                                                                                                                                                                                                                                                                                          </div>
                                                                                                                                                                                                                                                                                                          <div style="background: #FCFCFC; vertical-align: top; padding: 5px; margin: 3px; font-size: 120%;text-align: center;font-weight: bold;">
                                                                                                                                                                                                                                                                                                          [128px|center|link=:Category:Configuration](/File:Configserver.png "wikilink") Making rAthena Work

                                                                                                                                                                                                                                                                                                          <hr>
                                                                                                                                                                                                                                                                                                          </div>
                                                                                                                                                                                                                                                                                                          <div>

                                                                                                                                                                                                                                                                                                          </div>                                                                                                                                      | style="background: \#FCFCFC; border: 1px solid \#AAA; vertical-align: top;" | <div style="background: #ACD; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 120%;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     **[Setup the Client](/:Category:Client_Configuration "wikilink")**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <div style="background: #FCFCFC; vertical-align: top; padding: 5px; margin: 3px; font-size: 120%;text-align: center;font-weight: bold;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     [128px|center|link=:Category:Client_Configuration](/File:Configclient.png "wikilink") Creating Connections

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     </div>                                                                                                                                      |

|                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                             |                                                                                                                                            |
|-----------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| style="background: \#FCFCFC; border: 1px solid \#AAA; vertical-align: top;" | <div style="background: #ACD; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 120%;">
                                                                               **Editing the Wiki**

                                                                               </div>
                                                                               <div style="padding: 1em;">
                                                                               All users must login to the wiki using their forum account. Any member with more than 1 post on the forums can edit the wiki, but please keep in mind that the rAthena wiki is released under the [GNU Free Documentation License](/wikipedia:GNU_Free_Documentation_License "wikilink") Version 1.2. This means that the wiki and any works put on it can be edited at will. They may also be distributed, provided all history and copylefts remain intact. Please see [Editing the wiki](/Editing_the_wiki "wikilink") for more information.

                                                                               Don't know where to start? Check the [Special:WantedPages](/Special:WantedPages "wikilink") page and create a page that is listed there!

                                                                               Please do not create pages for custom content, such as custom projects not relating to rAthena in any way. A full list of content that should not be on the wiki is listed at [Editing the wiki](/Editing_the_wiki "wikilink").

                                                                               Please see [Wiki Projects](/:Category:Wiki_Projects "wikilink") for any ongoing projects that you might be able to help with!

                                                                               </div>
                                                                               <div style="background: #ACD; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 120%;">
                                                                               **Quick Tips**

                                                                               </div>
                                                                               <div>

                                                                               </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | style="background: \#FCFCFC; border: 1px solid \#AAA; vertical-align: top;" | <div style="background: #ACD; border: 1px solid #7BC; padding: 5px; margin: 3px; font-weight: bold; text-align: center; font-size: 120%;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               **Wiki Rewards**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <div style="padding: 1em;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               [50px|center](/File:Wiki1.png "wikilink")

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Did you know that you can be awarded a special set of [badges](http://rathena.org/board/jawards/) for helping to maintain the wiki?

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               [center](/File:WikiLeader.png "wikilink")

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Members that contribute to our project by fixing broken pages can also be awarded the Wiki Leader position.

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </div>                                                                                                                                      |

============================================================

## Map

All functions inside map.c and map.h will go here. this deals with how the map compiling will work

[Map SetGatCell](/Map_SetGatCell "wikilink")

[Map Gat2Cell](/Map_Gat2Cell "wikilink")

[Map Cell2gat](/Map_Cell2gat "wikilink")

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Mapflag

A Map Flag describes restrictions, properties, and behaviors of a certain map. The map flags alter the behavior of the map regarding teleporting, storing location when disconnected, dead branch usage, penalties upon death, PVP behaviour, WoE behavior, ability to use skills or open up trade deals, current weather effects, and whether day/night will be in effect on this map.

Map flags can be found in the folder. However, some existing map flags do not have their own file in that folder therefore one might be required to create it and add it in using the same format as previous entries. All existing map flags can be found in , prefixed by *mf_*, which is not needed whenever you set it.

Do note that Map Flags are not restricted to the folder, for it can also be defined in any another script as long as that script is loaded into the map server and proper syntax is used.

Syntax and Setting
<code>

    <map name>%TAB%mapflag%TAB%<flag>%TAB%<extra>

</code>

**Map Name**: Replace it with the name of the map you wish to apply the map flag to. You do not have to include .gat at the end of the map name.
**mapflag**: Describes that it is a map flag.
**Flag**: Replace it with the map flag you wish to use such as novending, nocommands, restricted
**Extra**: Required only with some map flagg. Please check individual map flag articles for this part.

Map Flags in Scripts
Map Flags are utilized by the following script commands. Please visit individual articles for descriptions.


Flags
Below is a list of all the flags and their descriptions.

### allowks


### autotrade


### battleground


### bexp


`pronteraÂ Â Â mapflagÂ bexpÂ Â Â Â 125`

### clouds


### clouds2


### fireworks


### fog


### guildlock


### gvg


### gvg_castle


### gvg_dungeon


### gvg_noparty


### indoors


### jail


<code>

    //= pvp: Turns on PvP mode
    //= pvp_noparty: Can't attack player in same party
    //= nobranch: No Dead Branching allowed.
    //= nomemo: No Warp Portal Memory Point allowed.
    //= nopenalty: No Exp. penalty when player dies.
    //= nosave: No saving respawn point allowed. Use SavePoint to use the
    //=                players previous savepoint, or choose one manually.
    //= noteleport: No Teleporting allowed.  No f-wings or b-wings.

</code>

### jexp


### leaves


### loadevent


### monster_noteleport


### nightenabled


### nobaseexp


### nobranch


*Note: list of these items is [hardcoded](/wikipedia:Hard_coding "wikilink").*
*See also: [mob_warp](/mob_warp "wikilink").*

### nochat


### nocommand


`pronteraÂ Â Â ma`

### nodrop


### noexp


### noexppenalty


*See also: [death_penalty_type](/death_penalty_type "wikilink")*

### nogo


### noicewall


### nojobexp


### noloot


*Note: noloot mapflags work on monsters only. Looted items will always drop.*

### nomemo


### nomobloot


### nomvploot


### nopenalty


### nopvp


### noreturn


*Note: list of these items is [hardcoded](/wikipedia:Hard_coding "wikilink").*

### nosave


### noskill


### noteleport


*Note: list of these items is [hardcoded](/wikipedia:Hard_coding "wikilink").*

### notrade


### novending


### nowarp


### nowarpto


### nozenypenalty


### partylock


### pvp


### pvp_nightmaredrop


<code>

    map_name<TAB>mapflag pvp_nightmaredrop<TAB>id,type,percent

</code>


<!-- -->


### pvp_nocalcrank


### pvp_noguild


### pvp_noparty


### restricted.txt


### sakura


### snow


### town


The format for this file is:

<code>

    map_name<TAB>mapflag restricted<TAB>zone_number

</code>

The zone number is set in and

[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## MapRespawnGuildID

Syntax

Description
This command goes through the specified map and for each player and monster found there does stuff.

Type Values
Flag is a bit-mask (add up numbers to get effects you want)

| Value | Description                                                                    |
|-------|--------------------------------------------------------------------------------|
| 1     | Warp all guild members to their save points.                                   |
| 2     | Warp all non-guild members (including guildless players) to their save points. |
| 4     | Remove all monsters which are not guardian or Emperium.                        |

Flag 7 will, therefore, mean 'wipe all mobs but guardians and the Emperium and kick all characters out', which is what the official scripts do upon castle surrender. Upon start of WoE, the scripts do 2 (warp all intruders out).

Example
For examples, check the WoE scripts in the distribution.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Marriage

Syntax

Description
This function will marry two characters, the [invoking character](/RID#Usage "wikilink") and the one referred to by given *spouse name*, together, setting them up as each other's marriage partner. No second function call has to be issued to make sure the marriage works both ways.

The function returns 1 upon success, or 0 if the marriage could not be completed, either because the other character was not found, because one of the two characters is already married or a baby character.

This will do nothing else for the marriage except setting up the spouse ID for both of these characters. No rings will be given and no effects will be shown.

Examples
[`if`](/if "wikilink")`(`[`isloggedin`](/isloggedin "wikilink")`(`[`getcharid`](/getcharid "wikilink")`(3,$wed_groom$)))`
`{`
`Â Â Â Â if(marriage($wed_groom$))`
`Â Â Â Â {`
`Â Â Â Â Â Â Â Â //CallÂ WeddingÂ effect`
`Â Â Â Â Â Â Â Â `[`wedding`](/wedding "wikilink")`;`
`Â Â Â Â Â Â Â Â //GiveÂ ringÂ toÂ Bride,Â andÂ changeÂ toÂ weddingÂ sprite.`
`Â Â Â Â Â Â Â Â `[`sc_start`](/sc_start "wikilink")`Â SC_Wedding,3600000,1;`
`Â Â Â Â Â Â Â Â `[`getitem`](/getitem "wikilink")`Â 2635,1;Â //Bride_Ring`

The core part of the marriage script, where the actual marriage takes place.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Md5

Syntax

Description
Returns the [md5 hash](/wikipedia:MD5 "wikilink") of given value.

Examples
[`mes`](/mes "wikilink")`Â md5(12345);Â Â //Â numbersÂ areÂ interpretedÂ asÂ strings`
`mesÂ md5("12345");`

Both outputs "827ccb0eea8a706c4c34a16891f84e7b".

`mesÂ md5("textÂ toÂ beÂ hashed");`

Outputs "187a99080cdf39f6d1f2b3f5f2f2105f".

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Menu

Syntax

Description
This command will create a selectable menu for the invoking character. Only one menu can be on screen at the same time.

Depending on what the player picks from the menu, the script execution will continue from the corresponding label (it's string-label pairs, not label-string).

Options can be grouped together, separated by the character ':'.

`menuÂ "A:B",L_Wrong,"C",L_Right;`

It also sets a special temporary character variable @menu, which contains the number of option the player picked. (Numbering of options starts at 1.) This number is consistent with empty options and grouped options.

Examples
`Â Â Â `[`menu`](/menu "wikilink")`Â "A::B",L_Wrong,"",L_Impossible,"C",L_Right;`
`L_Wrong:`
`Â Â Â //Â IfÂ theyÂ clickÂ "A"Â orÂ "B"Â theyÂ willÂ endÂ upÂ here`
`Â Â Â //Â @menuÂ ==Â 1Â ifÂ "A"`
`Â Â Â //Â @menuÂ ==Â 2Â willÂ neverÂ happenÂ becauseÂ theÂ optionÂ isÂ empty`
`Â Â Â //Â @menuÂ ==Â 3Â ifÂ "B"`
`L_Impossible:`
`Â Â Â //Â EmptyÂ optionsÂ areÂ notÂ displayedÂ andÂ thereforeÂ can'tÂ beÂ selected`
`Â Â Â //Â thisÂ labelÂ willÂ neverÂ beÂ reachedÂ fromÂ theÂ menuÂ command`
`L_Right:`
`Â Â Â //Â IfÂ theyÂ clickÂ "C"Â theyÂ willÂ endÂ upÂ here`
`Â Â Â //Â @menuÂ ==Â 5`

If a label is '-', the script execution will continue right after the menu command if that option is selected, this can be used to save you time, and optimize big scripts.

`Â Â Â `[`menu`](/menu "wikilink")`Â "A::B:",-,"C",L_Right;`
`Â Â Â //Â IfÂ theyÂ clickÂ "A"Â orÂ "B"Â theyÂ willÂ endÂ upÂ here`
`Â Â Â //Â @menuÂ ==Â 1Â ifÂ "A"`
`Â Â Â //Â @menuÂ ==Â 3Â ifÂ "B"`
`L_Right:`
`Â Â Â //Â IfÂ theyÂ clickÂ "C"Â theyÂ willÂ endÂ upÂ here`
`Â Â Â //Â @menuÂ ==Â 5`

Both these examples will perform the exact same task.

If you give an empty string as a menu item, the item will not display. This can effectively be used to script dynamic menus by using empty string for entries that should be unavailable at that time.

You can do it by using arrays, but watch carefully - this trick isn't high wizardry, but minor magic at least. You can't expect to easily duplicate it until you understand how it works.

Create a temporary array of strings to contain your menu items, and populate it with the strings that should go into the menu at this execution, making sure not to leave any gaps. Normally, you do it with a loop and an extra counter, like this:

[`setarray`](/setarray "wikilink")`Â @possiblemenuitems$[0],`<list of potential menu items>`;`
[`set`](/set "wikilink")`Â @j,0;Â //Â That'sÂ theÂ menuÂ linesÂ counter.`
`//Â WeÂ loopÂ throughÂ theÂ listÂ ofÂ possibleÂ menuÂ items.`
`//Â @iÂ isÂ ourÂ loopÂ counter.`
[`for`](/for "wikilink")`(Â `[`set`](/set "wikilink")`Â @i,0;Â @i<`[`getarraysize`](/getarraysize "wikilink")`(@possiblemenuitems$)Â ;Â `[`set`](/set "wikilink")`Â @i,@i+1Â )`
`{`
`Â Â Â //Â ThatÂ 'condition'Â isÂ whateverÂ conditionÂ thatÂ determinesÂ whetherÂ `
`Â Â Â //Â aÂ menuÂ itemÂ numberÂ @iÂ actuallyÂ goesÂ intoÂ theÂ menuÂ orÂ not.`
`Â Â Â `
`Â Â Â `[`if`](/if "wikilink")`Â (`<condition>`)`
`Â Â Â {`
`Â Â Â Â Â Â Â //Â WeÂ recordÂ theÂ optionÂ intoÂ theÂ listÂ ofÂ optionsÂ actuallyÂ available.`
`Â Â Â Â Â Â Â `
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â @menulist$[@j],Â @possiblemenuitems$[@i];`
`Â Â Â Â Â Â Â `
`Â Â Â Â Â Â Â //Â WeÂ justÂ copiedÂ theÂ string,Â weÂ doÂ needÂ it'sÂ numberÂ forÂ laterÂ `
`Â Â Â Â Â Â Â //Â though,Â soÂ weÂ recordÂ itÂ asÂ well.`
`Â Â Â Â Â Â Â `
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â @menureference[@j],@i;`
`Â Â Â Â Â Â Â `
`Â Â Â Â Â Â Â //Â SinceÂ we'veÂ justÂ addedÂ aÂ menuÂ itemÂ intoÂ theÂ list,Â weÂ incrementÂ `
`Â Â Â Â Â Â Â //Â theÂ menuÂ linesÂ counter.`
`Â Â Â Â Â Â Â `
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â @j,@j+1;`
`Â Â Â }`
`Â Â Â `
`Â Â Â //Â WeÂ goÂ onÂ toÂ theÂ nextÂ possibleÂ menuÂ item.`
`}`

This will create you an array @menulist$ which contains the text of all items that should actually go into the menu based on your condition, and an array @menureference, which contains their numbers in the list of possible menu items. (Remember, arrays start with 0.) There's less of them than the possible menu items you've defined, but the menu command can handle the empty lines - only if they are last in the list, and if it's made this way, they are. Now comes a dirty trick:

`Â Â Â //Â XÂ isÂ whateverÂ theÂ mostÂ menuÂ itemsÂ youÂ expectÂ toÂ handle.`
`Â Â Â `[`menu`](/menu "wikilink")`Â @menulist$[0],-,@menulist$[1],-,....@menulist$[`<X>`],-;`

This calls up a menu of all your items. Since you didn't copy some of the possible menu items into the list, it's end is empty and so no menu items will show up past the end. But this menu call doesn't jump anywhere, it just continues execution right after the menu command. (And it's a good thing it doesn't, cause you can only explicitly define labels to jump to, and how do you know which ones to define if you don't know beforehand which options will end up where in your menu?) But how do you figure out which option the user picked? Enter the @menu.

**@menu** contains the number of option that the user selected from the list, starting with 1 for the first option. You know now which option the user picked and which number in your real list of possible menu items it translated to:

`mesÂ "YouÂ selectedÂ "+@possiblemenuitems$[@menureference[@menu-1]]+"!";`


made.


And @possiblemenuitems$\[@menureference\[@menu-1\]\] is the string that we used to display the menu line the user picked. (Yes, it's a handful, but it works.)

You can set up a bunch of 'if (@menureference\[@menu-1\]==X) goto Y' statements to route your execution based on the line selected and still generate a different menu every time, which is handy when you want to, for example, make users select items in any specific order before proceeding, or make a randomly shuffled menu.

Kafra code bundled with the standard distribution uses a similar array-based menu technique for teleport lists, but it's much simpler and doesn't use @menu, probably since that wasn't documented anywhere.

See also '[select](/select "wikilink")', which is probably better in this particular case. Instead of menu, you could use 'select' like this:

[`set`](/set "wikilink")`Â @dummy,Â `[`select`](/select "wikilink")`(@menulist$[0],@menulist$[1],....@menulist$[`<X>`]);`
`Â Â Â `

For the purposes of the technique described above these two statements are perfectly equivalent.

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Menus

Menus
Menu Command
The menu command is hardly used anymore, but can be helpful for a few quick setups.

    <menu option>
    ",<label>{,"

    <menu option>
    ",<label>,...}; // Thanks to Dj-Yhn

This command has two parts to it, the menu option (which is what the users see to select) and the label (where the menu option takes them if they select it)

### Example 1.1 - Standard Menu Command Setup

`menuÂ "OptionÂ 1",L_GoToOption1,"OptionÂ 2",L_GoToOption2;`
`L_GoToOption1:`
`mesÂ "YouÂ choseÂ optionÂ 1";`
`close;`
`L_GoToOption2:`
`mesÂ "YouÂ choseÂ optionÂ 2";`
`close;`

While this is nice, there is also a nifty little trick to this command. Notice that L_GoToOption1 is directly under the menu command itself? We don't need to use a label for this option, because we can tell the menu command to simply continue to the line down by replacing the label name in the menu line with a -.

### Example 1.2 - Optimizing the Menu Command

`menuÂ "OptionÂ 1",-,"OptionÂ 2",L_GoToOption2;`
`mesÂ "YouÂ choseÂ optionÂ 1";`
`close;`
`L_GoToOption2:`
`mesÂ "YouÂ choseÂ optionÂ 2";`
`close;`

Now we have a simplified menu command that only uses one label, rather than two.

Select Command
The Select command followed by the Prompt command are now usually the top two contenders for menu selection.


Rather than selecting an option and then moving to a label, you get a returned value for the option selected. @menu is a character variable that is set after selecting an option.

### Example 2.1 - Standard Select Command Setup

`selectÂ "OptionÂ 1","OptionÂ 2";`
`ifÂ (@menuÂ ==Â 1)Â {Â mesÂ "YouÂ choseÂ optionÂ 1";Â }`
`elseÂ {Â mesÂ "YouÂ choseÂ optionÂ 2";Â }`
`close;`

This can be further broken down into an even more efficient method.

### Example 2.2.1 - Optimizing the Select Command

`ifÂ (select("OptionÂ 1","OptionÂ 2")Â ==Â 1)Â {Â mesÂ "YouÂ choseÂ optionÂ 1";Â }`
`elseÂ {Â mesÂ "YouÂ choseÂ optionÂ 2";Â )`
`close;`

Select also has a different setup than the Menu Command. Notice that there are no labels anymore? That's because we use values returned rather than going to different places.

In the second example, you will notice that the select command can run with a single string separated by a colon for each option. This can be quite handy with arrays and dynamic menu setups, however that will come in a more later discussion.

For a simple method, I will demonstrate how to include a GM Option to your menu that only GM Players can see.

### Example 2.2.2 - Optimizing the Select Command

`switch(select("OptionÂ 1:OptionÂ 2"))Â {`
`Â Â caseÂ 1:`
`Â Â Â Â mesÂ "YouÂ choseÂ optionÂ 1";`
`Â Â Â Â break;`

`Â Â caseÂ 2:`
`Â Â Â Â mesÂ "YouÂ choseÂ optionÂ 2";`
`}`
`close;`

You can also jump right into the switch statement with the Select() command. Rather than using the predefined @menu variable, you can simply switch the command itself.

### Example 2.3 - Using a Unique Variable for Returning an Option Choice

`setÂ .@playerChoice,Â select("OptionÂ 1:OptionÂ 2");`
`setÂ .@myOtherChoice,Â select("OptionÂ 1:OptionÂ 2");`

By looking at these, if we were to only use the standard @menu, they would overwrite each other, simply for the fact that each one of them would attempt to store @menu as the index chosen. By placing a set and a variable before to the select returned value, we can now distinguish between the two menu options selected.

### Example 2.4 - Simple Dynamic Menu using Select

`setÂ .@menu$,Â "PlayerÂ OptionÂ 1:PlayerÂ OptionÂ 2";`
`ifÂ (getgmlevel()Â >=Â 99)Â {Â setÂ .@menu$,Â .@menu$Â +Â ":GMÂ Menu";Â }`
`switch(select(.@menu$))Â {`
`Â Â caseÂ 1:`
`Â Â Â Â mesÂ "PlayerÂ OptionÂ 1";`
`Â Â Â Â close;`
`Â Â caseÂ 2:`
`Â Â Â Â mesÂ "PlayerÂ OptionÂ 2";`
`Â Â Â Â close;`
`Â Â `
`Â Â caseÂ 3:`
`Â Â Â Â mesÂ "GMÂ Menu";`
`Â Â Â Â close;`
`}`

Normal players will not be allowed to choose the case 3 option of GM Menu, because it is not added to the menu list unless they meet the criteria of being a level 99 GM.

This can be tricky when trying to add more than a single added option based on criteria due to the fact that the case might not be in order, if you don't add the options. This will be discussed in the "Advanced Scripting" area later.

Prompt Command
The Prompt command followed by the Select command are now usually the top two contenders for menu selection.


The prompt command works exactly like the select command however a value of 255 is passed back to the script if the user decides to choose the CANCEL button that is automatically generated by menus.

### Example 3.1 - Quick Example of the Prompt Command

`promptÂ "ClickÂ Me:NoÂ ClickÂ Me";`

`ifÂ (@menuÂ ==Â 255)Â {Â mesÂ "YouÂ shouldÂ notÂ haveÂ closedÂ theÂ menu...Â BADÂ BOY!";Â close;Â }`

[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Mes

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
The most basic scripting command.
Displays a window with **<message>** in it to the invoking character, if the window already exists, it will just display the given message.
Notice that mes does not create a *next* or *close* button, so you have to create one using the [next](/next "wikilink") or [close](/close "wikilink") command, otherwise the player will be stuck in your script.
Use the + operator to give out multiple messages combined with variables or some commands(for example [countitem](/countitem "wikilink"), [getitemname](/getitemname "wikilink") or [strcharinfo](/strcharinfo "wikilink"))in one mes.
Use "^<Red><Green><Blue> " in front of the message to give **<message>** a color.
<Red><Green><Blue> stand for three hexadecimal numbers, representing the color components of Red Green and Blue in the wanted colour, like a html-code(see examples).
Do not forget to set the color to black again, by putting "^000000" after your message, exept you want to color your whole text...
Be careful: <span style="color:#ff00ff>Magenta</span> (ff00ff) is considered as transparent in the client, using it in a Dialogue will result in a weird (or funny) effect.

Examples
    mes "Hello World";
    //Will open up a text box with:

Hello World

    mes "Hello 1","Hello 2","Hello 3";
    // This will Generate 3 lines

Hello 1
Hello 2
Hello 3

    mes "Hello"+strcharinfo(0)+", how are you?";
    // Will upon up a textbox printing:

Hello Charname, how are you?

    mes "^FF0000 Hello World^000000";
    //Will open up a text box with

<span style="color:#FF0000">Hello World</span>

    mes "\'Hello!\'";
    // use \as prefix to include Symbols:
    // will print:

'Hello!'

============================================================

## Mmo.h

This source file holds global declarations and hard-coded settings, that are used by the login, char and map server. If you modify anything, you have to recompile all three servers, otherwise you may run into errors.

### PACKETVER

Specifies the packet version to use for server-client communication. It must be set to date, your client has been released at, e. g. 20090922 for 2009-09-22aRagexeRE. Note: If you have a client, that is newer, than the latest packet version in the comment, some things might not work properly, if the client packets have changed since then.

### ENABLE_SC_SAVING

If you disable this define, all status changes get discarded upon logout.

### HOTKEY_SAVING

When enabled, the server stores client hotkeys. While older clients save them locally in the registry, newer clients require this define to be enabled.

### MAX_MAP_PER_SERVER

Sets how many maps a single map server may manage. This also includes instanced maps.

### MAX_INVENTORY

Sets maximum amount of item slots in the character item inventory. If you set this above 127, some scripts, that enumerate characters' inventory will break.

### MAX_CHARS

Max number of characters per account. Note, that changing this setting alone is not enough if the client is not hexed to support more characters as well.

### GLOBAL_REG_NUM

Max number of permanent [char variables](/Variables#Player_Variables "wikilink").

### ACCOUNT_REG_NUM

Max number of permanent [account variables](/Variables#Account_Variables "wikilink").

### ACCOUNT_REG_NUM2

Max number of permanent [global account variables](/Variables#Global_Account_Variables "wikilink").

### MAX_REG_NUM

Should hold the max of GLOBAL/ACCOUNT/ACCOUNT2 (needed for some arrays that hold all three)

### DEFAULT_WALK_SPEED

Default walk speed of players in milliseconds.

### MIN_WALK_SPEED

Minimum walk speed of players in milliseconds.

### MAX_WALK_SPEED

Maximum walk speed of players in milliseconds.

### MAX_STORAGE

Max number of storage slots a player can have. (up to ~850 tested)

### MAX_GUILD_STORAGE

Max number of [storage](/storage "wikilink") slots a guild.

### MAX_PARTY

Maximum members a [party](/party "wikilink") can hold.

### MAX_GUILD

Maximum members a [guild](/guild "wikilink") can hold. 6 additional members will be added per 1 level of Guild Extension skill.

### MAX_GUILDPOSITION

Maximum guild positions that can be assigned to members.

### MAX_GUILDEXPULSION

Maximum length of expulsion reason to be displayed.

### MAX_GUILDALLIANCE

Maximum length of guild alliance names to be displayed.

### MAX_GUILDSKILL

Maximum number of skills that a Guild can have.

### MAX_GUILDLEVEL

Maximum level that a Guild can reach.

### MAX_GUARDIANS

Maximum guardians that can be summoned in a castle. If this value is increased, need to add more fields on MySQL \`guild_castle\` table ..

### MAX_QUEST_DB

Maximum number of quest(Questlog System) that the server will load.

### MAX_QUEST_OBJECTIVES

Maximum quest objectives for a quest.

### WEDDING_RING_M

Item ID of the wedding ring for male.

### WEDDING_RING_F

Item ID of the wedding ring for female.

### NAME_LENGTH

Maximum length of a character/title/guild/map/etc. name.

### ITEM_NAME_LENGTH

Maximum of length of an item name, which tend to have much longer names.

### PINCODE_LENGTH

Maximum length of pincodes.

### MAX_FRIENDS

Maximum number of friends that a player can have on his list.

### MAX_MEMOPOINTS

Maximum memo points that the warp portal skill can save.

### MAX_FAME_LIST

Number of players to be listed in the fame list arrays.

### START_ACCOUNT_NUM

Starting ID for player accounts.

### END_ACCOUNT_NUM

Ending ID for player accounts.

### START_CHAR_NUM

Starting ID for characters.

### MAX_GUILDMES1

Maximum character length of guild message title.

### MAX_GUILDMES2

Maximum character length of guild message body.

[Category:Configuration](/Category:Configuration "wikilink")

============================================================

## Mob

A [Mob](/Mob "wikilink") is basically a monster. Mobs range from Poring to Baphomet. Most commonly, the word 'mob' is used to refer to an enemy summoned by a [MVP](/MVP "wikilink").

This page will contain all functions on mob.c and mob.h

[Mob Once Spawn](/Mob_Once_Spawn "wikilink")

[Mob Get Random Id](/Mob_Get_Random_Id "wikilink")

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Mobcount

Syntax

Description
This function will count all the monsters on the specified map that have a given event label and return the number or 0 if it can't find any. Naturally, only monsters spawned with 'monster' and 'areamonster' script commands can have non-empty event label.

If you pass this function an empty string for the event label, it will return the total count of monster without event label, including permanently spawning monsters. With the dynamic mobs system enabled, where mobs are not kept in memory for maps with no actual people playing on them, this will return a 0 for any such map. If the event label is given as "all", all monsters will be counted, regardless of having any event label attached.

If the map name is given as "this", the map the invoking character is on will be used. If the map is not found, or the invoker is not a character while the map is "this", it will return -1.

Examples
[`mes`](/mes "wikilink")`Â "ThereÂ areÂ "Â +Â `[`mobcount`](/mobcount "wikilink")`("prontera",Â "all")Â +Â "Â monstersÂ inÂ Prontera.";`

[`if`](/if "wikilink")`Â (`[`mobcount`](/mobcount "wikilink")`("lhz_dun03",Â "summon_boss_b4::OnMyMvPDead")Â >Â 0)Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "^008000Â TheÂ Bio3Â MVPÂ isÂ alive!Â ^000000";`
`}Â `[`else`](/else "wikilink")`Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "^FF0000Â TheÂ Bio3Â MVPÂ isÂ dead.Â ^000000";`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Mob_event_variables

Introduction
### Purpose

If you've ever wanted to store additional information in variables when a monster dies and it's event script is triggered, this article should help adding your new entries.

### Example

Let's say that when a monster is summoned, we want to be able to read the monster's level (the level of the monster killed) and the class of the monster (the monster ID in the database) so that we can grant additional bonuses. To do this, we would need to modify the source to add this new information.

*While this could be done via OnNPCKillEvent (and using killedrid as the variable), this is not the optimum script to use, as this will be called with every monster killed on every map.*

Open
*Scroll to or find the function mob_dead*

**Find:**

    if( sd && battle_config.mob_npc_event_type )
    {
        pc_setglobalreg(sd,"killerrid",sd->bl.id);
        npc_event(sd,md->npc_event,0);
    }
    else if( mvp_sd )
    {
        pc_setglobalreg(mvp_sd,"killerrid",sd?sd->bl.id:0);
        npc_event(mvp_sd,md->npc_event,0);
    }

This piece of code is called when the monster dies, and has an event label attached to it. Within this code, we notice two important pieces of information:

    pc_setglobalreg(sd,"killerrid",sd->bl.id);
    pc_setglobalreg(mvp_sd,"killerrid",sd->bl.id);

These two lines (in the two seperate if blocks) represent assigning a variable to the character who killed the mob, which will subsequently be passed into the label event.

### Adding a custom integer

If we wish to add an integer (a number) using the blocks from above, we simply need to do another:

`pc_setglobalreg(sd,` `"variable` `name",` `value);`

In the example I provided, if we wish to store the monster's class id and the level, we need to add:

    pc_setglobalreg(sd, "monsterid", md->class_);
    pc_setglobalreg(sd, "monsterlevel", md->level);

We must also copy this code into the *mvp_sd* block, so our code would look like this overall:

    if( sd && battle_config.mob_npc_event_type )
    {
        pc_setglobalreg(sd,"killerrid",sd->bl.id);
        pc_setglobalreg(sd, "monsterid", md->class_);
        pc_setglobalreg(sd, "monsterlevel", md->level);
        npc_event(sd,md->npc_event,0);
    }
    else if( mvp_sd )
    {
        pc_setglobalreg(mvp_sd,"killerrid",sd?sd->bl.id:0);
        pc_setglobalreg(mvp_sd, "monsterid", md->class_);
        pc_setglobalreg(mvp_sd, "monsterlevel", md->level);
        npc_event(mvp_sd,md->npc_event,0);
    }

### Adding a custom string

To add a custom string, much like copying the monster's name into a variable, it's not much different. Simply follow the instructions above, but instead use a code as such:

`pc_setglobalreg_str(sd,` `"monstername$",` `md->name);`

Simply copy this for the *mvp_sd* block too, and you will be able to read 'monstername$' in the script.

Conclusion
Following this article, you should be able to customise what information gets passed into variables when a mob event label is called. This may be extremely useful for custom hunting quests and such, if you wish to store more information for rewards and such.

[Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Monster

Syntax

Description
This command spawns a monster at given map and coordinates, using given class and amount. Monsters spawned with this command will not re-spawn after being killed.

To address the map, on which the running [NPC](/NPC "wikilink") resides, *map name* can be set to "this". Spawning the monster on random coordinates is accomplished by setting parameters *x* and *y* to 0. The parameter *display name* specifies the in-game name of the monster, which is not necessary required to be the actual name, such as "Prontera minion". The *display name* accepts also two magic names, "--ja--" and "--en--", which are replaced by the server with the value of the kROName and iROName mob db columns of the given *mob id*, respectively. Setting the *mob id* to -1, -2 or -3 will spawn a random monster from the dead branch, poring box or bloody branch list respectively.

Optionally an *event label* can be specified, which has the form "NpcName::OnLabel" and is run upon the monster's death. If the killer was a player, [it will be attached](/RID#Usage "wikilink") to the invoked script.

Example
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "IÂ willÂ spawnÂ 5Â PoringsÂ forÂ you!";`
`Â Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â Â monsterÂ "this",0,0,"PoringÂ 1",1002,1,`[`strnpcinfo`](/strnpcinfo "wikilink")`(0)+"::OnPoring1Dead";`
`Â Â Â Â monsterÂ "this",0,0,"PoringÂ 2",1002,1,strnpcinfo(0)+"::OnPoring2Dead";`
`Â Â Â Â monsterÂ "this",0,0,"PoringÂ 3",1002,1,strnpcinfo(0)+"::OnPoring3Dead";`
`Â Â Â Â monsterÂ "this",0,0,"PoringÂ 4",1002,1,strnpcinfo(0)+"::OnPoring4Dead";`
`Â Â Â Â monsterÂ "this",0,0,"PoringÂ 5",1002,1,strnpcinfo(0)+"::OnPoring5Dead";`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`OnPoring1Dead:`
`Â Â Â Â mesÂ "YouÂ killedÂ PoringÂ 1";`
`Â Â Â Â `[`close`](/close "wikilink")`;`
`OnPoring2Dead:`
`Â Â Â Â mesÂ "YouÂ killedÂ PoringÂ 2";`
`Â Â Â Â close;`
`OnPoring3Dead:`
`Â Â Â Â mesÂ "YouÂ killedÂ PoringÂ 3";`
`Â Â Â Â close;`
`OnPoring4Dead:`
`Â Â Â Â mesÂ "YouÂ killedÂ PoringÂ 4";`
`Â Â Â Â close;`
`OnPoring5Dead:`
`Â Â Â Â mesÂ "YouÂ killedÂ PoringÂ 5";`
`Â Â Â Â close;`

This will spawn 5 Porings randomly distributed on the map of the invoking character with the names "Poring 1" to "Poring 5". Each time the player kills one of them, it triggers the given event label in the NPC, which will say "You killed Poring X"

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Monster_death_timer

Introduction
### Information

For some quests, you may want to summon a monster that only exists for a certain amount of time. In order to do this, it may be easier to add a new command which will allow you to setup an auto-mated death timer on the monster itself.

This way, there's no dependencies on script timers, and the death will be personal the monster itself.

### Pre-requisites

In order for this command to work, you'll need to install the [retrieve monster GID edit](/Get_monster_gid "wikilink") first.

Open /src/map/script.c
**Place this code somewhere:**

    /*==========================================
     * Adds a death timer to a monster [Epoque]
     *------------------------------------------*/
    BUILDIN_FUNC(deathtimer)
    {
        int block_id;
        unsigned int tick;
        struct mob_data* md;

        block_id = script_getnum(st, 2);
        tick = script_getnum(st, 3);
        md = map_id2md(block_id);

        if(md == NULL)
            return 0;

        if(md->kill_timer > 0)
        {
            delete_timer(md->kill_timer, mob_death_timer);
            md->kill_timer = INVALID_TIMER;
        }

        md->kill_timer = add_timer(gettick()+tick, mob_death_timer, md->bl.id, 0);

        return 1;
    }

**Find:**

       BUILDIN_DEF(changequest, "ii"),

**Below add:**

`Â Â Â BUILDIN_DEF(deathtimer,Â "ii"),`

Open /src/map/mob.h
**Find:**

`Â Â Â shortÂ min_chase;`

**Below add:**

`Â Â Â intÂ kill_timer;`

**Find:**

    int mob_countslave(struct block_list *bl);

**Below add:**

`intÂ mob_death_timer(intÂ tid,Â unsignedÂ intÂ tick,Â intÂ id,Â intptrÂ data);`

Open /src/map/mob.c
**Find:**

    void mob_revive(struct mob_data *md, unsigned int hp)
    {
        unsigned int tick = gettick();

**Above add:**

    int mob_death_timer(int tid, unsigned int tick, int id, intptr data)
    {
        struct mob_data* md;

        if( !(md = map_id2md(id)) || md->kill_timer == INVALID_TIMER )
            return 0;

        if( status_isdead(&md->bl) )
            return 0;

        status_kill(&md->bl);

        return 1;
    }

Usage
To use the command, you can use it this way:

    set .@MobID, monster("map", x, y, name, class, 1);
    deathtimer .@MobID, 30000; // Automatically kills the monster after 30 seconds.

The alternative (through basic scripts) is this:

    OnInit:
        monster "map", x, y, name, class, 1, "MobControl::OnMobKilled";
        initnpctimer;
        end;

    OnTimer30000:
        killmonster "map", "MobControl::OnMobKilled";
        end;

    OnMobKilled:
        end;
    }

[Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Morphembryo

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will try to put the invoking player's Homunculus in an uncallable state, required for mutation into a Homunculus S. The player will also receive a Strange Embryo (ID 6415) in their inventory if successful, which is deleted upon mutation.

The command will fail if the invoking player does not have an evolved Homunculus at level 99 or above. The /swt emotion is shown upon failure.

Returns 1 upon success and 0 for all failures.

============================================================

## MountingNPCHandle

New Mounts : NPC Scripting Support
This page is a short explanation of the available functions to handle **New Mounts**.

### ismounting()

This allows you to check if the player is riding a new mount. Here's an example on how to use **ismounting**:

[`if`](/if "wikilink")`(Â `**`ismounting`**`()Â )`
`Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "YouÂ areÂ ridingÂ aÂ newÂ mount!";`
[`else`](/else "wikilink")
`Â Â Â dispbottomÂ "YouÂ areÂ notÂ ridingÂ aÂ newÂ mount";`

### setmounting()

This allows you to set a player to ride a new mount. You have to remember these things when setting it on an actual script:


Below is an example with conjunction of **ismounting()**:

`if(Â ismounting()Â )Â {`
`Â Â Â mesÂ "YouÂ areÂ ridingÂ aÂ newÂ mount";`
`Â Â Â `**`setmounting`**`();//ThisÂ removesÂ theÂ userÂ mount`
`}Â elseÂ {`
`Â Â Â //attemptsÂ toÂ mountÂ theÂ user`
`Â Â Â if(Â `**`setmounting`**`()Â )Â {Â `
`Â Â Â Â Â Â Â mesÂ "YouÂ areÂ nowÂ ridingÂ aÂ newÂ mount!Â Enjoy";`
`Â Â Â }Â elseÂ {Â //MountingÂ didn'tÂ workedÂ (i.e.Â TheÂ characterÂ isÂ alreadyÂ mountingÂ somethingÂ elseÂ `
`suchÂ asÂ aÂ peco,Â dragon,Â wug,Â madoÂ gear,Â etc.)`
`Â Â Â Â Â Â Â mesÂ "YouÂ areÂ alreadyÂ mountedÂ aÂ ride.";`
`Â Â Â }`
`}`
[`close`](/close "wikilink")`;`

Changelog

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Movenpc

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command looks like the NPCWalkToxy function, but is a little different.

While NPCWalkToXY just makes the NPC 'walk' to the coordinates given (which sometimes gives problems if the path isn't a straight line without objects), this command just moves the NPC. It basically warps out and in on the current and given spot.

Examples
`//Â ThisÂ willÂ moveÂ BuggaÂ fromÂ it'sÂ currentÂ positionÂ toÂ the`
`//Â coordsÂ 100,20Â (ifÂ thoseÂ coordsÂ areÂ walkableÂ (legit)).`
`movenpcÂ "Bugga",100,20;`

============================================================

## Msg_txt

Syntax
`char*Â `**`msg_txt`**`(intÂ msg_number);`

Parameters

Description
This function retrieves a pointer to a message string, which was loaded from **msg_athena.conf**. Although the return value is not typed as **const**, it should be handled as such and the contents pointed to by the pointer should be only read.

Example
[`clif_displaymessage`](/clif_displaymessage "wikilink")`(sd->fd,Â msg_txt(3));`

This would pass pointer to the message "Character not found." to the function clif_displaymessage.

[Category:Source Functions](/Category:Source_Functions "wikilink")

============================================================

## Multiple_Servers

Description
The first server is set up as usual
1.  IP address
2.  MySQL database(s)
3.  Ports

The second server
1.  That the same IP address at all.
2.  Other base Sql. (to the login server is not required/login table will not used)
3.  Here the most interesting. Ports map and char server set different than the first server. A Login server port in all config files both on the first server. ie 6900.

Starting
1.  Run entirely the first server.
2.  A second server that's run only Map and Char server. (recommendation: map_server_sql and char_server_sql set different name or you can accidentally kill first server)

As a result, we succeeded 2 servers (server selection appears after entering a username and password in the game)

Potential issues

Scheme
[native|center|alt=Servers Scheme|Servers Scheme](/File:Multiple_servers_scheme.png "wikilink")

[Category:Installation](/Category:Installation "wikilink")

============================================================

## NeonCube

To use this guide you must have a basic understanding of [rAthena](/rAthena "wikilink"), a [Web Server](/wikipedia:Web_Server "wikilink") and how to edit, upload and manipulate files. You also need to be versatile in making [GRF](/GRF "wikilink") and [RAR](/wikipedia:RAR_(file_format) "wikilink") files.

Programs you need

Features

Setup
There are client and server files that need to be properly setup to work together.

### Client Files

1.  Download [NeonCube](http://patch.neon-cube.net/index.php?page=download)
2.  Extract the files to a temporary folder.
3.  Make a folder on your desktop called **RO** (this is where all the NeonCube client files will go)
4.  Copy the *neoncube* folder, *neoncube.exe*, and *neoncube.exe.Manifest* into the **RO** folder on your desktop.
5.  You can rename *neoncube.exe* to something like *ServerName***Patcher.exe**
6.  In the *neoncube* folder, decide which skin you will use (or edit/create your own). Delete the folders of the skins you are NOT using.
7.  Open *neoncube/**neoncube.ini*** with a text editor (ex: WordPad)
8.  Read the examples then edit the values (all lines starting with **;** are comments and can be removed if you want).

Sample **neoncube.ini**

<tt>`[server]`
`server_nameÂ Â Â Â =Â YourRO`
`notice_urlÂ =Â yourro.com/patcher/index.html`
`patch_siteÂ =Â yourro.com`
`patch_portÂ =Â 80`
`patch_listÂ =Â /patcher/patchlist.txt`
`patch_folderÂ Â Â =Â /patcher/patch/`
`executableÂ =Â YourRO.exe`
`registration_linkÂ Â =Â http://yourro.com/cp/`
`skinÂ Â Â =Â skin_rag`
`grf_fileÂ Â Â =Â yourro.grf`
`Backup_GRFÂ =Â 1`
`startup_optionÂ =Â 3`
`[general]`
`archive_passphraseÂ =`</tt>

NOTES:


### Patch Server Files

If your *notice_url, patch_site, patch_list* and *patch_folder* are different, keep track of them throughout the rest of this guide.

#### /patcher/index.html

This is the News Page that the patcher will display (supports HTML, PHP, ASP, XML)
Create this file on the web server you defined with **notice_url**

#### /patcher/patch/

This is the folder where you will put all the patches you create.
Create this folder on the web server you defined with *patch_site*'

#### /patcher/patchlist.txt

This is the file that lists your patches and tells the NeonCube patcher (client) what to download and where to patch it.
Create this file on the web server you defined with **patch_site**

Format:

`patch#`<TAB>`destination`<TAB>`patch_name`

patch\#
start with 1, and increment for each new patch

destination
GRF will patch the grf, FLD will extract to folder

patch_name
the name of the patch (including file extension, of course)

Sample **patchlist.txt** (take note of the TABs. Comments are allowed)

`//thisÂ willÂ extractÂ patch1.gpfÂ intoÂ theÂ dataÂ folder`
`1Â Â FLDÂ patch1.gpf`
`//here,Â patch2.gpfÂ willÂ beÂ mergegdÂ withÂ grf_file`
`2Â Â GRFÂ patch2.gpf`
`//YouÂ canÂ alsoÂ deleteÂ filesÂ fromÂ theÂ dataÂ folder.`
`3Â Â FLDÂ data\filenametodelete.xml*`
`//DeletingÂ filesÂ insideÂ aÂ GRFÂ archiveÂ isÂ stillÂ supported`
`4Â Â GRFÂ data\i_will_delete_you.txt*`

Making a .GPF patch
1.  make a **data** folder somewhere (ex: on your Desktop)
2.  gather all the files you will be adding to your patch and put them in the **data** folder (recreating the proper directory structure, or course. So if loading screen is supposed to go ...\\data\\texture\\Ã€Â¯Ã€ÃºÃ€ÃŽÃ…ÃÃ†Ã¤Ã€ÃŒÂ½Âº\\**loading00.jpg** you have to make each of those folders inside your data folder)
3.  run GRF Builder, click **New** and pick a name and place to save your patch. (I'd recommend naming patches by date in YYYY-MM-DD format. That way, as players are patching they have an idea how far along they are, since NeonCube displays the current patch name. So for today, it'd be 2008-02-10.gpf)
4.  Then click **Merge dir** and browse to your **data** folder (on your Desktop if you put it there)
5.  Transfer or upload this file to your **patch_site** and put it in the **patch_folder**
6.  Edit your **patch_list** and add a line in the format described in [\#Client_Files](/#Client_Files "wikilink")

Making a .RAR patch
1.  make a folder called **RO** somewhere (ex: on your Desktop)
2.  then put all the files you want to patch into the "RO" folder, recreating the proper directory structure (ex: if you were patching the client, you'd put it directly inside the RO folder: ...\\Desktop\\**RO\\YouRO.exe**)
3.  You can even patch the data folder this way. Files would go inside ...\\Desktop**\\RO\\data\\**
4.  Then run WinRAR, click **Add**
5.  Pick a name and place to save the patch. (ex: name it by date in YYYY-MM-DD format)
6.  click the **Files** tab. Then next to "Files to Add" click **Append**
7.  now browse INTO the RO folder on your desktop, and select all the files **INSIDE** your RO folder
8.  click OK, ok, to compress the rar
9.  Transfer or upload this file to your **patch_site** and put it in the **patch_folder**
10. Edit your **patch_list** and add a line in the format described in [\#Client_Files](/#Client_Files "wikilink")

Example:

`29Â FLDÂ 2007-12-29.rar`

That means patch \#29, FLD indicates it will be patching the **folder**, not the grf. and 2007-12-29.rar indicates the name of the patch, representing Dec. 29, 2007

Common Errors
### Failed to get /patcher/patchlist.txt

This error indicates that the patcher is unable to locate the patch list file at the location you specified.

1.  Check *patch_site* directive.
2.  Check *patch_list* directive.

### Patch list parse error (unexpected non-zero patch number)

This error indicates that your patchlist.txt file is present in the correct location. However, it also indicates that you have additional text/formatted/unformatted characters before your list actually begins.

1.  Open your patchlist.txt file and make sure there are no characters (even spaces) before your first patch number.

See Also

External Links

[Category:Patchers](/Category:Patchers "wikilink")

============================================================

## New_Classes

This is a placeholder for the updated version of the new job classes guide. I will be back to update it once I have tested and documented the setup on the newer svns and the new wiki structure is fully implemented and layed out.


**Note\***
Nothing Under This Header Has Been Tested As Of The Time Of Being Written! This Guide Is In Progress! Use At Own Risk!!

Credits
The new job class guide was updated and originally based off the guide written by myself (A17kaliva) which was compiled through the works and notes of various other developers noted below.

Other Contributers- Brainstorm, A17kaliva, Quanta, Omega, Terijan, Mith\*~~, Daegaladh, hondacrx & Rikter. (Several other members also helped in testing and error reporting purposes, but were omited due to space.)

Due to the rewriting of this guide, the documentation of contributions to this guide may be omitted due to new information provided, or changes in the code that render those portions unnecessary. I will however endeavor to label each contribution to this modification with the contributors name in brackets next to the sub-headers if/when possible.
A17kaliva (A-17)

Introduction
\[Original by Shizuka- Summerized by A17\]

So far, this guide is covering adding a new job as a first class (1-1) job. If you'd like more information on how the server handles the different levels of classes, take a look at doc/ea_job_system.txt in your server files. \[edit\] Preperations & Requirements

xRay Client- Can be located here \[2\]

A compiler- such as cygwin.

First things first, PLEASE BACK-UP YOUR FILES. We are not responsible for you breaking your server.

I'll be using _CUSTOM_JOB1, _CUSTOM_JOB2, etc for class variables, you CAN change this to whatever your job name is, however, it's best to follow the step by step instrunctions until your familiar with the setup.

(Note, this has no impact on the name your sprite will use ingame. Also note THIS IS CASE SENSITIVE. You must type these IN CAPS! When in doubt, please follow the structure of currently existing code.) \[edit\] Common Terms

Before reading the rest of this guide, there are some terms used you should know. Although obvious, we wish to cover all bases. -- Find : Find -- Replace : Replace the code from -- Find with this code. -- Add after : Add the necessary code after the -- Find line. -- Add before : The same as above, but this time before the line.

Part 1: Source Edits
map/pc.h (Skill limits and jobclass id ranges.) map/atcommand.c (Settings for use of the @command @job<job#> .) map/itemdb.c (Deals with bitmasks for setting equipable items) map/map.h (Deals with the way the sprite is viewed by the client. -mapid) common/mmo.h (Settings for the jobclass \# for jobid to mapid convert.)

\[edit\] **map/pc.h** \[Shizuka\]

//PLEASE NOTE: This step is only necessary if you're going to have a class that has more than 53 skills. I increased this number because my GM class has all skills. -- Find Code:

`//UpdateÂ thisÂ maxÂ asÂ necessary.Â 53Â isÂ theÂ valueÂ neededÂ forÂ SuperÂ BabyÂ currentlyÂ `
`#defineÂ MAX_SKILL_TREEÂ 53`


`//UpdateÂ thisÂ maxÂ asÂ necessary.Â 53Â isÂ theÂ valueÂ neededÂ forÂ SuperÂ BabyÂ currentlyÂ `
`#defineÂ MAX_SKILL_TREEÂ 600`

**//START:No need to to this in new revisions- as adding new class in mmo.h automatically increases JOB_MAX.**

//Permission to remove this chunk of code.


`//ChecksÂ ifÂ theÂ givenÂ classÂ valueÂ correspondsÂ toÂ aÂ playerÂ class.Â [Skotlex]Â `
`#defineÂ pcdb_checkid(class_)Â (class_Â `<JOB_XMAS>`=Â JOB_NOVICE_HIGHÂ &&Â class_Â <=Â JOB_SOUL_LINKER))Â `


`//ChecksÂ ifÂ theÂ givenÂ classÂ valueÂ correspondsÂ toÂ aÂ playerÂ class.Â [Skotlex]Â Revamped-Â [A17kaliva]`
`#defineÂ pcdb_checkid(class_)Â (class_Â <=Â JOB_XMASÂ ||Â (class_Â >=Â JOB_CUSTOM_JOB1Â &&Â class_Â <=`
`JOB_CUSTOM_JOB5)Â ||Â (class_Â >=Â JOB_NOVICE_HIGHÂ &&Â class_Â <=Â JOB_SOUL_LINKER))Â `


|| (class_ &gt;= THE JOB YOU JUMPED TO && class_ &lt;= LAST JOB YOU END WITH)

**//END:No need to to this in new revisions as adding new class in mmo.h automaticaly increases JOB_MAX.**

\[edit\] map/atcommand.c \[Fixed: A17kaliva\]


`Â Â Â Â Â Â Â Â {Â "ninja",Â Â Â 25Â },Â `


`Â Â Â Â Â Â Â Â {Â "customÂ job1",Â Â Â 4053},Â `
`Â Â Â Â Â Â Â Â {Â "customÂ job2",Â Â Â 4054Â },Â `
`Â Â Â Â Â Â Â Â {Â "customÂ job3",Â Â Â 4055Â },Â `
`Â Â Â Â Â Â Â Â {Â "customÂ job4",Â Â Â 4056Â },Â `
`Â Â Â Â Â Â Â Â {Â "customÂ job5",Â Â Â 4057Â },Â `

\[edit\] common/mmo.h \[Fixed: A17kaliva\]

`Â Â Â *Â (note:Â SeemsÂ youÂ canÂ useÂ anythingÂ overÂ 4053Â safely...Â howeverÂ theseÂ areÂ testedÂ andÂ work.)`


`Â Â JOB_XMAS,Â `


`Â Â JOB_CUSTOM_JOB1Â =Â 4053,Â `
`Â Â JOB_CUSTOM_JOB2,Â `
`Â Â JOB_CUSTOM_JOB3,Â `
`Â Â JOB_CUSTOM_JOB4,Â `
`Â Â JOB_CUSTOM_JOB5,Â `

**//START:No need to to this in new revisions- as adding new class in mmo.h automatically increases JOB_MAX.**

//Permission to remove this chunk of code.

\[edit\] **map/map.h**

The check that caps the ID at 4050:\[Mith\*~~\] -- Find

1.  define MAX_PC_CLASS 4050


1.  define MAX_PC_CLASS 4500

(note: Its not required to go this high, I did it for space/testing reasons. Set it to the range of jobs you add.)

(It appears that this no longer needs to be edited; there's new code that seems to automatically calculate the number of IDs needed, and there's no 'cap' anymore. At least, I can't find it in my revision. \[Reborn\])

**//END:No need to to this in new revisions- as adding new class in mmo.h automatically increases JOB_MAX.**


`Â Â MAPID_XMAS,Â //Â [Valaris]Â `


`Â Â MAPID_CUSTOM_JOB1Â =Â JOBL_2|0x01,Â `
`Â Â MAPID_CUSTOM_JOB2,Â `
`Â Â MAPID_CUSTOM_JOB3,Â `
`Â Â MAPID_CUSTOM_JOB4,Â `
`Â Â MAPID_CUSTOM_JOB5,Â `

\[edit\] map/pc.c \[Shizuka\]


`Â Â Â Â Â caseÂ JOB_XMAS:Â `
`Â Â Â Â Â Â Â Â class_Â =Â MAPID_XMAS;Â `
`Â Â Â Â Â Â Â Â break;Â `


`Â Â Â Â Â caseÂ JOB_CUSTOM_JOB1:Â `
`Â Â Â Â Â Â Â Â class_Â =Â MAPID_CUSTOM_JOB1;Â `
`Â Â Â Â Â Â Â Â break;Â `
`Â Â Â Â Â caseÂ JOB_CUSTOM_JOB2:Â `
`Â Â Â Â Â Â Â Â class_Â =Â MAPID_CUSTOM_JOB2;Â `
`Â Â Â Â Â Â Â Â break;Â `
`Â Â Â Â Â caseÂ JOB_CUSTOM_JOB3:Â `
`Â Â Â Â Â Â Â Â class_Â =Â MAPID_CUSTOM_JOB3;Â `
`Â Â Â Â Â Â Â Â break;Â `
`Â Â Â Â Â caseÂ JOB_CUSTOM_JOB4:Â `
`Â Â Â Â Â Â Â Â class_Â =Â MAPID_CUSTOM_JOB4;Â `
`Â Â Â Â Â Â Â Â break;Â `
`Â Â Â Â Â caseÂ JOB_CUSTOM_JOB5:Â `
`Â Â Â Â Â Â Â Â class_Â =Â MAPID_CUSTOM_JOB5;Â `
`Â Â Â Â Â Â Â Â break;Â `


`Â Â Â Â Â caseÂ MAPID_BABY_ROGUE:Â `
`Â Â Â Â Â Â Â Â returnÂ JOB_BABY_ROGUE;Â `


`Â Â Â Â Â caseÂ MAPID_CUSTOM_JOB1:Â `
`Â Â Â Â Â Â Â Â returnÂ JOB_CUSTOM_JOB1;Â `
`Â Â Â Â Â caseÂ MAPID_CUSTOM_JOB2:Â `
`Â Â Â Â Â Â Â Â returnÂ JOB_CUSTOM_JOB2;Â `
`Â Â Â Â Â caseÂ MAPID_CUSTOM_JOB3:Â `
`Â Â Â Â Â Â Â Â returnÂ JOB_CUSTOM_JOB3;Â `
`Â Â Â Â Â caseÂ MAPID_CUSTOM_JOB4:Â `
`Â Â Â Â Â Â Â Â returnÂ JOB_CUSTOM_JOB4;Â `
`Â Â Â Â Â caseÂ MAPID_CUSTOM_JOB5:Â `
`Â Â Â Â Â Â Â Â returnÂ JOB_CUSTOM_JOB5;Â `


`Â Â default:Â `
`Â Â Â Â Â returnÂ msg_txt(650);Â `


`Â Â caseÂ JOB_CUSTOM_JOB1:Â `
`Â Â Â Â Â returnÂ msg_txt(1000);Â `
`Â Â caseÂ JOB_CUSTOM_JOB2:Â `
`Â Â Â Â Â returnÂ msg_txt(1001);Â `
`Â Â caseÂ JOB_CUSTOM_JOB3:Â `
`Â Â Â Â Â returnÂ msg_txt(1002);Â `
`Â Â caseÂ JOB_CUSTOM_JOB4:Â `
`Â Â Â Â Â returnÂ msg_txt(1003);Â `
`Â Â caseÂ JOB_CUSTOM_JOB5:Â `
`Â Â Â Â Â returnÂ msg_txt(1004);Â `

\[edit\]

Part 2: Database Edits
`conf/import/msg_conf.txtÂ (DealsÂ withÂ howÂ messagesÂ areÂ deliveredÂ toÂ theÂ jobclasses)`
`db/const.txtÂ (DealsÂ withÂ sourceÂ toÂ scriptÂ settingsÂ forÂ bitmasksÂ andÂ idÂ #'s.)`
`db/skill_tree.txtÂ (DealsÂ withÂ howÂ skillsÂ areÂ governedÂ toÂ newÂ classes)`
`db/exp.txtÂ &Â db/exp2.txtÂ (ExperenceÂ tablesÂ -Â baseÂ andÂ job)`
`db/job_db1.txtÂ (SetsÂ definesÂ onÂ jobclassÂ -Weight,HPFactor,SPFactor.)`
`db/job_db2.txtÂ (SetsÂ definesÂ onÂ Job-specificÂ StatÂ Bonuses.)`

// --- db/const.txt \[Fixed: A17kaliva\] -- Find Code:

`Job_XmasÂ Â Â 26Â `


`Job_Custom_Job1Â Â Â 4053Â `
`Job_Custom_Job2Â Â Â 4054Â `
`Job_Custom_Job3Â Â Â 4055Â `
`Job_Custom_Job4Â Â Â 4056Â `
`Job_Custom_Job5Â Â Â 4057`

I've left room here for the possibility of the 3 rumored new jobs here. If you don't know what's going on here, google hex numbers. In short, (Hexing--- 01-09=1-9, A=10, B=11, C=12, D=13, E=14, F=15, 10=16, 11=17) (\*SEE NOTES IN BITMASKING SECTION HERE: \[4\] )


`EAJ_NINJAÂ Â Â 0x0AÂ `


`EAJ_CUSTOM_JOB1Â Â Â Â JOBL_2|0x1Â Â `
`EAJ_CUSTOM_JOB2Â Â Â Â JOBL_2|0x2Â Â `
`EAJ_CUSTOM_JOB3Â Â Â Â JOBL_2|0x3Â Â `
`EAJ_CUSTOM_JOB4Â Â Â Â JOBL_2|0x4Â Â `
`EAJ_CUSTOM_JOB5Â Â Â Â JOBL_2|0x5Â Â `

// --- conf/import/msg_conf.txt -- Add Code:

`1000:Â CustomÂ Job1Â `
`1001:Â CustomÂ Job2Â `
`1002:Â CustomÂ Job3Â `
`1003:Â CustomÂ Job4Â `
`1004:Â CustomÂ Job5`

// --- db/skill_tree.txt Here you have to add one line to each skill of the custom class. The structure is simple, put the class ID,SkillID,MaxLv, and after put the PrerequisiteID,PrerequisiteLV for each prerequisite skill. -- Add Code:

`4053,1,9,0,0,0,0,0,0,0,0,0,0Â //NV_BASIC#BasicÂ Skill#Â `

This adds the Novice's Basic Skill (MaxLv 9) in the Custom_Job1 Skill Tree. Make sure to insert the Novice's Basic Skills and Call Baby.

// --- db/exp.txt & db/exp2.txt Inside this file there are many Base and Job Exp tables. Each table starts with the MaxLv and the IDs of the classes that will use it, seperated by ":". Just insert the ID of your custom there. -- Find Code:

`50,1:2:3:4:5:6:26:4024:4025:4026:4027:4028:4029:4046Â `


`50,1:2:3:4:5:6:26:4024:4025:4026:4027:4028:4029:4046:4053Â `

Now Custom_Job1 uses the Job Exp Table of 1st Classes.

// --- db/job_db1.txt This file defines the values of each class, Weight, HP multiplicator and bonus with weapons. Copy someone's values and modify them.

// --- db/job_db2.txt Here you define the Stat Bonus. First put your custom ID, and after add one field for each JobLvUp that your class has. Novice has MaxJobLv 10 so it has 9 fields (Lv2,Lv3,Lv4...). In each field put the number of the stat that you want to be increased by 1. -- Legend Code:

`0Â =Â NoÂ statÂ bonusÂ atÂ thisÂ jobÂ levelÂ `
`1Â =Â STRÂ increasedÂ byÂ 1Â atÂ thisÂ jobÂ levelÂ `
`2Â =Â AGIÂ increasedÂ byÂ 1Â atÂ thisÂ jobÂ levelÂ `
`3Â =Â VITÂ increasedÂ byÂ 1Â atÂ thisÂ jobÂ levelÂ `
`4Â =Â INTÂ increasedÂ byÂ 1Â atÂ thisÂ jobÂ levelÂ `
`5Â =Â DEXÂ increasedÂ byÂ 1Â atÂ thisÂ jobÂ levelÂ `
`6Â =Â LUKÂ increasedÂ byÂ 1Â atÂ thisÂ jobÂ levelÂ Â `

Now that the hard part is over... Let's work on the client stuff!

\[edit\]

Part 3: Client Files
`class_tab.txtÂ (DealsÂ withÂ howÂ theÂ classesÂ areÂ loaded.)`
`imf_tab.txtÂ (?Â DealsÂ withÂ theÂ defaultÂ hairÂ &Â actÂ locationÂ itÂ seems)`
`monstrosity_tab.txtÂ (TheÂ visableÂ nameÂ ofÂ theÂ sprite.Â -Jobname)`
`reality_dir_tab.txtÂ (tellsÂ clientÂ whichÂ folderÂ toÂ lookÂ forÂ theÂ job'sÂ weaponÂ sprite/actÂ files)`
`reality_tab.txtÂ (?Â I'mÂ guessingÂ classÂ toÂ equipÂ relation.)`

You'll have to add class sprites & weapon sprites for each class (easy if you're using class sprites based on original sprites or just copy and pasting the original sprites), and, of course, edit the _tab files.

Before we edit the tabs, we need to add some files to the data folder. Create the following folders if you don't have them in your data folder already: Code:

`data\sprite\Ã€ÃŽÂ°Â£ÃÂ·Â Â Â Â Â Â Â Â Â Â //Â ItemÂ SpriteÂ folder`
`data\sprite\Ã€ÃŽÂ°Â£ÃÂ·\Â¸Ã¶Ã…Ã«Â Â Â Â Â //Â JobspriteÂ folder`
`data\imfÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â .ImfÂ folder`

// --- data\\sprite\\Ã€ÃŽÂ°Â£ÃÂ· Create a NEW folder for each class named the same as the class. Inside these folders will be the weapon sprites for each respective class.

For this example, the following folders would be created: Code:

`custom_job1Â `
`custom_job2Â `
`custom_job3Â `
`custom_job4Â `
`custom_job5Â `

// --- data\\sprite\\Ã€ÃŽÂ°Â£ÃÂ·\\Â¸Ã¶Ã…Ã« Inside this folder create two folders, Â³Â² for male sprites and Â¿Â© for female sprites. Add .spr and .act files for each of your new classes, inside these folders, with prefix Â³Â² for male and Â¿Â© for female. Code: -Inside Â³Â² folder:

`custom_job1_Â³Â².sprÂ andÂ custom_job1_Â³Â².actÂ `
`custom_job2_Â³Â².sprÂ andÂ custom_job2_Â³Â².actÂ `
`custom_job3_Â³Â².sprÂ andÂ custom_job3_Â³Â².actÂ `
`custom_job4_Â³Â².sprÂ andÂ custom_job4_Â³Â².actÂ `
`custom_job5_Â³Â².sprÂ andÂ custom_job5_Â³Â².actÂ `


`custom_job1_Â¿Â©.sprÂ andÂ custom_job1_Â¿Â©.actÂ `
`custom_job2_Â¿Â©.sprÂ andÂ custom_job2_Â¿Â©.actÂ `
`custom_job3_Â¿Â©.sprÂ andÂ custom_job3_Â¿Â©.actÂ `
`custom_job4_Â¿Â©.sprÂ andÂ custom_job4_Â¿Â©.actÂ `
`custom_job5_Â¿Â©.sprÂ andÂ custom_job5_Â¿Â©.actÂ `

// --- data\\imf \[Thank Omega for the .imf clarification\] .imf -- It's still unclear what this file does, but the client requires it for all classes.

It's noted that it has something to do with the default head/hairstyle for each class and may effect the starting placement of the act file.

You can find the english names for each sprite name here \[5\], thanks goes out to the guys at Rate My Server.

If you're using sprites made from any of the default classes, I suggest you use the same .imf file. For example, if you have sprite made from the original Dancer sprite, use the .imf for dancer.

You have to use sex prefix for the .imf files, _Â³Â² for male, and _Â¿Â© for female.

// --- class_tab.txt Ok A heads up CLASS_TAB, REALITY_TAB, and REALITY_DIR_TAB all run differently than the monstrosity tab. Actually I dare you to go in there and actually find where its even once mentions a 2-1 2-2 or trans class sprite.

IT doesn't... Instead it refers to them differently. Now you don't have to add !\#\#\# here.

At the end of the file -- Find



`custom_job1Â `
`custom_job2Â `
`custom_job3Â `
`custom_job4Â `
`custom_job5Â `


// --- reality_dir_tab.txt -- Find



`custom_job1\\custom_job1Â `
`custom_job2\\custom_job2Â `
`custom_job3\\custom_job3Â `
`custom_job4\\custom_job4Â `
`custom_job5\\custom_job5Â `

// --- monstrosity_tab.txt Add your class ids in order. For my ID 4053, I'll add my classes after the !4053 line.

Remember that the monstrosity_tab uses proper caps and spaces for class names (how they will appear in the client. This is where you will name your class according to what it will be AKA. Bard, Etc.) -- Find Code:

!4001


`!4053Â `
`CustomÂ Job1Â `
`CustomÂ Job2Â `
`CustomÂ Job3Â `
`CustomÂ Job4Â `
`CustomÂ Job5`

\[edit\]

Bitmasking
\[A17kaliva & Rikter\]

**Description:** This Section deals with equipped items and how they are displayed and be equipped on your custom classes.

Ok, Now we get dirty... First thing you should know is that the bitmasks are limited to 32 for the jobclass equipments. You also need to understand that 0 is also counted so the max is 31.\[Brainstorm\]

That being said, we shall start.

Earlier we set up the job ids to run on specific map ids, your map ids are set by bitmasks in map.h and also in itemdb.c which we haven't referred to yet for a reason.

When you set up your bit masks you will notice this:

`Â Â Â MAPID_NOVICEÂ =Â 0x0,`

This is followed by the other base 1-1 classes starting with swordsman at 0x1 through thief at 0x6. These are the preliminary base hex that defines all items that can be equipped.

\[Mith\*~~\] If my job's "bitmask number" is 24, then I do 2^24, which results in "16777216".

I then take that big number over there and convert it to hexadecimal, using any converter, like this one \[7\] , and the result is "1000000"... I then add a prefix "0x" for all bitmasks, and there you go, my job's bitmask is "0x1000000".

When you set up an item in your item DB you will need to add this item to the place marked job. Example this is a monk weapon:

1522,Stunner,Stunner,4,60000,,2000,140,,1,0,0x00008110,7,2,2,3,27,1,8,{ bonus2 bAddEff,Eff_Stun,1000; },{},{}

\[A17kaliva\] However, what Mith didnt know is that while he was right about the itemdb.c defining the bitmask for a job, the main define wasn't held there.

The itemdb.c as referred to by brainstorm at the time I was trying to crack my system to allow new jobclasses without a hex edit "The itemdb.c defines how the upperclass characters receive the ability to equip items from their lower class counterparts."

In other words, this (below) refers to which items the upper class will be able to equip.

`Â Â Â ifÂ (jobmaskÂ &Â 1<<JOB_MONK)`
`Â Â Â Â Â Â Â bclass[2]Â |=Â 1<<MAPID_ACOLYTE;`

This bit of code here is calling for the hex (0x______ ) that you placed in the map.h, it refers to monk as bclass 2 and that it inherits the abilities from it's base job.

Why is that needed? Well, it's NOT needed unless you are going to make trans classes.

Remember how Brainstorm said the hex was limited to 32? If you haven't noticed, gravity has more than 32 classes.

Now, if the limit is 32 how is it that we are able to use around 36? Well the key is in the base classes and the itemdb.c ... The base hex is the same thing you're using at the moment, and will be your key to how things get equipped to your new classes.

I noticed a few extra bits of coding in the source that, well for all intents and purposes did basically nothing. It was a \# define that defined a variable that wasn't being used.

Pay attention to what I'm showing you this will be the key to showing your items.

In your map.h:

`//TheseÂ marksÂ theÂ "level"Â ofÂ theÂ job.`
`#defineÂ JOBL_2_1Â 0x100Â //256`
`#defineÂ JOBL_2_2Â 0x200Â //512`
`#defineÂ JOBL_2Â 0x300`
`#defineÂ JOBL_UPPERÂ 0x1000Â //4096`
`#defineÂ JOBL_BABYÂ 0x2000Â Â //8192`

Now search your ENTIRE map.h for JOBL_2 ... It doesn't exist! This entire define was pointless and I had a feeling it was set up in the past for possible new classes.

If you scroll down further in your map.h you will locate this:

`//2_1Â classes`
`Â Â Â MAPID_SUPER_NOVICEÂ =Â JOBL_2_1|0x0,`
`Â Â Â MAPID_KNIGHT,`

now remember the define we had above?

`JOBL_2_1Â =Â 0x100`

So Super Novice equipment id is 0x0 + 0x100 or 0x100. Simple huh? Well lets check it, to do that we take the id 2^0 = 0 then 0 in hex is 0 + define 100= 100.

Now try it for knight. . . Knight is 0x1 + 0x100 = 0x101 (1^1= 1 + define 100 = 101.) (some of you are going WTF. . . Were dealing with hex not normal numbers. 0x01 is the same as 0x001 = 0x00000000000000000001 ... )

Now look at the LK. Note his bitmask:

`Â Â Â MAPID_LORD_KNIGHTÂ =Â JOBL_UPPER|JOBL_2_1|0x1,`

so for the LK his \#s are \[(upper=1000)+ (job2_1=100)+(0x1=1)\]=1101...

Now if you wanted all the swordie classes to use this item, you would have to add all the \#'s of each jobclass that uses it.

What I did to make yours run, is set the define to run as 300. So, what your system is going to do, is add both 100 and 200 together. This means your bitmask for your new job will be found by what I had you set in the map.h ...

So your new class

`Â Â Â MAPID_CUSTOM_JOB1Â =Â JOBL_2|0x1,Â Â Â Â Â //Â UsesÂ sameÂ weaponsÂ asÂ swordmanÂ classesÂ Â --Â `
`Â Â Â MAPID_CUSTOM_JOB2Â =Â JOBL_2|0x2,Â Â Â Â Â //usesÂ sameÂ asÂ mage-`
`Â Â Â MAPID_CUSTOM_JOB3Â =Â JOBL_2|0x3,Â Â Â Â Â //archer-`
`Â Â Â MAPID_CUSTOM_JOB4Â =Â JOBL_2|0x4,Â Â Â Â Â //acolyte-`
`Â Â Â MAPID_CUSTOM_JOB5Â =Â JOBL_2|0x5,Â Â Â Â Â //merchant-`

(understand now? simple no?) WAIT! It's not over... The way it runs now, this new class can equip any swordsman based items, in other words to get it to run it has to be identical to having the bitmask set as job1-1 job2-1 and job2-2's bitmasks, meaning you have to add all 3 up.

You cannot make it not able to equip the other classes items since those run on it. This also means that it's other classes will be able in theory to use these new items also. If you were to add the upper as in the instance of the LK it would be = to all of the swordsman class IDs.

To fix this, we can add a new define in the source like this:

`#defineÂ JOBL_3Â 0x400Â `

This should make it only able to use the previous class weapons, meaning if you used JOBL_3|0x4, It would only be able to use the acolyte or the 1-1 class weapons. You would also have to figure out what the new id would be as it would be higher.

I haven't tested what happens if you add the upper to JOBL_3|0x4, (making it JOBL_UPPER|JOBL_3|0x4,) but I have a feeling it would allow you to only equip the 1-1class, 2-1, and 2-2 classes weapons and not the trans classes. (big thanks to Rikter for testing it out and giving me feedback on how it ran.)

(NOTE: Without adding a new define of 400, or the upper you are only able to add 1 custom class per original bitmask. In other words you can only make one swordsman type unless you add the upper. If you do add the upper then it will allow for 2. By adding a new define of 400 you can add 3 and with upper, and 400, 4.)

Enjoy. \[edit\] Tables

See this post for a better understanding of the tables.

\[8\]\[Daegaladh\] \[edit\] Things things to be added eventually

\[edit\]--[Rad417](/User:Rad417 "wikilink") 07:47, 25 December 2009 (UTC)

Added code boxes instead of just a block of text for easy reading.

Noted some parts that needs to be removed as they are not needed anymore.

Corrected grammar, punctuation marks and spacing in some parts

Note: anyone can ammend this guide if they choose too as long as credit is given back to the prior contributors, So if you haveanything to add that will benifit the community feel free to add it here. Adding classes to exp.txt, exp2.txt, skill_tree.txt, job_db1.txt and job_db2.txt, & Adding Male and female sprite files.

[Category:Client Configuration](/Category:Client_Configuration "wikilink") [Category:Configuration](/Category:Configuration "wikilink") [Category:Source Snippets](/Category:Source_Snippets "wikilink")

============================================================

## Next

Syntax

Description
This command will display a 'next' button in the message window for the invoking character. Clicking on it will cause the window to clear and display a new one. Used to segment NPC-talking, next is often used in combination with [mes](/mes "wikilink") and [close](/close "wikilink").

If no window is currently on screen, one will be created, but once the invoking character clicks on it, a warning is thrown on the server console and the script will terminate.

Example
[`mes`](/mes "wikilink")`Â "[Example]";`
`mesÂ "Hello,Â I'mÂ anÂ example!";`
`mesÂ "ClickÂ theÂ nextÂ buttonÂ toÂ seeÂ theÂ restÂ ofÂ theÂ text";`
**`next`**`;Â //ThisÂ willÂ displayÂ theÂ button.`
`mesÂ "[Example]";`
`mesÂ "ThisÂ isÂ theÂ restÂ ofÂ theÂ text";`
[`close`](/close "wikilink")`;Â //ClosesÂ theÂ windowÂ andÂ endsÂ theÂ script.`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Npcshopdelitem

Syntax

Description
This command will remove items from the specified NPC shop or cashshop. If the item to remove exists more than once on the shop, all instances will be removed.

Note that the function returns 1 even if no items were removed. The return value is only to confirm that the shop was indeed found.

Examples
If you have an item in a shop that is for promotional events only, then you can remove the item using a script, if that script also ends the event.

`Â Â Â -Â Â Â scriptÂ Â endsummereventÂ Â -1,{`
[`OnClock`](/OnClock "wikilink")`0000:`
`Â Â Â `[`if`](/if "wikilink")`(`[`gettime`](/gettime "wikilink")`(6)==9Â &&Â gettime(5)==1){`
`Â Â Â Â Â Â Â `<other even ending code here>
`Â Â Â Â Â Â Â `[`disablenpc`](/disablenpc "wikilink")`Â "SummerÂ Event";`
`Â Â Â Â Â Â Â `**`npcshopdelitem`**`Â "V4PÂ Shop",501;`
`Â Â Â Â Â Â Â `[`announce`](/announce "wikilink")`Â "EventÂ NPCsÂ disabledÂ andÂ promoÂ itemsÂ removedÂ fromÂ V4PÂ shop!",0;`
`Â Â Â }`
[`close`](/close "wikilink")`;`
`}`

The above example will remove the item Red Potion from the 'V4P Shop' shop NPC then make an announcement on the 1st of September at 0000hrs. It is an **example only** and is not guaranteed to work.

Related Commands: [npcshopitem](/npcshopitem "wikilink"), [npcshopadditem](/npcshopadditem "wikilink")

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Npcshopitem

Syntax

Description
This command lets you override the contents of an existing NPC shop or cashshop. The current sell list will be wiped, and only the items specified with the price specified will be for sale.

The function returns 1 if shop was updated successfully, or 0 if not found.

Note that you cannot use -1 to specify default selling price!

Examples
The code below will replace the price of Red Potion to 5000z and Orange Potion to 6000z when [WoE](/WoE "wikilink") starts.

    prontera,100,200,4 shop    SampleShop  46,501:-1,502:-1


    OnAgitStart:
        npcshopitem "SampleShop",501,5000,502,6000;
        end;
    }

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Npcskill

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command causes the attached NPC object to cast a skill on the attached player. The skill will have no cast time or cooldown. The player must be within the default skill range or the command will fail silently.

The "stat point" parameter temporarily sets all NPC stats to the given value, and "NPC level" is the temporary level of the NPC (used in some skills). Neither value can be greater than the max level defined in config, and will not work properly if the NPC has a mob sprite.

Examples
`Â //Â CastsÂ LevelÂ 10Â HealÂ onÂ theÂ attachedÂ player,Â calculatedÂ with`
`Â //Â allÂ statsÂ 99Â andÂ baseÂ levelÂ 60.`
`Â npcskillÂ "AL_HEAL",10,99,60;`

============================================================

## Npcskilleffect

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This command behaves identically to '[skilleffect](/Skilleffect "wikilink")' however, the effect will not be centered on the invoking character's sprite, nor on the NPC sprite. It will be centered at map coordinates given on the same map as the invoking character.

Example
Here are some samples which might be a help to you:

#### An example script using skill ID

`Â Â Â Â Â Â Â mesÂ "ThisÂ willÂ castÂ SkillÂ IDÂ 21Â onÂ mapÂ coordinatesÂ 143Â 180";`
`Â Â Â Â Â Â Â npcskilleffectÂ 21,10,143,180;`

#### An example script using skill name

`Â Â Â Â Â Â Â mesÂ "ThisÂ willÂ castÂ MG_THUNDERSTORMÂ onÂ mapÂ coordinatesÂ 143Â 180";`
`Â Â Â Â Â Â Â npcskilleffectÂ "MG_THUNGDERSTORM",10,143,180;`

============================================================

## Npcspeed

Syntax

Description
These commands will make the NPC object in question move around the map. As they currently are, they are a bit buggy and are not useful for much more than making an NPC move randomly around the map. (see for an example of such usage)

'[npcspeed](/npcspeed "wikilink")' will set the NPCs walking speed to a specified value. As in the @speed GM command, 200 is the slowest possible speed while 0 is the fastest possible (instant motion). 100 is the default character walking speed.
'[npcwalkto](/npcwalkto "wikilink")' will start the NPC sprite moving towards the specified coordinates on the same map as it is currently on.
'[npcstop](/npcstop "wikilink")' will stop the motion.

While in transit, the NPC will be clickable, but invoking it will cause it to stop motion, which will make it's coordinates different from what the client computed based on the speed and motion coordinates. The effect is rather unnerving.

Only a few NPC sprites have walking animations, and those that do, do not get the animation invoked when moving the NPC, due to the problem in the npc walking code, which looks a bit silly. You might have better success by defining a job-sprite based sprite id in '' with this.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Npctalk

Syntax

Description
This command will display a message to the surrounding area, as if the [NPC](/NPC "wikilink") running it, was a player talking, that is, the message, which is prefixed with NPC's display name appears above it's head and in the chat window.

Examples
`npctalkÂ "HelloÂ "+`[`strcharinfo`](/strcharinfo "wikilink")`(0)+",Â howÂ areÂ you?";`

This will make everyone in the area see the NPC greet the character, who just invoked it.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Nude

Syntax

Description
This command strips all equipment from [currently attached](/RID#Usage "wikilink") character.

Examples
[`mes`](/mes "wikilink")`Â "[Guardsman]";`
`mesÂ "InÂ theÂ interestÂ ofÂ protectingÂ theÂ peace,";`
`mesÂ "weÂ willÂ disarmÂ yourÂ equipmentÂ onceÂ youÂ enter.";`
`mesÂ "YourÂ cooperationÂ isÂ muchÂ appreciated.";`
`nude;`
[`close`](/close "wikilink")`;`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## OnBuyItem

Syntax
[OnBuyItem](/OnBuyItem "wikilink"):

Explanation
This special label triggers when a player buys an item.

It can be used with NPCs that require post-purchase [array](/array "wikilink") deletions or for aesthetic purposes, such as simply displaying zeny amounts.

Examples
This will display a player's current zeny whenever they buy an item from any shop.


        OnBuyItem:
            dispbottom "You now have "+ Zeny +" zeny";
            end;

    }

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## OnPCDieEvent

Syntax
[OnPCDieEvent](/OnPCDieEvent "wikilink"):

Explanation
This special label triggers when a player dies. The variable '[killerrid](/killerrid "wikilink")' is set to the ID of the killer.

It is often used in PVP scripts that record kills/deaths or display messages when you kill someone or are killed.

Examples
This will display a message to players who die on guild_vs1, and also announce a message to that map.

`-Â Â scriptÂ Â pvp_die_messageÂ -1,{`
[`OnPCDieEvent`](/OnPCDieEvent "wikilink")`:`
`Â Â Â `[`if`](/if "wikilink")`Â (`[`strcharinfo`](/strcharinfo "wikilink")`(3)Â ==Â "guild_vs1")Â {`
`Â Â Â Â Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "YouÂ justÂ died.";`
`Â Â Â Â Â Â Â `[`mapannounce`](/mapannounce "wikilink")`Â `[`strcharinfo`](/strcharinfo "wikilink")`(3),Â strcharinfo(0)Â +Â "Â hasÂ died.Â Â WhatÂ aÂ pity!",bc_map;`
`Â Â Â }`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## OnPCKillEvent

Syntax
[OnPCKillEvent](/OnPCKillEvent "wikilink"):

Explanation
This special label triggers when a player kills another player. The variable 'killedrid' is set to the ID of the player killed.

It is often used in PVP scripts that record kills/deaths or display messages when you kill someone or are killed.

Examples
This will display a message to players who kill other players on guild_vs1, and also announce a message to that map.

`-Â Â scriptÂ Â pvp_kill_messageÂ Â Â Â -1,{`
[`OnPCKillEvent`](/OnPCKillEvent "wikilink")`:`
`Â Â Â `[`if`](/if "wikilink")`Â (`[`strcharinfo`](/strcharinfo "wikilink")`(3)Â ==Â "guild_vs1")Â {`
`Â Â Â Â Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "YouÂ justÂ killedÂ someone.";`
`Â Â Â Â Â Â Â `[`mapannounce`](/mapannounce "wikilink")`Â `[`strcharinfo`](/strcharinfo "wikilink")`(3),Â strcharinfo(0)Â +Â "Â isÂ aÂ killer!",bc_map;`
`Â Â Â }`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## OnPCLoadMapEvent

Description
This special label will trigger once a player steps in a map marked with the **'loadevent**' [mapflag](/mapflag "wikilink") and attach its [RID](/RID "wikilink"). The fact that this label requires a [mapflag](/mapflag "wikilink") for it to work is because, otherwise, it would be server-wide and trigger every time a player would change maps.

Example
`OnPCLoadMapEvent:`
`Â Â Â getmapxyÂ @map$,@x,@y,0;`
`Â Â Â ifÂ (@map$Â ==Â "prontera")Â {`
`Â Â Â sleep2Â 1000;`
`Â Â Â getitemÂ 601,1;`
`Â Â Â }`
`Â Â Â end;`

The script means that anyone who will go/warp to prontera, will receive item ID 601.

============================================================

## OnSellItem

Syntax
[OnSellItem](/OnSellItem "wikilink"):

Explanation
This special label triggers when a player sells an item.

It can be used with NPCs that require post-selling [array](/array "wikilink") deletions or for aesthetic purposes, such as simply displaying zeny amounts.

Examples
This will display a player's current zeny whenever they sell an item from any shop.


        OnSellItem:
            dispbottom "You now have "+ Zeny +" zeny";
            end;

    }

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## OnTouch

Syntax
`Map,X,Y,facingÂ scriptÂ Â NPCNameÂ ID,OnTouch_X,OnTouchY,{`
`OnTouch:`

Description
OnTouch is rather hard to explain. In the beginning of the script you specify the area that when the player enters that specified area, the following script is executed. You cannot specify a specific area. If you do 3,3 if the player enters any 3 squares around the NPC, the script is executed.

**Trick**: Using "end;" at the beginning of the script stops players from executing the script by clicking on the NPC, so they can only execute it if they walk into the specified area.

Example
`prontera,147,153,3Â scriptÂ Â MaryÂ Â Â Â 71,3,3,{`
`Â Â Â end;`
`OnTouch:`
`Â Â Â mesÂ "[Mary]";`
`Â Â Â mesÂ "HaveÂ youÂ seenÂ myÂ lamb?";`
`Â Â Â close;`
`Â Â Â }`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## OnWhisperGlobal

Syntax
**OnWhisperGlobal:**

Explanation
This special label triggers when a player whispers the NPC, and will run with the player's RID attached. It can accept up to ten parameters, which will be stored into separate temporary character string variables @whispervar0$ to @whispervar9$.

See 'doc/whisper_sys.txt' for further documentation.

Examples
This will broadcast the first word the message that you whispered to the NPC(whisper_announce)

`-Â Â scriptÂ Â whisper_announceÂ Â Â Â -1,{`
[`OnWhisperGlobal`](/OnWhisperGlobal "wikilink")`:`
`Â Â Â `[`if`](/if "wikilink")`Â (`[`getgroupid`](/getgroupid "wikilink")`()Â >Â 5)`
`Â Â Â Â Â Â Â `[`announce`](/announce "wikilink")`Â @whispervar0$,0;`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Openauction

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This will open the auction window on the client connected to the invoking character.

Examples
        mes "Close this window to open the auction window.";
        close2;
        openauction;
        end;

============================================================

## Openmail

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This will open a character's Mail window on the client connected to the invoking character.

Examples
        mes "Close this window to open your mail inbox.";
        close2;
        openmail;
        end;

============================================================

## Openstorage

Syntax

Description
This will open the character's [Kafra](/Kafra "wikilink") storage window on the client connected to the invoking character. It can be used from any kind of [NPC](/NPC "wikilink") or [item script](/item_script "wikilink"), not just limited to Kafra Staff.

The storage window opens regardless of whether there are open NPC dialogs or not, but it is preferred to close the dialog before displaying the storage window, to avoid any disruption when both windows overlap.

Examples
[`mes`](/mes "wikilink")`Â "IÂ willÂ nowÂ openÂ yourÂ stashÂ forÂ you";`
[`close2`](/close2 "wikilink")`;`
[`openstorage`](/openstorage "wikilink")`;`
[`end`](/end "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Overview_of_Errors

This article will, in the end, contain all possible script related errors, what their causes are and what you should do to fix them.

Introduction
### Definition of Error

The errors mentioned in this article, are all the possible script related errors that show in the map-server's console. These errors are often accompanied by a tag in front of it. The tag will be \[Error\] or \[Fatal Error\]. (Where fatal error will crash your server.) Also, the errors that display a part of a script with \*'s in front of it (Parsing Errors), will be covered in this article. Please do note that you must be in debugging mode, which is if I'm not mistaking, the default mode. This article will not cover the different kinds of script related warnings, because the error-list alone is already massive.

### How to Find and Fix Your Error

Fixing errors in scripts require some handiness. Single errors are easy to do, but sometimes, you get a lot of errors. Do not be afraid then though, because a large list of errors will often be fixed, by fixing the first error. So, when using this guide, search for the topmost error in your server's console first, and try to fix it. If it is fixed, there is a 50% chance that all the other errors will disappear.

Sometimes though, the amount of errors are so huge, that you cannot scroll high enough to find the first error. If this is the case, then there are three ways to make it easier for you:


How to do the first, I am afraid to say, I forgot. The second one is fairly easy though. Removing your new scripts from the conf files, and starting up your server then, will tell you where to look. If the errors are gone, then they are most likely in your new scripts. Otherwise, they are in the default scripts. If they are in your new scripts, then it is wise to first read to that script again, to remove obvious errors. Also, always check the header. If you make a single mistake in the header, the rest of the script will bug out. If that still doesn't help, decrease the error list, then consider to have your server only load the new scripts, one at the time, in the hope that it will show fewer errors.

However, if that still doesn't allow you to find the topmost error, then there is always the third option - breaking down your script in smaller NPCs. What this means, is that you just randomly put inside your script a } followed by a valid header. Then you've split your script in two halves. 50% chance that 50% of the errors will be gone, and that you are closer to finding the solution. If the error list is still too long, simply split it up again, and again, and again, until you can see all the errors of a single NPC in your screen. That way, you can find the first error in that specific NPC, and fix it. This will result into the mapserver only showing the errors in the broken down NPCs before that NPC. I know, it's a long method, but sometimes, it's the only way. But when you have found the original error, then you can use this guide to find a solution for it.

Each error will have it's own section, in which the exact error is listed. These sections will also contain an explanation on what likely caused this error and what possible fixes are. This all is accompanied by one or more examples, to make everything more clear. To quickly find your specific error, search for a part of the error message, of course, without the Error tag. When searching for it, make sure that you do not include the things that can alter, like NPC name, file name, variable name etc.

If the error you want to search for, almost completely contains custom things, like that NPC name etc, and you still want to look for it, then try replacing all the parts that can change by three dots. For example if you want to search for this error:

`OutÂ ofÂ rangeÂ spawnÂ coordinates:Â prt_fild08Â (-50,-50),Â mapÂ sizeÂ isÂ (250,250)Â `

then try using this to search for:

`OutÂ ofÂ rangeÂ spawnÂ coordinates:Â ...Â (...,...),Â mapÂ sizeÂ isÂ (...,...)Â `

If this still doesn't give any results, you can always try the main index list. However, older error lines do not show up in this one. So, if you are also unsuccessful there, then please try the [Outdated Errors](/#Outdated_Errors "wikilink") section as a last resort. It lists all old error message. If you still cannot find it, then you can always try the Scripting Support forum.

### Using Older SVN Revisions

You are probably not using the latest version of rAthena. Unfortunately, over time, some errors change in text, or even become obsolete (erased). To not put you in a disadvantage, we will keep track of older error reports. At the moment, we have up to Revision 12340 covered for the script.c related errors, and up to 11501 covered for npc.c related errors.

When time comes, we will try to cover even older errors, and change the list if new errors appear, or when they change in syntax. However, if the error that you are looking for, is not in the normal list, nor the Outdated Errors list, then your best chance is asking for support in the Script Support Forum on the forums. Please, do not forget to mention your SVN revision when doing this.

Overview of Errors
There is a total of over 152 errors at the moment. Currently, 152 of them are covered. This is 100.00% of the total for the script.c section and an unknown percentage for the npc.c section.

### Outdated Errors

This list contains all currently known old errors messages that have been changed. They will link you to the current version of the error.

#### Up to Revision 10812


In-depth Info on Errors
### Warnings (script.c)

Warnings do not necessarily mean, that something is wrong, but can work in an undesired way.

#### Unexpected type for argument ... Expected ...

<u>**Cause**</u>
The data type of the value passed into a build-in function's argument differs from the one defined in that function's BUILDIN_DEF definition, typically passing a number where a string is expected and vice versa. A set of \[Debug\] messages follow this warning, that specify the function's parameters, the function itself and the NPC that hosts the reported script. This warning occurs only during runtime of a script. Note, that the affected script continues to run and auto-conversion rules apply, except the script command itself stops the execution of the script (typically commands that deal with variables and labels).

<u>**Solution**</u>
Verify all values passed to the function and make sure, that all of them have the expected type.

<u>**Example**</u>
[itemheal](/itemheal "wikilink") "200",0; The first parameter is supposed to be a number (amount of HP to heal). So the correct script would be:

`itemhealÂ 200,0;`

### Errors (npc.c)

All errors located in npc.c that have the \[Error\] tag are listed in this section.
`map,x,y,d`<tab>`duplicate(EVENTÂ LABEL)`<tab>`NewÂ name`<tab>`sprite`
`map,x,y,d`<tab>`duplicate(EVENTÂ LABEL)`<tab>`NewÂ name`<tab>`sprite,triggerx,triggery`

<b><u>Example</u></b>
Wrong code:

`prontera,200,200,4`<tab>`script`<tab>`Original::TestNPC`<tab>`46,{`
`Â Â Â mesÂ "Hi";`
`Â Â Â close;`
`}`
`prontera,210,200,4`<tab>`duplicate()`<tab>`Copy`<tab>`46`

The last line is missing the event label between the brackets. It should be this:

`prontera,210,200,4`<tab>`duplicate(TestNPC)`<tab>`Copy`<tab>`46`

#### bad duplicate name (in ...)! (not exist) : ...

Source Syntax: ShowError("bad duplicate name (in %s)! (not exist) : %s\\n", file, srcname);
<b><u>Cause</u></b>
This error is trying to tell you that you are duplicating a non-existing NPC.
<b><u>Solution</u></b>
Make sure that the NPC you want to duplicate, has the same Event Label as you specified between the round brackets behind duplicate. Either correct the Event Label of the original NPC or the Event Label in the duplicate line. Or, erase the duplicate line. Remember, the format for the original NPC is:

`map,x,y,d,`<tab>`script`<tab>`OriginalÂ Name`<b>`::My_Event_Label`</b><tab>`sprite{,triggerx,triggery},{`

And for the duplicate:

`map,x,y,d,`<tab>`duplicate(`<b>`My_Event_Label`</b>`)`<tab>`NewÂ Name`<tab>`sprite{,triggerx,triggery}`

<b><u>Example</u></b>
Wrong code:

`prontera,200,200,4`<tab>`script`<tab>`Original`<tab>`46,{`
`Â Â Â mesÂ "Hi";`
`Â Â Â close;`
`}`
`prontera,210,200,4`<tab>`duplicate(TestNPC)`<tab>`Copy`<tab>`46`

The first line is missing the event label between the brackets. It should be this:

`prontera,210,200,4`<tab>`script`<tab>`Original`<b>`::TestNPC`</b><tab>`46`

#### bad monster ID : ... ... (file ...)

Source Syntax: ShowError("bad monster ID : %s %s (file %s)\\n", w3, w4, current_file);
<b><u>Cause</u></b>
The monster you are trying to spawn, does not exist. At least, the mapserver could not find it's mob_id in mob_db.txt or mob_db2.txt. (Or possibly not in the homunculus db.)
<b><u>Solution</u></b>
Either add the monster to the mob_db2.txt file, or change the mob_id number in the spawn line to the correct mob_id number.
<b><u>Example</u></b>
Wrong code:

`monsterÂ "prt_fild08",100,100,"Poring",999,5;`

Correct code:

`monsterÂ "prt_fild08",100,100,"Poring",1002,5;`

#### bad monster line : ... ... ... (file ...)

Source Syntax: ShowError("bad monster line : %s %s %s (file %s)\\n", w1, w3, w4, current_file);
<b><u>Cause</u></b>
For a monster line to be correct, it needs to have at least the following:


And it also needs to have at least:


If you only have two or less of the topmost, and/or 1 or less of the bottom two, then this error will occur.
<b><u>Solution</u></b>
Make sure that your monster line contains at least the needed information. Check if you have a mapname, x, y, mob_id and an amount, and correct it where needed.
<b><u>Example</u></b>
Wrong code:

`monsterÂ "prt_fild08","Poring",5;`

Correct code:

`monsterÂ "prt_fild08",0,0,"Poring",1002,5;`

#### bad script line (in file ...): ...

Source Syntax: ShowError("bad script line (in file %s): %s\\n", file, w3);
<b><u>Cause</u></b>
This error occurs when the header of your NPC is incorrect. There are two separate ways for a NPC header to function correctly:

`map,x,y,d`<tab>`script`<tab>`Name`<tab>`sprite,{`
`-`<tab>`script`<tab>`Name`<tab>`-1,{`

When the server does not detect a dash (-) at the start of your header, it will check for the other format. If it does not find a mapname, x, y, direction, the word script or a comma after the sprite, then it will give you this error.
<b><u>Solution</u></b>
Recheck, if you abide the rules of writing a NPC header. Make sure you have all the commas in the right spots, that you have the location setup correctly and that you are using the script identifier word.
<b><u>Example</u></b>
Wrong code:

`prontera,200,200`<tab>`script`<tab>`MyÂ NPC`<tab>`48,{`

Correct code:

`prontera,200,200,4`<tab>`script`<tab>`MyÂ NPC`<tab>`48,{`

#### Bad setcell line : ...

Source Syntax: ShowError("Bad setcell line : %s\\n",w3);
<b><u>Cause</u></b>
You did not obey the format for using the setcell command. The format should be:

<map name>`%TAB%setcell%TAB%`<type>`,`<x1>`,`<y1>`,`<x2>`,`<y2>

This error occurs when you forgot one of the following five things:


<b><u>Solution</u></b>
Recheck, if the way you defined your setcell line is correct. There should be a tab, followed by 5 arguments after the setcell keyword.
<b><u>Example</u></b>
Wrong code:

`prontera`<tab>`setcell`<tab>`cell_wall,170,50,171`

Correct code:

`prontera`<tab>`setcell`<tab>`cell_wall,170,50,171,100`

#### bad shop line : ...

Source Syntax: ShowError("bad shop line : %s\\n", w3);
<b><u>Cause</u></b>
You did not obey the format of a shop header. Make sure it uses the following format:

`map,x,y,d`<tab>`shop`<tab>`Name`<tab>`sprite,{itemÂ listÂ +Â prices}`

This error occurs when you are missing the mapname, x, y and/or direction.
<b><u>Solution</u></b>
Recheck if you are using the shop header in the correct way. Add the missing mapname, x-coordinate, y-coordinate and/or direction.
<b><u>Example</u></b>
Wrong code:

`prontera,100,100`<tab>`shop`<tab>`MyÂ FirstÂ Shop`<tab>`83,501:-1,502:-1,503:-1,504:-1,506:-1`

Correct code:

`prontera,100,100,4`<tab>`shop`<tab>`MyÂ FirstÂ Shop`<tab>`83,501:-1,502:-1,503:-1,504:-1,506:-1`

#### bad warp line : ...

Source Syntax: ShowError("bad warp line : %s\\n", w3);
<b><u>Cause</u></b>
You didn't use the warp NPC header correctly. Make sure it uses the following format:

`from_map,from_x,from_y,d`<tab>`warp`<tab>`Name`<tab>`trigger_x,trigger_y,to_map,to_x,to_y`

This error occurs when you are missing one of the parameters given after the name. (Destination map and coordinates and trigger size.)
<b><u>Solution</u></b>
Recheck if you are using the warp header in the correct way. Add what is missing.
<b><u>Example</u></b>
Wrong code:

`prontera,107,215,0`<tab>`warp`<tab>`prt01`<tab>`prt_in,240,139`

Correct code:

`prontera,107,215,0`<tab>`warp`<tab>`prt01`<tab>`2,2,prt_in,240,139`

#### bad warp line (destination map not found): ...

Source Syntax: ShowError("bad warp line (destination map not found): %s\\n", w3);
<b><u>Cause</u></b>
Your mapserver failed to find the map where the warp is supposed to go to.
<b><u>Solution</u></b>
Make sure that the destination you typed in your warp line, really exists and is a map loaded by the server. Of course, also check it for typos.
<b><u>Example</u></b>
Wrong code:

`prontera,107,215,0`<tab>`warp`<tab>`prt01`<tab>`prontera_in,240,139`

Correct code:

`prontera,107,215,0`<tab>`warp`<tab>`prt01`<tab>`prt_in,240,139`

#### Could not parse file '...', line '...'. \* ... ... ... ...

Source Syntax: ShowError("Could not parse file '%s', line '%i'.\\n \* %s %s %s %s\\n",current_file,lines,w1,w2,w3,w4);
<b><u>Cause</u></b>
This can mean a lot of things. Please make sure that your header always looks like this:

`map,x,y,d`<tab>`script`<tab>`Name`<tab>`sprite{,triggerx,triggery},{`

The server reads this in in the following manner:

`location_info`<tab>`script`<tab>`Name{#tag}{::EventLabel}`<tab>`other_info`

If you are missing tabs, or any of these four parts, or a combination, then the mapserver will return this error.
<b><u>Solution</u></b>
Check your NPC header, and make sure it abides the rules.
<b><u>Example</u></b>
Wrong code:

`prontera,200,200,4`<space>`MyÂ NPC`<tab>`48,{`

Correct code:

`prontera,200,200,4`<tab>`script`<tab>`MyÂ NPC`<tab>`48,{`

#### File not found : ...

Source Syntax: ShowError ("File not found : %s\\n", name);
<b><u>Cause</u></b>
You have added a NPC to the conf file, but the server cannot find the file you mentioned in there.
<b><u>Solution</u></b>
Check if the file that the mapserver reports, actually exists. If it does, make sure you typed the entry in the conf file in a case sensitive way. If the file does not exist, comment out or erase the entry in the conf file.

#### Invalid map '...' in line ..., file ...

Source Syntax: ShowError("Invalid map '%s' in line %d, file %s\\n", mapname, lines, current_file);
<b><u>Cause</u></b>
This means, that the map which you specified in the header of the script, does not exist. Or at least, the server cannot find it.
<b><u>Solution</u></b>
Recheck if you spelled the name right and if the map does exist on your server (by warping to it).
<b><u>Example</u></b>
Wrong code:

`pront,200,200,4`<tab>`script`<tab>`MyÂ NPC`<tab>`48,{`

Correct code:

`prontera,200,200,4`<tab>`script`<tab>`MyÂ NPC`<tab>`48,{`

#### Missing right curly at file ..., line ...

Source Syntax:
ShowError("Missing right curly at file %s, line %d\\n",current_file, \*lines);
ShowError("Missing right curly at file %s, line %d\\n", file, \*lines);
ShowError("Missing right curly at file %s, line %d\\n",file, \*lines);
<b><u>Cause</u></b>
The script that loaded, has more left curly brackets than right curly brackets.
<b><u>Solution</u></b>
Count and check the number and locations of the left and right curly brackets. In a single script, they should be the same amount.

#### no such shop npc : ...

Source Syntax: ShowError("no such shop npc : %d\\n",id);
<b><u>Cause</u></b>
You tried to call a non-existing shop with the callshop command.
<b><u>Solution</u></b>
Make sure the shop actually exists. Also make sure that it has no sprite (-1) and no location (-) part.

#### npc_addeventimer: Event ... does not exists.

Source Syntax: ShowError("npc_addeventimer: Event %s does not exists.\\n", name);
<b><u>Cause</u></b>
You tried to use a timer in combination with an Event Label. However, the event label was not found by the mapserver.
<b><u>Solution</u></b>
Make sure that the event label you are referring to exists.
<b><u>Example</u></b>
Wrong code:

<header with the npc name Tirza>
`...`
`addtimerÂ 60000,Â "Tirza::OnTimeChecker";`
`...`
`OnTimeCheck:`
`...`

Correct code:

<header with the npc name Tirza>
`...`
`addtimerÂ 60000,Â "Tirza::OnTimeCheck";`
`...`
`OnTimeCheck:`
`...`

#### npc_event: (mob_kill) event not found \[...\]

Source Syntax: ShowError("npc_event: (mob_kill) event not found \[%s\]\\n", mobevent);
<b><u>Cause</u></b>
You created a monster spawn that has an Event Label attached to it (which will trigger when the monster dies). However, the mapserver could not find this event label in your script.
<b><u>Solution</u></b>
Verify that the monster should have an OnDeath-type label, that the Event Label exists, and that you did not make a typo in it.

#### npc_event: event not found \[...\]

Source Syntax: ShowError("npc_event: event not found \[%s\]\\n", eventname);
<b><u>Cause</u></b>
Kind of the same as the error above. An event label you want to use, does not exist.
<b><u>Solution</u></b>
Verify that the Event Label exists, and that you did not make a typo in it.

#### npc_parse_script: label name longer than 23 chars! '...' (...)

Source Syntax: ShowError("npc_parse_script: label name longer than 23 chars! '%s'\\n (%s)", lname, current_file);
<b><u>Cause</u></b>
You have created a label (normal or event label) which is longer than 23 characters. The mapserver cannot use labels bigger than that size.
<b><u>Solution</u></b>
Shorten your (event)label until it has 23 or less characters in it.
<b><u>Example</u></b>
Wrong code:

`MyFirstLabelWhichITypedTheDayBeforeYesterday:Â //44Â charactersÂ O_O`

Correct code:

`L_MyFirstLabel01:Â //16Â characters.`

#### npc_script_event: NULL sd. Event Type ...

Source Syntax: ShowError("npc_script_event: NULL sd. Event Type %d\\n", type);
<b><u>Cause</u></b>
Your code triggered an event, which requires a player to be online and attached to the NPC. For some reason, the player isn't there.
<b><u>Solution</u></b>
If it is a player attached timer that causes this, and the player logged off, then there is nothing much you can do. In any other case, make sure that your script has an attached player. (Like using addtimer instead of initnpctimer.)

#### npc_settimerevent_tick: Attached player not found!

Source Syntax: ShowError("npc_settimerevent_tick: Attached player not found!\\n");
<b><u>Cause</u></b>
Your script, or in this specific case, your timer, used to have a player attached to it. The player went missing though. This is most likely because the player logged off.
<b><u>Solution</u></b>
There is no real solution to this problem. You can make some additional checks to see if the player is still online at a certain moment, and end the script when the person logged off.

#### npc_timerevent: Attached player not found.

Source Syntax: ShowError("npc_timerevent: Attached player not found.\\n");
<b><u>Cause</u></b>
This error is of the same type as above.
<b><u>Solution</u></b>
There is no real solution to this problem. You can make some additional checks to see if the player is still online at a certain moment, and end the script when the person logged off.

#### npc_timerevent: NPC not found??

Source Syntax: ShowError("npc_timerevent: NPC not found??\\n");
<b><u>Cause</u></b>
Somehow, some way, between the loading of the NPC and the current timerevent, the NPC went missing. This is possible in a couple of different ways, but the most likely one is disabling the target NPC or unloading it.
<b><u>Solution</u></b>
Making a solution for this will be a bit time intensive. You need to make sure that the timerevent cannot be triggered when the NPC is unloaded or disabled. A way to do this, is to make a global variable with the status of the new NPC, or using getmapxy to find if the NPC is still there.

#### npc_timerevent_start: Attached player not found!

Source Syntax: ShowError("npc_timerevent_start: Attached player not found!\\n");
<b><u>Cause</u></b>
Your script, or in this specific case, your timer, used to have a player attached to it. The player went missing though. This is most likely because the player logged off.
<b><u>Solution</u></b>
There is no real solution to this problem. You can make some additional checks to see if the player is still online at a certain moment, and end the script when the person logged off.

#### npc_timerevent_stop: Attached player not found!

Source Syntax: ShowError("npc_timerevent_stop: Attached player not found!\\n");
<b><u>Cause</u></b>
Your script, or in this specific case, your timer, used to have a player attached to it. The player went missing though. This is most likely because the player logged off.
<b><u>Solution</u></b>
There is no real solution to this problem. You can make some additional checks to see if the player is still online at a certain moment, and end the script when the person logged off.

#### npc_touch_areanpc : some bug

Source Syntax: ShowError("npc_touch_areanpc : some bug \\n");
<b><u>Cause</u></b>
This bug should be impossible to produce. If you want to know the details, dive into the source code, but the short explanation is this:


Of course, this is impossible to happen, unless there are no NPCs on the map, but then the OnTouch shouldn't be triggered.
<b><u>Solution</u></b>
Report this bug to the [developers](/developers "wikilink"), because it does not have a solution script-wise. Provide them with as much data as possible/

#### Out of range spawn coordinates: ... (...,...), map size is (...,...) - ... ... (file ...)

Source Syntax: ShowError("Out of range spawn coordinates: %s (%d,%d), map size is (%d,%d) - %s %s (file %s)\\n", map\[mob.m\].name, x, y, map\[mob.m\].xs-1, map\[mob.m\].ys-1, w1,w3, current_file);
<b><u>Cause</u></b>
You tried to spawn a monster outside of the boundaries of the map. This can either be done by negative coordinates, or coordinates bigger than the maximum of the map.
<b><u>Solution</u></b>
Recheck the actual map size, and make sure the spawn coordinates of your mob does not go beyond that. Also, always keep your spawning coordinates not negative.
<b><u>Example</u></b>
Wrong code:

`monsterÂ "prt_fild08",-100,5000,"Poring",1002,5;`

Correct code:

`monsterÂ "prt_fild08",0,0,"Poring",1002,5;`

#### Probably TAB is missing in file '...', line '...': \* ... ... ... ...

Source Syntax: ShowError("Probably TAB is missing in file '%s', line '%i':\\n \* %s %s %s %s\\n",current_file,lines,w1,w2,w3,w4);
<b><u>Cause</u></b>
The mapserver could not detect the type that your script should be. This is most likely happening because you miss a tab before the keyword. Or you are using an invalid keyword.
The following list is a list of all possible keywords:


<b><u>Solution</u></b>
Make sure you have the tabs in the right place, and that you typed the keyword correctly.

#### wrong map name : ... ... (file ...)

Source Syntax: ShowError("wrong map name : %s %s (file %s)\\n", w1,w3, current_file);
<b><u>Cause</u></b>
The map where you wanted to spawn your monster on, does not exist.
<b><u>Solution</u></b>
Make sure that you typed the name of the map correctly, and that it is loaded by the mapserver. (Check this by warping to it.)

#### wrong monsters spawn delays : ... ... (file ...)

Source Syntax: ShowError("wrong monsters spawn delays : %s %s (file %s)\\n", w3, w4, current_file);
<b><u>Cause</u></b>
The spawn delays you entered for your mob are too big. The maximum allowed number for both is: 268435455 (ms).
This is equal to:
\* 3 days,


<b><u>Solution</u></b>
Lower the spawn delay times until they are equal to or less than 268435455.

#### wrong number of monsters : ... ... (file ...)

Source Syntax: ShowError("wrong number of monsters : %s %s (file %s)\\n", w3, w4, current_file);
<b><u>Cause</u></b>
The amount of monsters you tried to spawn is incorrect. It needs to be bigger than 0 and has a limit of 1000.
<b><u>Solution</u></b>
Change the amount of monsters that you are trying to spawn, to a number equal or lower than 1000 and higher than 0.

### Errors (script.c)

All errors located in script.c that have the \[Error\] tag are listed in this section.
#### buildin_callshop: Shop \[...\] not found (or NPC is not shop type)

Source Syntax: ShowError("buildin_callshop: Shop \[%s\] not found (or NPC is not shop type)\\n", shopname);
<b><u>Cause</u></b>
You used the callshop command, to call a shop. However, this shop does not exist, or, it does exist, but isn't of the type Shop.
<b><u>Solution</u></b>
Verify that the shop you want to call is actually a shop, and of course, that it exists. And make sure the shop you are calling obeys the rules of shops that can be called with callshop. (More info regarding this, view the callshop example file: )

#### buildin_checkweight: Wrong item ID or amount.

Source Syntax: ShowError("buildin_checkweight: Wrong item ID or amount.\\n");
<b><u>Cause</u></b>
You tried to check the weight of an invalid item or a negative amount of items.
<b><u>Solution</u></b>
Verify that the item id is 500 or higher (and of course, that it exists). Also, make sure that you are using a positive amount, and not 0 or a negative amount. When using variables to dynamically use this command, make sure that they obey these limits as well.
<b><u>Example</u></b>
Wrong code:

`setÂ @success,Â checkweight(400,-10);`

Correct code:

`setÂ @success,Â checkweight(500,10);`

#### buildin_getcharid: invalid parameter (...).

Source Syntax:
Current: ShowError("buildin_getcharid: invalid parameter (%d).\\n", num);
Until Rev. 11638: ShowError("buildin_getcharid: invalid .\\n");
Note: The error up until 11638 could not happen since it was inaccessible.
<b><u>Cause</u></b>
You have passed on an invalid parameter to the getcharid function.
<b><u>Solution</u></b>
Getcharid() can handle 4 different arguments, being:

`0Â -Â characterÂ id`
`1Â -Â partyÂ id`
`2Â -Â guildÂ id`
`3Â -Â accountÂ id`

You tried to give it a value smaller than 0 or bigger than 3. Please check which kind of id you tried to request and adjust the number accordingly.
<b><u>Example</u></b>
Wrong code:

`getcharid(-1);Â //Â IÂ wantÂ theÂ partyÂ ID.`
`getcharid(33);Â //Â IÂ wantÂ theÂ accountÂ ID.`

Correct code:

`getcharid(1);`
`getcharid(3);`

#### buildin_getitem: invalid data type for argument \#1 (...).

Source Syntax: ShowError("buildin_getitem: invalid data type for argument \#1 (%d).", data-&gt;type);
<b><u>Cause</u></b>
While using the getitem command, you somehow managed to provide as the first argument, something different than a string or an integer. This command only accepts item names or item ids as a first argument.
<b><u>Solution</u></b>
Make sure that you have entered a valid number or string as the first argument of getitem. When using a variable, of course, make sure that they also obey this.
<b><u>Example</u></b>
Wrong code:

`getitemÂ "@item_name$",4;`
`getitemÂ ^1234,Â 4;`

Correct code:

`getitemÂ @item_name$,Â 4;`
`getitemÂ 1234,Â 4;`

#### buildin_getitem: Nonexistant item ... requested.

Source Syntax:
ShowError("buildin_getitem: Nonexistant item %s requested.\\n", name);
ShowError("buildin_getitem: Nonexistant item %d requested.\\n", nameid);
<b><u>Cause</u></b>
The item that you wanted to give with getitem does not exist.
<b><u>Solution</u></b>
Make sure that the name or the item id which you provided is an actual item. Of course, when using variables to give the item, make sure that they obey this as well.
<b><u>Example</u></b>
Wrong code:

`getitemÂ 400,5;`
`getitemÂ "Appel",5;`

Correct code:

`getitemÂ 500,5;`
`getitemÂ "Apple",5;`

#### buildin_getmonsterinfo: Wrong Monster ID: ...

Source Syntax: ShowError("buildin_getmonsterinfo: Wrong Monster ID: %i\\n", mob_id);
<b><u>Cause</u></b>
The monster ID of the monster you wanted to get information on, does not exist.
<b><u>Solution</u></b>
Make sure the mob_id is the mob_id of an existing monster in one of your mob_db files.
<b><u>Example</u></b>
Wrong code:

`getmonsterinfo(800,MOB_NAME);`

Correct code:

`getmonsterinfo(1002,MOB_NAME);`

#### buildin_getnpctimer: Attached player not found!

Source Syntax: ShowError("buildin_getnpctimer: Attached player not found!\\n");
<b><u>Cause</u></b>
You have attached a player to your NPCTimer. When you tried using getnpctimer on that specific timer, the player was not found anymore. This often means that he is offline.
<b><u>Solution</u></b>
First ask yourself, if it is really needed to attach a player to your NPCTimer. If this is the case, and you do not want to get this error, then you might want to consider using addtimer (a player timer) instead. If you truely want to use NPCTimers with a player attached, then before using getnpctimer, do a check if the player is still online.

#### buildin_rid2name: BL type unknown.

Source Syntax: ShowError("buildin_rid2name: BL type unknown.\\n");
<b><u>Cause</u></b>
In some incredible way, you managed to provide the RID of a group that does not exist. This command can be used on the RID of the following groups only:


There are some other things which have RIDs, like floor items, skill traps etc. These are not allowed with this function.
<b><u>Solution</u></b>
The most likely cause for this bug is that you have provided an invalid RID, which accidentally does have a so called BL-status. (BL means BlockList, in which essential data is stored. Too complicated to explain it in here in a few words.) Make sure you are using a valid RID for this function.

#### buildin_rid2name: invalid RID

Source Syntax: ShowError("buildin_rid2name: invalid RID\\n");
<b><u>Cause</u></b>
You managed to provide an invalid RID. This means, that the RID you gave to the rid2name command, does not exist and does not have a BL attached to it. Most probable is that you provided 0 as the RID, which never exists, or the RID of something that used to be, but isn't anymore. (For example, a player who logged off, or a monster which got killed.)
<b><u>Solution</u></b>
Recheck if you are providing a correct RID. If this is the case, check if it can be sensitive for certain events, like player logging off or monster being killed. If this is the case, then put some additional checks in place to prevent this bug for happening. In the case of player logging off, do a check with the isloggedin command. In the case of a monster, check if it is still alive, etc. etc.

#### buildin_soundeffectall: insufficient arguments for specific area broadcast.

Source Syntax: ShowError("buildin_soundeffectall: insufficient arguments for specific area broadcast.\\n");
<b><u>Cause</u></b>
You didn't provide enough arguments for soundeffectall. Soundeffectall can be used in two ways. One way is with a predefined coverage (bc_all, bc_map etc. constants), which all have a numerical value lower than 23, even when added to each other. The other way, is providing a coverage equal to or bigger than 23, which allows you to define a custom area on a custom map, where the sound will be played.
In this case, you provided a coverage which had a numerical value of 23 or higher, you will have to provide a mapname, and an area by giving x0, y0, x1 and y1. Unfortunately, you failed to do exactly that.
<b><u>Solution</u></b>
If it was your intend to use a custom area, then make sure you provided all of the 8 arguments. For the custom area, this is the format:

`soundeffectallÂ "effectÂ filename",`<number>`,`<coverage>`,"mapname",`<x0>`,`<y0>`,`<x1>`,`<y2>`;`

where coverage &gt;= 23. If you intended to use a predefined area, make sure that the numerical value of coverage is smaller than 23. To check this, open up db/const.txt, and look up the values behind the bc_ entries. Add up the numbers of the bc's that you used, to see if it stays under 23.

#### buildin_warp: moving player '...' to "...",...,... failed.

Source Syntax: ShowError("buildin_warp: moving player '%s' to \\"%s\\",%d,%d failed.\\n", sd-&gt;status.name, str, x, y);
<b><u>Cause</u></b>
The server wasn't able to warp the specific target to its new location. There are two possible reasons for this to happen.

`1Â -Â InvalidÂ mapÂ index.`
`2Â -Â MapÂ notÂ inÂ thisÂ map-server,Â andÂ failedÂ toÂ locateÂ alternateÂ map-server.`

<b><u>Solution</u></b>
Make sure you supplied the correct mapname to the warp function and make sure that the map is loaded and enabled in the mapserver.

#### can't read ...

Source Syntax: ShowError("can't read %s\\n", line);
<b><u>Cause</u></b>
Your mapserver failed to open up the file located at: "db/const.txt".
<b><u>Solution</u></b>
This can be caused by a couple of things. Either the file isn't located there anymore (it was renamed, moved or deleted), or the file is already opened by some other application which locked it from reading. Make sure that the file exists and isn't in use by any other application, not even a text editor.

#### Failed to save the mapreg data!

Source Syntax: ShowError("Failed to save the mapreg data!\\n");
<b><u>Cause</u></b>
This error is not related to bugs in the actual code of a script. It is part of the auto-save routine where the global variables are written to permanent storage (save/mapreg.txt for TXT and SQL, or the mapreg table for SQL if you defined the DMAPREGSQL flag when you compiled your source code). This error does not occur when you compiled your code in such a way that it saves your global variables to the SQL table named mapreg. However, in any other case, at certain intervals, your mapserver auto-saves the global variables to the file in save/mapreg.txt. When it occurs a problem during this, being unable to open or write to the file, then the mapserver will not save the global variables, and will return this error.
<b><u>Solution</u></b>
A long story short: You will have to verify that the file save/mapreg.txt is not locked from writing. Reasons for the file to be locked, is when it is opened by another application, like a text editor, or when the last time it was used, it wasn't closed properly. So, make sure that it is not locked anymore. (Do not close the mapserver in the meantime, or all your global variables might get lost.)

#### file not found: \[...\]

Source Syntax: ShowError("file not found: \[%s\]\\n", cfgName);
<b><u>Cause</u></b>
This error occurs when your mapserver is unable to find or open conf/script_athena.conf.
<b><u>Solution</u></b>
Make sure that the file is not locked and does exist. To check if it is locked, check if it is in use by any other program, like a text-editor. If any other application has the file opened, close that application.

#### function not found

Source Syntax: ShowError("function not found\\n");
<b><u>Cause</u></b>
This usually happens, when you have declared a function name, but did not implement the function.
<b><u>Solution</u></b>
Add code for every declared function.
<b><u>Example</u></b>
Wrong code:

`functionÂ NonExistingFunction;`
`//Â ...`
`NonExistingFunction;`

Correct code:

`functionÂ ExistingFunction;`
`//Â ...`
`ExistingFunction;`
`//Â ...`
`functionÂ ExistingFunctionÂ {`
`Â Â Â Â //Â code`
`}`

#### getnpctimer: Invalid NPC

Source Syntax: ShowError("getnpctimer: Invalid NPC\\n");
<b><u>Cause</u></b>
You tried accessing a NPC timer of a NPC that does not exist.
<b><u>Solution</u></b>
Recheck if the NPC that you want to look up the NPC timer of, actually exists, and that you did not make any typos in the name.

#### initnpctimer: invalid argument type \#1 (needs be int or string)).

Source Syntax: ShowError("initnpctimer: invalid argument type \#1 (needs be int or string)).\\n");
<b><u>Cause</u></b>
You tried using initnpctimer, and gave an invalid argument. This command can be used in conjunction with a string (NPC name) or an integer (starting value).
<b><u>Solution</u></b>
Recheck if you actually needed an argument to use this command, and when this is the case, if it is actually a correct argument.
<b><u>Example</u></b>
Wrong code:

`initnpctimerÂ "@NPC_Name$";`

Correct code:

`initnpctimerÂ @NPC_Name$;`

#### NPC event parameter deprecated! Please use 'NPCNAME::OnEVENT' instead of '...'.

Source Syntax: ShowError("NPC event parameter deprecated! Please use 'NPCNAME::OnEVENT' instead of '%s'.\\n",evt);
<b><u>Cause</u></b>
In the past, when you wanted to specify a NPC event, you could simply use OnEvent. This has changed a while back though. Now you must use the format NPCNAME::OnEvent. You most likely forgot to either include the NPC name, or the On part of the event label.
<b><u>Solution</u></b>
Check if you obey the format, and that your event label really starts with On.

#### run_func : ...? (...(...))

Source Syntax: ShowError("run_func : %s? (%d(%d))\\n",str_buf+str_data\[func\].str,func,str_data\[func\].type);
<b><u>Cause</u></b>
This is an error that occurs deep inside the code, and is therefor probably rare to encounter. It basically means, that the function that the server is trying to run, is actually not a function. A possible scenario where this can occur, is a default start up, and while the server is up, you do an @loadnpc <npc>. However, this new NPC has a variable named exactly like a function, and now overwrites it.
<b><u>Solution</u></b>
Check in your scripts if the function really is a function, and if no other NPC overwrites the function, by using the same name as a variable name or something likewise.

#### run_func: '...' (type ...) is not function and command!

Source Syntax: ShowError("run_func: '"CL_WHITE"%s"CL_RESET"' (type %d) is not function and command!\\n", str_buf+str_data\[func\].str, str_data\[func\].type);
<b><u>Cause</u></b>
This is an error that occurs deep inside the code, and is therefor probably rare to encounter. It basically means, that the function that the server is trying to run, is actually not a function. A possible scenario where this can occur, is a default start up, and while the server is up, you do an @loadnpc <npc>. However, this new NPC has a variable named exactly like a function, and now overwrites it.
<b><u>Solution</u></b>
Check in your scripts if the function really is a function, and if no other NPC overwrites the function, by using the same name as a variable name or something likewise.

#### run_script: infinity loop !

Source Syntax: ShowError("run_script: infinity loop !\\n");
<b><u>Cause</u></b>
You managed to create a loop in your script, which is never ending. Because this may result into a lock up of your server, because of high CPU usage, the mapserver gives you this error.
<b><u>Solution</u></b>
Check if the infinite loop really needs to exist, and if not, make sure that there is an exit possibility.
<b><u>Example</u></b>
Wrong code:

`while(1)Â {`
`Â Â Â setÂ @i,Â @iÂ +Â 1;`
`Â Â Â mesÂ @i;`
`Â Â Â next;`
`}`

Correct code:

`while(@iÂ <Â 100)Â {`
`Â Â Â setÂ @i,Â @iÂ +Â 1;`
`Â Â Â mesÂ @i;`
`Â Â Â next;`
`}`

#### script: jump_zero: not label !

Source Syntax: ShowError("script: jump_zero: not label !\\n");
<b><u>Cause</u></b>
The label you provided with the jump_zero command, isn't a label.
<b><u>Solution</u></b>
Recheck if the label exists, and uses the correct formatting of label names.
<b><u>Example</u></b>
Wrong code:

`jumpzero(Zeny),Â 1337;`

Correct code:

`jumpzero(Zeny),Â L_IsBroke;`

#### script:callfunc: function not found! \[...\]

Source Syntax: ShowError("script:callfunc: function not found! \[%s\]\\n",str);
<b><u>Cause</u></b>
You tried to call a function with callfunc, which does not exist.
<b><u>Solution</u></b>
Recheck if you did not make any typos in the make of the function, and that the function really exists.

#### script:callsub: argument is not a label

Source Syntax:
Current: ShowError("script:callsub: argument is not a label\\n");
Until Rev. 10812: ShowError("script: callsub: not label !\\n");
<b><u>Cause</u></b>
The label you provided for your callsub does not exist.
<b><u>Solution</u></b>
Recheck if you did not make any typos in the subroutine which you are trying to call. Make sure the label exists.

#### script:cleararray: illegal scope

Source Syntax: ShowError("script:cleararray: illegal scope\\n");
<b><u>Cause</u></b>
This error indicates that you tried to use cleararray on a variable which isn't an array.
<b><u>Solution</u></b>
Recheck if the array you want to clear actually is an array, and that you typed the name of the array correctly.

#### script:cleararray: not a variable

Source Syntax: ShowError("script:cleararray: not a variable\\n");
<b><u>Cause</u></b>
The variable you tried to clear with cleararray, isn't a variable, or it isn't a legal variable name.
<b><u>Solution</u></b>
Confirm that the variable does exist, and that it obeys the official rules for names of a variable. For reference, check this link: [Variables\#Other_Important_Info Naming Variables](/Variables#Other_Important_Info_Naming_Variables "wikilink")
<b><u>Example</u></b>
Wrong code:

`cleararrayÂ .1st_array[0],0,5;`

Correct code:

`cleararrayÂ .First_array[0],0,5;`

#### script:conv_num: cannot convert to number, defaulting to 0

Source Syntax: ShowError("script:conv_num: cannot convert to number, defaulting to 0\\n");
<b><u>Cause</u></b>
You tried converting something which isn't a string nor a valid number, to a decimal integer. The mapserver replaced what you tried to convert, to 0. The mapserver is capable of automatically converting strings, octal numbers ("o377") and hex numbers ("0xFF").
<b><u>Solution</u></b>
Check if all your (unmeant/silent) conversions are alright, and if you did not try to convert for example a binary number ("0b10011101") to a decimal integer.
<b><u>Example</u></b>
Wrong code:

`setÂ @i,Â 0b10011101;Â //Â 0b10011101Â equalsÂ toÂ 157Â asÂ decimalÂ number,Â 0x9DÂ asÂ hex,Â orÂ o235Â asÂ octonal.`

Possible correct codes:

`setÂ @i,Â 0x9D;Â `
`setÂ @i,Â o235;`
`setÂ @i,Â 157;`

#### script:conv_num: overflow detected, capping to ...

Source Syntax: ShowError("script:conv_num: overflow detected, capping to %ld\\n", num);
<b><u>Cause</u></b>
This error occurs when you try to convert a number from a different system than decimal, and the result is bigger than what an integer can hold. This maximum is 2,147,483,647. When this happens, to prevent memory corruption or buffer overflow, the mapserver automatically caps the number at this maximum.
<b><u>Solution</u></b>
Calculate if the number which you try to convert to the decimal system, is less than the maximum allowed. Change when needed, to prevent unexpected results.
<b><u>Example</u></b>
Wrong code:

`setÂ @result,Â 0xFFFFÂ *Â 0xFFFF;Â //Â 65535Â *Â 65535Â =Â 4294836225.`
`mesÂ "0xFFFFÂ *Â 0xFFFFÂ =Â "+@result;Â //Â Displays:Â "0xFFFFÂ *Â 0xFFFFÂ =Â 2147483647"`

Correct code:

`setÂ @i1,Â 0xFFFF;Â //Â ConvertsÂ toÂ 65535`
`setÂ @i2,Â 0xFFFF;Â //Â ConvertsÂ toÂ 65535`
`setÂ @temp_low,Â @i1Â *Â (@i2%1000);Â //Â 65535Â *Â (65535%1000)Â =Â 65535Â *Â 535Â =Â 35061225Â (Fits.)`
`setÂ @temp_high,Â @i1Â *Â (@i2/1000);Â //Â 65535Â *Â (65535/1000)Â =Â 65535Â *Â 65Â =Â 4259775Â (Fits.)`
`setÂ @result_low,Â @temp_low%1000;Â //Â WeÂ onlyÂ needÂ theÂ lowerÂ part:Â 35061225%1000Â =Â 225`
`setÂ @result_high,Â @temp_highÂ +Â (@temp_low/1000);Â //Â 4259775Â +Â (35061225/1000)Â =Â 4259775Â +Â 35061Â =Â 4294836`
`mesÂ "0xFFFFÂ *Â 0xFFFFÂ =Â "+@result_high+@result_low;Â //Â Displays:Â "0xFFFFÂ *Â 0xFFFFÂ =Â 4294836225"`

Short Correct code:

`setÂ @result_low,Â (0xFFFFÂ *Â (0xFFFF%1000))%1000;`
`setÂ @result_high,Â (0xFFFFÂ *Â (0xFFFF/1000))Â +Â ((0xFFFFÂ *Â (0xFFFF%1000))%1000)/1000;`
`mesÂ "0xFFFFÂ *Â 0xFFFFÂ =Â "+@result_high+@result_low;Â //Â Displays:Â "0xFFFFÂ *Â 0xFFFFÂ =Â 4294836225"`

Short Compact Correct code:

`setÂ @result_low,Â (0xFFFFÂ *Â (0xFFFF%1000))%1000;`
`setÂ @result_high,Â (0xFFFFÂ *Â 0xFFFFÂ +Â (0xFFFF%1000)Â *Â (0xFFFF%1000))/1000;`
`mesÂ "0xFFFFÂ *Â 0xFFFFÂ =Â "+@result_high+@result_low;Â //Â Displays:Â "0xFFFFÂ *Â 0xFFFFÂ =Â 4294836225"`

#### script:conv_num: underflow detected, capping to ...

Source Syntax: ShowError("script:conv_num: underflow detected, capping to %ld\\n", num);
<b><u>Cause</u></b>
This error is telling you the opposite of the previous error. Due to converting numbers or calculations, your result has become lower than the lowest possible integer which your mapserver can store. As a safety precaution, it has set the value to -2,147,483,648
<b><u>Solution</u></b>
Calculate if the number which you try to convert to the decimal system, is more than the minimum allowed. Change when needed, to prevent unexpected results.

#### script:conv_str: cannot convert to string, defaulting to ""

Source Syntax: ShowError("script:conv_str: cannot convert to string, defaulting to \\"\\"\\n");
<b><u>Cause</u></b>
You tried converting something to a string, but the mapserver was unable to convert this. Therefor, it has used the empty string "" instead.
<b><u>Solution</u></b>
Make sure you entered something that can be converted to a string. Things need to be converted when for example displaying a number in a mes-dialogue.
<b><u>Example</u></b>
Wrong code:

`mesÂ "YouÂ areÂ theÂ "+Â 1stÂ +".";Â //Â 1stÂ isÂ notÂ aÂ validÂ string,Â norÂ aÂ validÂ number.`

Correct code:

`mesÂ "YouÂ areÂ theÂ first.";`
`mesÂ "YouÂ areÂ theÂ "+1+"st.";`

#### script:copyarray: illegal scope

Source Syntax: ShowError("script:copyarray: illegal scope\\n");
<b><u>Cause</u></b>
This error indicates that you tried to use copyarray on a variable which isn't an array.
<b><u>Solution</u></b>
Recheck if the array you want to copy actually is an array, and that you typed the name of the array correctly. Of course, also check this for the target array.

#### script:copyarray: not a variable

Source Syntax: ShowError("script:copyarray: not a variable\\n");
<b><u>Cause</u></b>
The variable you tried to copy with copyarray, isn't a variable, or it isn't a legal variable name.
<b><u>Solution</u></b>
Confirm that the variable does exist, and that it obeys the official rules for names of a variable. For reference, check this link: [Variables\#Other_Important_Info Naming Variables](/Variables#Other_Important_Info_Naming_Variables "wikilink")
<b><u>Example</u></b>
Wrong code:

`copyarrayÂ @2ndarray2[0],@1starray[2],2;`

Correct code:

`copyarrayÂ @secondarray2[0],@firstarray[2],2;`

#### script:copyarray: type mismatch

Source Syntax: ShowError("script:copyarray: type mismatch\\n");
<b><u>Cause</u></b>
You tried copying an integer array to a string array, or the other way around.
<b><u>Solution</u></b>
Make sure that both either have the $-suffix, or do not have the string suffix.
<b><u>Example</u></b>
Wrong code:

`copyarrayÂ @MyArray2$[0],@MyArray1[2],2;`

Correct code:

`copyarrayÂ @MyArray2[0],@MyArray1[2],2;Â `

#### script:deletearray: illegal scope

Source Syntax: ShowError("script:deletearray: illegal scope\\n");
<b><u>Cause</u></b>
This error indicates that you tried to use deletearray on a variable which isn't an array.
<b><u>Solution</u></b>
Recheck if the array you want to delete actually is an array, and that you typed the name of the array correctly.

#### script:deletearray: not a variable

<b><u>Cause</u></b>
The variable you tried to delete with deletearray, isn't a variable, or it isn't a legal variable name.
<b><u>Solution</u></b>
Confirm that the variable does exist, and that it obeys the official rules for names of a variable. For reference, check this link: [Variables\#Other_Important_Info Naming Variables](/Variables#Other_Important_Info_Naming_Variables "wikilink")
<b><u>Example</u></b>
Wrong code:

`deletearrayÂ .1st_array[0],5;`

Correct code:

`deletearrayÂ .First_array[0],5;`

`setÂ @temp,Â getarg(0);Â //NormalÂ getarg.Â WillÂ giveÂ theÂ errorÂ ifÂ itÂ doesÂ notÂ exist.`
`setÂ @temp,Â getarg(5,10);Â //Â SpecialÂ getarg.Â IfÂ getarg(5)Â doesÂ notÂ exist,Â itÂ willÂ useÂ theÂ valueÂ 10,Â andÂ willÂ notÂ giveÂ thisÂ error.`

<b><u>Solution</u></b>
Check if the parameter you want to obtain with getarg, always exists. (Keep in mind, getarg starts with 0, not with 1.) If it should always exist, check your callfunc and callsub lines and anything related to it. However, if the parameter is optional, then use the second format, where you can provide a default value when the parameter has not been given.
<b><u>Example</u></b>
Wrong code:

`callfuncÂ "F_MyFunction",5,10;`
`...`
`F_MyFunction:`
`Â Â setÂ @MF_start,Â getarg(0);`
`Â Â setÂ @MF_end,Â getarg(1);`
`Â Â setÂ @MF_increase,Â getarg(2);`

Correct code:

`callfuncÂ "F_MyFunction",5,10;`
`...`
`F_MyFunction:`
`Â Â setÂ @MF_start,Â getarg(0);`
`Â Â setÂ @MF_end,Â getarg(1);`
`Â Â setÂ @MF_increase,Â getarg(2,1);`

#### script:getarg: no callfunc or callsub!

Source Syntax: ShowError("script:getarg: no callfunc or callsub!\\n");
<b><u>Cause</u></b>
You tried using getarg without having called the function or subroutine. In layman's terms, this means: You used goto F_MyFunction;, instead of callfunc "F_MyFunction"; Or, you used getarg in a piece of normal code, and not in a subroutine or a function.
<b><u>Solution</u></b>
First check if the getarg command is inside a real function or subroutine. If this isn't the case, remove it or make the piece of code a real function or subroutine. If the getarg is inside a real function or subroutine, and you are still getting the error, then this means that you have jumped to the function or subroutine in a weird way. Check if you used anything like goto <function or subname>; or if the code in advance of the function/sub isn't properly ended. This last thing can happen when you have some code above the sub or function, which doesn't have a close; or end; at the end.

#### script:getarraysize: illegal scope

Source Syntax: ShowError("script:getarraysize: illegal scope\\n");
<b><u>Cause</u></b>
This error indicates that you tried to use getarraysize on a variable which isn't an array.
<b><u>Solution</u></b>
Recheck if the array you want to get the size of, actually is an array, and that you typed the name of the array correctly.

#### script:getarraysize: not a variable

Source Syntax: ShowError("script:getarraysize: not a variable\\n");
<b><u>Cause</u></b>
The variable you tried to obtain the size of with getarraysize, isn't a variable, or it isn't a legal variable name.
<b><u>Solution</u></b>
Confirm that the variable does exist, and that it obeys the official rules for names of a variable. For reference, check this link: [Variables\#Other_Important_Info Naming Variables](/Variables#Other_Important_Info_Naming_Variables "wikilink")
<b><u>Example</u></b>
Wrong code:

`setÂ @temp,Â getarraysize(.1st_array);`

Correct code:

`setÂ @temp,Â getarraysize(.First_array);`

#### script:getelementofarray: illegal scope

Source Syntax: ShowError("script:getelementofarray: illegal scope\\n");
<b><u>Cause</u></b>
This error indicates that you tried to use getelementofarray on a variable which isn't an array.
<b><u>Solution</u></b>
Recheck if the array you want to get an element of, actually is an array, and that you typed the name of the array correctly.

#### script:getelementofarray: not a variable

Source Syntax: ShowError("script:getelementofarray: not a variable\\n");
<b><u>Cause</u></b>
The variable you tried to get an element of with getelementofarray, isn't a variable, or it isn't a legal variable name.
<b><u>Solution</u></b>
Confirm that the variable does exist, and that it obeys the official rules for names of a variable. For reference, check this link: [Variables\#Other_Important_Info Naming Variables](/Variables#Other_Important_Info_Naming_Variables "wikilink")
<b><u>Example</u></b>
Wrong code:

`setÂ @temp,Â getelementofarray(.1st_array,5);`

Correct code:

`setÂ @temp,Â getelementofarray(.First_array,5);`

#### script:getvariableofnpc: can't find npc ...

Source Syntax:
Current: ShowError("script:getvariableofnpc: can't find npc %s\\n", script_getstr(st,3));
Until Rev. 10812: ShowError("script: getvariableofnpc: can't find npc %s\\n", npcname);
<b><u>Cause</u></b>
You tried to request the variable of a NPC which doesn't exist.
<b><u>Solution</u></b>
Check if the NPC you want to get the variable of, indeed exists. Of course, also check if you did not make any typos in the name of the NPC.

#### script:getvariableofnpc: invalid scope (not npc variable)

Source Syntax:
Current: ShowError("script:getvariableofnpc: invalid scope (not npc variable)\\n");
Until Rev. 10812: ShowError("script: getvariableofnpc: invalid scope %s (not npc variable)\\n", var_name);
<b><u>Cause</u></b>
You tried requesting the value of a variable, which isn't a permanent npc variable. (Meaning, only has the prefix '.' and no @.) This command can only be used to access permanent npc variables.
<b><u>Solution</u></b>
Check if the variable you are trying to request is an actual permanent npc variable. If this is not the cause of the error, then you will have to change the other NPC and make the variable in there a permanent NPC varable. Adjust the variable name of the line getvariableofnpc accordingly of course.

#### script:getvariableofnpc: not a variable

Source Syntax:
Current: ShowError("script:getvariableofnpc: not a variable\\n");
Until Rev. 10812: ShowError("script: getvariableofnpc: first argument is not a variable name\\n");
<b><u>Cause</u></b>
The variable you requested does not obey the rules of variable naming. That, or the slight possibility that it doesn't exist.
<b><u>Solution</u></b>
Check if you wrote the name correctly and if it obeys the rules of variable naming. For reference, check this link: [Variables\#Other_Important_Info Naming Variables](/Variables#Other_Important_Info_Naming_Variables "wikilink")
Also check if you did not make the same mistake in the NPC where you want to get the variable of.
<b><u>Example</u></b>
Wrong code:

`setÂ @temp,Â getvariableofnpc(.1stVar,"MyFirstNPC");`

Correct code:

`setÂ @temp,Â getvariableofnpc(.FirstVar,"MyFirstNPC");`

#### script:goto: not a label

Source Syntax:
Current: ShowError("script:goto: not a label\\n");
Until Rev. 10812: ShowError("script:goto: not label!\\n");
<b><u>Cause</u></b>
You tried to jump to a label which doesn't exist, or isn't defined as a label.
<b><u>Solution</u></b>
Check the name, to see if it is correct. Also check if the label exists. If this both is the case, and you still get the error, then make sure that the name is different from any variable name, function name, subroutine name and command name.

#### script:guardian: invalid data type for argument \#6 (from 1)

Source Syntax:
Current: ShowError("script:guardian: invalid data type for argument \#6 (from 1)\\n");
Until Rev. 10812: ShowError("buildin_guardian: invalid data type for argument \#8 (%d).", data-&gt;type);
<b><u>Cause</u></b>
Your sixth argument for the guardian command isn't of the correct type. You will have to use one of the following formats:

`guardianÂ "`<map name>`",`<x>`,`<y>`,"`<name to show>`",`<mob id>`;`
`guardianÂ "`<map name>`",`<x>`,`<y>`,"`<name to show>`",`<mob id>`,"`<event label>`";`
`guardianÂ "`<map name>`",`<x>`,`<y>`,"`<name to show>`",`<mob id>`,`<guardian index>`;`
`guardianÂ "`<map name>`",`<x>`,`<y>`,"`<name to show>`",`<mob id>`,"`<event label>`",`<guardian index>`;`

In essence, this means, that your event label and/or guardian index is not respectively a string and/or an integer. (The index needs to be an integer, the event label needs to be a string.)
<b><u>Solution</u></b>
Check if you are using the correct type for the specific argument you want to use. Make sure that the sixth argument really is a string or an integer.

#### script:input: not a variable

Source Syntax:
Current: ShowError("script:input: not a variable\\n");
Until Rev. 10812: ShowError("script: buildin_input: given argument is not a variable!\\n");
<b><u>Cause</u></b>
You tried to use input on a variable which isn't a variable. This means that you are naming your variable wrong, or that you typed the name of a command, label, function or subroutine.
<b><u>Solution</u></b>
Verify that you are obeying the rules for variable naming, and that the name you use isn't already taken by any command, label, function or subroutine.

#### script:menu: argument \#... (from 1) is not a label or label not found.

Source Syntax:
Current: ShowError("script:menu: argument \#%d (from 1) is not a label or label not found.\\n", i);
Until Rev. 10812: ShowError("script:menu: argument \#%d (from 1) is not a label or label not found (op=%s).\\n", i, script_op2name(data-&gt;type));
<b><u>Cause</u></b>
The target label you provided for a specific menu option, is not a correct label name, or does not exist. Please note that in a menu, the dash (-) is a valid replacement for a label.
<b><u>Solution</u></b>
Verify that the reported label does exist, and is correctly typed, and that it also obeys the rules for label naming.

#### script:menu: illegal number of arguments (...).

Source Syntax: ShowError("script:menu: illegal number of arguments (%d).\\n", (script_lastdata(st) - 1));
<b><u>Cause</u></b>
The amount of arguments in your menu is not even. This makes it an invalid menu, because every menu option needs to be accompanied by a label where it should go to.
<b><u>Solution</u></b>
Check if you have put your commas between every menu option and label, and check if every menu option is accompanied by a label.
<b><u>Example</u></b>
Wrong code:

`menuÂ "OptionÂ 1",Label_1,"OptionÂ 2";`

Correct code:

`menuÂ "OptionÂ 1",Label_1,"OptionÂ 2",Label_2;Â `

or

`menuÂ "OptionÂ 1",Label_1,"OptionÂ 2",-;`

#### script:menu: unexpected data in label argument

Source Syntax: ShowError("script:menu: unexpected data in label argument\\n");
<b><u>Cause</u></b>
The target label you provided for a specific menu option, is not a correct label name, or does not exist. Please note that in a menu, the dash (-) is a valid replacement for a label.
<b><u>Solution</u></b>
Verify that the reported label does exist, and is correctly typed, and that it also obeys the rules for label naming.

`if(!"Hello")Â close;`

Correct code:

`if(!(MyInput$Â ==Â "Hello"))Â close;`

or

`if(!MyVariable)Â close;`

`setÂ var,Â -var;Â //Â MakeÂ negative.Â (dash)`
`setÂ var,Â !var;Â //Â IntegerÂ inversion.Â (exclamationÂ mark)`
`setÂ var,Â ~var;Â //Â BitwiseÂ inversion.Â (tilde)`

<b><u>Solution</u></b>
Make sure that you have provided the right sign for this single argument operator.

#### script:op_2: invalid data for operator ...

Source Syntax:
Current: ShowError("script:op_2: invalid data for operator %s\\n", script_op2name(op));
Until Rev. 10812: ShowError("script:op_2: invalid type of data op:%s left:%s right:%s\\n", script_op2name(op), script_op2name(left-&gt;type), script_op2name(right-&gt;type));
<b><u>Cause</u></b>
You provided either an invalid type of argument (not string and not integer), or you used an operator which isn't ADD, and tried to use it on a string in combination with an integer.
<b><u>Solution</u></b>
If you are using ADD (+), then make sure that you did provide either strings, integers or both, and not an invalid type of data. In any other case, make sure that you provided two strings or two integers.

`setÂ @result,Â my_var%0;`
`setÂ @result,Â my_var/0;`

Correct code:

`setÂ @result,Â my_var%5;`
`setÂ @result,Â my_var/2;`


<b><u>Solution</u></b>
Check which operator of the ones above you wanted to use, and make sure you use that one.

#### script:op2_str: unexpected string operator ...

Source Syntax:
Current: ShowError("script:op2_str: unexpected string operator %s\\n", script_op2name(op));
Until Rev. 10812: ShowError("script:op2_str: unexpected string operator op:%s\\n", script_op2name(op));
<b><u>Cause</u></b>
You tried using a string operator on two strings, which doesn't exist. The following Binary String Operators are allowed:


Please note: Binary in Binary String Operators does not mean bitwise, it simply means it uses two arguments. Also note: Only the ADD operator returns a string. The other operators return an integer. Third note, the operators with smaller than and bigger than in it, well, that isn't the actual way it works. You will have to dive into a manual on strcmp to read what it does exactly.
<b><u>Solution</u></b>
Check which operator of the ones above you wanted to use, and make sure you use that one.

#### script:op_3: invalid data for the ternary operator test

Source Syntax:
Current: ShowError("script:op_3: invalid data for the ternary operator test\\n");
Until Rev. 10812: ShowError("script:op_3: invalid type of data op:%s [data:%s\\n](data:%s\n)", script_op2name(op), script_op2name(data-&gt;type));
<b><u>Cause</u></b>
There is one single Ternary Operator which you can use in the Athena Scripting Engine. It's the compressed if-else statement. This is the format:

<condition>`Â ?Â `<expression when true>`Â :Â `<expression when false>

The condition is using no operators, Unary operators (1 argument), or any of the comparison Binary operators (2 arguments). Whatever operator you use the arguments provided for that operator, must be both a string or both an integer in the case of binary operators, or a string or an integer in any of the other operator types. When you fail to do this, for example, when comparing a string to an integer, or when you use something else besides a string or an integer, you will get this error.
<b><u>Solution</u></b>
Make sure that whatever you put in the condition part of the code, is of the valid type integer or string. Also, when using more than one argument, make sure that for each operator, they match up in type.
<b><u>Example</u></b>
Wrong code:

`mesÂ (MyString$Â >Â MyInt)Â ?Â "YouÂ win"Â :Â "YouÂ lose";`

Correct code:

`mesÂ (YourIntÂ >Â MyInt)Â ?Â "YouÂ win"Â :Â "YouÂ lose";`

#### script:query_sql: not a variable

Source Syntax: ShowError("script:query_sql: not a variable\\n");
<b><u>Cause</u></b>
You tried to pass a variable for storing results for your SQL query. The variable isn't a variable though.
<b><u>Solution</u></b>
Recheck if the variables at the end of your query_sql statement are indeed variables. Check their spelling and if they aren't commands or labels or something likewise.
<b><u>Example</u></b>
Wrong code:

`` query_sql("SELECTÂ `name`Â FROMÂ `char`Â WHEREÂ `char_id`Â =Â '"+.@char_id+"'",Â .@$result); ``

Correct code:

`` query_sql("SELECTÂ `name`Â FROMÂ `char`Â WHEREÂ `char_id`Â =Â '"+.@char_id+"'",Â .@result$); ``

#### script:set: no player attached for player variable '...'

Source Syntax: ShowError("script:set: no player attached for player variable '%s'\\n", name);
<b><u>Cause</u></b>
Server variables are NPC variables (.) and global variables ($). In your script you used one of the non-server variables, which need a player to be attached to the script. However, there is no player attached to the script.
<b><u>Solution</u></b>
Recheck if the variable is supposed to be a non-server variable. If it is supposed to be a non-server variable, make sure that there is a player attached to the script.

#### script:set: not a variable

Source Syntax:
Current: ShowError("script:set: not a variable\\n");
Until Rev. 10812: ShowError("script: buildin_set: not name\\n");
<b><u>Cause</u></b>
You tried to use set on something which isn't a variable. That, or you failed to provide any variable, or a variable who's name is already used by a label, function, sub-function or script command.
<b><u>Solution</u></b>
Recheck if you provided a variable to be set, as well as the variable having the correct naming requirements.
<b><u>Example</u></b>
Wrong code:

`setÂ ,5;`

Correct code:

`setÂ @temp,Â 5;`

#### script:setarray: illegal scope

Source Syntax: ShowError("script:setarray: illegal scope\\n");
<b><u>Cause</u></b>
This error indicates that you tried to use setarray on a variable which isn't an array.
<b><u>Solution</u></b>
Recheck if the array you want to set actually is an array, and that you typed the name of the array correctly.

#### script:setarray: not a variable

Source Syntax: ShowError("script:setarray: not a variable\\n");
<b><u>Cause</u></b>
The variable you tried to set with setarray, isn't a variable, or it isn't a legal variable name.
<b><u>Solution</u></b>
Confirm that the variable does exist, and that it obeys the official rules for names of a variable. For reference, check this link: [Variables\#Other_Important_Info Naming Variables](/Variables#Other_Important_Info_Naming_Variables "wikilink")
<b><u>Example</u></b>
Wrong code:

`setarrayÂ .1st_array[1],3,6,5;`

Correct code:

`setarrayÂ .First_array[1],3,6,5;`

#### script:setd: no player attached for player variable '...'

Source Syntax: ShowError("script:setd: no player attached for player variable '%s'\\n", buffer);
<b><u>Cause</u></b>
Server variables are NPC variables (.) and global variables ($). In your script you used one of the non-server variables, which need a player to be attached to the script. However, there is no player attached to the script.
<b><u>Solution</u></b>
Recheck if the variable is supposed to be a non-server variable. If it is supposed to be a non-server variable, make sure that there is a player attached to the script.

#### script:setmobdata: unknown data identifier ...

Source Syntax: ShowError("script:setmobdata: unknown data identifier %d\\n", type);
<b><u>Cause</u></b>
You wanted to change a part of a mob's data, however, that part does not exist. You can set up to 27 different parameters when it comes to mob data, of which the first 21 are explained here: [setmobdata](http://djyhnzo.freepgs.com/index.php?c=setmobdata)
<b><u>Solution</u></b>
Make sure that whatever you are trying to set, is something that exists. You should only use this line when you know what you are doing, so if you are unsure on what is wrong, simply erase the line.

#### script:setnpcdisplay: expected a string or number

Source Syntax: ShowError("script:setnpcdisplay: expected a string or number\\n");
<b><u>Cause</u></b>
You did not provide a correct new name or view id for the NPC.
<b><u>Solution</u></b>
The format of setnpcdisplay allows you to change the name, the view ID or both of the NPC. If you change the name, provide the name before the view ID, if you are changing that as well. Also, recheck that the new view ID is a number and the new name is a string, if these are being altered.
<b><u>Example</u></b>
Wrong code:

`setnpcdisplay(strnpcinfo(0),Â 113,Â "Announcer");`

Correct code:

`setnpcdisplay(strnpcinfo(0),Â "Announcer",Â 113);`

#### script:unitattack: unsupported source unit type ...

Source Syntax: ShowError("script:unitattack: unsupported source unit type %d\\n", unit_bl-&gt;type);
<b><u>Cause</u></b>
You can only use the unitattack command on players, monsters or pets. You tried using it on a different type of unit.
<b><u>Solution</u></b>
Recheck the unit id which you provided, if it is the UID of a player, monster or pet. These three types have a terminal UID, which gets erased when the monster dies, the pet walks away, or when the player logs out. To make sure that your error isn't caused by this as well, put some safeguards in place, like checking if the player is still online.

#### script:warpportal: npc is needed

Source Syntax:
Current: ShowError("script:warpportal: npc is needed\\n");
Until Rev. 10812: ShowError("script:warpportal: npc is needed");
<b><u>Cause</u></b>
Warpportal is a command that can be used from inside a script to spawn a warp portal. This works different from the script type warp portal, which is permanent. One of the requirements for warpportal is that it needs to be executed from within a normal NPC. In your case, this is exactly what went wrong.
<b><u>Solution</u></b>
Make sure that your warpportal line is within a normal NPC, and not defined as a stand-alone warpportal, nor that it is inside a function, subroutine, itemscript or monsterscript.

#### script_rid2sd: fatal error ! player not attached!

Source Syntax: ShowError("script_rid2sd: fatal error ! player not attached!\\n");
<b><u>Cause</u></b>
One of the commands you were using in your script, requires the assistance of a player. A wide variety of commands as well as certain variables, require the player to be attached to the script. This is what went wrong in your script. For example, you tried to access or set a player variable with no player attached to the script, or a command like addtimer which requires the attachment of a player.
<b><u>Solution</u></b>
In the case of a variable, make sure that either a player is attached, or in the cases that this is impossible, that you are using a NPC or global variable.
In the case of commands, also make sure that the player is attached.
If by default, a player should be attached, then the most likely option is that the player logged off. So, make some safeguards against this, by using for example the isloggedin command, to check if the player is still logged in.

#### script_save_mapreg: Unable to lock-open file \[...\]

Source Syntax: ShowError("script_save_mapreg: Unable to lock-open file \[%s\]\\n",mapreg_txt);
<b><u>Cause</u></b>
Your mapserver tried to save the global variables to its file (save/mapreg.txt). Unfortunately, it was unable to do this, because the file is already opened by another program in the lock-mode.
<b><u>Solution</u></b>
Recheck if no other program (like a text-editor) is using the file, and make sure that when no other program is using it, that the file has been closed properly.

#### startnpctimer: invalid argument type \#1 (needs be int or string)).

Source Syntax: ShowError("startnpctimer: invalid argument type \#1 (needs be int or string)).\\n");
<b><u>Cause</u></b>
Startnpctimer has several formats. The different kinds of formats allow you to either attach it to another NPC, or to let it start at a certain value. The value or the NPC name you provided is incorrect, the mapserver does not recognize it as a string or integer.
<b><u>Solution</u></b>
Recheck if you are giving the correct argument to the command, make sure it is an integer or a string. In the case of using a variable, make sure that the variable contains correct data.

#### stopnpctimer: invalid argument type \#1 (needs be int or string)).

Source Syntax: ShowError("stopnpctimer: invalid argument type \#1 (needs be int or string)).\\n");
<b><u>Cause</u></b>
Stopnpctimer has several formats. The different kinds of formats allow you to either attach it to another NPC, or to let it start at a certain value. The value or the NPC name you provided is incorrect, the mapserver does not recognize it as a string or integer.
<b><u>Solution</u></b>
Recheck if you are giving the correct argument to the command, make sure it is an integer or a string. In the case of using a variable, make sure that the variable contains correct data.

#### unget_com can back only 1 data

Source Syntax: ShowError("unget_com can back only 1 data\\n");
<b><u>Cause</u></b>
As most code that is inside the scripting engine's main part, this error seems unlikely to be caused by your scripts. What exactly causes it to trigger is unknown to me.
<b><u>Solution</u></b>
Your best chance is to get support in the Scripting Support Forum, or to contact one of the [developers](/developers "wikilink").

#### unknown command : ... @ ...

Source Syntax: ShowError("unknown command : %d @ %d\\n",c,pos);
<b><u>Cause</u></b>
This error indicates a source problem. It means, that the script engine generated a byte instruction out of some part of your script, which is undefined in the runtime part of the engine.
<b><u>Solution</u></b>
Report it to core developers, together with your script, to get the source issue fixed.

#### wrong item ID : countitem(...)

Source Syntax: ShowError("wrong item ID : countitem(%i)\\n", nameid);
<b><u>Cause</u></b>
You provided an invalid item id for countitem. This error is triggered when you provide an item id lower than 500.
<b><u>Solution</u></b>
Check if you didn't enter a faulty item id, and correct it when needed.
<b><u>Example</u></b>
Wrong code:

`if(countitem(400)Â <Â 1)Â close;`

Correct code:

`if(countitem(500)Â <Â 1)Â close;`

#### wrong item ID : countitem2(...)

Source Syntax: ShowError("wrong item ID : countitem2(%i)\\n", nameid);
<b><u>Cause</u></b>
You provided an invalid item id for countitem. This error is triggered when you provide an item id lower than 500.
<b><u>Solution</u></b>
Check if you didn't enter a faulty item id, and correct it when needed.
<b><u>Example</u></b>
Wrong code:

`if(countitem2(400,1,0,0,0,0,0,0)Â <Â 1)Â close;`

Correct code:

`if(countitem2(500,1,0,0,0,0,0,0)Â <Â 1)Â close;`

#### wrong item ID : equipitem(...)

Source Syntax: ShowError("wrong item ID : equipitem(%i)\\n",nameid);
<b><u>Cause</u></b>
You tried to equip an item with equipitem, which doesn't exist.
<b><u>Solution</u></b>
Check if you entered the correct item id, and also check if it exists in item_db.txt or item_db2.txt or when using SQL item databases, in the database item_db and item_db2.

### Fatal Errors

All fatal errors are listed in this section.
#### npc_event_export: label name error !

Source Syntax: ShowFatalError("npc_event_export: label name error !\\n");
<b><u>Cause</u></b>
This error occurs when you have a npc event label with an invalid size of the name. NPC event labels always start with On. The size of the name of the event label is each character after On and before the ':'. When this amount of characters is 0 (in the case of "On:") or bigger than the constant NameLength, which is 23 or 24 (in the case of "OnAbcdefghijklmnopqrstuvwxyz:"), your mapserver will be unable to create the npc event label, and therefor crash.
<b><u>Solution</u></b>
Rename the event labels that are bugged. Make sure that they actually have a name between the On and ":" part, and that this name does not exceed 23 characters.

#### npc_event_export: out of memory !

Source Syntax: ShowFatalError("npc_event_export: out of memory !\\n");
<b><u>Cause</u></b>
This error occurs when the server does not have enough free memory to allocate a new npc event label. (These are the labels that start with On.)
<b><u>Solution</u></b>
Try to free up more memory, or add new memory to your system. If this does not solve the problem, then you will have to consider to use less npc event labels. This can be accomplished by either erasing NPCs that contain them, or by optimizing your npc event labels.

#### npc_timerevent_import: out of memory !

Source Syntax: ShowFatalError("npc_timerevent_import: out of memory !\\n");
<b><u>Cause</u></b>
This error occurs when the server does not have enough free memory left to allocate space for an OnTimer: label.
<b><u>Solution</u></b>
Free up more memory, or remove OnTimer labels that you do not use.

### Parsing Errors

All parsing errors are listed in this section.
`functionÂ test;Â //Â CallsÂ uponÂ in-scriptÂ functionÂ test.`
`functionÂ Â Â testÂ Â Â Â {Â //Â DeclarationÂ ofÂ aÂ functionÂ includingÂ neededÂ code.`
`Â Â Â //Â FunctionÂ codeÂ goesÂ here.`
`}`

In your case, the script parser encountered something else than the allowed { or ; after the function's name. Recheck your in-script function, and make sure it either has a ; or a { at the end of the line.

#### need '('

Source Syntax: disp_error_message("need '('",p);
<b><u> Cause</u></b>
In your script, there is a function that you are trying to call. This function requires it's arguments to be between round brackets. Your script is lacking at least the left one ('('), and most likely both.
<b><u> Solution</u></b>
Search inside your script for the function call displayed by the error. Fix it by making sure there are parentheses around the arguments.
<b><u> Example</u></b>
Wrong code:

`...`
`setÂ .var,Â SF_DummyFunctionÂ 5,Â 7;`
`...`

Correct code is:

`...`
`setÂ .var,Â SF_DummyFunction(5,Â 7);`
`...`

#### not found '{'

Source Syntax: disp_error_message("not found '{'",p);
<b><u>Cause</u></b>
The header of your script or function is missing a '<b>{</b>'. This left curly bracket specifies the start of the body of the script, and must be on the same line as your header.
<b><u>Solution</u></b>
If you forgot to place a { at all, then place it at the end of the header line. If you placed the opening curly bracket at the next line, then move it until it is at the same line as the header.
<b><u>Example</u></b>
Wrong code:

`prontera,200,200,4`<tab>`script`<tab>`Dummy`<tab>`46,`
`{`
`Â Â Â mesÂ "hi";`
`Â Â Â close;`
`}`

It should be:

`prontera,200,200,4`<tab>`script`<tab>`Dummy`<tab>`46,{`
`Â Â Â mesÂ "hi";`
`Â Â Â close;`
`}`

#### parse_callfunc: callsub has no arguments, please review it's definition

Source Syntax: disp_error_message("parse_callfunc: callsub has no arguments, please review it's definition",p);
<b><u>Cause</u></b>
In the words of one of the devs: "Someone fucked up the script engine." This means, that if you get this error, which is highly unlikely, that you probably did nothing wrong.
<b><u>Solution</u></b>
When you encounter this problem though, please report it to the core developers. Tell them what you did that caused it (i.e. show the script, tell them what you did with the script, just loading or using it or whatever, and of course, when the bug happens).

#### parse_callfunc: DEBUG last curly is not an argument list

Source Syntax: disp_error_message("parse_callfunc: DEBUG last curly is not an argument list",p);
<b><u>Cause</u></b>
The parsing of function parameter lists is bugged in the script engine. (In essence, you should never get this error.)
<b><u>Solution</u></b>
There is no known solution to this. What is advised by the Developers themselves is to report this to the devs. When doing this, also provide your script that is causing this error.

#### parse_callfunc: expected ')' to close argument list

Source Syntax: disp_error_message("parse_callfunc: expected ')' to close argument list",p);
<b><u>Cause</u></b>
This error occurs when you are calling a function or something likewise, which uses round brackets around the arguments, but you forgot to enter the closing rounding bracket.
<b><u>Solution</u></b>
Simply go to the specified bugged function call, and count if the amount of left round brackets match the amount of right round brackets. Change them when needed.
<b><u>Example</u></b>
Wrong usage:

`...`
`setÂ @temp,Â SF_DummyFunction(5,Â 7;`
`...`

As you can see, 1 (, but no ). Correct line would be:

`setÂ @temp,Â SF_DummyFunction(5,Â 7);`

#### parse_callfunc: not enough arguments, expected ','

Source Syntax: disp_error_message2("parse_callfunc: not enough arguments, expected ','", p, script_config.warn_func_mismatch_paramnum);
<b><u>Cause</u></b>
When calling upon a predefined function, you need to meet the exact amount of arguments. In this case, you did not have enough arguments.
<b><u>Solution</u></b>
Make sure the bugged function has the right amount of arguments. Look at it's template, and see if the amount of arguments match.

#### parse_curly_close: unexpected string

Source Syntax: disp_error_message("parse_curly_close: unexpected string",p);
<b><u>Cause</u></b>
We are not 100% sure, but this might happen if you place a normal string after you put the closing curly of the NPC. Again, not 100% sure, but the developers say that this is one of those rare cases that shouldn't occur. However, when it does occur, please use the scripting support forum if you cannot figure out how to fix it. Another possibility as a cause, is that you have too many right curly brackets ('}').
<b><u>Solution</u></b>
The probable solution is to erase the string or right curly bracket that the mapserver shows you. Or, recount your left and right curly brackets, and make sure they are all in the right spot.

#### parse_expr: unexpected char

Source Syntax: disp_error_message("parse_expr: unexpected char",p);
<b><u>Cause</u></b>
This error occurs when the server detects a character in your script that shouldn't be there. This can happen when you have misplaced one of the following characters: ')', ';', ':', '\[', '\]' or '}'.
<b><u>Solution</u></b>
Either move or remove the wrong placed character, or fix the text/arguments that are forgotten in front of these characters.
<b><u>Example</u></b>
Example of what might cause this error:

`...`
`setÂ .@[0],Â 5;`
`...`

What the line can be:

`setÂ .@temp[0],Â 5;`

#### parse_line: expect command, missing function name or calling undeclared function

Source Syntax: disp_error_message("parse_line: expect command, missing function name or calling undeclared function",p);
<b><u>Cause</u></b>
This is probably happening when you are trying to call to a function that simply does not exist.
<b><u>Solution</u></b>
Make sure the function you are trying to reach, actually exists. If it exists, make sure you did not make any typos. And if it didn't exist, create the function, or remove the line.

#### parse_line: need ')'

Source Syntax: disp_error_message("parse_line: need ')'",p);
<b><u>Cause</u></b>
This error is most commonly seen when your if, for or while statement lacks a closing round bracket.
<b><u>Solution</u></b>
Check your for, if or while statement, and make sure the amount of opening round brackets match the amount of closing round brackets. Also, with if and while, make sure that the entire condition that you want to check, is closed in by at least one ( and one ). Extra brackets are not a sin, too few are.
<b><u>Example</u></b>
Wrong code:

`if(iÂ >Â 10Â end;`

This should be:

`if(iÂ >Â 10)Â end;`

#### parse_line: need ';'

Source Syntax: disp_error_message("parse_line: need ';'",p);
<b><u>Cause</u></b>
One of the most common errors. There are actually two versions of this one. One that only occurs within the first line of a for-statement, the other one being, simply forgetting a ';' at the end of the line.
<b><u>Solution</u></b>
In case of a for-statement going bad, please make sure it upholds this format: for(<initiation>;<condition>;<iteration>). In case of anything else, then the error is 99 out of 100 times, not on the line the script parser tells you. It is often a forgotten ; in the line above. Make sure this is the case, and add it there.
<b><u>Example</u></b>
Wrong code:

`setÂ @temp,Â 5`
`close;`

Correct code should be:

`setÂ @temp,Â 5;`
`close;`

#### parse_simpleexpr: unexpected character

Source Syntax: disp_error_message("parse_simpleexpr: unexpected character",p);
<b><u>Cause</u></b>
The script engine was expecting a word (the name of a variable, label, function or something like that) and found something else.
<b><u>Solution</u></b>
Make sure that you have typed the right word, and did not use invalid characters.
<b><u>Example</u></b>
Probably example of wrong code:

`mesÂ "2Â +Â 2Â equalsÂ "+Â (Â +Â 2)Â +".";`
`mesÂ "IÂ knowÂ math!";`

Correct code:

`mesÂ "2Â +Â 2Â equalsÂ "+Â (2Â +Â 2)Â +".";`
`mesÂ "IÂ knowÂ math!";`

#### parse_simpleexpr: unexpected eof @ string

Source Syntax: disp_error_message("parse_simpleexpr: unexpected eof @ string",p);
<b><u>Cause</u></b>
Your string is not properly closed. In fact, there is nothing behind the string. This can be caused when you are editing your file, and save your progress while you were typing a string, and then ran this script.
<b><u>Solution</u></b>
Close the string like it should be closed (with a "), or remove the line all together if it shouldn't be there. Also close up the script all together, because eof means End of File. So even if you just fix this bug, your NPC is still bugged.
<b><u>Example</u></b>
Wrong code:

`...`
`mesÂ "Bye`
<file ends>

Right code:

`...`
`mesÂ "Bye";`
`close;`
`}`

#### parse_simpleexpr: unexpected expr end

Source Syntax: disp_error_message("parse_simpleexpr: unexpected expr end",p);
<b><u>Cause</u></b>
This can happen in a variety of cases. They call come down to not closing a string, command or condition correct.
<b><u>Solution</u></b>
Make sure that your string or command is properly closed. If this does not apply, make sure that your condition is set up correctly.
<b><u>Example</u></b>
Wrong code:

`setÂ @total,Â 5Â +Â ;`

Correct code:

`setÂ @total,Â 5;`

or

`setÂ @total,Â 5Â +Â 1;`

#### parse_simpleexpr: unexpected newline @ string

Source Syntax: disp_error_message("parse_simpleexpr: unexpected newline @ string",p);
<b><u>Cause</u></b>
You either forgot to close your string, or pressed return, and typed the rest on a new line. Unfortunately, a string needs to be closed on the same line.
<b><u>Solution</u></b>
Properly close the string, or divide it in multiple parts using: "string part 1" + "string part 2" etc.
<b><u>Example</u></b>
Wrong code:

`mesÂ "HelloÂ there.`
`Â Â Â Â Â MyÂ nameÂ isÂ Nienke.";`

Corrected code:

`mesÂ "HelloÂ there.Â MyÂ nameÂ isÂ Nienke.";`

or

`mesÂ "HelloÂ there."Â +`
`Â Â Â Â "MyÂ nameÂ isÂ Nienke.";`

#### parse_simpleexpr: unmatch ')'

Source Syntax: disp_error_message("parse_simpleexpr: unmatch ')'",p);
<b><u>Cause</u></b>
The amount of opening round brackets does not match the amount of closing round brackets. Again, this can happen in a wide variety of cases.
<b><u>Solution</u></b>
Count the amount of brackets that you have. Make sure each opening bracket has a closing bracket.
<b><u>Example</u></b>
Wrong code:

`setÂ @total,Â 5Â *Â (6Â +Â (5Â *Â 5);`

Correct code:

`setÂ @total,Â 5Â *Â (6Â +Â (5Â *Â 5));`

or

`setÂ @total,Â 5Â *Â (6Â +Â 5Â *Â 5);`

#### parse_simpleexpr: unmatch '\]'

Source Syntax: disp_error_message("parse_simpleexpr: unmatch '\]'",p);
<b><u>Cause</u></b>
This error occurs when you forgot to close off the element part of an array.
<b><u>Solution</u></b>
To fix this, you need to ask yourself first: Did I want an array at this point? If not, remove the opening square bracket. If you did, make sure the amount of opening square brackets match the amount of closing square brackets.
<b><u>Example</u></b>
Wrong code:

`setÂ @temp[0,Â 5;`

Correct code:

`setÂ @temp[0],Â 5;`

#### parse_subexpr: need ':'

Source Syntax: disp_error_message("parse_subexpr: need ':'", p-1);
<b><u>Cause</u></b>
This errors occurs, when you use a compact if statement, and forgot the : to separate the true and false statements. A compact if statement looks like this:

<condition>`Â ?Â `<expression when true>`Â :Â `<expression when false>

<b><u>Solution</u></b>
Confirm you wanted to use the compact if statement. If this is the case, find where you forgot to add the ':'. If it isn't the case, make sure that the question mark triggering this statement is not there, or erase the entire line.
<b><u>Example</u></b>
Wrong code:

`mesÂ "YouÂ areÂ partÂ ofÂ teamÂ "Â +Â (Â (aÂ ==Â 1)Â ?Â "Blue""Red"Â );`

Correct code:

`mesÂ "YouÂ areÂ partÂ ofÂ teamÂ "Â +Â (Â (aÂ ==Â 1)Â ?Â "Blue"Â :Â "Red"Â );`

#### parse_syntax: 'case' label not integer

Source Syntax: disp_error_message("parse_syntax: 'case' label not integer",p);
<b><u>Cause</u></b>
The format for a case label is: "case \#:", where \# must be an integer value. If this is not the case, the mapserver will throw this error at you. The Athena Scripting Language does **NOT** support "case <string>:" and possibly not even "case <character>:".
<b><u>Solution</u></b>
Change whatever you had between the case and ':' to a real integer value instead.
<b><u>Example</u></b>
Wrong code:

`switch(@a$)Â {`
`Â Â Â caseÂ "Hi":`

Correct code:

`switch(@a)Â {`
`Â Â Â caseÂ 1:`

#### parse_syntax: dup 'case'

Source Syntax: disp_error_message("parse_syntax: dup 'case'",p);
<b><u>Cause</u></b>
Inside the same switch, one 'case label' exists more than one time. This error is like the normal duplicate label error. Two of the same named labels exists in the same piece of code, in this case, the switch.
<b><u>Solution</u></b>
Remove the duplicated case label, and when needed, merge their both codes.
<b><u>Example</u></b>
Wrong code:

`caseÂ 1:`
`Â Â Â setÂ @a,Â 5;`
`Â Â Â break;`
`caseÂ 1:`
`Â Â Â setÂ @b,Â 5;`
`Â Â Â break;`

Correct code:

`caseÂ 1:`
`Â Â Â setÂ @a,Â 5;`
`Â Â Â setÂ @b,Â 5;`
`Â Â Â break;`

#### parse_syntax: dup 'default'

Source Syntax: disp_error_message("parse_syntax: dup 'default'",p);
<b><u>Cause</u></b>
Same cause as the error right above this one. There is a duplicated label named default within the same switch.
<b><u>Solution</u></b>
Remove the second default label, and when needed, merge the code.
<b><u>Example</u></b>
Wrong code:

`default:`
`Â Â Â setÂ @a,Â 5;`
`Â Â Â break;`
`default:`
`Â Â Â setÂ @b,Â 5;`
`Â Â Â break;`

Correct code:

`default:`
`Â Â Â setÂ @a,Â 5;`
`Â Â Â setÂ @b,Â 5;`
`Â Â Â break;`

#### parse_syntax: expect ':'

Source Syntax: disp_error_message("parse_syntax: expect ':'",p);
<b><u>Cause</u></b>
The case label, inside the switch command, is missing the ':'. This is exactly the same as with normal variables.
<b><u>Solution</u></b>
Simply add the colon after the case label. Or, when the case label is not needed, simply remove it.
<b><u>Example</u></b>
Wrong code:

`caseÂ 1`
`Â Â Â setÂ @a,Â 5;`
`Â Â Â break;`

Correct code:

`caseÂ 1:`
`Â Â Â setÂ @a,Â 5;`
`Â Â Â break;`

#### parse_syntax: expect space ' '

Source Syntax: disp_error_message("parse_syntax: expect space ' '",p);
<b><u>Cause</u></b>
Another case label error. The format for a case label is: "case \#:", where \# is an integer value. The format dictates that there needs to be a space between the word "case" and the integer value. This space is missing in your script.
<b><u>Solution</u></b>
Add the space between "case" and the number.
<b><u>Example</u></b>
Wrong code:

`case1:`
`Â Â Â setÂ @a,Â 5;`
`Â Â Â break;`

Correct code:

`caseÂ 1:`
`Â Â Â setÂ @a,Â 5;`
`Â Â Â break;`

#### parse_syntax: need '('

Source Syntax: disp_error_message("parse_syntax: need '('",p);
<b><u>Cause</u></b>
Your for-line is not following the default format. The format is: for(<initiation>;<condition>;&lt;iteration);. You are missing the '('.
<b><u>Solution</u></b>
Remove the for-statement all together, if it is not supposed to be there, or add the missing left round bracket.
<b><u>Example</u></b>
Wrong code:

`forÂ setÂ @a,5;Â @aÂ <Â 10;Â setÂ @a,Â @aÂ +Â 1)Â {`

Correct code:

`for(setÂ @a,5;Â @aÂ <Â 10;Â setÂ @a,Â @aÂ +Â 1)Â {`

#### parse_syntax: need ':'

Source Syntax: disp_error_message("parse_syntax: need ':'",p);
<b><u>Cause</u></b>
Missing the ':' behind the switch label named "default".
<b><u>Solution</u></b>
Add the missing colon directly after default. (Or remove the default label all together.)
<b><u>Example</u></b>
Wrong code:

`default`
`Â Â Â break;`

Correct code:

`default:`
`Â Â Â break;`

#### parse_syntax: need ';'

Source Syntax: disp_error_message("parse_syntax: need ';'",p);
<b><u>Cause</u></b>
One of the most common errors. There are actually two versions of this one. One that only occurs within the first line of a for-statement, the other one being, simply forgetting a ';' at the end of the line.
<b><u>Solution</u></b>
In case of a for-statement going bad, please make sure it upholds this format: for(<initiation>;<condition>;<iteration>). In case of anything else, then the error is 99 out of 100 times, not on the line the script parser tells you. It is often a forgotten ; in the line above. Make sure this is the case, and add it there.
<b><u>Example</u></b>
Wrong code:

`setÂ @temp,Â 5`
`close;`

Correct code should be:

`setÂ @temp,Â 5;`
`close;`

#### parse_syntax: need 'while'

Source Syntax: disp_error_message("parse_syntax: need 'while'",p);
<b><u>Cause</u></b>
Your Do-command is missing the while-command after the closing '}'. Format for this command is: do { <statements> } while (<condition);
<br>
<b><u>Solution</u></b>
Add the missing while-command and when needed, the condition.
<b><u>Example</u></b>
Wrong code:

`doÂ {`
`Â Â Â setÂ @a,Â @aÂ +Â 1;`
`}`

Correct code:

`doÂ {`
`Â Â Â setÂ @a,Â @aÂ +Â 1;`
`}Â whileÂ (@aÂ <Â 100);`

#### parse_syntax: unexpected 'continue'

Source Syntax: disp_error_message("parse_syntax: unexpected 'continue'",p);
<b><u>Cause</u></b>
Continue can be only used within looping commands, like for, do .. while and while. It simply means, ignore the rest, start a new round. Your continue-command however, is placed outside one of these looping commands.
<b><u>Solution</u></b>
Move continue; to inside the looping command you wanted it to use for. If this is not what you wanted, then erase the line.
<b><u>Example</u></b>
Wrong code:

`for(setÂ @i,Â 0;Â @iÂ <Â 10;Â setÂ @i,Â @iÂ +Â 1)Â {`
`Â Â if(@My_Numbers[@i]Â !=Â $Winning_Numbers[@i])Â {`
`Â Â Â Â Â setÂ @i,Â @iÂ +Â 1;`
`Â Â Â Â Â setÂ Points,Â PointsÂ -Â 1;`
`Â Â }`
`Â Â setÂ Points,Â PointsÂ +Â 1;`
`}`
`continue;`

Correct code:

`for(setÂ @i,Â 0;Â @iÂ <Â 10;Â setÂ @i,Â @iÂ +Â 1)Â {`
`Â Â if(@My_Numbers[@i]Â !=Â $Winning_Numbers[@i])Â continue;`
`Â Â setÂ Points,Â PointsÂ +Â 1;`
`}`

#### parse_syntax: unexpected 'default'

Source Syntax: disp_error_message("parse_syntax: unexpected 'default'",p);
<b><u>Cause</u></b>
This happens when you place the "default:" label outside of a switch.
<b><u>Solution</u></b>
Erase the default label or move it inside the switch you wanted to use it for.
<b><u>Example</u></b>
The example in the error right above this one can be applied for this one as well.

#### parse_syntax: unexpected 'break'

Source Syntax: disp_error_message("parse_syntax: unexpected 'break'",p);
<b><u>Cause</u></b>
The break; command is only supposed to be used in looping functions or functions that use curly brackets (like if or switch). It will make you jump outside of the statement. In this case, this break; is not located in such a function.
<b><u>Solution</u></b>
Remove the break; or replace it by an end; if you want to end the script.
<b><u>Example</u></b>
Wrong code:

`-`<tab>`script`<tab>`Dummy`<tab>`-1,{`
`Â Â Â OnInit:`
`Â Â Â Â Â Â setÂ $Blah,Â 14;`
`Â Â Â Â Â Â break;`
`Â Â Â ....`

Correct code:

`-`<tab>`script`<tab>`Dummy`<tab>`-1,{`
`Â Â Â OnInit:`
`Â Â Â Â Â Â setÂ $Blah,Â 14;`
`Â Â Â Â Â Â end;`
`Â Â Â ....`

#### parse_syntax: unexpected 'case'

Source Syntax: disp_error_message("parse_syntax: unexpected 'case' ",p);
<b><u>Cause</u></b>
This happens when you place the "case \#:" label outside of a switch.
<b><u>Solution</u></b>
Erase the case label or move it inside the switch you wanted to use it for.
<b><u>Example</u></b>
The example in the third error above this one can be applied for this one as well.

#### parse_syntax:function: function name is missing or invalid

Source Syntax: disp_error_message("parse_syntax:function: function name is missing or invalid", p);
<b><u>Cause</u></b>
The name you are using in the function line is not valid, or is there not at all.
<b><u>Solution</u></b>
Use a correct name for the function. The same rules abide as for labels and variable names.
<b><u>Example</u></b>
Wrong code:

`functionÂ 1stFunction;`
`function;`

Correct code for both:

`functionÂ SF_Function01;`

#### script:add_word: invalid word. A word consists of underscores and/or alphanumeric characters, and valid variable prefixes/postfixes.

Source Syntax: disp_error_message("script:add_word: invalid word. A word consists of underscores and/or alphanumeric characters, and valid variable prefixes/postfixes.", p);
<b><u>Cause</u></b>
This happens when a word does not meet the standard format. Like the error says: A word consists of underscores and/or alphanumeric characters, and valid variable prefixes/postfixes.
<b><u>Solution</u></b>
Change the name to meet the requirements.

#### set_label: dup label

Source Syntax: disp_error_message("set_label: dup label ",script_pos);
<b><u>Cause</u></b>
This label already exists. It is not allowed to have the same label more than once, within the same NPC, itemscript, monsterscript, function or sub.
<b><u>Solution</u></b>
Remove or rename one of the two labels to fix this. Also change the code depending on the label that is going to be changed or removed.
<b><u>Example</u></b>
Wrong code:

`...`
`gotoÂ Hello;`
`...`
`Hello:`
`Â Â Â mesÂ "Hello";`
`Â Â Â close;`
`Hello:`
`Â Â Â mesÂ "Hi";`
`Â Â Â close;`

Correct code:

`...`
`gotoÂ Hello;`
`...`
`Hello:`
`Â Â Â mesÂ "Hello";`
`Â Â Â close;`

#### set_label: invalid label name

Source Syntax: disp_error_message("set_label: invalid label name",script_pos);
<b><u>Cause</u></b>
You are trying to use the name of a reserved variable or constant as a label name. This is not allowed.
<b><u>Solution</u></b>
Change the label name into something else.
<b><u>Example</u></b>
Wrong code:

`gotoÂ BaseLevel;`
`...`
`BaseLevel:`

Correct code:

`gotoÂ L_BaseLevel;`
`...`
`L_BaseLevel:`

#### unexpected end of script

Source Syntax: disp_error_message("unexpected end of script",p);
<b><u>Cause</u></b>
The script parser encountered an unexpected end of the script without having a matching amount of paired curly brackets and without encountering the end tag.
<b><u>Solution</u></b>
Recheck your script and make sure that you have the closing curly bracket at the end of your script. Also count your curly brackets. Make sure that there is a matching } for each { that you have.

### Obsolete Errors

This section will cover all errors that used to exist in the past, but are not represented anymore in today's revision. (So, there is not even a replacement, they were completely erased.)

#### Up to Revision 11859

##### script:get_val error, cannot access player variable '...', defaulting to ""

Source Syntax: ShowError("script:get_val: cannot access player variable '%s', defaulting to \\"\\"\\n", name);
<b><u>Cause</u></b>
You tried accessing a player type variable (Temporal or permanent player variable, account variable or global account variable) without having a player attached to the script. Because this variable was of the type String, the mapserver converted it to an empty string "".
<b><u>Solution</u></b>
Make sure that you actually have a player attached to your script when trying to access player-type variables.

##### script:get_val error, cannot access player variable '...', defaulting to 0

Source Syntax: ShowError("script:get_val: cannot access player variable '%s', defaulting to 0\\n", name);
<b><u>Cause</u></b>
You tried accessing a player type variable (Temporal or permanent player variable, account variable or global account variable) without having a player attached to the script. Because this variable was of the type Integer, the mapserver converted it to 0.
<b><u>Solution</u></b>
Make sure that you actually have a player attached to your script when trying to access player-type variables.

#### Up to Revision 11778

##### buildin_fakenpcname: Invalid look value ...

Source Syntax: ShowError("buildin_fakenpcname: Invalid look value %d\\n",look);
<b><u>Cause</u></b>
With the fakenpcname command, you can not only change the name into a new name. You can also adjust the look. This is what you attempted to do, but failed, because you provided an invalid look value.
<b><u>Solution</u></b>
Change the look value (third argument) in such a way that it fits in the boundaries. The minimum value is -32768 and the maximum value is 32767.
<b><u>Example</u></b>
Wrong code:

`fakenpcnameÂ "MyÂ NPC","YourÂ NPC",600000;`

Correct code:

`fakenpcnameÂ "MyÂ NPC","YourÂ NPC",32767;`

#### Up to Revision 11501

##### script:skip_space: end of file while parsing block comment. expected \*/

Source Syntax: disp_error_message("script:skip_space: end of file while parsing block comment. expected "CL_BOLD"\*/"CL_NORM, p);
<b><u>Cause</u></b>
A comment block was opened but never closed. The server encountered the end of the file before finding the closing tag for the comment block. A comment block starts with /\* and everything after it, including on new lines, will be regarded as comments, until it encounters \*/.
<b><u>Solution</u></b>
Add the \*/ at the end of your comment block, to fix this error.
<b><u>Example</u></b>
Wrong code:

`/*Â Tralalalala`
`Â Â Â lalalalala`
`Â Â Â Oops,Â endÂ ofÂ theÂ file.`

Correct code:

`/*Â Tralalalala`
`Â Â Â lalalalala`
`Â Â Â Oops,Â endÂ ofÂ theÂ file.Â */`

#### Up to Revision 10842

##### get_val error, cannot access player variable '...'

Source Syntax: ShowError("get_val error, cannot access player variable '%s'\\n", name);
<b><u>Cause</u></b>
You tried accessing a player type variable (Temporal or permanent player variable, account variable or global account variable) without having a player attached to the script.
<b><u>Solution</u></b>
Make sure that you actually have a player attached to your script when trying to access player-type variables.

##### script:menu: argument \#... (from 1) is not a string or compatible.

Source Syntax:
Until Rev. 10842: ShowError("script:menu: argument \#%d (from 1) is not a string or compatible.\\n", (i - 1));
Until Rev. 10812: ShowError("script:menu: argument \#%d (from 1) is not a string or compatible (op=%s).\\n", (i - 1), script_op2name(data-&gt;type));
<b><u>Cause</u></b>
This error should occur when the given argument is not a string nor an integer. (Will be fixed in revision ...)
<b><u>Solution</u></b>
Check if what you provided as a menu option is a real string or an integer. Correct it if needed.

#### Up to Revision 10812

##### script: getelementofarray (operator\[\]): param1 not name !

Source Syntax: ShowError("script: getelementofarray (operator\[\]): param1 not name !\\n");
<b><u>Cause</u></b>
The variable name which you provided (the first argument of getelementofarray) is not a valid variable name.
<b><u>Solution</u></b>
Make sure that the variable name is using the correct syntax. For a full set of rules on variable naming, check the [appropriate article](/Variables "wikilink").
<b><u>Example</u></b>
Wrong code:

`setÂ @result,Â getelementofarray(1starray,3);`

Correct code:

`setÂ @result,Â getelementofarray(firstarray,3);`

[Category:Debugging](/Category:Debugging "wikilink") [Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Packets

__NOTOC__

0x64
`structÂ PACKET_CA_LOGINÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Version`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ ID[24]`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ Passwd[24]`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ clienttype`
`}`

0x65
`structÂ PACKET_CH_ENTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ AuthCode`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ userLevel`
`Â /*Â this+0xeÂ */Â unsignedÂ shortÂ clientType`
`Â /*Â this+0x10Â */Â unsignedÂ charÂ Sex`
`}`

0x66
`structÂ PACKET_CH_SELECT_CHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ CharNum`
`}`

0x67
`structÂ PACKET_CH_MAKE_CHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ name[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ charÂ Str`
`Â /*Â this+0x1bÂ */Â unsignedÂ charÂ Agi`
`Â /*Â this+0x1cÂ */Â unsignedÂ charÂ Vit`
`Â /*Â this+0x1dÂ */Â unsignedÂ charÂ Int`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ Dex`
`Â /*Â this+0x1fÂ */Â unsignedÂ charÂ Luk`
`Â /*Â this+0x20Â */Â unsignedÂ charÂ CharNum`
`Â /*Â this+0x21Â */Â shortÂ headPal`
`Â /*Â this+0x23Â */Â shortÂ head`
`}`

0x68
`structÂ PACKET_CH_DELETE_CHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â charÂ key[40]`
`}`

0x69
`structÂ PACKET_AC_ACCEPT_LOGINÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ AuthCode`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0xcÂ */Â unsignedÂ longÂ userLevel`
`Â /*Â this+0x10Â */Â unsignedÂ longÂ lastLoginIP`
`Â /*Â this+0x14Â */Â charÂ lastLoginTime[26]`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ Sex`
`Â /*Â this+0x2fÂ */Â structÂ SERVER_ADDRÂ ServerList[...]Â {Â //Â SizeÂ 32`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ ip`
`Â Â Â /*Â this+0x4Â */Â shortÂ port`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ charÂ name[20]`
`Â Â Â /*Â this+0x1aÂ */Â unsignedÂ shortÂ usercount`
`Â Â Â /*Â this+0x1cÂ */Â unsignedÂ shortÂ state`
`Â Â Â /*Â this+0x1eÂ */Â unsignedÂ shortÂ property`
`Â }`
`}`

0x6a
`structÂ PACKET_AC_REFUSE_LOGINÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ErrorCode`
`Â /*Â this+0x3Â */Â charÂ blockDate[20]`
`}`

0x6b
`structÂ PACKET_HC_ACCEPT_ENTER_NEO_UNIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ TotalSlotNum`
`Â /*Â this+0x5Â */Â unsignedÂ charÂ PremiumStartSlot`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ PremiumEndSlot`
`Â /*Â this+0x7Â */Â charÂ dummy1_beginbilling`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ code`
`Â /*Â this+0xcÂ */Â unsignedÂ longÂ time1`
`Â /*Â this+0x10Â */Â unsignedÂ longÂ time2`
`Â /*Â this+0x14Â */Â charÂ dummy2_endbilling[7]`
`Â /*Â this+0x1bÂ */Â structÂ CHARACTER_INFO_NEO_UNIONÂ charInfo[...]Â {Â //Â SizeÂ 144`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ GID`
`Â Â Â /*Â this+0x4Â */Â intÂ exp`
`Â Â Â /*Â this+0x8Â */Â intÂ money`
`Â Â Â /*Â this+0xcÂ */Â intÂ jobexp`
`Â Â Â /*Â this+0x10Â */Â intÂ joblevel`
`Â Â Â /*Â this+0x14Â */Â intÂ bodystate`
`Â Â Â /*Â this+0x18Â */Â intÂ healthstate`
`Â Â Â /*Â this+0x1cÂ */Â intÂ effectstate`
`Â Â Â /*Â this+0x20Â */Â intÂ virtue`
`Â Â Â /*Â this+0x24Â */Â intÂ honor`
`Â Â Â /*Â this+0x28Â */Â shortÂ jobpoint`
`Â Â Â /*Â this+0x2aÂ */Â intÂ hp`
`Â Â Â /*Â this+0x2eÂ */Â intÂ maxhp`
`Â Â Â /*Â this+0x32Â */Â shortÂ sp`
`Â Â Â /*Â this+0x34Â */Â shortÂ maxsp`
`Â Â Â /*Â this+0x36Â */Â shortÂ speed`
`Â Â Â /*Â this+0x38Â */Â shortÂ job`
`Â Â Â /*Â this+0x3aÂ */Â shortÂ head`
`Â Â Â /*Â this+0x3cÂ */Â shortÂ weapon`
`Â Â Â /*Â this+0x3eÂ */Â shortÂ level`
`Â Â Â /*Â this+0x40Â */Â shortÂ sppoint`
`Â Â Â /*Â this+0x42Â */Â shortÂ accessory`
`Â Â Â /*Â this+0x44Â */Â shortÂ shield`
`Â Â Â /*Â this+0x46Â */Â shortÂ accessory2`
`Â Â Â /*Â this+0x48Â */Â shortÂ accessory3`
`Â Â Â /*Â this+0x4aÂ */Â shortÂ headpalette`
`Â Â Â /*Â this+0x4cÂ */Â shortÂ bodypalette`
`Â Â Â /*Â this+0x4eÂ */Â unsignedÂ charÂ name[24]`
`Â Â Â /*Â this+0x66Â */Â unsignedÂ charÂ Str`
`Â Â Â /*Â this+0x67Â */Â unsignedÂ charÂ Agi`
`Â Â Â /*Â this+0x68Â */Â unsignedÂ charÂ Vit`
`Â Â Â /*Â this+0x69Â */Â unsignedÂ charÂ Int`
`Â Â Â /*Â this+0x6aÂ */Â unsignedÂ charÂ Dex`
`Â Â Â /*Â this+0x6bÂ */Â unsignedÂ charÂ Luk`
`Â Â Â /*Â this+0x6cÂ */Â unsignedÂ charÂ CharNum`
`Â Â Â /*Â this+0x6dÂ */Â unsignedÂ charÂ haircolor`
`Â Â Â /*Â this+0x6eÂ */Â shortÂ bIsChangedCharName`
`Â Â Â /*Â this+0x70Â */Â unsignedÂ charÂ lastMap[16]`
`Â Â Â /*Â this+0x80Â */Â intÂ DeleteDate`
`Â Â Â /*Â this+0x84Â */Â intÂ Robe`
`Â Â Â /*Â this+0x88Â */Â intÂ SlotAddon`
`Â Â Â /*Â this+0x8cÂ */Â intÂ RenameAddon`
`Â }`
`}`

0x6c
`structÂ PACKET_HC_REFUSE_ENTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ErrorCode`
`}`

0x6d
`structÂ PACKET_HC_ACCEPT_MAKECHAR_NEO_UNIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ CHARACTER_INFO_NEO_UNIONÂ charinfoÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ GID`
`Â Â Â /*Â this+0x4Â */Â intÂ exp`
`Â Â Â /*Â this+0x8Â */Â intÂ money`
`Â Â Â /*Â this+0xcÂ */Â intÂ jobexp`
`Â Â Â /*Â this+0x10Â */Â intÂ joblevel`
`Â Â Â /*Â this+0x14Â */Â intÂ bodystate`
`Â Â Â /*Â this+0x18Â */Â intÂ healthstate`
`Â Â Â /*Â this+0x1cÂ */Â intÂ effectstate`
`Â Â Â /*Â this+0x20Â */Â intÂ virtue`
`Â Â Â /*Â this+0x24Â */Â intÂ honor`
`Â Â Â /*Â this+0x28Â */Â shortÂ jobpoint`
`Â Â Â /*Â this+0x2aÂ */Â intÂ hp`
`Â Â Â /*Â this+0x2eÂ */Â intÂ maxhp`
`Â Â Â /*Â this+0x32Â */Â shortÂ sp`
`Â Â Â /*Â this+0x34Â */Â shortÂ maxsp`
`Â Â Â /*Â this+0x36Â */Â shortÂ speed`
`Â Â Â /*Â this+0x38Â */Â shortÂ job`
`Â Â Â /*Â this+0x3aÂ */Â shortÂ head`
`Â Â Â /*Â this+0x3cÂ */Â shortÂ weapon`
`Â Â Â /*Â this+0x3eÂ */Â shortÂ level`
`Â Â Â /*Â this+0x40Â */Â shortÂ sppoint`
`Â Â Â /*Â this+0x42Â */Â shortÂ accessory`
`Â Â Â /*Â this+0x44Â */Â shortÂ shield`
`Â Â Â /*Â this+0x46Â */Â shortÂ accessory2`
`Â Â Â /*Â this+0x48Â */Â shortÂ accessory3`
`Â Â Â /*Â this+0x4aÂ */Â shortÂ headpalette`
`Â Â Â /*Â this+0x4cÂ */Â shortÂ bodypalette`
`Â Â Â /*Â this+0x4eÂ */Â unsignedÂ charÂ name[24]`
`Â Â Â /*Â this+0x66Â */Â unsignedÂ charÂ Str`
`Â Â Â /*Â this+0x67Â */Â unsignedÂ charÂ Agi`
`Â Â Â /*Â this+0x68Â */Â unsignedÂ charÂ Vit`
`Â Â Â /*Â this+0x69Â */Â unsignedÂ charÂ Int`
`Â Â Â /*Â this+0x6aÂ */Â unsignedÂ charÂ Dex`
`Â Â Â /*Â this+0x6bÂ */Â unsignedÂ charÂ Luk`
`Â Â Â /*Â this+0x6cÂ */Â unsignedÂ charÂ CharNum`
`Â Â Â /*Â this+0x6dÂ */Â unsignedÂ charÂ haircolor`
`Â Â Â /*Â this+0x6eÂ */Â shortÂ bIsChangedCharName`
`Â }`
`}`

0x6e
`structÂ PACKET_HC_REFUSE_MAKECHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ErrorCode`
`}`

0x6f
`structÂ PACKET_HC_ACCEPT_DELETECHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x70
`structÂ PACKET_HC_REFUSE_DELETECHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ErrorCode`
`}`

0x71
`structÂ PACKET_HC_NOTIFY_ZONESVRÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ mapName[16]`
`Â /*Â this+0x16Â */Â structÂ ZSERVER_ADDRÂ addrÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ ip`
`Â Â Â /*Â this+0x4Â */Â shortÂ port`
`Â }`
`}`

0x72
`structÂ PACKET_CZ_ENTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â intÂ AuthCode`
`Â /*Â this+0xeÂ */Â unsignedÂ longÂ clientTime`
`Â /*Â this+0x12Â */Â unsignedÂ charÂ Sex`
`}`

0x73
`structÂ PACKET_ZC_ACCEPT_ENTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ startTime`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x9Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ ySize`
`}`

0x74
`structÂ PACKET_ZC_REFUSE_ENTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ErrorCode`
`}`

0x75
`structÂ PACKET_ZC_NOTIFY_INITCHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x8Â */Â shortÂ Style`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ Item`
`}`

0x76
`structÂ PACKET_ZC_NOTIFY_UPDATECHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ Style`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ Item`
`}`

0x77
`structÂ PACKET_ZC_NOTIFY_UPDATEPLAYERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Style`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ Item`
`}`

0x78
`structÂ PACKET_ZC_NOTIFY_STANDENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ objecttype`
`Â /*Â this+0x3Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x7Â */Â shortÂ speed`
`Â /*Â this+0x9Â */Â shortÂ bodyState`
`Â /*Â this+0xbÂ */Â shortÂ healthState`
`Â /*Â this+0xdÂ */Â shortÂ effectState`
`Â /*Â this+0xfÂ */Â shortÂ job`
`Â /*Â this+0x11Â */Â shortÂ head`
`Â /*Â this+0x13Â */Â shortÂ weapon`
`Â /*Â this+0x15Â */Â shortÂ accessory`
`Â /*Â this+0x17Â */Â shortÂ shield`
`Â /*Â this+0x19Â */Â shortÂ accessory2`
`Â /*Â this+0x1bÂ */Â shortÂ accessory3`
`Â /*Â this+0x1dÂ */Â shortÂ headpalette`
`Â /*Â this+0x1fÂ */Â shortÂ bodypalette`
`Â /*Â this+0x21Â */Â shortÂ headDir`
`Â /*Â this+0x23Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x27Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x29Â */Â shortÂ honor`
`Â /*Â this+0x2bÂ */Â shortÂ virtue`
`Â /*Â this+0x2dÂ */Â boolÂ isPKModeON`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ sex`
`Â /*Â this+0x2fÂ */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x33Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x34Â */Â unsignedÂ charÂ state`
`Â /*Â this+0x35Â */Â shortÂ clevel`
`}`

0x79
`structÂ PACKET_ZC_NOTIFY_NEWENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â shortÂ effectState`
`Â /*Â this+0xeÂ */Â shortÂ job`
`Â /*Â this+0x10Â */Â shortÂ head`
`Â /*Â this+0x12Â */Â shortÂ weapon`
`Â /*Â this+0x14Â */Â shortÂ accessory`
`Â /*Â this+0x16Â */Â shortÂ shield`
`Â /*Â this+0x18Â */Â shortÂ accessory2`
`Â /*Â this+0x1aÂ */Â shortÂ accessory3`
`Â /*Â this+0x1cÂ */Â shortÂ headpalette`
`Â /*Â this+0x1eÂ */Â shortÂ bodypalette`
`Â /*Â this+0x20Â */Â shortÂ headDir`
`Â /*Â this+0x22Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x26Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x28Â */Â shortÂ honor`
`Â /*Â this+0x2aÂ */Â shortÂ virtue`
`Â /*Â this+0x2cÂ */Â boolÂ isPKModeON`
`Â /*Â this+0x2dÂ */Â unsignedÂ charÂ sex`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x33Â */Â shortÂ clevel`
`}`

0x7a
`structÂ PACKET_ZC_NOTIFY_ACTENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â shortÂ effectState`
`Â /*Â this+0xeÂ */Â shortÂ job`
`Â /*Â this+0x10Â */Â shortÂ head`
`Â /*Â this+0x12Â */Â shortÂ weapon`
`Â /*Â this+0x14Â */Â shortÂ accessory`
`Â /*Â this+0x16Â */Â shortÂ shield`
`Â /*Â this+0x18Â */Â shortÂ accessory2`
`Â /*Â this+0x1aÂ */Â shortÂ accessory3`
`Â /*Â this+0x1cÂ */Â shortÂ headpalette`
`Â /*Â this+0x1eÂ */Â shortÂ bodypalette`
`Â /*Â this+0x20Â */Â shortÂ headDir`
`Â /*Â this+0x22Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x26Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x28Â */Â shortÂ honor`
`Â /*Â this+0x2aÂ */Â shortÂ virtue`
`Â /*Â this+0x2cÂ */Â boolÂ isPKModeON`
`Â /*Â this+0x2dÂ */Â unsignedÂ charÂ sex`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x33Â */Â unsignedÂ charÂ action`
`Â /*Â this+0x34Â */Â unsignedÂ longÂ actStartTime`
`Â /*Â this+0x38Â */Â shortÂ clevel`
`}`

0x7b
`structÂ PACKET_ZC_NOTIFY_MOVEENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â shortÂ effectState`
`Â /*Â this+0xeÂ */Â shortÂ job`
`Â /*Â this+0x10Â */Â shortÂ head`
`Â /*Â this+0x12Â */Â shortÂ weapon`
`Â /*Â this+0x14Â */Â shortÂ accessory`
`Â /*Â this+0x16Â */Â unsignedÂ longÂ moveStartTime`
`Â /*Â this+0x1aÂ */Â shortÂ shield`
`Â /*Â this+0x1cÂ */Â shortÂ accessory2`
`Â /*Â this+0x1eÂ */Â shortÂ accessory3`
`Â /*Â this+0x20Â */Â shortÂ headpalette`
`Â /*Â this+0x22Â */Â shortÂ bodypalette`
`Â /*Â this+0x24Â */Â shortÂ headDir`
`Â /*Â this+0x26Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x2aÂ */Â shortÂ GEmblemVer`
`Â /*Â this+0x2cÂ */Â shortÂ honor`
`Â /*Â this+0x2eÂ */Â shortÂ virtue`
`Â /*Â this+0x30Â */Â boolÂ isPKModeON`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ MoveData[6]`
`Â /*Â this+0x38Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x39Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x3aÂ */Â shortÂ clevel`
`}`

0x7c
`structÂ PACKET_ZC_NOTIFY_STANDENTRY_NPCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ objecttype`
`Â /*Â this+0x3Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x7Â */Â shortÂ speed`
`Â /*Â this+0x9Â */Â shortÂ bodyState`
`Â /*Â this+0xbÂ */Â shortÂ healthState`
`Â /*Â this+0xdÂ */Â shortÂ effectState`
`Â /*Â this+0xfÂ */Â shortÂ head`
`Â /*Â this+0x11Â */Â shortÂ weapon`
`Â /*Â this+0x13Â */Â shortÂ accessory`
`Â /*Â this+0x15Â */Â shortÂ job`
`Â /*Â this+0x17Â */Â shortÂ shield`
`Â /*Â this+0x19Â */Â shortÂ accessory2`
`Â /*Â this+0x1bÂ */Â shortÂ accessory3`
`Â /*Â this+0x1dÂ */Â shortÂ headpalette`
`Â /*Â this+0x1fÂ */Â shortÂ bodypalette`
`Â /*Â this+0x21Â */Â shortÂ headDir`
`Â /*Â this+0x23Â */Â boolÂ isPKModeON`
`Â /*Â this+0x24Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x25Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x28Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x29Â */Â unsignedÂ charÂ ySize`
`}`

0x7d
`structÂ PACKET_CZ_NOTIFY_ACTORINITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x7e
`structÂ PACKET_CZ_REQUEST_TIMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ clientTime`
`}`

0x7f
`structÂ PACKET_ZC_NOTIFY_TIMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ time`
`}`

0x80
`structÂ PACKET_ZC_NOTIFY_VANISHÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`}`

0x81
`structÂ PACKET_SC_NOTIFY_BANÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ErrorCode`
`}`

0x82
`structÂ PACKET_CZ_REQUEST_QUITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x83
`structÂ PACKET_ZC_ACCEPT_QUITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x84
`structÂ PACKET_ZC_REFUSE_QUITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x85
`structÂ PACKET_CZ_REQUEST_MOVEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ dest[3]`
`}`

0x86
`structÂ PACKET_ZC_NOTIFY_MOVEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ MoveData[6]`
`Â /*Â this+0xcÂ */Â unsignedÂ longÂ moveStartTime`
`}`

0x87
`structÂ PACKET_ZC_NOTIFY_PLAYERMOVEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ moveStartTime`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ MoveData[6]`
`}`

0x88
`structÂ PACKET_ZC_STOPMOVEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ xPos`
`Â /*Â this+0x8Â */Â shortÂ yPos`
`}`

0x89
`structÂ PACKET_CZ_REQUEST_ACTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ targetGID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ action`
`}`

0x8a
`structÂ PACKET_ZC_NOTIFY_ACTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetGID`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ startTime`
`Â /*Â this+0xeÂ */Â intÂ attackMT`
`Â /*Â this+0x12Â */Â intÂ attackedMT`
`Â /*Â this+0x16Â */Â shortÂ damage`
`Â /*Â this+0x18Â */Â shortÂ count`
`Â /*Â this+0x1aÂ */Â unsignedÂ charÂ action`
`Â /*Â this+0x1bÂ */Â shortÂ leftDamage`
`}`

0x8b
`structÂ PACKET_ZC_NOTIFY_ACT_POSITIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetGID`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ startTime`
`Â /*Â this+0xeÂ */Â shortÂ xPos`
`Â /*Â this+0x10Â */Â shortÂ yPos`
`Â /*Â this+0x12Â */Â shortÂ damage`
`Â /*Â this+0x14Â */Â shortÂ count`
`Â /*Â this+0x16Â */Â unsignedÂ charÂ action`
`}`

0x8c
`structÂ PACKET_CZ_REQUEST_CHATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x8d
`structÂ PACKET_ZC_NOTIFY_CHATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x8Â */Â charÂ msg[...]`
`}`

0x8e
`structÂ PACKET_ZC_NOTIFY_PLAYERCHATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x8f
`structÂ PACKET_SERVER_ENTRY_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ Header`
`Â /*Â this+0x2Â */Â intÂ AID`
`}`

0x90
`structÂ PACKET_CZ_CONTACTNPCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`}`

0x91
`structÂ PACKET_ZC_NPCACK_MAPMOVEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ mapName[16]`
`Â /*Â this+0x12Â */Â shortÂ xPos`
`Â /*Â this+0x14Â */Â shortÂ yPos`
`}`

0x92
`structÂ PACKET_ZC_NPCACK_SERVERMOVEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ mapName[16]`
`Â /*Â this+0x12Â */Â shortÂ xPos`
`Â /*Â this+0x14Â */Â shortÂ yPos`
`Â /*Â this+0x16Â */Â structÂ ZSERVER_ADDRÂ addrÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ ip`
`Â Â Â /*Â this+0x4Â */Â shortÂ port`
`Â }`
`}`

0x93
`structÂ PACKET_ZC_NPCACK_ENABLEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x94
`structÂ PACKET_CZ_REQNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x95
`structÂ PACKET_ZC_ACK_REQNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â charÂ CName[24]`
`}`

0x96
`structÂ PACKET_CZ_WHISPERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ receiver[24]`
`Â /*Â this+0x2cÂ */Â charÂ msg[...]`
`}`

0x97
`structÂ PACKET_ZC_WHISPERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ sender[24]`
`Â /*Â this+0x2cÂ */Â charÂ msg[...]`
`}`

0x98
`structÂ PACKET_ZC_ACK_WHISPERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0x99
`structÂ PACKET_CZ_BROADCASTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x9a
`structÂ PACKET_ZC_BROADCASTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x9b
`structÂ PACKET_CZ_CHANGE_DIRECTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ headDir`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ dir`
`}`

0x9c
`structÂ PACKET_ZC_CHANGE_DIRECTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ headDir`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ dir`
`}`

0x9d
`structÂ PACKET_ZC_ITEM_ENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ ITAID`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x8Â */Â boolÂ IsIdentified`
`Â /*Â this+0x9Â */Â shortÂ xPos`
`Â /*Â this+0xbÂ */Â shortÂ yPos`
`Â /*Â this+0xdÂ */Â shortÂ count`
`Â /*Â this+0xfÂ */Â unsignedÂ charÂ subX`
`Â /*Â this+0x10Â */Â unsignedÂ charÂ subY`
`}`

0x9e
`structÂ PACKET_ZC_ITEM_FALL_ENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ ITAID`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x8Â */Â boolÂ IsIdentified`
`Â /*Â this+0x9Â */Â shortÂ xPos`
`Â /*Â this+0xbÂ */Â shortÂ yPos`
`Â /*Â this+0xdÂ */Â unsignedÂ charÂ subX`
`Â /*Â this+0xeÂ */Â unsignedÂ charÂ subY`
`Â /*Â this+0xfÂ */Â shortÂ count`
`}`

0x9f
`structÂ PACKET_CZ_ITEM_PICKUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ ITAID`
`}`

0xa0
`structÂ PACKET_ZC_ITEM_PICKUP_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ Index`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ count`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x8Â */Â boolÂ IsIdentified`
`Â /*Â this+0x9Â */Â boolÂ IsDamaged`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xbÂ */Â structÂ EQUIPSLOTINFOEQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`Â /*Â this+0x13Â */Â unsignedÂ shortÂ location`
`Â /*Â this+0x15Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x16Â */Â unsignedÂ charÂ result`
`}`

0xa1
`structÂ PACKET_ZC_ITEM_DISAPPEARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ ITAID`
`}`

0xa2
`structÂ PACKET_CZ_ITEM_THROWÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ Index`
`Â /*Â this+0x4Â */Â shortÂ count`
`}`

0xa3
`structÂ PACKET_ZC_NORMAL_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFOÂ itemInfo[...]Â {Â //Â SizeÂ 10`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â }`
`}`

0xa4
`structÂ PACKET_ZC_EQUIPMENT_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFOÂ itemInfo[...]Â {Â //Â SizeÂ 20`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0xa5
`structÂ PACKET_ZC_STORE_NORMAL_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFOÂ itemInfo[...]Â {Â //Â SizeÂ 10`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â }`
`}`

0xa6
`structÂ PACKET_ZC_STORE_EQUIPMENT_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFOÂ itemInfo[...]Â {Â //Â SizeÂ 20`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0xa7
`structÂ PACKET_CZ_USE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`}`

0xa8
`structÂ PACKET_ZC_USE_ITEM_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`Â /*Â this+0x4Â */Â shortÂ count`
`Â /*Â this+0x6Â */Â boolÂ result`
`}`

0xa9
`structÂ PACKET_CZ_REQ_WEAR_EQUIPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ wearLocation`
`}`

0xaa
`structÂ PACKET_ZC_REQ_WEAR_EQUIP_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ wearLocation`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ result`
`}`

0xab
`structÂ PACKET_CZ_REQ_TAKEOFF_EQUIPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`}`

0xac
`structÂ PACKET_ZC_REQ_TAKEOFF_EQUIP_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ wearLocation`
`Â /*Â this+0x6Â */Â boolÂ result`
`}`

0xaf
`structÂ PACKET_ZC_ITEM_THROW_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ Index`
`Â /*Â this+0x4Â */Â shortÂ count`
`}`

0xb0
`structÂ PACKET_ZC_PAR_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ varID`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0xb1
`structÂ PACKET_ZC_LONGPAR_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ varID`
`Â /*Â this+0x4Â */Â intÂ amount`
`}`

0xb2
`structÂ PACKET_CZ_RESTARTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ type`
`}`

0xb3
`structÂ PACKET_ZC_RESTART_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ type`
`}`

0xb4
`structÂ PACKET_ZC_SAY_DIALOGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ NAID`
`Â /*Â this+0x8Â */Â charÂ msg[...]`
`}`

0xb5
`structÂ PACKET_ZC_WAIT_DIALOGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`}`

0xb6
`structÂ PACKET_ZC_CLOSE_DIALOGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`}`

0xb7
`structÂ PACKET_ZC_MENU_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ NAID`
`Â /*Â this+0x8Â */Â charÂ msg[...]`
`}`

0xb8
`structÂ PACKET_CZ_CHOOSE_MENUÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ num`
`}`

0xb9
`structÂ PACKET_CZ_REQ_NEXT_SCRIPTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`}`

0xba
`structÂ PACKET_CZ_REQ_STATUSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xbb
`structÂ PACKET_CZ_STATUS_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ statusID`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ changeAmount`
`}`

0xbc
`structÂ PACKET_ZC_STATUS_CHANGE_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ statusID`
`Â /*Â this+0x4Â */Â boolÂ result`
`Â /*Â this+0x5Â */Â unsignedÂ charÂ value`
`}`

0xbd
`structÂ PACKET_ZC_STATUSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ point`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ str`
`Â /*Â this+0x5Â */Â unsignedÂ charÂ standardStr`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ agi`
`Â /*Â this+0x7Â */Â unsignedÂ charÂ standardAgi`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ vit`
`Â /*Â this+0x9Â */Â unsignedÂ charÂ standardVit`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ Int`
`Â /*Â this+0xbÂ */Â unsignedÂ charÂ standardInt`
`Â /*Â this+0xcÂ */Â unsignedÂ charÂ dex`
`Â /*Â this+0xdÂ */Â unsignedÂ charÂ standardDex`
`Â /*Â this+0xeÂ */Â unsignedÂ charÂ luk`
`Â /*Â this+0xfÂ */Â unsignedÂ charÂ standardLuk`
`Â /*Â this+0x10Â */Â shortÂ attPower`
`Â /*Â this+0x12Â */Â shortÂ refiningPower`
`Â /*Â this+0x14Â */Â shortÂ max_mattPower`
`Â /*Â this+0x16Â */Â shortÂ min_mattPower`
`Â /*Â this+0x18Â */Â shortÂ itemdefPower`
`Â /*Â this+0x1aÂ */Â shortÂ plusdefPower`
`Â /*Â this+0x1cÂ */Â shortÂ mdefPower`
`Â /*Â this+0x1eÂ */Â shortÂ plusmdefPower`
`Â /*Â this+0x20Â */Â shortÂ hitSuccessValue`
`Â /*Â this+0x22Â */Â shortÂ avoidSuccessValue`
`Â /*Â this+0x24Â */Â shortÂ plusAvoidSuccessValue`
`Â /*Â this+0x26Â */Â shortÂ criticalSuccessValue`
`Â /*Â this+0x28Â */Â shortÂ ASPD`
`Â /*Â this+0x2aÂ */Â shortÂ plusASPD`
`}`

0xbe
`structÂ PACKET_ZC_STATUS_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ statusID`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ value`
`}`

0xbf
`structÂ PACKET_CZ_REQ_EMOTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ type`
`}`

0xc0
`structÂ PACKET_ZC_EMOTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`}`

0xc1
`structÂ PACKET_CZ_REQ_USER_COUNTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xc2
`structÂ PACKET_ZC_USER_COUNTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ count`
`}`

0xc3
`structÂ PACKET_ZC_SPRITE_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x7Â */Â unsignedÂ charÂ value`
`}`

0xc4
`structÂ PACKET_ZC_SELECT_DEALTYPEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`}`

0xc5
`structÂ PACKET_CZ_ACK_SELECT_DEALTYPEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`}`

0xc6
`structÂ PACKET_ZC_PC_PURCHASE_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ PURCHASE_ITEMÂ itemList[...]Â {Â //Â SizeÂ 11`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â intÂ discountprice`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x9Â */Â unsignedÂ shortÂ ITID`
`Â }`
`}`

0xc7
`structÂ PACKET_ZC_PC_SELL_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ SELL_ITEMÂ itemList[...]Â {Â //Â SizeÂ 10`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â intÂ price`
`Â Â Â /*Â this+0x6Â */Â intÂ overchargeprice`
`Â }`
`}`

0xc8
`structÂ PACKET_CZ_PC_PURCHASE_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ CZ_PURCHASE_ITEMÂ itemList[...]Â {Â //Â SizeÂ 4`
`Â Â Â /*Â this+0x0Â */Â shortÂ count`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â }`
`}`

0xc9
`structÂ PACKET_CZ_PC_SELL_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ CZ_SELL_ITEMÂ itemList[...]Â {Â //Â SizeÂ 4`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â shortÂ count`
`Â }`
`}`

0xca
`structÂ PACKET_ZC_PC_PURCHASE_RESULTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xcb
`structÂ PACKET_ZC_PC_SELL_RESULTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xcc
`structÂ PACKET_CZ_DISCONNECT_CHARACTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0xcd
`structÂ PACKET_ZC_ACK_DISCONNECT_CHARACTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xce
`structÂ PACKET_CZ_DISCONNECT_ALL_CHARACTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xcf
`structÂ PACKET_CZ_SETTING_WHISPER_PCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ charÂ type`
`}`

0xd0
`structÂ PACKET_CZ_SETTING_WHISPER_STATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ type`
`}`

0xd1
`structÂ PACKET_ZC_SETTING_WHISPER_PCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x3Â */Â unsignedÂ charÂ result`
`}`

0xd2
`structÂ PACKET_ZC_SETTING_WHISPER_STATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x3Â */Â unsignedÂ charÂ result`
`}`

0xd3
`structÂ PACKET_CZ_REQ_WHISPER_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xd4
`structÂ PACKET_ZC_WHISPER_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ WHISPER_ITEMÂ wisperList[...]Â {Â //Â SizeÂ 24`
`Â Â Â /*Â this+0x0Â */Â charÂ name[24]`
`Â }`
`}`

0xd5
`structÂ PACKET_CZ_CREATE_CHATROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â shortÂ size`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x7Â */Â charÂ passwd[8]`
`Â /*Â this+0xfÂ */Â charÂ title[...]`
`}`

0xd6
`structÂ PACKET_ZC_ACK_CREATE_CHATROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xd7
`structÂ PACKET_ZC_ROOM_NEWENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ roomID`
`Â /*Â this+0xcÂ */Â shortÂ maxcount`
`Â /*Â this+0xeÂ */Â shortÂ curcount`
`Â /*Â this+0x10Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x11Â */Â charÂ title[...]`
`}`

0xd8
`structÂ PACKET_ZC_DESTROY_ROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ roomID`
`}`

0xd9
`structÂ PACKET_CZ_REQ_ENTER_ROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ roomID`
`Â /*Â this+0x6Â */Â charÂ passwd[8]`
`}`

0xda
`structÂ PACKET_ZC_REFUSE_ENTER_ROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xdb
`structÂ PACKET_ZC_ENTER_ROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ roomID`
`Â /*Â this+0x8Â */Â structÂ ROOM_MEMBERÂ memberList[...]Â {Â //Â SizeÂ 28`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ role`
`Â Â Â /*Â this+0x4Â */Â charÂ name[24]`
`Â }`
`}`

0xdc
`structÂ PACKET_ZC_MEMBER_NEWENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ curcount`
`Â /*Â this+0x4Â */Â charÂ name[24]`
`}`

0xdd
`structÂ PACKET_ZC_MEMBER_EXITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ curcount`
`Â /*Â this+0x4Â */Â charÂ name[24]`
`Â /*Â this+0x1cÂ */Â unsignedÂ charÂ type`
`}`

0xde
`structÂ PACKET_CZ_CHANGE_CHATROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â shortÂ size`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x7Â */Â charÂ passwd[8]`
`Â /*Â this+0xfÂ */Â charÂ title[...]`
`}`

0xdf
`structÂ PACKET_ZC_CHANGE_CHATROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ roomID`
`Â /*Â this+0xcÂ */Â shortÂ maxcount`
`Â /*Â this+0xeÂ */Â shortÂ curcount`
`Â /*Â this+0x10Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x11Â */Â charÂ title[...]`
`}`

0xe0
`structÂ PACKET_CZ_REQ_ROLE_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ role`
`Â /*Â this+0x6Â */Â charÂ name[24]`
`}`

0xe1
`structÂ PACKET_ZC_ROLE_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ role`
`Â /*Â this+0x6Â */Â charÂ name[24]`
`}`

0xe2
`structÂ PACKET_CZ_REQ_EXPEL_MEMBERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`}`

0xe3
`structÂ PACKET_CZ_EXIT_ROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xe4
`structÂ PACKET_CZ_REQ_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0xe5
`structÂ PACKET_ZC_REQ_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`}`

0xe6
`structÂ PACKET_CZ_ACK_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xe7
`structÂ PACKET_ZC_ACK_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xe8
`structÂ PACKET_CZ_ADD_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0xe9
`structÂ PACKET_ZC_ADD_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ count`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x8Â */Â boolÂ IsIdentified`
`Â /*Â this+0x9Â */Â boolÂ IsDamaged`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xbÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`}`

0xea
`structÂ PACKET_ZC_ACK_ADD_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Index`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ result`
`}`

0xeb
`structÂ PACKET_CZ_CONCLUDE_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xec
`structÂ PACKET_ZC_CONCLUDE_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ who`
`}`

0xed
`structÂ PACKET_CZ_CANCEL_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xee
`structÂ PACKET_ZC_CANCEL_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xef
`structÂ PACKET_CZ_EXEC_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xf0
`structÂ PACKET_ZC_EXEC_EXCHANGE_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xf1
`structÂ PACKET_ZC_EXCHANGEITEM_UNDOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xf2
`structÂ PACKET_ZC_NOTIFY_STOREITEM_COUNTINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ curCount`
`Â /*Â this+0x4Â */Â shortÂ maxCount`
`}`

0xf3
`structÂ PACKET_CZ_MOVE_ITEM_FROM_BODY_TO_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0xf4
`structÂ PACKET_ZC_ADD_ITEM_TO_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`Â /*Â this+0x8Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0xaÂ */Â boolÂ IsIdentified`
`Â /*Â this+0xbÂ */Â boolÂ IsDamaged`
`Â /*Â this+0xcÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xdÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`}`

0xf5
`structÂ PACKET_CZ_MOVE_ITEM_FROM_STORE_TO_BODYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0xf6
`structÂ PACKET_ZC_DELETE_ITEM_FROM_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0xf7
`structÂ PACKET_CZ_CLOSE_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xf8
`structÂ PACKET_ZC_CLOSE_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0xf9
`structÂ PACKET_CZ_MAKE_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ groupName[24]`
`}`

0xfa
`structÂ PACKET_ZC_ACK_MAKE_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0xfb
`structÂ PACKET_ZC_GROUP_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ groupName[24]`
`Â /*Â this+0x1cÂ */Â structÂ GROUPMEMBER_INFOÂ groupInfo[...]Â {Â //Â SizeÂ 46`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ AID`
`Â Â Â /*Â this+0x4Â */Â charÂ characterName[24]`
`Â Â Â /*Â this+0x1cÂ */Â charÂ mapName[16]`
`Â Â Â /*Â this+0x2cÂ */Â unsignedÂ charÂ role`
`Â Â Â /*Â this+0x2dÂ */Â unsignedÂ charÂ state`
`Â }`
`}`

0xfc
`structÂ PACKET_CZ_REQ_JOIN_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0xfd
`structÂ PACKET_ZC_ACK_REQ_JOIN_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ characterName[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ charÂ answer`
`}`

0xfe
`structÂ PACKET_ZC_REQ_JOIN_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GRID`
`Â /*Â this+0x6Â */Â charÂ groupName[24]`
`}`

0xff
`structÂ PACKET_CZ_JOIN_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GRID`
`Â /*Â this+0x6Â */Â intÂ answer`
`}`

0x100
`structÂ PACKET_CZ_REQ_LEAVE_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x101
`structÂ PACKET_ZC_GROUPINFO_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ expOption`
`}`

0x102
`structÂ PACKET_CZ_CHANGE_GROUPEXPOPTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ expOption`
`}`

0x103
`structÂ PACKET_CZ_REQ_EXPEL_GROUP_MEMBERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â charÂ characterName[24]`
`}`

0x104
`structÂ PACKET_ZC_ADD_MEMBER_TO_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ Role`
`Â /*Â this+0xaÂ */Â shortÂ xPos`
`Â /*Â this+0xcÂ */Â shortÂ yPos`
`Â /*Â this+0xeÂ */Â unsignedÂ charÂ state`
`Â /*Â this+0xfÂ */Â charÂ groupName[24]`
`Â /*Â this+0x27Â */Â charÂ characterName[24]`
`Â /*Â this+0x3fÂ */Â charÂ mapName[16]`
`}`

0x105
`structÂ PACKET_ZC_DELETE_MEMBER_FROM_GROUPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â charÂ characterName[24]`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ result`
`}`

0x106
`structÂ PACKET_ZC_NOTIFY_HP_TO_GROUPMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ hp`
`Â /*Â this+0x8Â */Â shortÂ maxhp`
`}`

0x107
`structÂ PACKET_ZC_NOTIFY_POSITION_TO_GROUPMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ xPos`
`Â /*Â this+0x8Â */Â shortÂ yPos`
`}`

0x108
`structÂ PACKET_CZ_REQUEST_CHAT_PARTYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x109
`structÂ PACKET_ZC_NOTIFY_CHAT_PARTYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â charÂ msg[...]`
`}`

0x10a
`structÂ PACKET_ZC_MVP_GETTING_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`}`

0x10b
`structÂ PACKET_ZC_MVP_GETTING_SPECIAL_EXPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ exp`
`}`

0x10c
`structÂ PACKET_ZC_MVPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x10d
`structÂ PACKET_ZC_THROW_MVPITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x10e
`structÂ PACKET_ZC_SKILLINFO_UPDATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â shortÂ level`
`Â /*Â this+0x6Â */Â shortÂ spcost`
`Â /*Â this+0x8Â */Â shortÂ attackRange`
`Â /*Â this+0xaÂ */Â boolÂ upgradable`
`}`

0x10f
`structÂ PACKET_ZC_SKILLINFO_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ SKILLINFOÂ skillList[...]Â {Â //Â SizeÂ 37`
`Â Â Â /*Â this+0x0Â */Â shortÂ SKID`
`Â Â Â /*Â this+0x2Â */Â intÂ type`
`Â Â Â /*Â this+0x6Â */Â shortÂ level`
`Â Â Â /*Â this+0x8Â */Â shortÂ spcost`
`Â Â Â /*Â this+0xaÂ */Â shortÂ attackRange`
`Â Â Â /*Â this+0xcÂ */Â unsignedÂ charÂ skillName[24]`
`Â Â Â /*Â this+0x24Â */Â charÂ upgradable`
`Â }`
`}`

0x110
`structÂ PACKET_ZC_ACK_TOUSESKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ NUM`
`Â /*Â this+0x8Â */Â boolÂ result`
`Â /*Â this+0x9Â */Â unsignedÂ charÂ cause`
`}`

0x111
`structÂ PACKET_ZC_ADD_SKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ SKILLINFOÂ dataÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ SKID`
`Â Â Â /*Â this+0x2Â */Â intÂ type`
`Â Â Â /*Â this+0x6Â */Â shortÂ level`
`Â Â Â /*Â this+0x8Â */Â shortÂ spcost`
`Â Â Â /*Â this+0xaÂ */Â shortÂ attackRange`
`Â Â Â /*Â this+0xcÂ */Â charÂ skillName[24]`
`Â Â Â /*Â this+0x24Â */Â boolÂ upgradable`
`Â }`
`}`

0x112
`structÂ PACKET_CZ_UPGRADE_SKILLLEVELÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`}`

0x113
`structÂ PACKET_CZ_USE_SKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ selectedLevel`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetID`
`}`

0x114
`structÂ PACKET_ZC_NOTIFY_SKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ targetID`
`Â /*Â this+0xcÂ */Â unsignedÂ longÂ startTime`
`Â /*Â this+0x10Â */Â intÂ attackMT`
`Â /*Â this+0x14Â */Â intÂ attackedMT`
`Â /*Â this+0x18Â */Â shortÂ damage`
`Â /*Â this+0x1aÂ */Â shortÂ level`
`Â /*Â this+0x1cÂ */Â shortÂ count`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ action`
`}`

0x115
`structÂ PACKET_ZC_NOTIFY_SKILL_POSITIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ targetID`
`Â /*Â this+0xcÂ */Â unsignedÂ longÂ startTime`
`Â /*Â this+0x10Â */Â intÂ attackMT`
`Â /*Â this+0x14Â */Â intÂ attackedMT`
`Â /*Â this+0x18Â */Â shortÂ xPos`
`Â /*Â this+0x1aÂ */Â shortÂ yPos`
`Â /*Â this+0x1cÂ */Â shortÂ damage`
`Â /*Â this+0x1eÂ */Â shortÂ level`
`Â /*Â this+0x20Â */Â shortÂ count`
`Â /*Â this+0x22Â */Â unsignedÂ charÂ action`
`}`

0x116
`structÂ PACKET_CZ_USE_SKILL_TOGROUNDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ selectedLevel`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x6Â */Â shortÂ xPos`
`Â /*Â this+0x8Â */Â shortÂ yPos`
`}`

0x117
`structÂ PACKET_ZC_NOTIFY_GROUNDSKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â shortÂ level`
`Â /*Â this+0xaÂ */Â shortÂ xPos`
`Â /*Â this+0xcÂ */Â shortÂ yPos`
`Â /*Â this+0xeÂ */Â unsignedÂ longÂ startTime`
`}`

0x118
`structÂ PACKET_CZ_CANCEL_LOCKONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x119
`structÂ PACKET_ZC_STATE_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ bodyState`
`Â /*Â this+0x8Â */Â shortÂ healthState`
`Â /*Â this+0xaÂ */Â shortÂ effectState`
`Â /*Â this+0xcÂ */Â boolÂ isPKModeON`
`}`

0x11a
`structÂ PACKET_ZC_USE_SKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â shortÂ level`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetAID`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ srcAID`
`Â /*Â this+0xeÂ */Â boolÂ result`
`}`

0x11b
`structÂ PACKET_CZ_SELECT_WARPPOINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â charÂ mapName[16]`
`}`

0x11c
`structÂ PACKET_ZC_WARPLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â charÂ mapName[4][16]`
`}`

0x11d
`structÂ PACKET_CZ_REMEMBER_WARPPOINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x11e
`structÂ PACKET_ZC_ACK_REMEMBER_WARPPOINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ errorCode`
`}`

0x11f
`structÂ PACKET_ZC_SKILL_ENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ creatorAID`
`Â /*Â this+0xaÂ */Â shortÂ xPos`
`Â /*Â this+0xcÂ */Â shortÂ yPos`
`Â /*Â this+0xeÂ */Â unsignedÂ charÂ job`
`Â /*Â this+0xfÂ */Â boolÂ isVisible`
`}`

0x120
`structÂ PACKET_ZC_SKILL_DISAPPEARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x121
`structÂ PACKET_ZC_NOTIFY_CARTITEM_COUNTINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ curCount`
`Â /*Â this+0x4Â */Â shortÂ maxCount`
`Â /*Â this+0x6Â */Â intÂ curWeight`
`Â /*Â this+0xaÂ */Â intÂ maxWeight`
`}`

0x122
`structÂ PACKET_ZC_CART_EQUIPMENT_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFOÂ itemInfo[...]Â {Â //Â SizeÂ 20`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x123
`structÂ PACKET_ZC_CART_NORMAL_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFOÂ itemInfo[...]Â {Â //Â SizeÂ 10`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â }`
`}`

0x124
`structÂ PACKET_ZC_ADD_ITEM_TO_CARTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`Â /*Â this+0x8Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0xaÂ */Â boolÂ IsIdentified`
`Â /*Â this+0xbÂ */Â boolÂ IsDamaged`
`Â /*Â this+0xcÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xdÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`}`

0x125
`structÂ PACKET_ZC_DELETE_ITEM_FROM_CARTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0x126
`structÂ PACKET_CZ_MOVE_ITEM_FROM_BODY_TO_CARTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0x127
`structÂ PACKET_CZ_MOVE_ITEM_FROM_CART_TO_BODYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0x128
`structÂ PACKET_CZ_MOVE_ITEM_FROM_STORE_TO_CARTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0x129
`structÂ PACKET_CZ_MOVE_ITEM_FROM_CART_TO_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0x12a
`structÂ PACKET_CZ_REQ_CARTOFFÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x12b
`structÂ PACKET_ZC_CARTOFFÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x12c
`structÂ PACKET_ZC_ACK_ADDITEM_TO_CARTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0x12d
`structÂ PACKET_ZC_OPENSTOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ itemcount`
`}`

0x12e
`structÂ PACKET_CZ_REQ_CLOSESTOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x12f
`structÂ PACKET_CZ_REQ_OPENSTOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ storeName[80]`
`Â /*Â this+0x54Â */Â structÂ STORE_ITEMÂ storeList[...]Â {Â //Â SizeÂ 8`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â shortÂ count`
`Â Â Â /*Â this+0x4Â */Â intÂ Price`
`Â }`
`}`

0x130
`structÂ PACKET_CZ_REQ_BUY_FROMMCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x131
`structÂ PACKET_ZC_STORE_ENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ makerAID`
`Â /*Â this+0x6Â */Â charÂ storeName[80]`
`}`

0x132
`structÂ PACKET_ZC_DISAPPEAR_ENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ makerAID`
`}`

0x133
`structÂ PACKET_ZC_PC_PURCHASE_ITEMLIST_FROMMCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â structÂ PURCHASE_ITEM_FROMMCÂ itemList[...]Â {Â //Â SizeÂ 22`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â shortÂ count`
`Â Â Â /*Â this+0x6Â */Â shortÂ index`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x9Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ IsIdentified`
`Â Â Â /*Â this+0xcÂ */Â unsignedÂ charÂ IsDamaged`
`Â Â Â /*Â this+0xdÂ */Â unsignedÂ charÂ refiningLevel`
`Â Â Â /*Â this+0xeÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x134
`structÂ PACKET_CZ_PC_PURCHASE_ITEMLIST_FROMMCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â structÂ CZ_PURCHASE_ITEM_FROMMCÂ itemList[...]Â {Â //Â SizeÂ 4`
`Â Â Â /*Â this+0x0Â */Â shortÂ count`
`Â Â Â /*Â this+0x2Â */Â shortÂ index`
`Â }`
`}`

0x135
`structÂ PACKET_ZC_PC_PURCHASE_RESULT_FROMMCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â shortÂ curcount`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ result`
`}`

0x136
`structÂ PACKET_ZC_PC_PURCHASE_MYITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â structÂ PURCHASE_MYITEMÂ itemList[...]Â {Â //Â SizeÂ 22`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â shortÂ index`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x9Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ IsIdentified`
`Â Â Â /*Â this+0xcÂ */Â unsignedÂ charÂ IsDamaged`
`Â Â Â /*Â this+0xdÂ */Â unsignedÂ charÂ refiningLevel`
`Â Â Â /*Â this+0xeÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x137
`structÂ PACKET_ZC_DELETEITEM_FROM_MCSTOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â shortÂ count`
`}`

0x138
`structÂ PACKET_CZ_PKMODE_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â boolÂ isTurnOn`
`}`

0x139
`structÂ PACKET_ZC_ATTACK_FAILURE_FOR_DISTANCEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ targetAID`
`Â /*Â this+0x6Â */Â shortÂ targetXPos`
`Â /*Â this+0x8Â */Â shortÂ targetYPos`
`Â /*Â this+0xaÂ */Â shortÂ xPos`
`Â /*Â this+0xcÂ */Â shortÂ yPos`
`Â /*Â this+0xeÂ */Â shortÂ currentAttRange`
`}`

0x13a
`structÂ PACKET_ZC_ATTACK_RANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ currentAttRange`
`}`

0x13b
`structÂ PACKET_ZC_ACTION_FAILUREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x13c
`structÂ PACKET_ZC_EQUIP_ARROWÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`}`

0x13d
`structÂ PACKET_ZC_RECOVERYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ varID`
`Â /*Â this+0x4Â */Â shortÂ amount`
`}`

0x13e
`structÂ PACKET_ZC_USESKILL_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetID`
`Â /*Â this+0xaÂ */Â shortÂ xPos`
`Â /*Â this+0xcÂ */Â shortÂ yPos`
`Â /*Â this+0xeÂ */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x10Â */Â unsignedÂ longÂ property`
`Â /*Â this+0x14Â */Â unsignedÂ longÂ delayTime`
`}`

0x13f
`structÂ PACKET_CZ_ITEM_CREATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ itemName[24]`
`}`

0x140
`structÂ PACKET_CZ_MOVETO_MAPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ mapName[16]`
`Â /*Â this+0x12Â */Â shortÂ xPos`
`Â /*Â this+0x14Â */Â shortÂ yPos`
`}`

0x141
`structÂ PACKET_ZC_COUPLESTATUSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ statusType`
`Â /*Â this+0x6Â */Â intÂ defaultStatus`
`Â /*Â this+0xaÂ */Â intÂ plusStatus`
`}`

0x142
`structÂ PACKET_ZC_OPEN_EDITDLGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`}`

0x143
`structÂ PACKET_CZ_INPUT_EDITDLGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`Â /*Â this+0x6Â */Â intÂ value`
`}`

0x144
`structÂ PACKET_ZC_COMPASSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`Â /*Â this+0x6Â */Â intÂ type`
`Â /*Â this+0xaÂ */Â intÂ xPos`
`Â /*Â this+0xeÂ */Â intÂ yPos`
`Â /*Â this+0x12Â */Â unsignedÂ charÂ id`
`Â /*Â this+0x13Â */Â unsignedÂ longÂ color`
`}`

0x145
`structÂ PACKET_ZC_SHOW_IMAGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ imageName[16]`
`Â /*Â this+0x12Â */Â unsignedÂ charÂ type`
`}`

0x146
`structÂ PACKET_CZ_CLOSE_DIALOGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`}`

0x147
`structÂ PACKET_ZC_AUTORUN_SKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ SKILLINFOÂ dataÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ SKID`
`Â Â Â /*Â this+0x2Â */Â intÂ type`
`Â Â Â /*Â this+0x6Â */Â shortÂ level`
`Â Â Â /*Â this+0x8Â */Â shortÂ spcost`
`Â Â Â /*Â this+0xaÂ */Â shortÂ attackRange`
`Â Â Â /*Â this+0xcÂ */Â charÂ skillName[24]`
`Â Â Â /*Â this+0x24Â */Â boolÂ upgradable`
`Â }`
`}`

0x148
`structÂ PACKET_ZC_RESURRECTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ type`
`}`

0x149
`structÂ PACKET_CZ_REQ_GIVE_MANNER_POINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ otherAID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x7Â */Â shortÂ point`
`}`

0x14a
`structÂ PACKET_ZC_ACK_GIVE_MANNER_POINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ result`
`}`

0x14b
`structÂ PACKET_ZC_NOTIFY_MANNER_POINT_GIVENÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x3Â */Â charÂ otherCharName[24]`
`}`

0x14c
`structÂ PACKET_ZC_MYGUILD_BASIC_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ RELATED_GUILDÂ relatedGuildList[...]Â {Â //Â SizeÂ 32`
`Â Â Â /*Â this+0x0Â */Â intÂ GDID`
`Â Â Â /*Â this+0x4Â */Â intÂ relation`
`Â Â Â /*Â this+0x8Â */Â charÂ GuildName[24]`
`Â }`
`}`

0x14d
`structÂ PACKET_CZ_REQ_GUILD_MENUINTERFACEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x14e
`structÂ PACKET_ZC_ACK_GUILD_MENUINTERFACEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ guildMemuFlag`
`}`

0x14f
`structÂ PACKET_CZ_REQ_GUILD_MENUÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Type`
`}`

0x150
`structÂ PACKET_ZC_GUILD_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ GDID`
`Â /*Â this+0x6Â */Â intÂ level`
`Â /*Â this+0xaÂ */Â intÂ userNum`
`Â /*Â this+0xeÂ */Â intÂ maxUserNum`
`Â /*Â this+0x12Â */Â intÂ userAverageLevel`
`Â /*Â this+0x16Â */Â intÂ exp`
`Â /*Â this+0x1aÂ */Â intÂ maxExp`
`Â /*Â this+0x1eÂ */Â intÂ point`
`Â /*Â this+0x22Â */Â intÂ honor`
`Â /*Â this+0x26Â */Â intÂ virtue`
`Â /*Â this+0x2aÂ */Â intÂ emblemVersion`
`Â /*Â this+0x2eÂ */Â charÂ guildname[24]`
`Â /*Â this+0x46Â */Â charÂ masterName[24]`
`Â /*Â this+0x5eÂ */Â charÂ manageLand[16]`
`}`

0x151
`structÂ PACKET_CZ_REQ_GUILD_EMBLEM_IMGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ GDID`
`}`

0x152
`structÂ PACKET_ZC_GUILD_EMBLEM_IMGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ GDID`
`Â /*Â this+0x8Â */Â intÂ emblemVersion`
`Â /*Â this+0xcÂ */Â unsignedÂ charÂ img[...]`
`}`

0x153
`structÂ PACKET_CZ_REGISTER_GUILD_EMBLEM_IMGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ img[...]`
`}`

0x154
`structÂ PACKET_ZC_MEMBERMGR_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ GUILD_MEMBERMGR_INFOÂ memberInfo[...]Â {Â //Â SizeÂ 104`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ AID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ longÂ GID`
`Â Â Â /*Â this+0x8Â */Â shortÂ HeadType`
`Â Â Â /*Â this+0xaÂ */Â shortÂ HeadPalette`
`Â Â Â /*Â this+0xcÂ */Â shortÂ Sex`
`Â Â Â /*Â this+0xeÂ */Â shortÂ Job`
`Â Â Â /*Â this+0x10Â */Â shortÂ Level`
`Â Â Â /*Â this+0x12Â */Â intÂ MemberExp`
`Â Â Â /*Â this+0x16Â */Â intÂ CurrentState`
`Â Â Â /*Â this+0x1aÂ */Â intÂ GPositionID`
`Â Â Â /*Â this+0x1eÂ */Â charÂ Memo[50]`
`Â Â Â /*Â this+0x50Â */Â charÂ CharName[24]`
`Â }`
`}`

0x155
`structÂ PACKET_CZ_REQ_CHANGE_MEMBERPOSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ MEMBER_POSITION_INFOÂ memberInfo[...]Â {Â //Â SizeÂ 12`
`Â Â Â /*Â this+0x0Â */Â intÂ AID`
`Â Â Â /*Â this+0x4Â */Â intÂ GID`
`Â Â Â /*Â this+0x8Â */Â intÂ positionID`
`Â }`
`}`

0x156
`structÂ PACKET_ZC_ACK_REQ_CHANGE_MEMBERSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ MEMBER_POSITION_INFOÂ memberInfo[...]Â {Â //Â SizeÂ 12`
`Â Â Â /*Â this+0x0Â */Â intÂ AID`
`Â Â Â /*Â this+0x4Â */Â intÂ GID`
`Â Â Â /*Â this+0x8Â */Â intÂ positionID`
`Â }`
`}`

0x157
`structÂ PACKET_CZ_REQ_OPEN_MEMBER_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ AID`
`}`

0x158
`structÂ PACKET_ZC_ACK_OPEN_MEMBER_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x159
`structÂ PACKET_CZ_REQ_LEAVE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GDID`
`Â /*Â this+0x6Â */Â intÂ AID`
`Â /*Â this+0xaÂ */Â intÂ GID`
`Â /*Â this+0xeÂ */Â charÂ reasonDesc[40]`
`}`

0x15a
`structÂ PACKET_ZC_ACK_LEAVE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ charName[24]`
`Â /*Â this+0x1aÂ */Â charÂ reasonDesc[40]`
`}`

0x15b
`structÂ PACKET_CZ_REQ_BAN_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GDID`
`Â /*Â this+0x6Â */Â intÂ AID`
`Â /*Â this+0xaÂ */Â intÂ GID`
`Â /*Â this+0xeÂ */Â charÂ reasonDesc[40]`
`}`

0x15c
`structÂ PACKET_ZC_ACK_BAN_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ charName[24]`
`Â /*Â this+0x1aÂ */Â charÂ reasonDesc[40]`
`Â /*Â this+0x42Â */Â charÂ account[24]`
`}`

0x15d
`structÂ PACKET_CZ_REQ_DISORGANIZE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ key[40]`
`}`

0x15e
`structÂ PACKET_ZC_ACK_DISORGANIZE_GUILD_RESULTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ reason`
`}`

0x15f
`structÂ PACKET_ZC_ACK_DISORGANIZE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ reasonDesc[40]`
`}`

0x160
`structÂ PACKET_ZC_POSITION_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ GUILD_MEMBER_POSITION_INFOÂ memberInfo[...]Â {Â //Â SizeÂ 16`
`Â Â Â /*Â this+0x0Â */Â intÂ positionID`
`Â Â Â /*Â this+0x4Â */Â intÂ right`
`Â Â Â /*Â this+0x8Â */Â intÂ ranking`
`Â Â Â /*Â this+0xCÂ */Â intÂ payRate`
`Â }`
`}`

0x161
`structÂ PACKET_CZ_REG_CHANGE_GUILD_POSITIONINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ GUILD_REG_POSITION_INFOÂ memberList[...]Â {Â //Â SizeÂ 40`
`Â Â Â /*Â this+0x0Â */Â intÂ positionID`
`Â Â Â /*Â this+0x4Â */Â intÂ right`
`Â Â Â /*Â this+0x8Â */Â intÂ ranking`
`Â Â Â /*Â this+0xcÂ */Â intÂ payRate`
`Â Â Â /*Â this+0x10Â */Â charÂ posName[24]`
`Â }`
`}`

0x162
`structÂ PACKET_ZC_GUILD_SKILLINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â shortÂ skillPoint`
`Â /*Â this+0x6Â */Â structÂ SKILLINFOÂ skillList[...]Â {Â //Â SizeÂ 37`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ SKID`
`Â Â Â /*Â this+0x2Â */Â intÂ type`
`Â Â Â /*Â this+0x6Â */Â shortÂ level`
`Â Â Â /*Â this+0x8Â */Â shortÂ spcost`
`Â Â Â /*Â this+0xaÂ */Â shortÂ attackRange`
`Â Â Â /*Â this+0xcÂ */Â charÂ skillName[24]`
`Â Â Â /*Â this+0x24Â */Â charÂ upgradable`
`Â }`
`}`

0x163
`structÂ PACKET_ZC_BAN_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ GUILD_BAN_INFOÂ banList[...]Â {Â //Â SizeÂ 88`
`Â Â Â /*Â this+0x0Â */Â charÂ charname[24]`
`Â Â Â /*Â this+0x18Â */Â charÂ account[24]`
`Â Â Â /*Â this+0x30Â */Â charÂ reason[40]`
`Â }`
`}`

0x164
`structÂ PACKET_ZC_OTHER_GUILD_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ OTHER_GUILD_INFOÂ guildList[...]Â {Â //Â SizeÂ 36`
`Â Â Â /*Â this+0x0Â */Â charÂ guildname[24]`
`Â Â Â /*Â this+0x18Â */Â intÂ guildLevel`
`Â Â Â /*Â this+0x1cÂ */Â intÂ guildMemberSize`
`Â Â Â /*Â this+0x20Â */Â intÂ guildRanking`
`Â }`
`}`

0x165
`structÂ PACKET_CZ_REQ_MAKE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â charÂ GName[24]`
`}`

0x166
`structÂ PACKET_ZC_POSITION_ID_NAME_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ MEMBER_POSITION_ID_NAME_INFOÂ memberList[...]Â {Â //Â SizeÂ 28`
`Â Â Â /*Â this+0x0Â */Â intÂ positionID`
`Â Â Â /*Â this+0x4Â */Â charÂ posName[24]`
`Â }`
`}`

0x167
`structÂ PACKET_ZC_RESULT_MAKE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0x168
`structÂ PACKET_CZ_REQ_JOIN_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ MyAID`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ MyGID`
`}`

0x169
`structÂ PACKET_ZC_ACK_REQ_JOIN_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ answer`
`}`

0x16a
`structÂ PACKET_ZC_REQ_JOIN_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GDID`
`Â /*Â this+0x6Â */Â charÂ guildName[24]`
`}`

0x16b
`structÂ PACKET_CZ_JOIN_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GDID`
`Â /*Â this+0x6Â */Â intÂ answer`
`}`

0x16c
`structÂ PACKET_ZC_UPDATE_GDIDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GDID`
`Â /*Â this+0x6Â */Â intÂ emblemVersion`
`Â /*Â this+0xaÂ */Â intÂ right`
`Â /*Â this+0xeÂ */Â boolÂ isMaster`
`Â /*Â this+0xfÂ */Â intÂ InterSID`
`Â /*Â this+0x13Â */Â charÂ GName[24]`
`}`

0x16d
`structÂ PACKET_ZC_UPDATE_CHARSTATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â intÂ status`
`}`

0x16e
`structÂ PACKET_CZ_GUILD_NOTICEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GDID`
`Â /*Â this+0x6Â */Â charÂ subject[60]`
`Â /*Â this+0x42Â */Â charÂ notice[120]`
`}`

0x16f
`structÂ PACKET_ZC_GUILD_NOTICEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ subject[60]`
`Â /*Â this+0x3eÂ */Â charÂ notice[120]`
`}`

0x170
`structÂ PACKET_CZ_REQ_ALLY_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ MyAID`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ MyGID`
`}`

0x171
`structÂ PACKET_ZC_REQ_ALLY_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ otherAID`
`Â /*Â this+0x6Â */Â charÂ guildName[24]`
`}`

0x172
`structÂ PACKET_CZ_ALLY_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ otherAID`
`Â /*Â this+0x6Â */Â intÂ answer`
`}`

0x173
`structÂ PACKET_ZC_ACK_REQ_ALLY_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ answer`
`}`

0x174
`structÂ PACKET_ZC_ACK_CHANGE_GUILD_POSITIONINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ GUILD_REG_POSITION_INFOÂ memberList[...]Â {Â //Â SizeÂ 30`
`Â Â Â /*Â this+0x0Â */Â intÂ positionID`
`Â Â Â /*Â this+0x4Â */Â intÂ right`
`Â Â Â /*Â this+0x8Â */Â intÂ ranking`
`Â Â Â /*Â this+0xcÂ */Â intÂ payRate`
`Â Â Â /*Â this+0x10Â */Â charÂ posName[24]`
`Â }`
`}`

0x175
`structÂ PACKET_CZ_REQ_GUILD_MEMBER_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ GID`
`}`

0x176
`structÂ PACKET_ZC_ACK_GUILD_MEMBER_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ GUILD_MEMBER_INFOÂ InfoÂ {`
`Â Â Â /*Â this+0x0Â */Â intÂ AID`
`Â Â Â /*Â this+0x4Â */Â intÂ GID`
`Â Â Â /*Â this+0x8Â */Â shortÂ head`
`Â Â Â /*Â this+0xaÂ */Â shortÂ headPalette`
`Â Â Â /*Â this+0xcÂ */Â shortÂ sex`
`Â Â Â /*Â this+0xeÂ */Â shortÂ job`
`Â Â Â /*Â this+0x10Â */Â shortÂ level`
`Â Â Â /*Â this+0x12Â */Â intÂ contributionExp`
`Â Â Â /*Â this+0x16Â */Â intÂ currentState`
`Â Â Â /*Â this+0x1aÂ */Â intÂ positionID`
`Â Â Â /*Â this+0x1eÂ */Â charÂ intro[50]`
`Â Â Â /*Â this+0x50Â */Â charÂ charname[24]`
`Â }`
`}`

0x177
`structÂ PACKET_ZC_ITEMIDENTIFY_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ ITIDList[...]`
`}`

0x178
`structÂ PACKET_CZ_REQ_ITEMIDENTIFYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`}`

0x179
`structÂ PACKET_ZC_ACK_ITEMIDENTIFYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ result`
`}`

0x17a
`structÂ PACKET_CZ_REQ_ITEMCOMPOSITION_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ cardIndex`
`}`

0x17b
`structÂ PACKET_ZC_ITEMCOMPOSITION_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ ITIDList[...]`
`}`

0x17c
`structÂ PACKET_CZ_REQ_ITEMCOMPOSITIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ cardIndex`
`Â /*Â this+0x4Â */Â shortÂ equipIndex`
`}`

0x17d
`structÂ PACKET_ZC_ACK_ITEMCOMPOSITIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ equipIndex`
`Â /*Â this+0x4Â */Â shortÂ cardIndex`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ result`
`}`

0x17e
`structÂ PACKET_CZ_GUILD_CHATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x17f
`structÂ PACKET_ZC_GUILD_CHATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x180
`structÂ PACKET_CZ_REQ_HOSTILE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x181
`structÂ PACKET_ZC_ACK_REQ_HOSTILE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0x182
`structÂ PACKET_ZC_MEMBER_ADDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ GUILD_MEMBER_INFOÂ InfoÂ {`
`Â Â Â /*Â this+0x0Â */Â intÂ AID`
`Â Â Â /*Â this+0x4Â */Â intÂ GID`
`Â Â Â /*Â this+0x8Â */Â shortÂ head`
`Â Â Â /*Â this+0xaÂ */Â shortÂ headPalette`
`Â Â Â /*Â this+0xcÂ */Â shortÂ sex`
`Â Â Â /*Â this+0xeÂ */Â shortÂ job`
`Â Â Â /*Â this+0x10Â */Â shortÂ level`
`Â Â Â /*Â this+0x12Â */Â intÂ contributionExp`
`Â Â Â /*Â this+0x16Â */Â intÂ currentState`
`Â Â Â /*Â this+0x1aÂ */Â intÂ positionID`
`Â Â Â /*Â this+0x1eÂ */Â charÂ intro[50]`
`Â Â Â /*Â this+0x50Â */Â charÂ charname[24]`
`Â }`
`}`

0x183
`structÂ PACKET_CZ_REQ_DELETE_RELATED_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ OpponentGDID`
`Â /*Â this+0x6Â */Â intÂ Relation`
`}`

0x184
`structÂ PACKET_ZC_DELETE_RELATED_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ OpponentGDID`
`Â /*Â this+0x6Â */Â intÂ Relation`
`}`

0x185
`structÂ PACKET_ZC_ADD_RELATED_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ RELATED_GUILD_INFOÂ InfoÂ {`
`Â Â Â /*Â this+0x0Â */Â intÂ relation`
`Â Â Â /*Â this+0x4Â */Â intÂ GDID`
`Â Â Â /*Â this+0x8Â */Â charÂ guildname[24]`
`Â }`
`}`

0x186
`structÂ PACKET_COLLECTORDEADÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ ServerID`
`}`

0x187
`structÂ PACKET_PINGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x188
`structÂ PACKET_ZC_ACK_ITEMREFININGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ result`
`Â /*Â this+0x4Â */Â shortÂ itemIndex`
`Â /*Â this+0x6Â */Â shortÂ refiningLevel`
`}`

0x189
`structÂ PACKET_ZC_NOTIFY_MAPINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ type`
`}`

0x18a
`structÂ PACKET_CZ_REQ_DISCONNECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ type`
`}`

0x18b
`structÂ PACKET_ZC_ACK_REQ_DISCONNECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ result`
`}`

0x18c
`structÂ PACKET_ZC_MONSTER_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ job`
`Â /*Â this+0x4Â */Â shortÂ level`
`Â /*Â this+0x6Â */Â shortÂ size`
`Â /*Â this+0x8Â */Â intÂ hp`
`Â /*Â this+0xcÂ */Â shortÂ def`
`Â /*Â this+0xeÂ */Â shortÂ raceType`
`Â /*Â this+0x10Â */Â shortÂ mdefPower`
`Â /*Â this+0x12Â */Â shortÂ property`
`Â /*Â this+0x14Â */Â Â structÂ PACKET_ZC_MONSTER_INFOÂ propertyTableÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ charÂ water`
`Â Â Â /*Â this+0x1Â */Â unsignedÂ charÂ earth`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ charÂ fire`
`Â Â Â /*Â this+0x3Â */Â unsignedÂ charÂ wind`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ poison`
`Â Â Â /*Â this+0x5Â */Â unsignedÂ charÂ saint`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ charÂ dark`
`Â Â Â /*Â this+0x7Â */Â unsignedÂ charÂ mental`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ charÂ undead`
`Â }`
`}`

0x18d
`structÂ PACKET_ZC_MAKABLEITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ MAKABLEITEM_INFOÂ infoÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ material_ID[3]`
`Â }`
`}`

0x18e
`structÂ PACKET_CZ_REQMAKINGITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ MAKABLEITEM_INFOÂ infoÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ material_ID[3]`
`Â }`
`}`

0x18f
`structÂ PACKET_ZC_ACK_REQMAKINGITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ result`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ ITID`
`}`

0x190
`structÂ PACKET_CZ_USE_SKILL_TOGROUND_WITHTALKBOXÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ selectedLevel`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x6Â */Â shortÂ xPos`
`Â /*Â this+0x8Â */Â shortÂ yPos`
`Â /*Â this+0xaÂ */Â charÂ contents[80]`
`}`

0x191
`structÂ PACKET_ZC_TALKBOX_CHATCONTENTSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â charÂ contents[80]`
`}`

0x192
`structÂ PACKET_ZC_UPDATE_MAPINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ xPos`
`Â /*Â this+0x4Â */Â shortÂ yPos`
`Â /*Â this+0x6Â */Â shortÂ type`
`Â /*Â this+0x8Â */Â charÂ mapName[16]`
`}`

0x193
`structÂ PACKET_CZ_REQNAME_BYGIDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`}`

0x194
`structÂ PACKET_ZC_ACK_REQNAME_BYGIDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â charÂ CName[24]`
`}`

0x195
`structÂ PACKET_ZC_ACK_REQNAMEALLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â charÂ CName[24]`
`Â /*Â this+0x1eÂ */Â charÂ PName[24]`
`Â /*Â this+0x36Â */Â charÂ GName[24]`
`Â /*Â this+0x4eÂ */Â charÂ RName[24]`
`}`

0x196
`structÂ PACKET_ZC_MSG_STATE_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â boolÂ state`
`}`

0x197
`structÂ PACKET_CZ_RESETÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ type`
`}`

0x198
`structÂ PACKET_CZ_CHANGE_MAPTYPEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ xPos`
`Â /*Â this+0x4Â */Â shortÂ yPos`
`Â /*Â this+0x6Â */Â shortÂ type`
`}`

0x199
`structÂ PACKET_ZC_NOTIFY_MAPPROPERTYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ type`
`}`

0x19a
`structÂ PACKET_ZC_NOTIFY_RANKINGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ ranking`
`Â /*Â this+0xaÂ */Â intÂ total`
`}`

0x19b
`structÂ PACKET_ZC_NOTIFY_EFFECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ effectID`
`}`

0x19d
`structÂ PACKET_CZ_CHANGE_EFFECTSTATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ EffectState`
`}`

0x19e
`structÂ PACKET_ZC_START_CAPTUREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x19f
`structÂ PACKET_CZ_TRYCAPTURE_MONSTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ targetAID`
`}`

0x1a0
`structÂ PACKET_ZC_TRYCAPTURE_MONSTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`}`

0x1a1
`structÂ PACKET_CZ_COMMAND_PETÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ cSub`
`}`

0x1a2
`structÂ PACKET_ZC_PROPERTY_PETÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ szName[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ charÂ bModified`
`Â /*Â this+0x1bÂ */Â shortÂ nLevel`
`Â /*Â this+0x1dÂ */Â shortÂ nFullness`
`Â /*Â this+0x1fÂ */Â shortÂ nRelationship`
`Â /*Â this+0x21Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x23Â */Â shortÂ job`
`}`

0x1a3
`structÂ PACKET_ZC_FEED_PETÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ cRet`
`Â /*Â this+0x3Â */Â unsignedÂ shortÂ ITID`
`}`

0x1a4
`structÂ PACKET_ZC_CHANGESTATE_PETÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ type`
`Â /*Â this+0x3Â */Â intÂ GID`
`Â /*Â this+0x7Â */Â intÂ data`
`}`

0x1a5
`structÂ PACKET_CZ_RENAME_PETÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ szName[24]`
`}`

0x1a6
`structÂ PACKET_ZC_PETEGG_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ PETEGGITEM_INFOÂ eggList[...]Â {Â //Â SizeÂ 2`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â }`
`}`

0x1a7
`structÂ PACKET_CZ_SELECT_PETEGGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`}`

0x1a8
`structÂ PACKET_CZ_PETEGG_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`}`

0x1a9
`structÂ PACKET_CZ_PET_ACTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ data`
`}`

0x1aa
`structÂ PACKET_ZC_PET_ACTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ GID`
`Â /*Â this+0x6Â */Â intÂ data`
`}`

0x1ab
`structÂ PACKET_ZC_PAR_CHANGE_USERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ varID`
`Â /*Â this+0x8Â */Â intÂ count`
`}`

0x1ac
`structÂ PACKET_ZC_SKILL_UPDATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x1ad
`structÂ PACKET_ZC_MAKINGARROW_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ ARROWITEM_INFOÂ arrowList[...]Â {Â //Â SizeÂ 2`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â }`
`}`

0x1ae
`structÂ PACKET_CZ_REQ_MAKINGARROWÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ id`
`}`

0x1af
`structÂ PACKET_CZ_REQ_CHANGECARTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ num`
`}`

0x1b0
`structÂ PACKET_ZC_NPCSPRITE_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x7Â */Â unsignedÂ longÂ value`
`}`

0x1b1
`structÂ PACKET_ZC_SHOWDIGITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x3Â */Â intÂ value`
`}`

0x1b2
`structÂ PACKET_CZ_REQ_OPENSTORE2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ storeName[80]`
`Â /*Â this+0x54Â */Â boolÂ result`
`Â /*Â this+0x55Â */Â structÂ STORE_ITEMÂ storeList[...]Â {Â //Â SizeÂ 8`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â shortÂ count`
`Â Â Â /*Â this+0x4Â */Â intÂ Price`
`Â }`
`}`

0x1b3
`structÂ PACKET_ZC_SHOW_IMAGE2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ imageName[64]`
`Â /*Â this+0x42Â */Â unsignedÂ charÂ type`
`}`

0x1b4
`structÂ PACKET_ZC_CHANGE_GUILDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GDID`
`Â /*Â this+0xaÂ */Â shortÂ emblemVersion`
`}`

0x1b5
`structÂ PACKET_SC_BILLING_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ dwAmountRemain`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ dwQuantityRemain`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ dwReserved1`
`Â /*Â this+0xeÂ */Â unsignedÂ longÂ dwReserved2`
`}`

0x1b6
`structÂ PACKET_ZC_GUILD_INFO2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ GDID`
`Â /*Â this+0x6Â */Â intÂ level`
`Â /*Â this+0xaÂ */Â intÂ userNum`
`Â /*Â this+0xeÂ */Â intÂ maxUserNum`
`Â /*Â this+0x12Â */Â intÂ userAverageLevel`
`Â /*Â this+0x16Â */Â intÂ exp`
`Â /*Â this+0x1aÂ */Â intÂ maxExp`
`Â /*Â this+0x1eÂ */Â intÂ point`
`Â /*Â this+0x22Â */Â intÂ honor`
`Â /*Â this+0x26Â */Â intÂ virtue`
`Â /*Â this+0x2aÂ */Â intÂ emblemVersion`
`Â /*Â this+0x2eÂ */Â charÂ guildname[24]`
`Â /*Â this+0x46Â */Â charÂ masterName[24]`
`Â /*Â this+0x5eÂ */Â charÂ manageLand[16]`
`Â /*Â this+0x6eÂ */Â intÂ zeny`
`}`

0x1b7
`structÂ PACKET_CZ_GUILD_ZENYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ zeny`
`}`

0x1b8
`structÂ PACKET_ZC_GUILD_ZENY_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ret`
`}`

0x1b9
`structÂ PACKET_ZC_DISPELÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x1ba
`structÂ PACKET_CZ_REMOVE_AIDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ AccountName[24]`
`}`

0x1bb
`structÂ PACKET_CZ_SHIFTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ CharacterName[24]`
`}`

0x1bc
`structÂ PACKET_CZ_RECALLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ AccountName[24]`
`}`

0x1bd
`structÂ PACKET_CZ_RECALL_GIDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ CharacterName[24]`
`}`

0x1be
`structÂ PACKET_AC_ASK_PNGAMEROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x1bf
`structÂ PACKET_CA_REPLY_PNGAMEROOMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ Permission`
`}`

0x1c0
`structÂ PACKET_CZ_REQ_REMAINTIMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x1c1
`structÂ PACKET_ZC_REPLY_REMAINTIMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Result`
`Â /*Â this+0x6Â */Â intÂ ExpirationDate`
`Â /*Â this+0xaÂ */Â intÂ RemainTime`
`}`

0x1c2
`structÂ PACKET_ZC_INFO_REMAINTIMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Type`
`Â /*Â this+0x6Â */Â intÂ RemainTime`
`}`

0x1c3
`structÂ PACKET_ZC_BROADCAST2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ fontColor`
`Â /*Â this+0x8Â */Â shortÂ fontType`
`Â /*Â this+0xaÂ */Â shortÂ fontSize`
`Â /*Â this+0xcÂ */Â shortÂ fontAlign`
`Â /*Â this+0xeÂ */Â shortÂ fontY`
`Â /*Â this+0x10Â */Â charÂ msg[...]`
`}`

0x1c4
`structÂ PACKET_ZC_ADD_ITEM_TO_STORE2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`Â /*Â this+0x8Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ type`
`Â /*Â this+0xbÂ */Â boolÂ IsIdentified`
`Â /*Â this+0xcÂ */Â boolÂ IsDamaged`
`Â /*Â this+0xdÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xeÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`}`

0x1c5
`structÂ PACKET_ZC_ADD_ITEM_TO_CART2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`Â /*Â this+0x8Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ type`
`Â /*Â this+0xbÂ */Â boolÂ IsIdentified`
`Â /*Â this+0xcÂ */Â boolÂ IsDamaged`
`Â /*Â this+0xdÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xeÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`}`

0x1c6
`structÂ PACKET_CS_REQ_ENCRYPTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ encCount`
`Â /*Â this+0x3Â */Â charÂ decCount`
`}`

0x1c7
`structÂ PACKET_SC_ACK_ENCRYPTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x1c8
`structÂ PACKET_ZC_USE_ITEM_ACK2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ id`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0xaÂ */Â shortÂ count`
`Â /*Â this+0xcÂ */Â boolÂ result`
`}`

0x1c9
`structÂ PACKET_ZC_SKILL_ENTRY2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ creatorAID`
`Â /*Â this+0xaÂ */Â shortÂ xPos`
`Â /*Â this+0xcÂ */Â shortÂ yPos`
`Â /*Â this+0xeÂ */Â unsignedÂ charÂ job`
`Â /*Â this+0xfÂ */Â boolÂ isVisible`
`Â /*Â this+0x10Â */Â boolÂ isContens`
`Â /*Â this+0x11Â */Â charÂ msg[80]`
`}`

0x1ca
`structÂ PACKET_CZ_REQMAKINGHOMUNÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â boolÂ result`
`}`

0x1cb
`structÂ PACKET_CZ_MONSTER_TALKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ stateId`
`Â /*Â this+0x7Â */Â unsignedÂ charÂ skillId`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ arg1`
`}`

0x1cc
`structÂ PACKET_ZC_MONSTER_TALKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ stateId`
`Â /*Â this+0x7Â */Â unsignedÂ charÂ skillId`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ arg1`
`}`

0x1cd
`structÂ PACKET_ZC_AUTOSPELLLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ SKID[7]`
`}`

0x1ce
`structÂ PACKET_CZ_SELECTAUTOSPELLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ SKID`
`}`

0x1cf
`structÂ PACKET_ZC_DEVOTIONLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ myAID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ AID[5]`
`Â /*Â this+0x1aÂ */Â shortÂ range`
`}`

0x1d0
`structÂ PACKET_ZC_SPIRITSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ num`
`}`

0x1d1
`structÂ PACKET_ZC_BLADESTOPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ srcAID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ destAID`
`Â /*Â this+0xaÂ */Â intÂ flag`
`}`

0x1d2
`structÂ PACKET_ZC_COMBODELAYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ delayTime`
`}`

0x1d3
`structÂ PACKET_ZC_SOUNDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ fileName[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ charÂ act`
`Â /*Â this+0x1bÂ */Â unsignedÂ longÂ term`
`Â /*Â this+0x1fÂ */Â unsignedÂ longÂ NAID`
`}`

0x1d4
`structÂ PACKET_ZC_OPEN_EDITDLGSTRÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NAID`
`}`

0x1d5
`structÂ PACKET_CZ_INPUT_EDITDLGSTRÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ NAID`
`Â /*Â this+0x8Â */Â charÂ msg[...]`
`}`

0x1d6
`structÂ PACKET_ZC_NOTIFY_MAPPROPERTY2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ type`
`}`

0x1d7
`structÂ PACKET_ZC_SPRITE_CHANGE2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x7Â */Â intÂ value`
`}`

0x1d8
`structÂ PACKET_ZC_NOTIFY_STANDENTRY2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â shortÂ effectState`
`Â /*Â this+0xeÂ */Â shortÂ job`
`Â /*Â this+0x10Â */Â shortÂ head`
`Â /*Â this+0x12Â */Â intÂ weapon`
`Â /*Â this+0x16Â */Â shortÂ accessory`
`Â /*Â this+0x18Â */Â shortÂ accessory2`
`Â /*Â this+0x1aÂ */Â shortÂ accessory3`
`Â /*Â this+0x1cÂ */Â shortÂ headpalette`
`Â /*Â this+0x1eÂ */Â shortÂ bodypalette`
`Â /*Â this+0x20Â */Â shortÂ headDir`
`Â /*Â this+0x22Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x26Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x28Â */Â shortÂ honor`
`Â /*Â this+0x2aÂ */Â shortÂ virtue`
`Â /*Â this+0x2cÂ */Â boolÂ isPKModeON`
`Â /*Â this+0x2dÂ */Â unsignedÂ charÂ sex`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x33Â */Â unsignedÂ charÂ state`
`Â /*Â this+0x34Â */Â shortÂ clevel`
`}`

0x1d9
`structÂ PACKET_ZC_NOTIFY_NEWENTRY2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â shortÂ effectState`
`Â /*Â this+0xeÂ */Â shortÂ job`
`Â /*Â this+0x10Â */Â shortÂ head`
`Â /*Â this+0x12Â */Â intÂ weapon`
`Â /*Â this+0x16Â */Â shortÂ accessory`
`Â /*Â this+0x18Â */Â shortÂ accessory2`
`Â /*Â this+0x1aÂ */Â shortÂ accessory3`
`Â /*Â this+0x1cÂ */Â shortÂ headpalette`
`Â /*Â this+0x1eÂ */Â shortÂ bodypalette`
`Â /*Â this+0x20Â */Â shortÂ headDir`
`Â /*Â this+0x22Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x26Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x28Â */Â shortÂ honor`
`Â /*Â this+0x2aÂ */Â shortÂ virtue`
`Â /*Â this+0x2cÂ */Â boolÂ isPKModeON`
`Â /*Â this+0x2dÂ */Â unsignedÂ charÂ sex`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x33Â */Â shortÂ clevel`
`}`

0x1da
`structÂ PACKET_ZC_NOTIFY_MOVEENTRY2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â shortÂ effectState`
`Â /*Â this+0xeÂ */Â shortÂ job`
`Â /*Â this+0x10Â */Â shortÂ head`
`Â /*Â this+0x12Â */Â intÂ weapon`
`Â /*Â this+0x16Â */Â shortÂ accessory`
`Â /*Â this+0x18Â */Â unsignedÂ longÂ moveStartTime`
`Â /*Â this+0x1cÂ */Â shortÂ accessory2`
`Â /*Â this+0x1eÂ */Â shortÂ accessory3`
`Â /*Â this+0x20Â */Â shortÂ headpalette`
`Â /*Â this+0x22Â */Â shortÂ bodypalette`
`Â /*Â this+0x24Â */Â shortÂ headDir`
`Â /*Â this+0x26Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x2aÂ */Â shortÂ GEmblemVer`
`Â /*Â this+0x2cÂ */Â shortÂ honor`
`Â /*Â this+0x2eÂ */Â shortÂ virtue`
`Â /*Â this+0x30Â */Â boolÂ isPKModeON`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ MoveData[6]`
`Â /*Â this+0x38Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x39Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x3aÂ */Â shortÂ clevel`
`}`

0x1db
`structÂ PACKET_CA_REQ_HASHÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x1dc
`structÂ PACKET_AC_ACK_HASHÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ secret[...]`
`}`

0x1dd
`structÂ PACKET_CA_LOGIN2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Version`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ ID[24]`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ PasswdMD5[16]`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ clienttype`
`}`

0x1de
`structÂ PACKET_ZC_NOTIFY_SKILL2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ targetID`
`Â /*Â this+0xcÂ */Â unsignedÂ longÂ startTime`
`Â /*Â this+0x10Â */Â intÂ attackMT`
`Â /*Â this+0x14Â */Â intÂ attackedMT`
`Â /*Â this+0x18Â */Â intÂ damage`
`Â /*Â this+0x1cÂ */Â shortÂ level`
`Â /*Â this+0x1eÂ */Â shortÂ count`
`Â /*Â this+0x20Â */Â unsignedÂ charÂ action`
`}`

0x1df
`structÂ PACKET_CZ_REQ_ACCOUNTNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x1e0
`structÂ PACKET_ZC_ACK_ACCOUNTNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â charÂ name[24]`
`}`

0x1e1
`structÂ PACKET_ZC_SPIRITS2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ num`
`}`

0x1e2
`structÂ PACKET_ZC_REQ_COUPLEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â charÂ name[24]`
`}`

0x1e3
`structÂ PACKET_CZ_JOIN_COUPLEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â intÂ answer`
`}`

0x1e4
`structÂ PACKET_ZC_START_COUPLEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x1e5
`structÂ PACKET_CZ_REQ_JOIN_COUPLEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x1e6
`structÂ PACKET_ZC_COUPLENAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ CoupleName[24]`
`}`

0x1e7
`structÂ PACKET_CZ_DORIDORIÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x1e8
`structÂ PACKET_CZ_MAKE_GROUP2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ groupName[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ charÂ ItemPickupRule`
`Â /*Â this+0x1bÂ */Â unsignedÂ charÂ ItemDivisionRule`
`}`

0x1e9
`structÂ PACKET_ZC_ADD_MEMBER_TO_GROUP2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ Role`
`Â /*Â this+0xaÂ */Â shortÂ xPos`
`Â /*Â this+0xcÂ */Â shortÂ yPos`
`Â /*Â this+0xeÂ */Â unsignedÂ charÂ state`
`Â /*Â this+0xfÂ */Â charÂ groupName[24]`
`Â /*Â this+0x27Â */Â charÂ characterName[24]`
`Â /*Â this+0x3fÂ */Â charÂ mapName[16]`
`Â /*Â this+0x4fÂ */Â unsignedÂ charÂ ItemPickupRule`
`Â /*Â this+0x50Â */Â unsignedÂ charÂ ItemDivisionRule`
`}`

0x1ea
`structÂ PACKET_ZC_CONGRATULATIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x1eb
`structÂ PACKET_ZC_NOTIFY_POSITION_TO_GUILDMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ xPos`
`Â /*Â this+0x8Â */Â shortÂ yPos`
`}`

0x1ec
`structÂ PACKET_ZC_GUILD_MEMBER_MAP_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GDID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0xaÂ */Â charÂ mapName[16]`
`}`

0x1ed
`structÂ PACKET_CZ_CHOPOKGIÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x1ee
`structÂ PACKET_ZC_NORMAL_ITEMLIST2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFO2Â ItemInfo[...]Â {Â //Â SizeÂ 18`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x1ef
`structÂ PACKET_ZC_CART_NORMAL_ITEMLIST2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFO2Â ItemInfo[...]Â {Â //Â SizeÂ 18`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x1f0
`structÂ PACKET_ZC_STORE_NORMAL_ITEMLIST2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFO2Â ItemInfo[...]Â {Â //Â SizeÂ 18`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x1f1
`structÂ PACKET_AC_NOTIFY_ERRORÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x1f2
`structÂ PACKET_ZC_UPDATE_CHARSTAT2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â intÂ status`
`Â /*Â this+0xeÂ */Â shortÂ sex`
`Â /*Â this+0x10Â */Â shortÂ head`
`Â /*Â this+0x12Â */Â shortÂ headPalette`
`}`

0x1f3
`structÂ PACKET_ZC_NOTIFY_EFFECT2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ effectID`
`}`

0x1f4
`structÂ PACKET_ZC_REQ_EXCHANGE_ITEM2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ longÂ GID`
`Â /*Â this+0x1eÂ */Â shortÂ level`
`}`

0x1f5
`structÂ PACKET_ZC_ACK_EXCHANGE_ITEM2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ result`
`Â /*Â this+0x3Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x7Â */Â shortÂ level`
`}`

0x1f6
`structÂ PACKET_ZC_REQ_BABYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â charÂ name[24]`
`}`

0x1f7
`structÂ PACKET_CZ_JOIN_BABYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â intÂ answer`
`}`

0x1f8
`structÂ PACKET_ZC_START_BABYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x1f9
`structÂ PACKET_CZ_REQ_JOIN_BABYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x1fa
`structÂ PACKET_CA_LOGIN3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Version`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ ID[24]`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ PasswdMD5[16]`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ clienttype`
`Â /*Â this+0x2fÂ */Â unsignedÂ charÂ ClientInfo`
`}`

0x1fb
`structÂ PACKET_CH_DELETE_CHAR2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â charÂ key[50]`
`}`

0x1fc
`structÂ PACKET_ZC_REPAIRITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ REPAIRITEM_INFOÂ itemList[...]Â {Â //Â SizeÂ 13`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ refiningLevel`
`Â Â Â /*Â this+0x5Â */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x1fd
`structÂ PACKET_CZ_REQ_ITEMREPAIRÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ REPAIRITEM_INFOÂ TargetItemInfoÂ {`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ refiningLevel`
`Â Â Â /*Â this+0x5Â */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x1fe
`structÂ PACKET_ZC_ACK_ITEMREPAIRÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ result`
`}`

0x1ff
`structÂ PACKET_ZC_HIGHJUMPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ xPos`
`Â /*Â this+0x8Â */Â shortÂ yPos`
`}`

0x200
`structÂ PACKET_CA_CONNECT_INFO_CHANGEDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ID[24]`
`}`

0x201
`structÂ PACKET_ZC_FRIENDS_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ STRUCT_FRIENDÂ friendList[...]Â {Â //Â SizeÂ 32`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ AID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ longÂ GID`
`Â Â Â /*Â this+0x8Â */Â charÂ Name[24]`
`Â }`
`}`

0x202
`structÂ PACKET_CZ_ADD_FRIENDSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`}`

0x203
`structÂ PACKET_CZ_DELETE_FRIENDSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`}`

0x204
`structÂ PACKET_CA_EXE_HASHCHECKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ HashValue[16]`
`}`

0x205
`structÂ PACKET_ZC_DIVORCEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`}`

0x206
`structÂ PACKET_ZC_FRIENDS_STATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â boolÂ State`
`}`

0x207
`structÂ PACKET_ZC_REQ_ADD_FRIENDSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ ReqAID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ ReqGID`
`Â /*Â this+0xaÂ */Â charÂ Name[24]`
`}`

0x208
`structÂ PACKET_CZ_ACK_REQ_ADD_FRIENDSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ ReqAID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ ReqGID`
`Â /*Â this+0xaÂ */Â intÂ Result`
`}`

0x209
`structÂ PACKET_ZC_ADD_FRIENDS_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xcÂ */Â charÂ Name[24]`
`}`

0x20a
`structÂ PACKET_ZC_DELETE_FRIENDSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`}`

0x20b
`structÂ PACKET_CH_EXE_HASHCHECKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ClientType`
`Â /*Â this+0x3Â */Â unsignedÂ charÂ HashValue[16]`
`}`

0x20c
`structÂ PACKET_CZ_EXE_HASHCHECKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ClientType`
`Â /*Â this+0x3Â */Â unsignedÂ charÂ HashValue[16]`
`}`

0x20d
`structÂ PACKET_HC_BLOCK_CHARACTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ TAG_CHARACTER_BLOCK_INFOÂ characterList[...]Â {Â //Â SizeÂ 24`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ GID`
`Â Â Â /*Â this+0x4Â */Â charÂ szExpireDate[20]`
`Â }`
`}`

0x20e
`structÂ PACKET_ZC_STARSKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ mapName[24]`
`Â /*Â this+0x1aÂ */Â intÂ monsterID`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ star`
`Â /*Â this+0x1fÂ */Â unsignedÂ charÂ result`
`}`

0x20f
`structÂ PACKET_CZ_REQ_PVPPOINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`}`

0x210
`structÂ PACKET_ZC_ACK_PVPPOINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â structÂ PVPINFOÂ PVPÂ {`
`Â Â Â /*Â this+0x0Â */Â intÂ WinPoint`
`Â Â Â /*Â this+0x4Â */Â intÂ LosePoint`
`Â Â Â /*Â this+0x8Â */Â intÂ Point`
`Â }`
`}`

0x211
`structÂ PACKET_ZH_MOVE_PVPWORLDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`}`

0x212
`structÂ PACKET_CZ_REQ_GIVE_MANNER_BYNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ CharName[24]`
`}`

0x213
`structÂ PACKET_CZ_REQ_STATUS_GMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ CharName[24]`
`}`

0x214
`structÂ PACKET_ZC_ACK_STATUS_GMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ str`
`Â /*Â this+0x3Â */Â unsignedÂ charÂ standardStr`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ agi`
`Â /*Â this+0x5Â */Â unsignedÂ charÂ standardAgi`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ vit`
`Â /*Â this+0x7Â */Â unsignedÂ charÂ standardVit`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ Int`
`Â /*Â this+0x9Â */Â unsignedÂ charÂ standardInt`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ dex`
`Â /*Â this+0xbÂ */Â unsignedÂ charÂ standardDex`
`Â /*Â this+0xcÂ */Â unsignedÂ charÂ luk`
`Â /*Â this+0xdÂ */Â unsignedÂ charÂ standardLuk`
`Â /*Â this+0xeÂ */Â shortÂ attPower`
`Â /*Â this+0x10Â */Â shortÂ refiningPower`
`Â /*Â this+0x12Â */Â shortÂ max_mattPower`
`Â /*Â this+0x14Â */Â shortÂ min_mattPower`
`Â /*Â this+0x16Â */Â shortÂ itemdefPower`
`Â /*Â this+0x18Â */Â shortÂ plusdefPower`
`Â /*Â this+0x1aÂ */Â shortÂ mdefPower`
`Â /*Â this+0x1cÂ */Â shortÂ plusmdefPower`
`Â /*Â this+0x1eÂ */Â shortÂ hitSuccessValue`
`Â /*Â this+0x20Â */Â shortÂ avoidSuccessValue`
`Â /*Â this+0x22Â */Â shortÂ plusAvoidSuccessValue`
`Â /*Â this+0x24Â */Â shortÂ criticalSuccessValue`
`Â /*Â this+0x26Â */Â shortÂ ASPD`
`Â /*Â this+0x28Â */Â shortÂ plusASPD`
`}`

0x215
`structÂ PACKET_ZC_SKILLMSGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ MsgNo`
`}`

0x216
`structÂ PACKET_ZC_BABYMSGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ MsgNo`
`}`

0x217
`structÂ PACKET_CZ_BLACKSMITH_RANKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x218
`structÂ PACKET_CZ_ALCHEMIST_RANKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x219
`structÂ PACKET_ZC_BLACKSMITH_RANKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Name[10][24]`
`Â /*Â this+0xf2Â */Â intÂ Point[10]`
`}`

0x21a
`structÂ PACKET_ZC_ALCHEMIST_RANKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Name[10][24]`
`Â /*Â this+0xf2Â */Â intÂ Point[10]`
`}`

0x21b
`structÂ PACKET_ZC_BLACKSMITH_POINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Point`
`Â /*Â this+0x6Â */Â intÂ TotalPoint`
`}`

0x21c
`structÂ PACKET_ZC_ALCHEMIST_POINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Point`
`Â /*Â this+0x6Â */Â intÂ TotalPoint`
`}`

0x21d
`structÂ PACKET_CZ_LESSEFFECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ isLess`
`}`

0x21e
`structÂ PACKET_ZC_LESSEFFECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ isLess`
`}`

0x21f
`structÂ PACKET_ZC_NOTIFY_PKINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ winPoint`
`Â /*Â this+0x6Â */Â intÂ losePoint`
`Â /*Â this+0xaÂ */Â charÂ killName[24]`
`Â /*Â this+0x22Â */Â charÂ killedName[24]`
`Â /*Â this+0x3aÂ */Â structÂ _FILETIMEÂ expireTimeÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ dwLowDateTime`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ longÂ dwHighDateTime`
`Â }`
`}`

0x220
`structÂ PACKET_ZC_NOTIFY_CRAZYKILLERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ isCrazyKiller`
`}`

0x221
`structÂ PACKET_ZC_NOTIFY_WEAPONITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ REPAIRITEM_INFOÂ itemList[...]Â {Â //Â SizeÂ 13`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ refiningLevel`
`Â Â Â /*Â this+0x5Â */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x222
`structÂ PACKET_CZ_REQ_WEAPONREFINEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Index`
`}`

0x223
`structÂ PACKET_ZC_ACK_WEAPONREFINEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ msg`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ ITID`
`}`

0x224
`structÂ PACKET_ZC_TAEKWON_POINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Point`
`Â /*Â this+0x6Â */Â intÂ TotalPoint`
`}`

0x225
`structÂ PACKET_CZ_TAEKWON_RANKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x226
`structÂ PACKET_ZC_TAEKWON_RANKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Name[10][24]`
`Â /*Â this+0xf2Â */Â intÂ Point[10]`
`}`

0x227
`structÂ PACKET_ZC_GAME_GUARDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AuthData[4]`
`}`

0x228
`structÂ PACKET_CZ_ACK_GAME_GUARDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AuthData[4]`
`}`

0x229
`structÂ PACKET_ZC_STATE_CHANGE3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ bodyState`
`Â /*Â this+0x8Â */Â shortÂ healthState`
`Â /*Â this+0xaÂ */Â intÂ effectState`
`Â /*Â this+0xeÂ */Â boolÂ isPKModeON`
`}`

0x22a
`structÂ PACKET_ZC_NOTIFY_STANDENTRY3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â intÂ effectState`
`Â /*Â this+0x10Â */Â shortÂ job`
`Â /*Â this+0x12Â */Â shortÂ head`
`Â /*Â this+0x14Â */Â intÂ weapon`
`Â /*Â this+0x18Â */Â shortÂ accessory`
`Â /*Â this+0x1aÂ */Â shortÂ accessory2`
`Â /*Â this+0x1cÂ */Â shortÂ accessory3`
`Â /*Â this+0x1eÂ */Â shortÂ headpalette`
`Â /*Â this+0x20Â */Â shortÂ bodypalette`
`Â /*Â this+0x22Â */Â shortÂ headDir`
`Â /*Â this+0x24Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x28Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x2aÂ */Â shortÂ honor`
`Â /*Â this+0x2cÂ */Â intÂ virtue`
`Â /*Â this+0x30Â */Â boolÂ isPKModeON`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x35Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x37Â */Â unsignedÂ charÂ state`
`Â /*Â this+0x38Â */Â shortÂ clevel`
`}`

0x22b
`structÂ PACKET_ZC_NOTIFY_NEWENTRY3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â intÂ effectState`
`Â /*Â this+0x10Â */Â shortÂ job`
`Â /*Â this+0x12Â */Â shortÂ head`
`Â /*Â this+0x14Â */Â intÂ weapon`
`Â /*Â this+0x18Â */Â shortÂ accessory`
`Â /*Â this+0x1aÂ */Â shortÂ accessory2`
`Â /*Â this+0x1cÂ */Â shortÂ accessory3`
`Â /*Â this+0x1eÂ */Â shortÂ headpalette`
`Â /*Â this+0x20Â */Â shortÂ bodypalette`
`Â /*Â this+0x22Â */Â shortÂ headDir`
`Â /*Â this+0x24Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x28Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x2aÂ */Â shortÂ honor`
`Â /*Â this+0x2cÂ */Â intÂ virtue`
`Â /*Â this+0x30Â */Â boolÂ isPKModeON`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x35Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x37Â */Â shortÂ clevel`
`}`

0x22c
`structÂ PACKET_ZC_NOTIFY_MOVEENTRY3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ objecttype`
`Â /*Â this+0x3Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x7Â */Â shortÂ speed`
`Â /*Â this+0x9Â */Â shortÂ bodyState`
`Â /*Â this+0xbÂ */Â shortÂ healthState`
`Â /*Â this+0xdÂ */Â intÂ effectState`
`Â /*Â this+0x11Â */Â shortÂ job`
`Â /*Â this+0x13Â */Â shortÂ head`
`Â /*Â this+0x15Â */Â intÂ weapon`
`Â /*Â this+0x19Â */Â shortÂ accessory`
`Â /*Â this+0x1bÂ */Â unsignedÂ longÂ moveStartTime`
`Â /*Â this+0x1fÂ */Â shortÂ accessory2`
`Â /*Â this+0x21Â */Â shortÂ accessory3`
`Â /*Â this+0x23Â */Â shortÂ headpalette`
`Â /*Â this+0x25Â */Â shortÂ bodypalette`
`Â /*Â this+0x27Â */Â shortÂ headDir`
`Â /*Â this+0x29Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x2dÂ */Â shortÂ GEmblemVer`
`Â /*Â this+0x2fÂ */Â shortÂ honor`
`Â /*Â this+0x31Â */Â intÂ virtue`
`Â /*Â this+0x35Â */Â boolÂ isPKModeON`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x37Â */Â unsignedÂ charÂ MoveData[6]`
`Â /*Â this+0x3dÂ */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x3eÂ */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x3fÂ */Â shortÂ clevel`
`}`

0x22d
`structÂ PACKET_CZ_COMMAND_MERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ type`
`Â /*Â this+0x4Â */Â charÂ command`
`}`

0x22e
`structÂ PACKET_ZC_PROPERTY_HOMUNÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ szName[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ charÂ bModified`
`Â /*Â this+0x1bÂ */Â shortÂ nLevel`
`Â /*Â this+0x1dÂ */Â shortÂ nFullness`
`Â /*Â this+0x1fÂ */Â shortÂ nRelationship`
`Â /*Â this+0x21Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x23Â */Â shortÂ atk`
`Â /*Â this+0x25Â */Â shortÂ Matk`
`Â /*Â this+0x27Â */Â shortÂ hit`
`Â /*Â this+0x29Â */Â shortÂ critical`
`Â /*Â this+0x2bÂ */Â shortÂ def`
`Â /*Â this+0x2dÂ */Â shortÂ Mdef`
`Â /*Â this+0x2fÂ */Â shortÂ flee`
`Â /*Â this+0x31Â */Â shortÂ aspd`
`Â /*Â this+0x33Â */Â shortÂ hp`
`Â /*Â this+0x35Â */Â shortÂ maxHP`
`Â /*Â this+0x37Â */Â shortÂ sp`
`Â /*Â this+0x39Â */Â shortÂ maxSP`
`Â /*Â this+0x3bÂ */Â intÂ exp`
`Â /*Â this+0x3fÂ */Â intÂ maxEXP`
`Â /*Â this+0x43Â */Â shortÂ SKPoint`
`Â /*Â this+0x45Â */Â shortÂ ATKRange`
`}`

0x230
`structÂ PACKET_ZC_CHANGESTATE_MERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ type`
`Â /*Â this+0x3Â */Â charÂ state`
`Â /*Â this+0x4Â */Â intÂ GID`
`Â /*Â this+0x8Â */Â intÂ data`
`}`

0x231
`structÂ PACKET_CZ_RENAME_MERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`}`

0x232
`structÂ PACKET_CZ_REQUEST_MOVENPCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ dest[3]`
`}`

0x233
`structÂ PACKET_CZ_REQUEST_ACTNPCÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetGID`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ action`
`}`

0x234
`structÂ PACKET_CZ_REQUEST_MOVETOOWNERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`}`

0x23a
`structÂ PACKET_ZC_REQ_STORE_PASSWORDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Info`
`}`

0x23b
`structÂ PACKET_CZ_ACK_STORE_PASSWORDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Type`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ Password[16]`
`Â /*Â this+0x14Â */Â unsignedÂ charÂ NewPassword[16]`
`}`

0x23c
`structÂ PACKET_ZC_RESULT_STORE_PASSWORDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`Â /*Â this+0x4Â */Â shortÂ ErrorCount`
`}`

0x23d
`structÂ PACKET_AC_EVENT_RESULTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ EventItemCount`
`}`

0x23e
`structÂ PACKET_HC_REQUEST_CHARACTER_PASSWORDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ dummyValue`
`}`

0x23f
`structÂ PACKET_CZ_MAIL_GET_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x240
`structÂ PACKET_ZC_MAIL_REQ_GET_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ MailNumber`
`Â /*Â this+0x8Â */Â structÂ MAIL_LISTÂ mailList[...]Â {Â //Â SizeÂ 73`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ MailID`
`Â Â Â /*Â this+0x4Â */Â charÂ HEADER[40]`
`Â Â Â /*Â this+0x2cÂ */Â charÂ isOpen`
`Â Â Â /*Â this+0x2dÂ */Â charÂ FromName[24]`
`Â Â Â /*Â this+0x45Â */Â longÂ DeleteTime`
`Â }`
`}`

0x241
`structÂ PACKET_CZ_MAIL_OPENÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ MailID`
`}`

0x242
`structÂ PACKET_ZC_MAIL_REQ_OPENÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ MailID`
`Â /*Â this+0x8Â */Â charÂ Header[40]`
`Â /*Â this+0x30Â */Â charÂ FromName[24]`
`Â /*Â this+0x48Â */Â longÂ DeleteTime`
`Â /*Â this+0x4cÂ */Â unsignedÂ longÂ Money`
`Â /*Â this+0x50Â */Â intÂ count`
`Â /*Â this+0x54Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x56Â */Â unsignedÂ shortÂ Type`
`Â /*Â this+0x58Â */Â boolÂ IsIdentified`
`Â /*Â this+0x59Â */Â boolÂ IsDamaged`
`Â /*Â this+0x5aÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0x5bÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`Â /*Â this+0x63Â */Â unsignedÂ charÂ msg_len`
`Â /*Â this+0x64Â */Â charÂ msg[...]`
`}`

0x243
`structÂ PACKET_CZ_MAIL_DELETEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ MailID`
`}`

0x244
`structÂ PACKET_CZ_MAIL_GET_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ MailID`
`}`

0x245
`structÂ PACKET_ZC_MAIL_REQ_GET_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Result`
`}`

0x246
`structÂ PACKET_CZ_MAIL_RESET_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Type`
`}`

0x247
`structÂ PACKET_CZ_MAIL_ADD_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0x248
`structÂ PACKET_CZ_MAIL_SENDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ ReceiveName[24]`
`Â /*Â this+0x1cÂ */Â charÂ Header[40]`
`Â /*Â this+0x44Â */Â unsignedÂ longÂ msg_len`
`Â /*Â this+0x48Â */Â charÂ msg[...]`
`}`

0x249
`structÂ PACKET_ZC_MAIL_REQ_SENDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Result`
`}`

0x24a
`structÂ PACKET_ZC_MAIL_RECEIVEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ MailID`
`Â /*Â this+0x6Â */Â charÂ Header[40]`
`Â /*Â this+0x2eÂ */Â charÂ FromName[24]`
`}`

0x24b
`structÂ PACKET_CZ_AUCTION_CREATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Type`
`}`

0x24c
`structÂ PACKET_CZ_AUCTION_ADD_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0x24d
`structÂ PACKET_CZ_AUCTION_ADDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ NowMoney`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ MaxMoney`
`Â /*Â this+0xaÂ */Â shortÂ DeleteHour`
`}`

0x24e
`structÂ PACKET_CZ_AUCTION_ADD_CANCELÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AuctionID`
`}`

0x24f
`structÂ PACKET_CZ_AUCTION_BUYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AuctionID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ Money`
`}`

0x250
`structÂ PACKET_ZC_AUCTION_RESULTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Result`
`}`

0x251
`structÂ PACKET_CZ_AUCTION_ITEM_SEARCHÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Type`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AuctionID`
`Â /*Â this+0x8Â */Â charÂ Name[24]`
`Â /*Â this+0x20Â */Â unsignedÂ shortÂ Page`
`}`

0x252
`structÂ PACKET_ZC_AUCTION_ITEM_REQ_SEARCHÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ MaxPage`
`Â /*Â this+0x8Â */Â intÂ Number`
`Â /*Â this+0xcÂ */Â structÂ AUCTION_ITEM_SEARCH_INFOÂ auctionItemList[...]Â {Â //Â SizeÂ 83`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ AuctionID`
`Â Â Â /*Â this+0x4Â */Â charÂ SellerName[24]`
`Â Â Â /*Â this+0x1cÂ */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x1eÂ */Â intÂ Type`
`Â Â Â /*Â this+0x22Â */Â shortÂ count`
`Â Â Â /*Â this+0x24Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x25Â */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0x26Â */Â unsignedÂ charÂ refiningLevel`
`Â Â Â /*Â this+0x27Â */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x2fÂ */Â intÂ NowPrice`
`Â Â Â /*Â this+0x33Â */Â intÂ MaxPrice`
`Â Â Â /*Â this+0x37Â */Â charÂ BuyerName[24]`
`Â Â Â /*Â this+0x4fÂ */Â longÂ DeleteTime`
`Â }`
`}`

0x253
`structÂ PACKET_ZC_STARPLACEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ which`
`}`

0x254
`structÂ PACKET_CZ_AGREE_STARPLACEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ which`
`}`

0x255
`structÂ PACKET_ZC_ACK_MAIL_ADD_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Index`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ result`
`}`

0x256
`structÂ PACKET_ZC_ACK_AUCTION_ADD_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Index`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ result`
`}`

0x257
`structÂ PACKET_ZC_ACK_MAIL_DELETEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ MailID`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ Result`
`}`

0x258
`structÂ PACKET_CA_REQ_GAME_GUARD_CHECKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x259
`structÂ PACKET_AC_ACK_GAME_GUARDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ucAnswer`
`}`

0x25a
`structÂ PACKET_ZC_MAKINGITEM_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ idList[...]`
`}`

0x25b
`structÂ PACKET_CZ_REQ_MAKINGITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ mkType`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ id`
`}`

0x25c
`structÂ PACKET_CZ_AUCTION_REQ_MY_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Type`
`}`

0x25d
`structÂ PACKET_CZ_AUCTION_REQ_MY_SELL_STOPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AuctionID`
`}`

0x25e
`structÂ PACKET_ZC_AUCTION_ACK_MY_SELL_STOPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`}`

0x25f
`structÂ PACKET_ZC_AUCTION_WINDOWSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Type`
`}`

0x260
`structÂ PACKET_ZC_MAIL_WINDOWSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Type`
`}`

0x261
`structÂ PACKET_AC_REQ_LOGIN_OLDEKEYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ m_SeedValue[9]`
`}`

0x262
`structÂ PACKET_AC_REQ_LOGIN_NEWEKEYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ m_SeedValue[9]`
`}`

0x263
`structÂ PACKET_AC_REQ_LOGIN_CARDPASSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ m_SeedValue[9]`
`}`

0x264
`structÂ PACKET_CA_ACK_LOGIN_OLDEKEYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ m_SeedValue[9]`
`Â /*Â this+0xbÂ */Â charÂ m_EKey[9]`
`}`

0x265
`structÂ PACKET_CA_ACK_LOGIN_NEWEKEYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ m_SeedValue[9]`
`Â /*Â this+0xbÂ */Â charÂ m_EKey[9]`
`}`

0x266
`structÂ PACKET_CA_ACK_LOGIN_CARDPASSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ m_cardPass[28]`
`}`

0x267
`structÂ PACKET_AC_ACK_EKEY_FAIL_NOTEXISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x268
`structÂ PACKET_AC_ACK_EKEY_FAIL_NOTUSESEKEYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x269
`structÂ PACKET_AC_ACK_EKEY_FAIL_NOTUSEDEKEYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x26a
`structÂ PACKET_AC_ACK_EKEY_FAIL_AUTHREFUSEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x26b
`structÂ PACKET_AC_ACK_EKEY_FAIL_INPUTEKEYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x26c
`structÂ PACKET_AC_ACK_EKEY_FAIL_NOTICEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x26d
`structÂ PACKET_AC_ACK_EKEY_FAIL_NEEDCARDPASSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x26e
`structÂ PACKET_AC_ACK_AUTHEKEY_FAIL_NOTMATCHCARDPASSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ errorCode`
`}`

0x26f
`structÂ PACKET_AC_ACK_FIRST_LOGINÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x270
`structÂ PACKET_AC_REQ_LOGIN_ACCOUNT_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x271
`structÂ PACKET_CA_ACK_LOGIN_ACCOUNT_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ sex`
`Â /*Â this+0x4Â */Â shortÂ bPoint`
`Â /*Â this+0x6Â */Â charÂ E_mail[34]`
`}`

0x272
`structÂ PACKET_AC_ACK_PT_ID_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ szPTID[21]`
`Â /*Â this+0x17Â */Â charÂ szPTNumID[21]`
`}`

0x273
`structÂ PACKET_CZ_REQ_MAIL_RETURNÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ MailID`
`Â /*Â this+0x6Â */Â charÂ ReceiveName[24]`
`}`

0x274
`structÂ PACKET_ZC_ACK_MAIL_RETURNÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ MailID`
`Â /*Â this+0x6Â */Â shortÂ Result`
`}`

0x275
`structÂ PACKET_CH_ENTER2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ AuthCode`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ userLevel`
`Â /*Â this+0xeÂ */Â unsignedÂ shortÂ clientType`
`Â /*Â this+0x10Â */Â unsignedÂ charÂ Sex`
`Â /*Â this+0x11Â */Â charÂ macData[16]`
`Â /*Â this+0x21Â */Â intÂ iAccountSID`
`}`

0x276
`structÂ PACKET_AC_ACCEPT_LOGIN2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ AuthCode`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0xcÂ */Â unsignedÂ longÂ userLevel`
`Â /*Â this+0x10Â */Â unsignedÂ longÂ lastLoginIP`
`Â /*Â this+0x14Â */Â charÂ lastLoginTime[26]`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ Sex`
`Â /*Â this+0x2fÂ */Â intÂ iAccountSID`
`}`

0x277
`structÂ PACKET_CA_LOGIN_PCBANGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Version`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ ID[24]`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ Passwd[24]`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ clienttype`
`Â /*Â this+0x37Â */Â charÂ IP[16]`
`Â /*Â this+0x47Â */Â unsignedÂ charÂ MacAdress[13]`
`}`

0x278
`structÂ PACKET_ZC_NOTIFY_PCBANGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x279
`structÂ PACKET_CZ_HUNTINGLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x27a
`structÂ PACKET_ZC_HUNTINGLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â Â structÂ PACKET_MOB_HUNTINGÂ HuntingList[...]Â {Â //Â SizeÂ 12`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ questID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ longÂ mobGID`
`Â Â Â /*Â this+0x8Â */Â shortÂ maxCount`
`Â Â Â /*Â this+0xaÂ */Â shortÂ count`
`Â }`
`}`

0x27b
`structÂ PACKET_ZC_PCBANG_EFFECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ ExpFactor`
`Â /*Â this+0x6Â */Â intÂ ExpFactor2`
`Â /*Â this+0xaÂ */Â intÂ DropFactor`
`}`

0x27c
`structÂ PACKET_CA_LOGIN4Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Version`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ ID[24]`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ PasswdMD5[16]`
`Â /*Â this+0x2eÂ */Â unsignedÂ charÂ clienttype`
`Â /*Â this+0x2fÂ */Â charÂ macData[13]`
`}`

0x27d
`structÂ PACKET_ZC_PROPERTY_MERCEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`Â /*Â this+0x1aÂ */Â shortÂ level`
`Â /*Â this+0x1cÂ */Â shortÂ faith`
`Â /*Â this+0x1eÂ */Â shortÂ summonCount`
`Â /*Â this+0x20Â */Â shortÂ atk`
`Â /*Â this+0x22Â */Â shortÂ Matk`
`Â /*Â this+0x24Â */Â shortÂ hit`
`Â /*Â this+0x26Â */Â shortÂ critical`
`Â /*Â this+0x28Â */Â shortÂ def`
`Â /*Â this+0x2aÂ */Â shortÂ Mdef`
`Â /*Â this+0x2cÂ */Â shortÂ flee`
`Â /*Â this+0x2eÂ */Â shortÂ aspd`
`Â /*Â this+0x30Â */Â shortÂ hp`
`Â /*Â this+0x32Â */Â shortÂ maxHP`
`Â /*Â this+0x34Â */Â shortÂ sp`
`Â /*Â this+0x36Â */Â shortÂ maxSP`
`Â /*Â this+0x38Â */Â shortÂ ATKRange`
`Â /*Â this+0x3aÂ */Â intÂ exp`
`}`

0x27e
`structÂ PACKET_ZC_SHANDA_PROTECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â shortÂ CodeLen`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ Code[...]`
`}`

0x27f
`structÂ PACKET_CA_CLIENT_TYPEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ ClientType`
`Â /*Â this+0x4Â */Â intÂ nVer`
`}`

0x280
`structÂ PACKET_ZC_GANGSI_POINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ Point`
`Â /*Â this+0x6Â */Â intÂ TotalPoint`
`Â /*Â this+0xaÂ */Â shortÂ PacketSwitch`
`}`

0x281
`structÂ PACKET_CZ_GANGSI_RANKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketSwitch`
`}`

0x282
`structÂ PACKET_ZC_GANGSI_RANKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Name[10][24]`
`Â /*Â this+0xf2Â */Â intÂ Point[10]`
`Â /*Â this+0x11aÂ */Â shortÂ PacketSwitch`
`}`

0x283
`structÂ PACKET_ZC_AIDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x284
`structÂ PACKET_ZC_NOTIFY_EFFECT3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ effectID`
`Â /*Â this+0xaÂ */Â intÂ numdata`
`}`

0x285
`structÂ PACKET_ZC_DEATH_QUESTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Qcategory`
`Â /*Â this+0x4Â */Â shortÂ Qnum`
`}`

0x286
`structÂ PACKET_CZ_DEATH_QUESTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Qanswer`
`}`

0x287
`structÂ PACKET_ZC_PC_CASH_POINT_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ CashPoint`
`Â /*Â this+0x8Â */Â structÂ PURCHASE_ITEMÂ itemList[...]Â {Â //Â SizeÂ 11`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â intÂ discountprice`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x9Â */Â unsignedÂ shortÂ ITID`
`Â }`
`}`

0x288
`structÂ PACKET_CZ_PC_BUY_CASH_POINT_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x4Â */Â shortÂ count`
`}`

0x289
`structÂ PACKET_ZC_PC_CASH_POINT_UPDATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ CashPoint`
`Â /*Â this+0x6Â */Â shortÂ Error`
`}`

0x28a
`structÂ PACKET_ZC_NPC_SHOWEFST_UPDATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ effectState`
`Â /*Â this+0xaÂ */Â intÂ clevel`
`Â /*Â this+0xeÂ */Â intÂ showEFST`
`}`

0x28c
`structÂ PACKET_CH_SELECT_CHAR_GOINGTOBEUSEDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ dwAID`
`Â /*Â this+0x6Â */Â intÂ nCountSelectedChar`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ ardwSelectedGID[9]`
`}`

0x28d
`structÂ PACKET_CH_REQ_IS_VALID_CHARNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ dwAID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ dwGID`
`Â /*Â this+0xaÂ */Â charÂ szCharName[24]`
`}`

0x28e
`structÂ PACKET_HC_ACK_IS_VALID_CHARNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ sResult`
`}`

0x28f
`structÂ PACKET_CH_REQ_CHANGE_CHARNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ dwGID`
`}`

0x290
`structÂ PACKET_HC_ACK_CHANGE_CHARNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ sResult`
`}`

0x291
`structÂ PACKET_ZC_MSGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ msg`
`}`

0x292
`structÂ PACKET_CZ_STANDING_RESURRECTIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x293
`structÂ PACKET_ZC_BOSS_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ infoType`
`Â /*Â this+0x3Â */Â intÂ xPos`
`Â /*Â this+0x7Â */Â intÂ yPos`
`Â /*Â this+0xbÂ */Â unsignedÂ shortÂ minHour`
`Â /*Â this+0xdÂ */Â unsignedÂ shortÂ minMinute`
`Â /*Â this+0xfÂ */Â unsignedÂ shortÂ maxHour`
`Â /*Â this+0x11Â */Â unsignedÂ shortÂ maxMinute`
`Â /*Â this+0x13Â */Â charÂ name[51]`
`}`

0x294
`structÂ PACKET_ZC_READ_BOOKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ bookID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ page`
`}`

0x295
`structÂ PACKET_ZC_EQUIPMENT_ITEMLIST2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFO2Â ItemInfo[...]Â {Â //Â SizeÂ 24`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x14Â */Â longÂ HireExpireDate`
`Â }`
`}`

0x296
`structÂ PACKET_ZC_STORE_EQUIPMENT_ITEMLIST2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFO2Â ItemInfo[...]Â {Â //Â SizeÂ 24`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x14Â */Â longÂ HireExpireDate`
`Â }`
`}`

0x297
`structÂ PACKET_ZC_CART_EQUIPMENT_ITEMLIST2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFO2Â ItemInfo[...]Â {Â //Â SizeÂ 24`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x14Â */Â longÂ HireExpireDate`
`Â }`
`}`

0x298
`structÂ PACKET_ZC_CASH_TIME_COUNTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ RemainSecond`
`}`

0x299
`structÂ PACKET_ZC_CASH_ITEM_DELETEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ ITID`
`}`

0x29a
`structÂ PACKET_ZC_ITEM_PICKUP_ACK2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ Index`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ count`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x8Â */Â boolÂ IsIdentified`
`Â /*Â this+0x9Â */Â boolÂ IsDamaged`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xbÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`Â /*Â this+0x13Â */Â unsignedÂ shortÂ location`
`Â /*Â this+0x15Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x16Â */Â unsignedÂ charÂ result`
`Â /*Â this+0x17Â */Â longÂ HireExpireDate`
`}`

0x29b
`structÂ PACKET_ZC_MER_INITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ AID`
`Â /*Â this+0x6Â */Â shortÂ atk`
`Â /*Â this+0x8Â */Â shortÂ Matk`
`Â /*Â this+0xaÂ */Â shortÂ hit`
`Â /*Â this+0xcÂ */Â shortÂ critical`
`Â /*Â this+0xeÂ */Â shortÂ def`
`Â /*Â this+0x10Â */Â shortÂ Mdef`
`Â /*Â this+0x12Â */Â shortÂ flee`
`Â /*Â this+0x14Â */Â shortÂ aspd`
`Â /*Â this+0x16Â */Â charÂ name[24]`
`Â /*Â this+0x2eÂ */Â shortÂ level`
`Â /*Â this+0x30Â */Â intÂ hp`
`Â /*Â this+0x34Â */Â intÂ maxHP`
`Â /*Â this+0x38Â */Â intÂ sp`
`Â /*Â this+0x3cÂ */Â intÂ maxSP`
`Â /*Â this+0x40Â */Â longÂ ExpireDate`
`Â /*Â this+0x44Â */Â shortÂ faith`
`Â /*Â this+0x46Â */Â intÂ toal_call_num`
`Â /*Â this+0x4aÂ */Â intÂ approval_monster_kill_counter`
`Â /*Â this+0x4eÂ */Â shortÂ ATKRange`
`}`

0x29c
`structÂ PACKET_ZC_MER_PROPERTYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ atk`
`Â /*Â this+0x4Â */Â shortÂ Matk`
`Â /*Â this+0x6Â */Â shortÂ hit`
`Â /*Â this+0x8Â */Â shortÂ critical`
`Â /*Â this+0xaÂ */Â shortÂ def`
`Â /*Â this+0xcÂ */Â shortÂ Mdef`
`Â /*Â this+0xeÂ */Â shortÂ flee`
`Â /*Â this+0x10Â */Â shortÂ aspd`
`Â /*Â this+0x12Â */Â charÂ name[24]`
`Â /*Â this+0x2aÂ */Â shortÂ level`
`Â /*Â this+0x2cÂ */Â shortÂ hp`
`Â /*Â this+0x2eÂ */Â shortÂ maxHP`
`Â /*Â this+0x30Â */Â shortÂ sp`
`Â /*Â this+0x32Â */Â shortÂ maxSP`
`Â /*Â this+0x34Â */Â longÂ ExpireDate`
`Â /*Â this+0x38Â */Â shortÂ faith`
`Â /*Â this+0x3aÂ */Â intÂ toal_call_num`
`Â /*Â this+0x3eÂ */Â intÂ approval_monster_kill_counter`
`}`

0x29d
`structÂ PACKET_ZC_MER_SKILLINFO_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ SKILLINFOÂ skillList[...]Â {Â //Â SizeÂ 37`
`Â Â Â /*Â this+0x0Â */Â shortÂ SKID`
`Â Â Â /*Â this+0x2Â */Â intÂ type`
`Â Â Â /*Â this+0x6Â */Â shortÂ level`
`Â Â Â /*Â this+0x8Â */Â shortÂ spcost`
`Â Â Â /*Â this+0xaÂ */Â shortÂ attackRange`
`Â Â Â /*Â this+0xcÂ */Â unsignedÂ charÂ skillName[24]`
`Â Â Â /*Â this+0x24Â */Â charÂ upgradable`
`Â }`
`}`

0x29e
`structÂ PACKET_ZC_MER_SKILLINFO_UPDATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â shortÂ level`
`Â /*Â this+0x6Â */Â shortÂ spcost`
`Â /*Â this+0x8Â */Â shortÂ attackRange`
`Â /*Â this+0xaÂ */Â boolÂ upgradable`
`}`

0x29f
`structÂ PACKET_CZ_MER_COMMANDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ command`
`}`

0x2a0
struct UNUSED_PACKET_CZ_MER_USE_SKILL {

`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ selectedLevel`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetID`
`}`

0x2a1
struct UNUSED_PACKET_CZ_MER_UPGRADE_SKILLLEVEL {

`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`}`

0x2a2
`structÂ PACKET_ZC_MER_PAR_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ var`
`Â /*Â this+0x4Â */Â intÂ value`
`}`

0x2a3
`structÂ PACKET_ZC_GAMEGUARD_LINGO_KEYÂ {`
`Â /*Â this+0x0Â */Â shortÂ packetType`
`Â /*Â this+0x2Â */Â structÂ PGG_LINGO_KEY_TEMPÂ lingoKeyÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ dwAlgNum`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ longÂ dwAlgKey1`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ longÂ dwAlgKey2`
`Â Â Â /*Â this+0xcÂ */Â unsignedÂ longÂ dwSeed`
`Â }`
`}`

0x2a5
`structÂ PACKET_CZ_KSY_EVENTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â intÂ count`
`}`

0x2aa
`structÂ PACKET_ZC_REQ_CASH_PASSWORDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Info`
`}`

0x2ab
`structÂ PACKET_CZ_ACK_CASH_PASSWORDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Type`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ Password[16]`
`Â /*Â this+0x14Â */Â unsignedÂ charÂ NewPassword[16]`
`}`

0x2ac
`structÂ PACKET_ZC_RESULT_CASH_PASSWORDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`Â /*Â this+0x4Â */Â shortÂ ErrorCount`
`}`

0x2ad
`structÂ PACKET_AC_REQUEST_SECOND_PASSWORDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ dwSeed`
`}`

0x2b0
`structÂ PACKET_CA_LOGIN_HANÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Version`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ ID[24]`
`Â /*Â this+0x1eÂ */Â unsignedÂ charÂ Passwd[24]`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ clienttype`
`Â /*Â this+0x37Â */Â charÂ m_szIP[16]`
`Â /*Â this+0x47Â */Â unsignedÂ charÂ m_szMacAddr[13]`
`Â /*Â this+0x54Â */Â unsignedÂ charÂ isHanGameUser`
`}`

0x2b1
`structÂ PACKET_ZC_ALL_QUEST_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ questCount`
`Â /*Â this+0x8Â */Â Â structÂ PACKET_ZC_QUEST_INFOÂ QuestList[...]Â {Â //Â SizeÂ 5`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ questID`
`Â Â Â /*Â this+0x4Â */Â boolÂ active`
`Â }`
`}`

0x2b2
`structÂ PACKET_ZC_ALL_QUEST_MISSIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ count`
`Â /*Â this+0x8Â */Â Â structÂ PACKET_ZC_QUEST_MISSION_INFOÂ QuestMissionList[...]Â {Â //Â SizeÂ 104`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ questID`
`Â Â Â /*Â this+0x4Â */Â longÂ quest_svrTime`
`Â Â Â /*Â this+0x8Â */Â longÂ quest_endTime`
`Â Â Â /*Â this+0xcÂ */Â shortÂ count`
`Â Â Â /*Â this+0xeÂ */Â Â structÂ PACKET_ZC_MISSION_HUNTÂ hunt[3]Â {Â //Â SizeÂ 30`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ mobGID`
`Â Â Â Â Â /*Â this+0x4Â */Â shortÂ huntCount`
`Â Â Â Â Â /*Â this+0x6Â */Â charÂ mobName[24]`
`Â Â Â }`
`Â }`
`}`

0x2b3
`structÂ PACKET_ZC_ADD_QUESTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ questID`
`Â /*Â this+0x6Â */Â boolÂ active`
`Â /*Â this+0x7Â */Â longÂ quest_svrTime`
`Â /*Â this+0xbÂ */Â longÂ quest_endTime`
`Â /*Â this+0xfÂ */Â shortÂ count`
`Â /*Â this+0x11Â */Â Â structÂ PACKET_ZC_MISSION_HUNTÂ hunt[3]Â {Â //Â SizeÂ 30`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ mobGID`
`Â Â Â /*Â this+0x4Â */Â shortÂ huntCount`
`Â Â Â /*Â this+0x6Â */Â charÂ mobName[24]`
`Â }`
`}`

0x2b4
`structÂ PACKET_ZC_DEL_QUESTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ questID`
`}`

0x2b5
`structÂ PACKET_ZC_UPDATE_MISSION_HUNTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â shortÂ count`
`Â /*Â this+0x6Â */Â Â structÂ PACKET_MOB_HUNTINGÂ MobHuntList[...]Â {Â //Â SizeÂ 12`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ questID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ longÂ mobGID`
`Â Â Â /*Â this+0x8Â */Â shortÂ maxCount`
`Â Â Â /*Â this+0xaÂ */Â shortÂ count`
`Â }`
`}`

0x2b6
`structÂ PACKET_CZ_ACTIVE_QUESTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ questID`
`Â /*Â this+0x6Â */Â boolÂ active`
`}`

0x2b7
`structÂ PACKET_ZC_ACTIVE_QUESTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ questID`
`Â /*Â this+0x6Â */Â boolÂ active`
`}`

0x2b8
`structÂ PACKET_ZC_ITEM_PICKUP_PARTYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ accountID`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x8Â */Â boolÂ IsIdentified`
`Â /*Â this+0x9Â */Â boolÂ IsDamaged`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xbÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`Â /*Â this+0x13Â */Â unsignedÂ shortÂ location`
`Â /*Â this+0x15Â */Â unsignedÂ charÂ type`
`}`

0x2b9
`structÂ PACKET_ZC_SHORTCUT_KEY_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ ShortCutKeyÂ ShortCutKey[27]Â {Â //Â SizeÂ 7`
`Â Â Â /*Â this+0x0Â */Â charÂ isSkill`
`Â Â Â /*Â this+0x1Â */Â unsignedÂ longÂ ID`
`Â Â Â /*Â this+0x5Â */Â shortÂ count`
`Â }`
`}`

0x2ba
`structÂ PACKET_CZ_SHORTCUT_KEY_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ Index`
`Â /*Â this+0x4Â */Â structÂ ShortCutKeyÂ ShortCutKeyÂ {`
`Â Â Â /*Â this+0x0Â */Â charÂ isSkill`
`Â Â Â /*Â this+0x1Â */Â unsignedÂ longÂ ID`
`Â Â Â /*Â this+0x5Â */Â shortÂ count`
`Â }`
`}`

0x2bb
`structÂ PACKET_ZC_EQUIPITEM_DAMAGEDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ wearLocation`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ accountID`
`}`

0x2bc
`structÂ PACKET_ZC_NOTIFY_PCBANG_PLAYING_TIMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ TimeMinute`
`}`

0x2bf
`structÂ PACKET_ZC_SRPACKETR2_INITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ ProtectFactor`
`Â /*Â this+0x4Â */Â unsignedÂ intÂ DeformSeedFactor`
`Â /*Â this+0x8Â */Â unsignedÂ intÂ DeformAddFactor`
`}`

0x2c0
`structÂ PACKET_CZ_SRPACKETR2_STARTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ ProtectFactor`
`}`

0x2c1
`structÂ PACKET_ZC_NPC_CHATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ accountID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ color`
`Â /*Â this+0xcÂ */Â charÂ msg[...]`
`}`

0x2c2
`structÂ PACKET_ZC_FORMATSTRING_MSGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ msg`
`Â /*Â this+0x6Â */Â charÂ value[...]`
`}`

0x2c4
`structÂ PACKET_CZ_PARTY_JOIN_REQÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ characterName[24]`
`}`

0x2c5
`structÂ PACKET_ZC_PARTY_JOIN_REQ_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ characterName[24]`
`Â /*Â this+0x1aÂ */Â longÂ answer`
`}`

0x2c6
`structÂ PACKET_ZC_PARTY_JOIN_REQÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GRID`
`Â /*Â this+0x6Â */Â charÂ groupName[24]`
`}`

0x2c7
`structÂ PACKET_CZ_PARTY_JOIN_REQ_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GRID`
`Â /*Â this+0x6Â */Â boolÂ bAccept`
`}`

0x2c8
`structÂ PACKET_CZ_PARTY_CONFIGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â boolÂ bRefuseJoinMsg`
`}`

0x2c9
`structÂ PACKET_ZC_PARTY_CONFIGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â boolÂ bRefuseJoinMsg`
`}`

0x2ca
`structÂ PACKET_HC_REFUSE_SELECTCHARÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ ErrorCode`
`}`

0x2cb
`structÂ PACKET_ZC_MEMORIALDUNGEON_SUBSCRIPTION_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ MemorialDungeonName[61]`
`Â /*Â this+0x3fÂ */Â shortÂ PriorityOrderNum`
`}`

0x2cc
`structÂ PACKET_ZC_MEMORIALDUNGEON_SUBSCRIPTION_NOTIFYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PriorityOrderNum`
`}`

0x2cd
`structÂ PACKET_ZC_MEMORIALDUNGEON_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ MemorialDungeonName[61]`
`Â /*Â this+0x3fÂ */Â unsignedÂ longÂ DestroyDate`
`Â /*Â this+0x43Â */Â unsignedÂ longÂ EnterTimeOutDate`
`}`

0x2ce
`structÂ PACKET_ZC_MEMORIALDUNGEON_NOTIFYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â longÂ Type`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ EnterLimitDate`
`}`

0x2cf
`structÂ PACKET_CZ_MEMORIALDUNGEON_COMMANDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â longÂ Command`
`}`

0x2d0
`structÂ PACKET_ZC_EQUIPMENT_ITEMLIST3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFO301Â ItemInfo[...]Â {Â //Â SizeÂ 28`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x14Â */Â longÂ HireExpireDate`
`Â Â Â /*Â this+0x18Â */Â unsignedÂ shortÂ bindOnEquipType`
`Â Â Â /*Â this+0x1aÂ */Â unsignedÂ shortÂ wItemSpriteNumber`
`Â }`
`}`

0x2d1
`structÂ PACKET_ZC_STORE_EQUIPMENT_ITEMLIST3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFO301Â ItemInfo[...]Â {Â //Â SizeÂ 28`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x14Â */Â longÂ HireExpireDate`
`Â Â Â /*Â this+0x18Â */Â unsignedÂ shortÂ bindOnEquipType`
`Â Â Â /*Â this+0x1aÂ */Â unsignedÂ shortÂ wItemSpriteNumber`
`Â }`
`}`

0x2d2
`structÂ PACKET_ZC_CART_EQUIPMENT_ITEMLIST3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ EQUIPMENTITEM_EXTRAINFO301Â ItemInfo[...]Â {Â //Â SizeÂ 28`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x14Â */Â longÂ HireExpireDate`
`Â Â Â /*Â this+0x18Â */Â unsignedÂ shortÂ bindOnEquipType`
`Â Â Â /*Â this+0x1aÂ */Â unsignedÂ shortÂ wItemSpriteNumber`
`Â }`
`}`

0x2d3
`structÂ PACKET_ZC_NOTIFY_BIND_ON_EQUIPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`}`

0x2d4
`structÂ PACKET_ZC_ITEM_PICKUP_ACK3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ Index`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ count`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x8Â */Â boolÂ IsIdentified`
`Â /*Â this+0x9Â */Â boolÂ IsDamaged`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xbÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`Â /*Â this+0x13Â */Â unsignedÂ shortÂ location`
`Â /*Â this+0x15Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x16Â */Â unsignedÂ charÂ result`
`Â /*Â this+0x17Â */Â longÂ HireExpireDate`
`Â /*Â this+0x1bÂ */Â unsignedÂ shortÂ bindOnEquipType`
`}`

0x2d5
`structÂ PACKET_ZC_ISVR_DISCONNECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x2d6
`structÂ PACKET_CZ_EQUIPWIN_MICROSCOPEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x2d7
`structÂ PACKET_ZC_EQUIPWIN_MICROSCOPEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ characterName[24]`
`Â /*Â this+0x1cÂ */Â shortÂ job`
`Â /*Â this+0x1eÂ */Â shortÂ head`
`Â /*Â this+0x20Â */Â shortÂ accessory`
`Â /*Â this+0x22Â */Â shortÂ accessory2`
`Â /*Â this+0x24Â */Â shortÂ accessory3`
`Â /*Â this+0x26Â */Â shortÂ headpalette`
`Â /*Â this+0x28Â */Â shortÂ bodypalette`
`Â /*Â this+0x2aÂ */Â unsignedÂ charÂ sex`
`Â /*Â this+0x2bÂ */Â structÂ EQUIPMENTITEM_EXTRAINFO301Â ItemInfo[...]Â {Â //Â SizeÂ 28`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ location`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ RefiningLevel`
`Â Â Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x14Â */Â longÂ HireExpireDate`
`Â Â Â /*Â this+0x18Â */Â unsignedÂ shortÂ bindOnEquipType`
`Â Â Â /*Â this+0x1aÂ */Â unsignedÂ shortÂ wItemSpriteNumber`
`Â }`
`}`

0x2d8
`structÂ PACKET_CZ_CONFIGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â longÂ Config`
`Â /*Â this+0x6Â */Â intÂ Value`
`}`

0x2d9
`structÂ PACKET_ZC_CONFIGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â longÂ Config`
`Â /*Â this+0x6Â */Â intÂ Value`
`}`

0x2da
`structÂ PACKET_ZC_CONFIG_NOTIFYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â boolÂ bOpenEquipmentWin`
`}`

0x2db
`structÂ PACKET_CZ_BATTLEFIELD_CHATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â charÂ msg[...]`
`}`

0x2dc
`structÂ PACKET_ZC_BATTLEFIELD_CHATÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ accountID`
`Â /*Â this+0x8Â */Â charÂ name[24]`
`Â /*Â this+0x20Â */Â charÂ msg[...]`
`}`

0x2dd
`structÂ PACKET_ZC_BATTLEFIELD_NOTIFY_CAMPINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ accountID`
`Â /*Â this+0x6Â */Â charÂ name[24]`
`Â /*Â this+0x1eÂ */Â shortÂ camp`
`}`

0x2de
`structÂ PACKET_ZC_BATTLEFIELD_NOTIFY_POINTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ pointCampA`
`Â /*Â this+0x4Â */Â shortÂ pointCampB`
`}`

0x2df
`structÂ PACKET_ZC_BATTLEFIELD_NOTIFY_POSITIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ accountID`
`Â /*Â this+0x6Â */Â charÂ name[24]`
`Â /*Â this+0x1eÂ */Â unsignedÂ shortÂ job`
`Â /*Â this+0x20Â */Â shortÂ x`
`Â /*Â this+0x22Â */Â shortÂ y`
`}`

0x2e0
`structÂ PACKET_ZC_BATTLEFIELD_NOTIFY_HPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ accountID`
`Â /*Â this+0x6Â */Â charÂ name[24]`
`Â /*Â this+0x1eÂ */Â shortÂ hp`
`Â /*Â this+0x20Â */Â shortÂ maxHp`
`}`

0x2e1
`structÂ PACKET_ZC_NOTIFY_ACT2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetGID`
`Â /*Â this+0xaÂ */Â unsignedÂ longÂ startTime`
`Â /*Â this+0xeÂ */Â intÂ attackMT`
`Â /*Â this+0x12Â */Â intÂ attackedMT`
`Â /*Â this+0x16Â */Â intÂ damage`
`Â /*Â this+0x1aÂ */Â shortÂ count`
`Â /*Â this+0x1cÂ */Â unsignedÂ charÂ action`
`Â /*Â this+0x1dÂ */Â intÂ leftDamage`
`}`

0x2e6
`structÂ PACKET_CZ_BOT_CHECKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ IsBot`
`}`

0x2e7
`structÂ PACKET_ZC_MAPPROPERTYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â shortÂ type`
`Â /*Â this+0x6Â */Â intÂ mapInfoTable[...]`
`}`

0x2e8
`structÂ PACKET_ZC_NORMAL_ITEMLIST3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFO3Â ItemInfo[...]Â {Â //Â SizeÂ 22`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x12Â */Â longÂ HireExpireDate`
`Â }`
`}`

0x2e9
`structÂ PACKET_ZC_CART_NORMAL_ITEMLIST3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFO3Â ItemInfo[...]Â {Â //Â SizeÂ 22`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x12Â */Â longÂ HireExpireDate`
`Â }`
`}`

0x2ea
`structÂ PACKET_ZC_STORE_NORMAL_ITEMLIST3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ NORMALITEM_EXTRAINFO3Â ItemInfo[...]Â {Â //Â SizeÂ 22`
`Â Â Â /*Â this+0x0Â */Â shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x5Â */Â boolÂ IsIdentified`
`Â Â Â /*Â this+0x6Â */Â shortÂ count`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ shortÂ WearState`
`Â Â Â /*Â this+0xaÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â Â Â /*Â this+0x12Â */Â longÂ HireExpireDate`
`Â }`
`}`

0x2eb
`structÂ PACKET_ZC_ACCEPT_ENTER2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ startTime`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x9Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0xaÂ */Â unsignedÂ charÂ ySize`
`Â /*Â this+0xbÂ */Â shortÂ font`
`}`

0x2ec
`structÂ PACKET_ZC_NOTIFY_MOVEENTRY4Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ objecttype`
`Â /*Â this+0x3Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x7Â */Â shortÂ speed`
`Â /*Â this+0x9Â */Â shortÂ bodyState`
`Â /*Â this+0xbÂ */Â shortÂ healthState`
`Â /*Â this+0xdÂ */Â intÂ effectState`
`Â /*Â this+0x11Â */Â shortÂ job`
`Â /*Â this+0x13Â */Â shortÂ head`
`Â /*Â this+0x15Â */Â intÂ weapon`
`Â /*Â this+0x19Â */Â shortÂ accessory`
`Â /*Â this+0x1bÂ */Â unsignedÂ longÂ moveStartTime`
`Â /*Â this+0x1fÂ */Â shortÂ accessory2`
`Â /*Â this+0x21Â */Â shortÂ accessory3`
`Â /*Â this+0x23Â */Â shortÂ headpalette`
`Â /*Â this+0x25Â */Â shortÂ bodypalette`
`Â /*Â this+0x27Â */Â shortÂ headDir`
`Â /*Â this+0x29Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x2dÂ */Â shortÂ GEmblemVer`
`Â /*Â this+0x2fÂ */Â shortÂ honor`
`Â /*Â this+0x31Â */Â intÂ virtue`
`Â /*Â this+0x35Â */Â boolÂ isPKModeON`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x37Â */Â unsignedÂ charÂ MoveData[6]`
`Â /*Â this+0x3dÂ */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x3eÂ */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x3fÂ */Â shortÂ clevel`
`Â /*Â this+0x41Â */Â shortÂ font`
`}`

0x2ed
`structÂ PACKET_ZC_NOTIFY_NEWENTRY4Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â intÂ effectState`
`Â /*Â this+0x10Â */Â shortÂ job`
`Â /*Â this+0x12Â */Â shortÂ head`
`Â /*Â this+0x14Â */Â intÂ weapon`
`Â /*Â this+0x18Â */Â shortÂ accessory`
`Â /*Â this+0x1aÂ */Â shortÂ accessory2`
`Â /*Â this+0x1cÂ */Â shortÂ accessory3`
`Â /*Â this+0x1eÂ */Â shortÂ headpalette`
`Â /*Â this+0x20Â */Â shortÂ bodypalette`
`Â /*Â this+0x22Â */Â shortÂ headDir`
`Â /*Â this+0x24Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x28Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x2aÂ */Â shortÂ honor`
`Â /*Â this+0x2cÂ */Â intÂ virtue`
`Â /*Â this+0x30Â */Â boolÂ isPKModeON`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x35Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x37Â */Â shortÂ clevel`
`Â /*Â this+0x39Â */Â shortÂ font`
`}`

0x2ee
`structÂ PACKET_ZC_NOTIFY_STANDENTRY4Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â shortÂ speed`
`Â /*Â this+0x8Â */Â shortÂ bodyState`
`Â /*Â this+0xaÂ */Â shortÂ healthState`
`Â /*Â this+0xcÂ */Â intÂ effectState`
`Â /*Â this+0x10Â */Â shortÂ job`
`Â /*Â this+0x12Â */Â shortÂ head`
`Â /*Â this+0x14Â */Â intÂ weapon`
`Â /*Â this+0x18Â */Â shortÂ accessory`
`Â /*Â this+0x1aÂ */Â shortÂ accessory2`
`Â /*Â this+0x1cÂ */Â shortÂ accessory3`
`Â /*Â this+0x1eÂ */Â shortÂ headpalette`
`Â /*Â this+0x20Â */Â shortÂ bodypalette`
`Â /*Â this+0x22Â */Â shortÂ headDir`
`Â /*Â this+0x24Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x28Â */Â shortÂ GEmblemVer`
`Â /*Â this+0x2aÂ */Â shortÂ honor`
`Â /*Â this+0x2cÂ */Â intÂ virtue`
`Â /*Â this+0x30Â */Â boolÂ isPKModeON`
`Â /*Â this+0x31Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x32Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x35Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x36Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x37Â */Â unsignedÂ charÂ state`
`Â /*Â this+0x38Â */Â shortÂ clevel`
`Â /*Â this+0x3aÂ */Â shortÂ font`
`}`

0x2ef
`structÂ PACKET_ZC_NOTIFY_FONTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ font`
`}`

0x2f0
`structÂ PACKET_ZC_PROGRESSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ color`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ time`
`}`

0x2f1
`structÂ PACKET_CZ_PROGRESSÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x2f2
`structÂ PACKET_ZC_PROGRESS_CANCELÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x35c
`structÂ PACKET_CZ_OPEN_SIMPLE_CASHSHOP_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x35d
`structÂ PACKET_ZC_SIMPLE_CASHSHOP_POINT_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ CashPoint`
`Â /*Â this+0x8Â */Â shortÂ md_itemcount`
`Â /*Â this+0xaÂ */Â shortÂ md_itemSize`
`Â /*Â this+0xcÂ */Â shortÂ best_itemcount`
`Â /*Â this+0xeÂ */Â shortÂ best_itemsize`
`Â /*Â this+0x10Â */Â structÂ PURCHASE_ITEMÂ ItemList[...]Â {Â //Â SizeÂ 11`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â intÂ discountprice`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x9Â */Â unsignedÂ shortÂ ITID`
`Â }`
`}`

0x35e
`structÂ PACKET_CZ_CLOSE_WINDOWÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x3dd
`structÂ PACKET_AHC_GAME_GUARDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AuthData[4]`
`}`

0x3de
`structÂ PACKET_CAH_ACK_GAME_GUARDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AuthData[4]`
`}`

0x436
`structÂ PACKET_CZ_ENTER2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0xaÂ */Â intÂ AuthCode`
`Â /*Â this+0xeÂ */Â unsignedÂ longÂ clientTime`
`Â /*Â this+0x12Â */Â unsignedÂ charÂ Sex`
`}`

0x437
`structÂ PACKET_CZ_REQUEST_ACT2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ targetGID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ action`
`}`

0x438
`structÂ PACKET_CZ_USE_SKILL2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ selectedLevel`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetID`
`}`

0x439
`structÂ PACKET_CZ_USE_ITEM2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`}`

0x43d
`structÂ PACKET_ZC_SKILL_POSTDELAYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ DelayTM`
`}`

0x43e
`structÂ PACKET_ZC_SKILL_POSTDELAY_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ SKILL_POSTDELAYÂ delayList[...]Â {Â //Â SizeÂ 6`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ SKID`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ longÂ DelayTM`
`Â }`
`}`

0x43f
`structÂ PACKET_ZC_MSG_STATE_CHANGE2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â boolÂ state`
`Â /*Â this+0x9Â */Â unsignedÂ longÂ RemainMS`
`Â /*Â this+0xdÂ */Â intÂ val[3]`
`}`

0x440
`structÂ PACKET_ZC_MILLENNIUMSHIELDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â shortÂ num`
`Â /*Â this+0x8Â */Â shortÂ state`
`}`

0x441
`structÂ PACKET_ZC_SKILLINFO_DELETEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`}`

0x442
`structÂ PACKET_ZC_SKILL_SELECT_REQUESTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â longÂ why`
`Â /*Â this+0x8Â */Â unsignedÂ shortÂ SKIDList[...]`
`}`

0x443
`structÂ PACKET_CZ_SKILL_SELECT_RESPONSEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â longÂ why`
`Â /*Â this+0x6Â */Â unsignedÂ shortÂ SKID`
`}`

0x444
`structÂ PACKET_ZC_SIMPLE_CASH_POINT_ITEMLISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ CashPoint`
`Â /*Â this+0x8Â */Â structÂ PURCHASE_ITEMÂ ItemList[...]Â {Â //Â SizeÂ 11`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â intÂ discountprice`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x9Â */Â unsignedÂ shortÂ ITID`
`Â }`
`}`

0x445
`structÂ PACKET_CZ_SIMPLE_BUY_CASH_POINT_ITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x4Â */Â shortÂ count`
`}`

0x446
`structÂ PACKET_ZC_QUEST_NOTIFY_EFFECTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ npcID`
`Â /*Â this+0x6Â */Â shortÂ xPos`
`Â /*Â this+0x8Â */Â shortÂ yPos`
`Â /*Â this+0xaÂ */Â shortÂ effect`
`Â /*Â this+0xcÂ */Â shortÂ type`
`}`

0x447
`structÂ PACKET_CZ_BLOCKING_PLAY_CANCELÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x448
`structÂ PACKET_HC_CHARACTER_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â structÂ CHARACTER_LISTÂ CharacterList[...]Â {Â //Â SizeÂ 5`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ dwGID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ charÂ SlotIdx`
`Â }`
`}`

0x449
`structÂ PACKET_ZC_HACKSH_ERROR_MSGÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ ErrorID`
`}`

0x44a
`structÂ PACKET_CZ_CLIENT_VERSIONÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â longÂ clientVer`
`}`

0x44b
`structÂ PACKET_CZ_CLOSE_SIMPLECASH_SHOPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x7d0
`structÂ PACKET_ZC_ES_RESULTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ esNo`
`Â /*Â this+0x4Â */Â shortÂ esMsg`
`}`

0x7d1
`structÂ PACKET_CZ_ES_GET_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x7d2
`structÂ PACKET_ZC_ES_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â shortÂ Count`
`}`

0x7d3
`structÂ PACKET_CZ_ES_CHOOSEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ esNo`
`}`

0x7d4
`structÂ PACKET_CZ_ES_CANCELÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ esNo`
`}`

0x7d5
`structÂ PACKET_ZC_ES_READYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ esNo`
`}`

0x7d6
`structÂ PACKET_ZC_ES_GOTOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ esNo`
`}`

0x7d7
`structÂ PACKET_CZ_GROUPINFO_CHANGE_V2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ expOption`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ ItemPickupRule`
`Â /*Â this+0x7Â */Â unsignedÂ charÂ ItemDivisionRule`
`}`

0x7d8
`structÂ PACKET_ZC_REQ_GROUPINFO_CHANGE_V2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ expOption`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ ItemPickupRule`
`Â /*Â this+0x7Â */Â unsignedÂ charÂ ItemDivisionRule`
`}`

0x7d9
`structÂ PACKET_ZC_SHORTCUT_KEY_LIST_V2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ ShortCutKeyÂ ShortCutKey[38]Â {Â //Â SizeÂ 7`
`Â Â Â /*Â this+0x0Â */Â charÂ isSkill`
`Â Â Â /*Â this+0x1Â */Â unsignedÂ longÂ ID`
`Â Â Â /*Â this+0x5Â */Â shortÂ count`
`Â }`
`}`

0x7da
`structÂ PACKET_CZ_CHANGE_GROUP_MASTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`}`

0x7db
`structÂ PACKET_ZC_HO_PAR_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ var`
`Â /*Â this+0x4Â */Â intÂ value`
`}`

0x7dc
`structÂ PACKET_CZ_SEEK_PARTYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Option`
`}`

0x7dd
`structÂ PACKET_ZC_SEEK_PARTYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Name[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ longÂ Job`
`Â /*Â this+0x1eÂ */Â unsignedÂ longÂ Level`
`Â /*Â this+0x22Â */Â charÂ mapName[16]`
`Â /*Â this+0x32Â */Â unsignedÂ longÂ Option`
`}`

0x7de
`structÂ PACKET_CZ_SEEK_PARTY_MEMBERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Job`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ Level`
`Â /*Â this+0xaÂ */Â charÂ mapName[16]`
`Â /*Â this+0x1aÂ */Â unsignedÂ longÂ Option`
`}`

0x7df
`structÂ PACKET_ZC_SEEK_PARTY_MEMBERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Name[24]`
`Â /*Â this+0x1aÂ */Â unsignedÂ longÂ Job`
`Â /*Â this+0x1eÂ */Â unsignedÂ longÂ Level`
`Â /*Â this+0x22Â */Â charÂ mapName[16]`
`Â /*Â this+0x32Â */Â unsignedÂ longÂ Option`
`}`

0x7e0
`structÂ PACKET_ZC_ES_NOTI_MYINFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ esNo`
`Â /*Â this+0x4Â */Â charÂ esname[54]`
`}`

0x7e1
`structÂ PACKET_ZC_SKILLINFO_UPDATE2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â intÂ type`
`Â /*Â this+0x8Â */Â shortÂ level`
`Â /*Â this+0xaÂ */Â shortÂ spcost`
`Â /*Â this+0xcÂ */Â shortÂ attackRange`
`Â /*Â this+0xeÂ */Â boolÂ upgradable`
`}`

0x7e2
`structÂ PACKET_ZC_MSG_VALUEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ msg`
`Â /*Â this+0x4Â */Â intÂ value`
`}`

0x7e3
`structÂ PACKET_ZC_ITEMLISTWIN_OPENÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â longÂ Type`
`}`

0x7e4
`structÂ PACKET_CZ_ITEMLISTWIN_RESÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â longÂ Type`
`Â /*Â this+0x8Â */Â longÂ Action`
`Â /*Â this+0xcÂ */Â unsignedÂ shortÂ MaterialList`
`}`

0x7e5
`structÂ PACKET_CH_ENTER_CHECKBOTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ dwAID`
`Â /*Â this+0x8Â */Â charÂ szStringInfo[...]`
`}`

0x7e6
`structÂ PACKET_ZC_MSG_SKILLÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x4Â */Â intÂ MSGID`
`}`

0x7e7
`structÂ PACKET_CH_CHECKBOTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ dwAID`
`Â /*Â this+0x8Â */Â charÂ szStringInfo[24]`
`}`

0x7e8
`structÂ PACKET_HC_CHECKBOTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ img[...]`
`}`

0x7e9
`structÂ PACKET_HC_CHECKBOT_RESULTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ Result`
`}`

0x7ea
`structÂ PACKET_CZ_BATTLE_FIELD_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x7eb
`structÂ PACKET_ZC_BATTLE_FIELD_LISTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â shortÂ Count`
`Â /*Â this+0x6Â */Â shortÂ ack_type`
`Â /*Â this+0x8Â */Â structÂ BATTLE_FIELD_INFOÂ InfoList[...]Â {Â //Â SizeÂ 62`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ BFNO`
`Â Â Â /*Â this+0x4Â */Â charÂ BattleFieldName[56]`
`Â Â Â /*Â this+0x3cÂ */Â shortÂ JoinTeam`
`Â }`
`}`

0x7ec
`structÂ PACKET_CZ_JOIN_BATTLE_FIELDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ BFNO`
`Â /*Â this+0x6Â */Â shortÂ JoinTeam`
`}`

0x7ed
`structÂ PACKET_ZC_JOIN_BATTLE_FIELDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ BFNO`
`Â /*Â this+0x6Â */Â shortÂ JoinTeam`
`Â /*Â this+0x8Â */Â shortÂ Result`
`}`

0x7ee
`structÂ PACKET_CZ_CANCEL_BATTLE_FIELDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ BFNO`
`}`

0x7ef
`structÂ PACKET_ZC_CANCEL_BATTLE_FIELDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ BFNO`
`Â /*Â this+0x6Â */Â shortÂ Result`
`}`

0x7f0
`structÂ PACKET_CZ_REQ_BATTLE_STATE_MONITORÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ BFNO`
`Â /*Â this+0x6Â */Â shortÂ PowerSwitch`
`}`

0x7f1
`structÂ PACKET_ZC_ACK_BATTLE_STATE_MONITORÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ BFNO`
`Â /*Â this+0x6Â */Â shortÂ PlayCount`
`Â /*Â this+0x8Â */Â shortÂ BattleState`
`Â /*Â this+0xaÂ */Â shortÂ TeamCount_A`
`Â /*Â this+0xcÂ */Â shortÂ TeamCount_B`
`Â /*Â this+0xeÂ */Â shortÂ MyCount`
`Â /*Â this+0x10Â */Â shortÂ JoinTeam`
`}`

0x7f2
`structÂ PACKET_ZC_BATTLE_NOTI_START_STEPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ BFNO`
`Â /*Â this+0x6Â */Â shortÂ Result`
`}`

0x7f3
`structÂ PACKET_ZC_BATTLE_JOIN_NOTI_DEFERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ BFNO`
`}`

0x7f4
`structÂ PACKET_ZC_BATTLE_JOIN_DISABLE_STATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â boolÂ Enable`
`}`

0x7f5
`structÂ PACKET_CZ_GM_FULLSTRIPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ TargetAID`
`}`

0x7f6
`structÂ PACKET_ZC_NOTIFY_EXPÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ amount`
`Â /*Â this+0xaÂ */Â unsignedÂ shortÂ varID`
`Â /*Â this+0xcÂ */Â shortÂ expType`
`}`

0x7f7
`structÂ PACKET_ZC_NOTIFY_MOVEENTRY7Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ objecttype`
`Â /*Â this+0x5Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x9Â */Â shortÂ speed`
`Â /*Â this+0xbÂ */Â shortÂ bodyState`
`Â /*Â this+0xdÂ */Â shortÂ healthState`
`Â /*Â this+0xfÂ */Â intÂ effectState`
`Â /*Â this+0x13Â */Â shortÂ job`
`Â /*Â this+0x15Â */Â shortÂ head`
`Â /*Â this+0x17Â */Â intÂ weapon`
`Â /*Â this+0x1bÂ */Â shortÂ accessory`
`Â /*Â this+0x1dÂ */Â unsignedÂ longÂ moveStartTime`
`Â /*Â this+0x21Â */Â shortÂ accessory2`
`Â /*Â this+0x23Â */Â shortÂ accessory3`
`Â /*Â this+0x25Â */Â shortÂ headpalette`
`Â /*Â this+0x27Â */Â shortÂ bodypalette`
`Â /*Â this+0x29Â */Â shortÂ headDir`
`Â /*Â this+0x2bÂ */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x2fÂ */Â shortÂ GEmblemVer`
`Â /*Â this+0x31Â */Â shortÂ honor`
`Â /*Â this+0x33Â */Â intÂ virtue`
`Â /*Â this+0x37Â */Â boolÂ isPKModeON`
`Â /*Â this+0x38Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x39Â */Â unsignedÂ charÂ MoveData[6]`
`Â /*Â this+0x3fÂ */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x40Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x41Â */Â shortÂ clevel`
`Â /*Â this+0x43Â */Â shortÂ font`
`Â /*Â this+0x45Â */Â unsignedÂ charÂ name[24]`
`}`

0x7f8
`structÂ PACKET_ZC_NOTIFY_NEWENTRY5Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ objecttype`
`Â /*Â this+0x5Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x9Â */Â shortÂ speed`
`Â /*Â this+0xbÂ */Â shortÂ bodyState`
`Â /*Â this+0xdÂ */Â shortÂ healthState`
`Â /*Â this+0xfÂ */Â intÂ effectState`
`Â /*Â this+0x13Â */Â shortÂ job`
`Â /*Â this+0x15Â */Â shortÂ head`
`Â /*Â this+0x17Â */Â intÂ weapon`
`Â /*Â this+0x1bÂ */Â shortÂ accessory`
`Â /*Â this+0x1dÂ */Â shortÂ accessory2`
`Â /*Â this+0x1fÂ */Â shortÂ accessory3`
`Â /*Â this+0x21Â */Â shortÂ headpalette`
`Â /*Â this+0x23Â */Â shortÂ bodypalette`
`Â /*Â this+0x25Â */Â shortÂ headDir`
`Â /*Â this+0x27Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x2bÂ */Â shortÂ GEmblemVer`
`Â /*Â this+0x2dÂ */Â shortÂ honor`
`Â /*Â this+0x2fÂ */Â intÂ virtue`
`Â /*Â this+0x33Â */Â boolÂ isPKModeON`
`Â /*Â this+0x34Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x35Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x38Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x39Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x3aÂ */Â shortÂ clevel`
`Â /*Â this+0x3cÂ */Â shortÂ font`
`Â /*Â this+0x3eÂ */Â unsignedÂ charÂ name[24]`
`}`

0x7f9
`structÂ PACKET_ZC_NOTIFY_STANDENTRY5Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ objecttype`
`Â /*Â this+0x5Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x9Â */Â shortÂ speed`
`Â /*Â this+0xbÂ */Â shortÂ bodyState`
`Â /*Â this+0xdÂ */Â shortÂ healthState`
`Â /*Â this+0xfÂ */Â intÂ effectState`
`Â /*Â this+0x13Â */Â shortÂ job`
`Â /*Â this+0x15Â */Â shortÂ head`
`Â /*Â this+0x17Â */Â intÂ weapon`
`Â /*Â this+0x1bÂ */Â shortÂ accessory`
`Â /*Â this+0x1dÂ */Â shortÂ accessory2`
`Â /*Â this+0x1fÂ */Â shortÂ accessory3`
`Â /*Â this+0x21Â */Â shortÂ headpalette`
`Â /*Â this+0x23Â */Â shortÂ bodypalette`
`Â /*Â this+0x25Â */Â shortÂ headDir`
`Â /*Â this+0x27Â */Â unsignedÂ longÂ GUID`
`Â /*Â this+0x2bÂ */Â shortÂ GEmblemVer`
`Â /*Â this+0x2dÂ */Â shortÂ honor`
`Â /*Â this+0x2fÂ */Â intÂ virtue`
`Â /*Â this+0x33Â */Â boolÂ isPKModeON`
`Â /*Â this+0x34Â */Â unsignedÂ charÂ sex`
`Â /*Â this+0x35Â */Â unsignedÂ charÂ PosDir[3]`
`Â /*Â this+0x38Â */Â unsignedÂ charÂ xSize`
`Â /*Â this+0x39Â */Â unsignedÂ charÂ ySize`
`Â /*Â this+0x3aÂ */Â unsignedÂ charÂ state`
`Â /*Â this+0x3bÂ */Â shortÂ clevel`
`Â /*Â this+0x3dÂ */Â shortÂ font`
`Â /*Â this+0x3fÂ */Â unsignedÂ charÂ name[24]`
`}`

0x7fa
`structÂ PACKET_ZC_DELETE_ITEM_FROM_BODYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ DeleteType`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ Index`
`Â /*Â this+0x6Â */Â shortÂ Count`
`}`

0x7fb
`structÂ PACKET_ZC_USESKILL_ACK2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ targetID`
`Â /*Â this+0xaÂ */Â shortÂ xPos`
`Â /*Â this+0xcÂ */Â shortÂ yPos`
`Â /*Â this+0xeÂ */Â unsignedÂ shortÂ SKID`
`Â /*Â this+0x10Â */Â unsignedÂ longÂ property`
`Â /*Â this+0x14Â */Â unsignedÂ longÂ delayTime`
`Â /*Â this+0x18Â */Â boolÂ isDisposable`
`}`

0x7fc
`structÂ PACKET_ZC_CHANGE_GROUP_MASTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ OldMasterAID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ NewMasterAID`
`}`

0x7fe
`structÂ PACKET_ZC_PLAY_NPC_BGMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ Bgm[24]`
`}`

0x7ff
`structÂ PACKET_ZC_DEFINE_CHECKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â intÂ Result`
`}`

0x800
`structÂ PACKET_ZC_PC_PURCHASE_ITEMLIST_FROMMC2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ UniqueID`
`Â /*Â this+0xcÂ */Â structÂ PURCHASE_ITEM_FROMMCÂ itemList[...]Â {Â //Â SizeÂ 22`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â shortÂ count`
`Â Â Â /*Â this+0x6Â */Â shortÂ index`
`Â Â Â /*Â this+0x8Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x9Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0xbÂ */Â unsignedÂ charÂ IsIdentified`
`Â Â Â /*Â this+0xcÂ */Â unsignedÂ charÂ IsDamaged`
`Â Â Â /*Â this+0xdÂ */Â unsignedÂ charÂ refiningLevel`
`Â Â Â /*Â this+0xeÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â Â Â }`
`Â }`
`}`

0x801
`structÂ PACKET_CZ_PC_PURCHASE_ITEMLIST_FROMMC2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ UniqueID`
`Â /*Â this+0xcÂ */Â structÂ CZ_PURCHASE_ITEM_FROMMCÂ itemList[...]Â {Â //Â SizeÂ 4`
`Â Â Â /*Â this+0x0Â */Â shortÂ count`
`Â Â Â /*Â this+0x2Â */Â shortÂ index`
`Â }`
`}`

0x802
`structÂ PACKET_CZ_PARTY_BOOKING_REQ_REGISTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ PARTY_BOOKING_DETAILÂ RegisterInfoÂ {`
`Â Â Â /*Â this+0x0Â */Â shortÂ Level`
`Â Â Â /*Â this+0x2Â */Â shortÂ MapID`
`Â Â Â /*Â this+0x4Â */Â shortÂ Job[6]`
`Â }`
`}`

0x803
`structÂ PACKET_ZC_PARTY_BOOKING_ACK_REGISTERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`}`

0x804
`structÂ PACKET_CZ_PARTY_BOOKING_REQ_SEARCHÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Level`
`Â /*Â this+0x4Â */Â shortÂ MapID`
`Â /*Â this+0x6Â */Â shortÂ Job`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ LastIndex`
`Â /*Â this+0xcÂ */Â shortÂ ResultCount`
`}`

0x805
`structÂ PACKET_ZC_PARTY_BOOKING_ACK_SEARCHÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â boolÂ IsExistMoreResult`
`Â /*Â this+0x5Â */Â structÂ PARTY_BOOKING_AD_INFOÂ Info[...]Â {Â //Â SizeÂ 48`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ Index`
`Â Â Â /*Â this+0x4Â */Â charÂ CharName[24]`
`Â Â Â /*Â this+0x1cÂ */Â longÂ ExpireTime`
`Â Â Â /*Â this+0x20Â */Â structÂ PARTY_BOOKING_DETAILÂ DetailÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â shortÂ Level`
`Â Â Â Â Â /*Â this+0x2Â */Â shortÂ MapID`
`Â Â Â Â Â /*Â this+0x4Â */Â shortÂ Job[6]`
`Â Â Â }`
`Â }`
`}`

0x806
`structÂ PACKET_CZ_PARTY_BOOKING_REQ_DELETEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x807
`structÂ PACKET_ZC_PARTY_BOOKING_ACK_DELETEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`}`

0x808
`structÂ PACKET_CZ_PARTY_BOOKING_REQ_UPDATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Job[6]`
`}`

0x809
`structÂ PACKET_ZC_PARTY_BOOKING_NOTIFY_INSERTÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â structÂ PARTY_BOOKING_AD_INFOÂ InfoÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ longÂ Index`
`Â Â Â /*Â this+0x4Â */Â charÂ CharName[24]`
`Â Â Â /*Â this+0x1cÂ */Â longÂ ExpireTime`
`Â Â Â /*Â this+0x20Â */Â structÂ PARTY_BOOKING_DETAILÂ DetailÂ {`
`Â Â Â Â Â /*Â this+0x0Â */Â shortÂ Level`
`Â Â Â Â Â /*Â this+0x2Â */Â shortÂ MapID`
`Â Â Â Â Â /*Â this+0x4Â */Â shortÂ Job1`
`Â Â Â Â Â /*Â this+0x6Â */Â shortÂ Job2`
`Â Â Â Â Â /*Â this+0x8Â */Â shortÂ Job3`
`Â Â Â Â Â /*Â this+0xaÂ */Â shortÂ Job4`
`Â Â Â Â Â /*Â this+0xcÂ */Â shortÂ Job5`
`Â Â Â Â Â /*Â this+0xeÂ */Â shortÂ Job6`
`Â Â Â }`
`Â }`
`}`

0x80a
`structÂ PACKET_ZC_PARTY_BOOKING_NOTIFY_UPDATEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Index`
`Â /*Â this+0x6Â */Â shortÂ Job1`
`Â /*Â this+0x8Â */Â shortÂ Job2`
`Â /*Â this+0xaÂ */Â shortÂ Job3`
`Â /*Â this+0xcÂ */Â shortÂ Job4`
`Â /*Â this+0xeÂ */Â shortÂ Job5`
`Â /*Â this+0x10Â */Â shortÂ Job6`
`}`

0x80b
`structÂ PACKET_ZC_PARTY_BOOKING_NOTIFY_DELETEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ Index`
`}`

0x80c
`structÂ PACKET_CZ_SIMPLE_CASH_BTNSHOWÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x80d
`structÂ PACKET_ZC_SIMPLE_CASH_BTNSHOWÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â boolÂ show`
`}`

0x80e
`structÂ PACKET_ZC_NOTIFY_HP_TO_GROUPM_R2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â intÂ hp`
`Â /*Â this+0xaÂ */Â intÂ maxhp`
`}`

0x80f
`structÂ PACKET_ZC_ADD_EXCHANGE_ITEM2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x5Â */Â intÂ count`
`Â /*Â this+0x9Â */Â boolÂ IsIdentified`
`Â /*Â this+0xaÂ */Â boolÂ IsDamaged`
`Â /*Â this+0xbÂ */Â unsignedÂ charÂ refiningLevel`
`Â /*Â this+0xcÂ */Â structÂ EQUIPSLOTINFOÂ slotÂ {`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ shortÂ card4`
`Â }`
`}`

0x810
`structÂ PACKET_ZC_OPEN_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ count`
`}`

0x811
`structÂ PACKET_CZ_REQ_OPEN_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ LimitZeny`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ result`
`Â /*Â this+0x9Â */Â charÂ storeName[80]`
`Â /*Â this+0x59Â */Â structÂ PRODUCTINFO_IN_BUYING_STOREÂ ItemList[...]Â {Â //Â SizeÂ 8`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x2Â */Â shortÂ count`
`Â Â Â /*Â this+0x4Â */Â intÂ price`
`Â }`
`}`

0x812
`structÂ PACKET_ZC_FAILED_OPEN_BUYING_STORE_TO_BUYERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`Â /*Â this+0x4Â */Â intÂ total_weight`
`}`

0x813
`structÂ PACKET_ZC_MYITEMLIST_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x8Â */Â intÂ limitZeny`
`Â /*Â this+0xcÂ */Â structÂ BUYING_STORE_ITEMLISTÂ ItemList[...]Â {Â //Â SizeÂ 9`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â shortÂ count`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x7Â */Â unsignedÂ shortÂ ITID`
`Â }`
`}`

0x814
`structÂ PACKET_ZC_BUYING_STORE_ENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ makerAID`
`Â /*Â this+0x6Â */Â charÂ storeName[80]`
`}`

0x815
`structÂ PACKET_CZ_REQ_CLOSE_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x816
`structÂ PACKET_ZC_DISAPPEAR_BUYING_STORE_ENTRYÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ makerAID`
`}`

0x817
`structÂ PACKET_CZ_REQ_CLICK_TO_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ makerAID`
`}`

0x818
`structÂ PACKET_ZC_ACK_ITEMLIST_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ makerAID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ StoreID`
`Â /*Â this+0xcÂ */Â intÂ limitZeny`
`Â /*Â this+0x10Â */Â structÂ BUYING_STORE_ITEMLISTÂ ItemList[...]Â {Â //Â SizeÂ 9`
`Â Â Â /*Â this+0x0Â */Â intÂ price`
`Â Â Â /*Â this+0x4Â */Â shortÂ count`
`Â Â Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â Â Â /*Â this+0x7Â */Â unsignedÂ shortÂ ITID`
`Â }`
`}`

0x819
`structÂ PACKET_CZ_REQ_TRADE_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ makerAID`
`Â /*Â this+0x8Â */Â unsignedÂ longÂ StoreID`
`Â /*Â this+0xcÂ */Â structÂ TRADE_ITEM_BUYING_STOREÂ ItemList[...]Â {Â //Â SizeÂ 6`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ shortÂ index`
`Â Â Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x4Â */Â shortÂ count`
`Â }`
`}`

0x81a
`structÂ PACKET_ZC_FAILED_TRADE_BUYING_STORE_TO_BUYERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`}`

0x81b
`structÂ PACKET_ZC_UPDATE_ITEM_FROM_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ ITID`
`Â /*Â this+0x4Â */Â shortÂ count`
`Â /*Â this+0x6Â */Â intÂ limitZeny`
`}`

0x81c
`structÂ PACKET_ZC_ITEM_DELETE_BUYING_STOREÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ index`
`Â /*Â this+0x4Â */Â shortÂ count`
`Â /*Â this+0x6Â */Â intÂ zeny`
`}`

0x81d
`structÂ PACKET_ZC_EL_INITÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ AID`
`Â /*Â this+0x6Â */Â intÂ hp`
`Â /*Â this+0xaÂ */Â intÂ maxHP`
`Â /*Â this+0xeÂ */Â intÂ sp`
`Â /*Â this+0x12Â */Â intÂ maxSP`
`}`

0x81e
`structÂ PACKET_ZC_EL_PAR_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ var`
`Â /*Â this+0x4Â */Â intÂ value`
`}`

0x81f
`structÂ PACKET_ZC_BROADCAST4Â {`
`Â /*Â this+0x0Â */Â shortÂ PakcetType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ Msgtype`
`Â /*Â this+0x5Â */Â unsignedÂ longÂ ColorRGB`
`Â /*Â this+0x9Â */Â charÂ msg[...]`
`}`

0x820
`structÂ PACKET_ZC_COSTUME_SPRITE_CHANGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ type`
`Â /*Â this+0x7Â */Â intÂ value`
`}`

0x821
`structÂ PACKET_AC_OTP_USERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x822
`structÂ PACKET_CA_OTP_AUTH_REQÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ OTPCode[7]`
`}`

0x823
`structÂ PACKET_AC_OTP_AUTH_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ LoginResult`
`}`

0x824
`structÂ PACKET_ZC_FAILED_TRADE_BUYING_STORE_TO_SELLERÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ Result`
`Â /*Â this+0x4Â */Â unsignedÂ shortÂ ITID`
`}`

0x825a
`structÂ PACKET_CA_SSO_LOGIN_REQaÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ Version`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ clienttype`
`Â /*Â this+0x9Â */Â charÂ ID[24]`
`Â /*Â this+0x21Â */Â charÂ MacAddr[17]`
`Â /*Â this+0x32Â */Â charÂ IpAddr[15]`
`Â /*Â this+0x41Â */Â charÂ t1[...]`
`}`

0x825
`structÂ PACKET_CA_SSO_LOGIN_REQÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ longÂ Version`
`Â /*Â this+0x8Â */Â unsignedÂ charÂ clienttype`
`Â /*Â this+0x9Â */Â unsignedÂ charÂ ID[24]`
`Â /*Â this+0x21Â */Â unsignedÂ charÂ Passwd[27]`
`Â /*Â this+0x3cÂ */Â charÂ MacAdress[17]`
`Â /*Â this+0x4dÂ */Â charÂ IP[15]`
`Â /*Â this+0x5cÂ */Â charÂ t1[...]`
`}`

0x826
`structÂ PACKET_AC_SSO_LOGIN_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ shortÂ Result`
`}`

0x827
`structÂ PACKET_CH_DELETE_CHAR3_RESERVEDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`}`

0x828
`structÂ PACKET_HC_DELETE_CHAR3_RESERVEDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â intÂ Result`
`Â /*Â this+0xaÂ */Â longÂ DeleteReservedDate`
`}`

0x829
`structÂ PACKET_CH_DELETE_CHAR3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â charÂ Birth[6]`
`}`

0x82a
`structÂ PACKET_HC_DELETE_CHAR3Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â intÂ Result`
`}`

0x82b
`structÂ PACKET_CH_DELETE_CHAR3_CANCELÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`}`

0x82c
`structÂ PACKET_HC_DELETE_CHAR3_CANCELÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ GID`
`Â /*Â this+0x6Â */Â intÂ Result`
`}`

0x835
`structÂ PACKET_CZ_SEARCH_STORE_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ StoreType`
`Â /*Â this+0x5Â */Â unsignedÂ longÂ maxPrice`
`Â /*Â this+0x9Â */Â unsignedÂ longÂ minPrice`
`Â /*Â this+0xdÂ */Â unsignedÂ charÂ ItemIDListSize`
`Â /*Â this+0xeÂ */Â unsignedÂ charÂ CardIDListSize`
`}`

0x836
`structÂ PACKET_ZC_SEARCH_STORE_INFO_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ PacketLength`
`Â /*Â this+0x4Â */Â boolÂ IsFirstPage`
`Â /*Â this+0x5Â */Â boolÂ IsNexPage`
`Â /*Â this+0x6Â */Â unsignedÂ charÂ RemainedSearchCnt`
`Â /*Â this+0x7Â */Â structÂ ResultItemInfoÂ SSI_List[...]Â {Â //Â SizeÂ 106`
`Â Â Â /*Â this+0x0Â */Â unsignedÂ intÂ SSI_ID`
`Â Â Â /*Â this+0x4Â */Â unsignedÂ intÂ AID`
`Â Â Â /*Â this+0x8Â */Â charÂ StoreName[80]`
`Â Â Â /*Â this+0x58Â */Â unsignedÂ shortÂ ITID`
`Â Â Â /*Â this+0x5aÂ */Â unsignedÂ charÂ ItemType`
`Â Â Â /*Â this+0x5bÂ */Â intÂ price`
`Â Â Â /*Â this+0x5fÂ */Â unsignedÂ shortÂ count`
`Â Â Â /*Â this+0x61Â */Â unsignedÂ charÂ refiningLevel`
`Â Â Â /*Â this+0x62Â */Â unsignedÂ shortÂ card1`
`Â Â Â /*Â this+0x64Â */Â unsignedÂ shortÂ card2`
`Â Â Â /*Â this+0x66Â */Â unsignedÂ shortÂ card3`
`Â Â Â /*Â this+0x68Â */Â unsignedÂ shortÂ card4`
`Â }`
`}`

0x837
`structÂ PACKET_ZC_SEARCH_STORE_INFO_FAILEDÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ Reason`
`}`

0x838
`structÂ PACKET_CZ_SEARCH_STORE_INFO_NEXT_PAGEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x839
`structÂ PACKET_ZC_ACK_BAN_GUILD_SSOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ charName[24]`
`Â /*Â this+0x1aÂ */Â charÂ reasonDesc[40]`
`}`

0x83a
`structÂ PACKET_ZC_OPEN_SEARCH_STORE_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ OpenType`
`Â /*Â this+0x4Â */Â unsignedÂ charÂ SearchCntMax`
`}`

0x83b
`structÂ PACKET_CZ_CLOSE_SEARCH_STORE_INFOÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`}`

0x83c
`structÂ PACKET_CZ_SSILIST_ITEM_CLICKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ longÂ AID`
`Â /*Â this+0x6Â */Â unsignedÂ longÂ SSI_ID`
`Â /*Â this+0xaÂ */Â unsignedÂ shortÂ ITID`
`}`

0x83d
`structÂ PACKET_ZC_SSILIST_ITEM_CLICK_ACKÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ x`
`Â /*Â this+0x4Â */Â shortÂ y`
`}`

0x83e
`structÂ PACKET_AC_REFUSE_LOGIN_R2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ intÂ ErrorCode`
`Â /*Â this+0x6Â */Â charÂ blockDate[20]`
`}`

0x841
`structÂ PACKET_CH_SELECT_ACCESSIBLE_MAPNAMEÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ charÂ CharNum`
`Â /*Â this+0x3Â */Â unsignedÂ charÂ mapListNum`
`}`

0x845
`structÂ PACKET_ZC_SE_CASHSHOP_OPENÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â intÂ cashpoint`
`Â /*Â this+0x6Â */Â intÂ kafrapoint`
`}`

0x849
`structÂ PACKET_ZC_SE_PC_BUY_CASHITEM_RESULTÂ Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ intÂ itemID`
`Â /*Â this+0x6Â */Â shortÂ result`
`Â /*Â this+0x8Â */Â intÂ cashpoint`
`Â /*Â this+0xcÂ */Â intÂ kafrapoint`
`}`

0x84b
`structÂ PACKET_ZC_ITEM_FALL_ENTRY4Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â unsignedÂ intÂ GID`
`Â /*Â this+0x6Â */Â shortÂ ItemID`
`Â /*Â this+0x8Â */Â shortÂ ItemtypeÂ `
`Â /*Â this+0x10Â */Â charÂ identifiedÂ `
`Â /*Â this+0x11Â */Â shortÂ map_xÂ `
`Â /*Â this+0x13Â */Â shortÂ map_yÂ `
`Â /*Â this+0x15Â */Â charÂ subXÂ `
`Â /*Â this+0x17Â */Â charÂ subYÂ `
`Â /*Â this+0x18Â */Â shortÂ amount`
`}`

0x8ca
`structÂ PACKET_ZC_ACK_SCHEDULER_CASHITEMÂ {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ lenght`
`Â /*Â this+0x4Â */Â shortÂ itemCount`
`Â /*Â this+0x6Â */Â shortÂ index`
`Â /*Â this+0x8+k*4Â */Â shortÂ itemid`
`Â Â /*Â this+0x8+2+k*4Â */Â shortÂ price`
`}`

0x916
`structÂ PACKET_CZ_REQ_JOIN_GUILD2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â charÂ name[24]`
`}`

0x99b
`structÂ PACKET_ZC_MAPPROPERTY_R2Â {`
`Â /*Â this+0x0Â */Â shortÂ PacketType`
`Â /*Â this+0x2Â */Â shortÂ type`
`Â /*Â this+0x4_0x01Â */Â bitÂ party`
`Â /*Â this+0x4_0x02Â */Â bitÂ guild`
`Â /*Â this+0x4_0x04Â */Â bitÂ siege`
`Â /*Â this+0x4_0x08Â */Â bitÂ ??Â (mineffect)`
`Â /*Â this+0x4_0x10Â */Â bitÂ ??Â (nolockon)`
`Â /*Â this+0x4_0x20Â */Â bitÂ countpk`
`Â /*Â this+0x4_0x40Â */Â bitÂ ??Â (nopartyformation)`
`Â /*Â this+0x4_0x80Â */Â bitÂ battleground`
`Â /*Â this+0x5_0x01Â */Â bitÂ noitemconsumption`
`Â /*Â this+0x5_0x02Â */Â bitÂ usecart`
`Â /*Â this+0x5_0x02Â */Â bitÂ ??Â (summonstarmiracle)`
`}`

============================================================

## Packet_DB_Rewrite

Motivation
Right now, the basic information about packets is stored in at least two different places. This is undesirable in many aspects, not the least of which being hard maintenance. Furthermore, the custom(?) system in place by the name of **packet_ver** has probably not been operating as intended for a long time, and thus may mislead users.

Proposed Changes
Abolish packet_ver
*Way back*, **packet_ver** served to allow a server to handle multiple client versions at the same time, identifying them by their WantToConnection packet. Thus, with each such packet, a new **packet_ver** version was added. Since the server, however, also relies on a hardcoded compile time define called **PACKETVER** in many places, the chances of the mechanism still working as intended are slim to none. Especially nowadays, servers will most likely only ever be concerned with only one client type, and the setting should be safe to drop, along with all related code(like identifying the **packet_ver** of a client on connecting).

Remove the hardcoded values for packet_lens in clif.c
The idea here is simply centralization. All of values could simply be stored in packet_db with the respective client date.

Index packet_db by client date
A new format would be required for what right now is present in comment form above every set of new/changed packets. It would simply contain the client date (as corresponds to **PACKETVER**. When building the packet_len array on map server start-up, the server would then simply accumulative all changes from the first version to the value of **PACKETVER**, overwriting as it goes, and stopping after reaching the corresponding date.

============================================================

## Page_format

__FORCETOC__

Concept of page formatting
In order to create a viable, approachable and understandable wiki section for [rAthena](/rAthena "wikilink"), we need to focus on simplifying the pages, and unifying the pages with a common style. Without this, people won't know where to look, and how to create their own guides. Once a 'common feel' has been decided between the wiki staff, and [Jguy](/User:Jguy "wikilink"), we can proceed to update the previous pages with the new formatting. Hopefully, this will result in more users focusing on travelling to the wiki section, rather than posting up topics which have already been answered.

Page formatting
Each page format (different sections) should be listed below. Seperate each 'section' into a sub-header for this category, and briefly describe the format to be used. And provide an example.

### [Script Command pages](/:Category:Script_Command "wikilink")

============================================================

## Palettes

What you need

Editing Pallets With Photoshop
Editing pallets with Photoshop is a simple task. Simply load a sprite with a sprite viewer such as SPR Conview or SprTool+4-6 and export a single frame of the sprite as an image and load it with Photoshop. If your doing job sprites use a image from the job class you wish to make your pallet for and the same goes for hairs, head gear and monsters. As each sprite can have it's own pallet.

[Image:SPR Conview.jpg](/Image:SPR_Conview.jpg "wikilink") [Image:sprite.jpg](/Image:sprite.jpg "wikilink")

Once loaded into Photoshop load the color table via the 'Image &gt; Mode &gt; Color Table' like so:

[Image:load color table.jpg](/Image:load_color_table.jpg "wikilink")

If the color table is grayed out then the image isn't 256 colors and you won't be able to proceed. Once the color table window is up you'll see the range of colors available and used in the original sprite. Edit them is simple, either click a single color box or select a group (Selecting a group allows you to easily create a gradient range of colors by picking a light color and then picking a darker color, remember to click the 'ok' button.) then pick the new color or enter in the color values into any of the color boxes.

[Image:edit color table.jpg](/Image:edit_color_table.jpg "wikilink")

Once your new pallet is created simple click the save button in the color table window and save your pallet to a .pal file.

Editing The .Pal File For Use in Ragnarok With Notepad
Ragnarok Online Pallet files are simply normal pallet files (.pal) with the header removed. Simply open the file like so

[Image:notepad1.jpg](/Image:notepad1.jpg "wikilink")

Then selecting whats highlighted in the image and delete it and save. It's that simple.

Editing The .Pal File For Use in Ragnarok Without Notepad
If you have a tool or something please fill in this area.

Replacing A Sprite's Pallet
Replacing a sprite's pallet in order to recolor it there are a few options, the most simple and probably the easiest way is to load the sprite into SPR Conview and under 'Pallet &gt; Open Pallet' select the pallet you made before (normal non RO pallet) and then save the sprite. It's that easy.

Client naming scheme for palettes
Cloth palettes go to **data\\palette\\Â¸Ã¶\\** (data\\palette\\ëª¸\\), each file name follows the pattern **<jobname>_<gender>_<palette id>.pal**, ex. Â¸Â¶Â¹Ã½Â»Ã§_Â¿Â©_4.pal (ë§ˆë²•ì‚¬_ì—¬_4.pal) for a female wizard palette).

The hair palettes go to **data\\palette\\Â¸Ã“Â¸Â®\\** (data\\palette\\ë¨¸ë¦¬\\) and follow the pattern '''Â¸Ã“Â¸Â®

<head sprite id>
_<gender>_<palette id>.pal''', ex. Â¸Ã“Â¸Â®8_Â¿Â©_2.pal (ë¨¸ë¦¬8_ì—¬_2.pal) for a female head sprite 8.

Technical Support, or FAQs

[Category:Spriting](/Category:Spriting "wikilink")

============================================================

## PC

All functions from pc.c and pc.h will go here. This part of the source handle several functions related to how characters work, like exp, heal, base and job lvs, falcon/cart/peco checks, etc.

[PC Checkskill](/PC_Checkskill "wikilink")

[PC Gainexp](/PC_Gainexp "wikilink")

[PC Readglobalreg](/PC_Readglobalreg "wikilink")

[PC Setglobalreg](/PC_Setglobalreg "wikilink")

[PC Search Inventory](/PC_Search_Inventory "wikilink")

[PC Setpos](/PC_Setpos "wikilink")

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Pcblockmove

Syntax

Description
Prevents the given ID from moving when the option != 0, and 0 enables the ID to move again. The ID can either be the [GID](/GID "wikilink") of a monster/NPC or account ID of a character, and will run for the attached player if zero is supplied.

Examples
`//Â PreventsÂ theÂ currentÂ charÂ fromÂ movingÂ away.`
[`pcblockmove`](/pcblockmove "wikilink")`Â `[`getcharid`](/getcharid "wikilink")`(3),1;`

`//Â EnablesÂ theÂ currentÂ charÂ toÂ moveÂ again.`
[`pcblockmove`](/pcblockmove "wikilink")`Â `[`getcharid`](/getcharid "wikilink")`(3),0;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## PCRE

What is PCRE
PCRE (Perl Compatible Regular Expressions) is a library that can make you npc trigger with some expresions said by the players. If you say "Hello" you can make the npc say "Hi, how are you?" or something like that. You first need to define the patterns wich will trigger the labels of the npc. Read the documentation of:


or look into npc/custom/eliza.txt to see how it works.

### PCRE in Windows

If you are using Windows (VC++) you DON'T NEED TO DO ANYTHING, it comes by default enabled.

### PCRE in Linux

Perl-compatible regular expression is a library package. PCRE doesn't have it's own native API, but is more like a set of "wrapper" functions that are based on the POSIX API are also supplied in the library libpcreposix. According to your distribution, you can install PCRE package using the following commands:

For Debian based systems:

`apt-getÂ update`
`apt-getÂ installÂ libpcre3Â libpcre3-dev`

For Red Hat based systems:

`yumÂ installÂ pcre`
`yumÂ installÂ pcre-devel`

Then you are ready to recompile your SVN.

Go to your server folder: NOTE: Replace "trunk" with your server path.

`cdÂ trunk`

Configure it with PCRE enabled:

`./configureÂ --with-pcre`

If you get some error, probably you installed PCRE-devel package in a non-standard folder. You will need to check where is installed the pcre-devel and set:

`./configureÂ --with-pcre=/PATH/TO/YOUR/PCRE/INSTALATION/FOLDER/`

If you don't get any errors, you are done and your can now compile your sql/txt with PCRE without problems.

For SQL servers:

`makeÂ clean`
`makeÂ sql`

For TxT servers:

`makeÂ clean`
`makeÂ txt`

It's done, now you recompiled your server with PCRE support enabled!

[Category:Installation](/Category:Installation "wikilink")

============================================================

## PC_Readglobalreg

Check a variable in the source
`#defineÂ pc_readglobalreg(sd,reg)Â pc_readregistry(sd,reg,3)`

`pc_readglobalreg(sd,"VARIABLE_NAME");`

Note: This only works for numeric variables, strings check [pc_readglobalreg_str](/pc_readglobalreg_str "wikilink").

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## PC_Search_Inventory

Check for a Item on Inventory/Equiped
`intÂ pc_search_inventory(structÂ map_session_dataÂ *sd,intÂ item_id)`

`pc_search_inventory(target,ItemID)`


Note: Can be used like this:

`if(pc_search_inventory(sd,501)>=10)`

This will check if the character has 10 or more Red Potions(501) on his inventory.

It is important that you understand that \*0\* is a valid return value. Therefore, if you're searching for items it is best you do it similarly:

`ifÂ (Â (jÂ =Â pc_search_inventory(sd,Â nameid))Â >=Â 0Â )Â {Â etc;Â }`

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## PC_Setglobalreg

Set player integer variable from source
`#defineÂ pc_setglobalreg(sd,reg,val)Â `[`pc_setregistry`](/pc_setregistry "wikilink")`(sd,reg,val,3)`

`pc_setglobalreg(sd,"VARIABLE_NAME",Â VALUE);`

This only works for numeric variables, strings check [pc_setglobalreg_str](/pc_setglobalreg_str "wikilink").

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Pc_setglobalreg_str

Define a string variable in the source
`#defineÂ pc_setglobalreg_str(sd,reg,val)Â `[`pc_setregistry_str`](/pc_setregistry_str "wikilink")`(sd,reg,val,3)`

`pc_setglobalreg(sd,"VARIABLE_NAME",Â "VALUE");`

This only works for string variables, for numbers check [PC_Setglobalreg](/PC_Setglobalreg "wikilink").

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## PC_Setpos

Syntax
`intÂ `**`pc_setpos`**`(structÂ map_session_data*Â sd,Â unsignedÂ shortÂ mapindex,Â intÂ x,Â intÂ y,Â uint8Â clrtype);`

Parameters
| Parameter    | Description                                                                     |
|--------------|---------------------------------------------------------------------------------|
| **sd**       | Session data of the player to move.                                             |
| **mapindex** | Map index of the target map.                                                    |
| **x**        | X-coordinate on the target map.                                                 |
| **y**        | Y-coordinate on the target map.                                                 |
| **clrtype**  | Visual effect upon removing the player from it's current position (clear type).


Description
Changes position of a player to a given map and coordinates. If the target map is on different server, it will forward the client to it. If x and y are 0 (zero), random coordinates will be chosen.

Example
`pc_setpos(sd,Â mapindex_name2id(MAP_PAYON),Â 0,Â 0,Â 0);`

Warps the player *sd* to payon on random coordinates without a warp-out effect. Note, that MAP_PAYON is a source define, which resolves to "payon".

[Category:Source Functions](/Category:Source_Functions "wikilink")

============================================================

## Percentheal

Syntax

Description
This command modifies the HP and/or SP of the [currently attached](/RID#Usage "wikilink") character. The passed values are in percent of the maximum HP and SP respectively. Positive values will heal, negative ones will cause damage.

The character will not die from the damage unless -100 is passed for HP. Passing -99 and -1 consecutively will leave the character alive with 1 HP. Only HP and/or SP is modified, no further effects are shown. If absolute values should be healed or drained, [heal](/heal "wikilink") is to be used instead.

Examples
`percenthealÂ 100,Â 0;Â Â //Â HealsÂ 100%Â HP`
`percenthealÂ 0,Â 100;Â Â //Â HealsÂ 100%Â SP`
`percenthealÂ 50,Â 50;Â Â //Â HealsÂ 50%Â HPÂ andÂ 50%Â SP`
`percenthealÂ 0,Â -50;Â Â //Â DrainsÂ 50%Â SP`
`percenthealÂ -100,Â 0;Â Â //Â DrainsÂ allÂ HPÂ andÂ killsÂ theÂ player`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Petskillattack

Syntax

Description
These two commands will make the pet cast an attack skill on the enemy the pet's owner is currently fighting. Skill IDs and levels are as per [petskillsupport](/petskillsupport "wikilink").
'petskillattack2' will make the pet cast the skill with a fixed amount of damage inflicted and the specified number of attacks.

All commands with delays and durations will only make the behavior active for the specified duration of seconds, with a delay of the specified number of seconds between activations. Rates are a chance of the effect occurring and are given in percent. 'bonusrate' is added to the normal rate if the pet intimacy is at the maximum possible.

The behavior modified with the above mentioned commands will only be exhibited if the pet is loyal and appropriate configuration options are set in

Examples
    petskillattack 76,5,50,10;

This would give the pet the skill Lex Divina at level 5. It has a 50% chance to cast, but is increased by 10% if the pet has full intimacy.

    petskillattack2 15,150,1,50,20;

    petskillattack2 "MG_FROSTDIVER",150,1,50,20;

This would give the pet the skill Frost Diver and would cause 150 damage. It has a 50% chance to cast, but is increased by 20% if the pet has full intimacy.

If the skill has multiple hits, it can be

    petskillattack2 "LK_SPIRALPIERCE",1000,10,50,20;

It gives pet Spiral Pierce skill with 10 hits, each hit will deals 100 damage.

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Pixeling

Ragnarok Pixel Art
On pixel art, images are made on the pixel level. If you are going to start pixeling, you must know that everything you want to make, you will have to draw it pixel by pixel. It depends on how many frames you want to make and what size they have, but usually pixeling consumes much time and patience. Besides, you need to have much experience to make good designs.

However, not all are disadvantages. The method we use for pixeling is pretty simple. First, we have to make our base image. Remember that if we are going to make designs for RO, we will usually have to use [RO Pixeling Colors](/RO_Pixeling_Colors "wikilink"), so we have to add the [RO pixeling colors palette](http://www.divinero.net/devilevil/PixelingColorTable.pal) to our new image.

Base Image
[frame|Shapes made with neon colors.The](/Image:Baseimage.png "wikilink") first step is to make the shape of our design. If we are going to make a hat, sword, body, etc. we must start by making its shape. We can use neon colors for that, since they are pretty much more visible than RO common colors, and this will help us. It is also recommened to compare the size of our design with other official designs. So, if we are going to make a body, in example, we must have an official RO body as a reference. It is recommended to know the number of pixels of average size (for bodies, it is 70 px for height).

We should make sure that sizes are correct before going to the next step. Also, it is important to put a look at the perspective. In RO, we see the sprites from a 30Âº~45Âº angle. It is very easy to make perspective wrong. Most people fail at this, so don't give up if you don't make good perspectives at first, it takes time to make it look good.

Once you finished your shapes, you will have to draw your edges. Use the three last tones of a 8 colours gradient. You may also use black, though it is not recommendable for bright designs. Instead of it, use dark brown. If you already used dark brown and need a darker color, maybe black is a good choice. But remember to apply it only to a few pixels. In RO and in pixeling in general, edges are dark. Not too dark, but at least it must be clear that edges are darker than interior area.

Don't spend much time with the shape of your design, since you can always modify it while you are drawing the design. Just make a decent base image, something that will guide you with the perspective and size while you are pixeling. Making an odd base image will be a drop in the bucket. It is better not to make a base image than to make a bad one. It will only mislead you while pixeling.

RO Shadding
[frame|left|Design with two~three tones applied in each color area.](/Image:Shadding1.png "wikilink")[frame|Design with shadding applied.This](/Image:Shadding2.png "wikilink") may be the best step in the making of a new design or may be the worst. It depends if you are patient and love art. Better sprites are those who have a good shadding. A good shadding can make your own designs look exactly like official RO designs or even better. You just have to keep in mind two things: RO common colors and shadding techniques.

First thing is pretty simple. You just have to use RO common colors in your designs (if you get enough experience, you may use your own colors, but those must be unsaturated just like RO colors). Get used to them, you will avoid to have a lot of trouble if you always use the RO palette.

Second thing is more complicated. This is based on experience. RO shadding techniques can only be learnt by analyzing RO official designs. It will help you with your designs to take a look at sprite data from time to time. At the end, you will get used to pixel like official spriters do. Shadding techniques also depends on what are you designing. Mobs are not as detailed as hats or jobs are. Besides, inventory sprites are much more different that the other types of sprites. They have darker edges and more contrast between the light and dark areas. Metal pieces are not pixeled like hairstyles or ordinary clothes. Metal pieces have a more "squared" shadding while ordinary clothes have a "wavy" shadding. Hairstyles mix dark lines with bright ones. There are many other techniques, but we can't enumerate them all. Everyone have to get to know them alone.

If we have our base image, we have to add first two or three tones of each color area. If we have a brown jaquet, we must add two or three tones of brown to that jacket at first, to divide dark areas, bright areas, and areas with average brightness (fourth tone of an 8x color gradient can be suitable for this area).

Final design
[frame|Final design.Once](/Image:Finalversion.png "wikilink") we finished with the shadding, we may do some small fixes and additions. In any case, we will have to save it as a 8 bits bmp image (for 8 bits sprites) and then make our own sprite (just in case we want to use our designs to make a sprite and implement it in RO). Actually, nowadays, RO pixeling is not practiced just to make sprites for the game, but also is practiced as a hobby. There are several fan sites where we can see a lot of RO designs that are not used for sprite making.

As a final note, if you want to protect your designs from thiefs, it is recommended (if you want to show them to the public) to put your own watermark (with your name or username) on your work. This way, you can avoid people ripping your sprite. However, it would not be the first time if someone rip your design even if it has watermark. This happened in the past and may happen in the future.

See Also

[Category:Spriting](/Category:Spriting "wikilink")

============================================================

## Playerattached

Syntax

Description
Returns the [RID](/RID "wikilink") of the player currently attached to the script. It will return 0 if none is attached, or if the attached player is no longer on the map server. It is wise to check for the attached player in script functions that deal with timers as there is no guarantee the player will still be logged on when the timer triggers.

Example
[`mes`](/mes "wikilink")`Â "PleaseÂ waitÂ forÂ aÂ bit...";`
[`sleep2`](/sleep2 "wikilink")`Â 5000;`
[`if`](/if "wikilink")`(!playerattached())`
`{`
`Â Â Â Â `[`announce`](/announce "wikilink")`Â "ItÂ appears,Â thatÂ theÂ winnerÂ couldÂ notÂ evenÂ waitÂ 5Â secondsÂ forÂ theÂ prize..",bc_all;`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`}`
[`getitem`](/getitem "wikilink")`Â 512,100;Â Â //Â Apple`
`mesÂ "HereÂ youÂ go,Â enjoyÂ yourÂ prize.";`
[`close`](/close "wikilink")`;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Precompiled_Installation

Pre-Compiled Versions
Using a pre-compiled version of [rAthena](/rAthena "wikilink") has its advantages. You don't have to worry about installing some dependencies on your system, such as a compile and Subversion. You also don't have to worry about going through the trouble of compiling the download, as it is ready almost out of the box.

The major disadvantage of using a precompiled version of rAthena is the customization is limited. Typically, the makers of such downloads will remove the /src/ folder in order to save space, and may remove some other files as well. This limits you on the emulator functionality, because the whole idea of open source is to customize the source code! If you have no intentions of modifying the code, then you may not need to worry about this.

Where to find Precompiled versions of rAthena
Here are some places you can find precompiled versions of rAthena:


You can find precompiled versions for mostly [Windows](/wikipedia:Microsoft_Windows "wikilink"), but there are some [Linux](/wikipedia:Linux "wikilink") ones as well. They are sorted by revision number, with the latest revision number being at the top.

Using Precompiled versions
Basically, all you need to do is download the version of your choice and place it in a directory in which you will 'serve' rAthena. Follow the instructions in both the topic in which you downloaded the version, and the [connecting](/connecting "wikilink") and [configuration](/:Category:Configuration "wikilink") sections of the wiki.

Setup a [client](/:Category:Client_Configuration "wikilink") and you're all set to host and play.

[Category:Installation](/Category:Installation "wikilink")

============================================================

## Produce

Syntax

Description
This command will open a crafting window on the client connected to the invoking character. The 'item level' is a number which determines what kind of a crafting window will pop-up. You can see the full list of such item levels in which determines what can actually be produced. The window will not be empty only if the invoking character can actually produce the items of that type and has the appropriate raw materials in their inventory.

Valid item levels are:

| Value | Item Type                                                       |
|-------|-----------------------------------------------------------------|
| 1     | Level 1 Weapons                                                 |
| 2     | Level 2 Weapons                                                 |
| 3     | Level 3 Weapons                                                 |
| 21    | Blacksmith's Stones and Metals                                  |
| 22    | Alchemist's Potions, Holy Water, Assassin Cross's Deadly Poison |
| 23    | Elemental Converters                                            |

Examples
**`produce`**`Â 1;Â //ThisÂ willÂ bringÂ upÂ aÂ windowÂ similarÂ toÂ "ArrowÂ Crafting",Â itÂ willÂ onlyÂ showÂ contentÂ `
`ifÂ youÂ carryÂ theÂ requiredÂ itemsÂ toÂ makeÂ aÂ levelÂ 1Â weapon.`

**`produce`**`Â 2;Â //ThisÂ willÂ bringÂ upÂ aÂ windowÂ similarÂ toÂ "ArrowÂ Crafting",Â itÂ willÂ onlyÂ showÂ contentÂ `
`ifÂ youÂ carryÂ theÂ requiredÂ itemsÂ toÂ makeÂ aÂ levelÂ 2Â weapon.`

**`produce`**`Â 3;Â //ThisÂ willÂ bringÂ upÂ aÂ windowÂ similarÂ toÂ "ArrowÂ Crafting",Â itÂ willÂ onlyÂ showÂ contentÂ `
`ifÂ youÂ carryÂ theÂ requiredÂ itemsÂ toÂ makeÂ aÂ levelÂ 3Â weapon`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Progressbar

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
This command works almost like '[sleep2](/Sleep2 "wikilink")', but displays a progress bar above the head of the currently attached character (like cast bar). Once the given amount of seconds passes, the script resumes.

If the character moves while the progress bar progresses, it is aborted and the script ends. The color format is in RGB (0xRRGGBB). The color is currently ignored by the client and appears always green.

Example
Here is a sample script which might be a help to you:

`mesÂ "ThisÂ willÂ showÂ theÂ progressbarÂ forÂ 10Â seconds.";`
`close2;`
`progressbarÂ "green",10;`
`end;`

============================================================

## Pushpc

Syntax

Description
This command will push the [currently attached player](/RID "wikilink") to given direction by given amount of square cells. Direction is the same as used when declaring NPCs, and can be specified by using one of the DIR_\* constants

The knock-back is not restricted by items or map flags, only obstacles are taken into account. If there is not enough space to perform the push (e.g. due to a wall), the character is pushed only up to the obstacle.

Examples
`//Â pushesÂ theÂ characterÂ 5Â cellsÂ inÂ 3Â o'clockÂ directionÂ fromÂ it'sÂ currentÂ position.`
`pushpcÂ DIR_EAST,Â 5;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Query_sql

Syntax

Description
Executes an SQL query. A '[select](/select "wikilink")' query can fill [array](/array "wikilink") variables with up to 128 rows of values, and will [return](/return "wikilink") the number of rows (i.e. array size).

Note that [query_sql](/query_sql "wikilink") runs on the main database while [query_logsql](/query_logsql "wikilink") runs on the log database.

Examples
[`set`](/set "wikilink")`Â .@nb,Â `**`query_sql`**`` ("SELECTÂ name,Â fameÂ FROMÂ `char`Â ORDERÂ BYÂ fameÂ DESCÂ LIMITÂ 5",Â .@name$,Â .@fame); ``
[`mes`](/mes "wikilink")`Â "HallÂ OfÂ Fame:Â TOP5";`
[`for`](/for "wikilink")`(`[`set`](/set "wikilink")`Â .@i,1;Â .@iÂ <=Â .@nb;Â setÂ .@i,.@i+1)`
[`mes`](/mes "wikilink")`Â .@i+".Â "+.@name$[0]+"Â ("+.@fame[0]+")";Â //Â WillÂ returnÂ aÂ personÂ withÂ theÂ biggestÂ fameÂ value.`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Racial_Group

Intro
This page will try to explain the file

What is it for?
The mob_race2_db.txt file is used to define groups of monsters "racially".

Usage and Syntax
The structure of the Race should be configured like this

    Race2ID,MobID1,MobID2,MobID3,...,MobID9

Race2ID would determine the ID of the monsters you have set, followed by the Mob IDs of the monster to be listed in the group.

It should not be confused with Race, but should be treated rather as a group, i.e. a group of similar monsters.

Example
Adding this in would create a Racial Group between Poring, Drops, Poporing, and Marin.

    // Poring Clan (Custom)
    7,1002,1113,1031,1595

For additional info, read [Goblin Leader Card](http://ratemyserver.net/index.php?iname=goblin+leader+card&page=item_db&quick=1&isearch=Search).

============================================================

## Ragnarok_Online

|                                                                    |
|--------------------------------------------------------------------|
| align=center colspan=2|<font size="2">***Ragnarok Online***</font> |
||
| style=width:80px|Developer:                                        |
| Publisher:                                                         |
| Release date:                                                      |
| Genre:                                                             |
| Game modes:                                                        |
| ESRB/ELSPA rating:                                                 |
| Platform:                                                          |
| Media:                                                             |
| System requirements:                                               |
| Input:                                                             |

***Ragnarok Online*** (**RO**) is an MMORPG created by [GRAVITY Co., Ltd.](/wikipedia:Gravity_(company) "wikilink") of South Korea. Much of the background of the game is based on the manhwa *Ragnarok* by Lee Myung-Jin. An anime was created called Ragnarok The Animation which is based on the game. A sequel is currently in development, Ragnarok Online 2.

Different Versions
Currently, there are official versions of the game in Korean (often known as *kRO*), Japanese (*jRO*), English (*International RO*, or *iRO*) Thai (*tRO*), Chinese (*cRO*), Indonesian (*idRO*), Filipino (*pRO*), Brazilian Portuguese (*bRO*) and Bahasa Melayu(*mRO*). There is also a version for players in India (*RO India*)(July 2004), Germany, Italy, Austria, Turkey and Switzerland (better known as *European RO* or *EuRO*)(2004). An Oceanic version known as *Oceania Ragnarok Online (oRO)* is now fully released and went pay-to-play at the start of December 2004, finishing the beta stage.

Most of the other versions of Ragnarok are operated by a different online entertainment company which obtained a license from GRAVITY Co., Ltd. in South Korea. Below are some of the different companies running licensed and official Ragnarok Online servers:


*Ragnarok* is continually being revised and revamped, having new features added periodically. Most official licensed versions are now pay-to-play. There are many free private servers all over the world; these servers are illegal, but nevertheless highly popular.

An offline spinoff, Ragnarok Battle Offline (known by some as *RBO*), was created for Windows by [French-Bread](http://www13.plala.or.jp/french/) and Syumpu-Tei-Ko-Bo. Both "Ragnarok" and "RagnarÃ¶k" forms are used by the game's creators and its licensors, with no real consensus.

### Marketshare

According to [MMOGCHART.com](http://www.mmogchart.com/Analysis.html), there are currently 17 million people playing Ragnarok Online worldwide. It is the second biggest MMORPG in South Korea, second only to Lineage.

Basics
The MMORPG is loosely based upon the Manhwa, set in the world of Rune-Midgard. For the most part, the game lacks a plotline, but there are small side-quests or events set up by the administrators of the game sporadically to add depth and maintain interest.

The game's tutorial does mention that there is a war between man and monsters, an accurate observation given the fact that experience is given to the player when they kill monsters. However, warring is not limited to man v. monster combat, as ingame guilds can fight against each other in the [War of Emperium](/War_of_Emperium "wikilink"), a battle between several guilds for castles in town, which give them access to dungeons and treasures that are not accessible to people who are not in the residing guild.

The currency of the game is Zeny, which may be obtained by the selling of items recovered from defeating monsters. The economy in Ragnarok Online is driven heavily by rare items that are not sold in stores and there is a very large difference in wealth between players, for the most part. The Merchant class offers vending of items to other playes, overcharging of items, and even discounts.

There are eight equipment slots - three for headgear (top, middle and bottom), two for accessories, and one of each for shields, weapons, body armor, cloaks and footgear. Currently, only the 3 head pieces show significant external graphic variety. Weapon and shield are the only other items that can be seen externally, but are significantly less limited in variety.

Each character has an HP bar and an SP bar. The HP (Hit Points) bar tells you how healthy you are. When HP is reduced to 0, the character "dies" and is returned to the city that the character had set their save point to. This also results in a penalty of 1% to the character's experience bar, though this does not apply for the Novice class. Skill Points (SP) are needed to use many job-related skills. If you have 0 SP remaining, you cannot use any skills that require SP. Both HP and SP regenerate on their own when the character is at rest (not moving), and at twice the speed if the character is sitting down. However, if the character holds items above 50% of the total weight, it cannot regain HP/SP. The regeneration speed of HP and SP depends on the Vitality and Intelligence attributes, respectively.

The game is very open-ended; after completing novice training, players are free to roam the map at their leisure, with the only restriction being the ferocity of the monsters in a given area. Low levelled players generally have to stay close to towns lest the enemies become too powerful for them to handle.

In addition, players have complete control over their Stats (Strength, Agility, Vitality, Intelligence, Dexterity, and Luck) and Skills (class-based) to create the type of character they want to play.

Cities
There are several major cities in Rune-Midgard, the world of Ragnarok Online. Players are allowed to visit any of them at any time, or any of the many places in between.

Prontera : The capital city of Rune-Midgard, located right in the centre of the map. It's the centre of commerce for most servers, as well as the home to the acolyte classes. Prontera also houses the only official church in the game, and is the place to go to get married and is the easiest place for many novices to start, due to the abundance of low-level creatures.

<!-- -->

Izlude : Satellite of Prontera. Izlude is the official home of the swordsmen. Izlude's port is also the only place by which one can reach Byalan Island.

<!-- -->

Geffen : Located northwest of Prontera. Home of the Magician Academy, where novices may become magicians. Geffen is also home to the Guild of Wizards and the Blacksmith Association. Geffen Tower, located in the center of the city, has a small dungeon which comprise its lower levels. The Wizard and Blacksmith guilds can also be found here. The superdungeon Glast Heim is located nearby and is generally considered a satellite dungeon due to its relatively close proximity and easy accessability from Geffen.

<!-- -->

Payon : A city nestled within the forest of the same name. This city is reminiscent of ancient Korean culture, and is where one can become an archer. It is located southeast of Prontera, and also has a dungeon full of medium -high level creatures located to its north.

<!-- -->

Alberta : A port city to the south of Payon, and home of the merchants. Alberta's port is the only means of accessing the sunken ship, Turtle Island, Amatsu, Kunlun, and Louyang excluding teleport. The city also plays host to numerous low-level creatures.

<!-- -->

Morroc : An Arabic-themed desert city south of Prontera. Novices can become thieves in the pyramid just northwest of Morroc and assassins in the desert to the east of Morroc. This city is surrounded by a large number of medium level creatures.

<!-- -->

Al de Baran : Due north of Prontera, with its large clock tower, which serves as a dungeon. Al de Baran is also the only way to reach Lutie (via Santa Claus). The Alchemist guild can be found here.

<!-- -->

Lutie : Also known as Christmas Town, is the home of Santa Claus and the toy factory dungeon.

<!-- -->

Comodo : Gambling capital of the Southwest, is a cross between Hawaii and Las Vegas. Night is eternal in the city, and fireworks can be seen in the sky at all times. Comodo's main attraction is its (non-playable) casino, and good leveling spots nearby. The Bard and Dancer guild can be found here. Added to iRO in August 2003. This city has two high levels and one medium level dungeon.

<!-- -->

Juno : A large city north of Al de Baran, and the capital of the Scwartzveld Republic, a kingdom separate from Rune-Midgard. The Sage guild can be found here. The pathway to Transcendent Classes may also be found in here, in the Northwest corner of the city. Added to iRO in May 2004.

<!-- -->

Amatsu : Styled after Ancient Japan. Here the pink-white blossoms of the cherry (sakura) trees are always in bloom. One of the city's major draws is the Tatami Maze. Amatsu was the first product of the "Global Project", in which new cities with themes based on countries with licensed RO servers were (and still are) added in rapid succession. Amatsu was added to iRO in September 2004.

<!-- -->

Kunlun : Designed in Ancient Taiwanese style. Outside of iRO, it is known as Gonryun. In October 2004, Kunlun became the second city in the Global Project to be added to iRO.

<!-- -->

Umbala : A lost village, located to the north of Comodo. Home of the self-denominated Utan tribe. It was added to iRO in November 2004.

<!-- -->

Jawaii : Not completely a village or city, more of an Island. Commonly nicknamed the "Honeymoon Island." Most married couples go here to celebrate their marriage(and *only* married players are allowed to go there. Unmarried players can only reach Jawaii's pub for a drink and can not go out of the pub). It was added to iRO in March 2005.

<!-- -->

Nifflheim : A city of the dead. There are many kinds of undead and demon monsters here, and the city may only be reached through Umbala's Yggdrassil Tree. It was added to iRO in December 2004

<!-- -->

Louyang : Designed in Ancient Chinese style. It was added to iRO in March 2005. Is the third city of Global Project.

<!-- -->

Ayothaya : Designed after ancient Thailand. Featuring the atmosphere of the former Thai capital in Ayutthaya period, it was added to iRO on 19th April, is the fourth and actually the last city of Global Project.

<!-- -->

Einbroch : A city made from steel, supposedly being one of the first cities in the Schwartzveld Republic to go through the real-life equivalent of the Industrial Revolution. It was added to iRO October 2005.

<!-- -->

Lighthalzen : A city of commerce. It was added in June 2005 to kRO.

<!-- -->

Hugel :

Game mechanics
### Level and class

Unlike most other RPGs, each character within Ragnarok has two different levels: Base Level (blvl) and Job Level (jlvl). This is denoted as "Base/Job". So, a character who is 5/1 would be Base Level 5, and Job Level 1.

Base Level indicates personal growth. Through base levels, your Stats grow â€” you become stronger, faster, or smarter, for example.

Job Level indicates your progression within your chosen profession. For example, you become a better Archer or Blacksmith. In game terms, that means you get more Skills and bonus stat points.

The maximum level for first and second classes in most versions of RO is 99/50. Advanced classes can reach 99/70 and the Super Novice class can reach 99/99.

You begin the game as a 1/1 novice. Upon reaching Job 10, a novice can change into a different job class, and become stronger. There are six basic classes, also known as 1-1 classes:


Note that the stats listed above are only loose guidelines. For example, an **Acolyte** planning to be a **Monk** (see below) would be better off with STR, AGI, and DEX than with INT. Also note that no class has a stat requirement; the stats you build are entirely up to you, though some choices are better than others.

Each class branches off into two different "Second classes", to make an effective selection of 12 different classes. There is one additional special class, the Super Novice (Which uses 1-1 Class skills), bringing the total to 13, not counting the advanced versions of each second class.

2-1 classes:


**Knight** â€“ The primary 2nd class of the Swordsman has mastery of the two-hand sword and one-hand spear. Has a skill which enables ability to rent and ride the Pecopeco.

**Assassin** â€“ The primary 2nd class of the Thief uses katars or daggers in both hands. Can apply poison to attacks.

**Wizard** â€“ The primary 2nd class of the Mage uses powerful magic of the elements: Fire, Ice, Lightning and Earth.

**Hunter** â€“ The primary 2nd class of the Archer has mastery of the bow. Can use traps to kill or give enemies status ailments. Has a falcon to assist in battle.

**Blacksmith** â€“ The primary 2nd class of the Merchant can make weapons. Has axe mastery and combat abilities relating to hammers and axes.

**Priest** â€“ The primary 2nd class of the Acolyte has powerful healing magic and exorcises the undead. Usually the foundation of a party.

2-2 classes:


**Crusader** â€“ The alternate 2nd class of the Swordsman has skills with the two-hand spear and shield as well as healing and holy magic. Has a skill which enables ability to rent and ride the Grand Pecopeco.

**Rogue** â€“ The alternate 2nd class of the Thief uses bow and arrows or dagger and shield while sneaking around and/or stripping the enemies armor and weapons.

**Sage** â€“ The alternate 2nd class of the Mage can give temporary elemental enchantments to weapons or small areas. Also has a unique skill allowing the Sage to cast spells while walking.

**Bard** and **Dancer** â€“ The alternate 2nd classes of the Archer can sing and dance to support party members with various boosts. Male Archers can become Bards, while female Archers can become Dancers.

**Alchemist** â€“ The alternate 2nd class of the Merchant can make and throw healing and offensive potions.

**Monk** â€“ The alternate 2nd class of the Acolyte uses fists, attack combinations and a powerful one-shot kill ability.

Recently, new additions have been added in the form of **Advanced Second Class** jobs were released in kRO (and private server), and were released in iRO July 2005 under the name of **Transcendent Classes**. These are NOT the 3rd class jobs. To achieve these classes you must reach 99/50 in your current second class form, then become reborn-that is turned once again into a Novice (actually, Novice High) with a level of 1/1. You level the same as before, except that you must choose the exact same class as before- Knights must become Swordsmen again- or else suffer major penalties. Your skills will have to be re-learned (which leaves room to correct previous errors), but any quest-based skills you earned will be returned to you immediately upon reaching the appropriate level. You will then find yourself going through the "High" first class jobs (Swordsman High, Archer High, etc.) and when you change into second class, you will be in the new advanced form. All advanced jobs can level up to 99/70, and have access to all the skills from the normal version of the class, as well as new, Advanced-only skills.

2-1-2 classes:


**Lord Knight** â€“ The primary Advanced 2nd Class of High Swordsman, with all the abilities of knights plus a few new abilities pertaining to swords and spears.

**Assassin Cross** â€“ The primary Advanced 2nd Class of High Thief, with all former abilities of assassin, in addition to more poisoning skills, advanced katar mastery, and additional attack skills.

**High Wizard** â€“ The primary Advanced 2nd class of the High Mage that uses even more powerful magic.

**Sniper** â€“ The primary Advanced 2nd class of the High Archer has further mastery of the bow. Traps become more effective, and the bond with the Falcon is much stronger.

**Whitesmith/MasterSmith** â€“ The primary Advanced 2nd class of the High Merchant can make weapons better than ever before. Has axe mastery and combat abilities relating to hammers and axes, and now can utilize these abilities better than ever. The name Mastersmith is used in the International version of Ragnarok Online.

**High Priest** â€“ The primary Advanced 2nd class of the High Acolyte has powerful healing magic and exorcises the undead. Their new skills are powerful, and the extra skill points allows more variation for this skill-oriented class.

2-2-2 classes:


**Paladin** â€“ The alternate advanced 2nd class of the High Swordsman has skills with the spear and shield as well as healing and holy magic. Has a skill which enables ability to rent and ride the Grand Pecopeco, and is now a super tank.

**Stalker** â€“ The alternate advanced 2nd class of the High Thief uses bow and arrows or dagger and shield while sneaking around and stripping the enemies armor and weapons, and now can strip everything at once.

**Professor/Scholar** â€“ The alternate advanced 2nd class of the High Mage can give temporary elemental enchantments to weapons or small areas. Also has a unique skill allowing the Professor to cast spells while walking, as well as take over the soul of its enemy. The name Scholar is used in the International version of Ragnarok Online.

**Clown/Minstrel** and **Gypsy** â€“ The alternate advanced 2nd classes of the Archer High can sing and dance to support party members. Male High Archers can become Clowns/Minstrels, while female High Archers can become Gypsies. To the delight of many players, the name Minstrel is to be used in the International version of Ragnarok Online.

**Creator/Biochemist** â€“ The alternate advanced 2nd class of the High Merchant can make and throw more powerful types of healing and offensive potions, and now also has a created ally in the Homonculus. The name Biochemist is used in the internationale version of Ragnarok Online.

**Champion** â€“ The alternate advanced 2nd class of the High Acolyte uses fists and builds on the Monk's powerful combo attacks.

Special Alternate Class (not 2-1-2 or 2-2-2... just a new option after novice)


**Tae Kwon Boy/Girl** â€“ A martial arts themed character specializing in various kicks is currently in beta testing on kRO. Little is yet known about it and the two 2nd classes, Star Knight and Soul Linker. However, it is scheduled for release for kRO on October 2005.

### Stats

In RO, there are six attributes that determine your stats:

Strength (STR) : Increases physical attack damage and carrying capacity.
Agility (AGI) : Increases flee (dodge) rate and attack speed. Reduces skill delay.
Vitality (VIT) : Decreases damage taken, increases maximum HP and the rate at which HP is regenerated while at rest, increases healing ability of items, decreases chance of being afflicted by negative status affects.
Intelligence (INT) : Increases magic damage, magic defense, max SP, and SP regeneration rate, decreases chance of being afflicted by negative status affects.
Dexterity (DEX) : Increases hit rate, cast speed and increases minimum damage. It also increases damage dealt with bow and arrows.
Luck (LUK) : Increases critical hit and perfect dodge probability, slightly decreases chance of being afflicted by negative status affects. Increases chances of successfully refining or forging a weapon.

Due to the open-ended nature of the game, one can "build" their character any way they choose. However, due to the low number of overall stat points (and the cost increases that arise with higher stats), it is generally advised to excel in a few stats rather than indulge in them all. The maximum stat is 99 without item or job bonuses, and only two stats can be raised to 99 (as well as nine other stat points which one can gain during character creation) before the stat points are exhausted.

Most classes pick one or two "main" stats, and raise those two above all else. An offensive stat and a defensive stat often create a potent combination that allows the character to succeed.

### Skills

Each class have a unique set of skills. Skills often have several levels, which normally range from either 1 to 10 or 1 to 5. Like learning a new skill, improving a known skill also takes a skill point.

After a first-level class player changes to a second-level class, the learned skills are maintained.

Other ways of learning a skill include taking a quest (apart from "First Aid", all skill quests are class-specific) or applying a card to equipment. Quest skills are permanent; card skills are only available as long as you're equipped with the item. However, skills learned with either method can't be improved, and are always at level 1 (or in the case of a card, set at a certain level described on the card, e.g.: Magnum Break level 3).

### Cards

There is a rare chance that certain enemies will drop cards, or items that provide some sort of positive effect on the player, including stat boosts, abilities, and damage reduction. Cards may be placed in "slotted" equipment (example: if a sword has three slots, three cards can be compounded with it). Cards may only be placed on certain equipment, which is usually determined by the effect that the card has (the Pecopeco card provides HP bonus, hence it is compounded with armor). Merchants often vend these valuable items, as well.

### Parties, Guilds and Guild Warfare

Players in the game may form parties which in most cases, help by providing the party with added experience, as there is a bonus to the experience received by a player in a party that can share it. They can also benefit from it by having the ability to benefit from some skills normally usable by only one character. Partying is crucial for those who want to reach 99lv.

Guilds are on the other hand, a way for people who already know each other well to show their uniqueness as a group, or as an expression of power or influence in the game. Each guild has a guild-master who has the initial ability to invite and reject possible members, and guilds also have levels, which members can push higher by contributing some experience to it through taxes on their own experience gain. Guilds with high levels may invite more members, and be officialy recognized. This added attraction of being recognized entitles the guild to participate in massive player vs player / guild vs guild warfare called the War of Emperium.

The [War of Emperium](/War_of_Emperium "wikilink") is fought in castle maps, located near major cities, and each castle having unique layouts. Guilds who manage to control the castle at a war's end gets access to treasure boxes, which may yield extremely rare pieces of equipment.

Conduct
There are many things that are frowned upon in Ragnarok Online, as well as many people who do these things.


<!-- -->


<!-- -->


<!-- -->


<!-- -->


<!-- -->


<!-- -->


<!-- -->


See also

External links

GNU
> `This` `article` `is` `licensed` `under` `the` [`Free` `Documentation` `License`](http://www.gnu.org/copyleft/fdl.htmlGNU)`.` `It` `uses` `material` `from` `the` [`Wikipedia` `article` `"Ragnarok` `Online"`](/wikipedia:Ragnarok_Online "wikilink")`.`

[Category:Basics](/Category:Basics "wikilink")

============================================================

## Rand

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function returns a number, randomly positioned between 0 and the number you specify (if you only specify one) and the two numbers you specify if you give it two.

Examples
        rand(10);    // would result in 0,1,2,3,4,5,6,7,8 or 9
        rand(2,10); // would result in 2,3,4,5,6,7,8,9 or 10

============================================================

## Random_item_reward

Description
Rewards the player with a random item from a list.

Examples
### Method 1: Item Group

By using item group, item chance to be gained can be decided. First, must decide ID for item group, edit the [const.txt](https://github.com/rathena/rathena/blob/master/db/const.txt) file. Example,

`IG_TestRandomItemÂ Â 392`

Maximum Item Group ID is 399 as defined in [\#define MAX_ITEMGROUP 400](https://github.com/rathena/rathena/blob/master/src/map/itemdb.h#L26) Then put the item list on [item_group_db.txt](https://github.com/rathena/rathena/blob/master/db/import/item_group_db.txt) with format

`//GroupID,ItemID,Rate{,Amount,Random,isAnnounced,Duration,isNamed,isBound}`
`IG_TestRandomItem,607,10`
`IG_TestRandomItem,608,5`
`IG_TestRandomItem,678,7`

Then use script command [getrandgroupitem](/getrandgroupitem "wikilink")

`getrandgroupitemÂ IG_TestRandomItem,1;`

If the item list is added when server is running, just use [@reloaditemdb](/@reloaditemdb "wikilink"). More info can be found on [Item Group Documentation](https://github.com/rathena/rathena/blob/master/doc/item_group.txt)

### Method 2: F_Rand Function

This function is one of many useful functions in [Global_Functions.txt](https://github.com/rathena/rathena/blob/master/npc/other/Global_Functions.txt) file.

`//////////////////////////////////////////////////////////////////////////////////`
`//Â ReturnsÂ aÂ randomÂ argument.`
`//Â --Â callfuncÂ "F_Rand",arg0,arg1,...`
`//Â Example:`
`//Â Â Â Â //Â YouÂ canÂ useÂ itÂ toÂ pickÂ aÂ randomÂ numberÂ fromÂ aÂ list:`
`//Â Â Â Â setÂ @itemIDfromList,Â callfunc("F_Rand",1129,1222,1163,1357,1360,1522,1811,1410);`
`//////////////////////////////////////////////////////////////////////////////////`
`functionÂ Â Â scriptÂ Â F_RandÂ Â {`
`Â Â Â returnÂ getarg(rand(getargcount()));`
`}`

*How to use?* Just use like at the example, call the F_Rand function then follow the item ID, the rate for each item to shows up is 1/n. Example usage can we see in item_db.txt,

`12136,Women's_Bundle,Women'sÂ Bundle,2,0,,100,,,,,0xFFFFFFFF,63,2,,,,,,{`
`getitemÂ callfunc("F_Rand",558,529,2668,7518),1;Â },{},{}`

### Method 3: Using Array

    // begin of the script
    setarray .@RandItem[0],501,502,503,504,505;
    set .@RandItemCount,getarraysize(.@RandItem);
    getitem(.@Randitem[rand(.@RandItemCount)],1);
    // end of the script


[Category:Scripting Tips and Tricks](/Category:Scripting_Tips_and_Tricks "wikilink")

============================================================

## Readparam

Syntax

Description
This function will return the basic stats referred by the parameter number of an invoking character or, if a character name is specified, of that player. Instead of a number, you can use a parameter name if it is defined in .

For reference, in there these things are defined:

`StatusPoint,Â BaseLevel,Â SkillPoint,Â Class,Â Upper,Â Zeny,Â Sex,Â Weight,Â MaxWeight,Â JobLevel,Â `
`BaseExp,Â JobExp,Â NextBaseExp,Â NextJobExp,Â Hp,Â MaxHp,Â Sp,Â MaxSp,Â BaseJob,Â Karma,Â Manner,Â `
`bVit,Â bDex,Â bAgi,Â bStr,Â bInt,Â bLuk`

All of these also behave as variables, but don't expect to be able to just '[set](/set "wikilink")' all of them - some will not work for various internal reasons.

Other Information
This will return the status points you haven't spent yet:


Using this particular information as a function call is not required. Just putting **StatusPoint** will give you the same result, and some of these parameters work just like variables (i.e. you can 'set Zeny,100' to make the character have 100 Zeny, destroying whatever Zeny they had before, or 'set Zeny,Zeny+100' to give them 100 Zeny)

Examples
`Â Â readparam(bVit)`
`Â Â Â Â Â Â `[`if`](/if "wikilink")`Â (readparam(bVit)<=77)Â gotoÂ L_End;`
`Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "OnlyÂ peopleÂ withÂ overÂ 77Â VitÂ areÂ readingÂ this";`
`Â Â `
`Â Â L_End:`
`Â Â Â Â Â Â `[`close`](/close "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Recovery

Syntax

Description
This command will revive and fully restore the HP/SP of the selected characters. It returns 1 upon successful use.

| type          | option                               |
|---------------|--------------------------------------|
| **0: Player** | Character ID number                  |
| **1: Party**  | Party ID number                      |
| **2: Guild**  | Party ID number                      |
| **3: Map**    | Map name (a string)                  |
| **4: All**    | None (takes <revive_flag> as option) |

If no option is specified, the invoking player's character ID, party ID, guild ID, or map will be used.

<revive_flag> determines the action:

| flag  | Description                           |
|-------|---------------------------------------|
| **1** | Revive and heal all players (default) |
| **2** | Heal living players only              |
| **4** | Revive dead players only              |

<map name> can optionally be used to define a single map to execute the command on for types 1 (party) and 2 (guild).

Examples
`//Â OnlyÂ reviveÂ charactersÂ inÂ invokingÂ partyÂ onÂ mapÂ morocc.`
`Â Â Â `**`recovery`**`Â 1,getcharid(1),4,"morocc";`
`//Â FullyÂ healÂ (don'tÂ revive)Â allÂ membersÂ ofÂ invokingÂ character'sÂ guild.`
`Â Â Â `**`recovery`**`Â 2,getcharid(2),2;`
`//Â ReviveÂ andÂ fullyÂ healÂ everyoneÂ inÂ mapÂ prontera.`
`Â Â Â `**`recovery`**`Â 3,"prontera";`
`//Â OnlyÂ reviveÂ allÂ deadÂ charactersÂ onÂ server.`
`Â Â Â `**`recovery`**`Â 4,4;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Reference_Sheet

Â¸Ã¶ - Body palette folder Â¸Ã“Â¸Â® - Head palette folder

Â¿Â© - Female Â³Â² - Male

**Body palettes go by name_gender_number.pal**

Â´Ã­Â¼ _Â¿Â©_0.pal - Body palette example

**Head palettes go by Â¸Ã“Â¸Â®1_gender_number.pal**

Â¸Ã“Â¸Â®1_Â¿Â©_0.pal - Head palette example

**Use the chart below for the name portion of the body palettes.**

Â´Ã­Â¼ - Dancer

Â´Ã‘Ã€Ãš - Ninja

Â¸Â¶Â¹Ã½Â»Ã§ - Mage

Â¸Ã¹Ã…Â© - Monk

Â¿Â¬Â±ÃÂ¼ÃºÂ»Ã§ - Alchemist

Â±Ã¢Â»Ã§ - Knight

Â±ÃƒÂ¼Ã¶ - Archer

Â±Ã‡Â¼Âº\`- Star Gladiator

Â±Ã‡Â¼Âº - Flying Star Gladiator

Â»Ã³Ã€ÃŽ - Merchant

Â°Ã¡ÃˆÂ¥ - Wedding

Â°Ã‡Â³ÃŠ - Gunslinger

Â°Ã‹Â»Ã§ - Swordsman

ÂµÂµÂµÃ - Thief

Â·ÃŽÂ±Ã— - Rogue

Â·ÃŽÂµÃ¥Â³ÂªÃ€ÃŒÃ†Â® - Lord Knight/Rune Knight

Â¼Â¼Ã€ÃŒÃÃ¶ - Sage

Â¼Ã’Â¿Ã¯Â¸ÂµÃ„Â¿ - Soul Linker

Â¼ÂºÃÃ·Ã€Ãš - Acolyte

Â½Â´Ã†Ã›Â³Ã«ÂºÃ±Â½Âº - Super Novice

Â½ÂºÂ³ÂªÃ€ÃŒÃ†Ã› -Sniper/Ranger/Mounted Ranger

Â½ÂºÃ…Ã¤Ã„Â¿ - Stalker/Shadow Chaser

Â¾Ã®Â¼Â¼Â½Ã… - Assassin

Â¾Ã®Â¼Â¼Â½Ã…Ã…Â©Â·ÃŽÂ½Âº -Assassin Cross/Guillotine Cross

Â¹Ã™ÂµÃ¥ - Bard

ÃÂ¦ÃƒÂ¶Â°Ã¸ - Blacksmith

ÃƒÂ¨Ã‡Ã‡Â¿Ã‚ - Champion/Shura

Ã€Â§Ã€ÃºÂµÃ¥ - Wizard

Ã…Â©Â¸Â®Â¿Â¡Ã€ÃŒÃ…Ã - Creator/Genetic

Ã…Â©Â¶Ã³Â¿Ã® - Clown/Minstrel

Ã…Â©Â·Ã§ - Crusader

Ã…Ã‚Â±Ã‡Â¼Ã’Â³Ã¢ -Taekwon

Ã†Ã¤Ã„ÃšÂ·ÃŽÂ³Âª - Peco Lord Knight/Dragon Rune Knight

Ã†Ã¤Ã„ÃšÃ†Ã¤Ã„Ãš_Â±Ã¢Â»Ã§ - Peco Knight

Ã†Ã¤Ã„ÃšÃ†Ã¤Ã„Ãš_Ã…Â©Â·Ã§ - Peco Crusader

Ã†Ã¤Ã„ÃšÃ†ÃˆÂ¶Ã³ - Peco Paladin/Gryphon Royal Guard

Ã†ÃˆÂ¶Ã³ÂµÃ² - Paladin/Royal Guard

ÃƒÃŠÂºÂ¸Ã€Ãš - Novice

ÃÃ½Â½Ãƒ - Gypsy/Wanderer

Ã‡ÃÂ¸Â®Â½ÂºÃ†Â® - Priest;Xmas;Summer

Ã‡ÃÂ·ÃŽÃ†Ã¤Â¼ Professor/Sorcerer

Ã‡Ã¥Ã…Ã - Hunter

Ã‡ÃÃ€ÃŒÃ€Â§Ã€ÃºÂµÃ¥ - High Wizard/Warlock

Ã‡ÃÃ€ÃŒÃ‡ÃÂ¸Â®Â½ÂºÃ†Â® - High Priest/Arch Bishop

Ãˆ Ã€ÃŒÃ†Â®Â½ÂºÂ¹ÃŒÂ½Âº - Whitesmith/Mechanic

============================================================

## Removing_skill_level_requirements

If you want to remove the skill level requirements from a skill, so that you don't need to level other skills up to get into it, then here's what you need to do:

Navigate to and open it up. In there, is the database file for the skill tree, a.k.a. what skills you need to get this skill, what skill you need to get the next, and so on.

The format is as follows:

`//JobNo,Skill-ID,MaxLV,PrerequisiteÂ Skill-ID-1,PrerequisiteÂ Skill-ID-1-Lv,PrereqSkill-ID-2,`
`PrereqSkill-ID-2-Lv,PrereqSkill-ID-3,PrereqSkill-ID-3-Lv,PrereqSkill-ID-4,PrereqSkill-ID-4-Lv,`
`PrereqSkill-ID-5,PrereqSkill-ID-5-Lv//CLASS_SKILLNAME#SkillÂ Name#`

And then the file is broken down into each class' skill trees.

Let's say we wanted to remove the requirements from the Skill 'Safety Wall' for the Mage.

`2,12,10,11,7,13,5,0,0,0,0,0,0//MG_SAFETYWALL`

Comparing the legend versus the entry for safety wall, we need a few more skills and a certain level of those skills to get safety wall.

If you wanted to remove the other skills from being needed to learn safety wall, simply change those columns to zero. Make sure you restart your server afterwards.

`2,12,10,0,0,0,0,0,0,0,0,0,0//MG_SAFETYWALL`

There! No more requirements to learn Safety Wall! It can be learned as soon as you change into a Mage.

[Category:Database](/Category:Database "wikilink")

============================================================

## Rentitem

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
Gives you an item that lasts for <duration> seconds.

Example
To rent out a red potion for 7 days you would use the following
***rentitem 501,604800;***

============================================================

## Repair

Syntax

Description
This command repairs a broken piece of equipment, using the same list of broken items as available through [getbrokenid](/getbrokenid "wikilink").

The official scripts seem to use the repair command as a function instead: **repair**(<number>)' but it returns nothing on the stack. Probably only Valaris, who made it, can answer why is it so.

Examples
**`repair`**`Â 1101;`

See [getbrokenid](/getbrokenid "wikilink") for a more in-depth example on usage of this command.

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Replacestr

Syntax

Description
Replaces all instances of a search string in the input with the specified replacement string. By default is case sensitive unless <usecase> is set to 0. If specified it will only replace as many instances as specified in the count parameter.

Examples
[`replacestr`](/replacestr "wikilink")`("testingÂ tester",Â "test",Â "dash");Â //returnsÂ "dashingÂ dasher"`
[`replacestr`](/replacestr "wikilink")`("Donkey",Â "don",Â "mon",Â 0);Â //returnsÂ "monkey"`
[`replacestr`](/replacestr "wikilink")`("testÂ testÂ testÂ testÂ test",Â "test",Â "yay",Â 0,Â 3);Â //returnsÂ "yayÂ yayÂ yayÂ testÂ test"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Resetlvl

Syntax

Description
This is a character reset command, meant mostly for rebirth script supporting Advanced jobs, which will reset the invoking character's stats and level depending on the action type given. Valid action types are:

1.  Base level 1, Job level 1, 0 skill points, 0 base xp, 0 job xp, wipes the status effects, sets all stats to 1.
2.  Base level 1, Job level 1, 0 skill points, 0 XP/JXP. Skills and attribute values are not altered.
3.  Base level 1, base xp 0. Nothing else is changed.
4.  Job level 1, job xp 0. Nothing else is changed.

In all cases it will also unequip everything the character has on.

Examples
[`resetlvl`](/resetlvl "wikilink")`Â 1;`
[`resetlvl`](/resetlvl "wikilink")`(1);`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Resnametable

The **resource name table** or resnametable, is responsible for creating pathname aliases for client-side files, regardless of whether inside or outside a [GRF](/GRF "wikilink") archive. The server can also read this file when [using GRFs for map data](/:Category:Configuration#Overriding_map-cache "wikilink"), as well. It is stored in `data\resnametable.txt`, typically inside the archive.

Usage
This file is used whenever a resource (file) is required to be known under different name, while maintaining the same data, mostly used for duplicating maps, but available for any kind of file. It is preferred to use this mechanism, as it avoids the need to copy files physically, thus saves space and improves system's cache performance. The path, to which pathnames relate to, appears to depend on the pathname's file extension, see [table below](/#Known_Base_Paths "wikilink").

Format
In use is a single-line 2-column [token text table](/Token_Text_Table "wikilink") format, whose 1st column holds the alias pathname and the 2nd column contains the pathname of the actual file.

`aliasÂ pathname#realÂ pathname#`

Example
`nguild_pay.rsw#payg_cas01.rsw#`
`nguild_pay.gat#payg_cas01.gat#`
`nguild_pay.gnd#payg_cas01.gnd#`
`ìœ ì €ì¸í„°íŽ˜ì´ìŠ¤\map\nguild_pay.bmp#ìœ ì €ì¸í„°íŽ˜ì´ìŠ¤\map\payg_cas01.bmp#`

This virtually copies the map payg_cas01 to nguild_pay.

Known Base Paths
| Extension | Path            |
|-----------|-----------------|
| bmp       | data\\texture\\ |
| gat       | data\\          |
| gnd       | data\\          |
| rsw       | data\\          |

[Category:Client Configuration](/Category:Client_Configuration "wikilink")

============================================================

## Restoring_SQL

Restoring a Backup
Issue this command from a Unix terminal:

Single Database:

       mysql -u root -p (databasename) < database_name.sql

Multiple Databases in one dump to a Single Database:

       mysql -u root - p --one-database (databasename) < all_databases.sql

============================================================

## Return

Syntax

Description
This command causes the script execution to leave previously called function with [callfunc](/callfunc "wikilink") or script with [callsub](/callsub "wikilink") and return to the location, where the call originated from. Optionally a return value can be supplied, when the call was done using the function form.

Using this command outside of functions or scripts referenced by callsub will result in error and termination of the script.

Examples
`Â Â Â Â `[`set`](/set "wikilink")`Â .@var,`[`callsub`](/callsub "wikilink")`(L_myAddition,.@a_val,.@b_val);`
`Â Â Â Â `[`mes`](/mes "wikilink")`Â "TheÂ resultÂ isÂ "+.@var+".";`
`Â Â Â Â `[`close`](/close "wikilink")`;`
`L_myAddition:`
`Â Â Â Â returnÂ `[`getarg`](/getarg "wikilink")`(0)+getarg(1);`

`Â Â Â Â setÂ .@var,`[`callfunc`](/callfunc "wikilink")`("MyAddition",.@a_val,.@b_val);`
`Â Â Â Â mesÂ "TheÂ resultÂ isÂ "+.@var+".";`
`Â Â Â Â close;`
`Â Â Â Â ...`
`functionÂ Â Â scriptÂ Â MyAdditionÂ Â {`
`Â Â Â Â returnÂ getarg(0)+getarg(1);`
`}`

Assuming .@a_val and .@b_val being 1, both examples would yield a message displaying, that the result is 2.

`Â Â Â Â mesÂ "OhÂ no...";`
`Â Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â Â callsubÂ L_scream;`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`L_scream:`
`Â Â Â Â `[`npctalk`](/npctalk "wikilink")`Â "Iiiiiiiiiiiiieeeeeeeeeeeeeeeeeeeeeeeeek!!!";`
`Â Â Â Â return;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## RGZ

An RGZ file is a proprietary compressed archive format used for [Ragnarok Online](/Ragnarok_Online "wikilink"), developed by [Gravity](http://en.wikipedia.org/wiki/Gravity_(company)). It is used for patching the local file system directory, the game client resides in. The archive mostly contains updated game executable or new background music files. The extension is always **.rgz** and might be an abbreviation for **ragnarok+gzip**.

File Format
The RGZ archive is a sequential concatenation of files and/or directories entries, compressed with [gzip](http://en.wikipedia.org/wiki/Gzip), much like [tar+gzip](http://en.wikipedia.org/wiki/Tar_(file_format)) archives are. Each entry inside the archive is defined by following structure:

| Field Offset | Field Size | Field                       |
|--------------|------------|-----------------------------|
| 0            | 1          | Entry type (case-sensitive) |
| 1            | 1          | File name field length      |
| 2            | ?          | File name (zero-terminated) |

The entry type specifies, what kind of data it represents. It can be **f** (file), **d** (directory) or **e** (end). The file name always denotes relative position of the file, inside the folder, the archive is patched to.

### File

A file entry can store any type of file, up to 2<sup>32</sup> - 1 Byte (4 [GiB](http://en.wikipedia.org/wiki/Gibibyte) - 1 Byte) in length. If the file is put into a sub-directory, the entire path is assumed to exist. A file entry always follows a directory entry, that creates the path in advance. The additional data in the file entry has the following structure:

| Field Offset | Field Size | Field                                                                     |
|--------------|------------|---------------------------------------------------------------------------|
| 0            | 4          | Data length ([little endian](http://en.wikipedia.org/wiki/Little_endian)) |
| 4            | ?          | Data                                                                      |

### Directory

Directory entries have no additional data, and create a single directory, not an entire path. That means if you want to create **dir1\\dir2** it requires two entries, one for **dir1** and the second for **dir2**.

### End

End entry is the last entry inside the archive, and makes the patcher stop parsing the archive. The file name for this entry is always **end**.

### Hex Workshop Definition File (ragnarok.hsl)

`/********************`
`*Â `
`*Â RagnarokÂ ResourceÂ filesÂ toÂ viewÂ andÂ edit`
`*`
`*/`
`#includeÂ "standard-types.hsl"`
`#pragmaÂ displayname("RagnarokÂ GZip")Â ;`
`#pragmaÂ fileextensions(".rgz")Â ;`
`#pragmaÂ byteorder(little_endian)Â `
`//#pragmaÂ maxarray(65536)`
`#pragmaÂ hide()`
`structÂ FILESTRUCT`
`{`
`Â Â Â BYTEÂ type;`
`Â Â Â `
`Â Â Â structÂ tagFILENAME`
`Â Â Â {`
`Â Â Â Â Â Â Â BYTEÂ length;`
`Â Â Â Â Â Â Â charÂ string[length];`
`Â Â Â };`
`Â Â Â `
`Â Â Â switchÂ (type)`
`Â Â Â {`
`Â Â Â Â Â Â Â caseÂ 0x66:`
`Â Â Â Â Â Â Â Â Â Â Â structÂ FILECONTENTS`
`Â Â Â Â Â Â Â Â Â Â Â {`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â DWORDÂ length;`
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â blobÂ Â contents[length];`
`Â Â Â Â Â Â Â Â Â Â Â };`
`Â Â Â Â Â Â Â Â Â Â Â break;`
`Â Â Â Â Â Â Â default:`
`Â Â Â Â Â Â Â `
`Â Â Â Â Â Â Â Â Â Â Â break;`
`Â Â Â };`
`Â Â Â `
`};`
`#pragmaÂ show()`
`structÂ files`
`{`
`Â Â Â structÂ FILESTRUCTÂ entries[256];`
`};`

Tools

See Also

[Category:File Formats](/Category:File_Formats "wikilink")

============================================================

## RID

Most scripting commands and functions will want to request data about a character, store variables referenced to that character, send stuff to the client connected to that specific character. Whenever a script is invoked by a character, it is passed a so-called RID - this is the account ID number of a character that caused the code to execute by clicking on it, walking into it's [OnTouch](/OnTouch "wikilink") zone, or otherwise.

Usage
When writing simple [NPCs](/NPC "wikilink") only, this topic will not require much attention. However, when using [functions](/Functions "wikilink"), [timers](/Timers_(Scripting) "wikilink"), or clock-based script activation, one requires to be aware of all cases when a script execution can be triggered without a RID attached. This will make a lot of commands and functions unusable, since they request data from a specific character, send data to a specific client, or store variables specific to a character, which are unavailable, if there's no RID, which refers to the character to work with, unless [attachrid](/attachrid "wikilink") is used to explicitly attach a character to the script first.

Whenever is stated *invoking character* or *currently attached character*, it actually means *the character whose RID is currently attached to the running script*. The script function [playerattached](/playerattached "wikilink") can be used to check which is the currently attached player to the script (it will return 0 if the there is no player attached or the attached player no longer is logged on to the map-server). The function [detachrid](/detachrid "wikilink") will explicitly set the RID to 0, so care must be taken, that follow-up commands do not depend on a character being attached, especially access to [temporary character variables](/Variables "wikilink").

[Category:Basics](/Category:Basics "wikilink") [Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Rid2name

Syntax

Description
This command returns a display name for given [RID](/RID "wikilink"). This is not only limited to players, but also displays name of [monsters](/mob "wikilink"), [NPCs](/NPC "wikilink"), pets, homunculus and mercenaries. If the RID is of unknown type, "" is returned together with an error. If there is no such RID, "(null)" is returned with an error. In both cases the script execution will continue.

Note, that [killedrid](/killedrid "wikilink") of a monster cannot be used in this command, because it is a mob class id.

Examples
`-Â Â scriptÂ Â DeathAnnouncerÂ Â -1,{`
[`OnPCDieEvent`](/OnPCDieEvent "wikilink")`:`
`Â Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "YouÂ haveÂ beenÂ killedÂ byÂ "+rid2name(`[`killerrid`](/killerrid "wikilink")`)+".";`
`Â Â Â Â `[`end`](/end "wikilink")`;`
`}`

This will announce to each player, whenever they get killed, who did the finishing blow.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Roclass

Syntax

Description
Does the opposite of [eaclass](/eaclass "wikilink"). That is, given a eA Job class, it returns which is the corresponding RO class number. A gender is required because both Bard and Dancers share the same eA Job value (EAJ_BARDDANCER), if it isn't given, the gender of the executing player is taken (if there's no player running the script, male will be used by default). The command returns -1 when there isn't a valid class to represent the required job (for example, if you try to get the baby version of a Taekwon class).

A list of all id's is in :

Examples
[`set`](/set "wikilink")`Â @eac,Â `[`eaclass`](/eaclass "wikilink")`();`
`//Â CheckÂ ifÂ classÂ isÂ alreadyÂ rebirth`
[`if`](/if "wikilink")`Â (@eacÂ &Â EAJL_UPPER)Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ lookÂ strong.";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`
[`set`](/set "wikilink")`Â @eac,Â `[`roclass`](/roclass "wikilink")`(@eacÂ |Â EAJL_UPPER);`
`//Â CheckÂ ifÂ classÂ hasÂ aÂ rebirthÂ version`
[`if`](/if "wikilink")`Â (@eacÂ !=Â -1)Â {`
`Â Â Â `[`mes`](/mes "wikilink")`Â "BetÂ youÂ can'tÂ waitÂ toÂ becomeÂ aÂ "+`[`jobname`](/jobname "wikilink")`(@eac)+"!";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## RO_Pixeling_Colors

RO Common Colors
There are several color gradients that appears in almost all RO color tables. Those are known as the RO common colors, and their use is recommendable for all new spriters (this way they will avoid making saturated or bright sprites).

Those colors are shown in the next image.

[center](/Image:GravityCommonColors.png "wikilink")

Solid And Neon Colors
At the bottom part of the image, we can see some solid colors, that are used as reference colors. Before coloring the sprites, we have to make the edges. Many spriters use these solid colors to make the edges since they are more visible than common RO colors.

Other Colors
There are certain sprites that don't look good with RO common colors and need new color gradients. An example is bronze color. It is a kind of bright brown with a bit of green. This color doesn't exist in RO and must be added to the color table by us.

On the other hand, there are several colors such black that appear only applied on certain sprites. There are more colors, like pink, gold and ice blue that appears on some sprites.

See Also

[Category:Spriting](/Category:Spriting "wikilink")

============================================================

## Sakray

**Sakray** is what official [Ragnarok Online](/Ragnarok_Online "wikilink") test servers are usually referred to. They are used to test new content and features, before they get installed on the normal servers. When the name "Sakray" is used alone, it typically refers to the kRO Sakray server. Sakray servers are always accessible via a separate client, which is available through a separate download.

History
### Renewal

Gravity discontinued the original Sakray development after June 17, 2009, where the last Sakray client was released, and replaced it with Sakray Renewal, which is mostly referred to as "Renewal" or "RE".

The intention for renewing Ragnarok Online, was partially the decreasing interest in the game, due to it's age and lack of features present in latest MMORPG, such as tabbed chat or safe skill point distribution, which were part of the first round of renewal, the interface renewal. Further changes include an overhaul in the stat, damage and experience calculation.

Usage
[Hexed](/Hexing "wikilink") kRO Sakray clients are the most used clients with [rAthena](/rAthena "wikilink"), although a few people prefer using kRO (live server) clients or clients from different service providers.

[Category:Basics](/Category:Basics "wikilink")

============================================================

## Savepoint

Syntax

Description
This command stores the location, where the [invoking character](/RID#Usage "wikilink") will be warped to, when re-spawning after death, getting warped out of a [WoE](/WoE "wikilink") castle or using skill Teleport Lv2. Map flags, which would otherwise prohibit setting a save point or warping to a map, are ignored by this script command. Both versions of the command are equivalent.

Examples
[`mes`](/mes "wikilink")`Â "[KafraÂ Employee]";`
`mesÂ "YourÂ RespawnÂ Point";`
`mesÂ "hasÂ beenÂ savedÂ here";`
`mesÂ "inÂ theÂ cityÂ ofÂ Payon.";`
`mesÂ "ThankÂ youÂ forÂ using";`
`mesÂ "theÂ KafraÂ Services.";`
`savepointÂ "payon",Â 257,Â 242;`
[`close2`](/close2 "wikilink")`;`
[`cutin`](/cutin "wikilink")`Â "",Â 255;`
[`end`](/end "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Screen

**Screen** is a full-screen window manager that multiplexes a physical terminal between several processes, typically interactive shells. Each virtual terminal provides the functions of the DEC VT100 terminal and, in addition, several control functions from the ANSI X3.64 (ISO 6429) and ISO 2022 standards (e.g., insert/delete line and support for multiple character sets). There is a scrollback history buffer for each virtual terminal and a copy-and-paste mechanism that allows the user to move text regions between windows. When screen is called, it creates a single window with a shell in it (or the specified command) and then gets out of your way so that you can use the program as you normally would. Then, at any time, you can create new (full-screen) windows with other programs in them (including more shells), kill the current window, view a list of the active windows, turn output logging on and off, copy text between windows, view the scrollback history, switch between windows, etc. All windows run their programs completely independent of each other. Programs continue to run when their window is currently not visible and even when the whole screen session is detached from the users terminal.

Do I have Screen?
Usually screen is already on some systems by default. to check if your system has screen simply type:

`screen`

If you get a bash error, you do not have Screen.

### So where is it?

Screen can be gotten many different ways and from many different places dependingon your operating system. Currently I only know a few. So those will be here. ALot of \*nix operating systems have there own repository of programs where you can get to them with a simple key phrase.

#### Gentoo

`emergeÂ -vpÂ screen`

If there is a package matching that it shoudl show. alternatively you can goto

[`http://packages.gentoo.org/search/?sstring=screen;offset=40`](http://packages.gentoo.org/search/?sstring=screen;offset=40)

which shows you if screen is there.

#### Fedora Core

`yumÂ searchÂ screen`

This should bring up a number of results. you want the one that says SCREEN.

#### Debian

[`http://packages.debian.org/stable/misc/screen`](http://packages.debian.org/stable/misc/screen)

You may also use debians easy to use apt=get. I suggest search first.

`apt-cacheÂ searchÂ screenÂ --names-only`

If it is there/present then do

`apt-getÂ screen`

The othe rmethod is to use wget and compile yourself.

`wgetÂ `[`http://ftp.debian.org/debian/pool/main/s/screen/screen_4.0.2.orig.tar.gz`](http://ftp.debian.org/debian/pool/main/s/screen/screen_4.0.2.orig.tar.gz)

#### Others

As with Debian, you can also use wget to retrieve the package for most other operating systems (given wget is installed!)

`wgetÂ `[`ftp://mirrors.kernel.org/gnu/screen/screen-4.0.2.tar.gz`](ftp://mirrors.kernel.org/gnu/screen/screen-4.0.2.tar.gz)

### Installing Screen

If you got it from a repository like with yum or emerge then th eoperating system installs it for you. If you downloaded it the old fashion way then you need to decompress the file and compile the program.

`tarÂ zxvfÂ screen-4.0.2.tar.gzÂ (Â orÂ whateverÂ it'sÂ calledÂ )`

After that

`cdÂ screen-4.0.2`
`./configure`
`make`
`makeÂ install`

This should configure/make/install screen If y ou run into any issues read the read me for screen. It is very thought out and decently written.

Using Screen
Screens interface is fairly simple. It seems the developers had the new \*nix crowd in mind when the developed it. Screens functions are

`screen`
`screenÂ -r`
`screenÂ -rÂ PID`
`screenÂ -wipe`
`screenÂ -help`

### Screen

This function Gets you INTO screen. Some systems require you to hit a key before proceeding into screen mode. TO get out of screen mode you type exit. There is another function in this mode called DETACH. This detahces your current screen allowing you to do other stuff while what you had running in screen is still runing. This is achieved by typing Ctrl+A and then Ctrl+D in that order in succesion.

### Screen -r

Screen -r shows you what screens are currently active. they show you whats active in the screens and what the screen PID's are. However if you only have ONE active screen it will auto matically attach that screen. Hint: if you just wanne get the list of active screen and you aren't sure if there is only one screen or more active type

`screenÂ --list`

or

`screenÂ -ls`

#### Screen -r PID

This function goes with Screen -r. Once you retrieve a PID of a screen you want to resume by using the command screen -r. You simply type in screen -r PID and the screen reattaches. The PID stands for Process ID.

SO lets say you wanted to resume a porno download that i slocated in a screen. And this screens PID is 13625. You would then type

`screenÂ -rÂ 13625`

and that screen would be reattached. You also can use the socketname (when its unique) when you started the screen with

`screenÂ -SÂ Socketname`

Example:

`screenÂ -SÂ Map-server`

#### Screen -D PID

This function Detaches a screen with is currently attached (used by another user or maybe a "ghost user"). You also can use Screen -D Socketname if you used a unique Socketname while starting the screen.

### Screen -Wipe

Screen -Wipe is used to wipe ALL dead screens. SOmetimes this command is needed after you are disconnected from your server via SSH while you have screens currently attached.

This command is needed when one of the following happen.

`ScreenÂ errorsÂ andÂ believesÂ someÂ screensÂ areÂ alreadyÂ attached`
`SomethingÂ happensÂ andÂ theÂ processesÂ areÂ noÂ longerÂ validÂ yetÂ screenÂ won'tÂ letÂ goÂ ofÂ them`

### Screen -Help

Normal Help Syntax to bring up the help menu. The current help should show th efollowing for you.

    Options:

Examples
### Starting/Stoping

#### SQL only

Edit: \*\*\*\*server.sh (3 Files) Replace

`./****-server`

With

`./****-server_sql`

#### Both

Create: Starting.sh (chmod 700)(For Fast Server Start up)

`screenÂ -AÂ -mÂ -dÂ -SÂ loginserverÂ ~/files/stable/login-server.sh`
`screenÂ -AÂ -mÂ -dÂ -SÂ charserverÂ ~/files/stable/char-server.sh`
`screenÂ -AÂ -mÂ -dÂ -SÂ mapserverÂ ~/files/stable/map-server.sh`

Create: Stoping.sh (chmod 700)(For fast server shut down... may result in a ~5 min rollback)

`screenÂ -SÂ mapserverÂ -XÂ quit`
`screenÂ -SÂ charserverÂ -XÂ quit`
`screenÂ -SÂ loginserverÂ -XÂ quit`

Console: Make sure all script ale executeable

`chmodÂ 700Â *.shÂ *_sql`

#### Using The Script


`./Starting.sh`


`./Stoping.sh`


`screenÂ -rÂ charserver`


`screenÂ -rÂ mapserver`


`screenÂ -rÂ loginserver`


`CtrlÂ +Â AÂ ThenÂ D`



`CtrlÂ +Â C`


`CtrlÂ +Â C`

Wait until server shut down completly and then press again (to prevent restart - else it autorestarts after 5 secounds)

`CtrlÂ +Â C`

Troubleshooting
Q: I cannot seem to get this to work.
A: Take your time and read the documentation. A lot is explained in there.

External Links
**Tutorials**
Various tutorials on the web about screen:


Disclaimer and copyrights
Some of the info contained in this guide were obtained from the GNU website as they created Screen. In cooperation with the GPL, this guide is freely distributable and usable by anybody unless used for the explicit purpose of gaining financial wealth.

This guide also conforms with XHTML and WC3 standards.

[Category:Technical Guides](/Category:Technical_Guides "wikilink")

============================================================

## Script_header

The [script header](/script_header "wikilink") is the first 15 or so lines of a script file that contain information identifying the script.

Example
    //===== rAthena Script =======================================
    //= Warper
    //===== By: ==================================================
    //= Darkchild
    //===== Current Version: =====================================
    //= 2.1
    //===== Compatible With: =====================================
    //= rAthena SVN
    //===== Description: =========================================
    //= Generic warper...
    //===== Additional Comments: =================================
    //=
    //============================================================

Format
### Script Name


`//=====Â rAthenaÂ ScriptÂ =======================================`
`//=Â Warper`

### Author Name


`//=====Â By:Â ==================================================`
`//=Â Darkchild`

### Current [Version](/wikipedia:Software_versioning "wikilink")


`//=====Â CurrentÂ Version:Â =====================================`
`//=Â 1.0`

### Compatible With


`//=====Â CompatibleÂ With:Â =====================================`
`//=Â rAthenaÂ SVN`


`//=====Â CompatibleÂ With:Â =====================================`
`//=Â rAthenaÂ SVN,Â revisionÂ 12345+`

### Description


`//=====Â Description:Â =========================================`
`//=Â GenericÂ warper...`

### Additional Comments


`//=====Â AdditionalÂ Comments:Â =================================`
`//=Â `
`//============================================================`


`//=====Â AdditionalÂ Comments:Â =================================`
`//=Â 1.0Â byÂ Darkchild`
`//=Â 1.1Â byÂ jabs`
`//=Â 1.2Â byÂ LupusÂ (placementÂ fixedÂ inÂ Amatsu)`
`//=Â 1.3Â fixedÂ LouyangÂ labelÂ typo,Â addedÂ warpÂ andÂ WARPRAÂ intoÂ `
`//=Â Â Â Â Â Nifleheim.Â AlsoÂ sortedÂ allÂ namesÂ inÂ alphabetÂ orderÂ [Lupus]`
`//=Â 1.4Â fixedÂ morrocÂ warpÂ npcÂ overlayingÂ kafraÂ [Aria]`
`//=Â 1.4aÂ AddedÂ AyothayaÂ andÂ EinbrochÂ toÂ list,Â andÂ townÂ Warpra'sÂ [Fredzilla]`
`//=Â 1.4bÂ fixedÂ IzludeÂ warpÂ npcÂ overlayingÂ BBSÂ [Justin84]`
`//=Â 1.5Â AddedÂ thisÂ NPCÂ toÂ moreÂ placesÂ [Lupus]`
`//=Â 1.6Â RewroteÂ aÂ lot.Â ChangedÂ theÂ sprite,Â someÂ locations.Â [Poki#3]`
`//=Â TODOÂ AddÂ anÂ optionÂ forÂ selectingÂ theÂ levelÂ ofÂ theÂ dungeon.Â [Poki#3]`
`//=Â 1.7Â Temporary?Â AddedÂ F_ClearGarbageÂ toÂ clearÂ unused/outdatedÂ variablesÂ [Lupus]`
`//=Â 1.8Â RemovedÂ DuplicatesÂ [Silent]`
`//=Â 1.9Â OptimizedÂ forÂ theÂ greaterÂ good.Â [Kisuka]`
`//=Â 2.0Â FixedÂ warpÂ forÂ AntHellÂ andÂ Yuno.Â [Kisuka]`
`//=Â 2.1Â MovedÂ AntHellÂ warpÂ agentÂ toÂ theÂ newÂ anthellÂ entrance.Â [brianluau]`
`//============================================================`

Other Guidelines

`//=Â 1.3Â fixedÂ LouyangÂ labelÂ typo,Â addedÂ warpÂ andÂ WARPRAÂ intoÂ `
`//=Â Â Â Â Â Nifleheim.Â AlsoÂ sortedÂ allÂ namesÂ inÂ alphabetÂ order.Â [Lupus]`


`//=Â 1.3Â fixedÂ LouyangÂ labelÂ typo,Â addedÂ warpÂ andÂ WARPRAÂ intoÂ `
`//=Â Â Â Â Â Nifleheim.Â AlsoÂ sortedÂ allÂ namesÂ inÂ alphabetÂ order.Â [Lupus]`


[Category:RAthena](/Category:RAthena "wikilink")

============================================================

## Scr_logo.bmp

[frame|Default kRO screen-shot watermark.](/Image:scr_logo.png "wikilink")**scr_logo.bmp** is the branding/watermark image in the bottom-right corner in screen-shots taken inside the Ragnarok Online client, typically displaying the RO server's homepage address on official servers.

Customization
The file is stored in **data\\texture\\scr_logo.bmp** and can be either 8-bit or 24-bit bitmap. Magenta () colored areas will become transparent, when put on the screen-shot. Images with little or no gradients should be preferred, as the quality suffers from JPEG artifacts upon saving.

[Category:Client Configuration](/Category:Client_Configuration "wikilink")

============================================================

## Sc_start

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
These command bestow a status effect on the invoking character. This command is used a lot in the item scripts.

Effect type is a number of effect, lists the common (mostly negative) status effect types as constants, starting with 'SC_'. You can also use this to give someone an effect of a player-cast spell.

Extra argument's meaning differs depending on the effect type, for most effects caused by a player skill the extra argument means the level of the skill that would have been used to create that effect, for others it might have no meaning whatsoever. You can actually bless someone with a 0 bless spell level this way, which is fun, but weird.

The target ID number, if given, will cause the status effect to appear on a specified character, instead of the one attached to the running script. This has not been properly tested.

'[sc_start2](/sc_start2 "wikilink")' is perfectly equivalent, but unlike '[sc_start](/sc_start "wikilink")', a status change effect will only occur with a specified percentage chance. 10000 given as the chance is equivalent to a 100% chance, 0 is a zero.

'[sc_start4](/sc_start4 "wikilink")' is just like '[sc_start](/sc_start "wikilink")', however it takes four parameters for the status change instead of one. What these values are depends on the status change in question. For example, elemental armor defense takes the following four values: - val1 is the first element, val2 is the resistance to the element val1. - val3 is the second element, val4 is the resistance to said element. eg: [sc_start4](/sc_start4 "wikilink") SC_DefEle,60000,Ele_Fire,20,Ele_Water,-15;

'[sc_end](/sc_end "wikilink")' will remove a specified status effect. If SC_All is used (-1), it will do a complete removal of all statuses (although permanent ones will re-apply).

You can see the full list of status effects caused by skills in - they are currently not fully documented, but most of that should be rather obvious.

Examples
        // This would poison them for 10 min
        sc_start SC_Poison,600000,0;

        // This will bless someone as if with Bless 10:
        sc_start 10,240000,10;

============================================================

## Searchitem

Syntax

Description
This command will fill the given array with the ID of items whose name matches the given one. It returns the number of items found. For performance reasons, the results array is limited to 10 items.

Examples
`Â Â Â `[`mes`](/mes "wikilink")`Â "WhatÂ itemÂ areÂ youÂ lookingÂ for?";`
`Â Â Â `[`input`](/input "wikilink")`Â @name$;`
`Â Â Â `[`set`](/set "wikilink")`Â @qty,Â `[`searchitem`](/searchitem "wikilink")`(@matches[0],@name$);`
`Â Â Â `[`mes`](/mes "wikilink")`Â "IÂ foundÂ "+@qty+"Â items:";`
`Â Â Â `[`for`](/for "wikilink")`Â (`[`set`](/set "wikilink")`Â @i,Â 0;Â @iÂ <Â @qty;Â `[`set`](/set "wikilink")`Â @i,Â @i+1)`
`Â Â Â Â Â Â Â //DisplayÂ nameÂ (eg:Â "Apple[0]")`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â `[`getitemname`](/getitemname "wikilink")`(@matches[@i])+"["+`[`getitemslots`](/getitemslots "wikilink")`(@matches[@i])+"]";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Select

Syntax

Description
This function is a handy replacement for '[menu](/menu "wikilink")' for some specific cases where you don't want a complex label structure - like, for example, asking simple yes-no questions. It will return the number of menu option picked, starting with 1. Like '[menu](/menu "wikilink")', it will also set the variable @menu to contain the option the user picked.

And like '[menu](/menu "wikilink")', the selected option is consistent with grouped options and empty options.

'[prompt](/prompt "wikilink")' works almost the same as '[select](/select "wikilink")', except that when a character clicks the Cancel button, this function will return 255 instead.

Examples
[`if`](/if "wikilink")`(`[`select`](/select "wikilink")`("Yes:No")Â ==Â 1)Â `[`mes`](/mes "wikilink")`Â "YouÂ saidÂ yes,Â IÂ know.";`
[`select`](/select "wikilink")`("21","22","23");`
[`set`](/set "wikilink")`Â .@opt,20+@menu;`
[`set`](/set "wikilink")`Â .@choice$,"Apple:Banana:Lemon";`
[`select`](/select "wikilink")`(.@choice$);`
[`explode`](/explode "wikilink")`(.@option$,.@choice$,":");`
[`mes`](/mes "wikilink")`Â "YouÂ haveÂ chosenÂ "+.@option$[@menu-1];`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Server_Modification

You can find here some information to start making server-side source modifications.

How rAthena works
rAthena has a multi-process architecture. It runs three different processes: **login-server**, **char-server** and **map-server**.

### Login Server

**Login server** **:** receives the login packet, checks if account exists and if the password is correct. If all is OK, the connection is then passed to the **char-server**.

### Char-Server

**Char-server** **:** controls all the character related, Guild, party, pet, inventory etc.

### Map-Server

The last one is the **map-server**, which controls char and NPC position, chats, skills, exp etc.

Source Modifications
Before you start modifying rA, you should better take a look first on [:Category:Source_Functions](/:Category:Source_Functions "wikilink"). Remember, it's necessary to [re-compile](/Compiling "wikilink") [rAthena](/rAthena "wikilink") after a source modification. You can also find information about [packets](/packets "wikilink").

### Pre-Made Modifications

Also can take a look at modifications made by other users.


[Category:Customization](/Category:Customization "wikilink")

============================================================

## Server_Monitoring_and_Protection

Following tips are intended to point out important tasks while running your server, to avoid 3rd-party disturbances, including but not limited to hacking, cheating and service outage.

Setup a firewall
This is one way in protecting your system from unwanted attacks. But just placing the firewall is just lame. So, to use some ports for eA, allow ports 6900,6121 and 5121(The default) or the ports you use for rAthena to accept incoming connections, since this is a server. Close unneeded ports for security reasons. Configure your firewall as you please. And always update it so that you get the latest protection from hackers.

Monitor your rAthena server for unusual activity
Monitoring the server will help you on figuring out if you are already being hacked. If you see something unusual and can't figure it out immediately, check it in-game. Then try to figure out what's happening. If you still can't find it out immediately, shutdown the server for a while. Then turn it on again. If that happens again, recheck again. Repeat the process to find out who or what's hacking you.

Check your scripts for possible malicious code
A lot of *clone* type sites mimicking rAthena have sprung up over time, offering support and scripts. However, sometimes, these scripts or other things that they offer, are embedded with unwanted **SQL queries** or **atcommands**. The creator will wait for you to install it and then they will use it to gain access to things normally they could not.

A good way to check (if you're using Windows) is to navigate to your folder where all your scripts are located. It is a good idea to keep scripts that you've either obtained or created separate from the ones that come from the emulator, as 99% of the standard scripts included in the rAthena SVN are safe from possible exploits.

Open up your search bar. Now look for the area that allows you to search "for files containing...". Inside that bar, search for "query_sql" & "atcommand".

Then search!

A list will then pop up. Some things will show up and that's okay. Some scripts would be very hard to script, or would not simply work without the SQL or the atcommand. However, the key is go over and to make sure that each script that uses SQL or the atcommand is safe and isn't something else that someone left there to exploit later on.

Constantly monitor your server's save data
Your SQL DB's of your server, if you are using SQL, or the files in the /save/ folder in your server folder, if you are using TXT. This is an alternative for checking what/who is hacking you. Constantly check for unusual inputs in an account. This helps especially when the hacker tried to duplicate Zeny or something like that.

Record server logs
Recording the logs may help in resolving the problem. I know some Server Managers that saves all the logs of the server. IP's are recorded in the logs. So, if you see that an IP just done an unusual thing, check it. If this is confirmed and had made something really bad, ban the IP.

Update your OS
Updating is a good way to protect your system. The updates usually contains security fixes, which is helpful in protecting the system. If the updates for your operating system are released at fixed intervals (e.g. Windows), consider adjusting your weekly maintenance times to do both during the downtime; maintaining the server and updating of your operating system.

============================================================

## Server_Time_Configuration_Linux

We'll get straight to the point. The information below will help you configure your **Server Time** according to different parts of the world. You will be prompted to select several time zone options. For this example, we'll be using Pacific Time.

Launch : **tzselect** in cli (command line interface)

    Please identify a location so that time zone rules can be set correctly.
      Please select a continent or ocean.
       1) Africa
       2) Americas
       3) Antarctica
       4) Arctic Ocean
       5) Asia
       6) Atlantic Ocean
       7) Australia
       8) Europe
       9) Indian Ocean
      10) Pacific Ocean
      11) none - I want to specify the time zone using the Posix TZ format.
      #?

Enter your desired region:

    2

      Please select a country.
       1) Anguilla           27) Honduras
       2) Antigua & Barbuda      28) Jamaica
       3) Argentina          29) Martinique
       4) Aruba          30) Mexico
       5) Bahamas            31) Montserrat
       6) Barbados           32) Netherlands Antilles
       7) Belize             33) Nicaragua
       8) Bolivia            34) Panama
       9) Brazil             35) Paraguay
      10) Canada             36) Peru
      11) Cayman Islands         37) Puerto Rico
      12) Chile          38) St Barthelemy
      13) Colombia           39) St Kitts & Nevis
      14) Costa Rica             40) St Lucia
      15) Cuba           41) St Martin (French part)
      16) Dominica           42) St Pierre & Miquelon
      17) Dominican Republic         43) St Vincent
      18) Ecuador            44) Suriname
      19) El Salvador            45) Trinidad & Tobago
      20) French Guiana      46) Turks & Caicos Is
      21) Greenland          47) United States
      22) Grenada            48) Uruguay
      23) Guadeloupe             49) Venezuela
      24) Guatemala          50) Virgin Islands (UK)
      25) Guyana             51) Virgin Islands (US)
      26) Haiti
      #?

Select a country:

    47

      Please select one of the following time zone regions.
       1) Eastern Time
       2) Eastern Time - Michigan - most locations
       3) Eastern Time - Kentucky - Louisville area
       4) Eastern Time - Kentucky - Wayne County
       5) Eastern Time - Indiana - most locations
       6) Eastern Time - Indiana - Daviess, Dubois, Knox & Martin Counties
       7) Eastern Time - Indiana - Starke County
       8) Eastern Time - Indiana - Pulaski County
       9) Eastern Time - Indiana - Crawford County
      10) Eastern Time - Indiana - Switzerland County
      11) Central Time
      12) Central Time - Indiana - Perry County
      13) Central Time - Indiana - Pike County
      14) Central Time - Michigan - Dickinson, Gogebic, Iron & Menominee Counties
      15) Central Time - North Dakota - Oliver County
      16) Central Time - North Dakota - Morton County (except Mandan area)
      17) Mountain Time
      18) Mountain Time - south Idaho & east Oregon
      19) Mountain Time - Navajo
      20) Mountain Standard Time - Arizona
      21) Pacific Time
      22) Alaska Time
      23) Alaska Time - Alaska panhandle
      24) Alaska Time - Alaska panhandle neck
      25) Alaska Time - west Alaska
      26) Aleutian Islands
      27) Hawaii
    #?

Select a time zone:

    21

      The following information has been given:

        United States
        Pacific Time

      Therefore TZ='America/Los_Angeles' will be used.
      Local time is now:    Fri Feb 27 10:08:21 PST 2009.
      Universal Time is now:    Fri Feb 27 18:08:21 UTC 2009.
      Is the above information OK
      1) Yes
      2) No
      #?

Confirm your choice:

    1

      You can make this change permanent for yourself by appending the line
        TZ='America/Los_Angeles'; export TZ
      to the file '.profile' in your home directory; then log out and log in again.

      Here is that TZ value again, this time on standard output so that you
      can use the /usr/bin/tzselect command in shell scripts:
      America/Los_Angeles

============================================================

## Set

As of the usage of [set](/set "wikilink") has become obsolete and is no longer a requirement.

Syntax

Description
This command will set a variable to the value that the expression results in.
This is the most basic script command and is used a lot whenever you try to do anything more advanced than just printing text into a message box.

Returns the variable reference (since trunk ).

Examples
[`set`](/set "wikilink")`Â .@x,100;Â Â //Â willÂ makeÂ .@xÂ equalÂ 100.`
[`set`](/set "wikilink")`Â .@x,1+5/8+9;Â Â //Â willÂ computeÂ 1+5/8+9Â (whichÂ is,Â surprisingly,Â 10Â -Â remember,Â allÂ numbersÂ areÂ integerÂ inÂ thisÂ language)Â andÂ makeÂ .@xÂ equalÂ it.`

or

`.@xÂ =Â 100;Â Â //Â willÂ makeÂ .@xÂ equalÂ 100.`
`.@xÂ =Â 1+5/8+9;Â Â //Â willÂ computeÂ 1+5/8+9Â (whichÂ is,Â surprisingly,Â 10Â -Â remember,Â allÂ numbersÂ areÂ integerÂ inÂ thisÂ language)Â andÂ makeÂ .@xÂ equalÂ it.`

For more information read: [r15982: Script Engine Update](http://rathena.org/board/topic/62395-r15982-script-engine-update/)

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Setarray

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will allow you to quickly fill up an array in one go. Check the Kafra scripts in the distribution to see this used a lot.

First value is the index of the first element of the array to alter.

Examples
        setarray .@array[0],200,200,200;
        setarray .@array[1],300,150;
        // will produce:
        // .@array[0]=200
        // .@array[1]=300
        // .@array[2]=150

============================================================

## Setbattleflag

Syntax

Description
Sets or gets the value of the given battle flag. Battle flags are the flags found in the battle/\*.conf files and is also used in Lupus' variable rates script.

Examples
`//Â WillÂ setÂ theÂ baseÂ experienceÂ rateÂ toÂ 20xÂ (2000%)`
`Â Â Â `[`setbattleflag`](/setbattleflag "wikilink")`Â "base_exp_rate",2000;`
`Â Â Â `
`//Â WillÂ returnÂ theÂ valueÂ ofÂ theÂ baseÂ experienceÂ rateÂ (whenÂ usedÂ afterÂ theÂ aboveÂ example,Â itÂ wouldÂ printÂ 2000).`
`Â Â Â `[`mes`](/mes "wikilink")`Â `[`getbattleflag`](/getbattleflag "wikilink")`("base_exp_rate");`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Setcart

Syntax

Description
If <type> is 0 this command will remove the cart from the character. Otherwise it gives the invoking character a cart. The cart given will be cart number <type> and will work regardless of whether the character is a merchant class or not.

Note: the character needs to have the skill MC_PUSHCART to gain a cart

Return Values
| Value | Description                        |
|-------|------------------------------------|
| 0     | The Character doesn't have a cart. |
| 1     | The Character has a cart.          |

Examples
[`if`](/if "wikilink")`(`[`hasquest`](/hasquest "wikilink")`(50000))`
`Â Â Â `[`if`](/if "wikilink")`(`**`checkcart`**`())Â `[`mes`](/mes "wikilink")`Â "ButÂ youÂ alreadyÂ haveÂ aÂ cart!";`
`Â Â Â `[`else`](/else "wikilink")`Â `[`setcart`](/setcart "wikilink")`Â 1;`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Setcell

Syntax

Description
Each map cell has several 'flags' that specify the properties of that cell. These include terrain properties (walkability, shootability, presence of water), skills (basilica, land protector, ...) and other (NPC nearby, no vending, ...). Each of these can be 'on' or 'off'. Together they define a cell's behavior.

This command lets you alter these flags for all map cells in the specified (x1,y1)-(x2,y2) rectangle. The 'flag' can be 0 or 1 (0:clear flag, 1:set flag). The 'type' defines which flag to modify. Possible options include cell_walkable, cell_shootable, cell_basilica. For a full list, see

Examples
This will add a makeshift ring into the center of the map. The ring will be surrounded by a 5-cell wide 'gap' to prevent interference from outside, and the rest of the map will be marked as 'basilica', preventing observers from casting any offensive skills or fighting among themselves. Note that the wall will not be shown nor known client-side, which may cause movement problems.

[`setcell`](/setcell "wikilink")`Â "arena",0,0,300,300,cell_basilica,1;`
[`setcell`](/setcell "wikilink")`Â "arena",140,140,160,160,cell_basilica,0;`
[`setcell`](/setcell "wikilink")`Â "arena",135,135,165,165,cell_walkable,0;`
[`setcell`](/setcell "wikilink")`Â "arena",140,140,160,160,cell_walkable,1;`

This next example could be a part of the WoE:SE script, where attackers are not allowed to proceed until all barricades are destroyed. This script would place and remove a nonwalkable row of cells after the barricade mobs.

`OnBarricadeDeploy:`
`Â Â Â `[`setcell`](/setcell "wikilink")`Â "schg_cas05",114,51,125,51,cell_walkable,0;`
`Â Â Â `[`end`](/end "wikilink")`;`
`OnBarricadeBreak:`
`Â Â Â setcellÂ "schg_cas05",114,51,125,51,cell_walkable,1;`
`Â Â Â end;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Setchar

Syntax

Description
Returns the original string with the char at the specified index set to the specified char. If index out of range, the original string will be returned. Only the 1st char in the <char> parameter will be used.

The first letter of a string is index 0.

Examples
[`setchar`](/setchar "wikilink")`("Cat",Â "B",Â 0);Â //returnsÂ "Bat"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Setd

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
Works almost identical as [set](/set "wikilink"), just that the variable name is identified as a string, thus can be constructed dynamically.

This command is equivalent to:

`setÂ `[`getd`](/getd "wikilink")`("variableÂ name"),`<value>`;`

Examples
`setÂ .@mob_id,Â 1002;`
`setdÂ ".prize_"Â +Â .@mob_id,Â 911;Â //Â setsÂ theÂ valueÂ ofÂ .prize_1002Â toÂ 911`

============================================================

## Setfont

Syntax

Description
This command sets the current RO client interface font to one of the fonts stored in data\\\*.eot by using an ID of the font. When the ID of the currently used font is used, default interface font is used again.

`0Â -Â Default`
`1Â -Â RixLoveangel`
`2Â -Â RixSquirrel`
`3Â -Â NHCgogo`
`4Â -Â RixDiary`
`5Â -Â RixMiniHeart`
`6Â -Â RixFreshman`
`7Â -Â RixKid`
`8Â -Â RixMagic`
`9Â -Â RixJJangu`

Examples
[`setfont`](/setfont "wikilink")`Â 1;`
[`mes`](/mes "wikilink")`Â "YouÂ willÂ nowÂ beÂ usingÂ theÂ RixÂ LoveÂ AngelÂ Font";`
[`close`](/close "wikilink")`;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Setiteminfo

Syntax

Description
This function will set some value of an item. Returns the new value on success, or -1 on fail (item_id not found or invalid type).

Valid types are:

<table>
<tbody>
<tr class="odd">
<td><p>0</p></td>
<td><p>Buy Price</p></td>
</tr>
<tr class="even">
<td><p>1</p></td>
<td><p>Sell Price</p></td>
</tr>
<tr class="odd">
<td><p>2</p></td>
<td><p>Item Type</p></td>
</tr>
<tr class="even">
<td><p>3</p></td>
<td><p>maxchance (Max drop chance of this item e.g. 1 = 0.01% , etc..</p>
<p><code>ifÂ =Â 0,Â thenÂ monstersÂ don'tÂ dropÂ itÂ atÂ allÂ (rareÂ orÂ aÂ questÂ item)</code><br />
<code>ifÂ =Â 10000,Â thenÂ thisÂ itemÂ isÂ soldÂ inÂ NPCÂ shopsÂ only</code></p></td>
</tr>
<tr class="odd">
<td><p>4</p></td>
<td><p>sex</p></td>
</tr>
<tr class="even">
<td><p>5</p></td>
<td><p>equip</p></td>
</tr>
<tr class="odd">
<td><p>6</p></td>
<td><p>weight (each 10 is 1 weight)</p></td>
</tr>
<tr class="even">
<td><p>7</p></td>
<td><p>atk</p></td>
</tr>
<tr class="odd">
<td><p>8</p></td>
<td><p>def</p></td>
</tr>
<tr class="even">
<td><p>9</p></td>
<td><p>range</p></td>
</tr>
<tr class="odd">
<td><p>10</p></td>
<td><p>slot</p></td>
</tr>
<tr class="even">
<td><p>11</p></td>
<td><p>look</p></td>
</tr>
<tr class="odd">
<td><p>12</p></td>
<td><p>elv</p></td>
</tr>
<tr class="even">
<td><p>13</p></td>
<td><p>wlv</p></td>
</tr>
<tr class="odd">
<td><p>14</p></td>
<td><p>view id</p></td>
</tr>
</tbody>
</table>

Examples
**`setiteminfo`**`Â 7049,6,9990;Â //Â StoneÂ nowÂ weighsÂ 999.0`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Setitemscript

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
Set a new script bonus to the Item. Very useful for game events. You can remove an item's itemscript by leaving empty the itemscript argument.

Parameters
### Flag

Denotes which script of the item to modify. Default value is 0

| Flag | Script Type       |
|------|-------------------|
| 0    | Script            |
| 1    | On Equip Script   |
| 2    | On Unequip Script |

Examples
    setitemscript 2637,"{ if(isequipped(2236)==0)end; if(getskilllv(26)){skill 40,1;}else{skill 26,1+isequipped(2636);} }";
    setitemscript 2639,"";

============================================================

## Setmadogear

[Category:Script Command](/Category:Script_Command "wikilink")

Syntax

Description
### checkmadogear

This allows you to check if the character has already mounted a Mado.

### setmadogear

If <flag> is set to 0, this command will remove the mount from the character. Otherwise it gives the invoking character a Mado (if they are a Mechanic).

The accompanying function will return 1 if the invoking character has a Mado and 0 if they don't.

Example
Here are some sample scripts which might be a help to you:

### checkmadogear Sample

`if(Â checkmadogear()Â )`
`Â Â Â Â Â Â Â Â dispbottomÂ "YouÂ areÂ alreadyÂ mountedÂ aÂ Mado!";`
`else`
`Â Â Â Â Â Â Â Â dispbottomÂ "YouÂ don'tÂ haveÂ Mado";`

### setmadogear Sample

`if(Â checkdmadogear()Â )Â {`
`Â Â Â Â Â mesÂ "YouÂ areÂ alreadyÂ mounting";`
`Â Â Â Â Â close;`
`Â Â }Â elseÂ {Â `
`Â Â Â Â Â Â Â Â Â Â setmadogear;`
`Â Â }`

You can check as well the official rAthena Universal NPC ([trunk/npc/custom/breeder.txt](https://rathena.svn.sourceforge.net/svnroot/rathena/trunk/npc/custom/breeder.txt)) as a reference.

============================================================

## Setmapflag

Syntax

Description
This command marks a specified map with a map flag given. Map flags alter the behavior of the map, you can see the list of the available ones in '' under 'mf_'.

The map flags alter the behavior of the map regarding teleporting (mf_nomemo, mf_noteleport, mf_nowarp, mf_nogo), storing location when disconnected (mf_nosave), dead branch usage (mf_nobranch), penalties upon death (mf_nopenalty, mf_nozenypenalty), PVP behavior (mf_pvp, mf_pvp_noparty, mf_pvp_noguild), WoE behavior (mf_gvg,mf_gvg_noparty), ability to use skills or open up trade deals (mf_notrade, mf_novending, mf_noskill, mf_noicewall), current weather effects (mf_snow, mf_fog, mf_sakura, mf_leaves, mf_rain, mf_clouds, mf_fireworks) and whether night will be in effect on this map (mf_nightenabled).

The zone optional parameter is used to set the zone for restricted mapflags.

Examples
`//Â ThisÂ setsÂ theÂ 'novending'Â mapflagÂ onÂ Prontera`
`setmapflagÂ "prontera",Â mf_novending;`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Setnpctimer

Syntax

Description
The '[setnpctimer](/setnpctimer "wikilink")' is a command that will explicitly set a NPC timer to a given tick.

Example
Here is an example which will help you to understand how the **setnpctimer** command works.

[`OnTimer`](/OnTimer "wikilink")`15000:`
[`set`](/set "wikilink")`Â $quote,rand(5);`
[`if`](/if "wikilink")`($quoteÂ ==Â 0)Â gotoÂ Lquote0;`
`if($quoteÂ ==Â 1)Â `[`goto`](/goto "wikilink")`Â Lquote1;`
`if($quoteÂ ==Â 2)Â gotoÂ Lquote2;`
`if($quoteÂ ==Â 3)Â gotoÂ Lquote3;`
`if($quoteÂ ==Â 4)Â gotoÂ Lquote4;`
`Â Â Â Â Â Lquote0:`
`Â Â Â Â Â `[`npctalk`](/npctalk "wikilink")`Â "IfÂ 0Â isÂ randomlyÂ pickedÂ youÂ willÂ seeÂ this";`
`Â Â Â Â Â `**`setnpctimer`**`Â 0;`
`Â Â Â Â Â `[`end`](/end "wikilink")`;`
`Â Â Â Â Â Lquote1:`
`Â Â Â Â Â npctalkÂ "IfÂ 1Â isÂ randomlyÂ pickedÂ youÂ willÂ seeÂ this";`
`Â Â Â Â Â `**`setnpctimer`**`Â 0;`
`Â Â Â Â Â end;`
`Â Â Â Â Â Lquote2:`
`Â Â Â Â Â npctalkÂ "IfÂ 2Â isÂ randomlyÂ pickedÂ youÂ willÂ seeÂ this";`
`Â Â Â Â Â `**`setnpctimer`**`Â 0;`
`Â Â Â Â Â end;`
`Â Â Â Â Â Lquote3:`
`Â Â Â Â Â npctalkÂ "IfÂ 3Â isÂ randomlyÂ pickedÂ youÂ willÂ seeÂ this";`
`Â Â Â Â Â `**`setnpctimer`**`Â 0;`
`Â Â Â Â Â end;`
`Â Â Â Â Â Lquote4:Â `
`Â Â Â Â Â npctalkÂ "IfÂ 4Â isÂ randomlyÂ pickedÂ youÂ willÂ seeÂ this";`
`Â Â Â Â Â `**`setnpctimer`**`Â 0;`
`Â Â Â Â Â end;`

============================================================

## Setriding

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
If <flag> is 0 this command will remove the mount from the character. Otherwise it give the invoking character a PecoPeco (if they are a Knight series class) or a GrandPeco (if they are a Crusader seriesclass). Unlike 'setfalcon' and 'setcart' this will not work at all if they aren't of a class which can ride.

Return Values
| Value | Description                                                    |
|-------|----------------------------------------------------------------|
| 0     | Will return if the player has a peco and remove it.            |
| 1     | Will return if the player does not have a peco and set a peco. |

Fact
Remember to check if the player is riding before setting a peco.

Examples
    if(BaseJob != Job_Swordman && BaseClass == Job_Swordman && checkriding() == 0 && getskilllv("KN_RIDING") > 0)
        setriding;
    close;

============================================================

## Setup_LAMP_on_CentOS

Setup LAMP on CentOS
LAMP is short for Linux, Apache, MySQL, PHP. This tutorial shows how you can install an Apache2 webserver on a CentOS server with PHP5 support (mod_php) and MySQL support.

##### 1. Installing MySQL 5

To install MySQL, we do this:

    yum install mysql mysql-server

Then we create the system startup links for MySQL (so that MySQL starts automatically whenever the system boots) and start the MySQL server:

    chkconfig --levels 235 mysqld on
    /etc/init.d/mysqld start

Set passwords for the MySQL root account:

    mysql_secure_installation

Then do it like this:

    [root@server1 ~]# mysql_secure_installation




    NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL
          SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!


    In order to log into MySQL to secure it, we'll need the current
    password for the root user.  If you've just installed MySQL, and
    you haven't set the root password yet, the password will be blank,
    so you should just press enter here.

    Enter current password for root (enter for none):
    OK, successfully used password, moving on...

    Setting the root password ensures that nobody can log into the MySQL
    root user without the proper authorisation.

    Set root password? [Y/n] <-- ENTER
    New password: <-- yourrootsqlpassword
    Re-enter new password: <-- yourrootsqlpassword
    Password updated successfully!
    Reloading privilege tables..
     ... Success!


    By default, a MySQL installation has an anonymous user, allowing anyone
    to log into MySQL without having to have a user account created for
    them.  This is intended only for testing, and to make the installation
    go a bit smoother.  You should remove them before moving into a
    production environment.

    Remove anonymous users? [Y/n] <-- ENTER
     ... Success!

    Normally, root should only be allowed to connect from 'localhost'.  This
    ensures that someone cannot guess at the root password from the network.

    Disallow root login remotely? [Y/n] <-- ENTER
     ... Success!

    By default, MySQL comes with a database named 'test' that anyone can
    access.  This is also intended only for testing, and should be removed
    before moving into a production environment.

    Remove test database and access to it? [Y/n] <-- ENTER
     ... Success!
     ... Success!

    Reloading the privilege tables will ensure that all changes made so far
    will take effect immediately.

    Reload privilege tables now? [Y/n] <-- ENTER
     ... Success!

    Cleaning up...



    All done!  If you've completed all of the above steps, your MySQL
    installation should now be secure.

    Thanks for using MySQL!


    [root@server1 ~]#

#### 2. Installing Apache2

Apache2 is available as a CentOS package, therefore we can install it like this:

    yum install httpd

Now configure your system to start Apache at boot time...

    chkconfig --levels 235 httpd on

... and start Apache:

    /etc/init.d/httpd start

Now direct your browser to *<http://your-ip>* , and you should see the Apache2 placeholder page.

#### 3. Installing PHP5

We can install PHP5 and the Apache PHP5 module as follows:

    yum install php

We must restart Apache afterwards:

    /etc/init.d/httpd restart

#### 4. Getting MySQL Support In PHP5

To get MySQL support in PHP, we can install the php-mysql package. It's a good idea to install some other PHP5 modules as well as you might need them for your applications. You can search for available PHP5 modules like this:

    yum search php

Pick the ones you need and install them like this:

    yum install php-mysql php-gd php-imap php-ldap php-mbstring php-odbc php-pear php-xml php-xmlrpc

APC is a free and open PHP opcode cacher for caching and optimizing PHP intermediate code. It's similar to other PHP opcode cachers, such as eAccelerator and Xcache. It is strongly recommended to have one of these installed to speed up your PHP page.

APC can be installed as follows:

    yum install php-pecl-apc

Now restart Apache2:

    /etc/init.d/httpd restart

#### 5. phpMyAdmin

phpMyAdmin is a web interface through which you can manage your MySQL databases.

First we enable the RPMforge repository on our CentOS system as phpMyAdmin is not available in the official CentOS 6.3 repositories:

Import the RPMforge GPG key:

    rpm --import http://dag.wieers.com/rpm/packages/RPM-GPG-KEY.dag.txt

On x86_64 systems:

    yum install http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm

On i386 systems:

    yum install http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.i686.rpm

phpMyAdmin can now be installed as follows:

    yum install phpmyadmin

Now we configure phpMyAdmin. We change the Apache configuration so that phpMyAdmin allows connections not just from localhost (by commenting out the <Directory "/usr/share/phpmyadmin"> stanza):

    nano /etc/httpd/conf.d/phpmyadmin.conf

    #
    #  Web application to manage MySQL
    #

    #<Directory "/usr/share/phpmyadmin">
    #  Order Deny,Allow
    #  Deny from all
    #  Allow from 127.0.0.1
    #</Directory>

    Alias /phpmyadmin /usr/share/phpmyadmin
    Alias /phpMyAdmin /usr/share/phpmyadmin
    Alias /mysqladmin /usr/share/phpmyadmin

Next we change the authentication in phpMyAdmin from cookie to http:

    nano /usr/share/phpmyadmin/config.inc.php

    [...]
    /* Authentication type */
    $cfg['Servers'][$i]['auth_type'] = 'http';
    [...]

Restart Apache:

    /etc/init.d/httpd restart

Afterwards, you can access phpMyAdmin under *<http://your-ip/phpmyadmin/>*

That's all folks, I hope that this helps to make Web Server for RO up and running.

============================================================

## Setwall

Syntax
    <dir>
    ,<shootable>,"<wallname>";


Description
Creates an invisible wall, an array of "setcell" starting from x,y and doing a line of the given size in the given direction. The difference with setcell is this one updates the client part too, to avoid the glitch problem. Directions are the same as NPC sprite facing directions: 0=north, 1=northwest, 2=west, etc.

Examples
`-Â Â scriptÂ Â setwallÂ -1,{`
`Â Â Â `[`end`](/end "wikilink")`;`
[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â setwallÂ "prontera",64,102,4,2,0,"PrtWall";`
`}`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Sex

Syntax

Description
**Sex** is a condition used to identify if the player is using a male or female character, depending the response the displayed dialogue can be altered, this however requires an [if](/if "wikilink") statement as it would else only returns an integer.

Upon using the condition **sex**, the server will return either the value 0 for female or 1 for male.

Examples
`Â `[`if`](/if "wikilink")`(Sex)Â mesÂ "HelloÂ Sir";Â elseÂ mesÂ "HelloÂ Mam";`
`Â //WithÂ aÂ simpleÂ visibleÂ ifÂ statement`

`Â `[`mes`](/mes "wikilink")`Â "Welcome,Â "Â +Â (Sex?"Mr.":"Mrs.")Â +Â "Â "Â +Â `[`strcharinfo`](/strcharinfo "wikilink")`(0);`
`Â //UsingÂ itÂ withinÂ aÂ sentenceÂ structureÂ andÂ aÂ hiddenÂ ifÂ statement`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Show_item_SP_heal

Introduction
Very simply, if you wish for SP to be displayed when using a healing item, simply follow this article.

Open /src/map/pc.c
*Scroll to or find the function pc_itemheal*

**Find (*in pc_itemheal*):**

`Â Â Â ifÂ (sd->sc.data[SC_CRITICALWOUND])`
`Â Â Â {`
`Â Â Â Â Â Â Â hpÂ -=Â hpÂ *Â sd->sc.data[SC_CRITICALWOUND]->val2Â /Â 100;`
`Â Â Â Â Â Â Â spÂ -=Â spÂ *Â sd->sc.data[SC_CRITICALWOUND]->val2Â /Â 100;`
`Â Â Â }`

**Below add:**

`Â Â Â if(Â spÂ >Â 0Â )`
`Â Â Â Â Â Â Â clif_skill_nodamage(NULL,Â &sd->bl,Â MG_SRECOVERY,Â sp,Â 1);`

*Then recompile.*

Conclusion
Now, when you use a healing item, it should display the amount of SP you recover.

[Category:Source Snippets](/Category:Source_Snippets "wikilink") [Category:Customization](/Category:Customization "wikilink")

============================================================

## Skill-Cooldown

This page describes how skill cooldowns (not delays) work.

### Overview

A skill cooldown is the time required before you can use this same skill again, in the game client a skill cooldown is identified by a cat pawn over the skill icon.

### Cooldown Persistency

Introduced in , cooldown persistency allows skills with long cool downs (for example Warlock's comet, with a 3 minute cooldown) not to be exploited by players with the use of going backwards to character selection screen and logging back in.

### Modifying

All skill cooldowns are stored in , its **cooldown** column defines how many *milliseconds* it's cooldown should last. ^_^

============================================================

## Skilleffect

Syntax

Description
This command displays visual and aural effects of given skill on [currently attached character](/RID "wikilink"). The number parameter is for skill whose visual effect involves displaying of a number (healing or damaging). Note, that this command will not actually use the skill, it is intended for scripts, which simulate skill usage by the [NPC](/NPC "wikilink"), such as buffs, by setting appropriate status and displaying the skill's effect.

Examples
[`mes`](/mes "wikilink")`Â "BeÂ blessed!";`
`//Â HealÂ ofÂ 2000Â HP`
[`heal`](/heal "wikilink")`Â 2000,0;`
[`skilleffect`](/skilleffect "wikilink")`Â 28,2000;`
`//Â BlessingÂ LevelÂ 10`
[`sc_start`](/sc_start "wikilink")`Â 10,240000,10;`
[`skilleffect`](/skilleffect "wikilink")`Â 34,0;`
`//Â IncreaseÂ AGIÂ LevelÂ 5`
[`sc_start`](/sc_start "wikilink")`Â 12,140000,5;`
[`skilleffect`](/skilleffect "wikilink")`Â 29,0;`

This will heal the character with 2000 HP, buff it with Blessing Lv 10 and Increase AGI Lv 5, and display appropriate effects.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Skillpointcount

Syntax

Description
Returns the total amount of skill points a character possesses (SkillPoint+SP's used in skills). This command can be used to check the currently attached characters total amount of skill points. This means the skill points used in skill are counted, and added to SkillPoints (number of skill points not used).

Examples
`//ThisÂ willÂ setÂ theÂ tempÂ characterÂ variableÂ .@skillPointsÂ toÂ theÂ amountÂ ofÂ skillÂ points,`
`//andÂ thenÂ tellÂ theÂ playerÂ theÂ value.`
`Â Â Â `[`set`](/set "wikilink")`Â .@skillPoints,Â `[`skillpointcount`](/skillpointcount "wikilink")`();`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ haveÂ "+Â .@skillPointsÂ +"Â skillÂ pointsÂ inÂ total!";`
`Â Â Â `
`//Self-explanatory...Â :P`
`Â Â Â `[`if`](/if "wikilink")`Â (`[`skillpointcount`](/skillpointcount "wikilink")`()Â >Â 20)`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "Wow,Â youÂ haveÂ moreÂ thenÂ 20Â SkillÂ PointsÂ inÂ total!";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Soundeffect

Syntax

Description
These two commands will play a sound effect to either the invoking character only ('[soundeffect](/soundeffect "wikilink")') or multiple characters (**'soundeffectall**'). If the running code does not have a sprite ID (a 'floating' NPC) or is not running from an [NPC](/NPC "wikilink") object at all (an item script) the sound will be centered on the character who's [RID](/RID "wikilink") is attached to the script, if any. If it does have a sprite ID, it will be centered on that NPC.

Effect filename is the filename in a [GRF](/GRF "wikilink"). It must have the [.wav extension](/wikipedia:WAV "wikilink").

To be on the safe side, the clip should be in mono, with a 22050Hz sampling rate, and a bit rate of 192Kbps. Most other combinations usually bring up a Gravity Error, even though a few Gravity-official sound clips have a 44100Hz sampling rate, and a couple are even in stereo.

It's not quite certain what the 'type' actually does, it is sent to the client directly. It probably determines which directory to play the effect from. It's certain that giving 0 for the number will play sound files from '\\data\\wav\\', but where the other numbers will read from is unclear.

File names should have a maximum length of 23 characters including the .wav extension:

**`soundeffect`**`Â "1234567890123456789.wav",Â 0;Â //Â thisÂ willÂ playÂ theÂ soundeffectÂ `
**`soundeffect`**`Â "12345678901234567890.wav",Â 0;Â //Â throwÂ gravityÂ errorÂ Â `

Example
This NPC plays different sound effects for the player that talks to it, depending on what options the player picks within the script.

`prontera,185,153,2Â scriptÂ Â 159,{`
`Â Â Â `[`mes`](/mes "wikilink")`Â "[CodeÂ Master]";`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Hey,Â you!Â What'sÂ today'sÂ secretÂ code?";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`switch`](/switch "wikilink")`(`[`select`](/select "wikilink")`("195.:675.:723.:438.:387.:IÂ don'tÂ know."))Â {`
`Â Â Â `[`case`](/case "wikilink")`Â 1:`
`Â Â Â caseÂ 2:`
`Â Â Â caseÂ 4:`
`Â Â Â caseÂ 5:`
`Â Â Â Â Â Â Â mesÂ "[CodeÂ Master]";`
`Â Â Â Â Â Â Â `[`soundeffect`](/soundeffect "wikilink")`Â "buzzer.wav",0;`
`Â Â Â Â Â Â Â mesÂ "Nope,Â sorry!Â That'sÂ notÂ theÂ secretÂ code!Â TryÂ againÂ nextÂ time!";`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â caseÂ 3:`
`Â Â Â Â Â Â Â mesÂ "[CodeÂ Master]";`
`Â Â Â Â Â Â Â `[`soundeffect`](/soundeffect "wikilink")`Â "bellding.wav",0;`
`Â Â Â Â Â Â Â mesÂ "That'sÂ it!Â That'sÂ today'sÂ secretÂ code!";`
`Â Â Â Â Â Â Â break;`
`Â Â Â caseÂ 6:`
`Â Â Â Â Â Â Â mesÂ "[CodeÂ Master]";`
`Â Â Â Â Â Â Â mesÂ "YouÂ don'tÂ know?Â ThenÂ youÂ needÂ toÂ lookÂ harder!";`
`Â Â Â Â Â Â Â mesÂ "TheÂ secretÂ codeÂ isÂ writtenÂ onÂ aÂ wallÂ nearby!";`
`Â Â Â Â Â Â Â break;`
`Â Â Â }`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

Notes
If a script plays a soundeffect play while another one is playing, the previous one doesn't stop; it'll keep playing! For most short sound effects, such as skill or monster sounds, this might not be a problem, but for songs like bragis_poem.wav, playing another sound over that might not sound good. The only way to stop any sound effects that are currently playing (on your client) is to change maps (ex: using the [warp](/warp "wikilink") script command) or walk through a warp portal to another map.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Specialeffect

Syntax

Description
This script command will display a given special effect on the attached, or specified if <NPC name> is provided, NPC. If <NPC name> is provided but the NPC does not exist then the script command will not perform. If the NPC does exist, but has no visible presence on the screen, then it is possible that the client may crash or behave peculiarly.

Parameters
### Effect

The effect to display in the client. Some effects are unsupported in the client so it is recommended to find the ID of a working effect before using the ID in this command. **For a list of IDs**, please see

### Target

Specifies how the effect should be distributed graphically. By default, the target is flagged as AREA which means all players within client range will see the effect. Otherwise, when specified the effect will only apply and be sent to clients which match the target property.

### NPC Name

Specifies which NPC the effect should apply to, rather than the NPC which is currently running. If the NPC named does not exist then the effect will not be performed.

Examples

<!-- -->

    specialeffect 7;


<!-- -->

    specialeffect 7, SELF;


<!-- -->

    specialeffect 7, PARTY_WOS;

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Sprintf

Syntax

Description
[C style sprintf](/wikibooks:C++_Programming/Code/Standard_C_Library/Functions/sprintf "wikilink"). The resulting string is returned same as in PHP. All C format specifiers are supported except %n. More info: sprintf @ www.cplusplus.com. The number of params is only limited by the Athena script engine.

Examples
[`set`](/set "wikilink")`Â .@format$,Â "TheÂ %sÂ containsÂ %dÂ monkeys";`
[`dispbottom`](/dispbottom "wikilink")`Â `[`sprintf`](/sprintf "wikilink")`(.@format$,Â "zoo",Â 5);Â Â Â Â Â Â Â Â //Â "TheÂ zooÂ containsÂ 5Â monkeys"`
[`dispbottom`](/dispbottom "wikilink")`Â `[`sprintf`](/sprintf "wikilink")`(.@format$,Â "barrel",Â 82);Â Â Â Â //Â "TheÂ barrelÂ containsÂ 82Â monkeys"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Sprite_Recolors

Recolors
Sprite Recolors are sprites with a new [palette](/Palettes "wikilink") added (that also means that recolors use the same [act](/Acts "wikilink") the original sprite uses). You must have a palette file based on the sprite you want to recolor, if not, the recolored sprite will probably look weird. So, the best you can do for recoloring is taking a bmp or more from the original sprite and check their color tables.

When the color table window pops up, change the colors you feel like and then save the changes as "Microsoft Palette file".

Applying the palette
Once you have your new palette, open the original sprite with SPR Conview and click on "Palette &gt; Open a Palette" (Open your palette then). Animate the sprite to see how the new colors look in all the frames. If you like them, save the file ("File &gt; Save"). If not, open another palette or click on "Palette &gt; Restore Palette" to get the original palette applied to the sprite again.

Keep in mind that every image needs to have a palette complementary to its current palette. If you have an image with 50 colors with a gradient of 16 tiles and then you add the [RO common colors](/RO_Pixeling_Colors "wikilink") palette, colors will look messed up. And if you have an image with 256 colors in its color table and add a palette with only 8 colors, it will look even worse (probably with neon colors messed up).

Changing the saturation and brightness
You can edit the brightness and saturation of your frames, changing automatically the original color table. You just have to change the brightness and saturation of one frame and then, open the color table. You will see that all colors have changed. Save the palette and then apply it to the sprite.

This way, you haven't touched the color table, but the saturation/brightness of your frame and then saved the palette. This is the best way to change saturation and brightness, because if you try to do it in the color table, you will spend a lot of time.

See also

[Category:Spriting](/Category:Spriting "wikilink")

============================================================

## Spriting

Creating Your Own Frames
You will need


When creating a new image, it is recommended that you use the bitmap format. The size itself depends on what it is you are planing to make. It does not need to be a particular size (only the inventory item sprite and .bmp image must have a size of 24x24 px, it is recommended that the drop sprite be this size too), but remember the bigger it is the more likely it is to look odd inside the game (and if your frames are too big, there is a big chance of getting an error ingame). The background needs to 'Magenta'. The hexadecimal format of this color is \#FF00FF. The RGB for this color is R 255, G 0, B 255.

Now that you have the size and everything figured out, its time to change it from .bmp to indexed color. Download this file: [RO common colors](/RO_Pixeling_Colors "wikilink"), then navigate to Image &gt; Mode &gt; Indexed Color... In the window that pops up, the palette can be anything you want, but if forced you select Custom... Then select load and change file type from .act to .pal, then find the .pal file then select and open it, it will be wherever you saved the file to. Once it has loaded, make sure the colors are 256, then select OK, then you will now have an image compatible with ragnarok, and you can now draw out your image. After this you can save your image as .bmp (bitmap).

You must get familiarized with this color table (you can access to your color table in Photoshop through Image &gt; Mode &gt; Color Table). First color in the color table is the transparency color. This means that ingame, this color won't appear. This color must be \#FF00FF for inventory items (you can change the colors of the color table by clicking on them. You can also make color gradients by selecting a group of colors if you are working with Photoshop). It can be any other color for Mobs, Jobs, Headgears, etc. However, It is recommended to use this color as background transparency color. Make sure background color is the first color in the color table. It is common that color \#FF00FF (magenta) appears as the third color in the color table, and not first. If you are working with inventory items images, you must change this color to any other color and make first color \#FF00FF. Then, you must change the background color to \#FF00FF manually (replacing the background color for \#FF00FF). We do this because you may have two magenta's in your color table (one in the first cell and another one in the third). If this happens and you make your background color \#FF00FF you may be using the third color, and not first. What will happen then? It will make a part of your inventory skin background disappear. So background color must be always the first color in the color table, and when we are working with inventory items, it also must be color \#FF00FF.

Some spriters usually use some neon colors as references, to make the edges of their sprite before coloring it. It is recommended you start making only the edges, so you can concentrate only in the perspective and size of your sprite without caring about shading. Neon colors are pretty visible, so if you happen to need them, add some neon colors to your color table and then use them in your frame.

Finally, when you finished making your base image for pixeling, you can put an image of the color table and pick colors with the eyedropper. If you are working with paint, in example, you can cut and paste an image with all the RO common colors. There is a small [table of RO colors](http://www.divinero.net/devilevil/PixelingColorsTable.bmp) that you can use for this.

Making A Sprite
As soon as you have one frame (8bits/256 colors bmp image), you will be able to create your sprite. For this, you will need a SPR maker. You can use [SPR Conviewer](http://www.divinero.net/devilevil/archivos/tools/SPRConviewer.rar) (made by bakausagi) to make your sprite. Once you opened SPR conview, you will have to go to "Convert &gt; Bmp to SPR" (only works with 8 bits bmp images). Click on "Add" and select all your frames. Try to name them like "Frame1", "Frame2", etc. and then select them all at the same time. If not, the order of frames in the sprite may not be correct. Avoid using control + click to add more frames. Select them all and if you selected something you don't want, just use control + click to deselect it. But don't use it to select frames because it may mess the frames up. Then, browse the directory where you want to save the sprite. When you finished with that, disable "encode" (because the frames may appear messed up and cut). Click convert and then open the sprite in conview to make sure it looks right.

There are other sprites that don't use 8 bits bmp images, but 32 bits TGA images. Those can only be made with [Actor](http://ratemyserver.net/index.php?page=download_tool) (either 1 or 2). You must add image per image and then save it as a sprite. You can't open these sprites with SPR Conview. The making of this sprite is different and more advanced, but you will be able to use four channels (RGB and Alpha).

Editing a Sprite
Remember that if this is a custom sprite that someone else made, to first ask permission before editing the sprite. Use a tool like SPR Conview to first convert the sprite from .spr (sprite) format to .bmp (bitmap) format. To be safe your sprite should have the same frame's as the one you are editing (if you plan to make a whole new sprite based off the original), but it is not required. If you are to share your sprite with the community, please include the words "Originally made by: (Username here)", as the original owner may get angry.

Simple Way To Prevent Theft
**Note: This doesn't guarantee that your sprite is safe. But if this frame is included you have definitive proof that the sprite is yours.**

Simply include a frame with the sprite that has your username or name on it, it may show up in game depending on what kind of sprite it is. Just make sure you have all the frames required filled, then include one extra frame with your credits. For example the drop sprite for an item only needs one frame, so you can include a second with your credits. The maximum size the credit frame can be is 179x33.

If you had different versions of the sprite you can also include one frame or a screen shot of the frames as evidence.

You can also put your username on the collection image. This can be easily removed from the folder, but most servers do not remove the collection image.

See also

[Category:Spriting](/Category:Spriting "wikilink")

============================================================

## SQL_Installation

Introduction
This article will guide you through the installation and configuration stages of MySQL for your particular Operating System. What is a MySQL database? [MySQL](/wikipedia:MySQL "wikilink") is a multi-user access database that stores a number of different kinds of information in scaleable tables. In layman's terms, it puts a bunch of stuff in charts for your server to read. rAthena no longer supports text based save files (for Accounts, Characters, etc.) and requires a MySQL database to create these save files.

Windows
This guide will instruct you on installing MySQL on Windows Vista/7, although it should work relatively the same with Windows XP. This guide also assumes you have already [installed your rAthena server](/Installation_on_Windows "wikilink").
**<big>Uninstallation Note</big>**
Before continuing, it is important to note that if you make an error and decide to start again by uninstalling the MySQL database and software, that you make sure you do a *thorough* uninstallation, and then reboot Windows before trying again. A couple tips to make sure your uninstallation is thorough:


`C:\Users\`<YOUR_USER_NAME>`\AppData\Roaming\MySQLÂ `


and:

`C:\ProgramData\MySQL`


Just delete the whole folder.



Delete the whole MySQL folder.


### Download

To install MySQL Server you will first need to download the package corresponding to your version of Windows. [MySQL Community Server](http://dev.mysql.com/downloads/mysql/) is available for free and is exactly what is needed. Version 5.5 currently works well with rAthena and is recommended. **ENSURE** that you download the appropriate bit version (32 or 64) for your system, if you do not, you will receive errors during the execution wizard. This software installs the server on your computer that stores the data files and tables. Although alone, without prior knowledge of MySQL it is very difficult to operate and configure your servers data. That is why you will need MySQL Workbench.
[MySQL Workbench](http://dev.mysql.com/downloads/workbench/5.2.html) is a tool for viewing your MySQL database in a GUI environment. As said, it is not required but very beneficial; in addition, it is required by this guide. To be able to install and run MySQL Workbench 5.2 your System also needs to have the libraries listed below installed. The listed items are provided as links to the corresponding download pages where you can fetch the necessary files.

[Microsoft .NET Framework 4 Client Profile](http://www.microsoft.com/download/en/details.aspx?id=17113)
[Microsoft Visual C++ 2010 Redistributable Package (x86)](http://www.microsoft.com/download/en/details.aspx?id=5555)

### Configure rAthena Files

Before you begin with your MySQL installation, you need to setup your server conf files to be ready for the database you are about to install. I choose to do this in advance, because it allows you to have the usernames and passwords ready for use so you don't have to go back and set them, and you can just run your server afterwards with everything all ready.


`userid:Â s1`
`passwd:Â p1`

Change these to whatever you want, but something secure. For this guide we will use "FishUser" and "FishPassword"

`userid:Â FishUser`
`passwd:Â FishPassword`

Make sure these are the same in both map_athena and char_athena otherwise you will have errors.


### Install MySQL

First, you will need to install the MySQL server where all the data will be stored. After downloading the [MySQL Community Server](http://dev.mysql.com/downloads/mysql/), run the installer and use the following steps (*for this installation version 5.5.28 was used*).

1.  Click next and accept the license agreement.
2.  Click "Typical" for Setup Type; then click "Install" (you may have to allow UAC control from windows).
3.  Click "Next" when the MySQL Enterprise tool pops up, this is a simple advertisement.
4.  After installation is finished the completion screen with a "Finish" button will show, make sure you have "Launch the MySQL Instance Configuration Wizard" **CHECKED**! The configuration wizard will allow you to setup the server to accept the kind of data you want and by setting it up now you will most likely never have to configure it again.
5.  Click "Next" at the first screen, and then click "[Standard Configuration](http://i.imgur.com/YlMPbm8.png)" and hit "Next".
6.  Check both "Install As Windows Service" and "Include Bin Directory in Windows PATH" for the Service Name, name it "*MySQL5*" and ensure "Launch the MySQL Server Automatically is **CHECKED**. ([Image](http://i.imgur.com/onQiIsh.png))
7.  On the next screen, you will need to select the root password. This password is very important as you will **never be able to retrieve it** so make sure you write it down somewhere safe. The "root" access to your MySQL database can pretty much do anything to your data, so make sure you keep this information safe. If you want to enable root access from a remote machine, check the included box. You probably won't need to enable that unless you know what you're doing. Keep the password you selected available for now.
8.  On the next screen just click "Execute" to run the configuration unless you want to go back and change something.
9.  Once it is finished, hit "Finish" to close the wizard. It will report if there are any errors (there shouldn't be).

### MySQL Workbench

Next it is time to install the MySQL Workbench application. This application will allow you to edit your database and prepare it for eAthena, as well as perform maintenance in the future.

1.  Run the MySQL Workbench installer and click "Next" on the first screen.
2.  Choose your installation directory. The default directory should be fine. Click "Next" to proceed.
3.  Select "Complete" and click "Next", and then install, granting permissions when prompted.
4.  Once the wizard is completed, hit "Finish" and the default Workbench screen will come up.
5.  This is called the Home Screen and should look like [this](http://i.imgur.com/iuSqaFC.png).
6.  You need to create a new server instance to host your files for rAthena to access. Select "New Server Instance" under the "Server Administration" section.
7.  A window will pop up, select "localhost" and click "Next". This installs the instance on the localhost, which is your computer.
8.  On the next screen, leave everything the default. Where it says "Username" leave that at root, so you have root access. Under that, click "[Store in Vault](http://i.imgur.com/3WD8m8b.png)" and enter the root password from earlier (it's alright to copy/paste the password if you put it in a text file).
9.  After it has successfully tested the database connection, click "Next"
10. On the next screen, leave the configuration settings defaulted. It should point to the existing service (MySQL5 from earlier) and the default path is fine. ([Image](http://imageshack.us/a/img600/1089/defaultwindowsconfig.jpg))
11. On the next screen hit "Next" and then "Continue" on the popup. Leave the Server Instance with the default name of

`mysqld@localhost`

You are now ready to install your rAthena databases.

### Database Installation

It is now time to install the pre-installed database files that will allow your rAthena server to connect to your MySQL database and properly store data, such as characters, items, and guilds. Open up MySQL Workbench to the home screen.

1.  Double click "localhost" on the left under the "SQL Development" section. ([Image](http://i.imgur.com/HwXFbe5.png))
2.  On the next screen (after a small loading bubble pops up), you will have access to the specific tables that were mentioned earlier. You will enter this screen in the future when you want to edit accounts and other things directly (not common).
3.  We need to install a new "Schema", this is like a folder where all the database tables are stored. [Click the yellow cylinder looking thing in the upper left to create a new Schema](http://i.imgur.com/70F2Ckl.png). Name it "ragnarok" - **NOTE!** Lower case is important here, make sure it is exactly "ragnarok". The server collation should be "Server Default".
4.  Click "Apply" to create the Schema. A window will pop up with the actual commands that are going to take place; click "Apply" again to finalize your order.
5.  Now right click 'ragnarok' under "Object Browser" and click "Set as default schema", a line will appear through it telling the browser that any commands you make now will be ordered to that Schema.
6.  Next, [click the button directly to the left of the one you just did](http://i.imgur.com/ntGId6y.png), it says "SQL" with a tiny folder. Navigate to your rAthena/sql-files/ folder, and open the sql script file "main.sql".
7.  You'll see a bunch of code appear, these are commands that will tell the browser to create plain databases for your rAthena server. Click the yellow lightning bolt in the upper left hand corner to execute it and allow it to finish (ensure you click the first lightning bolt, the one without a cursor symbol or a magnifying glass over it).
8.  After it finishes, a bunch of executed commands will appear on the bottom of the screen. You can now expand the ragnarok schema to see a bunch of tables. ([Image](http://i.imgur.com/GdUYaiU.png))
9.  Now, do the same thing for a schema called "log", but open and execute logs.sql instead of main.sql. Ensure the tables are there as well.
10. Close the existing query tabs by hitting the "X" in the upper right of the tab. With the ragnarok tables still open, scroll down to the "login" table and **RIGHT click** it, then select "Edit Table Data".
11. Here you'll see existing account information that players can log in with to make characters. If you remember, the first account is the server communication account and it has the default password that you were asked to reset earlier. For our example we chose "FishUser" and "FishPassword". Enter these in the "username" and "password" field. And then create your first GM account by clicking where the word "null" is on the row with a ' \* ' and enter "2000000" for the "account_id" field, with a username and password that you like. For this guide we chose a username of "AthenaGM" and a password of "12345" and a sex of "M". To enable full administrator GM, just set the "group_id" to "99". Zero out everything else. [When you are finished it should look like THIS](http://i.imgur.com/fgkz4uC.png).
12. Hit the "Apply" button in the corner and then again when the code prompt appears. This should modify your tables. After it is done, you may close the SQL Editor by clicking the "X" on the tab at upper left corner. Hitting the "X" in the upper right closes the whole workbench. If you accidentally close it, just open it again.
13. On the Workbench Home Screen, click "Manage Security" under Server Administration. Select "mysqld@localhost" and then click "OK".
14. The next screen is the security window. You want to add an account that your server can use to access the databases that is NOT the root account, for enhanced security. Click "Add Account" in the lower left of the default screen.
15. The login name needs to be "ragnarok", and the password we selected earlier for this guide is "Fish". The system will tell you how strong your password is... Fish is a very weak password. Leave the connectivity limit box defaulted and then hit "Apply" in the lower right. ([Image](http://i.imgur.com/00X2bQX.png))
16. You'll see the account show up in the left above root. Select it and then click the "Administrative Roles" tab.
17. Ensure that the "MonitorAdmin", "DBManager", "DBDesigner" and "BackupAdmin" are checked. Some of these will select themselves based on what you click. Then click "Apply". As a note, this step isn't entirely necessary but provides increased security. The simpler step is to just give the user all privileges by clicking the "DBA" option at the top. ([Image](http://i.imgur.com/fddQevd.png))
18. Click the "Schema Privileges" tab.
19. In this tab, click "ragnarok" and then click the only available button, which is "Add Entry...".
20. Leave "Any Host" selected and change Schema to "Selected Schemas". Then select the "ragnarok" schema and hit OK.
21. At the bottom, hit "Select 'ALL'" to enable all database privileges for this Schema. This allows your *ragnarok* user to have access to all the tables in the schema of the same name. In other words, it allows your server to read/write the tables in the database you made. Make sure you click "Save Changes".
22. Do the same for the "log" schema you made. When you are [done it should look like this](http://i.imgur.com/I2vfBbG.png).

**Congratulations!** You have successful installed the MySQL database and are ready to run your server! See below for further adjustments.

#### Additional Configurations

##### item_db and mob_db

Open your SQL editor by double clicking your connection under SQL development. Right click ragnarok, and set it as your default schema, then right click it again and choose "Alter schema...", then change collation from latin1 to utf8 - default collation.([Image](http://i.imgur.com/XLL88ew.png)) Then open item_db.sql and mob_db.sql(item_db_re.sql or mob_db_re.sql for Renewal servers) with a text editor, they are located in your sql-files folder, and select all of the text by either right clicking and choosing select all, or clicking edit and select all, then copy by doing basically the same thing for selecting but choose copy; you can also press and hold ctrl and C, then release. Now go back to the SQL editor, and in the white box below the tab that says SQL editor paste the contents of either item_db.sql or mob_db.sql (item_db_re.sql or mob_db_re.sql for Renewal servers), execute, and then do the other one and execute. ([Image](http://i.imgur.com/aK9CYNs.png)) Next, open inter_athena.conf in your conf folder, look for:

`//UseÂ SQLÂ item_dbÂ andÂ mob_dbÂ forÂ theÂ mapÂ server`
`use_sql_db:Â no`

And change no to yes. Note that if you have a modified version of Athena such as 3CeAM you will have to manually add the modifications from the item_db in the db folder to your MySQL item_db, and also for mob_db. If you do not you will get errors when running your server.

##### Enabling Logging

Simply open log_athena.conf in your conf folder, and look for:

`//Â UseÂ MySQLÂ Logs?Â (SQLÂ VersionÂ Only)`
`sql_logs:Â 0`

Change 0 to 1. You can also go through and change logging options. Your logs will be stored within your log schema. To view IPs in loginlog, you must click it, then right click it and choose alter table, then click on the columns tab. For the PK row, check all of the boxes, then apply it. Now you can double click on the loginlog and view the IPs, though after you are done alter the table again and uncheck all the boxes, this helps insure security. This should only be done for IP bans.

##### Increasing Security

**Use MD5 to encrypt your password**
\*\* **WARNING:** This will turn your passwords gibberish, just numbers and letters, making them unreadable so be sure to note down your password, either in a text file on your C drive, or on a piece of paper. In MySQL Workbench, click edit, then preferences, then click the SQL Queries tab. Uncheck "(Safe Updates) Forbid UPDATE and DELETE statements without a WHERE clause...", then click OK. Make ragnarok your default schema, by right clicking its name and clicking "Set as Default Schema", now click File, then Open SQL script, and open convert_passwords.sql. Then click the execute icon.

Linux
To Install the Mysql Server there is really only a few things that you have to do.

### Installing MySQL

From your terminal, type

`sudoÂ yumÂ installÂ mysql-server*`


`sudoÂ apt-getÂ installÂ mysql-server`

After your Operating System downloaded and installed MySQL, you will see your terminal window changed and you will be prompted to provide the root password for the MySQL server

### Setting up your own user

Once the server has been installed you will need to call the server from terminal with this command.

`mysqlÂ -uÂ root`

or

`mysqlÂ -uÂ rootÂ -p`

then, type in your password.

You are now logged into the MySQL server as root. The best way to use your own SQL server is to have a username of your own control with your own password. The next command will create your own user. The `IDENTIFIED` `BY` clause defines the password.

`CREATEÂ USERÂ 'ragnarok'@'%'Â IDENTIFIEDÂ BYÂ 'ragnarok';`
`GRANTÂ ALLÂ PRIVILEGESÂ ONÂ 'ragnarok'.*Â toÂ 'ragnarok'@'%'Â IDENTIFIEDÂ BYÂ 'ragnarok';`
`flushÂ privileges;`

If that doesn't work it my be due to a version syntax error, try the following.

      CREATE USER 'ragnarok'@'%' IDENTIFIED BY 'ragnarok';
      GRANT ALL PRIVILEGES ON ragnarok.* to 'ragnarok'@'%' IDENTIFIED BY 'ragnarok';

### Installing the Tables

      cd /path/to/rathena/

Note: Afterwards issue this command lines, please have your password prepared since every after command lines issued you will be prompted for it.

      mysql -u root -p ragnarok < main.sql

      mysql -u root -p ragnarok < logs.sql

      mysql -u root -p ragnarok < item_db.sql

      mysql -u root -p ragnarok < item_db2.sql

      mysql -u root -p ragnarok < item_db_re.sql

      mysql -u root -p ragnarok < item_db2_re.sql

      mysql -u root -p ragnarok < item_cash_db.sql

      mysql -u root -p ragnarok < item_cash_db2.sql

      mysql -u root -p ragnarok < mob_db.sql

      mysql -u root -p ragnarok < mob_db2.sql

      mysql -u root -p ragnarok < mob_db_re.sql

      mysql -u root -p ragnarok < mob_skill_db.sql

      mysql -u root -p ragnarok < mob_skill_db2.sql

      mysql -u root -p ragnarok < mob_skill_db_re.sql

[Category:Installation](/Category:Installation "wikilink")

============================================================

## Sqrt

Syntax

Description
Returns square-root of number.

Note. The returned value is an integer type, so any floating number will be truncated.

Examples
`setÂ .@i,Â sqrt(25);Â //Â .@iÂ willÂ beÂ 5`
`setÂ .@i,Â sqrt(24);Â //Â .@iÂ willÂ beÂ 4`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Sscanf

Syntax

Description
[C style sscanf](/wikibooks:C++_Programming/Code/Standard_C_Library/Functions/scanf "wikilink"). All C format specifiers are supported. More info: sscanf @ www.cplusplus.com. The number of params is only limited by the Athena script engine.

Examples
[`sscanf`](/sscanf "wikilink")`("ThisÂ isÂ aÂ test:Â 42Â foobar",Â "ThisÂ isÂ aÂ test:Â %dÂ %s",Â .@num,Â .@str$);`
[`dispbottom`](/dispbottom "wikilink")`Â .@numÂ +Â "Â "Â +Â .@str$;Â //Â "42Â foobar"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Staff

Here is a \[<http://chart.googleapis.com/chart?cht=gv:dot&chl=graph%7Ba1%5Blabel=%22Administrators%22,fontcolor=%22%230000FF%22%5D;m1%5Blabel=%22Forum+Manager%22,fontcolor=%22%23001188%22%5D;m2%5Blabel=%22Core+Dev+Manager%22,fontcolor=%22%23001188%22%5D;m3%5Blabel=%22Script/DB+Dev+Manager%22,fontcolor=%22%23001188%22%5D;a1--m1;a1--m2;a1--m3;d2%5Blabel=%22Core+Developers%22,fontcolor=%22%23008000%22%5D;d3%5Blabel=%22Supporting+Developers%22,fontcolor=%22%23008000%22%5D;d4%5Blabel=%22Script/DB+Developers%22,fontcolor=%22%23FF0000%22%5D;d5%5Blabel=%22Document+Developer%22,fontcolor=%22%23DC3AFF%22%5D;t1%5Blabel=%22Translators%22,fontcolor=%22%23D16886%22%5D;m2--d2;m2--d3;m2--d5;m3--d4;m3--d5;m3--t1;f1%5Blabel=%22Global+Mods%22,fontcolor=%22%23A91143%22%5D;f2%5Blabel=%22Support+Leaders%22,fontcolor=%22%2300A0FF%22%5D;f3%5Blabel=%22Scripting+Mods%22,fontcolor=%22%23FF7200%22%5D;f4%5Blabel=%22Graphics+Mods%22,fontcolor=%22%239300D0%22%5D;f5%5Blabel=%22International+Mods%22,fontcolor=%22%2300D784%22%5D;m1--f1;f1--f2;f1--f3;f1--f4;f1--f5>;} flowchart of staff positions\].

[Administrators](http://rathena.org/board/index.php?app=members&filter=4)
The Administrator is in charge of making sure the IRC server/channels are maintained and staffed, as well as leading the forums from the community standpoint. Also in charge of making sure the forums, wiki, Git, Trac and server(s) are running smoothly at a technical level. If there is a technical issue with any of the services in rAthena, this is the person you should contact.


Managers
Backing up the administrators are managers, who ensure the staff are doing what they need to and assist with light "management" duties as needed (hiring/firing staff members, providing input on general directions of the emulator). They are also be in charge of assigning tasks and making major decisions as needed from the regular staff members.


Development Managers are responsible for keeping rAthena running smoothly via Github, including assigning new developers and making sure the current ones are doing their jobs correctly and efficiently. They are split between two groups, Core Manager and Script/DB Manager


The Community Manager is responsible for keeping the community in check, by making the majority of the announcements and making sure the community is led by the moderators appropriately and non-biased. They are the primary managers responsible for hiring new moderators and making sure all moderators are doing their jobs completely and effectively.


Developers
### [Core Developers](http://rathena.org/board/index.php?app=members&filter=9)

rAthena core developers are responsible for maintaining the source code of rAthena.


### [Script/DB Developers](http://rathena.org/board/index.php?app=members&filter=10)

rAthena script/DB developers are responsible for keeping the scripts and DB's of rAthena up-to-date with kRO.


### [Supporting Developers](http://rathena.org/board/index.php?app=members&filter=39)

rAthena Supporting Developers scour our code and put it to the test! They're our team of trojan-reporters responsible for producing concise bug reports on our Tracker. They occasionally provide hotfixes too!


### [Documentation Developers](http://rathena.org/board/index.php?app=members&filter=22)

The Documentation Developers are responsible for making sure the [Wiki](/Main_Page "wikilink"), \] and ReadMe files are kept up-to-date. They check recent commits from the other development teams and update documentation accordingly.


Moderators
Moderators look over specific sections of the forum, Keeping everything in order.

### [Global Moderators](http://rathena.org/board/index.php?app=members&filter=6)

Global Moderators are here to help take some of the moderation off the Administrators. They have complete control over moderation of the forums. Note that only existing Staff Members may be promoted or apply as a Global Moderator.


### [Graphics Moderators](http://rathena.org/board/index.php?app=members&filter=11)


### [Scripting Moderators](http://rathena.org/board/index.php?app=members&filter=13)


### [Support Leaders](http://rathena.org/board/index.php?app=members&filter=8)

rAthena Support Leaders provide exceptional support within the [Support and Releases](http://rathena.org/board/forum/3-support-releases/) forums. They are selected by experience and their main task is to provide support.


### International Moderators

#### [Filipino Moderators](http://rathena.org/board/index.php?app=members&filter=17)


#### [German Moderators](http://rathena.org/board/index.php?app=members&filter=26)


#### [Indo/Malay Moderators](http://rathena.org/board/index.php?app=members&filter=27)


#### [Portuguese Moderators](http://rathena.org/board/index.php?app=members&filter=35)


#### [Russian Moderators](http://rathena.org/board/index.php?app=members&filter=23)


#### [Spanish Moderators](http://rathena.org/board/index.php?app=members&filter=20)


[Translators](http://rathena.org/board/index.php?app=members&filter=24)

[Wiki Leaders](http://rathena.org/board/index.php?app=members&filter=30)
Wiki Leaders are a team of driven individuals chosen to maintain rAthena's Wiki articles. This position requires good English writing skills and great knowledge of rAthena's internal operations. Wiki Leaders report to the Documentation Developer.


[Community Contributors](http://rathena.org/board/index.php?app=members&filter=7)
Our Ex-Developers and others who contributed a great amount to the development of rAthena. Kudos to them!

| Forum Name                                                          | Previous Position                       |
|---------------------------------------------------------------------|-----------------------------------------|
| [Aerie](http://rathena.org/board/user/277-aerie/)                   | Graphics Moderator                      |
| [Akkarin](http://rathena.org/board/user/3433-akkarin/)              | Administrator                           |
| [Ai4rei](http://rathena.org/board/user/278-ai4rei/)                 | Core Developer (eAthena)                |
| [Akinari](http://rathena.org/board/user/9210-akinari/)              | Core Dev Manager                        |
| [AnnieRuru](http://rathena.org/board/user/8685-annieruru/)          | Scripting Moderator                     |
| [Arcenciel](http://rathena.org/board/user/768-arcenciel/)           | Community Administrator                 |
| [Baalberith](http://rathena.org/board/user/4602-baalberith/)        | Core Developer                          |
| [Brainsteal](http://rathena.org/board/user/304-brainsteal/)         | Portuguese Moderator                    |
| [CalciumKid](http://rathena.org/board/user/597-calciumkid/)         | Script/DB Developer                     |
| [Castor](http://rathena.org/board/user/805-castor/)                 | Core Developer                          |
| [Celsius](http://rathena.org/board/user/312-celsius/)               | Spanish Moderator                       |
| [Chilly](http://rathena.org/board/user/381-chilly/)                 | Script/DB Developer                     |
| [clydelion](http://rathena.org/board/user/4817-clydelion/)          | Support Leader                          |
| [Cookie](http://rathena.org/board/user/4784-cookie/)                | Core Dev Manager                        |
| [Cydh](http://rathena.org/board/user/5421-cydh/)                    | Core Developer, Indo/Malay Moderator    |
| [Daegaladh](http://rathena.org/board/user/468-daegaladh/)           | Script/DB Developer                     |
| [darkmeistersp](http://rathena.org/board/user/385-darkmeistersp/)   | Spanish Moderator                       |
| [Deadlysilence](http://rathena.org/board/user/16411-deadlysilence/) | Script/DB Developer                     |
| [DevilEvil](http://rathena.org/board/user/259-devilevil/)           | Global Moderator                        |
| [Edison](http://rathena.org/board/user/1174-edison/)                | Translator                              |
| [Epoque](http://rathena.org/board/user/271-epoque/)                 | Core Developer                          |
| [Eurydice](http://rathena.org/board/user/295-eurydice/)             | (overall contributions)                 |
| [Feistz](http://rathena.org/board/user/273-feistz/)                 | Indo/Malay Moderator                    |
| [flaviojs](http://rathena.org/board/user/5508-flaviojs/)            | Core Developer (eAthena)                |
| [Flaid](http://rathena.org/board/user/1235-flaid/)                  | Community Administrator                 |
| [Gaypuff](http://rathena.org/board/user/598-gaypuff/)               | Graphics Moderator                      |
| [Gepard](http://rathena.org/board/user/897-gepard/)                 | Core Developer                          |
| [GodLesZ](http://rathena.org/board/user/330-godlesz/)               | Core Developer                          |
| [Gomen](http://rathena.org/board/user/1187-gomen/)                  | German Moderator                        |
| [GreenBox](http://rathena.org/board/user/290-greenbox/)             | Core Developer                          |
| [Igniz](http://rathena.org/board/user/705-igniz/)                   | Core Developer                          |
| [Ind](http://rathena.org/board/user/391-ind/)                       | Core Developer                          |
| [Inkfish](http://rathena.org/board/user/603-inkfish/)               | Core Developer (eAthena)                |
| [JayPee](http://rathena.org/board/user/322-jaypee/)                 | Script/DB Developer                     |
| [Jman](http://rathena.org/board/user/264-jman/)                     | Community Administrator                 |
| [Joseph](http://rathena.org/board/user/1441-joseph/)                | Script/DB Developer                     |
| [jTynne](http://rathena.org/board/user/262-jtynne/)                 | Script/DB Developer                     |
| [Judas](http://rathena.org/board/user/403-judas/)                   | Support Leader                          |
| [Jupeto](http://rathena.org/board/user/1659-jupeto/)                | Filipino Moderator                      |
| [KeiKun](http://rathena.org/board/user/296-keikun/)                 | Filipino Moderator                      |
| [Kenpachi](http://rathena.org/board/user/324-kenpachi/)             | Administrator                           |
| [KeyWorld](http://rathena.org/board/user/272-keyworld/)             | (overall contributions)                 |
| [Kisuka](http://rathena.org/board/user/2589-kisuka/)                | Script/DB Developer                     |
| [Lemongrass](http://rathena.org/board/user/250-lemongrass/)         | Script/DB Developer                     |
| [Lilith](http://rathena.org/board/user/386-lilith/)                 | Core Developer                          |
| [Luciar](http://rathena.org/board/user/1978-luciar/)                | Script/DB Developer                     |
| [Magnetix](http://rathena.org/board/user/736-magnetix/)             | Filipino Moderator                      |
| [malufett](http://rathena.org/board/user/3651-malufett/)            | Core Developer                          |
| [MarkZD](http://rathena.org/board/user/2731-markzd/)                | Core Developer                          |
| [Masao](http://rathena.org/board/user/238-masao/)                   | Script/DB Developers                    |
| [Matheus](http://rathena.org/board/user/342-matheus/)               | Script/DB Developers                    |
| [Mercurial](http://rathena.org/board/user/255-mercurial/)           | Script/DB Developers                    |
| [mkbu95](http://rathena.org/board/user/243-mkbu95/)                 | Core Developer                          |
| [Muad_Dib](http://rathena.org/board/user/998-muad-dib/)            | (overall contributions)                 |
| [Mysterious](http://rathena.org/board/user/276-mysterious/)         | Support Leader                          |
| [OnNplay](http://rathena.org/board/user/1369-onnplay/)              | Indo/Malay Moderator                    |
| [Patskie](http://rathena.org/board/user/7560-patskie/)              | Scripting Moderator, Filipino Moderator |
| [Pneuma](http://rathena.org/board/user/24349-pneuma/)               | Support Leader                          |
| [Protimus](http://rathena.org/board/user/303-protimus/)             | Core Developer                          |
| [Rikimaru](http://rathena.org/board/user/434-rikimaru/)             | Scripting Moderator                     |
| [rokimoki](http://rathena.org/board/user/854-rokimoki/)             | Spanish Moderator                       |
| [Rytech](http://rathena.org/board/user/318-rytech/)                 | Core Developer                          |
| [Sanasol](http://rathena.org/board/user/1222-sanasol/)              | Core Developer                          |
| [sandbox](http://rathena.org/board/user/5316-sandbox/)              | Support Leader, Filipino Moderator      |
| [Shinju](http://rathena.org/board/user/2679-shinju/)                | Spanish Moderator                       |
| [Shinryo](http://rathena.org/board/user/270-shinryo/)               | (overall contributions)                 |
| [Sirius_Black](http://rathena.org/board/user/387-sirius-black/)    | Core Developer                          |
| [Sirius_White](http://rathena.org/board/user/441-sirius-white/)    | (overall contributions)                 |
| [Shakto](http://rathena.org/board/user/14926-shakto/)               | Support Leader                          |
| [sketchyphoenix](http://rathena.org/board/user/284-sketchyphoenix/) | Core Developer                          |
| [Skotlex](http://rathena.org/board/user/3269-skotlex/)              | Core Developer (eAthena)                |
| [Snow](http://rathena.org/board/user/5007-snow/)                    | German Moderator                        |
| [Spre](http://rathena.org/board/user/7960-spre/)                    | Support Leader                          |
| [Spyra](http://rathena.org/board/user/380-spyra/)                   | Script/DB Developer                     |
| [Syouji](http://rathena.org/board/user/412-syouji/)                 | Graphics Moderator                      |
| [Terces](http://rathena.org/board/user/594-terces/)                 | Global Moderator                        |
| [theultramage](http://rathena.org/board/user/6956-theultramage/)    | Core Developer (eAthena)                |
| [Tiera](http://rathena.org/board/user/839-tiera/)                   | Russian Moderator                       |
| [ToastOfDoom](http://rathena.org/board/user/396-toastofdoom/)       | Scripting Moderator                     |
| [Trojal](http://rathena.org/board/user/892-trojal/)                 | Forum Administrator                     |
| [Wildcard](http://rathena.org/board/user/1750-wildcard/)            | Core Developer                          |
| [Wolf](http://rathena.org/board/user/361-wolf/)                     | Portuguese Moderator                    |
| [Xantara](http://rathena.org/board/user/585-xantara/)               | Core Developer                          |
| [xazax](http://rathena.org/board/user/377-xazax/)                   | Core Developer                          |
| [Xynvaroth](http://rathena.org/board/user/18783-xynvaroth/)         | Community Manager                       |
| [Yommy](http://rathena.org/board/user/251-yommy/)                   | Community Manager                       |
| [Z3R0](http://rathena.org/board/user/263-z3r0/)                     | Script/DB Developer                     |
| [Zephyr](http://rathena.org/board/user/8756-zephyr/)                | Core Developer                          |

[Category:RAthena](/Category:RAthena "wikilink")

============================================================

## Startnpctimer

Syntax

Description
This script command works almost exactly like [initnpctimer](/initnpctimer "wikilink"), however calling this method does not reset the timer for the NPC. When called, it will resume the timer if it has been stopped using [stopnpctimer](/stopnpctimer "wikilink"), and it will not reset the NPC timer tick to 0.

Parameters
See [initnpctimer](/initnpctimer#Parameters "wikilink").

Examples

[`switch`](/switch "wikilink")`(Â select("ResumeÂ timer",Â "StopÂ timer")Â )`
`{`
`Â Â Â Â `[`case`](/case "wikilink")`Â 1:`
`Â Â Â Â Â Â Â Â Â startnpctimer;`
`Â Â Â Â Â Â Â Â Â `[`end`](/end "wikilink")`;`
`Â Â Â Â caseÂ 2:`
`Â Â Â Â Â Â Â Â Â stopnpctimer;`
`Â Â Â Â Â Â Â Â Â end;`
`}`
[`OnTimer`](/OnTimer "wikilink")`60000:`
`Â Â Â Â `[`announce`](/announce "wikilink")`Â "ThisÂ willÂ onlyÂ everÂ beÂ calledÂ once.",Â bc_all|bc_npc;`
`Â Â Â Â end;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Status

All functions inside status.c and status.h will go here. This is where all passive and positive/negative status codes are stored.

[Status Heal](/Status_Heal "wikilink")

[Status Change End](/Status_Change_End "wikilink")

[Status Get Status](/Status_Get_Status "wikilink")

[Status Percent Heal](/Status_Percent_Heal "wikilink")

[Status Isdead](/Status_Isdead "wikilink")

[Category:Source_Functions](/Category:Source_Functions "wikilink")

============================================================

## Statusup2

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will bump a specified stat of the invoking character up by the specified amount permanently. The amount can be negative. See '[statusup](/statusup "wikilink")'.

Examples
        // This will decrease a character's Vit forever.
        statusup2 bVit,-1;

============================================================

## Status_List

Status effects can affect a character through an item's effect, a skill's effect, or called from an NPC. Below is the list of all the possible status effects a character can have (taken from .

Status can be started by the [sc_start](/sc_start "wikilink") function.

Status Effects
    List of all Status:
    SC_ALL -1
    SC_STONE    0
    SC_FREEZE   1
    SC_STUN 2
    SC_SLEEP    3
    SC_POISON   4
    SC_CURSE    5
    SC_SILENCE  6
    SC_CONFUSION    7
    SC_BLIND    8
    SC_BLEEDING 9
    SC_DPOISON  10
    SC_PROVOKE  20
    SC_ENDURE   21
    SC_TWOHANDQUICKEN   22
    SC_CONCENTRATE  23
    SC_HIDING   24
    SC_CLOAKING 25
    SC_ENCPOISON    26
    SC_POISONREACT  27
    SC_QUAGMIRE 28
    SC_ANGELUS  29
    SC_BLESSING 30
    SC_SIGNUMCRUCIS 31
    SC_INCREASEAGI  32
    SC_DECREASEAGI  33
    SC_SLOWPOISON   34
    SC_IMPOSITIO    35
    SC_SUFFRAGIUM   36
    SC_ASPERSIO 37
    SC_BENEDICTIO   38
    SC_KYRIE    39
    SC_MAGNIFICAT   40
    SC_GLORIA   41
    SC_AETERNA  42
    SC_ADRENALINE   43
    SC_WEAPONPERFECTION 44
    SC_OVERTHRUST   45
    SC_MAXIMIZEPOWER    46
    SC_TRICKDEAD    47
    SC_LOUD 48
    SC_ENERGYCOAT   49
    SC_BROKENARMOR  50
    SC_BROKENWEAPON 51
    SC_HALLUCINATION    52
    SC_WEIGHT50 53
    SC_WEIGHT90 54
    SC_ASPDPOTION0  55
    SC_ASPDPOTION1  56
    SC_ASPDPOTION2  57
    SC_ASPDPOTION3  58
    SC_SPEEDUP0 59
    SC_SPEEDUP1 60
    SC_ATKPOTION    61
    SC_MATKPOTION   62
    SC_WEDDING  63
    SC_SLOWDOWN 64
    SC_ANKLE    65
    SC_KEEPING  66
    SC_BARRIER  67
    SC_STRIPWEAPON  68
    SC_STRIPSHIELD  69
    SC_STRIPARMOR   70
    SC_STRIPHELM    71
    SC_CP_WEAPON    72
    SC_CP_SHIELD    73
    SC_CP_ARMOR 74
    SC_CP_HELM  75
    SC_AUTOGUARD    76
    SC_REFLECTSHIELD    77
    SC_SPLASHER 78
    SC_PROVIDENCE   79
    SC_DEFENDER 80
    SC_MAGICROD 81
    SC_SPELLBREAKER 82
    SC_AUTOSPELL    83
    SC_SIGHTTRASHER 84
    SC_AUTOBERSERK  85
    SC_SPEARQUICKEN 86
    SC_AUTOCOUNTER  87
    SC_SIGHT    88
    SC_SAFETYWALL   89
    SC_RUWACH   90
    SC_EXTREMITYFIST    91
    SC_EXPLOSIONSPIRITS 92
    SC_COMBO    93
    SC_BLADESTOP_WAIT   94
    SC_BLADESTOP    95
    SC_FIREWEAPON   96
    SC_WATERWEAPON  97
    SC_WINDWEAPON   98
    SC_EARTHWEAPON  99
    SC_VOLCANO  100
    SC_DELUGE   101
    SC_VIOLENTGALE  102
    SC_WATK_ELEMENT 103
    SC_ARMOR    104
    SC_ARMOR_ELEMENT    105
    SC_NOCHAT   106
    SC_BABY 107
    SC_AURABLADE    108
    SC_PARRYING 109
    SC_CONCENTRATION    110
    SC_TENSIONRELAX 111
    SC_BERSERK  112
    SC_FURY 113
    SC_GOSPEL   114
    SC_ASSUMPTIO    115
    SC_BASILICA 116
    SC_GUILDAURA    117
    SC_MAGICPOWER   118
    SC_EDP  119
    SC_TRUESIGHT    120
    SC_WINDWALK 121
    SC_MELTDOWN 122
    SC_CARTBOOST    123
    SC_CHASEWALK    124
    SC_REJECTSWORD  125
    SC_MARIONETTE   126
    SC_MARIONETTE2  127
    SC_CHANGEUNDEAD 128
    SC_JOINTBEAT    129
    SC_MINDBREAKER  130
    SC_MEMORIZE 131
    SC_FOGWALL  132
    SC_SPIDERWEB    133
    SC_DEVOTION 134
    SC_SACRIFICE    135
    SC_STEELBODY    136
    SC_ORCISH   137
    SC_READYSTORM   138
    SC_READYDOWN    139
    SC_READYTURN    140
    SC_READYCOUNTER 141
    SC_DODGE    142
    SC_RUN  143
    SC_SHADOWWEAPON 144
    SC_ADRENALINE2  145
    SC_GHOSTWEAPON  146
    SC_KAIZEL   147
    SC_KAAHI    148
    SC_KAUPE    149
    SC_ONEHAND  150
    SC_PRESERVE 151
    SC_BATTLEORDERS 152
    SC_REGENERATION 153
    SC_DOUBLECAST   154
    SC_GRAVITATION  155
    SC_MAXOVERTHRUST    156
    SC_LONGING  157
    SC_HERMODE  158
    SC_SHRINK   159
    SC_SIGHTBLASTER 160
    SC_WINKCHARM    161
    SC_CLOSECONFINE 162
    SC_CLOSECONFINE2    163
    SC_DANCING  164
    SC_ELEMENTALCHANGE  165
    SC_RICHMANKIM   166
    SC_ETERNALCHAOS 167
    SC_DRUMBATTLE   168
    SC_NIBELUNGEN   169
    SC_ROKISWEIL    170
    SC_INTOABYSS    171
    SC_SIEGFRIED    172
    SC_WHISTLE  173
    SC_ASSNCROS 174
    SC_POEMBRAGI    175
    SC_APPLEIDUN    176
    SC_MODECHANGE   177
    SC_HUMMING  178
    SC_DONTFORGETME 179
    SC_FORTUNE  180
    SC_SERVICE4U    181
    SC_STOP 182
    SC_SPURT    183
    SC_SPIRIT   184
    SC_COMA 185
    SC_INTRAVISION  186
    SC_INCALLSTATUS 187
    SC_INCSTR   188
    SC_INCAGI   189
    SC_INCVIT   190
    SC_INCINT   191
    SC_INCDEX   192
    SC_INCLUK   193
    SC_INCHIT   194
    SC_INCHITRATE   195
    SC_INCFLEE  196
    SC_INCFLEERATE  197
    SC_INCMHPRATE   198
    SC_INCMSPRATE   199
    SC_INCATKRATE   200
    SC_INCMATKRATE  201
    SC_INCDEFRATE   202
    SC_STRFOOD  203
    SC_AGIFOOD  204
    SC_VITFOOD  205
    SC_INTFOOD  206
    SC_DEXFOOD  207
    SC_LUKFOOD  208
    SC_HITFOOD  209
    SC_FLEEFOOD 210
    SC_BATKFOOD 211
    SC_WATKFOOD 212
    SC_MATKFOOD 213
    SC_SCRESIST 214
    SC_XMAS 215
    SC_WARM 216
    SC_SUN_COMFORT  217
    SC_MOON_COMFORT 218
    SC_STAR_COMFORT 219
    SC_FUSION   220
    SC_SKILLRATE_UP 221
    SC_SKE  222
    SC_KAITE    223
    SC_SWOO 224
    SC_SKA  225
    SC_TKREST   226
    SC_MIRACLE  227
    SC_MADNESSCANCEL    228
    SC_ADJUSTMENT   229
    SC_INCREASING   230
    SC_GATLINGFEVER 231
    SC_TATAMIGAESHI 232
    SC_UTSUSEMI 233
    SC_BUNSINJYUTSU 234
    SC_KAENSIN  235
    SC_SUITON   236
    SC_NEN  237
    SC_KNOWLEDGE    238
    SC_SMA  239
    SC_FLING    240
    SC_AVOID    241
    SC_CHANGE   242
    SC_BLOODLUST    243
    SC_FLEET    244
    SC_SPEED    245
    SC_DEFENCE  246
    SC_INCASPDRATE  247
    SC_INCFLEE2 248
    SC_JAILED   249
    SC_ENCHANTARMS  250
    SC_MAGICALATTACK    251
    SC_SUMMER   256
    SC_EXPBOOST 257
    SC_ITEMBOOST    258
    SC_BOSSMAPINFO  259
    SC_LIFEINSURANCE    260
    SC_INCCRI   261
    SC_INCDEF   262
    SC_INCBASEATK   263
    SC_FASTCAST 264
    SC_MDEF_RATE    265
    SC_HPREGEN  266
    SC_INCHEALRATE  267
    SC_PNEUMA   268
    SC_AUTOTRADE    269
    SC_KSPROTECTED  270
    SC_ARMOR_RESIST 271
    SC_SPCOST_RATE  272
    SC_COMMONSC_RESIST  273
    SC_SEVENWIND    274
    SC_DEF_RATE 275
    SC_SPREGEN  276
    SC_WALKSPEED    277
    SC_REBIRTH  284
    SC_SKILLCASTRATE    285
    SC_DEFRATIOATK  286
    SC_HPDRAIN  287
    SC_SKILLATKBONUS    288
    SC_ITEMSCRIPT   289
    SC_S_LIFEPOTION 290
    SC_L_LIFEPOTION 291
    SC_JEXPBOOST    292
    //SC_IGNOREDEF  293
    SC_HELLPOWER    294
    SC_INVINCIBLE   295
    SC_INVINCIBLEOFF    296
    SC_MANU_ATK 297
    SC_MANU_DEF 298
    SC_SPL_ATK  299
    SC_SPL_DEF  300
    SC_MANU_MATK    301
    SC_SPL_MATK 302
    SC_FOOD_STR_CASH    303
    SC_FOOD_AGI_CASH    304
    SC_FOOD_VIT_CASH    305
    SC_FOOD_DEX_CASH    306
    SC_FOOD_INT_CASH    307
    SC_FOOD_LUK_CASH    308
    SC_FEAR 309
    SC_BURNING  310
    SC_FREEZING 311
    SC_ENCHANTBLADE 312
    SC_DEATHBOUND   313
    SC_MILLENNIUMSHIELD 314
    SC_CRUSHSTRIKE  315
    SC_REFRESH  316
    SC_REUSE_REFRESH    317
    SC_GIANTGROWTH  318
    SC_STONEHARDSKIN    319
    SC_VITALITYACTIVATION   320
    SC_STORMBLAST   321
    SC_FIGHTINGSPIRIT   322
    SC_ABUNDANCE    323
    SC_ADORAMUS 324
    SC_EPICLESIS    325
    SC_ORATIO   326
    SC_LAUDAAGNUS   327
    SC_LAUDARAMUS   328
    SC_RENOVATIO    329
    SC_EXPIATIO 330
    SC_DUPLELIGHT   331
    SC_SECRAMENT    332
    SC_WHITEIMPRISON    333
    SC_MARSHOFABYSS 334
    SC_RECOGNIZEDSPELL  335
    SC_STASIS   336
    SC_SPHERE_1 337
    SC_SPHERE_2 338
    SC_SPHERE_3 339
    SC_SPHERE_4 340
    SC_SPHERE_5 341
    SC_READING_SB   342
    SC_FREEZINGSPELL    343
    SC_FEARBREEZE   344
    SC_ELECTRICSHOCKER  345
    SC_WUGDASH  346
    SC_BITE 347
    SC_CAMOUFLAGE   348
    SC_ACCELERATION 349
    SC_HOVERING 350
    SC_SHAPESHIFT   351
    SC_INFRAREDSCAN 352
    SC_ANALYZE  353
    SC_MAGNETICFIELD    354
    SC_NEUTRALBARRIER   355
    SC_NEUTRALBARRIER_MASTER    356
    SC_STEALTHFIELD 357
    SC_STEALTHFIELD_MASTER  358
    SC_OVERHEAT 359
    SC_OVERHEAT_LIMITPOINT  360
    SC_VENOMIMPRESS 361
    SC_POISONINGWEAPON  362
    SC_WEAPONBLOCKING   363
    SC_CLOAKINGEXCEED   364
    SC_HALLUCINATIONWALK    365
    SC_HALLUCINATIONWALK_POSTDELAY  366
    SC_ROLLINGCUTTER    367
    SC_TOXIN    368
    SC_PARALYSE 369
    SC_VENOMBLEED   370
    SC_MAGICMUSHROOM    371
    SC_DEATHHURT    372
    SC_PYREXIA  373
    SC_OBLIVIONCURSE    374
    SC_LEECHESEND   375
    SC_REFLECTDAMAGE    376
    SC_FORCEOFVANGUARD  377
    SC_SHIELDSPELL_DEF  378
    SC_SHIELDSPELL_MDEF 379
    SC_SHIELDSPELL_REF  380
    SC_EXEEDBREAK   381
    SC_PRESTIGE 382
    SC_BANDING  383
    SC_BANDING_DEFENCE  384
    SC_EARTHDRIVE   385
    SC_INSPIRATION  386
    SC_SPELLFIST    387
    SC_CRYSTALIZE   388
    SC_STRIKING 389
    SC_WARMER   390
    SC_VACUUM_EXTREME   391
    SC_PROPERTYWALK 392
    SC_SWINGDANCE   393
    SC_SYMPHONYOFLOVER  394
    SC_MOONLITSERENADE  395
    SC_RUSHWINDMILL 396
    SC_ECHOSONG 397
    SC_HARMONIZE    398
    SC_VOICEOFSIREN 399
    SC_DEEPSLEEP    400
    SC_SIRCLEOFNATURE   401
    SC_GLOOMYDAY    402
    SC_GLOOMYDAY_SK 403
    SC_SONGOFMANA   404
    SC_DANCEWITHWUG 405
    SC_SATURDAYNIGHTFEVER   406
    SC_LERADSDEW    407
    SC_MELODYOFSINK 408
    SC_BEYONDOFWARCRY   409
    SC_UNLIMITEDHUMMINGVOICE    410
    SC_SITDOWN_FORCE    411
    SC_NETHERWORLD  412
    SC_CRESCENTELBOW    413
    SC_CURSEDCIRCLE_ATKER   414
    SC_CURSEDCIRCLE_TARGET  415
    SC_LIGHTNINGWALK    416
    SC_RAISINGDRAGON    417
    SC_GT_ENERGYGAIN    418
    SC_GT_CHANGE    419
    SC_GT_REVITALIZE    420
    SC_GN_CARTBOOST 421
    SC_THORNSTRAP   422
    SC_BLOODSUCKER  423
    SC_SMOKEPOWDER  424
    SC_TEARGAS  425
    SC_MANDRAGORA   426
    SC_STOMACHACHE  427
    SC_MYSTERIOUS_POWDER    428
    SC_MELON_BOMB   429
    SC_BANANA_BOMB  430
    SC_BANANA_BOMB_SITDOWN  431
    SC_SAVAGE_STEAK 432
    SC_COCKTAIL_WARG_BLOOD  433
    SC_MINOR_BBQ    434
    SC_SIROMA_ICE_TEA   435
    SC_DROCERA_HERB_STEAMED 436
    SC_PUTTI_TAILS_NOODLES  437
    SC_BOOST500 438
    SC_FULL_SWING_K 439
    SC_MANA_PLUS    440
    SC_MUSTLE_M 441
    SC_LIFE_FORCE_F 442
    SC_EXTRACT_WHITE_POTION_Z   443
    SC_VITATA_500   444
    SC_EXTRACT_SALAMINE_JUICE   445
    SC__REPRODUCE   446
    SC__AUTOSHADOWSPELL 447
    SC__SHADOWFORM  448
    SC__BODYPAINT   449
    SC__INVISIBILITY    450
    SC__DEADLYINFECT    451
    SC__ENERVATION  452
    SC__GROOMY  453
    SC__IGNORANCE   454
    SC__LAZINESS    455
    SC__UNLUCKY 456
    SC__WEAKNESS    457
    SC__STRIPACCESSORY  458
    SC__MANHOLE 459
    SC__BLOODYLUST  460
    SC_CIRCLE_OF_FIRE   461
    SC_CIRCLE_OF_FIRE_OPTION    462
    SC_FIRE_CLOAK   463
    SC_FIRE_CLOAK_OPTION    464
    SC_WATER_SCREEN 465
    SC_WATER_SCREEN_OPTION  466
    SC_WATER_DROP   467
    SC_WATER_DROP_OPTION    468
    SC_WATER_BARRIER    469
    SC_WIND_STEP    470
    SC_WIND_STEP_OPTION 471
    SC_WIND_CURTAIN 472
    SC_WIND_CURTAIN_OPTION  473
    SC_ZEPHYR   474
    SC_SOLID_SKIN   475
    SC_SOLID_SKIN_OPTION    476
    SC_STONE_SHIELD 477
    SC_STONE_SHIELD_OPTION  478
    SC_POWER_OF_GAIA    479
    SC_PYROTECHNIC  480
    SC_PYROTECHNIC_OPTION   481
    SC_HEATER   482
    SC_HEATER_OPTION    483
    SC_TROPIC   484
    SC_TROPIC_OPTION    485
    SC_AQUAPLAY 486
    SC_AQUAPLAY_OPTION  487
    SC_COOLER   488
    SC_COOLER_OPTION    489
    SC_CHILLY_AIR   490
    SC_CHILLY_AIR_OPTION    491
    SC_GUST 492
    SC_GUST_OPTION  493
    SC_BLAST    494
    SC_BLAST_OPTION 495
    SC_WILD_STORM   496
    SC_WILD_STORM_OPTION    497
    SC_PETROLOGY    498
    SC_PETROLOGY_OPTION 499
    SC_CURSED_SOIL  450
    SC_CURSED_SOIL_OPTION   501
    SC_UPHEAVAL 502
    SC_UPHEAVAL_OPTION  503
    SC_TIDAL_WEAPON 504
    SC_TIDAL_WEAPON_OPTION  505
    SC_ROCK_CRUSHER 506
    SC_ROCK_CRUSHER_ATK 507
    SC_INCMHP   529
    SC_INCMSP   530
    SC_PARTYFLEE    531

============================================================

## Stopnpctimer

Syntax

Description
This script command acts as a partner to the [initnpctimer](/initnpctimer "wikilink") and [startnpctimer](/startnpctimer "wikilink") script commands. When called, it will stop any active NPC timer from ticking but will not reset the tick value to 0. When [startnpctimer](/startnpctimer "wikilink") is called after this command, the timer will resume from the tick that it was stopped at.

Syntax
See [initnpctimer](/initnpctimer#Parameters "wikilink").

Examples

[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â Â `[`initnpctimer`](/Initnpctimer "wikilink")`;`
`Â Â Â Â `[`end`](/End "wikilink")`;`
[`OnTimer`](/OnTimer "wikilink")`30000:`
`Â Â Â Â `[`announce`](/Announce "wikilink")`Â "30Â secondsÂ hasÂ expired.",Â bc_all|bc_npc;`
`Â Â Â Â stopnpctimer;`
`Â Â Â Â end;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Strcharinfo

Syntax

Description
This function will return either the name, party name or guild name for the invoking character. Whatever it returns is determined by type.

If a character is not a member of any party or guild, an empty string will be returned when requesting that information.

Type Values
| Value | Description                              |
|-------|------------------------------------------|
| 0     | Character's name.                        |
| 1     | The name of the party they're in if any. |
| 2     | The name of the guild they're in if any. |
| 3     | The name of the map where the player is. |

Examples
[`mes`](/mes "wikilink")`Â "HiÂ "Â +Â `[`strcharinfo`](/strcharinfo "wikilink")`(0)Â +Â ",Â niceÂ toÂ meetÂ youÂ :)";`
[`if`](/if "wikilink")`Â (`[`getcharid`](/getcharid "wikilink")`(1))`
`Â Â Â mesÂ "YourÂ partyÂ nameÂ isÂ "Â +Â strcharinfo(1);`
`ifÂ (getcharid(2))`
`Â Â Â mesÂ "YourÂ guildÂ nameÂ isÂ "Â +Â strcharinfo(2);`
`mesÂ "YouÂ areÂ standingÂ onÂ theÂ mapÂ "Â +Â strcharinfo(3)Â +Â ".";`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Strcmp

Syntax

Description
This command compares two strings are returns a value:

| Value | Description            |
|-------|------------------------|
| 1     | string 1 &gt; string 2 |
| 0     | strings are equal      |
| -1    | string 1 &lt; string 2 |

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Strmobinfo

Syntax

Description
This function will return information about a [monster](/mob "wikilink") record in the database, as per . Type is the kind of information returned:

| Value | Description                                      |
|-------|--------------------------------------------------|
| 1     | 'english name' field in the database, a string.  |
| 2     | 'japanese name' field in the database, a string. |
| 3     | Level.                                           |
| 4     | Maximum HP.                                      |
| 5     | Maximum SP.                                      |
| 6     | Experience reward.                               |
| 7     | Job experience reward.                           |

Examples
[`mes`](/mes "wikilink")`Â `**`strmobinfo`**`(1,1002);Â //Â Poring`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Strnpcinfo

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This function will return the various parts of the name of the calling [NPC](/NPC "wikilink"). Whatever it returns is determined by type.

Type Values
| Value | Description                                 |
|-------|---------------------------------------------|
| 0     | The NPC's display name (visible\#hidden).   |
| 1     | The visible part of the NPC's display name. |
| 2     | The hidden part of the NPC's display name   |
| 3     | The NPC's unique name (::name).             |
| 4     | The name of the map the NPC is in.          |

Examples
`monk_test,306,151,5Â Â Â Â scriptÂ Â SealedÂ Shrine#1::SS_1Â Â Â 111,{`
`Â Â Â `[`mes`](/mes "wikilink")`Â `**`strnpcinfo`**`(0);Â //Â SealedÂ Shrine#1`
`Â Â Â mesÂ strnpcinfo(1);Â //Â SealedÂ Shrine`
`Â Â Â mesÂ strnpcinfo(2);Â //Â 1`
`Â Â Â mesÂ strnpcinfo(3);Â //Â SS_1`
`Â Â Â mesÂ strnpcinfo(4);Â //Â monk_test`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

============================================================

## Strpos

Syntax

Description
PHP style strpos. Finds a substring (needle) within a string (haystack). The offset parameter indicates the index of the string to start searching. Returns index of substring on successful search, else -1. Comparison is case sensitive.

Examples
[`strpos`](/strpos "wikilink")`("foobar",Â "bar",Â 0);Â //returnsÂ 3`
[`strpos`](/strpos "wikilink")`("foobarfoo",Â "foo",Â 0);Â //returnsÂ 0`
[`strpos`](/strpos "wikilink")`("foobarfoo",Â "foo",Â 1);Â //returnsÂ 6`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Substr

Syntax

Description
Returns the sub-string of the specified string inclusively between the set indexes. If indexes are out of range, or the start index is after the end index, an empty string will be returned.

The first letter of a string is index 0.

Examples
[`substr`](/substr "wikilink")`("foobar",Â 3,Â 5);Â //returnsÂ "bar"`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Subversion

Preface
This article will cover the **Subversion** details related to rAthena. **Subversion** is a version control system that allows multiple users to contribute to the development of rAthena, if permitted. It is also the most efficient method to downloading the source code of rAthena.

About Subversion
As mentioned above **Subversion** is a version control system that allows users to download the latest source code. It uses the structure of trunk and branch to declare the development code and the stable code. A **trunk** is referred to as the development code that needs to be tested and validated for bugs. A **branch** is typically used for developing larger features or as alternative development path, without breaking current trunk code. Exception to this is **stable**, which is considered stable subset of trunk.

### Checkout

When you **checkout** a piece of code, it is downloaded, along with all history, properties and files, onto your machine so you can make local changes or use it in a production environment.

### Commit

When you **commit** a piece of code, you are uploading your changes back to the server and increasing the revision number of the SVN by 1. The increase in revision number by 1 is done no matter how many changes are made per commit. Each commit includes the author's name, what they changed and when they changed it, which can be viewed and referenced later.

Only members of the [rAthena development team](/Staff "wikilink") can commit code straight to the rAthena SVN.

### Update

When you **update** your SVN, you are taking your local copy of the SVN that was previously **checked out** and applying the latest updates from the server to it. In this operation, many files are changed, but some are added, deleted or moved. When you update your copy of the SVN, a lot of conflicts can happen, so keep an eye out of those.

### Making changes

When you make a change to your copy of the SVN on Windows, a number of different icons will appear in the directory of the SVN. Below is a brief explanation of what each of these icons mean:

|                                                                                                |                                                                                                                                                                                       |
|------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Modified SVN tag](/Image:SVN_red.jpg "wikilink")                                              | Changes have been made from the original downloaded script this indicates what scripts you have modified.                                                                             |
| [Conflict SVN tag](/Image:SVN_yellow.jpg "wikilink")                                           | Conflicts with original script you need to search for the &lt;&lt;&lt;&lt;&lt;<mine> and &gt;&gt;&gt;&gt;&gt;&gt;&gt;<mine> to see what parts are conflicting and change accordingly. |
| [Unmodified SVN tag](/Image:SVN_green.jpg "wikilink")                                          | No changes with original script have been made.                                                                                                                                       |
| [Generated SVN tag](/Image:SVN_-.jpg "wikilink") or [New SVN tag](/Image:SVN_q.jpg "wikilink") | Files you added yourself that weren't in the original repository.                                                                                                                     |

### Obtain/Install Subversion

Please see the [:Category:Installation](/:Category:Installation "wikilink") appropriate category for installation of Subversion on your operating system of choice and how to utilize it.

rA Subversion Details
You can find the root or index of the rAthena source code at the following link: . This link can be used if you need to view a single file and don't want to dig up your "copy" of the source code.

### rAthena Trunk

**rAthena Trunk** is used as the *testing* or otherwise development code. It has all of the latest features, but is not guaranteed to be bug or problem free.

You can checkout the trunk branch from the following link:

### rAthena Developer Branches

Each developer that contributes to the rAthena Project is welcome to their own folder on the SVN, where they may make their own branch. A lot of times, this separate branch is a testing bed for a new feature. You should never assume that any branch that is not trunk or not stable is usable. Often times, it is not.

Using .diff/.patch files
Often times, developers and contributors will release their work with a .diff or .patch file. these files are designed specifically to be applied to an SVN revision and 'patched' in.

In Windows, you can apply a diff or patch file by placing the diff file into the SVN directory, right clicking the diff or patch file, navigating to the Subversion menu and clicking 'Apply Patch'.

If the revision numbers are different, or the code is different in anyway, the patch will likely fail with the error message that the revision numbers do not match. The diff file will include some important symbols and numbers to help you apply them manually.

`/path/to/fileÂ [RevisionÂ 233]`
`@@Â +241,4Â -241,4Â @@`
`+Â ThisÂ lineÂ willÂ beÂ addedÂ atÂ theÂ lineÂ numberÂ orÂ positionÂ indicatedÂ above.`
`-Â ThisÂ lineÂ willÂ beÂ removedÂ atÂ theÂ lineÂ numberÂ orÂ positionÂ indicatedÂ above.`

So in the file, we're to remove line 241 and replace it with the line that has the '+' next to it.

[Category:Basics](/Category:Basics "wikilink")

============================================================

## Summon

Syntax

Description
This command will summon a monster (see also '[monster](/monster "wikilink")'). Unlike monsters spawned with other commands, this one will set up the monster to fight to protect the invoking character. Monster name and mob id obey the same rules as the one given at the beginning of this document for permanent monster spawns with the exceptions mentioned when describing 'monster' command.

The effect for the skill 'Call Homonuculus' will be displayed centered on the invoking character.

Timeout is the time in milliseconds the summon lives, and is set default to 60000 (1 minute). Note that also the value 0 will set the timer to default, and it is not possible to create a spawn that lasts forever. If an event label is given, upon the monster being killed, the event label will run as if by '[donpcevent](/donpcevent "wikilink")'.

Examples
`//Â WillÂ summonÂ aÂ deadÂ branch-styleÂ monsterÂ toÂ fightÂ forÂ theÂ character.`
[`summon`](/summon "wikilink")`Â "--ja--",-1;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Switch

Syntax

Description
The switch statement is similar to a series of [if](/if "wikilink") statements on the same expression. In many occasions, you may want to compare the same variable (or expression) with many different values, and execute a different piece of code depending on which value it equals to. This is exactly what the [switch](/switch "wikilink") statement is for.

It is important to understand how the [switch](/switch "wikilink") statement is executed in order to avoid mistakes. The [switch](/switch "wikilink") statement executes line by line (actually, statement by statement). In the beginning, no code is executed. Only when a [case](/case "wikilink") statement is found with a value that matches the value of the switch expression the [case](/case "wikilink") statement(s) will to executed. The parser continues to execute the statements until the end of the [switch](/switch "wikilink") block, or the first time it sees a [break](/break "wikilink") statement. If you don't write a [break](/break "wikilink") statement at the end of a [case](/case "wikilink")'s statement list, the parser will go on executing the statements of the following [case](/case "wikilink") (fall-through).

Example
`//Â ReturnsÂ theÂ numberÂ ofÂ refinesÂ onÂ yourÂ topÂ headgear`
[`set`](/set "wikilink")`(.@refCount,Â `[`getequiprefinerycnt`](/getequiprefinerycnt "wikilink")`(EQI_HEAD_TOP));`
`//Â OutputÂ aÂ message`
[`switch`](/switch "wikilink")`(.@refCount)Â {`
`Â Â Â //Â 0Â meansÂ noÂ refineÂ yet`
`Â Â Â `[`case`](/case "wikilink")`Â 0:`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`("NoÂ refineÂ onÂ yourÂ topÂ headgearÂ yet?");`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`("YouÂ needÂ toÂ goÂ toÂ theÂ refiner!");`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â //Â +1`
`Â Â Â `[`case`](/case "wikilink")`Â 1:`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`("YourÂ topÂ headgearÂ isÂ +1!");`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â //Â +2`
`Â Â Â `[`case`](/case "wikilink")`Â 2:`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`("YourÂ topÂ headgearÂ isÂ +2!");`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â //Â +3`
`Â Â Â `[`case`](/case "wikilink")`Â 3:`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`("YourÂ topÂ headgearÂ isÂ +3!");`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â //Â +4`
`Â Â Â `[`case`](/case "wikilink")`Â 4:`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`("YourÂ topÂ headgearÂ isÂ +4!");`
`Â Â Â Â Â Â Â //Â NOTE:Â noÂ breakÂ hereÂ meansÂ theÂ codeÂ fromÂ "caseÂ 5"Â willÂ beÂ executedÂ afterwards!`
`Â Â Â `
`Â Â Â //Â +5`
`Â Â Â `[`case`](/case "wikilink")`Â 5:`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`("YourÂ topÂ headgearÂ isÂ +5!");`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â //Â [...]`
`Â Â Â //Â ThisÂ caseÂ willÂ beÂ triggeredÂ ifÂ noÂ otherÂ caseÂ wasÂ triggeredÂ yet`
`Â Â Â `[`default`](/default "wikilink")`:`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`("YourÂ topÂ headgearÂ hasÂ upgradesÂ aboveÂ +5!");`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Template_EntirePage

<includeonly>

> *For the entire article, see [](/{{{1}}} "wikilink").*

</includeonly><noinclude> This template should be placed at the top of an section, linking the reader to articles that contain details of a topic, which is summarized in the section only (related content).

Usage
`{{EntirePage|otherpage}}`


Example
`{{EntirePage|:Category:Templates}}`

turns into

> *For the entire article, see [:Category:Templates](/:Category:Templates "wikilink").*

[Category:Templates](/Category:Templates "wikilink") </noinclude>

============================================================

## Template_Mergebox

|                                                                    |     |
|--------------------------------------------------------------------|-----|
| <span style="color:#c00">â†’</span><span style="color:#00c">â†</span> |     |

<noinclude> </noinclude>

============================================================

## Template_OtherUse

<includeonly>

> *This article is about . For , see [](/{{{3}}} "wikilink").*

</includeonly><noinclude> This template should be placed at the top of an article, linking the reader to articles with similar titles or concepts that they may have been seeking instead.

Usage
`{{OtherUse|about|otherabout|otherpage}}`


Example
`{{OtherUse|aÂ specificÂ template|templatesÂ inÂ general|:Category:Templates}}`

turns into

> *This article is about a specific template. For templates in general, see [:Category:Templates](/:Category:Templates "wikilink").*

[Category:Templates](/Category:Templates "wikilink") </noinclude>

============================================================

## Template_User

[}}}:User:}}}|}}}}}}](/:{{{2 "wikilink")Â ([}}}:User talk:}}}|talk](/:{{{2 "wikilink") | [}}}:Special:Contributions/}}}|contribs](/:{{{2 "wikilink"))<noinclude>

Usage
This template provides an easy way to link to a user page and associated information.

`{{user|LoginName}}`

[Category:Templates](/Category:Templates "wikilink") </noinclude>

============================================================

## Texture

Texture Editing
There are 2 types of Texture editing. The first is editing the ground textures of maps the second is the textures of objects or models used in maps.

Map Texture Editing
Map textures are easy to make, load Photoshop, paint .net or even just paint and create a square image (Normal map images are either 256x256 or 512x512 pixels) then draw your image and save it as a 256 color bmp (You can make them higher but 256 color images take less space, have less issues and you don't need all the extra colors) to what ever locaion you desire in your client's data folder (You can make your own folder when it's your textures for your maps).

Adding A Texture To A Map
If you are using Browedit you'll need to edit the texture text file within Browedit's data folder (It can be handy to make your own but if you do you will have to add it to the config file your using). The texture files are structured in a simple way, which is, menu location and display name followed by directory location then file name (Eg. sets/prontera/forest/grass_path-curve1|Ã‡ÃŠÂµÃ¥Â¹Ã™Â´Ãš\\pron-dun-03.bmp). You can even set out how you want the menu listing for added sections by simply having just the menu location listed without any display names or file or folder listings (Eg. floor/carpet/|). This way you can structure your texture file at the beginning and list the textures afterwords. If you have successfully added your next map texture or textures to one of Browedit's texture files you'll be then able to find your texture in the texture window under what you put it under. If you are having trouble with the texture file just follow how one of the files is listed in there already.

Model Texture Editing
If you are like some and wish to edit the textures of an object (aka model) and may or may not wish to replace the existing model then read on. Also like map textures, model textures are simple bmp files which any image editor should be able to open and edit. But while this is so, transparency on models seems to be lost when replaced by another (Borf may fix this in Browedit).


Replacing a Model's Texture
With Browedit replacing a model's texture is as easy as pie. Load browedit and under 'Windows &gt; RSM Editor' open the model you wish to edit then click the texture you wish to replace and in the texture window (Just like map textures you will have to have added your model texture or textures if you wish to replace any textures) and once you have clicked on the new texture the old will be replace by the new and you can save your creation. It's that simple.


[Category:Mapping](/Category:Mapping "wikilink")

============================================================

## Timers_(Scripting)

Here I will try to better explain timers. To understand half of what's going on here, I suggest you already know how the basics of [scripting](/scripting "wikilink").

Many people are confused as to the use of timers, and this guide aims to lend a helping hand. So you might be wondering "What do we use timers for?" Well, my friend, this guide shall explain some of the many uses of timers. "<a>" would mean an actual tab. I am not keeping to my usual neatness or else there would be too many "<TAB>"s. Also, I will explain the usage and format of different kinds of timers in detail.

Use Number 1: NPC Speech
NPC Speech can be triggered using timers, and can make NPCs partition a long paragraph instead of spamming 3 instant lines.
Here's an example of it in proccess.
We'll take this apart after we look at it.

`prontera,23,20,2Â Â Â scriptÂ Â Non-spamming-NPC-TalkerÂ 54,{`
[`OnInit`](/OnInit "wikilink")`:`
[`startnpctimer`](/startnpctimer "wikilink")`;`
`end;Â `
`Â `
[`OnTimer`](/OnTimer "wikilink")`1000:`
[`npctalk`](/npctalk "wikilink")`Â "YÂ halloÂ darÂ lol.";`
[`end`](/end "wikilink")`;`
`OnTimer3000:`
`npctalkÂ "LawlÂ I'mÂ notÂ spamming.";`
`end;`
`OnTimer4000:`
[`setnpctimer`](/setnpctimer "wikilink")`Â 0;`
`end;`
`}`

Now, let's take a look at this script.
\# We'll start with "OnInit:".
Q: What is "OnInit:"?
A: "OnInit:" is the commands you wish the NPC to execute right after the NPC is loaded.

[`OnInit`](/OnInit "wikilink")`:`
[`set`](/set "wikilink")`Â $GlobalVariable,10;`
[`end`](/end "wikilink")`;`

Would set the variable (integer) "$GlobalVariable" to 10 when the server starts.
*also see: [More About Variables](/Variables "wikilink")*
Let's move on to the next item, shall we?

[`end`](/end "wikilink")`;`

"end;" is always needed to show that a label starting with "On",
*(and is a valid label that the server sees other functions for than just a custom label)*
has ended.
**If you do not end the "On" label with "end;", horrible things will happen, such as running through other labels.**

`OnInit:`
`setÂ $GlobalVariable,32;`
`LOtherLabel:`
`setÂ $GlobalVariable,$GlobalVariableÂ +Â 3;`
`end;`

When the NPC is run, the variable "$GlobalVariable" would be 35, since 32 + 3 = 35
Note that the initiation label is executed, and proceedes to run through "LOtherLabel".
This is because I did not insert an "end;" after "OnInit" ended, but instead, after LOtherLabel.
Note: Sometimes this is usefull too...
Example:

`<...>`
[`OnClock`](/OnClock "wikilink")`2100:Â Â `
`OnClock2300:`
<urscripthere>
`end;`
`<...>`

This Script will run at 21:00 AND at 23:00 (c&p from the woe-starting-script)

Use Number 2: Delayed Warp
Delayed warping is a feature you can put in your script to add more drama, or to automatically warp someone from a room when the player has exceeded the allotted time for being there. Here is an example of a delayed warp:

`prontera,23,20,2Â Â Â scriptÂ Â BombÂ SquadÂ Â 54,{`
`Â `[`mes`](/mes "wikilink")`Â "[Dismantler]";`
`Â mesÂ "WhereÂ isÂ theÂ bomb?Â WHEREÂ ISÂ IT??";`
`Â mesÂ "PleaseÂ helpÂ meÂ findÂ itÂ beforeÂ itÂ explodes.";`
`Â `[`close2`](/close2 "wikilink")`;`
`Â `[`addtimer`](/addtimer "wikilink")`Â 15000,Â "BombÂ Squad::OnWarn";`
`Â addtimerÂ 30000,Â "BombÂ Squad::OnBoom";`
`Â `[`dispbottom`](/dispbottom "wikilink")`Â "DismantlerÂ :Â TheÂ bombÂ willÂ detonateÂ inÂ 30Â seconds!";`
`Â `[`end`](/end "wikilink")`;`
`OnWarn:`
`Â dispbottomÂ "DismantlerÂ :Â OHÂ MYÂ GOD!Â ONLYÂ 15Â SECONDSÂ LEFTÂ -Â HURRY!!!!";`
`Â end;`
`OnBoom:`
`Â dispbottomÂ "*timeÂ slowsÂ downÂ asÂ suddenlyÂ theÂ tickingÂ stops*";`
`Â dispbottomÂ "....";`
`Â dispbottomÂ "BOOOOOOOM";`
`Â dispbottomÂ "TheÂ blastÂ flingsÂ youÂ away.";`
`Â `[`warp`](/warp "wikilink")`Â "prontera",0,0;`
`Â end;`
`}`

First thing that probably comes to your mind is: How can I find the bomb? The answer is simple, you cannot. I didn't include that NPC \*evil grin\*

Now, let's walk over this script in more detail. The start is nothing new, just a simple NPC header with a text box. Then there appears to be a close2;. This is not a typo. Close2; behaves a bit like close;, it displays a close button. However, the script will keep on running in the background, after the close button has been pushed. So, after the player presses the close button, it continues with the next line. For you lazy bums, here is an outtake of the script to prevent your scrolling finger from getting tired.

[`addtimer`](/addtimer "wikilink")`Â 15000,Â "BombÂ Squad::OnWarn";`
`addtimerÂ 30000,Â "BombÂ Squad::OnBoom";`
`dispbottomÂ "DismantlerÂ :Â TheÂ bombÂ willÂ detonateÂ inÂ 30Â seconds!";`
`end;`

Addtimer creates a player tagged timer. It is really simple to work with, although it can be inaccurate. Dj-Yhn's scriping bible ([Link](http://djyhnzo.freepgs.com/index.php?c=addtimer) ) says:


So, in our case, we start a timer that lasts for 15000ms, converted, 15 seconds. When the timer ends, it triggers Bomb Squad::OnWarn. In human language: It jumps to the label named OnWarn within the NPC called Bomb Squad. We also create another timer, that lasts for 30 seconds, and will trigger the label OnBoom. Then a simple dispbottom, to display some text in the player's chat, and an end; to terminate the script.

Q: Why not use NPC timers?
A: NPC timers do not remember which player triggered the script, and addtimer does remember the so called RID. Since we need to manipulate the player later on, we need the script to remember the RID.
Anyway, after 15 seconds, if the player hasn't logged out, the script will restart at the following point:

`OnWarn:`
`Â dispbottomÂ "DismantlerÂ :Â OHÂ MYÂ GOD!Â ONLYÂ 15Â SECONDSÂ LEFTÂ -Â HURRY!!!!";`
`Â end;`

What it does here, is another textdisplay in the chat of the player, and then end the script again. So, we wait, and we wait, and then, after another 15 seconds, the second timer triggers the label OnBoom, and starts this piece of code:

`OnBoom:`
`Â dispbottomÂ "*timeÂ slowsÂ downÂ asÂ suddenlyÂ theÂ tickingÂ stops*";`
`Â dispbottomÂ "....";`
`Â dispbottomÂ "BOOOOOOOM";`
`Â dispbottomÂ "TheÂ blastÂ flingsÂ youÂ away.";`
`Â warpÂ "prontera",0,0;`
`Â end;`

Again the dispbottoms, and then, a random warp, because the bomb exploded. Then another end; terminates the script again.

If you would have done this all with NPC timers, your mapserver would have smacked you and perhaps even tackled itself. Why? Well, the dispbottom and the warp command can only be executed on a player. To execute something on a player, the script needs to have a so called RID. Addtimer remembers this RID, a NPC timer does not.
Q: What if I click the NPC before both timers run out.
A: Yes, this can be a problem, and a good example why you need to watch out with player timers. They often require more protection than a NPC timer.
These protections are needed for various things. One is the one pointed out above. If I would click the NPC again, or even more, it will build up more timers on the player. This can result in multiple things. In the example script it can make it so that the player gets warped more than once. Or your mapserver might whine about duplicate timers or perhaps that there are too many timers. The solution for this is quite simple. Make it so that the player cannot talk to the NPC when the timers are still running. How? Well, set a variable after the timers have started to run, and unset the variable when both timers have run out. Or, you can stop any timers that were running before with deltimer "Bomb Squad::OnWarn"; and deltimer "Bomb Squard::OnBoom";.

The first solution alternatively creates it a new problem. What if the player logs out while the timers are still running? Because, on log out, the timers are terminated, at least, to my knowledge. However, the variable still remains set, so the player will not be able to talk to the NPC again. Again, for every problem, there is a solution. There is a thing called PCLogoutEvent. You can use this to unset the variable when the player logs out. There is also another solution called PCLoginEvent. You can use this to check if the variable is still set. If this is the case, then you have a choice; either reset the variable, or start the timers again.

Use Number 3: Deny Usage
Let's start with another example:

`prontera,23,20,2`<TAB>`script`<TAB>`DailyÂ Healer`<TAB>`54,{`
`Â Â Â Â mesÂ "[Healer]";`
`Â Â Â Â mesÂ "HelloÂ there.";`
`Â Â Â Â mesÂ "IÂ amÂ aÂ specialÂ healer,Â whoÂ willÂ fullyÂ restoreÂ yourÂ HPÂ andÂ SP.";`
`Â Â Â Â mesÂ "However,Â myÂ powersÂ areÂ limited,Â andÂ IÂ needÂ toÂ restÂ forÂ aÂ fullÂ dayÂ afterÂ healingÂ you,Â beforeÂ IÂ canÂ helpÂ youÂ again.";`
`Â Â Â Â next;`
`Â Â Â Â mesÂ "[Healer]";`
`Â Â Â Â mesÂ "DoÂ youÂ wantÂ meÂ toÂ healÂ you?";`
`Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â `[`if`](/if "wikilink")`(`[`select`](/select "wikilink")`("Yes","No")Â ==Â 2)Â {`
`Â Â Â Â Â Â Â Â Â mesÂ "[Healer]";`
`Â Â Â Â Â Â Â Â Â mesÂ "Ok,Â goodÂ byeÂ then.";`
`Â Â Â Â Â Â Â Â Â close;`
`Â Â Â Â }`
`Â Â Â Â if(TimeHealedÂ >Â gettimetick(2))Â {`
`Â Â Â Â Â Â Â Â Â mesÂ "[Healer]";`
`Â Â Â Â Â Â Â Â Â mesÂ "IÂ amÂ sorry,Â butÂ IÂ amÂ notÂ aÂ robot.";`
`Â Â Â Â Â Â Â Â Â mesÂ "IÂ amÂ stillÂ exhaustedÂ fromÂ theÂ lastÂ timeÂ IÂ healedÂ you.";`
`Â Â Â Â Â Â Â Â Â close;`
`Â Â Â Â }`
`Â Â Â Â mesÂ "[Healer]";`
`Â Â Â Â mesÂ "Ok,Â hereÂ goes!";`
`Â Â Â Â close2;`
`Â Â Â Â `[`percentheal`](/percentheal "wikilink")`Â 100,100;`
`Â Â Â Â setÂ TimeHealed,Â gettimetick(2)Â +Â 86400;Â //Â 86400Â isÂ oneÂ dayÂ inÂ seconds.`
`Â Â Â Â dispbottomÂ "HealerÂ :Â PleaseÂ giveÂ meÂ atÂ leastÂ aÂ dayÂ toÂ recover.";`
`Â Â Â Â end;`
`}`

Q: I see no timers?
A: That is correct. This NPC uses what I would like to call a Static Timer. We will review it in detail below.
Ok, at a first glance, this is a normal healer NPC that fully heals your HP and SP. The interesting part though is at the bottom. Let's start with the bottom most part:

`Â Â Â Â close2;`
`Â Â Â Â precenthealÂ 100,100;`
`Â Â Â Â setÂ TimeHealed,Â `[`gettimetick`](/gettimetick "wikilink")`(2)Â +Â 86400;Â //Â 86400Â isÂ oneÂ dayÂ inÂ seconds.`
`Â Â Â Â dispbottomÂ "HealerÂ :Â PleaseÂ giveÂ meÂ atÂ leastÂ aÂ dayÂ toÂ recover.";`
`Â Â Â Â end;`

The NPC does the healing here, but after the healing, it sets a weird value to TimeHealed. First, it gets a value from gettimetick(2). This command returns the amount of seconds elapsed since 1/1/1970, based on your server current time. To this number, it adds 86400, which is the amount of seconds that goes in a day (24 \* 60 \* 60). Those two combined give us the next time the player is allowed to use the NPC again. Now, we go back a tiny bit, to this line:

`Â Â Â Â if(TimeHealedÂ >Â gettimetick(2))Â {`

When the player wants to use the NPC again, the NPC first checks if the player is still allowed to be healed. How? Well, remember, in TimeHealed, we stored the next time the player is allowed to use the NPC again, in seconds. With gettimetick(2) we get the current time in seconds that has elapsed since 1/1/1970. If the player is allowed to use the NPC again, his stored value should be in the past, so it should be less than what gettimetick(2) will return to us. If it is the other way around, the player is not allowed to use the NPC yet, and it will jump inside the if-statement.

Please note, that using a Static Timer comes with some disadvantages. First, it uses a player variable. Second, the more dynamic you make it, the more resources it will cost. Although it should be less CPU intensive than a normal timer, making it dynamic means, that you do the math in the following if statement:

`Â Â Â Â if(TimeHealedÂ >Â gettimetick(2))Â {`

Instead of where you set the new time.

`Â Â Â Â setÂ TimeHealed,Â gettimetick(2)Â +Â 86400;Â //Â 86400Â isÂ oneÂ dayÂ inÂ seconds.`

Basically, these two lines will become this:

`Â Â Â Â if((TimeHealedÂ +Â $HealInterval)>Â gettimetick(2))Â {`

and

`Â Â Â Â setÂ TimeHealed,Â gettimetick(2);`

Where $HealInterval will be a variable that you can set as a GM through another NPC, to determine the time between two heal possibilities in seconds.

Difference between Timers
First, let's give an overview of the different kinds of timers or time triggered labels.


NPC Timers
NPC timers are timers that are executed from the NPC's point of view. This means that it does not require a player to initiate it, nor a player to use it. A perfect example of this is the Speaking NPC at the start of this article. NPC timers use the following seven commands:


For a quick overview how to use them all, take a look at this page: [NPC Timers](http://djyhnzo.freepgs.com/index.php?c=attachnpctimer). But if you have the patience, read on, because we will go into detail later on.

Player Timers
Player timers are used for NPCs that can interact with players, and need to have a specific count down or up per player. Unlike a NPC timer, a Player timer remembers which player started the timer. In other words, it remembers the RID and reattaches it again when needed. This allows you to alter a player's variable later on in the script, where this is not possible with a NPC timer. Player timers use similar commands as NPC timers. However, there are only three of them:


Again, for a quick overview, please visit this page: [Player Timers](http://djyhnzo.freepgs.com/index.php?c=addtimer). However, this topic will also be explained in detail later on.

Label Timers
Label Timers aren't timers actually. They are labels that are triggered depending on the current time of the server. There are several different kinds of them, but they all almost work in the same way. You simply put them in your script as a label, and they look like this:


Where XX is a two digit number and XXXX is a four digit number. SSSXXXX is three letters followed by four digits.

How they work? Relatively easy. OnClock is already explained in the first part of this article, but here is the recap in case you forgot. To make it work, you replace XXXX by an actual time in the 24 hour format. The time you put there, is when the label is triggered. So, for example:

`OnClock0700:Â //Â ThisÂ labelÂ isÂ triggeredÂ atÂ 7Â AMÂ servertime.`
`OnClock1414:Â //Â ThisÂ labelÂ isÂ triggeredÂ atÂ 2:14Â PMÂ servertime.`

Just like normal labels, you can use the same OnClock label in different NPCs, but, it cannot occur twice in the same NPC. You can have different OnClocks in the same NPC though.

OnDayXXXX works a bit like OnClock. The XXXX here stands for a specific day in a specific month. The first XX is the month, the second XX is the day of that month. When it is that day, it will be triggered. Assumed is, that this happens only once at the start of that day, or the first time that your server is up during that day. Here are a couple of examples:

`OnDay0101:Â //Â ThisÂ labelÂ isÂ triggeredÂ onÂ theÂ firstÂ dayÂ ofÂ January.`
`OnDay0515:Â //Â ThisÂ oneÂ isÂ triggeredÂ onÂ theÂ fifteenthÂ dayÂ ofÂ May.`
`OnDay1231:Â //Â ThisÂ oneÂ isÂ triggeredÂ onÂ theÂ lastÂ dayÂ ofÂ December.`
`OnDay0229:Â //Â ThisÂ labelÂ isÂ onlyÂ triggeredÂ whenÂ itÂ isÂ FebruaryÂ 29th,Â soÂ onceÂ everyÂ fourÂ years.`

OnHourXX and OnMinuteXX are similar in use. With OnHour, the XX stands for a specific hour during the day when it is triggered. The XX within OnMinute stands for a specific minute per hour. Some examples to make it clear:

`OnHour01:Â //Â TriggersÂ atÂ 1Â AMÂ everyÂ day.`
`OnHour20:Â //Â TriggersÂ atÂ 8Â PMÂ everyÂ day.`
`OnMinute00:Â //Â TriggersÂ atÂ eachÂ newÂ hour,Â soÂ 1:00,Â 2:00,Â 3:00,Â 4:00Â etc.`
`OnMinute17:Â //Â TriggersÂ eachÂ hourÂ atÂ 17Â minutesÂ past.Â So,Â 8:17,Â 9:17,Â 10:17Â etc.`

Last, and probably the least known is OnSSSXXXX. The best way to describe this one is an OnWeekday label. (OnWeekday does not exist.) In this label, SSS is replaced by one of the following: Sun, Mon, Tue, Wed, Thu, Fri, Sat. XXXX is replaced by a number in the same way as the XXXX in OnClockXXXX. It notes a specific time of the day. This label is triggered on the specified day of the week (SSS) at the specified time in 24 hour format (XXXX). At least, that is the theory. Here are some examples you can work with:

`OnSat1200:Â //Â TriggersÂ atÂ noonÂ onÂ eachÂ Saturday.`
`OnTue0707:Â //Â TriggersÂ atÂ 7Â pastÂ 7Â AMÂ onÂ Tuesday.`

Note: Although there is no OnSecondXX or OnMillisecondXXXX label, you can simulate this. Be aware though, this causes a heavy load on your server. To do this, you will have to use a NPC or player timer. Here is a short example simulating OnSecond30 using a NPC timer:

`-`<tab>`script`<tab>`AnnoyingÂ Announcer`<tab>`-1,{`
`OnInit:`
`Â Â Â Â initnpctimer;`
`Â Â Â Â end;`
`OnTimer1000:`
`Â Â Â Â if(gettime(1)Â !=Â 30)Â end;`
`Â Â Â Â announceÂ "I'mÂ veryÂ annoying.",bc_all;`
`Â Â Â Â setnpctimer,Â 0;`
`Â Â Â Â end;`
`}`

And one that triggers every 40 milliseconds:

`-`<tab>`script`<tab>`Flooder`<tab>`-1,{`
`OnInit:`
`Â Â Â Â initnpctimer;`
`Â Â Â Â end;`
`OnTimer40:`
`Â Â Â Â announceÂ "Flood!";`
`Â Â Â Â setnpctimer,Â 0;`
`Â Â Â Â end;`
`}`

Other Timers
These timers are actually nowhere related to timers. To be exact, they are event triggered labels, but let's go over them anyway, because they are useful. The timers I'm referring to are the following:


There are many more of these kinds of special event triggered labels, like the login event, but these, with the exception of OnTimerX, are all triggered without the need of a player. With OnTimerX, the X should be replaced by a time in milliseconds, for example:

`OnTimer100:Â //Â TriggersÂ 100msÂ afterÂ aÂ playerÂ timerÂ orÂ NPCÂ timerÂ isÂ startedÂ inÂ theÂ sameÂ NPC.`
`OnTimer3600000:Â //Â TriggersÂ 1Â hourÂ afterÂ aÂ playerÂ timerÂ orÂ NPCÂ timerÂ isÂ startedÂ inÂ theÂ sameÂ NPC.`

Recap
The above information should help you make a decission on what timertype to use. For example, if you do not need to do anything with the player who starts it, or don't need a player to start it, use a NPC timer. When you want to do stuff related to a player, or which needs an RID, use a player timer. When you want something to happen at a specific moment in time, use one of the On labels. And when you want your server to lag badly, simulate OnMillisecondXXXX.

NPC Timers in detail
In this section, we will explain how each NPC Timer command works in detail. First another quick list of the available NPC Timers:


Now that you know the commands, you will have to know how NPC Timers actually work. It is quite easy to be honest. A NPC can have one timer attached to it, which basically is a stopwatch. When you start a timer, a kind of NPC like variable will start running, often from 0. Every millisecond (1 second is 1000 milliseconds or 1000 ms), 1 is added to this variable. So, after 1 second, the variable will be 1000. After 12.5 seconds, the variable will be 12500.
Now, on each tick (tick means every increment of this variable), the timer will check if inside the NPC it is running from or attached to, if there is a label that matches his current value. The labels have a special format, and look like this:

`OnTimerXXXXX:`

Where XXXXX is a number that can be as small as 0, or as big as 7200000 (2 hours). If the value of the timer matches one of those labels, then the NPC will start running at that specific label. So, let's say you have a label OnTimer1000: (1 second), and you have started a NPC timer, then one second later, the script will jump to that label, and start executing the code underneath it.
Often, when using NPC Timers, you want to stop them at some point, or reset them, to make the NPC start over again. For this purpose, the [developers](/Developers "wikilink") have written several commands that are now at our disposal, which allow us to manipulate this NPC based timer.
A last thing you need to know, before we go into detail on the specific commands, is that by default a NPC Timer will run in the same NPC as where the command is found, and that there is no player attached. The last part means, that you will be unable by default to manipulate the player, variable wise or command wise.

InitNPCTimer
This command allows you create a new NPC timer, if it doesn't already exist, and have it start counting from 0. The NPC timer is attached to a NPC, normally the one you start it from. This means, that it will look for certain OnTimer labels inside that NPC alone. However, you can also make the command start a NPC Timer in another NPC. To do this, you will have to specify a NPC Name. You can even attach a player to the NPC Timer. To do this, you must specify the RID when using **initnpctimer**. This will allow your timer to execute commands that require a player's RID, like warp or countitem.
On top of that, you can also specify both a NPC Name and a Player RID. For that, put the NPC Name first, then a comma, and then the player's RID.
For those unfamiliar of what an RID is, the RID is a kind of hook with which online players are recognized. When coming online, the player's RID will be set equal to his account ID (getcharid(3)).
Some examples:

`initnpctimer;Â //Â StartÂ aÂ newÂ NPCÂ timerÂ andÂ makeÂ itÂ countÂ fromÂ 0.`
`initnpctimerÂ "MyÂ OtherÂ NPC";Â //Â StartÂ aÂ newÂ NPCÂ timerÂ inÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC"Â andÂ makeÂ itÂ countÂ fromÂ 0.`
`initnpctimerÂ getcharid(3);Â //Â StartÂ aÂ newÂ NPCÂ timerÂ andÂ makeÂ itÂ countÂ fromÂ 0.Â Also,Â attachÂ theÂ currentÂ playerÂ toÂ theÂ timer.`
`initnpctimerÂ "MyÂ OtherÂ NPC",getcharid(3);Â //Â StartÂ aÂ newÂ NPCÂ timerÂ inÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC"Â `
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â andÂ makeÂ itÂ countÂ fromÂ 0.Â Also,Â attachÂ theÂ currentÂ playerÂ toÂ theÂ timer.`

StartNPCTimer
This command almost works the same as [InitNPCTimer](/Initnpctimer "wikilink"). The only major difference is that it doesn't set the counter, or if you like, the timer variable, to 0. It simply continues where it was. So, if you started the NPC Timer with **initnpctimer**, and stopped it later on, but want it to start again where it left off, then you use this command. If you like you can read '''continuenpctimer instead of **startnpctimer**.
Again, for the various options, you might want to look at [InitNPCTimer](/Initnpctimer "wikilink"). We will just show some examples here:
startnpctimer; // Continues the NPC timer where it left off, or start a new one if there isn't a timer already.

`startnpctimerÂ "MyÂ OtherÂ NPC";Â //Â SameÂ asÂ above,Â butÂ startsÂ itÂ inÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC".`
`startnpctimerÂ getcharid(3);Â //Â SameÂ asÂ theÂ firstÂ one,Â butÂ attachesÂ theÂ currentÂ playerÂ toÂ theÂ timer.`
`startnpctimerÂ "MyÂ OtherÂ NPC",getcharid(3);Â //Â CombinationÂ ofÂ theÂ twoÂ above.`

StopNPCTimer
This command is the counterpart of [StartNPCTimer](/Startnpctimer "wikilink"). What it does, you've guessed it, it stops (or pauses) the timer. As for the parameters, the NPC Name part is exactly the same as with [InitNPCTimer](/Initnpctimer "wikilink"). If you specify a flag value (can be any non-zero value, zero will simply be ignored), then **stopnpctimer** will also detach the player, if any was attached to it.
Some examples again:

`stopnpctimer;Â //Â PausesÂ theÂ NPCÂ timerÂ inÂ theÂ currentÂ NPC.`
`stopnpctimerÂ "MyÂ OtherÂ NPC";Â //Â PausesÂ theÂ NPCÂ timerÂ inÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC"`
`stopnpctimerÂ 1;Â //Â PausesÂ theÂ NPCÂ timerÂ inÂ theÂ currentÂ NPCÂ andÂ detachesÂ anyÂ attachedÂ player.`
`stopnpctimerÂ "MyÂ OtherÂ NPC",1;Â //Â CombinationÂ ofÂ theÂ twoÂ above.`

GetNPCTimer
[GetNPCtimer](/Getnpctimer "wikilink") is a bit of a tricky command. Basically it can be used to read out the statistics on a certain NPC Timer. (Either the one in the current NPC, or the one defined by the parameter "NPC Name".) There are three different statistics for a NPC Timer, which are:
\* 0 - Current Tick Count


The first one (0), basically is a variable which holds the amount of milliseconds that the timer is on.
The second one (1), holds the amount of labels that the timer will still have to do in the NPC, if it is not reset or stopped prematurely.
The third one (2), holds the amount of OnTimer labels which the timer already has executed. Most likely, **initnpctimer** resets this counter. What **startnpctimer** does to this statistic, is unknown at the moment.
[GetNPCimer](/Getnpctimer "wikilink") always needs to have a type (one of the three above) specified when being used. For the second stat of the three, when there was originally a player attached, then it will still need this player to be attached, or it will give you back an error and return 0.
Some examples:

`getnpctimerÂ 0;Â //Â ReturnsÂ theÂ currentÂ amountÂ ofÂ ticks.`
`getnpctimerÂ 0,"MyÂ OtherÂ NPC";Â //Â DoesÂ theÂ same,Â onlyÂ forÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC".`
`getnpctimerÂ 1;Â //Â ReturnsÂ theÂ amountÂ ofÂ OnTimerÂ labelsÂ thatÂ areÂ stillÂ untriggered.`
`getnpctimerÂ 1,"MyÂ OtherÂ NPC";Â //Â SameÂ asÂ above,Â butÂ forÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC".`
`getnpctimerÂ 2;Â //Â ReturnsÂ theÂ amountÂ ofÂ OnTimerÂ labelsÂ thatÂ haveÂ alreadyÂ beenÂ triggered.`
`getnpctimerÂ 2,"MyÂ OtherÂ NPC";Â //Â SameÂ asÂ above,Â butÂ forÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC".`

SetNPCTimer
[SetNPCTimer](/Setnpctimer "wikilink") is the counterpart of [GetNPCTimer](/Getnpctimer "wikilink"). However, it only allows you to change the current amount of ticks (elapsed milliseconds) of a specific timer. If you define a NPC Name with it, it will use the timer in that NPC, otherwise, it will try to alter the timer in the NPC where the command is in. The amount you set the NPC Timer to, should be given in ticks, or milliseconds. The command theoritically works even when a NPC timer is stopped, but probably does not work when no NPC Timer has ever started in the NPC. This is about all there is to this command. It works, no matter if there is a player attached to it or not.
Some examples again:

`setnpctimerÂ 10000;Â //Â SetsÂ theÂ NPCÂ TimerÂ ofÂ theÂ currentÂ NPCÂ toÂ 10Â seconds.`
`setnpctimerÂ 2345,"MyÂ OtherÂ NPC";Â //Â SetsÂ theÂ NPCÂ TimerÂ inÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC"Â toÂ 2345Â ticksÂ orÂ ms.`
`setnpctimerÂ 0;Â //Â SetsÂ theÂ currentÂ NPCÂ TimerÂ toÂ 0.`

Note:
In the current revisions, **setnpctimer** also pauses the timer when changing the value. So, do not forget to use **startnpctimer**; after using **setnpctimer**, or your timer will not continue to run. (This might be changed in later revisions)

AttachNPCTimer
[AttachNPCTimer](/Attachnpctimer "wikilink") allows you to attach a player to a NPC later on. This can only be done to the NPC Timer that is in the same NPC as where this command is used. To attach a player, you will simply have to give his account id or RID (or UID/GID in some devs words) as a parameter.
Examples:

`attachnpctimerÂ getcharid(3);Â //Â AttachesÂ currentÂ playerÂ toÂ theÂ NPCÂ Timer.`
`attachnpctimerÂ 2000000;Â //Â AttachesÂ theÂ playerÂ withÂ accountÂ idÂ 2000000Â toÂ theÂ NPCÂ Timer,Â ifÂ heÂ isÂ online.`

DetachNPCTimer
[DetachNPCimer](/Detachnpctimer "wikilink") is the opposite of [AttachNPCTimer](/Attachnpctimer "wikilink"). Unlike its counterpart however, you can use it outside its current NPC. To do this, simply specify the name of the other NPC as parameter. This is optional of course.
Examples:

`detachnpctimer;Â //Â DetachesÂ theÂ attachedÂ playerÂ fromÂ theÂ NPCÂ Timer,Â ifÂ anyoneÂ wasÂ attached.`
`detachnpctimerÂ "MyÂ OtherÂ NPC";Â //Â DoesÂ theÂ same,Â onlyÂ forÂ theÂ NPCÂ namedÂ "MyÂ OtherÂ NPC".`

Pro's and Cons
Using NPC Timers have specific advantages and disadvantages. These will be listed in a compact way next.
Advantages:


Disadvantages:


Player Timers in detail
In this section, we will explain how each Player Timer command works in detail. First another quick list of the available Player Timers:


The list of player timer commands is significally shorter than the list of NPC Timers. This is right away one of the well.., downsides of the player timer. It has less flexibility. However, player timers are easier to work with for the same reason.
Player timers work in a reverse way from NPC Timers. Basically you enter a number in milliseconds (1 second is 1000 milliseconds), and a timer attached to the player who triggered it, will run down from that number to 0. When it reaches 0, it will jump to the eventlabel specified in the second parameter of addtimer.
Besides starting a timer, and let it run it's course, you can also delay it, and even delete it before it reaches 0. Also, a player timer, is like the word indicates, unique for each player for each label. So, a player will not influence the timer of another player in normal circumstances, and you can even start different timers for the same player, as long as the event label is different each time.

AddTimer
Addtimer allows you to start a new timer for the player who is currently interacting with the script. It has two parameters, which are not optional:


Ticks is a number which you specify, which is the starting time, in milliseconds. The timer will start to run immediately after this line, substracing 1 from the tickcount each millisecond, until it reaches 0.
The NPC::OnEvent, is an event label which you must specify. It must be for the following format: "NPC NAME::OnYourLabel", where OnYourLabel is an existing label that starts with On, in the NPC named NPC NAME. When the timer runs down to 0, it will jump to that label in that NPC. For easiness sake, let's call the "NPC::OnEvent" part of the command, and the upcoming commands, also the name of the player timer.
Well, that is all there is to the addtimer command, so some last examples:

`addtimerÂ 1000,"MyÂ NPC::OnMyLabel";Â //Â StartsÂ aÂ timerÂ thatÂ runsÂ outÂ forÂ 1000Â msÂ (1Â second),Â andÂ thenÂ jumpsÂ toÂ OnMyLabelÂ inÂ MyÂ NPC.`
`addtimerÂ 60000,"NPC1::OnLoser";Â //Â AfterÂ 60Â seconds,Â thisÂ timerÂ runsÂ out,Â andÂ jumpsÂ toÂ OnLoserÂ inÂ theÂ NPCÂ namedÂ NPC1.`

AddTimerCount
Addtimercount allows you to 'delay' a previously started timer. It takes the current amount of ticks left, and add the amount specified by the parameter ticks. So, in essence, this delays the timer by <ticks> amount of milliseconds. For which timer it does this, is up to you and the player who is currently attached to the script. Which timer you want to alter, is what you specify with the second parameter, "NPC::OnEvent" (or as said earlier, the name of the timer).
Some examples:

`addtimercountÂ 5000,"MyÂ NPC::OnMyLabel";Â //Â AddsÂ 5Â secondsÂ toÂ theÂ timerÂ withÂ theÂ nameÂ "MyÂ NPC::OnMyLabel".`
`addtimercountÂ -10000,"NPC1::OnLoser";Â //Â RemovesÂ 10Â secondsÂ fromÂ theÂ timerÂ withÂ theÂ nameÂ "NPC1::OnLoser".`

DelTimer
Deltimer is the counterpart of [addtimer](/Scripting_(Timers)#AddTimer "wikilink"). It stops and deletes a previously created timer that had the same event label/name as specified in the parameter. Of course, it only does this for the timer of the player that is currently attached to the script, but well, that is all it does.
Some examples:

`deltimerÂ "MyÂ NPC::OnMyLabel";Â //Â ErasesÂ theÂ timerÂ thatÂ wasÂ supposedÂ toÂ jumpÂ toÂ OnMyLabelÂ inÂ theÂ NPCÂ namedÂ MyÂ NPC.`
`deltimerÂ "NPC1::OnLoser";Â //Â ErasesÂ theÂ timerÂ namedÂ NPC1::OnLoser.Â (NameÂ ==Â EventÂ label)`

Pro's and Cons
Using Player Timers have specific advantages and disadvantages. These will be listed in a compact way next.
Advantages:


Disadvantages:


[Category:Scripting](/Category:Scripting "wikilink") [Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## Tips_and_Tricks_(Scripting)

Introduction
This article will go indepth on various ways to script smartly and optimize your scripts. There is no real manual to use this article, besides reading it all, and trying to remember.

Tips
If-Statements
There are several ways to make your if-statements function better and faster, and make them more readable at the same time.

### Use the switch statement:

Let's say we had the following code:

`if(getarg(1)Â ==Â 0)Â cutinÂ "kafra_06",2;`
`if(getarg(1)Â ==Â 1)Â cutinÂ "kafra_05",2;`
`if(getarg(1)Â ==Â 2)Â cutinÂ "kafra_04",2;`
`if(getarg(1)Â ==Â 3)Â cutinÂ "kafra_03",2;`
`if(getarg(1)Â ==Â 4)Â cutinÂ "kafra_02",2;`
`if(getarg(1)Â ==Â 5)Â cutinÂ "kafra_01",2;`
`if(getarg(1)Â ==Â 6)Â cutinÂ "kafra_09",2;`
`if(getarg(1)Â ==Â 7)Â cutinÂ "kafra_08",2;`
`if(getarg(1)Â ==Â 8)Â cutinÂ "kafra_09",2;`

We could replace that entire block by the switch command. This commands looks up the value that is provided, and jumps to the according case. Don't worry, if it isn't clear yet, let's go to the replacement code first:

`switch(getarg(1)){`
`Â Â Â caseÂ 1:Â cutinÂ "kafra_05",2;Â break;`
`Â Â Â caseÂ 2:Â cutinÂ "kafra_04",2;Â break;`
`Â Â Â caseÂ 3:Â cutinÂ "kafra_03",2;Â break;`
`Â Â Â caseÂ 4:Â cutinÂ "kafra_02",2;Â break;`
`Â Â Â caseÂ 5:Â cutinÂ "kafra_01",2;Â break;`
`Â Â Â caseÂ 6:Â cutinÂ "kafra_09",2;Â break;`
`Â Â Â caseÂ 7:Â cutinÂ "kafra_08",2;Â break;`
`Â Â Â caseÂ 8:Â cutinÂ "kafra_09",2;Â break;`
`Â Â Â default:Â cutinÂ "kafra_06",2;Â break;`
`}`

As you can see, each if-line has been replaced by a case-line. The command switch looks up the value of getarg(1). If this would be 5, then it would jump to "case 5", do the cutin, and then break. Break makes it jump to after the right curly bracket ('}').
If it finds getarg(1) to be 8, it jumps to "case 8", and does the same there. And the best part of the switch statement might be the default one. It kind of replaces the following really unoptimized line:

`if(getarg(1)Â !=Â 1Â &&Â getarg(1)Â !=Â 2Â &&Â getarg(1)Â !=Â 3Â ....Â &&Â getarg(1)Â !=Â 8)Â cutinÂ "kafra_06",2;`

In English, this means, if the value of getarg(1) does not have an accompanied case, it will jump to the default label.

### Use the brackets if you're executing more than 1 statement in 'if' statements.

If you have a piece of code, that needs to check for a condition, and do multiple things, then you can make it so, that you only have to use one if-line, instead of 4, 5, 1000 or something else. To do this, you will have to use the curly brackets. They tell the script engine that everything between the curly brackets belongs to the command before the left curly bracket. For example, take the following unoptimized code:

`if(@varÂ ==Â 1)Â mesÂ "haha";`
`if(@varÂ ==Â 1)Â mesÂ "heha";`
`if(@varÂ ==Â 1)Â mesÂ "hiha";`
`if(@varÂ ==Â 1)Â mesÂ "hoha";`
`if(@varÂ ==Â 1)Â mesÂ "huha";`

This can be replaced by the following:

`if(@varÂ ==Â 1){`
`Â Â Â mesÂ "haha";`
`Â Â Â mesÂ "heha";`
`Â Â Â mesÂ "hiha";`
`Â Â Â mesÂ "hoha";`
`Â Â Â mesÂ "huha";`
`}`

What is so optimized about this? Well, in this case, you can easily see that each if-statement is completely the same, but keep in mind, that the script engine needs to do each if-statement each time it sees one. So, in the top part, it needs to do 5 checks. In the replacement, it only has to do one single check. Based on that check, it either executes the code between the { and } or skips to right after the }.
Also, from a writer's point of view, this is exactly the same for you. You see in one glance that the entire part between the curly brackets belongs to the if(@var == 1) statement, so you do not have to check each if-statement individually to see that they are all the same.

### Use if...else if you're not expecting more than 2 values.

When you evaluate if a variable meets a certain condition, and you need to do something when that condition is true, and something differently when the condition is false, then you really want to use the if...else combination. This does not only make it more clear for yourself, but also faster for the script engine, because it only needs to evaluate one if-statement instead of two. Take this unoptimized piece of code for example:

`setÂ @win,Â rand(2);Â //Â GeneratesÂ 1Â orÂ 0`
`if(@winÂ ==Â 1){`
`Â Â Â mesÂ "YouÂ win!";`
`}`
`if(@winÂ ==Â 0){`
`Â Â Â mesÂ "YouÂ lose!";`
`}`

This can be replaced by the following piece of code:

`setÂ @win,Â rand(2);`
`if(@winÂ ==Â 1){`
`Â Â Â mesÂ "YouÂ win!";`
`}Â elseÂ {`
`Â Â Â mesÂ "YouÂ lose!";`
`}`

Variable Use
A lot of people do not pay any attention when it comes to using variables. They randomly choose a type of variable and use it, or even use a variable when it isn't needed. You must keep in mind though, that rAthena has a limited amount of variables it can use, for (global) account and permanent player variables. Therefor, you want to minimize the use of it. This section will contain some examples of how to minimize that use.

### Use binary methods to store large number of flags (1 and 0).

What a lot of people do not know, is that a single variable can store up to 32 different flags, or values. And with this, I do not mean the use of an array, but really a single variable. This comes in very handy when you are only using a 1 or 0, for example: "set @win, 1;". In a normal situation, you can only win or lose, so it can only be a 1 or 0.
But, let's see how this translates into normal code:
Bad code -

`setÂ flag1,Â 1;`
`setÂ flag2,Â 1;`
`setÂ flag3,Â 0;`
`setÂ flag4,Â 1;`
`setÂ flag5,Â 0;`
`if(flag1)Â mesÂ "flag1Â isÂ checked";`

Good code -

`setÂ flags,Â 26;Â //Â (equivalentÂ to:Â 16|8|0|2|0Â [binaryÂ 11010])`
`if(flags&16)Â mesÂ "flag1Â isÂ checked";Â //Â 11010Â &Â 10000Â >Â 0Â (10000)`

As you can see, only one variable used instead of 5, and it contains all the values of those five variables. (In this case, it is also a lot shorter, but that doesn't have to be the case.)
Note:
Using binary methods to store variables require that you have at least some knowledge on how to use binary values. This is what you may call advanced scripting, so it is quite normal if you do not understand it right away.

Infinite For Loops
By nature, the Athena Scripting Engine has a limit on the amount of loops that can go through in a specific amount of time, thus halting the script to eliminate the ever dreadful 'Infinite Loop'. However, there is a way around this:

This script below, would actually halt around 682 give or take a few loops, due to preventions on infinite loops.

`forÂ (setÂ .@a,Â 0;Â .@aÂ <Â 10000;Â setÂ .@a,Â .@aÂ +Â 1)Â {`
`Â Â debugmesÂ .@a;`
`}`

This method used below slows the processes down by a millisecond. This works because each time 'sleep' or 'sleep2' is used, the script's gotocount is reset.

`//Â SupposingÂ youÂ haveÂ 10,000Â entries...Â letÂ .@bÂ =Â TotalÂ Entries,Â .@aÂ isÂ yourÂ splicingÂ filterÂ everyÂ 500Â entries`
`whileÂ (.@bÂ <Â 10000)Â {`
`Â Â forÂ (setÂ .@a,Â .@b;Â .@aÂ <Â .@bÂ +Â 500;Â setÂ .@a,Â .@aÂ +Â 1)Â {`
`Â Â Â Â debugmesÂ .@a;`
`Â Â }`
`Â Â setÂ .@b,Â .@a;`
`Â Â sleepÂ 1;`
`}`

See Also: \[\[freeloop\]

While (!getmapxy())
The standard getmapxy() returns 0 if the player is found, and 1 if the player is offline. By using the !getmapxy() feature, while the value does NOT have a value aka it's 0, loop (player still online and active) This can also be written while (getmapxy() == 0) { }

`whileÂ (Â !getmapxy(.@map$,Â .@x,Â .@y,Â 0Â )Â )Â {`
`Â Â ifÂ (Â .@map$Â !=Â "prontera"Â )Â {Â //Â checkÂ theÂ playerÂ hasÂ warpedÂ toÂ otherÂ mapÂ orÂ not`
`Â Â Â Â dispbottomÂ "gone";Â `
`Â Â Â Â end;Â `
`Â Â }`
`Â Â dispbottomÂ .@xÂ +"Â "+Â .@y;Â //Â reportÂ theÂ positionÂ everyÂ NÂ second`
`Â Â sleep2Â 1000;Â //Â pauseÂ theÂ script`
`}`
`end;Â //Â whenÂ theÂ playerÂ logout,Â theÂ loopsÂ break`

Dynamic Menu
These menu's help in many different ways. Perhaps you have an unknown list of items and you want the user to select one. How do you know which item it was? What if you have a menu based on certain criteria? This menu can then change based on the information per player. This is where a dynamic menu can come into play.

The basis of a Dynamic menu is as follows: Knowing what option a player chooses, even though the option chosen may be random.

This is easily done with a small example of a simple (Item Required Warper)

`prontera,158,174,4Â scriptÂ Â MyDynWarperÂ 88,{`
`//Â TakeÂ Locations`
`setarrayÂ .@maps$[0],"Prontera","Morocc","Geffen","Izlude";`
`setarrayÂ .@mapx[0],158,100,200,300;`
`setarrayÂ .@mapy[0],174,100,200,300;`
`//Â SetÂ ItemsÂ Needed`
`setarrayÂ .@items,501,502,503,504;Â `
`//Â GenerateÂ Menu`
`forÂ (setÂ .@a,Â 0;Â .@aÂ <Â getarraysize(.@maps$);Â setÂ .@a,Â .@aÂ +Â 1)Â {`
`Â Â ifÂ (countitem(.@items[.@a]))Â {`
`Â Â Â Â setÂ .@menu_maps$[getarraysize(.@menu_maps$)],Â .@maps$[.@a];`
`Â Â Â Â setÂ .@menu_index[getarraysize(.@menu_index)],Â .@a;`
`Â Â }`
`}Â Â `
`//Â GenerateÂ theÂ MenuÂ String`
`setÂ .@menu$,Â .@menu_maps$[0];`
`forÂ (setÂ .@a,Â 1;Â .@aÂ <Â getarraysize(.@menu_maps$);Â setÂ .@a,Â .@aÂ +Â 1)Â {`
`Â Â setÂ .@menu$,Â .@menu$Â +Â ":"Â +Â .@menu_maps$[.@a];`
`}`
`//Â QueryÂ Selection`
`setÂ .@a,Â select(.@menu$)Â -Â 1;Â `
`warpÂ .@menu_maps$[.@a],Â .@mapx[.@a],Â .@mapy[.@a];`
`end;`
`}`

Compact IF Statement
While, it looks messy, it can help shorten and quicken simplifed IF/ELSE statements. Example below includes a before and after.

Before:

`ifÂ (Â teamÂ ==Â 1Â )`
`Â Â Â Â mesÂ "YouÂ areÂ teamÂ Red";`
`else`
`Â Â Â Â mesÂ "YouÂ areÂ teamÂ Blue";`

After:

`mesÂ "YouÂ areÂ teamÂ "+(Â (Â teamÂ ==Â 1Â )?"Red":"Blue"Â );`

[Category:Scripting](/Category:Scripting "wikilink") [Category:Scripting Tips and Tricks](/Category:Scripting_Tips_and_Tricks "wikilink")

============================================================

## Tip_of_the_day

[thumb|280x180px|Typical tip of the day window](/Image:Tipoftheday.gif "wikilink") A window that contains various game related shortcuts, commands and usability tips for beginners. It appears on every game start, unless disabled, and after entering **/tip** in the chat window.

Customization
The available tips are stored inside the **tipOfTheDay.txt**, **tipOfTheDay_e.txt**, **tipOfTheDay_j.txt** or **tipOfDay.txt** file depending on the client type, in one-column [Token Text Table](/Token_Text_Table "wikilink") format. If the file is missing, the window appears empty. Translation packs contain the translated version of this file, if you do not want to create one on your own.

Registry
The configuration for displaying the tip of the day on every start up is stored at

    HKEY_LOCAL_MACHINE\Software\Gravity Soft\Ragnarok

in value **SHOWTIPSATSTARTUP** (DWORD) where **0** means disabled and **1** means enabled.

[Category:Client_Configuration](/Category:Client_Configuration "wikilink")

============================================================

## Token_Text_Table

A text table format used for the [Ragnarok Online](/Ragnarok_Online "wikilink") client. It is used for organizing text data into columns and rows, mostly for id-description relations. It usually has the file extension **.txt** and can be found inside and outside the [GRF](/GRF "wikilink").

File Format
The files are plain text files, where rows and columns are separated by the token character [\#](/wikipedia:Hash_symbol "wikilink"). It can be edited with every text editor like Notepad. Make sure, that the file is not stored in [Unicode](/wikipedia:Unicode "wikilink") or [UTF-8](/wikipedia:UTF-8 "wikilink").

The amount of columns is fixed for each file, that uses this file format. Rows are either limited by available memory or by hard-coded limits, as seen below. Note that all of these limits can be lifted by hexing the client. Whether line breaks are allowed within a cell or not depends on each file as well. Multi-line cells support using \# character inside the text, as long it is followed by a **space character**. Contrary to that, all other \# characters must be followed by either a new line or a non-spacing character.

### Examples

1-column table (CardPostfixNameTable)

    4039#
    4041#
    4042#
    4046#
    4050#

1-column table multi-line (TipOfTheDay)

    /savechat : saves chat as text file.
    #
    You can select a type of mini-map using ctrl+[*],between transparency and opacity.
    #
    You can change the view of character with dragging a mouse while holding right button and pressing shift key.
       Double clicking right button on a mouse enables to return the view to default one.
    #

2-column table (IdNum2ItemDisplayNameTable)

    512#Apple#
    513#Banana#
    514#Grape#

2-column multi-line table (IdNum2ItemDescTable)

    1071#
    A test tube that contains some sort of unidentified fluid.
    ^ffffff_^000000
    Weight :^777777 3^000000
    #
    1072#
    It's a personal letter written by Mahnsoo, chief of the Merchant Guild.
    ^ffffff_^000000
    Weight :^777777 1^000000
    #
    1073#
    A delivery voucher with the serial number # 2485741
    ^ffffff_^000000
    Weight :^777777 1^000000
    #

### Comments

You may insert comments inside the file by putting **//** at the beginning of a line. The comment then spans to the end of that line. Trailing comments (not starting at beginning of a line) will not work. Example:

    row1#
    // Disabled because it does not work
    // row2#
    row3#

### Known Row Limits

| Table Name                 | Row Limit |
|----------------------------|-----------|
| BookItemNameTable          | 80000     |
| CardItemNameTable          | 80000     |
| CardPostfixNameTable       | 80000     |
| CardPrefixNameTable        | 80000     |
| IdNum2ItemDescTable        | 80000     |
| IdNum2ItemDisplayNameTable | 80000     |
| IdNum2ItemResNameTable     | 80000     |
| IndoorRswTable             | 4096      |
| ItemParamTable             | 80000     |
| ItemSlotTable              | 80000     |
| ItemSlotCountTable         | 80000     |
| LevelUseSkillSpAmount      | 16384     |
| MapNameTable               | 4096      |
| MapObjLightTable           | 4096      |
| MetalProcessItemList       | 80000     |
| Mp3NameTable               | 4096      |
| MsgStringTable             | 4096      |
| Num2CardIllustNameTable    | 80000     |
| Num2ItemDesctable          | 80000     |
| Num2ItemDisplayNameTable   | 20000     |
| Num2ItemResNameTable       | 80000     |
| QuestID2Display            | 80000     |
| SkillNameTable             | 4096      |
| SkillDescTable             | 16384     |
| SkillDescTable2            | 16384     |

[Category:File Formats](/Category:File_Formats "wikilink")

============================================================

## Transition_from_SVN_to_GIT

Transitioning from SVN to GIT
While switching your server to GIT may sound like a daunting task, it's relatively simple and straightforward, even for servers with heavy modifications. **We strongly encourage you to do so, since our primary efforts will now be directed towards our repository on GitHub.** Simply follow the steps listed below, depending on your OS:

Windows Instructions
For this process, we'll be using [msysgit](https://code.google.com/p/msysgit/downloads/list?can=2) and [TortoiseGit](https://code.google.com/p/tortoisegit/wiki/Download?tm=2). Download and install both (in that order) if you don't have them already.

### In TortoiseGit, right-click and select "Git Clone..." where you want to create your new repository

[<File:ULa1u8a.jpg>](/File:ULa1u8a.jpg "wikilink")

### Enter rAthena's GitHub URL and hit "OK"

[`https://github.com/rathena/rathena`](https://github.com/rathena/rathena)

[<File:czNpAgf.jpg>](/File:czNpAgf.jpg "wikilink")

### Cloning may take a minute or two. Hit "Close" after it finishes

[<File:dgF5HRl.jpg>](/File:dgF5HRl.jpg "wikilink")

### Update your SVN repository using TortoiseSVN's "SVN Update"

[<File:9HNDSej.jpg>](/File:9HNDSej.jpg "wikilink")

### Hit "OK" after it finishes. Resolve any conflicts now (read more below)

[<File:5ww9HK7.jpg>](/File:5ww9HK7.jpg "wikilink")

### Copy all files in your SVN directory, excluding the .svn folder itself

[<File:gNTwT7B.jpg>](/File:gNTwT7B.jpg "wikilink")

### In your new GIT directory, paste the files you just copied

[<File:QDXu3Rq.jpg>](/File:QDXu3Rq.jpg "wikilink")

### When prompted, opt to merge all folders and replace all files

[<File:N9psegA.jpg>](/File:N9psegA.jpg "wikilink") [<File:iOeYCNr.jpg>](/File:iOeYCNr.jpg "wikilink")

### In TortoiseGit, right-click and select "Stash Save" to store all your changes

[<File:tVyxmsw.jpg>](/File:tVyxmsw.jpg "wikilink")

### Create a name that you'll recognize later, like "Update to Latest"

[<File:0YPzXbf.jpg>](/File:0YPzXbf.jpg "wikilink")

That's it, you're finished. When you want to update your GIT repository, follow these steps:

### Right-click and select "Pull..." to merge all new changes

[<File:JSjpp8l.jpg>](/File:JSjpp8l.jpg "wikilink") [<File:Fna1kfs.jpg>](/File:Fna1kfs.jpg "wikilink")

### Right-click and select "Stash Pop" to restore your custom changes

[<File:GwvsyxR.jpg>](/File:GwvsyxR.jpg "wikilink") [<File:sg3BF4Z.jpg>](/File:sg3BF4Z.jpg "wikilink")

Linux Instructions
### Clone the GIT repository

`gitÂ cloneÂ `[`https://github.com/rathena/rathena.git`](https://github.com/rathena/rathena.git)

This creates the new directory named "rathena" and will be the new server location, but can be changed is desired.

### Update SVN Repo to latest

`svnÂ coÂ http://svn.code.sf.net/p/rathena/svn/trunk/`

You can solve conflicts later, but it's best to do it now and make sure you can compile, and even test the server, before continuing.

### Copy the files over

`cpÂ -rfÂ trunk/*Â rathena/`

Recursive tag to copy all sub-directories and files, forced so you don't have to manually accept overwriting each file.

### Configure and compile new GIT server location

`./configureÂ &&Â makeÂ cleanÂ sql`

If there are any specific functions you enable when configuring, modify this command.

### Shut down old server and start-up new one

If you have any server auto-restart scripts, you can either edit the cronjob to point to a new location, or rename directories:

`mvÂ trunkÂ trunk-bakÂ &&Â mvÂ rathenaÂ trunk`

### You can now pull GIT changes by typing

`gitÂ pull`

Notes about GIT
These commands assume you have changed directory to new GIT directory. Â  When doing a pull, you may receive a message saying:

`Please,Â commitÂ yourÂ changesÂ orÂ stashÂ themÂ beforeÂ youÂ canÂ merge.`
`Aborting`

Â  In order to pull changes into your local repository, you have a couple options. Â The one which will be most used by our users is going to be to stash the changes and recall these changes after a pull. Â If you're just starting using GIT, then you'll need to configure a name and email before doing a stash. Â 

`gitÂ configÂ --globalÂ user.emailÂ "you@example.com"`
`gitÂ configÂ --globalÂ user.nameÂ "YourÂ Name"`

Â  Now, stash local changes: Â 

`gitÂ stashÂ saveÂ "UpdateÂ toÂ Latest"`

"Update to Latest" can be anything, it's just a note. Â  Do the pull - Followed by a 'pop' to replace your code: Â 

`gitÂ pull`
`gitÂ stashÂ pop`

Â  No conflicts? Â You're good to complete your update! Â Otherwise, keep reading...

Conflicts
It's possible that you'll run into conflicts along the way, with messages such as: Â 

`CONFLICTÂ (content):Â MergeÂ conflictÂ inÂ src/map/atcommand.c`

Â  When you see these messages, a conflict in merging your code occurred. Â Much like resolving code conflicts in SVN, these conflicts create points within the files which show your code compared to the code pulled from the remote repo. Â To fix them, open your files and find the conflict locations denoted by: Â 

`<<<<<<<:Â IndicatesÂ theÂ startÂ ofÂ theÂ linesÂ thatÂ hadÂ aÂ mergeÂ conflict.`
`=======:Â IndicatesÂ theÂ breakÂ pointÂ usedÂ forÂ comparison.Â BreaksÂ upÂ changesÂ thatÂ userÂ hasÂ committedÂ (above)Â toÂ changesÂ comingÂ fromÂ mergeÂ (below)Â toÂ visuallyÂ seeÂ theÂ differences.`
`>>>>>>>:Â IndicatesÂ theÂ endÂ ofÂ theÂ linesÂ thatÂ hadÂ aÂ mergeÂ conflict.`

Â  Then you can choose which piece of code you wish to keep. Â After all shown conflicts are corrected, you can continue your normal update process. Â 

References

*Credits to [Akinari](http://rathena.org/board/user/9210-akinari/) for writing a good part of this guide. Credits to [Euphy](http://rathena.org/board/user/4938-euphy/) to putting it together on [the forums](http://rathena.org/board/topic/87120-transitioning-from-svn-to-git/)*

============================================================

## Triad_Patcher

**Triad Patcher** is a Ragnarok Online auto-patcher, written in Borland Delphi 6 and currently available in French and English. It is divided into the patcher executable itself and tools for creating configuration and patches. Works on all 32-bit Windows versions, Windows Vista and Windows 7 may require running as administrator, though.

Features
The patcher is able to patch local files, as well as multiple [GRF](/GRF "wikilink") archives (only version 2.00 is supported). The user interface offers displaying of patch news, full skinning with transparency support, support for additional languages, background music during patch process and usage of a static or dynamic banner in formats BMP, JPG, PNG and SWF. It has the capability to update itself and the configuration automatically. The patches are provided using a proprietary file format (Triad Patcher Patch, .tpp).

Initial Setup
After extracting the release archive, following steps are required, before the patcher is ready for distribution:


Then completed, files **config.tpc**, **Triad Patcher.exe** and **GRF.dll** are distributed to the players as part of the other client files.

Configuration
Most of the configuration is required to be done only once, unless something client-side or connection-related requires changes. After setting all options in **config.ini** and **languages.ini**, and preparing related files such as skin and background music, everything is packed into a single file called **config.tpc** using a included tool located in **Configurator\\Triad Configurator.exe**. The tool is pretty straight-forward, thus does not require further explanation. Configuration files should be kept after building the config, as there are no means to decompile it. Default configuration can be found in directory **Configurator\\Default**.

All mentioned configuration files follow the schematics of an [INI file](http://en.wikipedia.org/wiki/INI_file).

### Configuration (config.ini)

This file defines the main aspects of the patcher's behavior, such as visual and aural appearance and remote resource locations.

#### Section \[baseoptions\]

The section **baseoptions** recognizes following values:

language
Defines the interface language. Value is one of the section names in **language.ini**.

about_lang
Defines the interface language for the "About" window. Can be either 0 (French) or 1 (English).

about_header
Custom text in the about box, which appears before other credits. Character | can be used as newline.

bmpskin_path
Specifies the path for *bmpskin_file*. If blank, location of **config.ini** is assumed.

bmpskin_file
Sets a file to be used as skin. Magenta () is used as transparency color. Position of skin elements is defined in section *skinmap*.

banner_width
Defines the width in pixels of a banner, if any. The height is automatically set to 88.

banner_path
Specifies the path for *banner_file*. If blank, location of **config.ini** is assumed.

banner_file
Sets a file to be used as skin.

banner_type
Specifies the type of the file specified in *banner_file*. Can be 0 (no banner), 1 (SWF), 2 (BMP), 3 (JPG) or 4 (PNG).

bgm_enabled
Defines, whether background music should be played (1) or not (0).

bgm_file
MP3 file to be used as background music.

btnsnd_enabled
Specifies, whether click/button sounds should be played (1) or not (0).

create_log
Whether a debug log file should be created by the patcher (1) or not (0). Note, that the logs are only available in French.

#### Section \[urls\]

The section **urls** recognizes following values:

news
Absolute URL to the patch news to display.

register
Absolute URL to the page, which is used for registering. It is displayed in the "About" dialog.

patchs_list
Absolute URL to the patch list.

exec_file
File name of the client to execute, when "Start" is clicked.

exec_args
Parameters to pass to the client set in *exec_file*, like 1rag1 or 1sak1. Can be blank.

#### Section \[skinmap\]

The section **skinmap** specifies meaning of areas in file defined by *bmpskin_file*.


For an example, check the default **skin.bmp** together with default **config.ini**.

#### Section \[interface\]

The section **interface** specifies the size of the patcher window and layout of buttons, progress bar and patch news.


#### Section \[interface_options\]

The section **interface_options** recognizes following values:

button_start_enabled
Specifies, whether the "Start" button should be enabled (1) or not (0).

button_quit_enabled
Specifies, whether the "Close" button should be enabled (1) or not (0).

progressbar_enabled
Specifies, whether the progress bar should be displayed (1) or not (0).

webbrowser_enabled
Specifies, whether the patch news should be displayed (1) or not (0).

Note, that the "About" button cannot be disabled.

#### Section \[progressbar_webbrowser\]

The section **progressbar_webbrowser** recognizes following values:

progressbar_bordercolor
Specifies the border color for the progress bar.

progressbar_backcolor
Specifies the background color for the progress bar.

progressbar_forecolor
Specifies the bar color for the progress bar.

webbrowser_bordercolor
Specifies the border color of the browser.

All color values are written as hexadecimal [RGB](http://en.wikipedia.org/wiki/RGB) color values in format RRGGBB. For example full red being written as FF0000.

#### Section \[textfont\]

The section **textfont** recognizes following values:

button_name
Font name to use for button text.

button_size
Font size to use for button text.

button_color
Color to use for button text.

button_bold
Whether the text in buttons should be bold (1) or regular (0) type.

body_name
Font name to use for status text.

body_size
Font size to use for status text.

body_color
Color to use for status text.

body_bold
Whether the text in status line should be bold (1) or regular (0) type.

For *button_name* and *body_name* use only fonts, which can be expected on every Windows installation, otherwise it might lead to undesired or unreadable results. All color values are written as hexadecimal **RGB** color values in format RRGGBB. For example full red being written as FF0000.

#### Example

`[baseoptions]`
`languageÂ =Â english`
`about_langÂ =Â 1`
`about_headerÂ =Â MyRO.ORGÂ (http://myro.org/)`
`bmpskin_pathÂ =`
`bmpskin_fileÂ =Â skin.bmp`
`banner_widthÂ =Â 545`
`banner_pathÂ =`
`banner_fileÂ =`
`banner_typeÂ =Â 0`
`bgm_enabledÂ =Â 0`
`bgm_fileÂ =Â myBGM.mp3`
`btnsnd_enabledÂ =Â 1`
`create_logÂ =Â 0`
`[urls]`
`newsÂ =Â http://myro.org/p/news.htm`
`registerÂ =Â http://myro.org/register/`
`patchs_listÂ =Â http://myro.org/p/patchlist.ini`
`exec_fileÂ =Â myro.exe`
`exec_argsÂ =`
`[skinmap]`
`body_leftÂ =Â 0`
`body_topÂ =Â 0`
`body_widthÂ =Â 545`
`body_heightÂ =Â 469`
`button_start_leftÂ =Â 0`
`button_start_topÂ =Â 0`
`button_start_widthÂ =Â 0`
`button_start_heightÂ =Â 0`
`button_quit_leftÂ =Â 0`
`button_quit_topÂ =Â 0`
`button_quit_widthÂ =Â 0`
`button_quit_heightÂ =Â 0`
`button_about_leftÂ =Â 0`
`button_about_topÂ =Â 0`
`button_about_widthÂ =Â 0`
`button_about_heightÂ =Â 0`
`button_startb_leftÂ =Â 1`
`button_startb_topÂ =Â 470`
`button_startb_widthÂ =Â 84`
`button_startb_heightÂ =Â 22`
`button_quitb_leftÂ =Â 86`
`button_quitb_topÂ =Â 470`
`button_quitb_widthÂ =Â 84`
`button_quitb_heightÂ =Â 22`
`button_aboutb_leftÂ =Â 171`
`button_aboutb_topÂ =Â 470`
`button_aboutb_widthÂ =Â 84`
`button_aboutb_heightÂ =Â 22`
`[interface]`
`body_widthÂ =Â 545`
`body_heightÂ =Â 469`
`button_start_leftÂ =Â 395`
`button_start_topÂ =Â 69`
`button_start_widthÂ =Â 84`
`button_start_heightÂ =Â 22`
`button_quit_leftÂ =Â 395`
`button_quit_topÂ =Â 90`
`button_quit_widthÂ =Â 84`
`button_quit_heightÂ =Â 22`
`button_about_leftÂ =Â 395`
`button_about_topÂ =Â 111`
`button_about_widthÂ =Â 84`
`button_about_heightÂ =Â 22`
`progressbar_leftÂ =Â 18`
`progressbar_topÂ =Â 438`
`progressbar_widthÂ =Â 509`
`progressbar_heightÂ =Â 18`
`webbrowser_leftÂ =Â 17`
`webbrowser_topÂ =Â 161`
`webbrowser_widthÂ =Â 511`
`webbrowser_heightÂ =Â 252`
`[interface_options]`
`button_start_enabledÂ =Â 1`
`button_quit_enabledÂ =Â 1`
`progressbar_enabledÂ =Â 1`
`webbrowser_enabledÂ =Â 1`
`[progressbar_webbrowser]`
`progressbar_bordercolorÂ =Â C0C0C0`
`progressbar_backcolorÂ =Â FFFFFF`
`progressbar_forecolorÂ =Â C0C0C0`
`webbrowser_bordercolorÂ =Â C0C0C0`
`[textfont]`
`button_nameÂ =Â MSÂ SansÂ Serif`
`button_sizeÂ =Â 8`
`button_colorÂ =Â 000000`
`button_boldÂ =Â 0`
`body_nameÂ =Â MSÂ SansÂ Serif`
`body_sizeÂ =Â 8`
`body_colorÂ =Â 000000`
`body_boldÂ =Â 0`

### Interface Language (languages.ini)

This file specifies to the patcher all available languages, which can be enabled in **config.ini**. Only one language can be active at a time, but the configuration can be distributed in different flavors; each with different language set. Each section name corresponds to the language name being set, see *baseoptions* -&gt; *language* above for details.

In each language section, following values are recognized:

button_start
Text for button "Start". Can be empty, for example when the text is part of the skin.

button_quit
Text for button "Close". Can be empty, for example when the text is part of the skin.

button_about
Text for button "About". Can be empty, for example when the text is part of the skin.

progressinfo_msg1
Message, when the associated client fails to start.

progressinfo_msg2
Message, when patch news are being downloaded.

progressinfo_msg3
Message, when patch news finished downloading.

progressinfo_msg4
Message, when patch list is being downloaded.

progressinfo_msg5
Message, when patch list finished downloading and is about being processed.

progressinfo_msg6
Message, when patches are about being downloaded.

progressinfo_msg7
Message, when there are no patches available at time being.

progressinfo_msg8
Message, when patches finished downloading and are about being applied.

progressinfo_msg9
Message, when patches were applied.

progressinfo_msg10
Message, when a patch is being downloaded.

progressinfo_msg11
Message, when patches are applied to a GRF archive.

progressinfo_msg12
Message, when a GRF archive is being repacked.

### Patch List

This configuration file is the only one, which is not part of **config.tpc**, but is hosted remotely, on a web-space. It specifies, whether the patcher is allowed to patch and start the client, and what patches are to be applied. The name of this file can be chosen in **config.ini**, in section *urls* -&gt; *patchs_list*.

#### Section \[options\]

The section **options** recognizes following values:

deny_getpatch
Specifies, whether patching is allowed (0) or not (1).

deny_play
Specifies, whether the associated client can be started (0) or not (1).

#### Section \[patchs\]

Section **patchs** contains a list of all available patches, where the key name specifies the absolute location of the patch file, while the value enables (1) or disables (0) given patch. Note, that patches are not identified by any patch ID, as usually done, but by their base name, thus it is preferable to start the name with their release date, followed by keyword, which describes the patch, like **2010-09-21palettefix.tpp**.

#### Example

`[options]`
`deny_getpatchÂ =Â 0`
`deny_playÂ =Â 0`
`[patchs]`
`;Â fixÂ forÂ bardsÂ lookingÂ strangeÂ withÂ someÂ clothÂ colors`
`http://myro.org/patches/2010-09-21palettefix.tppÂ =Â 1`
`;Â disabled,Â becauseÂ itÂ isÂ broken`
`http://myro.org/patches/2010-09-22newclient.tppÂ =Â 0`
`;Â fixÂ forÂ crashÂ inÂ partyÂ window`
`http://myro.org/patches/2010-09-25newclient.tppÂ =Â 1`

Creating Patches
Patches are created with a included tool located in **Packer\\Triad Packer.exe** in the original distribution. This tool allows to bundle multiple patches into a single patch, which uses a proprietary format, with extension **.tpp**. Note, that there are no means to extract the patch after it has been created, except using it with the patcher. After starting the tool, a window with four buttons can be seen, which have following functions:

Ajouter / Add
Adds GPF patches and local files to the compile list. If a GPF file is selected, destination archive must be specified (ex. adata.grf), otherwise for local files, their final destination must be set (ex. myfolder\\myfile.ext).

Empacter / Pack
Compiles the added patches into a triad patch file.

Sauvegarder / Save
Save the current compile list into a triad patch list, which can be loaded later for either reusage or resuming the creating of a patch. The patch list has the extension **.tpl** and is only meaningful to the packer.

Ouvrir / Open
Opens a previously saved triad patch list. If there already was a filled compile list, it is discarded.

Finally after creating the triad patch, it has to be added to the patch list into the section \[patchs\] and uploaded to the location specified.

See Also

External Links

[Category:Patchers](/Category:Patchers "wikilink")

============================================================

## Unequip

Syntax

Description
This command will unequip whatever is currently equipped in the [invoking](/RID "wikilink") character's specified equipment slot, which can be:

|                         |                           |
|-------------------------|---------------------------|
| **EQI_HEAD_TOP (1)**  | Upper headgear            |
| **EQI_ARMOR (2)**      | Armor                     |
| **EQI_HAND_L (3)**    | Left hand (weapon/shield) |
| **EQI_HAND_R (4)**    | Right hand (weapon)       |
| **EQI_GARMENT (5)**    | Garment                   |
| **EQI_SHOES (6)**      | Shoes                     |
| **EQI_ACC_L (7)**     | Left accessory            |
| **EQI_ACC_R (8)**     | Right accessory           |
| **EQI_HEAD_MID (9)**  | Middle headgear           |
| **EQI_HEAD_LOW (10)** | Lower headgear            |

If an item occupies several equipment slots, it will get unequipped from all of them.

Examples
[`OnTouch`](/OnTouch "wikilink")`:`
`Â Â Â Â `[`if`](/if "wikilink")`(`[`getequipid`](/getequipid "wikilink")`(EQI_SHOES)!=-1)`
`Â Â Â Â {`
`Â Â Â Â Â Â Â Â unequipÂ EQI_SHOES;`
`Â Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "";`
`Â Â Â Â Â Â Â Â mesÂ "^808080ShoesÂ areÂ bannedÂ fromÂ thisÂ sacredÂ place.^000000";`
`Â Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â Â }`
`Â Â Â Â `[`end`](/end "wikilink")`;`

When a player steps into the protected area with shoes equipped, they are taken off.

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Unitwalk

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will tell a <GID> to walk to a position, defined either as a set of coordinates or another object. The command returns a 1 for success and 0 upon failure.

If coordinates are passed, the <GID> will walk to the given x,y coordinates on the unit's current map. While there is no way to move across an entire map with 1 command use, this could be used in a loop to move long distances.

If an object ID is passed, the initial <GID> will walk to the <Target GID> (similar to walking to attack). This is based on the distance from <GID> to <Target ID>. This command uses a hard walk check, so it will calculate a walk path with obstacles. Sending a bad target ID will result in an error.

An optional Event Label can be passed as well which will execute when the <GID> has reached the given coordinates or <Target GID>.

Examples
        // Makes player walk to the coordinates (150,150).
        unitwalk getcharid(3),150,150;

            // Performs a conditional check with the command and reports success or failure to the player.
        if(unitwalk(getcharid(3),150,150))
            dispbottom "Walking you there...";
        else
            dispbottom "That's too far away, man.";

            // Makes player walk to another character named "WalkToMe".
        unitwalkto getcharid(3),getcharid(3,"WalkToMe");

============================================================

## Using_rAsql

**rAsql** is "an easy to use one-click installer for a local SQL testing environment on Windows." <sup>[\[2\]](http://rathena.org/board/user/441-sirius-white/)</sup> It automatically starts a MySQL instance by creating a virtual drive on the computer and also provides a management tool in the form of [HeidiSQL](http://www.heidisql.com/). rAsql is based on [Uniform Mini Server](https://sourceforge.net/projects/miniserver/).

**Do note that rAsql is meant for local testing of rAthena only and should not be used for hosting a public server.**

History
TXT save engine offered a way for users to test scripts and other things with basically zero set-up required. After the fork from [eAthena](/eAthena "wikilink"), Users were asked to vote as to what should be done about the TXT support. It has been decided that support for TXT would be dropped <sup>[\[1\]](http://rathena.org/board/topic/53926-removal-of-txt-support/)</sup>. **rAsql** was created by [Yommy](http://rathena.org/board/user/251-yommy/) to serve as a replacement for TXT, which was officially dropped in revision 15503.

Downloading rAsql
rAsql can be obtained from the rAthena GitHub repository:

<https://github.com/rathena/rAsql>

Setting up rAsql
rAsql is preconfigured and doesn't require any additional setup, except initial database import. It can be done with any SQL client, preferably with bundled HeidiSQL.

By default rAsql listens on the same port as regular MySQL server, ie. 3306, and accepts connections only from localhost. There is one SQL user `ragnarok` (password: `ragnarok`) and one user database `ragnarok`.

### Initial database import in HeidiSQL


[center](/File:rasql_run.png "wikilink")


[center](/File:rasql_open.jpg "wikilink")


[center](/File:Rasql_insert_start.png "wikilink")


[center](/File:rasql_insert_finish.png "wikilink")

Controlling rAsql
### Starting

To start rAsql run `mysql_start.bat`.

### Stopping

To stop rAsql run `mysql_stop.bat`.

### Password Change

To change the default password for the user `ragnarok` you will need to:


`udrive\bin\mysqladmin.exeÂ --port=3306Â --user=ragnarokÂ --password=`**`ragnarok`**`Â shutdown`

[Category:Installation](/Category:Installation "wikilink")

============================================================

## Variables

Introduction
When you are writing a new script, or altering a current script, it is very likely that you will need to store values and also look them up. Variables do exactly this. They are commonly compared to the files and folders in a filing cabinet. You can store a value or text in a variable, and look it up later again, or even change it. This article will cover the different kinds of variables which exist in the Athena Scripting Language. It will also process their common use, their scopes and limits. Also, each variable will be accompanied by a small example.

Overview of Variables
[rAthena](/rAthena "wikilink") uses different kind of variables for different kinds of situations. Variables come in different forms and sizes. Each variable type has a different scope, from temporal player and NPC variables all up to global system variables. Integer values (Integer values are whole numbers, like 0, 1, 2, 1487, -73452) are stored in a different way than String values (String means text or a single letter, like "I love you!" or "x"). Some types of script variables even support a single dimension array. But if this all is too much for you, it will all become clear in time. First, the overview of which variables are allowed and which aren't.

### Allowed Variables

| Prefix   | Type           | Normal | Array | Exceptions                      |
|----------|----------------|--------|-------|---------------------------------|
| *none*   | Character      | OK!    | FAIL! | temporary version allows arrays |
| 1.       | Account        | OK!    | FAIL! | no temporary version            |
| 1.  1.   | Global Account | OK!    | FAIL! | no temporary version            |
| .        | NPC            | OK!    | OK!   | *none*                          |
| $        | Global         | OK!    | OK!   | *none*                          |

The schema shown above goes for each type of variable, no matter if it is temporary or permanent, integer or a string variable.

### Format of Variables

Unlike C, Java or any coding language, with scripting, the type of variable is determined by the name, not by the declaration. For example, to make a variable in C an Integer variable, you will have to declare it by typing: "int var;". Athena Scripting, is like the name already implies, a Scripting language. There is no need to declare a variable before using it, it is all done by the name of variable. The most basic variable is the permanent integer player variable. It looks like this:

`var`

To make it a string variable, all you have to do is put a $ after it, like this:

`var$`

You can also make it a temporal variable. This means that the value is stored until the next reboot or crash of the map server. All you need to do is add the prefix @. (Prefix means, something that is put in front.) So that makes the variable look like this:

`@var`

And for a temporal player string variable, it looks like this:

`@var$`

Unfortunately, the array option fails for permanent player variables. However, it does work for the temporal version. To make a variable behave like an array, all you have to do is add \[\] after the variable. We will get into it later on in detail, but here is how it would look for a temporal player integer array variable and a temporal player string variable:

`@var[]`
`@var$[]`

As you can see, it is placed even after the string postfix when it is present. (Postfix means something at the end of something. So, the string postfix is $ and the array postfix is \[\].)

Now, for a different type of variable, like global or account, you will have to use a different prefix. Kind of like the temporal prefix @, only this gets even placed in front of that. The prefixes are noted in the schematic at the start of the previous section. But, let's make an example list to show you all possible things:

| Type           | Normal    | Array     |
|----------------|-----------|-----------|
| Integer        | String    | Integer   |
| Temporary      | Permanent | Temporary |
| Player         | @var      | var       |
| Account        | N/A       | \#var     |
| Global Account | N/A       | \#\#var   |
| NPC            | .@var     | .var      |
| Global         | $@var     | $var      |

Using Variables
Now that we know which variables exist, it is time to elaborate on how you exactly use them.

### Setting/Modifying/Deleting Variables

#### Normal Variables

As of the usage of [set](/set "wikilink") has become obsolete and is no longer a requirement.

You set a variable by using the command set. The format is:


or


Examples:

`setÂ var,Â 5;Â //Â SettingÂ aÂ permanentÂ integerÂ playerÂ variableÂ toÂ 5.`
`setÂ $var$,Â "Hello";Â //Â SettingÂ aÂ globalÂ stringÂ variableÂ toÂ "Hello".`
`setÂ .@var[5],Â 10;Â //Â SettingÂ theÂ sixthÂ elementÂ (5Â +Â 1)Â ofÂ theÂ temporalÂ integerÂ NPCÂ variableÂ toÂ 10.`
`setÂ #var,Â #varÂ *Â 2;Â //Â MultiplyingÂ theÂ valueÂ thatÂ isÂ inÂ #varÂ byÂ 2Â andÂ storeÂ itÂ inÂ #varÂ again.`

or

`varÂ =Â 5;Â //Â SettingÂ aÂ permanentÂ integerÂ playerÂ variableÂ toÂ 5.`
`$var$Â =Â "Hello";Â //Â SettingÂ aÂ globalÂ stringÂ variableÂ toÂ "Hello".`
`.@var[5]Â =Â 10;Â //Â SettingÂ theÂ sixthÂ elementÂ (5Â +Â 1)Â ofÂ theÂ temporalÂ integerÂ NPCÂ variableÂ toÂ 10.`
`#varÂ =Â #varÂ *Â 2;Â //Â MultiplyingÂ theÂ valueÂ thatÂ isÂ inÂ #varÂ byÂ 2Â andÂ storeÂ itÂ inÂ #varÂ again.Â `

You can also unset a variable, which is not needed per se, but saves memory. To unset an integer value, you need to store 0 in it, so like this:

`setÂ var,Â 0;`
`varÂ =Â 0;`

To unset a string variable, you will have to set the variable to "". (An empty string.) Another example:

`setÂ @var$,Â "";`
`@var$Â =Â "";`

Other possible examples

`@iÂ =Â 1;`
`@i++;`
`@iÂ *=Â 2;`
`@iÂ =Â @jÂ =Â 1;`
`@iÂ -=Â @j;`
`for(Â @iÂ =Â 0;Â 10Â >Â @i;Â @i++Â )Â {Â }`
`while(Â (@iÂ +=Â 1)Â <Â 20Â )Â {Â }`

For more information read: \[<http://rathena.org/board/topic/62395-r15982-script-engine-update/>| Forum Update\]

#### Array Variables

An array is a variable that references consecutive memory blocks of the same type. In C or any other programming / scripting language, an array has no limitation as in how many indexes (how many consecutive blocks of memory it references to) it can hold, nor its dimensions (how many arrays can an array hold. It's like a matrix of 2x3, for example).

In Athena, it has a limitation of 128 possible values held by a single array, and a single dimension (mostly because strings can use a full index regardless of the length of the string it references to).

Arrays can be set and unset using the default set. They also come with a special set of commands, to quickly set multiple values, or cleaning them. These are the Array related commands.


To quickly set multiple values in an array, you need to use setarray. It will look like this:

`setarrayÂ @array[0],100,200,300;`

This will result in this:

`@array[0]Â ==Â 100`
`@array[1]Â ==Â 200`
`@array[2]Â ==Â 300`

Deletearray is used to quickly erase a specified amount of elements of an array. It can also be used to completely unset it.

`deletearrayÂ @array[0],1;Â //Â DeletesÂ elementÂ 0Â ofÂ theÂ array,Â andÂ movesÂ everyÂ otherÂ entryÂ up.`

Result using the previous array:

`@array[0]Â ==Â 200`
`@array[1]Â ==Â 300`

To completely erase an array using this command, you should type this:

`deletearrayÂ @array[0],getarraysize(@array);Â //Â getarraysizeÂ getsÂ theÂ amountÂ ofÂ elementsÂ inÂ anÂ array.`

Another way to quickly set or unset an array is the cleararray command. Cleararray is actually better than setarray if you want to fill an array with the same values, like this:

`cleararrayÂ @array[0],100,57;`

The result is this:

`@array[0]Â ==Â 100`
`@array[1]Â ==Â 100`
`...`
`@array[56]Â ==Â 100`

Taking the previous @array as example variable, to clear it partially, you can use the command in this way:

`cleararrayÂ @array[1],0,8;`

Please note, that unlike deletearray, it will not shift the remaining values. The result will be this:

`@array[0],Â @array[9]Â ~Â @array[56]Â ==Â 100`
`@array[1]Â ~Â @array[8]Â ==Â 0`

To completely erase an array, you can use it in this way:

`cleararrayÂ @array[0],0,getarraysize(@array);`

### Reading out Variables

#### Normal Variables

Storing and unsetting variables is one thing. Reading them out is something else. Thankfully, it is an easy something else. We already actually read out a variable before, at the modifying part:

`setÂ #var,Â #varÂ *Â 2;Â //Â MultiplyingÂ theÂ valueÂ thatÂ isÂ inÂ #varÂ byÂ 2Â andÂ storeÂ itÂ inÂ #varÂ again.`

As you can see, all you need to do to read out a variable, is only typing the variable name. It works the same for any command like the if statement:

`if(#varÂ >Â 2)Â close;Â //Â IfÂ #varÂ containsÂ aÂ valueÂ biggerÂ thanÂ 2,Â thenÂ showÂ aÂ closeÂ button.`

If you are using the mes command, or another text displaying command, it works a bit differently:

`mesÂ #var;Â //Â WillÂ displayÂ aÂ lineÂ withÂ onlyÂ theÂ valueÂ ofÂ #var.`
`mesÂ "YouÂ haveÂ killedÂ "Â +Â dead_poringsÂ +Â "Â Porings.";Â Â //Â WillÂ displayÂ this:Â `
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â "YouÂ haveÂ killedÂ `<value of dead_porings>
`Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â Porings."`
`mesÂ @name$;Â //Â IfÂ @name$Â containsÂ "[Kafra]",Â itÂ willÂ displayÂ "[Kafra]"`
`mesÂ "MyÂ nameÂ isÂ "+@name$;Â //Â IfÂ @name$Â containsÂ "Trevor",Â itÂ willÂ display:Â "MyÂ nameÂ isÂ Trevor"`

##### Other ways to check variables

There are other ways to check the value of a variable, as in if it has been declared or not.

You can check if a variable has been declared, different from 0, or not,equal to 0. A variable that has been declared and set to 0 is said to be "undeclared".

To do so, you do:

    if (foo) ...       // this will check if 'foo' has been declared or not. If the value 'foo'
                // holds is different from 0 (declared), it will return true. Otherwise it
                // will return false.

    if (foo != 0) ...   // Same as above

    if (!foo) ...       // this will check if 'foo' has been declared or not. If the value 'foo'
                // holds is equal to 0 (not declared), it will return true. Otherwise it
                // will return false.

    if (foo == 0) ...   // Same as above

! is an unary negation operator. If you use it on the number 0 it will return 1. If you use it on anything other than 0 it will return 0.

Note : ! doesn't support string variable

#### Array Variables

To read out a value of an array, you will have to specify which element of the array you want to see. Let's say, we have the following array:

`@array[0]Â ==Â 41`
`@array[1]Â ==Â 12`
`@array[2]Â ==Â 54`
`@array[3]Â ==Â 4`
`@array[4]Â ==Â 22`
`@array[5]Â ==Â 30`
`@array[6]Â ==Â 21`

And we have the following script:

`mesÂ "[Lotto]";`
`mesÂ "AndÂ today'sÂ numbersÂ are:";`
`mesÂ @array[0]+",Â "+@array[1]+",Â "+@array[2]+",Â "+@array[3]+",Â "+@array[4]+"Â andÂ "+@array[5]+".";`
`mesÂ "AndÂ theÂ bonusÂ numberÂ isÂ "+@array[6]+".";`

Then it will display this:

`[Lotto]`
`AndÂ today'sÂ numbersÂ are:`
`41,Â 12,Â 54,Â 4,Â 22Â andÂ 30.`
`AndÂ theÂ bonusÂ numberÂ isÂ 21.`

### Temporal vs Permanent

When you use a variable, you can choose between making it temporal or permanent, with the exception of account variables. Permanent variables survive everything, even a reboot of the server. Temporal variables however, do not survive a reboot and are cleaned out when the map server is killed. This is useful when you only want to store simple things, like a random number or the name of a NPC. Please note that the temporal NPC variable actually works a bit different. It ceases to exist when the script encounters the close; command or the end; command.

Variables in Detail
This section will cover each variable indepth, including examples of how and when to use them.

### Global Variables

#### Details

Global variables support the temporal option, the string option and the array option. The advantage of a global variable is that they can be accessed by any NPC, function or subroutine. They also do not require the interaction of a player, and can thus be used by time triggered events, or during start up events. When used without the @-prefix (Temporal prefix), this variable survives a server restart, and thus can be used to store important information like announcement messages.

Global permanent variables are stored in "save\\mapreg.txt" for the TXT and SQL server. However, if you compile your server as SQL with the option "DMAPREGSQL", it will use the MySQL table named "mapreg" instead. Changing the value of a global variable while the server is up, should only be done by using set, setd or one of the array commands. Altering the value of it in mapreg.txt or in the table mapreg while the server is running, will be ignored and overwritten by the next save sweep. If you want to alter the value of a global variable manually, so without any of the NPC commands, then you must make sure that your server is completely down. The temporal global variable is stored directly in the memory, and thus not accessible through any other way besides the default NPC commands.

Another special thing about the way Global Variables are saved, is that they are always treated as if they are an Array. In mapreg.txt, the format is this: <variable name>,<index>,<value> As for the table mapreg, it is exactly the same.

The prefix of a global variable is $

#### Example

Global variables are perfect to enable/disable NPCs on command. For example, if you want to host an event and you made a warper for it, then you want the warper to do nothing, until a GM starts hosting the event. You will also want the NPC to automatically be closed when the server crashes or reboots. This will prevent any players to go to the event before the GM is online. Here is how you could code such a simple warper:

`prontera,147,177,7Â scriptÂ Â EventÂ WarperÂ Â Â Â 116,{`
`Â Â Â `[`if`](/if "wikilink")`Â (`[`getgmlevel`](/getgmlevel "wikilink")`()Â >=Â 60)Â `[`goto`](/goto "wikilink")`Â L_GMMenu;Â //Â IfÂ theÂ playerÂ isÂ aÂ GM,Â goÂ toÂ theÂ GMÂ Menu.`
`Â Â Â ifÂ (!$@EW_Enable)Â {Â //Â IfÂ theÂ eventÂ isÂ disabled,Â tellÂ theÂ player.`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "[EventÂ Warper]";`
`Â Â Â Â Â Â Â mesÂ "Sorry,Â butÂ theÂ eventÂ arenaÂ isÂ closedÂ forÂ theÂ moment.";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`mes`](/mes "wikilink")`Â "[EventÂ Warper]";`
`Â Â Â mesÂ "DoÂ youÂ wantÂ toÂ goÂ toÂ theÂ event?";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`if`](/if "wikilink")`Â (`[`select`](/select "wikilink")`("Yes","No")Â ==Â 1)Â {`
`Â Â Â Â Â Â Â `[`warp`](/warp "wikilink")`Â $@event_map$,$@event_x,$@event_y;Â //Â WarpÂ toÂ theÂ mapÂ storedÂ inÂ $@event_map$,Â atÂ theÂ coordsÂ $@event_xÂ andÂ $@event_y`
`Â Â Â }`
`Â Â Â close;`
`Â Â Â `
`L_GMMenu:`
`Â Â Â mesÂ "[EventÂ Warper]";`
`Â Â Â mesÂ "PleaseÂ chooseÂ anÂ option.";`
`Â Â Â next;`
`Â Â Â `[`switch`](/switch "wikilink")`(`[`select`](/select "wikilink")`("ViewÂ Settings","SetÂ Destination","EnableÂ Warper","DisableÂ Warper","Leave"))Â {`
`Â Â Â `[`case`](/case "wikilink")`Â 1:Â //Â ViewÂ Settings`
`Â Â Â Â Â Â Â mesÂ "[EventÂ Warper]";`
`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`Â ($@EW_Enable)Â mesÂ "IÂ amÂ currentlyÂ enabled.";`
`Â Â Â Â Â Â Â `[`else`](/else "wikilink")`Â mesÂ "IÂ amÂ currentlyÂ disabled.";`
`Â Â Â Â Â Â Â mesÂ "TheÂ currentÂ destinationÂ is:Â "+$@event_map$+"Â atÂ "+$@event_x+",Â "+$@event_y+".";`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â `[`case`](/case "wikilink")`Â 2:Â //Â SetÂ Destination`
`Â Â Â Â Â Â Â mesÂ "[EventÂ Warper]";`
`Â Â Â Â Â Â Â mesÂ "PleaseÂ enterÂ theÂ destinationÂ map.";`
`Â Â Â Â Â Â Â next;`
`Â Â Â Â Â Â Â `[`input`](/input "wikilink")`Â $@event_map$;Â //Â SettingÂ theÂ eventÂ mapÂ inÂ $@event_map$`
`Â Â Â Â Â Â Â mesÂ "[EventÂ Warper]";`
`Â Â Â Â Â Â Â mesÂ "PleaseÂ enterÂ theÂ xÂ coordinate.";`
`Â Â Â Â Â Â Â next;`
`Â Â Â Â Â Â Â `[`input`](/input "wikilink")`Â $@event_x;Â //Â SettingÂ theÂ xÂ coordinateÂ inÂ $@event_x`
`Â Â Â Â Â Â Â mesÂ "[EventÂ Warper]";`
`Â Â Â Â Â Â Â mesÂ "PleaseÂ enterÂ theÂ yÂ coordinate.";`
`Â Â Â Â Â Â Â next;`
`Â Â Â Â Â Â Â `[`input`](/input "wikilink")`Â $@event_y;Â //Â SettingÂ theÂ yÂ coordinateÂ inÂ $@event_y`
`Â Â Â Â Â Â Â mesÂ "[EventÂ Warper]";`
`Â Â Â Â Â Â Â mesÂ "DestinationÂ set.";`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â `[`case`](/case "wikilink")`Â 3:Â //Â EnableÂ Warper`
`Â Â Â Â Â Â Â mesÂ "[EventÂ Warper]";`
`Â Â Â Â Â Â Â ifÂ ($@EW_Enable)Â {`
`Â Â Â Â Â Â Â Â Â Â Â mesÂ "IÂ amÂ alreadyÂ enabled.";`
`Â Â Â Â Â Â Â }Â elseÂ {`
`Â Â Â Â Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â $@EW_Enable,Â 1;Â //Â SettingÂ $@EW_EnableÂ toÂ 1,Â toÂ enableÂ theÂ NPC.`
`Â Â Â Â Â Â Â Â Â Â Â mesÂ "ItÂ hasÂ beenÂ done.";`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â `[`case`](/case "wikilink")`Â 4:Â //Â DisableÂ Warper`
`Â Â Â Â Â Â Â mesÂ "[EventÂ Warper]";`
`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`Â (!$@EW_Enable)Â {`
`Â Â Â Â Â Â Â Â Â Â Â mesÂ "IÂ amÂ alreadyÂ disabled.";`
`Â Â Â Â Â Â Â }Â `[`else`](/else "wikilink")`Â {`
`Â Â Â Â Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â $@EW_Enable,Â 0;Â //Â SettingÂ $@EW_EnableÂ toÂ 0,Â toÂ disableÂ theÂ NPC.`
`Â Â Â Â Â Â Â Â Â Â Â mesÂ "ItÂ hasÂ beenÂ done.";`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â `[`case`](/case "wikilink")`Â 5:Â //Â Leave`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`goto`](/goto "wikilink")`Â L_GMMenu;`
`}`

If you want a warper that is enabled for several days, like a special event that is always open in this period, then you should use permanent global variables. This will allow the NPC to be active even after a server crash, so that the people can access the special map right away, without having to wait for a GM to come online. So, instead of $@EW_Enable, you should use $EW_Enable. And the map, x and y variables should become $event_map$, $event_x and $event_y.

### Global Account Variables

#### Details

Global Account Variables aren't really of any use unless you run a server which has multiple map servers and only one login server. This is why it is a rarely used variable. In theory, it is exactly the same as a normal account variable, with one slight difference. It is kind of hard to explain if this is your first time using variables, but in essence, a global account variable is stored by the login server instead of the char server. This makes it so that the value of the account variable is the same for the player's account in each of the map servers of your server. The normal account variable is unique on each map server. The global account variable does not support the temporal prefix (@) nor the array. This means that they are less dynamic and always survive a server restart.

The global account variable is stored in "save\\account.txt" for a TXT server, and for the SQL server it is stored in the table called 'global_reg_value'. These locations are used for mixed storage. This means, that also the normal account variable and the player variable is stored here. You can recognize a global account variable by the fact that the 'type' field is set to 1 and that the 'char_id' field will contain a 0.

The rumours are that it is possible to alter a global variable without using NPC commands. However, the entire account needs to be offline and out of the memory on ALL the login, char and mapservers, to make it so that changing it has any effect. If you change the value of a global account variable and there is a character online of that account, then your new value will be overwritten in time by the saving routine of the server.

The prefix of a global account variable is \#\#

#### Example

Global account variables are useful when you use a voting NPC. If you want it so that each account can only vote once, and you have multiple mapservers, then you want all the other mapservers to know if an account has already voted or not. This will prevent a certain account to vote more than once. The script below is an example of such a voting NPC.

`prontera,147,177,7Â scriptÂ Â PollÂ Â Â Â 116,{`
`Â Â Â `[`if`](/if "wikilink")`Â (##AlreadyVoted)Â {Â //Â AccountÂ hasÂ alreadyÂ votedÂ onÂ aÂ mapserver.`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "TheseÂ areÂ theÂ currentÂ results:";`
`Â Â Â Â Â Â Â mesÂ "YesÂ :Â "+$Poll_Yes+"/"+Â ($Poll_YesÂ +Â $Poll_No)Â +"Â votesÂ ("+Â (($Poll_YesÂ *Â 100)/($Poll_YesÂ +Â $Poll_No))Â +"%).";`
`Â Â Â Â Â Â Â mesÂ "YesÂ :Â "+$Poll_No+"/"+Â ($Poll_YesÂ +Â $Poll_No)Â +"Â votesÂ ("+Â (($Poll_NoÂ *Â 100)/($Poll_YesÂ +Â $Poll_No))Â +"%).";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`Â Â Â mesÂ "PollÂ ofÂ today:";`
`Â Â Â mesÂ "DoÂ youÂ likeÂ thisÂ server?";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`switch`](/switch "wikilink")`(`[`select`](/select "wikilink")`("Yes","No"))Â {`
`Â Â Â `[`case`](/case "wikilink")`Â 1:Â //Â VotedÂ Yes.`
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â $Poll_Yes,Â $Poll_YesÂ +Â 1;`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â `[`case`](/case "wikilink")`Â 2:Â //Â VotedÂ No.`
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â $Poll_No,Â $Poll_NoÂ +Â 1;`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`set`](/set "wikilink")`Â ##AlreadyVoted,Â 1;Â //Â PlayerÂ hasÂ alreadyÂ voted.Â SettingÂ globalÂ accountÂ variableÂ ##AlreadyVotedÂ toÂ 1.`
`Â Â Â mesÂ "ThankÂ youÂ forÂ yourÂ vote.";`
`Â Â Â mesÂ "TheseÂ areÂ theÂ currentÂ results:";`
`Â Â Â mesÂ "YesÂ :Â "+$Poll_Yes+"/"+Â ($Poll_YesÂ +Â $Poll_No)Â +"Â votesÂ ("+Â (($Poll_YesÂ *Â 100)/($Poll_YesÂ +Â $Poll_No))Â +"%).";`
`Â Â Â mesÂ "YesÂ :Â "+$Poll_No+"/"+Â ($Poll_YesÂ +Â $Poll_No)Â +"Â votesÂ ("+Â (($Poll_NoÂ *Â 100)/($Poll_YesÂ +Â $Poll_No))Â +"%).";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

### Account Variables

#### Details

Account variables work in a similar way as global account variables, and also have the same restrictions. It connects a value to a player's account, which can be useful for a Vote NPC, or a quest NPC that a player is only allowed to do once. Whereas a global account variable is the same for each mapserver, if you have a setup with multiple mapservers and a single login server, a normal account variable will contain different values for each mapserver. The account variable does not support the temporal prefix (@) nor the array. This means that they are less dynamic and always survive a server restart.

The global account variable is stored in "save\\account.txt" for a TXT server, and for the SQL server it is stored in the table called 'global_reg_value'. These locations are used for mixed storage. This means, that also the global account variable and the player variable is stored here. You can recognize a global account variable by the fact that the 'type' field is set to 2 and that the 'char_id' field will contain a 0.

The rumours are that it is possible to alter a variable without using NPC commands. However, the entire account needs to be offline and out of the memory to make it so that changing it has any effect. If you change the value of a account variable and there is a character online of that account, then your new value will be overwritten in time by the saving routine of the server.

The prefix of an account variable is \#

#### Example

The account variable is, just like the global account variable, very suited for a voting NPC. Especially when you only have one mapserver tied to your login server. Because this setup is very common, the normal account variable is often used. Also, even if you have multiple mapservers, then you might want to allow players to do the same quest on each mapserver, so that they can have the reward(s) on all the mapservers. To keep it easy, here is the voting NPC again, only with normal account variables.

`prontera,147,177,7Â scriptÂ Â PollÂ Â Â Â 116,{`
`Â Â Â `[`if`](/if "wikilink")`Â (#AlreadyVoted)Â {Â //Â AccountÂ hasÂ alreadyÂ votedÂ onÂ aÂ mapserver.`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "TheseÂ areÂ theÂ currentÂ results:";`
`Â Â Â Â Â Â Â mesÂ "YesÂ :Â "+$Poll_Yes+"/"+Â ($Poll_YesÂ +Â $Poll_No)Â +"Â votesÂ ("+Â (($Poll_YesÂ *Â 100)/($Poll_YesÂ +Â $Poll_No))Â +"%).";`
`Â Â Â Â Â Â Â mesÂ "YesÂ :Â "+$Poll_No+"/"+Â ($Poll_YesÂ +Â $Poll_No)Â +"Â votesÂ ("+Â (($Poll_NoÂ *Â 100)/($Poll_YesÂ +Â $Poll_No))Â +"%).";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`Â Â Â mesÂ "PollÂ ofÂ today:";`
`Â Â Â mesÂ "DoÂ youÂ likeÂ thisÂ server?";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`switch`](/switch "wikilink")`(`[`select`](/select "wikilink")`("Yes","No"))Â {`
`Â Â Â `[`case`](/case "wikilink")`Â 1:Â //Â VotedÂ Yes.`
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â $Poll_Yes,Â $Poll_YesÂ +Â 1;`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â `[`case`](/case "wikilink")`Â 2:Â //Â VotedÂ No.`
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â $Poll_No,Â $Poll_NoÂ +Â 1;`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â }`
`Â Â Â setÂ #AlreadyVoted,Â 1;Â //Â PlayerÂ hasÂ alreadyÂ voted.Â SettingÂ accountÂ variableÂ #AlreadyVotedÂ toÂ 1.`
`Â Â Â mesÂ "ThankÂ youÂ forÂ yourÂ vote.";`
`Â Â Â mesÂ "TheseÂ areÂ theÂ currentÂ results:";`
`Â Â Â mesÂ "YesÂ :Â "+$Poll_Yes+"/"+Â ($Poll_YesÂ +Â $Poll_No)Â +"Â votesÂ ("+Â (($Poll_YesÂ *Â 100)/($Poll_YesÂ +Â $Poll_No))Â +"%).";`
`Â Â Â mesÂ "YesÂ :Â "+$Poll_No+"/"+Â ($Poll_YesÂ +Â $Poll_No)Â +"Â votesÂ ("+Â (($Poll_NoÂ *Â 100)/($Poll_YesÂ +Â $Poll_No))Â +"%).";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

### Player Variables

#### Details

Player variables are a type of variable that can only be accessed by the player who is using the script. The player variable supports the temporal tag, and also supports arrays, but only in combination with the temporal tag. So, var\[\] will not work, but @var\[\] will work. When you store a value in var$ for PlayerA, it will have a different value than the contents of var$ for PlayerB. This comes in handy when you are writing a quest and need to keep track of the progress. For example, when a player accepted a quest, you can set a variable named quest_progress to 1. When he finishes the next part, you can set it to 2, etc. etc. Permanent player variables are also the way to deny future access to a NPC or quest. Simply set a permanent player variable to a certain value at the end of the NPC or quest, and check for that value at the start of the quest. Temporal player variables used to be widely used, and still are in the older revisions. Nowadays it has become almost completely obselete though, due to the temporal NPC variable. There are still some uses for it though. For example, if you temporarely want to store a value for a player and use it at another NPC as well.

Permanent player variables are stored in "save\\account.txt" for a TXT server, and for the SQL server it is stored in the table called 'global_reg_value'. These locations are used for mixed storage. This means, that also the global account variable and the player variable is stored here. You can recognize a global account variable by the fact that the 'type' field is set to 3 and that the 'account_id' field will contain a 0. The temporal player variable is directly stored in the memory.

You are able to manipulate the value of a permanent player variable without using script commands. Simply make sure the character of which the variable is, is offline. Of course, this does not apply for a temporal player variable.

Player variables have no prefix

#### Example

A simple example of the usage of a permanent player variable, is a one time freebee giver. After the freebee has been given, the variable is set and when the player talks to the NPC again, it will check for this and denies access.

`prontera,147,177,7Â scriptÂ Â FreebeeÂ GiverÂ Â Â 116,{`
`Â Â Â `[`if`](/if "wikilink")`Â (GotFreebee)Â {Â //Â IfÂ theÂ permanentÂ playerÂ variableÂ GotFreebeeÂ isÂ notÂ 0,Â thenÂ doÂ whatÂ isÂ insideÂ theÂ {Â }.`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ haveÂ alreadyÂ gottenÂ theÂ freebee.";`
`Â Â Â }Â `[`else`](/else "wikilink")`Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "WelcomeÂ toÂ hourÂ server.";`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "ToÂ showÂ ourÂ gratitude,Â hereÂ isÂ aÂ oneÂ timeÂ freeÂ item.";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â `[`getitem`](/getitem "wikilink")`Â 999,1;`
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â GotFreebee,Â 1;Â //Â ItemÂ given,Â setsÂ permanentÂ playerÂ variableÂ GotFreebeeÂ toÂ 1.`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "HaveÂ fun.";`
`Â Â Â }`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

An example of using a temporal variable, is an interactive NPC system, responding to a random mood of a player. It can look like this:

`-Â Â scriptÂ Â moodÂ Â Â Â -1,{`
`OnPCLoginEvent:`
`Â Â Â `[`set`](/set "wikilink")`Â @mood,Â `[`rand`](/rand "wikilink")`(3);Â //Â 0Â ==Â happy,Â 1Â ==Â sad,Â 2Â ==Â grumpy,Â 3Â ==Â inÂ love.`
`Â Â Â `[`setarray`](/setarray "wikilink")`Â @moodtxt$[0],Â "happy",Â "sad",Â "grumpy",Â "inÂ love";`
`Â Â Â `[`dispbottom`](/dispbottom "wikilink")`Â "YouÂ feelÂ "+@moodtxt$[@mood]+"Â today.";`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`
`prontera,147,177,7Â scriptÂ Â RandomÂ PersonÂ Â Â 116,{`
`Â Â Â `[`switch`](/switch "wikilink")`(@mood)Â {Â //Â DetermineÂ theÂ settingÂ ofÂ @mood.`
`Â Â Â `[`case`](/case "wikilink")`Â 0:Â //Â happy`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "OhÂ my,Â weÂ areÂ cheerfulÂ today,Â aren'tÂ we!";`
`Â Â Â Â Â Â Â break;`
`Â Â Â caseÂ 1:Â //Â sad`
`Â Â Â Â Â Â Â mesÂ "WhyÂ areÂ youÂ soÂ sad?";`
`Â Â Â Â Â Â Â mesÂ "Here,Â thisÂ mightÂ cheerÂ youÂ up.";`
`Â Â Â Â Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â Â Â Â Â `[`percentheal`](/percentheal "wikilink")`Â 100,100;`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â caseÂ 2:Â //Â grumpy`
`Â Â Â Â Â Â Â mesÂ "ComeÂ on,Â cheerÂ up.Â It'sÂ aÂ niceÂ dayÂ today.";`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â caseÂ 3:Â //Â inÂ love`
`Â Â Â Â Â Â Â mesÂ "Wow,Â didÂ youÂ findÂ thatÂ oneÂ person?Â Cool!";`
`Â Â Â Â Â Â Â `[`break`](/break "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`
`prontera,147,175,7Â scriptÂ Â GrumpyÂ PersonÂ Â Â 116,{`
`Â Â Â `[`if`](/if "wikilink")`Â (@moodÂ !=Â 2)Â {Â //Â OnlyÂ wantsÂ toÂ talkÂ toÂ anotherÂ grumpyÂ person.`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "GoÂ away!";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`mes`](/mes "wikilink")`Â "WhatÂ areÂ youÂ doingÂ here?";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`mes`](/mes "wikilink")`Â `[`strcharinfo`](/strcharinfo "wikilink")`(0);`
`Â Â Â mesÂ "GoÂ away!";`
`Â Â Â next;`
`Â Â Â mesÂ "No,Â youÂ goÂ away!";`
`Â Â Â next;`
`Â Â Â //Â ...Â (restÂ ofÂ NPC)`
`Â Â Â `[`close`](/close "wikilink")
`}`

### NPC Variables

#### Details

NPC variables support, just like global variables, the temporal prefix as well as the array postfix. They aren't in existence for that long yet, but are already widely used. The reason for this, is that the temporal NPC variable is a true temporal variable. It is unique per player per NPC, until the close; or end; command. (With the exception of attachrid, making it not unique per player.) This means it can be used to temporary store a value, or an array or whatever to make coding easier for you. The permanent NPC variable is not as permanent as it may sound at first. It is used to store a variable per NPC. This variable is accessible by any player that uses that NPC. However, on server restart, the value of that variable is lost. NPCs are capable of requesting the value of a permanent NPC variable owned by another NPC. For this, the getvariableofnpc command is used, which will be explained further down in this article. Permanent NPC variables can be used in logging systems or for example a racing event. That is, if you do not want to waste global variables.

All the NPC variables are directly stored in the memory, and are therefor not editable by anything else besides script commands.

The prefix for a NPC variable is .

#### Example

Temporal NPC variables are widely used to temporary save a value. This can make customizing your script easier. For example, you can store the NPC name in a temporal NPC variable, like shown in the script beneath:

`prontera,147,177,7Â scriptÂ Â RandomÂ PersonÂ Â Â 116,{`
`Â Â Â `[`set`](/set "wikilink")`Â .@name$,Â "^FF0000";Â //Â SettingÂ theÂ color,Â redÂ inÂ thisÂ case.`
`Â Â Â setÂ .@name$,Â .@name$Â +Â "SirÂ Eduard";Â //Â SettingÂ theÂ nameÂ ofÂ theÂ NPC`
`Â Â Â setÂ .@name$,Â "["+.@name$+"^000000]";Â //Â FinalizingÂ theÂ name.Â ItÂ willÂ nowÂ show:Â "[SirÂ Eduard]",Â whereÂ SirÂ EduardÂ isÂ writtenÂ inÂ red.`
`Â Â Â `[`mes`](/mes "wikilink")`Â .@name$;Â //Â DisplayÂ Name`
`Â Â Â mesÂ "HelloÂ there.";`
`Â Â Â mesÂ "WelcomeÂ toÂ ourÂ server.";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â mesÂ .@name$;Â //Â DisplayÂ Name`
`Â Â Â mesÂ "IÂ hopeÂ youÂ willÂ enjoyÂ yourÂ stayÂ here.";`
`Â Â Â mesÂ "WeÂ haveÂ aÂ lovelyÂ fountainÂ atÂ theÂ center,Â asÂ wellÂ asÂ someÂ beautifulÂ kafraÂ spreadÂ outÂ throughÂ theÂ town.";`
`Â Â Â next;`
`Â Â Â mesÂ .@name$;Â //Â DisplayÂ Name`
`Â Â Â mesÂ "So,Â feelÂ freeÂ toÂ lookÂ around.";`
`Â Â Â mesÂ "AndÂ haveÂ aÂ niceÂ day.";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

All you have to do now to change the name being displayed is changing "Sir Eduard" into something else. In larger scripts, this means that you do not have to edit the name at 100+ places. The same applies for the color, which can be changed in the first line.

A short example of a permanent variable might be this 'logging' NPC:

`prontera,147,177,7Â scriptÂ Â RandomÂ PersonÂ Â Â 116,{`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Hello!";`
`Â Â Â mesÂ "DoÂ youÂ haveÂ anyÂ gossip?";`
`Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â `[`if`](/if "wikilink")`Â (.LastPerson$Â !=Â "")Â {Â //Â IfÂ thereÂ isÂ aÂ nameÂ stored,Â doÂ whatÂ isÂ insideÂ theÂ {Â }`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â .LastPerson$Â +Â "Â hadÂ someÂ reallyÂ niceÂ gossip.";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`set`](/set "wikilink")`Â .LastPerson$,Â `[`strcharinfo`](/strcharinfo "wikilink")`(0);Â //Â SetÂ theÂ currentÂ player'sÂ nameÂ asÂ theÂ lastÂ player'sÂ name.`
`Â Â Â `[`mes`](/mes "wikilink")`Â "Aha,Â IÂ see.";`
`Â Â Â mesÂ "ThankÂ youÂ forÂ thisÂ newÂ info.";`
`Â Â Â mesÂ "IÂ shouldÂ tellÂ itÂ toÂ myÂ friendsÂ rightÂ away.";`
`Â Â Â mesÂ "GoodÂ bye.";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

Special Commands
### Input

Input is the most basic command to get a player to input a value and store it in a variable. Input itself has some safeguards placed inside that prevent entering faulty data. The format for input is:


Despite it seems that you can enter anything in the input box as a player, this is not the case. Let's review the following two cases:

`1.Â inputÂ @name$;`
`2.Â inputÂ @number;`

The first one allows you to enter a string. A person can still input a number, but it will be stored as if it was a string. The second one allows you to enter a number. If a person enters a negative number, it will store 0. If the person tries to enter a string, or a letter, it will also store 0.

### Getd & Setd

Getd and Setd are a couple of special commands. They allow the use of dynamically named variables, as well as a way to cheat and make multi-dimensional variables. Their format is like this:


The most common use of getd and setd is in combination with global variables. This is because you have an infinite amount of global variables, whereas account and player variables are limited in their number. Also, global variables can survive a restart of the server of course. Let's just use some examples to make it clear what their power is.

#### Simulating Guild Variables

Guild Variables do not exist, and since an array is limited upto 128 elements, it is not adviced to use that for storage. Yet it can be needed to store guild variables, when you want to do a ranking of some sort. The following example is a snippet from gldfunc_ev_agit.txt, and stores the amount of times a guild has captured a castle.

[`set`](/set "wikilink")`Â .@NameOfGuildVar$,Â "$CastCapt"+`[`getcharid`](/getcharid "wikilink")`(2);Â `
`//Â IfÂ yourÂ guildÂ IDÂ wouldÂ beÂ 204,Â theÂ contentsÂ ofÂ `
`//Â .@NameOfGuildVar$Â wouldÂ be:Â "$CastCapt204"`
[`set`](/set "wikilink")`Â .@Score,Â `[`getd`](/getd "wikilink")`(.@NameOfGuildVar$);Â //Â RetreiveÂ theÂ currentÂ score.`
[`set`](/set "wikilink")`Â .@Score,Â .@ScoreÂ +Â 1;Â //Â AddÂ oneÂ toÂ it.`
[`setd`](/setd "wikilink")`Â .@NameOfGuildVar$,Â .@Score;Â //Â PutÂ inÂ theÂ newÂ score.`

Of course, the same can be done to simulate Party Variables, which also officially do not exist.

#### Simulating Multidimensional Arrays

Now, let's say you know your stuff, and really are used to using arrays. Then you might want to consider simulating multi-dimensional arrays. This snippet will use the for command. If you do not know how to use it, it is best to skip this example.

`//Â ExampleÂ ofÂ iteratingÂ theÂ 3-dimensionalÂ arrayÂ $@array[100,100,100].`
[`for`](/for "wikilink")`(`[`set`](/set "wikilink")`Â .@i,Â 0;Â .@iÂ <Â 100;Â `[`set`](/set "wikilink")`Â .@i,Â .@iÂ +Â 1)Â {`
`Â Â Â `[`for`](/for "wikilink")`(setÂ .@j,Â 0;Â .@jÂ <Â 100;Â setÂ .@j,Â .@jÂ +Â 1)Â {`
`Â Â Â Â Â Â Â `[`for`](/for "wikilink")`(setÂ .@k,Â 0;Â .@kÂ <Â 100;Â setÂ .@k,Â .@kÂ +Â 1)Â {`
`Â Â Â Â Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â .@varname$,Â "$@array"+.@i+"_"+.@j+"["+.@k+"]";Â `
`Â Â Â Â Â Â Â Â Â Â Â //Â Let'sÂ sayÂ .@iÂ isÂ 50,Â .@jÂ isÂ 22Â andÂ .@kÂ isÂ 95.Â ThenÂ thisÂ willÂ beÂ inÂ .@varname$:`
`Â Â Â Â Â Â Â Â Â Â Â //Â $@array50_22[95]`
`Â Â Â Â Â Â Â Â Â Â Â `[`if`](/if "wikilink")`(`[`getd`](/getd "wikilink")`(.@varname$)Â ==Â 5)Â `[`set`](/set "wikilink")`Â .@FivesFound,Â .@FivesFoundÂ +Â 1;`
`Â Â Â Â Â Â Â }`
`Â Â Â }`
`}`
[`announce`](/announce "wikilink")`Â "IÂ haveÂ foundÂ "+.@FivesFound+"Â occurancesÂ ofÂ 5Â inÂ yourÂ multidimensionalÂ array.",bc_all;`

Of course, getd and setd can also be used to overcome the 128 element limit of an array, like the guild variable example already demonstrated.

### Getvariableofnpc

Getvariableofnpc is a method to get the value of a permanent NPC variable of another NPC. The official format is like this:


It's uses can vary, but from what I've seen until now is that it is mainly used to sync several NPCs or to make checks in a global temporal unlocking quest. To sync a variable NPC with the value of a variable of another NPC, you could use this line:

`setÂ .v,getvariableofnpc(.var,"AÂ NPC");Â `
`//Â RetreivesÂ valueÂ ofÂ .varÂ ofÂ theÂ NPCÂ calledÂ "AÂ NPC"`
`//Â andÂ putsÂ theÂ foundÂ valueÂ inÂ .vÂ ofÂ thisÂ NPC.`

A global temporal unlocking quest can be like this:

`prontera,147,177,7Â scriptÂ Â PvPÂ WarperÂ Â 116,{`
`Â Â Â `[`if`](/if "wikilink")`(`[`getvariableofnpc`](/getvariableofnpc "wikilink")`(.unlocked,"PvPÂ Unlocker"))Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "WantÂ toÂ goÂ toÂ theÂ PvPÂ room?";`
`Â Â Â Â Â Â Â `[`next`](/next "wikilink")`;`
`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`(`[`select`](/select "wikilink")`("Yes","No")Â ==Â 2)Â {`
`Â Â Â Â Â Â Â Â Â Â Â mesÂ "Ok,Â guessÂ not.";`
`Â Â Â Â Â Â Â Â Â Â Â mesÂ "GoodÂ bye.";`
`Â Â Â Â Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â `[`close2`](/close2 "wikilink")`;`
`Â Â Â Â Â Â Â `[`warp`](/warp "wikilink")`Â "pvp_n_1-1",0,0;`
`Â Â Â Â Â Â Â `[`end`](/end "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`mes`](/mes "wikilink")`Â "NoÂ oneÂ hasÂ openedÂ theÂ PvPÂ roomÂ yet.";`
`Â Â Â mesÂ "AtÂ leastÂ oneÂ personÂ needsÂ toÂ visitÂ theÂ ^FF0000PvPÂ Unlocker^000000,Â andÂ helpÂ himÂ toÂ openÂ upÂ PvP.";`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`
`prontera,147,175,7Â scriptÂ Â PvPÂ UnlockerÂ Â Â Â 116,{`
`Â Â Â `[`if`](/if "wikilink")`(.unlocked)Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "ToÂ enterÂ theÂ PvPÂ room,Â talkÂ toÂ theÂ ^FF0000PvPÂ Warper^000000.";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`if`](/if "wikilink")`(`[`countitem`](/countitem "wikilink")`(512)Â <Â 1)Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "IÂ willÂ notÂ openÂ theÂ PvPÂ roomÂ untilÂ IÂ getÂ anÂ apple!";`
`Â Â Â Â Â Â Â `[`close`](/close "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`delitem`](/delitem "wikilink")`Â 512,Â 1;`
`Â Â Â `[`mes`](/mes "wikilink")`Â "ThankÂ youÂ forÂ thatÂ juicyÂ apple.";`
`Â Â Â mesÂ "IÂ willÂ openÂ theÂ PvPÂ roomÂ now.";`
`Â Â Â mesÂ "Enjoy.";`
`Â Â Â `[`set`](/set "wikilink")`Â .unlocked,Â 1;`
`Â Â Â `[`close`](/close "wikilink")`;`
`}`

Other Important Info
### Naming your Variables

#### General Restrictions

Just like any other scripting or coding language, variable names have certain restrictions. Some things are simply not accepted, and some things are accepted, but really bad to do.


Basically, this all means, that the name part can only contain the following characters: a~z, A~Z, 0~9 and _

Lot's of restrictions, huh? Well, most of the above restrictions cause your mapserver to be mad at you. The other possible restrictions are harder to find, and can make the mapserver even more mad at you, as well as giving unexpected results. These restrictions are shown below.

#### Special Restrictions

Like said above, there are some special restrictions. Here is the short overview:


A short explanation of this is in order. When you name your variable: "mes" (the message command), then this will override any mes command. The server will think that in all those cases, mes is not a command but a variable name. This will result in roughly, uhm, 88120+ errors (no kidding). The problem with this is though, that those errors aren't the real errors. The real error, set mes, 1; for example, isn't even shown. The exact same thing occurs when the name of your variable matches the name of a label, function or subroutine. When you use the same name, but with a different prefix, your server can start acting weird, and can give unexpected results. This is not always, but it can be common. So, when you are using a variable like $@temp and @temp, it is wise to change one of the two names. Just to be sure. If you have two variables named the same, only one has the $-postfix (string), then the mapserver might give some errors. In any way, results will be unexpected and thus weird. So, if you use for example $PartyWon to store the party id and $PartyWon$ to store the party name, then things will go bad. It is best to change one of the two in something else. Perhaps like this: $PartyWon_Id and $PartyWon_Name$.

#### Reserved Names

Some variable names are reserved by default. You should not touch these unless you know what you are doing. Why? Well, changing them, may mean changing things to the invoking player, depending on the kind of reserved name.

##### Constants

One kind of reserved names are constants. These values are loaded upon start-up of the map-server and remain constant during their entire life-time, means, they cannot be changed by any means during run-time. Constants are stored inside **db/const.txt** and are all lines, where a constant name is followed by only one number, whether decimal or hexadecimal.

Examples include:

`Job_Archer`
`EAJ_SUPER_NOVICE`
`cell_chkreach`
`bUnstripableShield`

##### Parameter Constants

These behave almost like variables with side-effect. They are called constants, because they correspond to an constant internal value, which describes their effect. Like-wise the constants, these values are loaded upon start-up of the map-server from . They are defined by lines with the constant name being followed by two numbers, the latter of them being always non-zero.

When used inside scripts, their value is not always constant, but can change depending in context and time. Some of them can be written as well, such as [Zeny](/Zeny#Scripting "wikilink").

Examples include:

`Zeny`
`BaseLevel`
`Class`
`Weight`

#### Word of Advice

When using permanent variables, and even with temporal variables, it is very wise to use some sort of tag. This will make sure that your variable name is unique. For example, if you have a godly equip quest, it is adviced to store the status in a variable named like: GEQ_Status. GEQ_ is the tag, and stands for Godly Equip Quest. This will make it unique compared to other variables. Your variable names will become longer, yes, but it will prevent unknown or unexpected results. Another example of tagging. Let's say you have a capture the flag event, run through NPCs, then prefix your variable names with CTF_. So, some variables might be: $CTF_ScoreTeam1, $CTF_ScoreTeam2, etc. etc. Also, please, keep in mind. Variables are case sensitive, just like labels! So, $dummy is not the same as $Dummy. Using both can produce unexpected results.

#### Examples

Some examples of good and bad names. Good:

`$CTF_Winner$Â //Â WinnerÂ ofÂ captureÂ theÂ flag`
`$CTF_Loser$Â //Â LoserÂ ofÂ captureÂ theÂ flag`
`$GQ_Winner$Â //Â WinnerÂ ofÂ captureÂ theÂ flag`
`.npcname$Â //Â NameÂ ofÂ NPC.Â UsingÂ aÂ permanentÂ NPCÂ variableÂ willÂ saveÂ memoryÂ space.Â (IncreasesÂ CPUÂ though.)`
`#SH_Item1Â //Â ScavengerÂ hunt,Â itemÂ 1.`
`#SH_Item2Â //Â ScavengerÂ hunt,Â itemÂ 2.`

Bad:

`@ZenyÂ //Â ZenyÂ isÂ aÂ reservedÂ name.`
`randÂ //Â RandÂ isÂ aÂ command.`
`$1Team1Â //Â NumberÂ asÂ firstÂ characterÂ isÂ notÂ allowed.`
`@h-uyÂ //Â -Â isÂ anÂ arithmeticÂ operator,Â notÂ allowed.`
`$winnerÂ andÂ $winner$Â //Â MixedÂ useÂ ofÂ stringÂ andÂ integer,Â bad.`

### Minima and Maxima of Variables

Variables are restricted in the amounts that they can store, as well as how many variables you can have of a certain kind. This section will deal with those restrictions, and even some ways to alter them.

**Maximum Values**
\*Integer: Can contain a value from -2147483648 to 2147483647 (Signed integer)


**Maximum Different Variables**
\*Global: Unlimited


Please note, that *unlimited* is actually still limited; by available memory and disk capacity (permanent variables).

**Changing Maximum Different Variables**
<u>Before doing this, make sure you backup everything, and you know how to do a clean recompile.</u> To change the amount of variables you can use, all you have to do is change some constants in "src/common/mmo.h". After you have opened the file, you have to change the following things:

`IncreasingÂ MaxÂ NumberÂ ofÂ GlobalÂ AccountÂ VariablesÂ Â Â -Â ChangeÂ ACCOUNT_REG2_NUM`
`IncreasingÂ MaxÂ NumberÂ ofÂ AccountÂ VariablesÂ Â Â Â Â Â Â Â Â Â -Â ChangeÂ ACCOUNT_REG_NUM`
`IncreasingÂ MaxÂ NumberÂ ofÂ PlayerÂ VariablesÂ Â Â Â Â Â Â Â Â Â Â -Â ChangeÂ GLOBAL_REG_NUM`

Also, when changing any of those values, you might need to change MAX_REG_NUM. MAX_REG_NUM should contain the highest value of any of the other three settings. Let's assume you want to have 128 Player Variables. Then change the 96 behind GLOBAL_REG_NUM to 128. Also, this is higher than the previous value of MAX_REG_NUM, so change that to 128 as well. Save the file, do a make clean and compile again, and you are done. Let's assume you want to change the amount of normal account variables to 80. Find ACCOUNT_REG_NUM and change the 64 behind it to 80. MAX_REG_NUM contains 96 (or 128 if you take the previous example). This is higher than 80, so you do not have to change it. Save the file, and do a clean recompile again, and you are done.

### Alive Time

Some variables are never erased, others are cleaned up after certain events. A rule of thumb is, that variables that are only stored in memory are always erased on server restart or crash. Variables which are written to the SQL database or the save folder, survive restarting the mapserver. When it comes to the alive time of a variable, there is no difference between integer, string or array variables. There is only a difference between temporal and permanent.
The following scedule displays when a variable gets erased from memory and is unrecoverable. Please note, that if a variable is set to 0 (integer) or "" (string), that the variable is unset as well, and in a sense, erased as well.

| Prefix    | Name           | Alive Time               |
|-----------|----------------|--------------------------|
| Temporary | Permanent      |
| *none*    | Player         | Erased on Server Restart |
| \#        | Account        | N/A                      |
| \#\#      | Global Account | N/A                      |
| .         | NPC            | Erased on NPC End        |
| $         | Global         | Erased on Server Restart |

Notes:


Variable Related Errors
### Str&Int and Int&Str Errors

This specific error happens when you are comparing a String variable with an Integer variable, or when you want to add a String to an Integer variable. This is often caused by a simply typo. Just go over your code, and make sure that you didn't make any typos, and it should be fixed.

Examples of what can cause this error:

`if(.@valueÂ ==Â .@name$)Â //Â WillÂ error,Â becauseÂ .@valueÂ isÂ anÂ Integer.Â .@name$Â isÂ aÂ String.`
`setÂ .@value,Â "Blaat";Â //Â MightÂ error,Â becauseÂ .@valueÂ isÂ anÂ Integer.Â "Blaat"Â isÂ aÂ String.`

### No RID attached Error

You get this error, when you want to change a player or account variable, while the player is not attached anymore to the NPC or script. A script requires a so called RID to change a value that is connected to a player or an account. You can manually attach an RID to a script, but you need to have an account id to do this. To get an account id, you need to do a getcharid(3,"Player's Name") and use the result with attachrid. Of course, for this, you will have to get a player name.

If there is no way for you to have an RID attached, then it means that you are using the wrong variables. The following example demonstrates this:

`OnInit:Â //Â RunsÂ whenÂ theÂ serverÂ starts`
`Â Â Â setÂ StartUpTime,Â gettimetick(2);Â //Â ThisÂ willÂ giveÂ theÂ noÂ RIDÂ attachedÂ error.`
`Â Â Â end;`

The reason this gives the error is that you want to store the current time in a player variable. But on the start up, there is no way for a player to be online, and even if, this script is triggered without invoking a player. The solution to this is to change StartUpTime into .StartUpTime, $StartUpTime or $@StartUpTime.

### Attachrid giving unexpected values

This is a common mistake, but not a real error as detected by the mapserver. This problem can occur when using attachrid. Let's take the following snippet taken from an OnPCKillEvent as example:

`setÂ Killer$,Â strcharinfo(0);Â //Â SettingÂ KillersÂ NameÂ inÂ Killer$`
`attachrid(getcharid(3,Killed));Â //Â AttachÂ toÂ theÂ personÂ whoÂ gotÂ killed.`
`dispbottomÂ "YouÂ wereÂ killedÂ byÂ "+Killer$;`

Q: What this part is supposed to do?
A: It should send a message to the person who got killed, saying who killed them.
Q: What goes wrong here?
A: The script will not display the name of the killer, or the player's own name.
In case you see the error, you might laugh at this, but it is a very common mistake. The person who scripted this made a faulty assumption. He thought that Killer$ before the attachrid is the same as Killer$ after the attachrid. This is not the case. The Killer$ before the attachrid is stored in player 1's account. The Killer$ after the attachrid is stored in player 2's account. This means that they are not the same.

Q: So what is the solution?
A: Use a NPC variable or a global variable instead.

### Variable keeps displaying 0 or ""

Also a common error with new scripters. Take the following snippet:

`setÂ @name$,Â Patrick;`

A new scripter often types this when he/she wants to put the String "Patrick" inside @name$. However, he/she forgot to put Patrick between a " and a ". So, instead of storing the string "Patrick" inside @name$, the server will look up the value of the variable named Patrick, and stores that value inside @name$. This can result in a 0 being stored or nothing at all in @name$.

[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Viewpoint

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
This command will mark places on the mini map in the client connected to the invoking character. It uses the normal X and Y coordinates from the main map. The colors of the marks are defined using a hexidecimal number, same as the ones used to color text in '[mes](/mes "wikilink")' output, but are written as hexadecimal numbers in C. (They look like 0x<six numbers>.)

Action is what you want to do with a point, 1 will set it, while 2 will clear it. Point number is the number of the point - you can have several. If more than one point is drawn at the same coordinates, they will cycle, which can be used to create flashing marks.

The client determines what it does with the points entirely, the server keeps no memory of where the points are set whatsoever.

Examples
This command will show a mark at coordinates X 30 Y 40, is mark number 1, and will be red.

        viewpoint 1,30,40,1,0xFF0000;

This will create three points:

        viewpoint 1,30,40,1,0xFF0000;
        viewpoint 1,35,45,2,0xFF0000;
        viewpoint 1,40,50,3,0xFF0000;

And this is how you remove them:

        viewpoint 2,30,40,1,0xFF0000;
        viewpoint 2,35,45,2,0xFF0000;
        viewpoint 2,40,50,3,0xFF0000;

============================================================

## Vip_status

Syntax

Description
Returns various information about a player's VIP status.

Valid types:

`1Â -Â VIPÂ status.Â (1Â ifÂ VIP,Â 0Â ifÂ non-VIP)`
`2Â -Â VIPÂ expireÂ date.Â (timestampÂ stringÂ ifÂ VIP,Â 0Â ifÂ non-VIP)`
`3Â -Â VIPÂ timeÂ remaining.Â (timestampÂ stringÂ ifÂ VIP,Â 0Â ifÂ non-VIP)`

NOTE: This command is only available if the VIP System is enabled.

Examples
vip_status(1)

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Vip_time

Syntax

Description
Changes a player's VIP time (in minutes). A positive value will increase time, and a negative value will decrease time.

NOTE: This command is only available if the VIP System is enabled.

Examples
vip_time 60;

Changes a player's VIP time 60 minutes

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Waitingroom

Syntax

Description
This command creates a waiting room above an [NPC](/NPC "wikilink") displaying the given *room name*. The *limit* parameter is a number specifying how many players can join the waiting room and can be between 0 and 20 (the maximum number of players allowed in a chat). By default, when the *limit* is reached, no more players may join but nothing will happen.

An *event label* can also be specified. The label must be in the format "NpcName::LabelName" similar to the [doevent](/doevent "wikilink") command. When an *event label* is declared, the script will be invoked at this label whenever the waitingroom reaches the *limit*. You can change when the script gets invoked by specifying a *trigger* number that is less than or equal to the *limit*. The *trigger* and the *event label* and be entered in any order as long as it comes after the *limit*.

Using the [enablewaitingroomevent](/enablewaitingroomevent "wikilink") and [disablewaitingroomevent](/disablewaitingroomevent "wikilink") commands will allow you to turn on and off the capacity trigger on the waiting room. You can later use the [delwaitingroom](/delwaitingroom "wikilink") command to close the waiting room.

Examples
`prontera,150,150,3Â scriptÂ Â WaitingNPCÂ Â 53,{`
`Â Â Â `[`if`](/if "wikilink")`Â ($@npcWaitingRoom)Â {`
`Â Â Â Â Â Â Â `[`mes`](/mes "wikilink")`Â "TheÂ coolÂ peopleÂ waitÂ here.";`
`Â Â Â }Â `[`else`](/else "wikilink")`Â {`
`Â Â Â Â Â Â Â mesÂ "Let'sÂ waitÂ forÂ someÂ coolÂ people.";`
`Â Â Â Â Â Â Â `[`set`](/set "wikilink")`Â $@npcWaitingRoom,Â 1;`
`Â Â Â Â Â Â Â `[`waitingroom`](/waitingroom "wikilink")`Â "TheÂ CoolÂ People",15,"WaitingNPC::OnFull",15;`
`Â Â Â Â Â Â Â `[`enablewaitingroomevent`](/enablewaitingroomevent "wikilink")`Â "WaitingNPC";`
`Â Â Â }`
`Â Â Â `[`close`](/close "wikilink")`;`
`Â `
`OnFull:`
`Â Â Â `[`npctalk`](/npctalk "wikilink")`Â "ThereÂ areÂ tooÂ manyÂ coolÂ peopleÂ here!";`
`Â Â Â `[`warpwaitingpc`](/warpwaitingpc "wikilink")`Â "prontera",150,170;`
`Â Â Â `[`disablewaitingroomevent`](/disablewaitingroomevent "wikilink")`Â "WaitingNPC";`
`Â Â Â `[`delwaitingroom`](/delwaitingroom "wikilink")`Â "WaitingNPC";`
`Â Â Â setÂ $@npcWaitingRoom,Â 0;`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Waitingroom2bg

Syntax

Description
This command is part of the Battleground System and creates a BG team with the players inside of a '[waitingroom](/waitingroom "wikilink")'.

You can choose which NPC to check for a '[waitingroom](/waitingroom "wikilink")' by setting the **<npcname>** value. This command will then create the BG team with **"<mapname>"**,**<x>**,**<y>** as respawn point and the given events (**"<Logout Event>"** and **"<Die Event>"**) will be executed whenever a team member logs out or dies, and returns the ID of the newly created team.

Also this command will create an array of temporary global variables:

| Array                  | Description                                                                                |
|------------------------|--------------------------------------------------------------------------------------------|
| **$@arenamembers\[\]** | is a global temporary number array which contains the account id of these BG team members. |
| **$@arenamembersnum**  | is the number of party members that were found.                                            |

Note that the names come in no particular order.

Be sure to use **$@arenamembersnum** to go through this array, and not '[getarraysize](/getarraysize "wikilink")', because it is not cleared between runs of '[waitingroom2bg](/waitingroom2bg "wikilink")'. If a team is created with 7 members, the array would have 7 elements. But if another one is created with only 5 members, the server will not clear the array for you, overwriting the values instead. So in addition to returning the 5 member names, the 6th and 7th elements from the last call remain, and you will get 5+2 members, of which the last 2 don't belong to the new team. **$@arenamembersnum** will always contain the correct number, (5) unlike '[getarraysize](/getarraysize "wikilink")()' which will return 7 in this case.

Examples
The **waitingroom**:

`bat_room,253,97,4Â Â scriptÂ Â Registration::TK_Recruit1Â Â Â 418,{`
`Â Â Â end;`
[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â `**`waitingroom`**`Â "TheÂ KeeperÂ 10Â Players",10,"TK_Master::OnJoin1",1;`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`

Create the teams:

`Â Â Â //Â ...`
`Â Â Â `[`set`](/set "wikilink")`Â .@Team1,Â getwaitingroomstate(0,"TK_Recruit1");`
`Â Â Â setÂ .@Team2,Â getwaitingroomstate(0,"TK_Recruit2");`
`Â Â Â `[`if`](/if "wikilink")`(Â .@Team1Â <Â 10Â ||Â .@Team2Â <Â 10Â ){`
`Â Â Â Â Â Â Â `[`mapannounce`](/mapannounce "wikilink")`Â "bat_room","TheÂ KeeperÂ --Â TeamÂ 1:Â "Â +Â .@Team1Â +Â "/10,Â TeamÂ 2:Â "Â +Â .@Team2Â +Â "/10",1,0x006400;`
`Â Â Â Â Â Â Â end;`
`Â Â Â }`
`Â Â Â setÂ $@TK_Teamid1,waitingroom2bg("bat_b01",390,10,"TK_Master::OnLogoutEvent","TK_Master::OnDieEvent","TK_Recruit1");`
`Â Â Â setÂ $@TK_Teamid2,waitingroom2bg("bat_b01",10,290,"TK_Master::OnLogoutEvent","TK_Master::OnDieEvent","TK_Recruit2");`
`Â Â Â bg_warpÂ $@TK_Teamid1,"bat_b01",390,10;`
`Â Â Â bg_warpÂ $@TK_Teamid2,"bat_b01",10,290;`
`Â Â Â //Â ...`

[Category:Script_Command](/Category:Script_Command "wikilink") [Category:Battlegrounds_Command](/Category:Battlegrounds_Command "wikilink")

============================================================

## Waitingroom2bg_single

Syntax

Description
Adds the first waiting player from the chat room of given [NPC](/NPC "wikilink") to an existing battleground group and warps it to specified coordinates on given map.

Examples
`prontera,150,150,5Â scriptÂ Â TestÂ Â Â Â 99,{`
`Â Â Â `[`end`](/end "wikilink")`;`
[`OnInit`](/OnInit "wikilink")`:`
`Â Â Â `[`waitingroom`](/waitingroom "wikilink")`Â "BGÂ Single",1,strnpcinfo(3)"::OnStart";`
`Â Â Â `[`end`](/end "wikilink")`;`
`OnStart:`
`Â Â Â `[`waitingroom2bg_single`](/waitingroom2bg_single "wikilink")`($@BGCroix,"bat_b01",150,150,strnpcinfo(3));`
`Â Â Â end;`
`}`

[Category:Script_Command](/Category:Script_Command "wikilink") [Category:Battlegrounds_Command](/Category:Battlegrounds_Command "wikilink")

============================================================

## Warp

Syntax

Description
This command places (warps) the [currently attached](/RID#Usage "wikilink") player on given map, at given coordinates. Setting both *x* and *y* to 0 (zero) will cause the player get placed at a random spot. If the target cell is not walkable, it will cause an error and random placement. Parameter *map name* also accepts three magic names, where the *x* and *y* parameters are ignored: "Random" for random placement on current map, "Save" and "SavePoint" will warp the character to it's [save point](/save_point "wikilink").

Since warping causes all running scripts for the warped character to end, all commands that would normally be executed after warp, **will not get executed**, so there should not be any other command after warp, except [end](/end "wikilink").

Examples
[`mes`](/mes "wikilink")`Â "OK,Â I'llÂ warpÂ youÂ homeÂ now.";`
[`close2`](/close2 "wikilink")`;`
`warpÂ "SavePoint",Â 0,Â 0;`
`end;`

Warps the player to his or her save point after closing the dialog.

`mesÂ "ThankÂ youÂ forÂ bringingÂ meÂ all";`
`mesÂ "theseÂ things,Â butÂ notÂ getÂ out.";`
[`next`](/next "wikilink")`;`
`warpÂ "prontera",Â 150,Â 150;`
[`set`](/set "wikilink")`Â XYZQUEST,XYZQUEST|4;Â Â //Â notÂ executed`
`mesÂ "SeeÂ you.";Â Â Â Â Â Â Â Â Â Â Â //Â notÂ executedÂ either`
[`close`](/close "wikilink")`;`

Will warp the player to Prontera at coordinates 150,150. Note, that anything past **warp** will not get executed (hidden bug, because quest progress is not updated).

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Warpguild

Syntax

Description
Warps a guild to specified map and coordinate given the guild id, which you can get with [getcharid](/getcharid "wikilink")(2). You can also request another guild id given the member's name with [getcharid](/getcharid "wikilink")(2,<player_name>).

You can use the following "map names" for special warping behavior:

Random
All party members are randomly warped in their current map (as if they all used a fly wing)

SavePointAll
All party members are warped to their respective save point.

SavePoint
All party members are warped to the save point of the currently attached player (will fail if there's no player attached).

Example
`warpguildÂ "prontera",x,y,Guild_ID;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Warppartner

Syntax

Description
This function will find the invoking character's marriage partner, if any, and warp them to the map and coordinates given. It will return 1 upon success and 0 if the partner is not online, the character is not married, or if there's no invoking character (no RID). 0,0 will, as usual, normally translate to random coordinates.

Example
The code below will warp your partner to your location when triggered.

    getmapxy(.@map$,.@x,.@y,0);
    warppartner(.@map$,.@x,.@y);

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Warpparty

[Category:Script_Command](/Category:Script_Command "wikilink")

Syntax

Description
Warps a party to specified map and coordinate given the party ID, which you can get with [getcharid](/getcharid "wikilink")(1).
You can also request another party id, given a member's name with [getcharid](/getcharid "wikilink")(1,<player_name>).
You can use the following "map names" for special warping behavior:
**Random**: *All party members are randomly warped in their current map (as if they all used a fly wing).
* **SavePointAll**: *All party members are warped to their respective save point.
* **SavePoint**: *All party members are warped to the save point of the currently attached player (will fail if there's no playerattached).*
**Leader**: *All party members are warped to the leader's position. The leader must be online and in the current map-server for this to work.*
If you specify a from_mapname, warpparty will only affect those on that map

Example
    mes "[Party Warper]";
    mes "Here you go!";
    close2;
    warpparty "prontera",150,100,getcharid(1);
    end;

============================================================

## Warpportal

Syntax

Description
Creates a Warp Portal as if a acolyte class character did it. The first x and y is the place of the warp portal on the map where the NPC is on. The mapname and second x and y is the target area of the warp portal.

Example
`//Â WillÂ createÂ aÂ warpÂ portalÂ onÂ theÂ NPC'sÂ mapÂ atÂ 150,150Â `
`//Â leadingÂ toÂ prontera,Â coordsÂ 150,180.`
`warpportalÂ 150,150,"prontera",150,180;`

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## Warpwaitingpc

Syntax

Description
This command will warp the amount of characters equal to the trigger number of the waiting room chat attached to the NPC object running this command to the specified map and coordinates, kicking them out of the chat. Those waiting the longest will get warped first. It can also do a random warp on the same map ("Random" instead of map name) and warp to the save point ("SavePoint").

The list of characters to warp is taken from the list of the chat room members. Those not in the chat room will not be considered even if they are talking to the NPC in question. If the number of people is given, exactly this much people will be warped.

This command can also keep track of who just got warped. It does this by setting special variables:

`$@warpwaitingpc[]Â //Â IsÂ anÂ arrayÂ containingÂ theÂ account_idÂ numbersÂ ofÂ theÂ charactersÂ whoÂ wereÂ justÂ warped.`
`$@warpwaitingpcnumÂ //Â ContainsÂ theÂ numberÂ ofÂ theÂ characterÂ itÂ justÂ warped.`

See also *[getpartymember](/getpartymember "wikilink")* for advice on what to do with those variables.

The obvious way of using this effectively would be to set up a waiting room for two characters to be warped onto a random PVP map for a one-on-one duel, for example.

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## War_of_Emperium

The **War of Emperium** is a battle between guilds for castles (5 castles in each of 4 towns, for a total of 20). Guilds fight against each other and the guild that owns the castle at the end of WoE has access to dungeons and treasures that are not accessible to people who are not in the residing guild.

agit_controller.txt
Open
The body of the script should look similar to the following:

`-Â Â scriptÂ Â Agit_EventÂ Â -1,{`
`Â Â Â end;`
[`OnClock`](/OnClock "wikilink")`2100:Â Â //startÂ timeÂ forÂ Tues(2),Â Thurs(4)`
[`OnClock`](/OnClock "wikilink")`2300:Â Â //endÂ timeÂ forÂ Tues(2),Â Thurs(4)`
[`OnClock`](/OnClock "wikilink")`1600:Â Â //startÂ timeÂ forÂ Sat(6)`
[`OnClock`](/OnClock "wikilink")`1800:Â Â //endÂ timeÂ forÂ Sat(6)`
`OnAgitInit:`
`Â Â Â //Â startingÂ timeÂ checks`
`Â Â Â `[`if`](/if "wikilink")`((`[`gettime`](/gettime "wikilink")`(4)==2)Â &&Â (`[`gettime`](/gettime "wikilink")`(3)>=21Â &&Â `[`gettime`](/gettime "wikilink")`(3)<23)Â ||`
`Â Â Â Â Â Â (`[`gettime`](/gettime "wikilink")`(4)==4)Â &&Â (`[`gettime`](/gettime "wikilink")`(3)>=21Â &&Â `[`gettime`](/gettime "wikilink")`(3)<23)Â ||`
`Â Â Â Â Â Â (`[`gettime`](/gettime "wikilink")`(4)==6)Â &&Â (`[`gettime`](/gettime "wikilink")`(3)>=16Â &&Â `[`gettime`](/gettime "wikilink")`(3)<18))Â {`
`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`Â (!`[`agitcheck`](/agitcheck "wikilink")`())Â {`
`Â Â Â Â Â Â Â Â Â Â Â `[`AgitStart`](/AgitStart "wikilink")`;`
`Â Â Â Â Â Â Â Â Â Â Â `[`callsub`](/callsub "wikilink")`Â S_DisplayOwners;`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â `[`end`](/end "wikilink")`;`
`Â Â Â }`
`Â Â Â //Â endÂ timeÂ checks`
`Â Â Â `[`if`](/if "wikilink")`Â ((`[`gettime`](/gettime "wikilink")`(4)==2)Â &&Â (`[`gettime`](/gettime "wikilink")`(3)==23)Â ||`
`Â Â Â Â Â Â Â (`[`gettime`](/gettime "wikilink")`(4)==4)Â &&Â (`[`gettime`](/gettime "wikilink")`(3)==23)Â ||`
`Â Â Â Â Â Â Â (`[`gettime`](/gettime "wikilink")`(4)==6)Â &&Â (`[`gettime`](/gettime "wikilink")`(3)==18))Â {Â `
`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`Â (`[`agitcheck`](/agitcheck "wikilink")`())Â {`
`Â Â Â Â Â Â Â Â Â Â Â `[`AgitEnd`](/AgitEnd "wikilink")`;`
`Â Â Â Â Â Â Â Â Â Â Â `[`callsub`](/callsub "wikilink")`Â S_DisplayOwners;`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â `[`end`](/end "wikilink")`;`
`Â Â Â }`
`Â Â Â `[`end`](/end "wikilink")`;`
`S_DisplayOwners:`
`Â Â Â `[`setarray`](/setarray "wikilink")`Â .@maps$[0],"aldeg_cas01","aldeg_cas02","aldeg_cas03","aldeg_cas04","aldeg_cas05";`
`Â Â Â `[`setarray`](/setarray "wikilink")`Â .@maps$[5],"gefg_cas01","gefg_cas02","gefg_cas03","gefg_cas04","gefg_cas05";`
`Â Â Â `[`setarray`](/setarray "wikilink")`Â .@maps$[10],"payg_cas01","payg_cas02","payg_cas03","payg_cas04","payg_cas05";`
`Â Â Â `[`setarray`](/setarray "wikilink")`Â .@maps$[15],"prtg_cas01","prtg_cas02","prtg_cas03","prtg_cas04","prtg_cas05";`
`Â Â Â `[`for`](/for "wikilink")`(Â `[`set`](/set "wikilink")`Â .@i,Â 0;Â .@iÂ <=Â 19;Â `[`set`](/set "wikilink")`Â .@i,Â .@i+1Â )Â {`
`Â Â Â Â Â Â Â `[`if`](/if "wikilink")`Â (`[`GetCastleData`](/GetCastleData "wikilink")`(.@maps$[.@i],1))Â {`
`Â Â Â Â Â Â Â Â Â Â Â `[`Announce`](/Announce "wikilink")`Â "TheÂ ["Â +Â `[`GetCastleName`](/GetCastleName "wikilink")`(.@maps$[.@i])Â +Â "]Â castleÂ hasÂ beenÂ conqueredÂ byÂ theÂ ["Â +Â `[`GetGuildName`](/GetGuildName "wikilink")`(`[`GetCastleData`](/GetCastleData "wikilink")`(.@maps$[.@i],1))Â +Â "]Â guild.",bc_all|bc_woe;`
`Â Â Â Â Â Â Â }`
`Â Â Â Â Â Â Â `[`else`](/else "wikilink")`Â {`
`Â Â Â Â Â Â Â Â Â Â Â `[`Announce`](/Announce "wikilink")`Â "TheÂ ["Â +Â `[`GetCastleName`](/GetCastleName "wikilink")`(.@maps$[.@i])Â +Â "]Â castleÂ isÂ currentlyÂ unoccupied.",bc_all|bc_woe;`
`Â Â Â Â Â Â Â }`
`Â Â Â }`
`Â Â Â `[`end`](/end "wikilink")`;`
`}`

### OnClock\#\#\#\#

You need one of these labels for each time you want WoE to start or stop, so if you want the WoE to start at 9am and end at 11am you would need this

`OnClock0900:`
`OnClock1100:`

`gettime(4)==2`

Will check what the day is, 0 = Sun 1 = Mon 2 = Tue etc etc...

This is currentally day 2, so this would result in a success if it was a Tuesday

`gettime(3)>=21`

Will check the hour of the day, 00 = Midnight 01 = 1am etc...

This is currentally 9pm (21:00) the &gt;= mean if the current time is after 9pm return a success

`gettime(3)<23`

Work the same as above, but will be the end of your WoE, the &lt; means if the current time is before 11pm (23:00) it will return a success, if at any point the current time is equal to or more that 11pm it will return a fail

`if((gettime(4)==2)Â &&Â (gettime(3)>=21Â &&Â gettime(3)<23))Â gotoÂ L_Start;`

Only if everything inside the outer bracket is a success will it goto "L_Start" and start the WoE

**Example 1**: It is tuesday, it is 10pm, you have just had to restart the server cause it has crash or whatever, it runs past that line of code

`if((gettime(4)==2[HmÂ yesÂ itÂ isÂ `*`{1}`*`])Â &&Â (gettime(3)>=21[YesÂ itÂ isÂ afterÂ 21Â `*`{1}`*`]Â &&Â gettime(3)<23[ohÂ andÂ itÂ isÂ beforeÂ 23Â `*`{1}`*`]))Â gotoÂ L_Start;Â [IÂ didntÂ detectÂ anyÂ `*`{0}`*`Â IÂ betterÂ gotoÂ L_Start]`

**Example 2**: It is Tuesday, it is 11:30pm

`if((gettime(4)==2[HmÂ yesÂ itÂ isÂ `*`{1}`*`])Â &&Â (gettime(3)>=21[YesÂ itÂ isÂ afterÂ 21Â `*`{1}`*`]Â &&Â gettime(3)<23[waitÂ noÂ itÂ isÂ afterÂ 23Â `*`{0}`*`]))Â gotoÂ L_Start;Â [IÂ detectedÂ oneÂ orÂ moreÂ `*`{0}`*`Â IÂ betterÂ noÂ runÂ thisÂ actionÂ andÂ letÂ theÂ scriptÂ carryÂ on]`

**Example 3**: It is Wednesday, it is 10pm

`if((gettime(4)==2[WaitÂ itÂ isÂ notÂ dayÂ 2Â `*`{0}`*`])Â &&Â (gettime(3)>=21[YesÂ itÂ isÂ afterÂ 21Â `*`{1}`*`]Â &&Â gettime(3)<23[ohÂ andÂ itÂ isÂ beforeÂ 23Â `*`{1}`*`]))Â gotoÂ L_Start;Â [IÂ detectedÂ oneÂ orÂ moreÂ `*`{0}`*`Â IÂ betterÂ noÂ runÂ thisÂ actionÂ andÂ letÂ theÂ scriptÂ carryÂ on]`

`gettime(4)==2`

Same as above, used for checking the day, you will need one of these for everyday you make, that is unless you decide to have one everyday at the same time then I wont mind, you will need just one, and it wont need to check the day

`gettime(3)==23`

This would be the hour you want the WoE to end at, again 1 is needed for every WoE day/time you set

**Example 1**: This query is reached after passing through the first "Example 2"

It is the same, Tuesday and 11:30pm

\[Seems the arguments above me havent picked this query up yet\]

`if((gettime(4)==2[WhyÂ yes,Â itÂ isÂ dayÂ 2Â `*`{1}`*`])Â &&Â (gettime(3)==23[andÂ itÂ isÂ hourÂ 23Â `*`{1}`*`]))Â gotoÂ L_End;[IÂ didntÂ seeÂ anyÂ `*`{0}`*`Â betterÂ runÂ this`

This will then end your WoE

**Example 2**: This query is reached after passing through the first "Example 3"

It is Wednesday, it is 10pm

\[Seems the arguments above me havent picked this query up yet\]

`if((gettime(4)==2[WhyÂ no,Â itÂ isntÂ dayÂ 2Â `*`{0}`*`])Â &&Â (gettime(3)==23[andÂ itÂ isÂ notÂ hourÂ 23Â `*`{0}`*`]))Â gotoÂ L_End;[IÂ seeÂ oneÂ orÂ moreÂ `*`{0}`*`Â betterÂ notÂ runÂ thisÂ orÂ stupidÂ peopleÂ willÂ postÂ bugs]`

Setting WoE Times
1.  Make a list of when you want WoE to start and end during the week. If any times are the same, only list that time once.
2.  Add each of these times in the **OnClock** section of labels.
3.  In the first line of arguments enter the day, the start time, then the end time
4.  In the second line of arguments enter the day and the end time
5.  You can add as many lines as you'd like, but overlapping times can get annoying and messy :P

If you still don't understand this, try the WoE Setter NPC I made to guide you through the process. Add the script to your scripts_custom.conf and talk to the NPC in game with a GM level 99.

WoE Setter NPC -

Original guide can be found at

Turn OFF WoE in Some Castles
WoE is a server-wide setting, so it's either ON everywhere, or OFF everywhere.
To get around this and "turn off" woe in certain castles, this is what you can do:

1.  Edit and comment out the castles you are NOT using for WoE (put // in front of the line). This turns of all woe functions for that castle.
2.  Optional: to remove the warp portal entrance, edit and comment-out the warps into the castles you are not using.

Separate WoE Times in Separate Towns/Castles
WoE is a server-wide setting, so it's either ON everywhere, or OFF everywhere.
(you can't have it on in one castle only).
To get around this, you need to code 3 separate events in the

### StartWOE1:


### StartWOE2:


### EndWOE:

(same for both)


See Also

[Category:Scripting](/Category:Scripting "wikilink")

============================================================

## Weather_without_using_mapflag

[Category:Data](/Category:Data "wikilink") [Category:Client Configuration](/Category:Client_Configuration "wikilink")

Procedures
First, create a file in your **/data/** folder or the root of your GRF then name the file **etcinfo.txt**.

After that, place the following codes inside the file: <code>

    weather#
    comodo.rsw#
    pokjuk#
    weather#
    brasilis.rsw#
    sakura#
    weather#
    prontera.rsw#
    snow#
    //File end

</code>

You can add the effect right before the last pound (\#) sign.


That's it. This is another way of adding weather to a particular map.

Other way of adding weather
You can as well add a script with [OnInit](/OnInit "wikilink") label to call it off. Here's a sample script:

`prontera,143,185,1Â Â Â Â scriptÂ Â Â Â SakuraÂ Â Â Â -1,{Â `
`//Â WeÂ willÂ doÂ aÂ scriptÂ insteadÂ ofÂ functionÂ forÂ itÂ toÂ callÂ onÂ theÂ exactÂ mapÂ andÂ theÂ exactÂ coordinates.Â ButÂ youÂ canÂ useÂ asÂ wellÂ `**`function`**`Â thenÂ insteadÂ ofÂ `**`script`**`.`
`//Â WeÂ willÂ alsoÂ useÂ -1Â sinceÂ weÂ don'tÂ wantÂ toÂ displayÂ theÂ actualÂ NPC.Â InÂ otherÂ words,Â -1Â willÂ makeÂ theÂ NPCÂ invisible.`
`end;`
`OnInit:`
`Â Â Â Â atcommandÂ "@sakura";Â //Â YouÂ canÂ changeÂ `**`@sakura`**`Â toÂ @snow,Â @clouds,Â @clouds2,Â @fog,Â @fireworksÂ orÂ @leaves`
`Â Â Â Â end;`
`}`

============================================================

## Wedding

Syntax

Description
This command will call up wedding effects - the music and confetti - centered on the invoking character.

Example
The following code is a snippet from

`ifÂ (`[`marriage`](/marriage "wikilink")`($wed_groom$))Â {`
`Â Â Â //CallÂ WeddingÂ effect`
`Â Â Â `**`wedding`**`;`
`Â Â Â //GiveÂ ringÂ toÂ Bride,Â andÂ changeÂ toÂ weddingÂ sprite.`
`Â Â Â `[`sc_start`](/sc_start "wikilink")`Â SC_Wedding,3600000,1;`
`Â Â Â `[`getitem`](/getitem "wikilink")`Â 2635,1;Â //Bride_Ring`
`Â Â Â //GiveÂ ringÂ toÂ Groom,Â andÂ changeÂ toÂ weddingÂ sprite.`
`Â Â Â `[`attachrid`](/attachrid "wikilink")`(`[`getcharid`](/getcharid "wikilink")`(3,$wed_groom$));`
`Â Â Â sc_startÂ SC_Wedding,3600000,1;`
`Â Â Â getitemÂ 2634,1;Â //Bridegroom_Ring`
`Â Â Â `[`detachrid`](/detachrid "wikilink")`;`
`Â Â Â //SwitchÂ ScriptÂ progressionÂ backÂ toÂ Bride`
`Â Â Â attachrid(getcharid(3,$wed_bride$));`
`Â Â Â `[`cutin`](/cutin "wikilink")`Â "wedding_bomars02",2;`
`Â Â Â `[`mapannounce`](/mapannounce "wikilink")`Â "prt_church","IÂ nowÂ pronounceÂ you,Â "+$wed_groom$+"Â andÂ "+$wed_bride$+",Â husbandÂ andÂ wife.",bc_map;`
`}`

[Category:Script_Command](/Category:Script_Command "wikilink")

============================================================

## While

Syntax

Description
This is probably the simplest and most frequently used loop structure. The 'while' statement can be interpreted as "while <condition> is true, perform <statement>". It is a pretest loop, meaning the conditional expression is tested before any of the statements in the body of the loop are performed. If the condition evaluates to false, the statement(s) in the body of the loop is/are never executed. If the condition evaluates to true, the statement(s) are executed, then control transfers back to the conditional expression, which is reevaluated and the cycle continues.

Multiple statements can be grouped with { }, curly braces, just like with the 'if' statement.

Examples
`whileÂ (`[`switch`](/switch "wikilink")`(`[`select`](/select "wikilink")`("Yes:No")Â ==Â 2Â ))`
`Â Â Â `[`mes`](/mes "wikilink")`Â "YouÂ pickedÂ no.";`

### Multiple Statements

[`while`](/while "wikilink")`Â (`[`switch`](/switch "wikilink")`(select("Yes:No")Â ==Â 2Â ))Â {`
`Â Â Â mesÂ "WhyÂ didÂ youÂ pickÂ no?";`
`Â Â Â mesÂ "YouÂ shouldÂ pickÂ yesÂ instead!";`
`}`

### Counter-Controlled Loop

`setÂ .@i,Â 1;`
`whileÂ (.@iÂ <=Â 5)Â {`
`Â Â Â mesÂ "ThisÂ lineÂ willÂ printÂ 5Â times.";`
`Â Â Â setÂ .@i,Â .@iÂ +Â 1;`
`}`

### Sentinel-Controlled Loop

`mesÂ "InputÂ 0Â toÂ stop";`
[`input`](/input "wikilink")`Â .@num;`
`whileÂ (.@numÂ !=Â 0)Â {`
`Â Â Â mesÂ "YouÂ enteredÂ "Â +Â .@num;`
`Â Â Â inputÂ .@num;`
`}`
[`close`](/close "wikilink")`;`

See Also

[Category:Script Command](/Category:Script_Command "wikilink")

============================================================

## XAMPP_Installation

What is 'XAMPP'
'XAMPP' is an open source and free program that takes apache, mysql, perl and PHP and packages them into one easy installer. This can be handy if your server is serving your Control Panel and MySQL server on the same machine as [rAthena](/rAthena "wikilink").

Getting and Installing XAMPP
XAMPP is located on their website. You can download it for Windows, Mac OSX and \*nix. Their website is located here: [<http://www.apachefriends.org/en/xampp.html> <http://www.apachefriends.org/en/xampp.html>](/http://www.apachefriends.org/en/xampp.html_http://www.apachefriends.org/en/xampp.html "wikilink")

Installing on Windows
Click either Zip or Exe. After clicking one, you will have to choose a mirror. Choose one of the Mirrors and click Download. \*Note\* The Zip and Exe are the same! You don't need to download them both.

When you have finished the downloading and updating, extract the files to somewhere accessible, the root of your Local Disk should do just fine. Once extracted, navigate inside the folder and run setup_xampp.bat. A window should appear similar to the one below.

[Image:Openingsetup3tk.png](/Image:Openingsetup3tk.png "wikilink")

When the windows says 'Press any key to close the window...' XAMPP is installed, and you can press the spacebar to close the window. Now, navigate to your xampp_control.exe file and run the exe. You should get a popup for the XAMPP control center similar to the one below:

[Image:Controlpanel9mg.png](/Image:Controlpanel9mg.png "wikilink")

Go ahead and start the Apache and MySQL servers by clicking the buttons outlined in red.

We should verify the security of our XAMPP installation. Navigate your web browser to <http://127.0.0.1> (or the IP of your server) and choose a language at the page that comes up. You should then get a warning about security. Click the link in the image below that's highlighted in red to fix these security problems.

[Image:Nextlink5cb.png](/Image:Nextlink5cb.png "wikilink")

You should then come upon a page that you can set your MySQL root password. You should set this to something that is hard to guess. You should also give yourself a username and password and 'make safe your .htaccess directory' in the box below and you can close out of the web browser.

[Image:Security9am.png](/Image:Security9am.png "wikilink")

After you're done, your phpmyadmin is setup and will accept root and your established root password at <http://127.0.0.1/phpmyadmin>. You can now login and finish [Configuring](/:Category:Configuration "wikilink") and [Compiling](/Compiling "wikilink") your server.

[Category:Installation](/Category:Installation "wikilink")

============================================================

## Zeny

[Zeny](Zeny) is the in-game currency used in [Ragnarok Online](Ragnarok-Online), which can be used for buying and selling items from and to [NPC](NPC) shops and other players.

Limitation
The technical limit is for both the client and server up to 2,147,483,647 Zeny, which is typically capped at 1,000,000,000. The cap can be changed inside **mmo.h** by adjusting the macro *MAX_ZENY* to a desired value below the technical limit. The source must be recompiled after this change. If a value is specified which surpasses the technical limit, the server will not compile.

Penalty
Along with EXP death penalties, a Zeny penalty may be set in which reduced the amount of Zeny the player holds upon death:

    //Â WhenÂ aÂ playerÂ diesÂ (toÂ anotherÂ player),Â howÂ muchÂ zenyÂ shouldÂ weÂ penalizeÂ themÂ with?
    //Â NOTE:Â ItÂ isÂ aÂ percentageÂ ofÂ theirÂ zeny,Â soÂ 100Â =Â 1%
    zeny_penalty:Â 0

[Mapflags](Mapflag) can be set on certain maps to disable the zeny penalty in.

Vending
The amount of Zeny that can be set to an item when vending is soft-limited to 1,000,000,000 and can be overridden by the setting *vending_max_value* in and [hexing](hexing) the client to correct the client-side warnings.

If the seller obtains more Zeny through vending than *MAX_ZENY* the surplus Zeny is discarded. To avoid this, the setting *vending_over_max* in can be set to *no*, which causes the deal to fail if it would result in more Zeny than the seller is able to hold.

Scripting
The name *Zeny* is recognized by the script engine as a [parameter constant](parameter-constant), which affects the amount of Zeny of the [currently attached](RID) player. It can be both read and written.

    setÂ Zeny,Zeny+120;Â Â //Â givesÂ theÂ playerÂ 120z
    mesÂ "YourÂ currentÂ balanceÂ isÂ "+Zeny+"z.";
    setÂ Zeny,0;Â Â //Â takesÂ allÂ ZenyÂ fromÂ theÂ player

============================================================

## _Sidebar

[Home](home)
## Getting Started
* [Installation](installations) instructions
* [Transitioning from SVN to GIT](http://rathena.org/board/topic/87120-transitioning-from-svn-to-git/)
* [Compiling](compiling) on your OS
* [Connecting](connecting) & Starting rAthena

## Configure your Server
* [Scripting](scripting) like a pro!
* Server [Modifications](modifications) and what to expect
* [Database Configuration](Database-Configuration)
* [Customize](customizing) your server!

## Setup the Client
* [Data folder](Data-Folder)
* [Spriting](spriting), pixel by pixel
* [Mapping](mapping) tutorials
* [Client Configs](diff) make you original
* [Patchers](patchers) keep you up-to date!

============================================================