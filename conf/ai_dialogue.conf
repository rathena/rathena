//===== rAthena Configuration ================================
//= AI Dialogue System Configuration
//===== Description: =========================================
//= Configuration for the asynchronous AI dialogue system
//= Controls worker threads, rate limiting, and AI service connection
//===== Author: ==============================================
//= rAthena AI World Team
//============================================================

// Enable/Disable AI Dialogue System
// 0: Disabled (traditional NPC dialogue only)
// 1: Enabled (hybrid menu + AI text input)
ai_dialogue_enabled: 1

// AI Service Connection Settings
ai_service: {
	// Web server bridge URL (where the AI service is accessible)
	bridge_url: "127.0.0.1"
	bridge_port: 8888
	
	// Request timeout in milliseconds (30 seconds default)
	request_timeout_ms: 30000
	
	// Maximum retries for failed requests
	max_retries: 2
	
	// Delay between retries in milliseconds
	retry_delay_ms: 1000
}

// Worker Thread Pool Settings
worker_threads: {
	// Number of worker threads (4-8 recommended)
	// More threads = more concurrent AI requests
	// Too many threads = wasted resources
	num_threads: 4
	
	// Enable debug logging for worker threads
	// WARNING: Very verbose, only enable for troubleshooting
	debug_logging: 0
}

// Rate Limiting Settings
rate_limiting: {
	// Cooldown between requests per player (milliseconds)
	// Prevents spam and gives AI time to respond
	cooldown_ms: 5000  // 5 seconds
	
	// Maximum requests per time window
	max_requests: 10
	
	// Time window for rate limiting (milliseconds)
	time_window_ms: 60000  // 1 minute
	
	// Maximum message length (characters)
	max_message_length: 500
}

// Queue Settings
queue: {
	// Maximum pending requests in queue
	// If queue is full, new requests are dropped
	max_request_queue_size: 1000
	
	// Maximum pending responses in queue
	max_response_queue_size: 1000
	
	// Response check interval (milliseconds)
	// How often the server checks for AI responses
	response_check_interval_ms: 100
}

// Error Handling
error_handling: {
	// Show error messages to players when AI service is unavailable
	show_error_messages: 1
	
	// Fallback message when AI service fails
	fallback_message: "I'm having trouble responding right now. Please try again later."
	
	// Fallback message when rate limited
	rate_limit_message: "Please wait a moment before asking another question."
}

// Performance Monitoring
monitoring: {
	// Enable statistics tracking
	enable_stats: 1
	
	// Log statistics interval (milliseconds)
	// 0 = disabled
	stats_log_interval_ms: 300000  // 5 minutes
	
	// Cleanup old player states interval (milliseconds)
	cleanup_interval_ms: 300000  // 5 minutes
}

// Development/Testing Settings
development: {
	// Enable verbose logging for debugging
	verbose_logging: 0
	
	// Simulate AI service failures for testing
	// 0 = disabled, 1-100 = percentage of requests to fail
	simulate_failures: 0
	
	// Test mode: Use mock responses instead of real AI service
	test_mode: 0
	test_response: "This is a test response from the AI dialogue system."
}

//============================================================
// Notes:
// - Restart the map server after changing this configuration
// - Monitor server logs for AI dialogue system status
// - Adjust worker threads based on server load and AI service capacity
// - Rate limiting prevents abuse and ensures fair usage
//============================================================

