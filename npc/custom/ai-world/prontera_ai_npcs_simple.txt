//===== rAthena Script =======================================
//= AI-Powered NPCs for Prontera
//===== Description: =========================================
//= AI-powered NPCs with dynamic dialogue using AI service
//============================================================

// ============================================
// Lyra the Explorer - Curious Adventurer
// ============================================
prontera,155,185,4	script	Lyra the Explorer#ai002	4_F_NOVICE,{
	.@player_id = getcharid(0);
	.@player_name$ = strcharinfo(0);

	.@json$ = "{";
	.@json$ += "\"npc_id\":\"ai_explorer_002\",";
	.@json$ += "\"player_id\":\"" + .@player_id + "\",";
	.@json$ += "\"interaction_type\":\"talk\",";
	.@json$ += "\"context\":{\"player_name\":\"" + .@player_name$ + "\"}";
	.@json$ += "}";

	.@bridge_url$ = "http://192.168.0.100:8000";
	.@response$ = httppost(.@bridge_url$ + "/ai/player/interaction/simple", .@json$);

	mes "[Lyra the Explorer]";
	if (.@response$ != "" && .@response$ != "...") {
		mes .@response$;
	} else {
		mes "Oh! A fellow adventurer!";
		mes "I've just returned from the";
		mes "most AMAZING expedition!";
		mes "Want to hear about it?";
	}
	close;

OnInit:
	.npc_id$ = "ai_explorer_002";
	.@reg_json$ = "{";
	.@reg_json$ += "\"npc_id\":\"ai_explorer_002\",";
	.@reg_json$ += "\"name\":\"Lyra the Explorer\",";
	.@reg_json$ += "\"npc_class\":\"explorer\",";
	.@reg_json$ += "\"level\":25,";
	.@reg_json$ += "\"position\":{\"map\":\"prontera\",\"x\":155,\"y\":185},";
	.@reg_json$ += "\"personality\":{";
	.@reg_json$ += "\"openness\":0.95,";
	.@reg_json$ += "\"conscientiousness\":0.6,";
	.@reg_json$ += "\"extraversion\":0.9,";
	.@reg_json$ += "\"agreeableness\":0.85,";
	.@reg_json$ += "\"neuroticism\":0.3";
	.@reg_json$ += "},";
	.@reg_json$ += "\"moral_alignment\":{\"lawful_chaotic\":0.3,\"good_evil\":0.8},";
	.@reg_json$ += "\"background\":\"A young adventurer with an insatiable curiosity about the world. Lyra has traveled far and wide, collecting stories and artifacts from distant lands.\",";
	.@reg_json$ += "\"goals\":[\"Discover ancient ruins\",\"Map uncharted territories\",\"Share knowledge with others\"],";
	.@reg_json$ += "\"relationships\":{},";
	.@reg_json$ += "\"memory_keywords\":[\"exploration\",\"adventure\",\"discovery\",\"ancient\",\"ruins\"]";
	.@reg_json$ += "}";
	
	.@bridge_url$ = "http://192.168.0.100:8000";
	.@reg_response$ = httppost(.@bridge_url$ + "/ai/npc/register", .@reg_json$);
	end;
}

// ============================================
// Guard Thorne - Stern City Guard
// ============================================
prontera,145,175,4	script	Guard Thorne#ai003	4_M_JOB_KNIGHT1,{
	.@player_id = getcharid(0);
	.@player_name$ = strcharinfo(0);

	.@json$ = "{";
	.@json$ += "\"npc_id\":\"ai_guard_003\",";
	.@json$ += "\"player_id\":\"" + .@player_id + "\",";
	.@json$ += "\"interaction_type\":\"talk\",";
	.@json$ += "\"context\":{\"player_name\":\"" + .@player_name$ + "\"}";
	.@json$ += "}";

	.@bridge_url$ = "http://192.168.0.100:8000";
	.@response$ = httppost(.@bridge_url$ + "/ai/player/interaction/simple", .@json$);

	mes "[Guard Thorne]";
	if (.@response$ != "" && .@response$ != "...") {
		mes .@response$;
	} else {
		mes "*eyes you suspiciously*";
		mes "What do you want?";
		mes "I'm watching you...";
	}
	close;

OnInit:
	.npc_id$ = "ai_guard_003";
	.@reg_json$ = "{";
	.@reg_json$ += "\"npc_id\":\"ai_guard_003\",";
	.@reg_json$ += "\"name\":\"Guard Thorne\",";
	.@reg_json$ += "\"npc_class\":\"guard\",";
	.@reg_json$ += "\"level\":40,";
	.@reg_json$ += "\"position\":{\"map\":\"prontera\",\"x\":145,\"y\":175},";
	.@reg_json$ += "\"personality\":{";
	.@reg_json$ += "\"openness\":0.3,";
	.@reg_json$ += "\"conscientiousness\":0.95,";
	.@reg_json$ += "\"extraversion\":0.4,";
	.@reg_json$ += "\"agreeableness\":0.5,";
	.@reg_json$ += "\"neuroticism\":0.6";
	.@reg_json$ += "},";
	.@reg_json$ += "\"moral_alignment\":{\"lawful_chaotic\":0.9,\"good_evil\":0.7},";
	.@reg_json$ += "\"background\":\"A veteran guard who has protected Prontera for over a decade. Thorne is strict but fair, with a deep sense of duty.\",";
	.@reg_json$ += "\"goals\":[\"Maintain order\",\"Protect citizens\",\"Uphold the law\"],";
	.@reg_json$ += "\"relationships\":{},";
	.@reg_json$ += "\"memory_keywords\":[\"law\",\"order\",\"protection\",\"duty\",\"security\"]";
	.@reg_json$ += "}";
	
	.@bridge_url$ = "http://192.168.0.100:8000";
	.@reg_response$ = httppost(.@bridge_url$ + "/ai/npc/register", .@reg_json$);
	end;
}

