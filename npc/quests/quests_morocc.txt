//===== eAthena Script ======================================= 
//= Quest NPCs related to Morroc
//===== By: ================================================== 
//= kobra_k88
//===== Current Version: ===================================== 
//= 2.4
//===== Compatible With: ===================================== 
//= eAthena 7.15 +
//===== Description: ========================================= 
//= Stop Post / Binoculars Quest / Continental Guard
//===== Additional Comments: ================================= 
//= 1.1 Fixed exploits [Lupus]
//= 1.2 Added Dandelion's Request / Morroc Invasion quest. [SinSloth]
//= 1.3 Updated dialogs from Binoculars Quest. [Samuray22]
//= 1.3a added GM lvl check as in other invansion quests [Lupus]
//= 1.4 Fixed a small bug in Dandelion's Request. [SinSloth]
//= 1.5 Fixed a little bug with "Job_Alchemist" changed to "Job_Alchem". [Samuray22]
//= 1.6 Fixed a nasty bug in last part of the quest. [SinSloth]
//= 1.6a replaced item "names" with item id. [Lupus]
//= 1.7 Fixed a bug with XP rewards. [SinSloth]
//= 1.8 Fixed a bug which prevented reset of events. [SinSloth]
//= 1.9 Corrected NPC names to fall within proper restrictions. [L0ne_W0lf]
//= 2.0 Fixed bad NPC header data to comply with rev. 11603. [L0ne_W0lf]
//= 2.0a Corrected a Typo error ";;". [Samuray22]
//= 2.1 Assassins will now get their request item. (bugreport:1220) [L0ne_W0lf]
//= 2.2 Updated Binocular and Stop Post quests. [L0ne_W0lf]
//= 2.3 Replaced effect numerics with constants. [Samuray22]
//= 2.4 Implemented Ep. 12.1 Continental Guard Quest. [L0ne_W0lf]
//=     Moved Dandelion's Request to a it's own file.
//=     Added support NPCs required to finish Gaebolg quest.
//============================================================ 

//==================================================================================//
// 				Stop Post Quest
//==================================================================================//
moc_ruins,113,181,4	script	William	89,{
	mes "[William]";
	mes "Welcome to";
	mes "MacMillan's ^3355FFPost^000000 Workshop.";
	next;
	mes "[William]";
	mes "My family, the MacMillan Clan, has been producing Professional Traffic Signal Posts for more than 250 years. Nowadays, we are booking Special Orders for our unique ornament, ^3355FFStop Post^000000.";
	next;
	switch(select("Could I order one ^3355FFStop Post^000000?:Nah...")) {
	case 1:
		mes "[William]";
		mes "This unique ornament, ^3355FFStop Post^000000, is a traffic signal on the road, and doubles as a hair ornament! This, we solemnly promise on the strength of a 100-year guarantee.";
		next;
		mes "[William]";
		mes "To produce a ^3355FFStop Post^000000, we need ^3355FF91100 Zeny^000000, ^3355FF50 Trunk^000000 and ^3355FF1 Black Dyestuffs^000000.";
		next;
		if ((countitem(1019) > 49) && (countitem(983) > 0) && (Zeny > 91099)) {
			delitem 1019,50;  //Wooden_Block
			delitem 983,1;  //Black_Dyestuffs
			set Zeny,Zeny-91100;
			mes "[William]";
			mes "Here you are~!";
			mes "This ^3355FFStop Post^000000 has";
			mes "been especially made";
			mes "just for you!";
			mes "Thank you for stopping by!";
			mes "...Get the joke?";
			getitem 2272,1; // Stop_Post
			close;
		}
		else {
			mes "[William]";
			mes "So...";
			mes "When you get those items, swing on by and we'll give you a Stop Post.";
			close;
		}
	case 2:
		mes "[William]";
		mes "Anyway, thank you for coming by 'MacMillan's Workshop.' But think about buying something next time, will ya?";
		close;
	}
}

//==================================================================================//
//				Binoculars Quest
//==================================================================================//
moc_ruins,118,176,4	script	Alchemist	64,{
	mes "[Marius]";
	mes "Howdy, new customer!!";
	mes "I know what you're gonna talk about. You want the Magic Glasses from me, riiiiight?";
	next;
	switch(select("What is that?:Manufacture:Ignore him")) {
	case 1:
		mes "[Marius]";
		mes "Hmm~!";
		mes "Well, the official name for them is ^3355FFBinoculars^000000! An optical device that works like a pair of field glasses, they're designed for simultaneous use by both eyes!";
		next;
		mes "[Marius]";
		mes "They're made up of two small telescopes joined with a single focusing device. You can arrange the lenses to produce stereoscopic vision.";
		next;
		mes "[Marius]";
		mes "So?";
		mes "Ain't that";
		mes "something, huh?";
		mes "Muhahahahahaha!";
		mes ". . . . .";
		next;
		mes "[Marius]";
		mes "Hm? You don't seem to";
		mes "believe what I just said?";
		mes "Oh c'mon, jerk. It's real!!";
		next;
		mes "[Marius]";
		mes "I will let you";
		mes "know the items I need...";
		mes "1 ^3355FFGeek Glasses^000000! 100 ^3355FFSteel^000000!";
		mes "And ^3355FF50000 Zeny^000000!";
		close;
	case 2:
		if ((countitem(2243) > 0) && (countitem(999) > 99) && (Zeny > 49999)) {
			mes "[Marius]";
			mes "Perfect, perfect !";
			mes "Now my masterpiece will be complete!";
			mes "Muhahahaha !";
			next;
			delitem 2243,1;  //Spinning_Eyes
			delitem 999,100;  //Steel
			set Zeny,Zeny-50000;
			mes "[Marius]";
			mes "Here you are!";
			mes "Binoculars !";
			getitem 2296,1; // Binoculars
			next;
			mes "[Marius]";
			mes "Just remember...";
			mes "Don't peep at something you shouldn't look at. Well, at least try not to.";
			close;
		}
		else {
			mes "[Marius]";
			mes "Argggghhhhhhh!!";
			mes "You didn't bring";
			mes "enough items!!!!";
			mes "How dare you";
			mes "disgrace me!!!";
			mes "Baaaadddd !!";
			close;
		}
	case 3:
		mes "[Marius]";
		mes "Hey you~!";
		mes "Now you're in front of Marius, an Alchemist among Alchemists. Ignoring me, eh? Come on, I'll beat your ass!";
		close;
	}
}

// Morroc Assassin Guild Bar
// ============================================================
morocc,43,108,5	script	Sharp-Looking Kid#dan_07	82,{
	if (BaseClass == Job_Assassin) {
		mes "[Jack]";
		mes "In spite of the chaotic mess in their town, ";
		mes "there are still some of those who pay visits here.";
		mes "Maybe the stronghold itself is a real one of a kind..";
		close;
	}
	else {
		if (countitem(7416) > 0) {
			mes "[Jack]";
			mes "A letter of recommendation?";
			mes "Oh, boy. Looks like you've brought me a very, very old relic from the past.";
			mes "Well, guess you should go in and see the master.";
			close;
		}
		else {
			mes "[Jack]";
			mes "Hey, what are you peeking at?";
			mes "Don't you have better things to do? You'd better go to the shelter and save your ass.";
			close;
		}
	}
}

morocc,45,110,0	script	que_job01#01	45,2,2,{
OnTouch:
	if (BaseClass == Job_Assassin) {
		warp "que_job01",9,94;
		end;
	}
	else {
		mes "[Jack]";
		mes "Wait, that's the restricted area....";
		mes "......";
		mes "Oh, well.";
		next;
		mes "[Jack]";
		mes "Things have changed.";
		mes "Just do whatever you want!";
		close2;
		warp "que_job01",9,94;
		end;
	}
}

que_job01,6,94,0	warp	morocc#01	2,2,morocc,45,103
que_job01,17,48,0	warp	que_job01#02	2,2,que_job01,68,92
que_job01,68,96,0	warp	que_job01#03	2,2,que_job01,17,53

que_job01,80,77,0	script	que_job01#04	45,2,2,{
OnTouch:
	if (BaseClass == Job_Assassin) {
		warp "que_job01",61,50;
		end;
	}
	else if (mao_request > 0) {
		warp "que_job01",61,50;
		end;
	}
	else {
		mes "[Litheron]";
		mes "Whoa, you're not";
		mes "allowed to be in here.";
		mes "Hey, master! Do you";
		mes "know this guy?";
		next;
		if (prt_curse == 24) {
			mes "[" + strcharinfo(0) + "]";
			mes "I don¡¯t care what you say, I¡¯m coming in!!!";
			next;
			mes "[Litheron]";
			mes "Hey, master-! What do we do with this guy?";
			mes "He sure seems tough!";
			next;
			mes "[Master]";
			mes "Hmm. Let him do what he wants to do.";
			mes "Passing through one door doesn¡¯t make any difference.";
			next;
			mes "[Litheron]";
			mes "Hah! Did you hear that?";
			mes "Alright, how about this?";
			mes "I'll let you in if you buy me a drink.";
			mes "Besides, you can't risk making trouble here: this place";
			mes "is full of deadly Assassins.";
			next;
			switch(select("Sure:Why should I?!")) {
			case 1:
				if (Zeny > 999) {
					mes "[Litheron]";
					mes "Heh, that's what";
					mes "I'm talking about!";
					mes "Hey, bartender! Gimme";
					mes "the usual! I like your";
					mes "style, adventurer...";
					set zeny,zeny-1000;
					next;
					mes "[Litheron]";
					mes "Alright, you can come";
					mes "on in. But don't you dare";
					mes "breathe a word about this";
					mes "bar to another living soul.";
					close2;
					warp "que_job01",61,50;
					end;
				}
				else {
					mes "[Litheron]";
					mes "Huh...";
					mes "Oh, you don't even";
					mes "have enough zeny to";
					mes "buy water here. Oh boy...";
					mes "If you really want to enter,";
					mes "make sure you have the cash!";
					close2;
					warp "que_job01",85,77;
					end;
				}
			case 2:
				mes "[Litheron]";
				mes "Not the saavy type,";
				mes "are you...? Fine, fine.";
				mes "If you're not gonna do";
				mes "me any favors, then why";
				mes "should I help you? Go away!";
				close2;
				warp "que_job01",85,77;
				end;
			}
		}
		else {
			mes "[Master]";
			mes "Not at all.";
			mes "Make sure that this";
			mes "one isn't allowed";
			mes "to enter.";
			next;
			mes "[Litheron]";
			mes "You heard the man.";
			mes "You better retreat";
			mes "from this place while";
			mes "you still have legs...";
			close2;
			warp "que_job01",85,77;
			end;
		}
	}
}

que_job01,65,50,0	warp	que_job01#05	2,2,que_job01,84,77

que_job01,81,79,5	script	Idle Knight#dan_08	733,{
	mes "[Litheron]";
	mes "What's the matter?";
	mes "Oh, I see... You're";
	mes "probably wondering why";
	mes "a Knight like me is in a";
	mes "secret Assassin's pub.";
	if (BaseClass == Job_Knight) {
		mes "What about you, huh?";
	}
	next;
	mes "[Litheron]";
	mes "You know.. I just came to take a short breather. This whole restoration work is killing me.";
	mes "It's almost impossible to spot a place for a little drink these days, if you know what I mean.";
	close;
}

que_job01,82,95,3	script	Bar Master#moc_main01	46,{
	if (checkweight(908,200) == 0) {
		mes "^3355FFWait a second!";
		mes "Right now, you're carrying";
		mes "too many things with you.";
		mes "Please come back after";
		mes "using the Kafra Service";
		mes "to store some of your items.^000000";
		close;
	}
	if (BaseClass == Job_Assassin) {
		mes "[Master]";
		mes "Please, come in.";
		mes "Care for a drink?";
	}
	else if ((BaseJob == Job_Thief) && (BaseClass != Job_Assassin)) {
		mes "[Master]";
		mes "......Huh. How did a ruffian like you get in here?";
		mes "Well, I guess Jack's not doing his job.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Hey,master, don't be so harsh. We know each other, don't we?";
		mes "You don't wanna hurt your old friend's feeling~";
		next;
		mes "[Master]";
		mes "Whatever you say.";
		mes "So,what do you wanna drink?";
	}
	else {
		mes "[Master]";
		mes "....Hmm...";
		mes "What do you wanna drink?";
	}
	next;
	switch(select("Order a Drink:Ask About Mission:Cancel")) {
	case 1:
		mes "[Master]";
		mes "In this place, I only serve two drinks.";
		mes "You want a Tropical Sograt or";
		mes "a Vermilion on the Beach?";
		next;
		switch(select("Tropical Sograt:Vermilion on the Beach:Do you offer any free drinks?")) {
		case 1:
			if (checkweight(908,200) == 0) {
				mes "[Master]";
				mes "Hey, why did you bring";
				mes "so much stuff with you?";
				mes "I can't give you anything";
				mes "to drink if you don't have";
				mes "the room to carry it around.";
				mes "Clear out your inventory!";
				close;
			}
			else {
				if (BaseClass == Job_Assassin) {
					if (Zeny < 800) {
						mes "[Master]";
						mes "You know...";
						mes "I was going to charge you";
						mes "800 zeny for this drink, but";
						mes "it looks like you can't afford";
						mes "it right now. Come back when";
						mes "you have the zeny, alright?";
					}
					else {
						mes "[Master]";
						mes "Most bartenders would";
						mes "usually charge 1,000 zeny";
						mes "for this stuff, but I'll only";
						mes "ask you for 800. Enjoy it,";
						mes "my friend, and drink it as";
						mes "deeply as you would life.";
						set zeny,zeny-800;
						getitem 12112,1; //Tropical_Sograt
					}
					close;
				}
				else {
					if (Zeny < 1000) {
						mes "[Master]";
						mes "Hey, you don't have";
						mes "the zeny for this drink.";
						mes "Make sure you come back";
						mes "with 1,000 zeny if you want";
						mes "me to fix you something, okay?";
						close;
					}
					else {
						mes "[Master]";
						mes "For Assassins, I charge";
						mes "800 zeny, but for you, I'm";
						mes "gonna charge 1,000. No";
						mes "hard feelings, but you're";
						mes "already lucky to be here.";
						mes "Hey, enjoy your drink~";
						set zeny,zeny-1000;
						getitem 12112,1; //Tropical_Sograt
						close;
					}
				}
			}
		case 2:
			if (checkweight(908,200) == 0) {
				mes "[Master]";
				mes "Hey, why did you bring";
				mes "so much stuff with you?";
				mes "I can't give you anything";
				mes "to drink if you don't have";
				mes "the room to carry it around.";
				mes "Clear out your inventory!";
				close;
			}
			else {
				if (BaseClass == Job_Assassin) {
					if (Zeny < 800) {
						mes "[Master]";
						mes "You know...";
						mes "I was going to charge you";
						mes "800 zeny for this drink, but";
						mes "it looks like you can't afford";
						mes "it right now. Come back when";
						mes "you have the zeny, alright?";
					}
					else {
						mes "[Master]";
						mes "Most bartenders would";
						mes "usually charge 1,000 zeny";
						mes "for this stuff, but I'll only";
						mes "ask you for 800. Enjoy it,";
						mes "my friend, and drink it as";
						mes "deeply as you would life.";
						set zeny,zeny-800;
						getitem 12113,1; //Vermilion_The_Beach
					}
					close;
				}
				else {
					if (Zeny < 1000) {
						mes "[Master]";
						mes "Hey, you don't have";
						mes "the zeny for this drink.";
						mes "Make sure you come back";
						mes "with 1,000 zeny if you want";
						mes "me to fix you something, okay?";
						close;
					}
					else {
						mes "[Master]";
						mes "For Assassins, I charge";
						mes "800 zeny, but for you, I'm";
						mes "gonna charge 1,000. No";
						mes "hard feelings, but you're";
						mes "already lucky to be here.";
						mes "Hey, enjoy your drink~";
						set zeny,zeny-1000;
						getitem 12113,1; //Vermilion_The_Beach
						close;
					}
				}
			}
		case 3:
			mes "[Master]";
			mes "What are you...?";
			mes "I just told you";
			mes "I only serve two";
			mes "drinks. If you want";
			mes "water, you oughtta";
			mes "go someplace else.";
			close;
		}
	case 2:
		if (mao_request == 1) {
			if (BaseClass == Job_Assassin) {
				mes "[Master]";
				mes "A mission...";
				mes "Don't you think you're little too late?";
				mes "All the requests were cancelled and there's nothing left for you to do.";
				mes "Besides, first things first. The restoration work for the city is the most urgent.";
				close;
			}
			else {
				mes "[Master]";
				mes "Huh?";
				next;
				select("Show him the Letter of Recommendation.");
				if (countitem(7416) > 0) {
					mes "[Master]";
					mes "Ah.. I think you're little too late.";
					mes "I've got nothing to say if this's about the request sent to each guild.";
					mes "I'm sorry you've come this far for nothing.";
					close;
				}
				else {
					mes "[Master]";
					mes "What are you talking about?";
					next;
					mes "[Master]";
					mes "................You're looking way too suspicious now.";
					mes " ";
					mes "Boys, show this guy the door!!";
					next;
					mes "[Drinking Boys]";
					mes "- Yes, Sir!";
					next;
					mes "- You've got kicked out of the place. -";
					close2;
					warp "morocc",45,106;
					end;
				}
			}
		}
		else {
			if (BaseClass == Job_Assassin) {
				mes "[Master]";
				mes "Let me take a guess. You haven't been assigned any missions from this joint, eh?";
				mes "By the way, you like this place?";
				next;
				mes "[Master]";
				mes "You know, I kinda...";
				mes "happen to really love this little pub of mine..";
				mes "where some secret businesses take place..";
				next;
				mes "[Master]";
				mes "If you want, I'll recommend";
				mes "you to the guildmaster for";
				mes "a mission. Until then, you've";
				mes "got to focus on your training.";
				mes "And until you train... Why";
				mes "don't you enjoy a drink?";
				close;
			}
			else {
				mes "[Master]";
				mes "Mission...?";
				mes "Come on, what are";
				mes "you talking about?";
				mes "Stop talking crazy and";
				mes "order something to drink.";
				close;
			}
		}
	case 3:
		mes "[Master]";
		mes "Hmmm.";
		close;
	}
}

que_job01,49,49,5	script	Tao#dan_09	877,{
	if (BaseClass == Job_Assassin) {
		mes "[Tao]";
		mes "Welcome, meow~";
		mes "How's out, meow?";
		next;
		if (prt_curse == 24) {
			switch(select("Is Marjana in?:I'm here to see you,Tao.")) {
			case 1:
				mes "[Tao]";
				mes "She's in the room on your left, meow~";
				mes "But then, how d'you know she's here, meow?";
				close;
			case 2:
				mes "[Tao]";
				mes "This is no place for playing, meow..";
				mes "... Hey, it's awkward you looking at me like that, meow..";
				close;
			}
		}
		else {
			mes "[Tao]";
			mes "Is this all because of that dude called Raiyan Moore or More.. or.. blar?";
			mes "... Meow..";
			next;
			mes "[Tao]";
			mes "Ugh, you've got nothing to do, then get lost, meow?!";
			mes "You know this place is prohibited, meow.";
			mes "You won'e even be able to go into that room, anyway, meow~.";
			next;
			mes "[Tao]";
			mes "Or, else.... You could?.. Oh, who knows, meow..";
			mes "Tao hates to watch the gate anymore, meow~ meow~";
			close;
		}
	}
	else {
		mes "[Tao]";
		mes "What's up, meow!";
		next;
		switch(select("So, it's just you, little brat?:What has gotten into you?!:Hey, stop meowing?!")) {
		case 1:
			mes "[Tao]";
			mes "What are you talking about, meow!";
			mes "Tao's the greatest gate keeper!";
			mes "Don't ever low estimate, meow!";
			next;
			mes "[Tao]";
			mes "Looks like you came for some reasons, but don't even dream of getting my help, meow!!";
			mes "Do you think I'm stupid enough to tell you that";
			mes "the Master and Marjana are in that room on the right? Meow, meow, meow~~";
			close;
		case 2:
			mes "[Tao]";
			mes "Are you looking down on me because I'm a gate keeper?!";
			mes "Grrrr...";
			next;
			mes "[Tao]";
			mes "Get outta here while you have chances!!!!";
			close;
		case 3:
			mes "[Tao]";
			mes "Meow, meow.";
			mes "It's a long story, meow.";
			mes "That day, Tao really wanted a Big Ribbon, meow.";
			next;
			mes "[Tao]";
			mes "So I went out looking for Wild Roses, meow...";
			mes "...Meow? Wait a minute, why am I telling this story, meow?!";
			next;
			mes "[Tao]";
			mes "Krrrr!";
			mes "Who the hell are you!";
			next;
			mes "[Tao]";
			mes "Get out of here, meow!!!";
			close;
		}
	}
}

que_job01,51,55,0	script	que_job01#room_1	45,1,1,{
OnInit:
	set $maobar_room,0;
	end;

Onreset:
	set $maobar_room,0;
	end;

OnTouch:
	if (prt_curse == 24) {
		if ($maobar_room == 0) {
			set $maobar_room,1;
			donpcevent " #room1timer::OnEnable";
			donpcevent "Marjana#poison::OnEnable";
			mes "[Tao]";
			mes "Ah, that place is protected";
			mes "by security magic, so you'll";
			mes "only have ^4D4DFF4 minutes^000000 to remain";
			mes "there. Don't waste time, meow!";
			close2;
			warp "que_job01",11,7;
			end;
		}
		else {
			mes "[Tao]";
			mes "Sooo sorry, meow~";
			mes "Someone else is already";
			mes "inside. Just come back";
			mes "again later, meow?";
			close2;
			warp "que_job01",52,50;
			end;
		}
	}
	else if (mao_request > 0) {
		if ($maobar_room == 0) {
			set $maobar_room,1;
			donpcevent " #room1timer::OnEnable";
			donpcevent "Valdes#moc_master_1::OnEnable";
			mes "[Tao]";
			mes "Ah, that place is protected";
			mes "by security magic, so you'll";
			mes "only have ^4D4DFF4 minutes^000000 to remain";
			mes "there. Don't waste time, meow!";
			close2;
			warp "que_job01",11,7;
			end;
		}
		else {
			mes "[Tao]";
			mes "Sooo sorry, meow~";
			mes "Someone else is already";
			mes "inside. Just come back";
			mes "again later, meow?";
			close2;
			warp "que_job01",52,50;
			end;
		}
	}
	else {
		mes "[Tao]";
		mes "Wh-who are you?";
		mes "This is a restricted";
		mes "area, meow! If you don't";
		mes "have permission, then get";
		mes "out of there right meow!";
		close2;
		warp "que_job01",52,50;
		end;
	}
}

que_job01,1,1,0	script	 #room1timer	844,{
OnEnable:
	initnpctimer;
	mapannounce "que_job01","You will now enter the Master Zone, Area 1.",bc_map,"0x70DBDB";
	end;

Onstop:
	mapannounce "que_job01","The security magic in the Master Zone, Area 1 is deactivated.",bc_map,"0x70DBDB";
	donpcevent "#room1_warp::OnDisable";
	donpcevent "Valdes#moc_master_1::OnDisable";
	donpcevent "Marjana#poison::OnDisable";
	donpcevent "que_job01#room_1::Onreset";
	stopnpctimer;
	end;

OnTimer240000:
	donpcevent "#room1_warp::OnEnable";
	end;

OnTimer245000:
	donpcevent "#room1_warp::OnDisable";
	donpcevent "Valdes#moc_master_1::OnDisable";
	donpcevent "Marjana#poison::OnDisable";
	end;

OnTimer250000:
	mapannounce "que_job01","The security magic Master Zone, Area 1 is now activated.",bc_map,"0x70DBDB";
	donpcevent "que_job01#room_1::Onreset";
	stopnpctimer;
	end;
}

que_job01,12,13,0	script	#room1_warp	-1,15,15,{
OnInit:
	disablenpc "#room1_warp";
	end;

OnEnable:
	enablenpc "#room1_warp";
	end;

OnDisable:
	disablenpc "#room1_warp";
	end;

OnTouch:
	warp "que_job01",52,50;
	end;
}

que_job01,51,44,0	warp	que_job01#room_2	1,1,que_job01,80,23

que_job01,11,4,0	script	que_job01#room1_out	45,1,1,{
OnTouch:
	warp "que_job01",52,50;
	donpcevent " #room1timer::OnStop";
	end;
}

que_job01,80,27,0	warp	que_job01#room2_1_out	1,1,que_job01,52,50

que_job01,16,21,5	script	Valdes#moc_master_1	55,{
	if (BaseClass == Job_Assassin) {
		mes "[Valdes]";
		mes "What is it? I have nothing to ask you to do.";
		mes "Could you please leave me alone? I have a bad headache.";
		next;
		mes "[Valdes]";
		mes "I'll ask you for a help some other time.";
		mes "You look pretty passionate after all.";
	}
	else {
		mes "[Valdez]";
		mes "....Sorry, but could you please leave?";
		mes "I'm really stressed out right now.";
		mes "If you're here for the request that we made earlier, you can just forget about it.";
	}
	if (countitem(7417) > 0) {
		delitem 7417,countitem(7417); //Mission_ScrollA
	}
	if (countitem(7418) > 0) {
		delitem 7418,countitem(7418); //Mission_ScrollB
	}
	if (countitem(7416) > 0) {
		delitem 7416,countitem(7416); //Letter_Of_Recommend
	}
	close;

OnInit:
	disablenpc "Valdes#moc_master_1";
	end;

OnEnable:
	enablenpc "Valdes#moc_master_1";
	end;

OnDisable:
	disablenpc "Valdes#moc_master_1";
	end;
}

yuno_in04,180,106,3	script	Reading Girl#moc_girl1	73,{
	mes "[" + strcharinfo(0) + "]";
	mes "Excuse me, but may I ask";
	mes "you a question?";
	next;
	mes "[Yunia]";
	mes "Eh? Oh, I'm sorry, I was";
	mes "so busy reading this book!";
	mes "So, uh, what exactly did";
	mes "you want to ask me?";
	next;
	select("What are you reading?");
	mes "[Yunia]";
	mes "Ah! This is one of the best sellers of Joshua Vansei's.";
	mes "The main character is a writer, and it's so touching that this guy writes a story of his mistress...";
	next;
	mes "[Yunia]";
	mes "Oh.. I can't wait to see Hoein Special..";
	mes "And this, you could have a look if you want to.";
	next;
	mes "[" + strcharinfo(0) + "]";
	mes "Oh, now, I shouldn't.";
	mes "Looks like the cover's rounded with a red strap,";
	mes "which..I really think is for adults only.";
	mes "ex..cuse me~!";
	close;
}

morocc_in,46,125,5	script	Assistant#moc_ex1	729,{
	mes "[Sephit]";
	mes "I've always believed in Satan..";
	mes "Haah... Guess it's good to be living, after all.";
	next;
	mes "[Sephit]";
	mes "Who would've thought to actually see the Satan while alive.....?";
	close;
}

que_job01,70,84,1	script	Girl#moc_ex002	882,{
	mes "[Girl]";
	mes "Oh, the world.. the world is doomed..";
	mes "-sobbing-";
	mes "Nothing seems to be working now..";
	emotion e_sob;
	next;
	mes "["+ strcharinfo(0) +"]";
	mes "....Tsk..tsk...";
	mes "Good heavens.. I can't believe this young girl's drinking with sadness....";
	close;
}

// Continental Guard Quest
// ============================================================
moc_fild20,354,183,3	script	Continental Guard#01::MocConGuard	707,3,3,{
	if ((rebirth_moc_edq == 0) && (rebirth_moc_edq < 4)) {
		mes "[Continental Guard]";
		mes "No commoners are allowed in the area beyond this point.";
		mes "This place is extremely dangerous so you are restricted from entering.";
		next;
		switch(select("Cancel Conversation:Ask What Happened")) {
		case 1:
			close;
		case 2:
			mes "[Continental Guard]";
			mes "Didn't you know? Satan Morroc has resurrected and broke out of Morroc Village where he was confined.";
			next;
			mes "[Continental Guard]";
			mes "His resurrection has caused irreparable damage to the village and to the desert around it, and now he has moved to the Sograt Desert.";
			next;
			mes "[Continental Guard]";
			mes "We are here to carry out the orders of the Prontera Kingdom by preventing commoners, aside from the members of the Morroc Subjugation, from accessing the area.";
			next;
			mes "[Continental Guard]";
			mes "If you'd like to know more information, I suggest that you speak to the Continental Guard in charge of the accident site in Morroc Village.";
			next;
			switch(select("End Conversation:Ask About Guard's Location")) {
			case 1:
				close;
			case 2:
				mes "[Continental Guard]";
				mes "The guard that you want to talk to is at a camp built in the center of Morroc Village.";
				next;
				mes "[Continental Guard]";
				mes "If you'd like, I can send you there directly.";
				next;
				switch(select("No, thanks.:Please do.")) {
				case 1:
					mes "[Continental Guard]";
					mes "I see. Well then, for your safety, please leave this dangerous area as soon as possible.";
					close;
				case 2:
					mes "[Continental Guard]";
					mes "Great. I'll send you to Morroc Village's accident site shortly.";
					close2;
					warp "morocc",160,61;
					end;
				}
			}
		}
	}
	else if ((rebirth_moc_edq > 3) && (rebirth_moc_edq < 8)) {
		mes "[Continental Guard]";
		mes "No commoners are allowed in the area beyond this point.";
		mes "This place is extremely dangerous so you are restricted from entering.";
		next;
		switch(select("Cancel Conversation:Enter the Field to Investigate:Move to Morroc's Accident Site")) {
		case 1:
			close;
		case 2:
			if ($@re_moc < 3) {
				getpartymember(getcharid(1));
				set .@partymembercount,$@partymembercount;
				copyarray .@partymembername$[0],$@partymembername$[0],.@partymembercount;
				while (.@partymembercount >= 0) {
					set .@name$,.@partymembername$[.@partymembercount];
					if (isloggedin(getcharid(3,.@name$))) {
						set .@onlinemembers,.@onlinemembers + 1;
					}
					set .@partymembercount,.@partymembercount - 1;
				}
				if ((.@onlinemembers > 1) && (countitem(7826) > 0)) {
					mes "[Continental Guard]";
					mes "......";
					next;
					mes "[Continental Guard]";
					mes "Yes, I've confirmed that you're a member of the Continental Guards. I wish you good luck in accomplishing your mission.";
					next;
					mes "[Continental Guard]";
					mes "I'll send you to the field shortly. Please use the warp at the field entrance to come back to this area.";
					close2;
					warp "moc_fild21",38,193;
					end;
				}
				else if ((.@onlinemembers < 2) && (countitem(7826) > 0)) {
					mes "[Continental Guard]";
					mes "Welcome, members of the Continental Guards. I have a special order from Chief Balrog for you, so let me read it for you.";
					next;
					mes "[Continental Guard]";
					mes "'Due to the dangers of this area, I hereby prohibit members of the Continental Guard to investigate the area alone. You must organize a party of at least 2 members to carry out your missions from now on.'";
					next;
					mes "[Continental Guard]";
					mes "...You understand that, right? Please go back to the site, and come back in a party of at least 2 members. Thank you.";
					close;
				}
				else if (countitem(7826) < 1) {
					mes "[Continental Guard]";
					mes "Only members of the Continental Guards with Continental Guard Certificates are allowed to proceed beyond this point.";
					close;
				}
				else {
					close;
				}
			}
			else {
				mes "[Continental Guard]";
				mes "We've received orders from Headquarters to block access to this area since an unusual space-time phenomenon has been detected from the Morroc field.";
				next;
				mes "[Continental Guard]";
				mes "We need to wait until the phenomenon is over, and then we'll let you proceed with your investigation.";
				close;
			}
		case 3:
			mes "[Continental Guard]";
			mes "Great. I'll send you to Morroc Village's accident site shortly.";
			close2;
			warp "morocc",160,61;
			end;
		}
	}
	else if (rebirth_moc_edq == 8) {
		mes "[Continental Guard]";
		mes "Ah, you're an adventurer working for the Continental Guard. Nice to meet you. Feel free to ask me if you need my assistance.";
		next;
		switch(select("Enter the Field to Investigate:Return to Morroc's Accident Site:Cancel Conversation")) {
		case 1:
			getpartymember(getcharid(1));
			set .@partymembercount,$@partymembercount;
			copyarray .@partymembername$[0],$@partymembername$[0],.@partymembercount;
			while (.@partymembercount >= 0) {
				set .@name$,.@partymembername$[.@partymembercount];
				if (isloggedin(getcharid(3,.@name$))) {
					set .@onlinemembers,.@onlinemembers + 1;
				}
				set .@partymembercount,.@partymembercount - 1;
			}
			if ((.@onlinemembers > 1) && (countitem(7826) > 0)) {
				mes "[Continental Guard]";
				mes "......";
				next;
				mes "[Continental Guard]";
				mes "Yes, I've confirmed that you're a member of the Continental Guards. I wish you good luck in accomplishing your mission.";
				next;
				mes "[Continental Guard]";
				mes "I'll send you to the field shortly. Please use the warp at the field entrance to come back to this area.";
				close2;
				warp "moc_fild22",38,193;
				end;
			}
			else if ((.@onlinemembers < 2) && (countitem(7826) > 0)) {
				mes "[Continental Guard]";
				mes "Welcome, members of the Continental Guards. I have a special order from Chief Balrog for you, so let me read it for you.";
				next;
				mes "[Continental Guard]";
				mes "'Due to the dangers of this area, I hereby prohibit members of the Continental Guard to investigate the area alone. You must organize a party of at least 2 members to carry out your missions from now on.'";
				next;
				mes "[Continental Guard]";
				mes "...So please go back to the site, and come back in a party of at least 2 members. Thank you.";
				close;
			}
			else if (countitem(7826) < 1) {
				mes "[Continental Guard]";
				mes "Only members of the Continental Guards with Continental Guard Certificates are allowed to proceed beyond this point.";
				close;
			}
			else {
				end;
			}
		case 2:
			mes "[Continental Guard]";
			mes "Great. I'll send you to Morroc Village's accident site shortly.";
			close2;
			warp "morocc",160,61;
			end;
		case 3:
			close;
		}
	}
	else {
		end;
	}

//OnTouch2:
OnTouch:
	mes "[Continental Guard]";
	mes "No commoners are allowed in the area beyond this point.";
	mes "This place is extremely dangerous so you are restricted from entering.";
	close;
	end;
}

moc_fild20,354,174,3	duplicate(MocConGuard)	Continental Guard#02	707,3,3
moc_fild20,38,174,5	duplicate(MocConGuard)	Continental Guard#03	707,3,3
moc_fild20,38,183,5	duplicate(MocConGuard)	Continental Guard#04	707,3,3
moc_fild20,189,21,7	duplicate(MocConGuard)	Continental Guard#05	707,3,3
moc_fild20,200,21,7	duplicate(MocConGuard)	Continental Guard#06	707,3,3
moc_fild20,203,336,5	duplicate(MocConGuard)	Continental Guard#07	707,3,3
moc_fild20,215,336,3	duplicate(MocConGuard)	Continental Guard#08	707,3,3

prontera,164,304,3	script	Continental Messenger#01::ConMessenger	997,3,3,{
	set .@area$,strnpcinfo(2);
	if (.@area$ == "01") { set .@area$,"Prontera"; }
	else if (.@area$ == "02") { set .@area$,"Geffen"; }
	else if (.@area$ == "03") { set .@area$,"Payon"; }
	else if (.@area$ == "04") { set .@area$,"Alberta"; }
	else if (.@area$ == "05") { set .@area$,"Al De Baran"; }
	if (BaseLevel > 79) {
		mes "[Continental Guard Messenger]";
		mes "Good day, "+ strcharinfo(0) +". We don't have the luxury of time in this dire situation so I'll try to make this quick.";
		next;
		mes "[Continental Guard Messenger]";
		mes "I'm a messenger dispatched here to " + .@area$ + " from the Morroc Continental Guard Headquarters. My duty is to deliver this important message to as many renowned adventurers as I can. I'm glad that I was finally able to find you, "+ strcharinfo(0) +".";
		next;
		select("Morroc Continental Guard Headquarters?");
		mes "[Continental Guard Messenger]";
		mes "Time's running out, so I can only give you a brief explanation.";
		next;
		mes "[Continental Guard Messenger]";
		mes "Satan Morroc, the heinous demon imprisoned deep in Morroc's underground for centuries, has resurrected and broken free.";
		next;
		mes "[Continental Guard Messenger]";
		mes "The revival of Satan Morroc has completely devastated Morroc Village and the area surrounding it.";
		next;
		mes "[Continental Guard Messenger]";
		mes "All of the death and suffering... Anywhere else must seem like heaven compared to what's happening in and around Morroc.";
		next;
		mes "[Continental Guard Messenger]";
		mes "The Morroc Continental Guard was immediately organized to fight Satan Morroc and bring relief to this dire situation. I'm here to inform everyone in the Rune-Midgarts Kingdom about this catastrophe.";
		next;
		mes "[Continental Guard Messenger]";
		mes "We need your help, "+ strcharinfo(0) +". We need reputable adventurers like you to seal away Satan Morroc once again.";
		next;
		mes "[Continental Guard Messenger]";
		mes "For more information, please speak to the captain of the Morroc Continental Guard. He is waiting for you, "+ strcharinfo(0) +".";
		next;
		mes "[Continental Guard Messenger]";
		mes "The Continental Guard Headquarters is located near the center palace of Morroc, so please go speak to the chief as soon as you can.";
		close;
	}
	else {
		mes "[Continental Guard Messenger]";
		mes "I'm a messenger from the Morroc Continental Guards Headquarters, and I've come here to " + .@area$ + " with an urgent message for everyone here in Rune-Midgarts Kingdom.";
		next;
		select("Morroc Continental Guard Headquarters?");
		mes "[Continental Guard Messenger]";
		mes "Time's running out, so I can only give you a brief explanation.";
		next;
		mes "[Continental Guard Messenger]";
		mes "Satan Morroc, the heinous demon imprisoned deep in Morroc's underground for centuries, has resurrected and broken free.";
		next;
		mes "[Continental Guard Messenger]";
		mes "The revival of Satan Morroc has completely devastated Morroc Village and the area surrounding it.";
		next;
		mes "[Continental Guard Messenger]";
		mes "All of the death and suffering... Anywhere else must seem like heaven compared to what's happening in and around Morroc.";
		next;
		mes "[Continental Guard Messenger]";
		mes "The Morroc Continental Guard was immediately organized to fight Satan Morroc and bring relief to this dire situation. I'm here to inform everyone in the Rune-Midgarts Kingdom about this catastrophe.";
		next;
		mes "[Continental Guard Messenger]";
		mes "Part of my duty is to help recruit adventurers from around the world to help drive Satan Morroc back into confinement. It won't be easy, but he was defeated once before. Satan Morroc can be sealed away again.";
		next;
		mes "[Continental Guard Messenger]";
		mes "At least 70% of Morroc Village was destroyed by the fallout of Satan Morroc's resurrection.";
		next;
		mes "[Continental Guard Messenger]";
		mes "The desert around Morroc has also turned into a land of death after it was claimed by Satan Morroc and his powerful doppelgangers and underlings.";
		mes "So heed my warning, stay away from the Morroc area unless you're on a mission organized by the Morroc Continental Guard.";
		close;
	}

OnTouch:
	if (BaseLevel > 79) {
		mes "[Continental Guard Messenger]";
		mes "Are you... "+ strcharinfo(0) +"?";
		mes "Ah, very well. I have an extremely important message for you.";
		next;
		mes "[Continental Guard Messenger]";
		mes "The situation is urgent, so please listen to me carefully.";
		close;
	}
	end;
}

geffen,128,90,3	duplicate(ConMessenger)	Continental Messenger#02	997,3,3
payon,200,113,3	duplicate(ConMessenger)	Continental Messenger#03	997,3,3
alberta,127,64,3	duplicate(ConMessenger)	Continental Messenger#04	998,3,3
aldebaran,135,128,3	duplicate(ConMessenger)	Continental Messenger#05	998,3,3

morocc,176,103,3	script	Continental Official	754,{
	if (rebirth_moc_edq > 3) {
		mes "[Continental Guard Official]";
		mes "On behalf of the Continental Guard, I thank you for your efforts. Now, let me see if I've received any news from Headquarters that you should know...";
		next;
		mes "[Continental Guard Official]";
		mes "Hmm...";
		next;
		mes "[Continental Guard Official]";
		mes "Nothing yet. Please carry on with your current mission. Once again, thank you.";
		close;
	}
	else if (rebirth_moc_edq == 0) {
		mes "[Continental Guard Official]";
		mes "Welcome to the Morroc Subjugation Information Center. How may I help you?";
		next;
		switch(select("What is this place for?:I'm here to volunteer.:Tell me about the village situation.")) {
		case 1:
			mes "[Continental Guard Official]";
			mes "I'm stationed here to assist adventurers who wish to volunteer and help the Continental Guard fight Satan Morroc.";
			next;
			mes "[Continental Guard Official]";
			mes "I am sure you are already aware that Satan Morroc's revival threatens the peace of the Rune-Midgarts kingdom, and if Satan Morroc is allowed to roam free, it will devour the entire world.";
			next;
			mes "[Continental Guard Official]";
			mes "The Continental Guard is currently planning an array of countermeasures to suppress Satan Morroc under the order of the kingdom.";
			next;
			mes "[Continental Guard Official]";
			mes "If you have been invited by our messenger, or are confident in your skills, we encourage you to volunteer for the Continental Guards and bring peace back to this continent.";
			close;
		case 2:
			if (BaseLevel > 79) {
				mes "[Continental Guard Official]";
				mes "Welcome, " + strcharinfo(0) + ". I've been waiting for you. I assume our messenger informed you of our situation.";
				next;
				mes "[Continental Guard Official]";
				mes "Let me process your application immediately. Please wait.";
				next;
				mes "[Continental Guard Official]";
				mes "Now please go speak to Chief Balrog of the Continental Guard. You can find him in the center.";
				set rebirth_moc_edq,1;
				//getquest(3050),1;
				close;
			}
			else {
				mes "[Continental Guard Official]";
				mes "I applaud you for your courage, but you will need more than just courage to help us.";
				next;
				mes "[Continental Guard Official]";
				mes "Satan Morroc is most powerful evil that exists in the mortal world. Snuffing out your life would be so trivial to him.";
				next;
				mes "[Continental Guard Official]";
				mes "I strongly recommend that you just think about your own safety for now. When the final battle comes, I am sure that no place will be safe.";
				close;
			}
		case 3:
			mes "[Continental Guard Official]";
			mes "As you can see, the situation can't be worse. The village and the surrounding area were irreparably damaged by Satan Morroc's resurrection.";
			next;
			mes "[Continental Guard Official]";
			mes "Since the kingdom has dispatched Continental Guard Messengers everywhere, many able adventurers have flocked to this place, but... I'm afraid they still might not be enough to defeat the demon.";
			next;
			mes "[Continental Guard Official]";
			mes "Please follow our instructions, at least around this area, and stay out of danger for now.";
			close;
		}
	}
	else {
		mes "[Continental Guard Official]";
		mes "Your application already has been registered. Please go speak to Chief Balrog.";
		close;
	}
}

morocc,159,113,3	script	Chief Balrog	752,{
	if (rebirth_moc_edq == 0) {
		mes "[Chief Balrog]";
		mes "You've come here at a bad time, but it's nice to meet you. I'm Continental Guard Chief Balrog. We've been dispatched to Morroc in order to suppress Satan Morroc... We'll need all the strength and luck we can gather.";
		next;
		mes "[Chief Balrog]";
		mes "I'm sorry, but I'm too busy checking through all these applications for future Continental Guards to greet you adventurers one by one.";
		next;
		mes "[Chief Balrog]";
		mes "Listen, it might be more helpful if you talk to some other people first. I'm sure one of the other Continental Guards or our messengers will be better equipped to help you out.";
		close;
	}
	else if (rebirth_moc_edq == 1) {
		mes "[Chief Balrog]";
		mes "You've come here at a bad time, but it's nice to meet you. I'm Continental Guard Chief Balrog. We've been dispatched to Morroc in order to suppress Satan Morroc... We'll need all the strength and luck we can gather.";
		next;
		mes "[Chief Balrog]";
		mes "It looks like you have business with me. Please make it brief since I don't have a lot of time on my hands. There's lots of things I need to take care of...";
		next;
		switch(select("Ask about Continental Guards:I want to join the Continental Guard.:End Conversation")) {
		case 1:
			mes "[Chief Balrog]";
			mes "The damage that Satan Morroc's resurrection has caused is obvious just by taking a look around this area.";
			mes "What's scary is that all this was caused just by breaking out from it's prison. Just think of the damage it could do if it was left to roam around freely...";
			next;
			mes "[Chief Balrog]";
			mes "Morroc Village is completely devastated, and Satan Morroc has now claimed possession of the Sograt Desert.";
			next;
			mes "[Chief Balrog]";
			mes "I've no doubt that if left unchecked, Satan Morroc will take over the entire Midgart Continent. We've got to stop him right now before the entire world suffers.";
			next;
			mes "[Chief Balrog]";
			mes "That's why the kingdom has ordered us elite soldiers to form the Continental Guard, and recruit reputable adventurers around the world so that we can make a united stand against Satan Morroc.";
			next;
			mes "[Chief Balrog]";
			mes "Of course, it'll be incredibly difficult... We'll need to make sacrifices... I'm not even sure if we can win. Still, the fate of the world is at stake, and we've got to do something. Dark times have truly fallen upon us...";
			close;
		case 2:
			mes "[Chief Balrog]";
			mes "Huh? Do you want to join us and volunteer for the Continental Guard?";
			next;
			if (BaseLevel > 79) {
				mes "[Chief Balrog]";
				mes "What was your name? " + strcharinfo(0) + "? Oh yes, I've heard of you.";
				next;
				mes "[Chief Balrog]";
				mes "Hmm, it occurs to me that you don't understand the danger involved in all this. Do you have any idea how powerful Satan Morroc is?";
				next;
				mes "[Chief Balrog]";
				mes "You won't be able to help us if you don't fully understand the risks. I've seen thousands of foolhardy adventurers throw their lives away by thinking they could defeat Satan Morroc with their own strength.";
				next;
				mes "[Chief Balrog]";
				mes "We are facing a threat that will determine the world's future, and fools that can't work in a team will be liabilities, not assets.";
				next;
				mes "[Chief Balrog]";
				mes "I'm sorry, but inexperienced adventurers would just get in our way. I hope you understand. If you really want to help us, then please focus on your training for now.";
				next;
				switch(select("End Conversation:Ask Again")) {
				case 1:
					close;
				case 2:
					mes "[Chief Balrog]";
					mes "Look, I understand your enthusiasm, but you're mistaken if you think you can help us. I don't have time to fully explain the danger that we're all facing.";
					next;
					mes "[Chief Balrog]";
					mes "Satan Morroc is nothing like the monsters you may have encountered. At best you'll throw your life away, but there's the chance that you might get one of my men killed by your mistakes and incompetence. I can't have that!";
					next;
					mes "[Chief Balrog]";
					mes "Please understand that this is for your own good. Fight some Porings or whatever else might be a good match for your level.";
					next;
					switch(select("End Conversation:You've just got to let me join!")) {
					case 1:
						close;
					case 2:
						mes "[Chief Balrog]";
						mes "Sigh... Why are you so persistent? Can't you understand that no means no? Let me say this one more time.";
						next;
						mes "[Chief Balrog]";
						mes "We're too busy fighting Satan Morroc to watch after rookies like you. You'd just be throwing your life away.";
						next;
						mes "[Chief Balrog]";
						mes "Stop bothering me. You'd be nothing but a burden.";
						next;
						switch(select("Give Up:Give me a chance to prove myself!")) {
						case 1:
							close;
						case 2:
							mes "[Chief Balrog]";
							mes "Huh? You want a chance to prove yourself?";
							next;
							mes "[" + strcharinfo(0) + "]";
							mes "Yes, I'll do whatever it takes to join the Continental Guard!";
							next;
							mes "[Chief Balrog]";
							mes "Hmm...";
							next;
							mes "[Chief Balrog]";
							mes "Interesting. You have my attention. Alright, I guess it's only fair that I acknowledge your strength if you can handle something for me.";
							next;
							mes "[Chief Balrog]";
							mes "The Continental Guard has been on full alert around this village and the desert. We need to be prepared in case Satan Morroc storms our defenses.";
							next;
							mes "[Chief Balrog]";
							mes "Soldiers need firewood to keep the bonfires burning all night, but we've been suffering a firewood shortage.";
							next;
							mes "[Chief Balrog]";
							mes "I happened to hear that the monsters in the Lava Dungeon have everlasting flame which would solve our bonfire problems. I want you to gather those flames for us.";
							next;
							switch(select("That's too hard! Let me think about it!:No problem.")) {
							case 1:
								mes "[Chief Balrog]";
								mes "Hmpf, I was right. I knew you wouldn't be able to handle such a simple task. I shouldn't have wasted my time with you.";
								close;
							case 2:
								mes "[Chief Balrog]";
								mes "Excellent! Bring back ^0000FF30 Live Coals^000000. I'll be waiting for your return.";
								set rebirth_moc_edq,2;
								//deletequest(3050);
								//getquest(3051),1;
								close;
							}
						}
					}
				}
			}
			else {
				mes "[Chief Balrog]";
				mes "What? How can you even think of joining us when you don't have any real skills to offer?";
				next;
				mes "[Chief Balrog]";
				mes "I guarantee that you'd just drag my soldiers down with you. You'd only be a threat to Satan Morroc in your dreams. Just give it up.";
				next;
				mes "[Chief Balrog]";
				mes "You won't be able to help us if you don't fully understand the risks. I've seen thousands of foolhardy adventurers throw their lives away by thinking they could defeat Satan Morroc with their own strength.";
				next;
				mes "[Chief Balrog]";
				mes "We are facing a threat that will determine the world's future, and fools that can't work in a team will be liabilities, not assets.";
				next;
				mes "[Chief Balrog]";
				mes "I'm sorry, but inexperienced adventurers would just get in our way. I hope you understand. If you really want to help us, then please focus on your training for now.";
				close;
			}
		case 3:
			close;
		}
	}
	else if (rebirth_moc_edq == 2) {
		mes "[Chief Balrog]";
		mes "So, did you find ^0000FF30 Live Coals^000000? You didn't come empty-handed, did you?";
		next;
		if (countitem(7098) > 29) {
			mes "[Chief Balrog]";
			mes "Let's see... One, two, three... Thirty, you've brought them all. Well, this was a pretty simple task. All it takes is time and a little effort. Anyone could do it.";
			next;
			mes "[Chief Balrog]";
			mes "Anyways, thank you for bringing the Live Coals. I guess you're stronger than I thought.";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Now will you let me join the Continental Guard?";
			next;
			mes "[Chief Balrog]";
			mes "No, gathering these flames is a piece of cake compared to what we're going to do.";
			next;
			mes "[Chief Balrog]";
			mes "I'm still not convinced that you're good enough to join us. Let me think... Hmm...";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "I didn't think you would accept me so easily. I'm ready. Ask me whatever you want.";
			next;
			mes "[Chief Balrog]";
			mes "Ah, I've got an idea. Now, because this is an allied operation, we've accepted some mercenary soldiers from the Schwaltzvalt Republic to join the Continental Guard.";
			next;
			mes "[Chief Balrog]";
			mes "These mercenaries have never seen the desert, and they're having trouble carrying out operations in the heat, dry air, and sandstorms. It's not their fault, but they could use a little help since they're out of their element.";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "(This guy seems threatening, but he seems to have a good heart.)";
			next;
			mes "[Chief Balrog]";
			mes "Now, I remember hearing that the monsters in the Ice Cave to the north have frozen hearts. Those hearts might be able to relieve those soldiers from the heat.";
			next;
			switch(select("That's too hard!:No problem. How many do you want?")) {
			case 1:
				mes "[Chief Balrog]";
				mes "I knew that'd be too tough for you. I'm glad you finally realized your limits before it was too late. It takes wisdom to recognize your weakness.";
				next;
				mes "[Chief Balrog]";
				mes "You'd better pack up and return where you came from. You want to be far away from here when Satan Morroc attacks.";
				close;
			case 2:
				mes "[Chief Balrog]";
				mes "Huh?! Are you sure you can bring those? Hmm...";
				next;
				mes "[Chief Balrog]";
				mes "Well... If you insist on giving it a try, then... I'll need at least 50 of those frozen hearts.";
				next;
				mes "[Chief Balrog]";
				mes "Please bring me ^0000FF50 Glacial Hearts^000000. The faster you get them here, the better.";
				delitem 7098,30; //Live_Coal
				set rebirth_moc_edq,3;
				//deletequest(3051);
				//getquest(3052),1;
				close;
			}
		}
		else {
			mes "[Chief Balrog]";
			mes "Umm... Didn't you hear what I said? I said 30 Live Coals, 30.";
			next;
			mes "[Chief Balrog]";
			mes "Now hurry up. If you feel like giving up, it's no problem. Let me know, though!";
			close;
		}
	}
	else if (rebirth_moc_edq == 3) {
		mes "[Chief Balrog]";
		mes "So, did you find 50 Glacial Hearts?";
		next;
		if (countitem(7561) > 49) {
			mes "[Chief Balrog]";
			mes "Thank you. I'm sure that my soldiers will appreciate these... Those guys aren't used to the desert, and could use the relief.";
			next;
			mes "[Chief Balrog]";
			mes "Well... It looks like you earned this.";
			delitem 7561,50; //Ice_Heart
			getitem 7826,1; //Continental_Guard_Paper
			set rebirth_moc_edq,4;
			//deletequest(3052);
			//getquest(3053),1;
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "What's this?";
			next;
			mes "[Chief Balrog]";
			mes "You'd know if you read it. It's a certificate that proves that you're a member of the Continental Guard. I admit that I'm impressed by your skills and gumption.";
			next;
			mes "[Chief Balrog]";
			mes "Welcome to the Continental Guard, my friend. Are you ready to risk your life for the sake of peace in the world?";
			next;
			mes "[Chief Balrog]";
			mes "Your mission from here on will be simple, but extremely difficult: you will join the rest of the Continental Guard to keep Satan Morroc from fully reviving its true power.";
			next;
			mes "[Chief Balrog]";
			mes "My soldiers are risking their lives to fight Morroc's doppelgangers and underlings in order to make it safer for their comrades to travel to Morroc's lair.";
			next;
			mes "[Chief Balrog]";
			mes "It looks like your help could be useful after all. It's time for you to pitch in. Good luck.";
			close;
		}
		else {
			mes "[Chief Balrog]";
			mes "Umm... Didn't you hear what I said? I said 50 Glacial Hearts, 50.";
			next;
			mes "[Chief Balrog]";
			mes "Now hurry up. If you feel like giving up, it's no problem. Let me know, though!";
			close;
		}
	}
	else if (rebirth_moc_edq == 4) {
		mes "[Chief Balrog]";
		mes "I guess you'd benefit from a full situational briefing. Shall I brief you now?";
		next;
		switch(select("Yes:No")) {
		case 1:
			mes "[Chief Balrog]";
			mes "I'm going to tell you some basic information about fighting Satan Morroc as a member of the Continental Guard.";
			next;
			mes "[Chief Balrog]";
			mes "Do you remember what Morroc was like before this happened? You would if you've been here before.";
			next;
			mes "[Chief Balrog]";
			mes "Right now, all of Morroc's entrances and the outer fields leading to other villages are currently under our control.";
			next;
			mes "[Chief Balrog]";
			mes "The main reason for this is because Satan Morroc has been sighted in Sograt Desert, but there's another important reason.";
			next;
			mes "[Chief Balrog]";
			mes "Satan Morroc's power has been causing unnatural gaps in our time-space continuum. The gaps are isolated to this area for now, but we can't be sure if they'll spread.";
			next;
			mes "[Chief Balrog]";
			mes "Due to the time-space gaps, Sograt Desert's terrain has changed, and some parts of the desert have disappeared.";
			next;
			mes "[Chief Balrog]";
			mes "Furthermore, the situation's gotten worse since Satan Morroc's doppelgangers started appearing, and other monsters have become influenced by its power.";
			next;
			mes "[Chief Balrog]";
			mes "That's all we know so far. If you go out, you'll see what I mean... You may even see horrors that we haven't discovered yet. If you need more information, please speak to the Continental Official.";
			next;
			mes "[Chief Balrog]";
			mes "Please do your best to hold back Satan Morroc. Don't forget that the future of the continent is in our hands. Dismissed.";
			close;
		case 2:
			mes "[Chief Balrog]";
			mes "I see. Keep up your good work in fighting Satan Morroc. Don't forget that the future of the continent is in our hands.";
			close;
		}
	}
	else if (rebirth_moc_edq == 5) {
		mes "[Chief Balrog]";
		mes "Wah... What? Did you really defeat Satan Morroc?";
		next;
		mes "[Chief Balrog]";
		mes "How? Do you have any proof of your victory?";
		next;
		mes "[Chief Balrog]";
		mes "...No, I can't just accept and trust your verbal account. I mean, if you've completed such an important mission, you must bring me some evidence.";
		next;
		mes "[Chief Balrog]";
		mes "Go back, bring proof of your victory, and then come back.";
		close;
	}
	else if (rebirth_moc_edq == 6) {
		mes "[Chief Balrog]";
		mes "What? Did you really defeat Satan Morroc?";
		next;
		mes "[Chief Balrog]";
		mes "How? Do you have any proof of your victory?";
		next;
		if (countitem(7820) > 0) {
			mes "[Chief Balrog]";
			mes "Is... Isn't this?";
			next;
			mes "[Chief Balrog]";
			mes "Wow... I think this is really the skin of Satan Morroc. Congratulations, soldier. You just saved this world and people from being consumed by destruction and evil.";
			next;
			mes "[Chief Balrog]";
			mes "I guess you seriously wounded Satan Morroc, and it retreated to a time-space gap. No doubt it's trying to recoup its strength.";
			next;
			mes "[Chief Balrog]";
			mes "My only regret is that we can't pursue Morroc beyond this dimension. I'm glad, however, that you defeated Satan Morroc and kept it from regaining its full strength. For now, anyway...";
			next;
			mes "[Chief Balrog]";
			mes "Our researchers might be able to learn some important new facts from this piece of skin... We need to learn all we can about that monster if peace is to be possible in our world's future.";
			next;
			mes "[Chief Balrog]";
			mes "Once again, I thank you for your distinguished service on behalf of the Continental Guard and the Rune-Midgarts Kingdom. I'll report your great achievement to His Majesty right away.";
			next;
			delitem 7820,1; //Morroc_Skin
			getexp 2000000,0;
			set rebirth_moc_edq,7;
			//deletequest(3055);
			//getquest(3056),1;
			mes "[Chief Balrog]";
			mes "I've prepared a few things to give as a reward for you. Let's see... I have three items. Which one do you like to receive?";
			next;
			switch(select("1. Seal of Continental Guard:2. Morroc Charm Stone:3. Morroc Ring")) {
			case 1:
				mes "[Chief Balrog]";
				mes "The Seal of Continental Guard is an extremely valuable reward given directly from the kingdom court. It is a symbol of strength.";
				next;
				mes "[Chief Balrog]";
				mes "The accessory's options are: ^0000FF MHP+50, +3% Attack Speed^000000.";
				next;
				mes "[Chief Balrog]";
				mes "Do you really want the Seal of Continental Guard?";
				next;
				switch(select("1. Yes.:2. No.")) {
				case 1:
					mes "[Chief Balrog]";
					mes "Great, then I'll reward you with the Seal of Continental Guard. Congratulations.";
					next;
					getitem 2730,1; //Morroc_Seal
					set rebirth_moc_edq,8;
					//deletequest(3056);
					mes "[Chief Balrog]";
					mes "I hope you keep in mind that our battle is far from over. Our enemy is the king of demons... I fear that Satan Morroc will return someday soon.";
					next;
					mes "[Chief Balrog]";
					mes "Enjoy your victory, but be ever watchful and vigilant. I will always be here to help and reward you for your service.";
					next;
					mes "[Chief Balrog]";
					mes "You should go rest now. Don't worry, we'll take care of everything else here.";
					close;
				case 2:
					mes "[Chief Balrog]";
					mes "No problem. Take your time to think, and then speak to me again.";
					close;
				}
			case 2:
				mes "[Chief Balrog]";
				mes "The Morroc Charm Stone is an extremely valuable reward given directly from the kingdom court, and it is a symbol of prosperity and mana.";
				next;
				mes "[Chief Balrog]";
				mes "The accessory's options are: ^0000FF MSP+50, -1% Casting Speed^000000.";
				next;
				mes "[Chief Balrog]";
				mes "Do you really want a Morroc Charm Stone?";
				next;
				switch(select("1. Yes.:2. No.")) {
				case 1:
					mes "[Chief Balrog]";
					mes "Great, then I'll reward you with a Morroc Charm Stone. Congratulations.";
					next;
					getitem 2731,1; //Morroc_Charm_Stone
					set rebirth_moc_edq,8;
					//deletequest(3056);
					mes "[Chief Balrog]";
					mes "I hope you keep in mind that our battle is far from over. Our enemy is the king of demons... I fear that Satan Morroc will return someday soon.";
					next;
					mes "[Chief Balrog]";
					mes "Enjoy your victory, but be ever watchful and vigilant. I will always be here to help and reward you for your service.";
					next;
					mes "[Chief Balrog]";
					mes "You should go rest now. Don't worry, we'll take care of everything else here.";
					close;
				case 2:
					mes "[Chief Balrog]";
					mes "No problem. Take your time to think, and then speak to me again.";
					close;
				}
			case 3:
				mes "[Chief Balrog]";
				mes "The Morroc Ring is an extremely valuable reward given directly from the kingdom court that symbolizes critical power.";
				next;
				mes "[Chief Balrog]";
				mes "The accessory's option is: ^0000FF CRI + 5^000000.";
				next;
				mes "[Chief Balrog]";
				mes "Do you really want a Morroc Ring?";
				next;
				switch(select("1. Yes.:2. No.")) {
				case 1:
					mes "[Chief Balrog]";
					mes "Great, then I'll reward you with a Morroc Ring. Congratulations.";
					next;
					getitem 2732,1; //Morroc_Ring
					set rebirth_moc_edq,8;
					//deletequest(3056);
					mes "[Chief Balrog]";
					mes "I hope you keep in mind that our battle is far from over. Our enemy is the king of demons... I fear that Satan Morroc will return someday soon.";
					next;
					mes "[Chief Balrog]";
					mes "Enjoy your victory, but be ever watchful and vigilant. I will always be here to help and reward you for your service.";
					next;
					mes "[Chief Balrog]";
					mes "You should go rest now. Don't worry, we'll take care of everything else here.";
					close;
				case 2:
					mes "[Chief Balrog]";
					mes "No problem. Take your time to think about it, and then speak to me again.";
					close;
				}
			}
		}
		else {
			mes "[Chief Balrog]";
			mes "...No, I can't just accept and trust your verbal account. I mean, if you've completed such an important mission, you must bring me some evidence.";
			next;
			mes "[Chief Balrog]";
			mes "Go back, bring proof of your victory, and then come back.";
			close;
		}
	}
	else if (rebirth_moc_edq == 7) {
		mes "[Chief Balrog]";
		mes "I've prepared a few things to give as a reward for you. Let's see... I have three items. Which one do you like to receive?";
		next;
		switch(select("1. Seal of Continental Guard:2. Morroc Charm Stone:3. Morroc Ring")) {
		case 1:
			mes "[Chief Balrog]";
			mes "The Seal of Continental Guard is an extremely valuable reward given directly from the kingdom court. It is a symbol of strength.";
			next;
			mes "[Chief Balrog]";
			mes "The accessory's options are: ^0000FF MHP+50, +3% Attack Speed^000000.";
			next;
			mes "[Chief Balrog]";
			mes "Do you really want the Seal of Continental Guard?";
			next;
			switch(select("1. Yes.:2. No.")) {
			case 1:
				mes "[Chief Balrog]";
				mes "Great, then I'll reward you with the Seal of Continental Guard. Congratulations.";
				next;
				getitem 2730,1; //Morroc_Seal
				set rebirth_moc_edq,8;
				//deletequest(3056);
				mes "[Chief Balrog]";
				mes "I hope you keep in mind that our battle is far from over. Our enemy is the king of demons... I fear that Satan Morroc will return someday soon.";
				next;
				mes "[Chief Balrog]";
				mes "Enjoy your victory, but be ever watchful and vigilant. I will always be here to help and reward you for your service.";
				next;
				mes "[Chief Balrog]";
				mes "You should go rest now. Don't worry, we'll take care of everything else here.";
				close;
			case 2:
				mes "[Chief Balrog]";
				mes "No problem. Take your time to think, and then speak to me again.";
				close;
			}
		case 2:
			mes "[Chief Balrog]";
			mes "The Morroc Charm Stone is an extremely valuable reward given directly from the kingdom court, and it is a symbol of prosperity and mana.";
			next;
			mes "[Chief Balrog]";
			mes "The accessory's options are: ^0000FF MSP+50, -1% Casting Speed^000000.";
			next;
			mes "[Chief Balrog]";
			mes "Do you really want a Morroc Charm Stone?";
			next;
			switch(select("1. Yes.:2. No.")) {
			case 1:
				mes "[Chief Balrog]";
				mes "Great, then I'll reward you with a Morroc Charm Stone. Congratulations.";
				next;
				getitem 2731,1; //Morroc_Charm_Stone
				set rebirth_moc_edq,8;
				//deletequest(3056);
				mes "[Chief Balrog]";
				mes "I hope you keep in mind that our battle is far from over. Our enemy is the king of demons... I fear that Satan Morroc will return someday soon.";
				next;
				mes "[Chief Balrog]";
				mes "Enjoy your victory, but be ever watchful and vigilant. I will always be here to help and reward you for your service.";
				next;
				mes "[Chief Balrog]";
				mes "You should go rest now. Don't worry, we'll take care of everything else here.";
				close;
			case 2:
				mes "[Chief Balrog]";
				mes "No problem. Take your time to think, and then speak to me again.";
				close;
			}
		case 3:
			mes "[Chief Balrog]";
			mes "The Morroc Ring is an extremely valuable reward given directly from the kingdom court that symbolizes critical power.";
			next;
			mes "[Chief Balrog]";
			mes "The accessory's option is: ^0000FF CRI + 5^000000.";
			next;
			mes "[Chief Balrog]";
			mes "Do you really want a Morroc Ring?";
			next;
			switch(select("1. Yes.:2. No.")) {
			case 1:
				mes "[Chief Balrog]";
				mes "Great, then I'll reward you with a Morroc Ring. Congratulations.";
				next;
				getitem 2732,1; //Morroc_Ring
				set rebirth_moc_edq,8;
				//deletequest(3056);
				mes "[Chief Balrog]";
				mes "I hope you keep in mind that our battle is far from over. Our enemy is the king of demons... I fear that Satan Morroc will return someday soon.";
				next;
				mes "[Chief Balrog]";
				mes "Enjoy your victory, but be ever watchful and vigilant. I will always be here to help and reward you for your service.";
				next;
				mes "[Chief Balrog]";
				mes "You should go rest now. Don't worry, we'll take care of everything else here.";
				close;
			case 2:
				mes "[Chief Balrog]";
				mes "No problem. Take your time to think about it, and then speak to me again.";
				close;
			}
		}
	}
	else if (rebirth_moc_edq == 8) {
		mes "[Chief Balrog]";
		mes "I've heard that the kingdom is planning to send out a large group of researchers to investigate the other world to which Satan Morroc has escaped.";
		next;
		mes "[Chief Balrog]";
		mes "That means it's time for both of us -- you and I -- to get to work. Who knows when Morroc will return to plague us?";
		next;
		mes "[Chief Balrog]";
		mes "Please keep up the good work, and don't forget that the future of the continent and the kingdom relies on us.";
		close;
	}
	else {
		mes "[Chief Balrog]";
		mes "You've come here at a bad time, but it's nice to meet you. I'm Continental Guard Chief Balrog. We've been dispatched to Morroc in order to suppress Satan Morroc... We'll need all the strength and luck we can gather.";
		next;
		mes "[Chief Balrog]";
		mes "I'm sorry, but I'm too busy checking through all these applications for future Continental Guards to greet you adventurers one by one.";
		next;
		mes "[Chief Balrog]";
		mes "Listen, it might be more helpful if you talk to some other people first. I'm sure one of the other Continental Guards or our messengers will be better equipped to help you out.";
		close;
	}
}

moc_fild21,38,193,0	script	Morocc Timer#edq	-1,6,6,{
OnInit:
	set $@re_moc,0;
	end;

OnTouch:
	if ($@re_moc == 0) {
		set $@re_moc,1;
		donpcevent "Satan Broadcast#edq::OnEnable";
	}
	end;
}

moc_fild21,1,1,0	script	Satan Broadcast#edq	844,{
OnInit:
	disablenpc "Satan Broadcast#edq";
	end;

OnEnable:
	enablenpc "Satan Broadcast#edq";
	initnpctimer;
	end;

OnTimer5000:
	mapannounce "moc_fild21","Satan Morroc: I'm very impressed by you weaklings.",bc_map,"0xFFFF00";
	end;

OnTimer15000:
	mapannounce "moc_fild21","Satan Morroc: You may as well deal with all your regrets now. I shall snuff out your life soon!",bc_map,"0xFFFF00";
	end;

OnTimer25000:
	mapannounce "moc_fild21","Satan Morroc: It's only a matter of time until I get you, you worthless insects. Just a little while longer...",bc_map,"0xFFFF00";
	stopnpctimer;
	end;

OnDisable:
	disablenpc "Satan Broadcast#edq";
	end;
}

moc_fild21,178,239,0	script	Group of Evil#edq	844,1,1,{
	if (((rebirth_moc_edq == 4) || (rebirth_moc_edq == 7)) && ($@re_moc == 1)) {
		set $@re_moc,2;
		mes "Awed by the time-space gap where darkness is given life, you instinctively step back.";
		next;
		mes "You can feel the power of the darkness rise from the gap where light and darkness are mingled.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Wah...!";
		close2;
		donpcevent "Satan Summon#edq::OnEnable";
		end;
	}
	else {
		mes "Awed by the time-space gap where darkness is given life, you instinctively step back.";
		next;
		mes "You can feel the power of the darkness rise from the gap where light and darkness are mingled.";
		close;
	}

OnInit:
	enablenpc "Group of Evil#edq";
	end;

OnEnable:
	enablenpc "Group of Evil#edq";
	donpcevent "Time-Space Gap#edq::OnDisable";
	end;

OnDisable:
	disablenpc "Group of Evil#edq";
	donpcevent "Time-Space Gap#edq::OnEnable";
	end;
}

moc_fild21,177,239,0	script	Time-Space Gap#edq	844,1,1,{
	if ((rebirth_moc_edq == 4) && ($@re_moc == 3)) {
		mes "The time-space gap's frightening darkness seems to dissipate as Satan Morroc fades away.";
		next;
		mes "You can see the fragments floating in the gap, and the radiating lights are now slowing their movement.";
		next;
		mes "You stretch your hand and pick up a lusterless fragment.";
		getitem 7820,1; //Morroc_Skin
		set rebirth_moc_edq,6;
		//deletequest(3053);
		//getquest(3055),1;
		close;
	}
	else {
		mes "Slowly, erratically, the mysterious curtain of darkness casts over your eyes as you stare at the time-space gap.";
		next;
		mes "You feel like it's too dangerous to come any closer.";
		close;
	}

OnInit:
	disablenpc "Time-Space Gap#edq";
	end;

OnEnable:
	initnpctimer;
	enablenpc "Time-Space Gap#edq";
	end;

OnDisable:
	stopnpctimer;
	disablenpc "Time-Space Gap#edq";
	donpcevent "Group of Evil#edq::OnEnable";
	set $@re_moc,0;
	end;

OnTimer1800000:
	set $@re_moc,4;
	end;

OnTimer21600000:
	stopnpctimer;
	set $@re_moc,0;
	disablenpc "Time-Space Gap#edq";
	end;
}

moc_fild21,3,1,0	script	Satan Summon#edq	844,{
OnInit:
	disablenpc "Satan Summon#edq";
	end;

OnEnable:
	enablenpc "Satan Summon#edq";
	initnpctimer;
	monster "moc_fild21",177,217,"Satan Morroc",1916,1,"Satan Summon#edq::OnMyMobDead";
	end;

OnDisable:
	stopnpctimer;
	killmonster "moc_fild21","Satan Summon#edq::OnMyMobDead";
	set $@re_moc,0;
	disablenpc "Satan Summon#edq";
	end;

OnMyMobDead:
	set $@re_moc,3;
	mapannounce "moc_fild21","I'll let live just a little longer. You'll never find me through this time-space gap!",bc_map,"0xFFFF00";
	donpcevent "Time-Space Gap#edq::OnEnable";
	donpcevent "Satan Broadcast#edq::OnDisable";
	donpcevent "Group of Evil#edq::OnDisable";
	disablenpc "Satan Summon#edq";
	end;

OnTimer5400000:
	mapannounce "moc_fild21","You weaklings can't even scratch me!",bc_map,"0xFFFF00";
	end;

OnTimer5415000:
	mapannounce "moc_fild21","I don't have time for this! Go away!",bc_map,"0xFFFF00";
	stopnpctimer;
	killmonster "moc_fild21","Satan Summon#edq::OnMyMobDead";
	set $@re_moc,0;
	donpcevent "Satan Summon#edq::OnDisable";
	end;
}
