//===== rAthena Script =======================================
//= Direction of Prayer
//===== Description: =========================================
//= [Walkthrough Conversion]
//--- Main quest NPCs for Episode 18
//
// Notes:
// - The last value of ep18_main is 57
//===== Changelogs: ==========================================
//= 1.0 First version. [Capuche]
//============================================================

// Main Quest: Step 1.
// ba_in01,26,266,3	script	Smart Elly#ep18ely01	4_EP17_TABLET,{

ba_in01,22,262,6	script(CLOAKED)	Est#ep181_est01	4_F_ESTLOVELOY,{
	if (ep18_main == 1) {
		mes "[Est]";
		mes "Take care of yourself.";
		close;
	}
	end;
}


// ba_in01,24,262,7	script(CLOAKED)	Rookie#ep181_rk01	4_M_ROOKIE,3,0,{
ba_in01,24,262,7	script(CLOAKED)	Rookie#ep181_rk01	4_M_ROOKIE,{
	if (ep18_main == 1) {
		cutin "16loo_03.bmp",0;
		mes "[Rookie]";
		mes "It's unfortunate, but it is what it is.";
		mes "We also have a company job to do, so we can't just sit around and play.";
		mes "See you when it's all resolved.";
		close3;
	}
	end;
// OnTouch:	// unknown effect
	// end;
}


// Main Quest: Step 2.
rachel,182,176,3	script	Masked Girl	4_F_MASK,5,5,{
	.@char_id = getcharid(0);
	if (ep18_main == 1) {
		if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
			mes "Someone is giving a speech in a loud voice.";
			next;
			mes "[Mini Elly]";
			mes "Please take it out of the bag and put it on top of my head.";
			unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Please take it out of the bag and put it on top of my head.", bc_self;
			close;
		}
		mes "Someone is giving a speech in a loud voice.";
		next;
		mes "[Mini Elly]";
		mes "I've received a signal that you've arrived at your local coordinates.";
		mes "Is this the location I called you to?";
		next;
		switch( select( "Correct", "No" ) ) {
		case 1:
			mes "[" + strcharinfo(0) + "]";
			mes "Right, here we are.";
			break;
		case 2:
			mes "[" + strcharinfo(0) + "]";
			mes "I don't think it's here.";
			next;
			mes "[Mini Elly]";
			mes "That's odd, but it seems to fit with the information coming from Mini Elly right now, so let's check around.";
			break;
		}
		next;
		mes "[Mini Elly]";
		mes "Does the guest see anything suspicious?";
		mes "I've never seen anyone who was neither an intruder nor a guest, but I know that those masked people are suspicious.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Those people are residents here...";
		next;
		mes "[Mini Elly]";
		mes "Isn't that an interesting outfit?";
		mes "I'll remember that.";
		next;
		mes "[Spokesman]";
		mes "...No.";
		mes "We're not talking about peace with your neighbors or anything like that.";
		mes "What we need is a slightly better future.";
		npctalk "Speaker: If we don't act now, the future of Arunafeltz will be in disarray!", "Masked Person", bc_self;
		cloakoffnpcself( "Crowd#ep18c01" );
		cloakoffnpcself( "Crowd#ep18c04" );
		npctalk "What is it?", "Crowd#ep18c01", bc_self;
		next;
		mes "[Spokesman]";
		mes "If this isn't repetition, what else can you call it?";
		mes "How can we ignore this when it's clearly a sign of a divided country?";
		cloakoffnpcself( "Crowd#ep18c05" );
		next;
		mes "[Spokesman]";
		mes "Why did this happen?";
		mes "Why can't you respect the other person?";
		mes "I'm sure everyone has their own thoughts, but I'd say this.";
		cloakoffnpcself( "Crowd#ep18c02" );
		npctalk "Who is it?", "Crowd#ep18c02", bc_self;
		next;
		mes "[Spokesman]";
		mes "What does it mean to you as a citizen of this country to entrust all your values to your birth lineage and commit violence against it?";
		mes "What does it mean to you?";
		cloakoffnpcself( "Nervous Priest#e18a" );
		cloakoffnpcself( "Crowd#ep18c03" );
		npctalk "Who is it?", "Crowd#ep18c01", bc_self;
		npctalk "Drag it out!", "Crowd#ep18c02", bc_self;
		npctalk "I've never seen them before. Who on earth are they?", "Crowd#ep18c03", bc_self;
		next;
		mes "[Spokesman]";
		mes "Don't you think it's strange to get angry over such a story?";
		npctalk "Correct!", "Crowd#ep18c04", bc_self;
		npctalk "Hey, what are you, a native!", "Crowd#ep18c02", bc_self;
		npctalk "Isn't it strange that there's a need to distinguish that?", "Crowd#ep18c03", bc_self;
		next;
		mes "[Spokesman]";
		mes "I don't wish for you to fight.";
		mes "Unless we all come together, we have no future.";
		npctalk "What's your deal again!", "Crowd#ep18c02", bc_self;
		npctalk "This guy doesn't have an answer.", "Crowd#ep18c04", bc_self;
		next;
		mes "The speaker continued their speech without paying any attention to the voice from the audience.";
		next;
		mes "[Mini Elly]";
		mes "It's interesting. There are quite a few people wearing masks. It seems like even if we all have the same face like us, we can still distinguish each other.";
		npctalk "Hey, words are nice, but with people continuing to get hurt and taken to the hospital, do you think just talking will solve anything?", "Crowd#ep18c02", bc_self;
		npctalk "Whose fault is that?", "Crowd#ep18c05", bc_self;
		next;
		mes "[Mini Elly]";
		mes "Why is this person interrupting someone who is saying the right thing?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Because I believe it's not right.";
		npctalk "You see, I've seen it before. When there's a fight, is it just a battlefield, or sometimes are immigrants the only targets?", "Crowd#ep18c02", bc_self;
		npctalk "I heard it was because the indigenous kids were beaten up before and then they retaliated.", "Crowd#ep18c05", bc_self;
		next;
		mes "[Mini Elly]";
		mes "It seems like the fuss is getting louder.";
		mes "Everyone seems to think they're right and don't want to listen to what anyone else has to say.";
		npctalk "It's wrong to use violence against people in the first place!", "Crowd#ep18c05", bc_self;
		npctalk "They must have done something wrong.", "Crowd#ep18c02", bc_self;
		npctalk "I really dislike hearing the phrase 'they must have done something wrong.' What exactly does 'something wrong' mean?", "Crowd#ep18c04", bc_self;
		next;
		mes "[Mini Elly]";
		mes "The noise seems to be getting louder than before.";
		npctalk "Telling victims they have a reason to be victimized is wrong!", "Crowd#ep18c05", bc_self;
		next;
		mes "[Nervous Priest]";
		mes "What should we do... Should we intervene?";
		npctalk "This is trouble...", "Nervous Priest#e18a", bc_self;
		completequest 8681;
		setquest 8682;
		ep18_main = 2;
		close;
	}

	if (ep18_main == 2) {
		mes "The speech knows no end.";
		mes "The atmosphere around is hostile.";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: It seems like there's someone here who doesn't quite fit in.", bc_self;

		cloakoffnpcself( "Crowd#ep18c01" );
		cloakoffnpcself( "Crowd#ep18c04" );
		cloakoffnpcself( "Crowd#ep18c05" );
		cloakoffnpcself( "Crowd#ep18c02" );
		cloakoffnpcself( "Nervous Priest#e18a" );
		cloakoffnpcself( "Crowd#ep18c03" );
		close;
	}
	if (ep18_main == 3 || ep18_main == 4) {
		mes "The speech knows no end.";
		mes "The unfortunate priest is looking the other way.";

		cloakoffnpcself( "Crowd#ep18c01" );
		cloakoffnpcself( "Crowd#ep18c04" );
		cloakoffnpcself( "Crowd#ep18c05" );
		cloakoffnpcself( "Crowd#ep18c02" );
		cloakoffnpcself( "Nervous Priest#e18a" );
		cloakoffnpcself( "Crowd#ep18c03" );
		cloakoffnpcself( "Crowd#ep18c06" );
		close;
	}
	if (ep18_main == 4) {
		cloakoffnpcself( "Girl#ep18c07" );
		cloakoffnpcself( "Guard Gala#ep18c08" );
		cloakoffnpcself( "Guard Izu#ep18c09" );

		mes "[Masked Person]";
		mes "Someone here gave a speech while wearing a mask?";
		mes "Hmmm...";
		next;
		mes "[Masked Person]";
		mes "Don't get me wrong, you outsiders might not know it, but we recognize each other through this half-covered mask.";
		next;
		mes "[Masked Person]";
		mes "He's a brave man, no disguise.";
		mes "You're probably the only one who can't tell the difference between him and me.";
		close;
	}
	mes "[Masked Person]";
	mes "Freya is love.";
	close;

OnTouch:
	.@char_id = getcharid(0);
	if (ep18_main == 0) {
		if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
			mes "Where did the droopy Elly go?";
			close;
		}
		end;
	}
	if (ep18_main == 1) {
		mes "[Mini Elly]";
		mes "Please take it out of the bag and put it on top of my head.";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Please take it out of the bag and put it on top of my head.", bc_self;
		close;
	}
	if (ep18_main == 2 || ep18_main == 3) {
		cloakoffnpcself( "Crowd#ep18c01" );
		cloakoffnpcself( "Crowd#ep18c04" );
		cloakoffnpcself( "Crowd#ep18c05" );
		cloakoffnpcself( "Crowd#ep18c02" );
		cloakoffnpcself( "Nervous Priest#e18a" );
		cloakoffnpcself( "Crowd#ep18c03" );
		if (ep18_main == 3)
			cloakoffnpcself( "Crowd#ep18c06" );
		end;
	}
	if (ep18_main == 4) {
		cloakoffnpcself( "Girl#ep18c07" );
		cloakoffnpcself( "Guard Gala#ep18c08" );
		cloakoffnpcself( "Guard Izu#ep18c09" );
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8681) == 1" );
	end;
}

rachel,179,175,7	duplicate(dummy_cloaked_npc)	Crowd#ep18c01	4_F_MASK
rachel,177,178,5	duplicate(dummy_cloaked_npc)	Crowd#ep18c02	4_M_RACHMAN1
rachel,179,171,7	duplicate(dummy_cloaked_npc)	Crowd#ep18c03	4_M_RACHMAN2
rachel,181,170,0	duplicate(dummy_cloaked_npc)	Crowd#ep18c04	4_M_MIDDLE
rachel,186,173,1	duplicate(dummy_cloaked_npc)	Crowd#ep18c05	4_F_MASK
rachel,184,171,1	duplicate(dummy_cloaked_npc)	Crowd#ep18c06	4_F_MASK

rachel,187,170,3	script(CLOAKED)	Girl#ep18c07	4_F_DST_CHILD,{
	mes "[Girl]";
	mes "Oh my! Everyone is running away!";
	close;
}

rachel,187,173,3	script(CLOAKED)	Guard Gala#ep18c08	4_M_RASWORD,{
	mes "[Guard Gala]";
	mes "We'll talk about that in a minute.";
	close;
}

rachel,187,174,3	script(CLOAKED)	Guard Izu#ep18c09	4_M_RASWORD,{
	mes "[Guard Izu]";
	mes "Sigh...";
	close;
}

// Main Quest: Step 3.
rachel,183,170,3	script(CLOAKED)	Nervous Priest#e18a	4_M_TRAINEE,{
	if (checkweight(1000405,20) == 0) {
		mes "- You can't proceed with the quest because you have too many items in your possession. -";
		close;
	}
	.@char_id = getcharid(0);
	if (ep18_main == 2) {
		cloakoffnpcself( "Crowd#ep18c06" );
		mes "[Nervous Priest]";
		mes "...?";
		mes "Oh, did you hear me, I'm sorry.";
		next;
		mes "[Nervous Priest]";
		mes "Um... Well, you see. There have been a lot of these kinds of disturbances lately.";
		next;
		mes "[Nervous Priest]";
		mes "So... Is the adventurer visiting Rachel for the first time?";
		npctalk "How do I supposed to know that? You're a joke.", "Crowd#ep18c02", bc_self;
		npctalk "What? Is there anything this guy can't say?", "Crowd#ep18c04", bc_self;
		next;
		select( "No" );
		mes "[Nervous Priest]";
		mes "Well...";
		mes "I'm not sure how much you know about Arunafeltz, but...";
		mes "Are you aware of any disputes between residents of... origin...";
		next;
		select( "I've heard" );
		mes "[Nervous Priest]";
		mes "Okay, shamefully... this is an ongoing situation.";
		mes "I've seen some people doing this kind of stump speech lately...";
		next;
		mes "[Nervous Priest]";
		mes "I've had people interrupt me like that.";
		mes "But as much as I'd like to stop them, I can't, as you can see...";
		npctalk "Why are you fighting with him?", "Crowd#ep18c01", bc_self;
		npctalk "They say fighting is for the ignorant.", "Crowd#ep18c03", bc_self;
		next;
		mes "[Nervous Priest]";
		mes "...for fear of being seen as siding with the ruling class, the migrants.";
		mes "But that doesn't mean you can pretend you didn't see it...";
		next;
		mes "[Nervous Priest]";
		mes "Once again, I was nervously watching a speech by someone I had never seen before, and before I knew it,...";
		npctalk "What?", "Crowd#ep18c02", bc_self;
		npctalk "Sounds like a good fit, right?", "Crowd#ep18c03", bc_self;
		next;
		mes "[Nervous Priest]";
		mes "...";
		npctalk "This guy?", "Crowd#ep18c02", bc_self;
		npctalk "Ah, fists are flying, fists are flying. Just try hitting me.", "Crowd#ep18c03", bc_self;
		next;
		mes "[Nervous Priest]";
		mes "This is bad...";
		mes "Adventurer, have you ever...";
		next;
		select( "You want me to stop?" );
		mes "[Nervous Priest]";
		mes "..May the protection of Freya be upon us.";
		changequest 8682,8683;
		ep18_main = 3;
		close;
	}
	if (ep18_main == 3) {
		mes "What should we do?";
		next;
		select( "Please try to be quiet.", "What's wrong with you? Why are you behaving like this?", "Hey, you pot-bellied old man over there!" );
		mes "[Stuffed Crowd]";
		mes "Who are you calling an old man?";
		npctalk "What's going on here?", "Crowd#ep18c02", bc_self;
		npctalk "Oops...", "Nervous Priest#e18a", bc_self;
		next;
		select( "What is it? It's an adventurer." );
		mes "[Stuffed Crowd]";
		mes "Huh? Who wasn't an adventurer in their youth?";
		mes "How far have you been? I'm the guy who climbed to the top of the Thor volcano up there.";
		mes "Not like those fragile natives.";
		npctalk "That's nonsense, it's probably just a tourist gimmick.", "Crowd#ep18c03", bc_self;
		npctalk "There are always those who boast about such things.", "Crowd#ep18c05", bc_self;
		next;
		select( "I am at the Temple of Sessrumnir" );
		mes "[" + strcharinfo(0) + "]";
		mes "I am at the Temple of Sessrumnir, and...";
		next;
		cloakoffnpcself( "Girl#ep18c07" );
		cloakoffnpcself( "Guard Gala#ep18c08" );
		cloakoffnpcself( "Guard Izu#ep18c09" );
		mes "[Girl]";
		mes "Security officer! There he is!";
		next;
		mes "[Stuffed Crowd]";
		mes "Goodness, who called for security again?";
		npctalk "Ah, before it becomes troublesome, let's bail.", "Crowd#ep18c04", bc_self;
		npctalk "I hope I never have to see your face again.", "Crowd#ep18c05", bc_self;
		npctalk "I should probably just go home...", "Crowd#ep18c06", bc_self;
		cloakonnpcself( "Crowd#ep18c01" );
		cloakonnpcself( "Crowd#ep18c02" );
		cloakonnpcself( "Crowd#ep18c03" );
		cloakonnpcself( "Crowd#ep18c04" );
		cloakonnpcself( "Crowd#ep18c05" );
		cloakonnpcself( "Crowd#ep18c06" );
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Are you just going to let this slide like water under the bridge?", bc_self;
		next;
		mes "[Guard Gala]";
		mes "I heard there was a fight, so I came to see...";
		mes "Adventurer?";
		next;
		mes "[Nervous Priest]";
		mes "Oh, no, no, no! Adventurer here is trying to help me...";
		mes "Ah, I am Priest Junok. I have returned to Sessrumnir this time.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "" + strcharinfo(0) + ".";
		mes "Adventurer.";
		next;
		mes "[Guard Gala]";
		mes "Thank you.";
		mes "With the atmosphere being so grim these days...";
		next;
		select( "What exactly is going on?" );
		mes "[" + strcharinfo(0) + "]";
		mes "What on earth is happening?";
		mes "To think such a brawl is happening...";
		next;
		mes "The security officer and the priest paused for a moment, looked around, exchanged glances, and nodded in agreement.";
		next;
		mes "[Junok]";
		mes "Adventurer, what did you say earlier at the Temple of Sethrunir?";
		mes "Since I also have something to attend to at the temple, it seems like a good idea to have a chat over there for a while.";
		mes "Let's continue talking in front of the temple.";
		changequest 8683,8684;	// todo 8684 unlock side quest kids bas gauche and gramp bas middle. kid flower uncloed at start
		ep18_main = 4;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		navigateto("ra_temple",72,54);
		close;
	}
	if (ep18_main == 4) {
		mes "[Junok]";
		mes "I'll follow you shortly.";
		mes "See you at <NAVI>[in front of the temple]<INFO>ra_temple,72,54,0,101,0</INFO></NAVI>.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8682) == 1 || isbegin_quest(8683) == 1" );
	end;
}


ra_temple,118,30,0	script	#ep18w01	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ep18_main == 4) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Nervous Priest#e18b" );
		cloakoffnpcself( "Guard Gala#ep18c10" );
		end;
	}
	if (ep18_main == 5 || ep18_main == 6) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Nervous Priest#e18c" );
		cloakoffnpcself( "Guard Gala#ep18c12" );
		cloakoffnpcself( "Guard Izu#ep18c13" );
		cloakoffnpcself( "Guard Calsort#c14" );
		cloakoffnpcself( "Heart Hunter#ep18c15" );
		cloakoffnpcself( "Heart Hunter#ep18c16" );
		end;
	}
	end;
}

ra_temple,72,54,0	duplicate(#ep18w01)	#ep18wj1	HIDDEN_WARP_NPC,4,4
ra_temple,39,143,0	duplicate(#ep18w01)	#ep18w02_A	HIDDEN_WARP_NPC,3,3
ra_temple,20,134,0	duplicate(#ep18w01)	#ep18w02_B	HIDDEN_WARP_NPC,3,3
ra_temple,30,142,0	duplicate(#ep18w01)	#ep18w02_C	HIDDEN_WARP_NPC,3,3

// Main Quest: Step 4.
ra_temple,72,54,5	script(CLOAKED)	Nervous Priest#e18b	4_M_TRAINEE,{
	if (ep18_main == 4) {
		if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
			mes "[Mini Elly]";
			mes "Please take it out of the bag and put it on top of my head.";
			unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Please take it out of the bag and put it on top of my head.", bc_self;
			close;
		}
		mes "[Mini Elly]";
		mes "Guest, just a moment, please.";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: I'm curious about something.", bc_self;
		next;
		if (select( "Elly, what's going on?", "Because of the clues?" ) == 2) {
			mes "[Mini Elly]";
			mes "Well, that's one thing.";
			next;
		}
		mes "[Mini Elly]";
		mes "You've been here before, right?";
		npctalk "Junok: Adventurer?", "Nervous Priest#e18b", bc_self;
		next;
		select( "Yes" );
		mes "[Mini Elly]";
		mes "I've been getting some strange looks on the way here. I'm sure my guest felt it too...";
		mes "Is it a neighborhood with a lot of people with that kind of outlook?";
		next;
		select( "That wasn't the case." );
		mes "[Mini Elly]";
		mes "Could they be associated with the 'intruders'?";
		next;
		select( "Maybe." );
		mes "[Mini Elly]";
		mes "Do you think they recognized the guest?";
		npctalk "Junok: ?", "Nervous Priest#e18b", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "They doesn't.";
		next;
		mes "[Junok]";
		mes "Adventurer, why are you thinking so deeply?";
		next;
		select( "It's nothing" );
		mes "[Junok]";
		mes "Anyway... it seems like we can talk a bit more quietly here.";
		next;
		mes "[Junok]";
		mes "I've only just returned to Rachel, so I don't know, but...";
		mes "It's gotten pretty ugly compared to what it used to be.";
		next;
		mes "[Junok]";
		mes "The conflict between natives and migrants is growing.";
		mes "There are some people who are a little more... out there than usual, who are openly encouraging it.";
		next;
		mes "[Junok]";
		mes "There are also those who, if detained by security for reasons that could have led to a fight for other reasons, would label all as your natives, your immigrants... and use that as an excuse.";
		next;
		mes "[Junok]";
		mes "I am making efforts to resolve this, but...";
		next;
		mes "[Guard Gala]";
		mes "Recently, unidentified individuals have been attempting to invade the Temple of Sethrunir.";
		npctalk "Guard: Weak and uncoordinated for the purpose of breaking in.", "Guard Gala#ep18c10", bc_self;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: breaking in?", bc_self;
		next;
		mes "[Guard Gala]";
		mes "It's one thing to keep trying to break into the most secure temple in the capital city of Rachel, but...";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mini Elly: Isn't it suspicious even to the guest's ears?", bc_self;
		next;
		mes "[Guard Gala]";
		mes "With the temple currently on high alert to deal with them, there are times when we're unable to respond promptly to civilian disputes.";
		next;
		mes "[Guard Gala]";
		mes "Given the uncertainty of how far it might escalate and where such incidents might suddenly emerge, we can't rashly resort to a full-scale response...";
		mes "Expanding the security force excessively isn't a viable option either.";
		next;
		mes "[Guard Gala]";
		mes "It's a truly difficult situation... Huh?";
		cloakoffnpcself( "Rookie Guard#ep18c11" );
		npctalk "Rookie Guard: Intruders to the west of the temple!", "Rookie Guard#ep18c11", bc_self;
		next;
		mes "[Guard Gala]";
		mes "They're attacking in broad daylight again! Let's go!";
		mes "Adventurer, please come with us!";
		next;
		select( "Why would you trust me?" );
		mes "[" + strcharinfo(0) + "]";
		mes "Do you even know who I am?";
		mes "What if they're intruders?";
		next;
		mes "[Guard Gala]";
		mes "I've been guarding the temple for quite a long time.";
		mes "Would you have told this story to someone you didn't even know?";
		npctalk "Junok: Did you know each other?", "Nervous Priest#e18b", bc_self;
		npctalk "Guard Gala: Unilaterally.", "Guard Gala#ep18c10", bc_self;
		next;
		mes "[Guard Gala]";
		mes "Let's hurry!";
		changequest 8684,8685;
		ep18_main = 5;
		navigateto("ra_temple",30,142);
		cloakonnpcself( "Nervous Priest#e18b" );
		cloakonnpcself( "Guard Gala#ep18c10" );
		cloakonnpcself( "Rookie Guard#ep18c11" );

		cloakoffnpcself( "Nervous Priest#e18c" );
		cloakoffnpcself( "Guard Gala#ep18c12" );
		cloakoffnpcself( "Guard Izu#ep18c13" );
		cloakoffnpcself( "Guard Calsort#c14" );
		cloakoffnpcself( "Heart Hunter#ep18c15" );
		cloakoffnpcself( "Heart Hunter#ep18c16" );
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8684) == 1" );
	end;
}

ra_temple,75,54,3	duplicate(dummy_cloaked_npc)	Guard Gala#ep18c10	4_M_RASWORD
ra_temple,78,56,3	duplicate(dummy_cloaked_npc)	Rookie Guard#ep18c11	4_M_RASWORD

// Main Quest: Step 5.
// ra_temple,20,134,0	script	#ep18w02_1	HIDDEN_WARP_NPC,3,3,{
ra_temple,20,134,0	script	#ep18w02_1_A	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ep18_main == 5) {
		cloakoffnpcself( "Nervous Priest#e18c" );
		cloakoffnpcself( "Guard Gala#ep18c12" );
		cloakoffnpcself( "Guard Izu#ep18c13" );
		cloakoffnpcself( "Guard Calsort#c14" );
		cloakoffnpcself( "Heart Hunter#ep18c15" );
		cloakoffnpcself( "Heart Hunter#ep18c16" );
		end;
	}
	end;
}
// ra_temple,30,142,0	duplicate()	#ep18w02_1	HIDDEN_WARP_NPC,3,3,{
ra_temple,30,142,0	duplicate(#ep18w02_1_A)	#ep18w02_1_B	HIDDEN_WARP_NPC,3,3

ra_temple,30,142,1	script(CLOAKED)	Nervous Priest#e18c	4_M_TRAINEE,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	.@char_id = getcharid(0);
	if (ep18_main == 5) {
		mes "[Mini Elly]";
		mes "You look familiar, do I know you?";
		next;
		mes "[Mini Elly]";
		mes "You found me faster than I expected.";
		next;
		select( "You still don't know the situation at the mansion, do you?" );
		mes "[" + strcharinfo(0) + "]";
		mes "The ones dispatched to the mansion could be from a different team...";
		next;
		mes "[Guard Izu]";
		mes "You are surrounded! Surrender!";
		next;
		mes "[Heart Hunter]";
		mes "Hmph, calling this a surround. Just as the rumors say.";
		next;
		mes "[Guard Izu]";
		mes "What? You guys have failed and run away a whopping 14 times so far!";
		next;
		mes "[Guard Calsort]";
		mes "It's actually 15 times.";
		npctalk "Hmph.", "Heart Hunter#ep18c15", bc_self;
		next;
		mes "[Heart Hunter]";
		mes "That was our rookie scouts we sent!";
		mes "Now we've mapped out all your patrol routes. Be prepared.";
		next;
		mes "[Guard Gala]";
		mes "We'll have to change tactics.";
		next;
		mes "[Heart Hunter]";
		mes "...";
		next;
		mes "[Guard]";
		mes "...";
		next;
		mes "[Heart Hunter]";
		mes "This time it's over! The special forces are already at the temple...";
		next;
		cloakoffnpcself( "Marshal Chive#c17" );
		mes "[Marshal Chive]";
		mes "If it's the special forces, are these the ones?";
		cloakoffnpcself( "Heart Hunter#ep18c18" );
		cloakoffnpcself( "Heart Hunter#ep18c19" );
		npctalk "Ugh...", "Heart Hunter#ep18c19", bc_self;
		npctalk "Darn it.", "Heart Hunter#ep18c18", bc_self;
		next;
		mes "[Guard Gala]";
		mes "Seems like it's over.";
		next;
		mes "[Heart Hunter]";
		mes "...Next time, we'll definitely succeed!";
		cloakonnpcself( "Heart Hunter#ep18c15" );
		cloakonnpcself( "Heart Hunter#ep18c16" );
		erasequest 8685;
		setquest 8686;
		ep18_main = 6;
		next;
		// Fallthrough
	}
	if (ep18_main == 6) {
		mes "[Guard Gala]";
		mes "...";
		mes "It's strange indeed. They've been coming in so carelessly, so conspicuously, multiple times, and now they're resorting to such obvious lies and theatrics.";
		mes "Even placing bait has become suspicious at this point.";
		next;
		mes "[Guard Gala]";
		mes "Where did they send them...";
		next;
		select( "The truth is, the reason I came to Rachel was..." );
		mes "[" + strcharinfo(0) + "]";
		mes "I've come to find those who are connected to them...";
		next;
		mes "[Junok]";
		mes "I see. Was there a connection?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Not so much a connection, but rather...";
		next;
		mes "I explained that I couldn't give a full explanation of the situation, but that their purpose was to break in.";
		next;
		mes "[Guard Gala]";
		mes "Hmmm...";
		mes "Have you met Niren?";
		mes "Since it's been a while since you dropped by, you probably haven't greeted everyone yet.";
		next;
		mes "[Guard Gala]";
		mes "Not forcing you or anything, but...";
		mes "Anyway, you have to go in and see them eventually. Why not pay a visit while you're here?";
		npctalk "Guard Galla: Detain those individuals for now. They must be newcomers.", "Guard Gala#ep18c12", bc_self;
		npctalk "Guard Chive: Understood.", "Marshal Chive#c17", bc_self;
		next;
		mes "[Guard Gala]";
		mes "Let's discuss the details... over there.";
		erasequest 8686;
		setquest 8687;
		ep18_main = 7;
		getitem 1000405,30;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		navigateto("ra_temin",173,40);
		cloakonnpcself( "Nervous Priest#e18c" );
		cloakonnpcself( "Guard Gala#ep18c12" );
		cloakonnpcself( "Guard Izu#ep18c13" );
		cloakonnpcself( "Guard Calsort#c14" );
		cloakonnpcself( "Marshal Chive#c17" );
		cloakonnpcself( "Heart Hunter#ep18c18" );
		cloakonnpcself( "Heart Hunter#ep18c19" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8685) == 1 || isbegin_quest(8686) == 1" );
	end;
}

ra_temple,25,147,5	duplicate(dummy_cloaked_npc)	Guard Gala#ep18c12	4_M_RASWORD

ra_temple,29,143,1	script(CLOAKED)	Guard Izu#ep18c13	4_M_RASWORD,{
	npctalk "Guard Iz: Priest, please don't step forward!", "", bc_self;
	end;
}

ra_temple,26,145,7	script(CLOAKED)	Guard Calsort#c14	4_M_RASWORD,{
	npctalk "Guard Karlsoth: Put down your weapons!", "", bc_self;
	end;
}

ra_temple,31,147,4	duplicate(dummy_cloaked_npc)	Heart Hunter#ep18c15	G_EP17_2_HEART_HUNTER
ra_temple,29,146,4	duplicate(dummy_cloaked_npc)	Heart Hunter#ep18c16	G_EP17_2_HEART_HUNTER

ra_temple,35,141,1	duplicate(dummy_cloaked_npc)	Marshal Chive#c17	4_M_RASWORD
ra_temple,36,140,4	duplicate(dummy_cloaked_npc)	Heart Hunter#ep18c18	G_EP17_2_HEART_HUNTER
ra_temple,37,140,4	duplicate(dummy_cloaked_npc)	Heart Hunter#ep18c19	G_EP17_2_HEART_HUNTER


ra_temple,168,169,3	script	Eridanus#fp	4_M_MIDDLE1,{
	mes "[Eridanus]";
	mes "Haha, the main gate is that way, adventurer.";
	mes "You have to climb the stairs.";
	next;
	select( "What are you doing?" );
	mes "[Eridanus]";
	mes "Maintenance work, as you can see.";
	mes "...But I'm feeling a little uneasy.";
	next;
	mes "[Eridanus]";
	mes "Hmm. You're an adventurer.";
	mes "I've been hearing a strange noise coming from the holy ground recently.";
	next;
	mes "[Eridanus]";
	mes "I think it's because of the accident a while ago...";
	next;
	select( "Accident?" );
	mes "[Eridanus]";
	mes "(In a low voice)";
	mes "There was a tiny accident of mana leakage in there.";
	mes "The higher-ups are trying to hush it up, but I heard the accident caused some monster emergence.";
	next;
	mes "[Eridanus]";
	mes "My superiors dismissed it as a hogwash,";
	mes "but listen.";
	mes "...Can't you hear this strange noise coming from below?";
	next;
	mes "[Eridanus]";
	mes "If this really is a monster, it means there's a monster trapped in the holy temple, which is a big problem.";
	mes "Ugh...";
	next;
	mes "[Eridanus]";
	mes "Oh right! You can get rid of the monster for our goddess!";
	mes "I'm sure the higher-ups will reprimand me for being indulgent, but I can't turn my eyes away from a monster problem!";
	next;
	mes "[Eridanus]";
	mes "We should step up for the pope!";
	mes "So? Are you up for it?";
	next;
	mes "[Eridanus]";
	mes "There would be fanatics who went mad and became monsters.";
	mes "Kill ^4d4dffIsilla, Vanberk, and Hodremlin^000000.";
	next;
	if (select( "Accept", "Refuse." ) == 2) {
		mes "[Eridanus]";
		mes "Grr, I can't just stand by when monsters are rampaging in there...!";
		close;
	}
	mes "[Eridanus]";
	mes "Thank you for doing this.";
	mes "Please be careful.";
	mes "Take this ventilation shaft. It leads to the place where monsters are running amok.";
	close2;
	warp "ra_san01",47,47;
	end;
}

// Main Quest: Step 6.
ra_temin,173,40,3	script	Guard Dent#ep18	4_M_RASWORD,{
	if (ep18_main == 7) {
		mes "[Guard Dent]";
		mes "<FONT SIZE = 16><B>Hold on!!</FONT></B>";
		mes "<FONT SIZE = 14>Hey!</FONT>";
		mes "Can't you see the line?";
		mes "^e5555eIf you're here to see ^000000Niren^000000, then follow the order!";
		npctalk "Hold on!! Hey!", "Guard Dent#ep18", bc_self;
		next;
		mes "[Elly]";
		mes "There are really a lot of people.";
		mes "But it'll be a problem if we don't meet Niren soon.";
		cutin "ep172_beta.bmp",2;
		next;
		select( "It's said to be an urgent matter." );
		cutin "",255;
		mes "[Guard Dent]";
		mes "<FONT SIZE = 16><B>What?</FONT></B>";
		mes "<FONT SIZE = 14>I'm in a hurry too, you know?</FONT>";
		npctalk "What?", "Guard Dent#ep18", bc_self;
		next;
		mes "[Guard Dent]";
		mes "<FONT SIZE = 14><B>Ugh~</FONT></B>";
		mes "Do you even know how many times I've been dispatched to stop fights just today alone?!";
		mes "People keep fighting left and right, and it's driving us crazy too!";
		npctalk "Sigh~ If only everyone would stop fighting for once...", "Guard Dent#ep18", bc_self;
		next;
		mes "[Guard Dent]";
		mes "They don't even pretend to listen when we try to stop the fights!";
		mes "They've been fighting over whether they're ^e5555eimmigrants^000000 or ^e5555enatives^000000 for ages, but these days, it's really no joke!";
		next;
		mes "[Guard Dent]";
		mes "They start yEllyng about ^e5555ediscrimination^000000 against natives as soon as we say anything...";
		mes "Just thinking about it makes my headache.";
		npctalk "Just thinking about it makes my head ache.", "Guard Dent#ep18", bc_self;
		next;
		mes "[Security Officer Dent]";
		mes "How have you been lately? Neil?";
		erasequest 8687;
		setquest 11696;
		ep18_main = 8;
		close;
	}
	if (ep18_main == 8) {
		mes "[Guard Dent]";
		mes "How have you been lately? Neil?";
		close;
	}
	mes "[Guard Dent]";
	mes "Sigh~";
	mes "If only everyone would stop fighting for once...";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11696) == 0 && isbegin_quest(8687) == 1" );
	end;
}

// Main Quest: Step 7. and 10.
ra_temin,174,38,3	script	Guard Neil#ep18	4_DST_SOLDIER,{
	if (ep18_main == 8) {
		mes "[Guard Neil]";
		mes "<FONT SIZE = 14><B>Hey, cut it out!</FONT></B>";
		mes "But still, you're better than me.";
		mes "You know as well as I do that. I'm a native.";
		npctalk "Hey, cut it out!", "Guard Neil#ep18", bc_self;
		next;
		mes "[Guard Neil]";
		mes "Before I even start talking, they tell me to call another security guard from a native.";
		npctalk "Discrimination is no joke!", "Guard Neil#ep18", bc_self;
		next;
		mes "[Guard Neil]";
		mes "I'm tired of hearing things like 'Do you even know who I am?' when it comes to my native background.";
		mes "What do they even think the security guard is for!";
		next;
		mes "[Guard Neil]";
		mes "To be honest, things have been really strange lately.";
		mes "Even people who never caused these problems before are getting involved in fights, turning small fights into big ones.";
		next;
		mes "[Guard Neil]";
		mes "Exactly!";
		mes "It's been chaotic everywhere lately.";
		mes "Now that I think about it, I also came to the temple yesterday.";
		mes "The priest over there is the one who called me yesterday, right?";
		mes "How's the temple these days?";
		changequest 11696,11697;
		ep18_main = 9;
		close;
	}
	if (ep18_main == 9) {
		mes "[Guard Neil]";
		mes "Exactly!";
		mes "Things have been chaotic everywhere lately.";
		mes "Come to think of it, I was also at the temple yesterday.";
		mes "Was the priest there the one who called me yesterday?";
		mes "How's the temple these days?";
		close;
	}
	if (ep18_main == 10) {
		mes "[Guard Neil]";
		mes "Ah~";
		mes "Niren seems to be very busy...";
		close;
	}
	if (ep18_main == 11 || ep18_main == 12) {
		mes "[High Priestess Niren]";
		mes "Neil, did you happen to see ^e5555eMaram^000000 today?";
		cloakoffnpcself( "Niren#ep18_in1" );
		cutin "ra_gwoman.bmp",2;
		next;
		cutin "",255;
		mes "[Guard Neil]";
		mes "Maram?";
		mes "I think I saw him around the ^e5555eplaza^000000 on my way to the temple earlier...";
		next;
		mes "[Guard Neil]";
		mes "I'm not sure if he's still at the plaza, but maybe we could ask the people there to find out where Maram went?";
		next;
		mes "[High Priestess Niren]";
		mes "Hmm... I see.";
		mes "The task I asked to " + strcharinfo(0) + " earlier, my son Maram will help with that.";
		mes "He knows more about this matter than anyone else.";
		npctalk "My son Maram will help with the task I asked earlier.", "Niren#ep18_in1", bc_self;
		cutin "ra_gwoman.bmp",2;
		next;
		mes "[High Priestess Niren]";
		mes "I would introduce him myself, but as you can see, I can't leave my post right now.";
		mes "If you ask around ^e5555enear the plaza^000000, you should be able to find him.";
		if (ep18_main == 11) {
			changequest 11699,11700;
			ep18_main = 12;
		}
		close2;
		navigateto("rachel",137,135);
		cloakonnpcself( "Niren#ep18_in1" );
		cutin "",255;
		end;
	}
	mes "[Guard Neil]";
	mes "Ugh...";
	mes "Where could High Priestess Niren have gone...";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11696) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11699) == 1" );
	end;
}

// Main Quest: Step 8.
ra_temin,172,36,7	script	Priest Freya#ep18	4_F_MASK1,{
	if (ep18_main == 9) {
		mes "[Priest Freya]";
		mes "We always pray for the true faith and peace of mind of our believers.";
		next;
		mes "[Guard Neil]";
		mes "Ugh, enough with those scripted greetings~";
		mes "I saw it myself, what~";
		mes "And besides, if it's nothing serious, there's no reason for the priest to be standing here like this.";
		next;
		mes "[Guard Neil]";
		mes "Don't we need to know the situation of the people these days so that the security guards can be prepared?";
		mes "Especially since we don't know much about the situation of people coming to the temple.";
		npctalk "We don't know much about the situation of people coming to the temple.", "Guard Neil#ep18", bc_self;
		next;
		mes "[Guard Dent]";
		mes "Give us some information~";
		npctalk "Give us some information~", "Guard Dent#ep18", bc_self;
		next;
		mes "[Priest Freya]";
		mes "The temple is a place for praying for Priest Freya.";
		mes "With a calm heart...";
		next;
		mes "[Guard Neil]";
		mes "I saw it yesterday.";
		mes "<FONT SIZE = 14>Here, in the middle of people fighting each other, this priest with half a mask off...</FONT>";
		next;
		mes "[Priest Freya]";
		mes "<FONT SIZE = 16><B>Oh no!!!</FONT></B>";
		mes "<FONT SIZE = 14><B>Wait a moment!</FONT></B>";
		mes "<FONT SIZE = 14><B>Stop right there!!!</FONT></B>";
		npctalk "Oh no!!! Wait a moment!", "Priest Freya#ep18", bc_self;
		next;
		mes "[Priest Freya]";
		mes "<FONT SIZE = 10>Sigh...</FONT>";
		next;
		mes "[Priest Freya]";
		mes "Actually...";
		next;
		mes "[Priest Freya]";
		mes "It's true that there have been more people causing problems at the temple lately.";
		next;
		mes "[Priest Freya]";
		mes "Mostly, they're people venting personal grievances rather than raising official complaints, causing disturbances or shouting at the entrance of the temple.";
		next;
		mes "[High Priestess Niren]";
		mes "Hold on...";
		mes "Could we hear more details about this?";
		cloakoffnpcself( "Niren#ep18_in1" );
		npctalk "Could we hear more details about this?", "Niren#ep18_in1", bc_self;
		cutin "ra_gwoman.bmp",2;
		next;
		cutin "",255;
		mes "[Priest Freya]";
		mes "High Priestess Niren!!!!";
		npctalk "High Priestess Niren!!!!", "Priest Freya#ep18", bc_self;
		next;
		mes "[Priest Freya]";
		mes "Ah, well...";
		mes "It's been common for people with personal grievances to come to the temple and shout, and we've been trying to calm them down and send them away,";
		next;
		mes "[Priest Freya]";
		mes "But recently, there have been more incidents of physical fights among the people visiting the temple...";
		next;
		mes "[High Priestess Niren]";
		mes "Physical fights in the sacred temple...";
		mes "Was there no way to resolve their grievances through dialogue?";
		npctalk "Unbelievable...", "Niren#ep18_in1", bc_self;
		cutin "ra_gwoman.bmp",2;
		next;
		cutin "",255;
		mes "[Priest Freya]";
		mes "Some people, even though we try to reconcile their opinions, accuse us of being heretics and cause disturbances, while others ask how long we will tolerate these heretics. It's not easy for us to resolve these situations.";
		next;
		mes "[Priest Freya]";
		mes "But since they are complaining like that, it seems like they can't complain to Niren directly and take their anger out on the temple.";
		mes "Because they know how important Niren values harmony";
		next;
		mes "[High Priestess Niren]";
		mes "Sigh...";
		mes "Heretics...";
		mes "It seems that our efforts to eliminate discrimination haven't reached their hearts.";
		cutin "ra_gwoman.bmp",2;
		npctalk "Sigh...", "Niren#ep18_in1", bc_self;
		next;
		mes "[High Priestess Niren]";
		mes "Moreover, causing fights even at the temple is not an issue we can easily overlook.";
		next;
		mes "[High Priestess Niren]";
		mes "I've heard some disagreements to some extent, but... I may have been wrong to think that they would naturally resolve if we lived together, got to know each other, and understood each other.";
		next;
		cutin "",255;
		mes "[Priest Freya]";
		mes "Even though the hardliners have stepped back, it's not easy for the hearts of those who supported them to change all at once.";
		next;
		mes "[High Priestess Niren]";
		mes "Sadly, that's true.";
		mes "The time we waited for self-healing has turned into the result of festering wounds.";
		mes "Now, even dialogue for reconciliation won't be easy...";
		cutin "ra_gwoman.bmp",2;
		next;
		mes "[High Priestess Niren]";
		mes "<FONT SIZE = 10>We need some kind of catalyst...</FONT>";
		next;
		cutin "",255;
		mes "[Guard Dent]";
		mes "High Priestess Niren.";
		mes "How about this adventurer here as a catalyst?";
		mes "They're a complete outsider.";
		mes "Well... wouldn't it be possible to at least start a conversation?";
		next;
		mes "[Guard Dent]";
		mes "Anyway, they came here to see you because they have something to say to you.";
		next;
		mes "[High Priestess Niren]";
		mes "Oh my...!";
		mes "" + strcharinfo(0) + "!!!";
		mes "I didn't even notice that " + strcharinfo(0) + " was here because I've been so distracted.";
		npctalk "Oh my...!", "Niren#ep18_in1", bc_self;
		cutin "ra_gwoman.bmp",2;
		next;
		mes "[High Priestess Niren]";
		mes "As you can see, we're currently swamped with internal issues regarding ^e5555eRachel^000000.";
		mes "But what is it that you want to tell me?";
		next;
		select( "About the intruder." );
		mes "[High Priestess Niren]";
		mes "Ah...";
		mes "<FONT SIZE = 10>It's a bit difficult to discuss that here.</FONT>";
		mes "Please follow me.";
		changequest 11697,11698;
		ep18_main = 10;
		close2;
		cloakonnpcself( "Niren#ep18_in1" );
		cutin "",255;
		navigateto("ra_temin",213,87);
		end;
	}
	if (ep18_main == 10) {
		mes "[Priest Freya]";
		mes "It seems High Priestess Niren was looking for you. Did you not meet him?";
		next;
		mes "[High Priestess Niren]";
		mes "" + strcharinfo(0) + ", please follow me this way.";
		cloakoffnpcself( "Niren#ep18_in1" );
		cutin "ra_gwoman.bmp",2;
		close2;
		cloakonnpcself( "Niren#ep18_in1" );
		cutin "",255;
		navigateto("ra_temin",213,87);
		end;
	}
	mes "[Priest Freya]";
	mes "We always pray for the sincere faith and peace of mind of our believers.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11697) == 1" );
	end;
}

ra_temin,170,38,5	duplicate(dummy_cloaked_npc)	Niren#ep18_in1	4_F_MADAME
ra_temin,171,42,5	duplicate(dummy_npc)	Rachelite#ep18_in1	4_F_SHABBY
ra_temin,173,43,3	duplicate(dummy_npc)	Rachelite#ep18_in2	4_M_RACHMAN2
ra_temin,175,36,0	duplicate(dummy_npc)	Rachelite#ep18_in3	4_F_DESERT
ra_temin,170,35,1	duplicate(dummy_npc)	Rachel Resident#ep18_in4	4_M_DST_GRAND
ra_temin,174,34,3	duplicate(dummy_npc)	Rachel Resident#ep18_in5	4_M_MIDDLE
ra_temin,177,33,5	duplicate(dummy_npc)	Rachel Resident#ep18_in6	4_M_CHILD1
ra_temin,173,32,0	duplicate(dummy_npc)	Rachel Resident#ep18_in7	4_F_MASK

// Main Quest: Step 9.
ra_temin,213,87,3	script	Niren#ep18_in2	4_F_MADAME,{
	if (ep18_main == 10) {
		mes "[High Priestess Niren]";
		mes "It seems there won't be anyone listening here.";
		mes "^e5555eEspecially on sensitive matters^000000 like this,";
		mes "I apologize for having to discuss it in a place like this.";
		cutin "ra_gwoman.bmp",2;
		next;
		select( "Explain about the intruder's identity." );
		mes "[High Priestess Niren]";
		mes "<FONT SIZE = 14>That's possible!!!</FONT>";
		mes "^e5555eHeart Hunters^000000 are already targeting ^e5555eYmir's Heart fragments^000000, so we can't afford to ignore this!";
		next;
		mes "[High Priestess Niren]";
		mes "They infiltrated so easily...";
		mes "We need to immediately ^e5555eStrengthen the security near the Heart Vault^000000 and actively cooperate with ^e5555eRebEllyon^000000.";
		next;
		mes "[High Priestess Niren]";
		mes "But no matter how much we reinforce the security near the Heart Vault, with the recent tense atmosphere among the residents, it's actually an ideal situation for intruders to run rampant.";
		next;
		mes "[High Priestess Niren]";
		mes "I'll focus on reinforcing the security for now, so could I ask you, " + strcharinfo(0) + ", to ^e5555eMediate among the residents^000000?";
		next;
		mes "[High Priestess Niren]";
		mes "No...";
		mes "Rather than mediating, just listening to their stories and relaying them would be enough.";
		next;
		mes "[High Priestess Niren]";
		mes "When making a decision that I thought would make many people happy, I failed to properly consider the feelings of those who didn't support that choice.";
		next;
		mes "[High Priestess Niren]";
		mes "It's not realistic to expect everyone to get along overnight.";
		mes "Just...";
		mes "If we can understand what the grievances are...";
		mes "I believe we can start over.";
		next;
		mes "[High Priestess Niren]";
		mes "Right now, it seems like nobody is willing to listen, but like Dent said, perhaps an outsider like " + strcharinfo(0) + " might be able to help with the conversation.";
		next;
		mes "[Elly]";
		mes "Human relationships are complicated.";
		cutin "ep172_beta.bmp",2;
		next;
		mes "[High Priestess Niren]";
		mes "Haha... indeed.";
		mes "Shall we head back to the entrance of the temple for now?";
		mes "^e5555eWe need to check with the security^000000 team as well...";
		cutin "ra_gwoman.bmp",2;
		changequest 11698,11699;
		ep18_main = 11;
		close2;
		cutin "",255;
		navigateto("ra_temin",174,38);
		end;
	}
	if (ep18_main == 11) {
		mes "[High Priestess Niren]";
		mes "Right now, it seems like nobody is willing to listen, but like Dent said, perhaps an outsider like " + strcharinfo(0) + " might be able to help with the conversation.";
		cutin "ra_gwoman.bmp",2;
		next;
		mes "[High Priestess Niren]";
		mes "Shall we head back to the entrance of the temple for now?";
		mes "^e5555eWe need to check with the security^000000 team as well...";
		close2;
		cutin "",255;
		navigateto("ra_temin",174,38);
		end;
	}
	mes "[High Priestess Niren]";
	mes "I'm a bit busy right now...";
	mes "Sorry about that.";
	cutin "ra_gwoman.bmp",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11698) == 1" );
	end;
}

// Main Quest: Step 11.
rachel,137,135,7	script	Villager#ep18_Rachel1	4_M_MIDDLE,{
	if (ep18_main == 12) {
		select( "Ask if they've seen Maram." );
		mes "[Villager]";
		mes "What?";
		mes "I don't know!";
		mes "Why would I know where that guy is.";
		npctalk "What? I don't know!", "Villager#ep18_Rachel1", bc_self;
		next;
		mes "[Villager]";
		mes "Come to think of it, you!";
		mes "You're a new face around here...";
		next;
		mes "[Villager]";
		mes "Why are you looking for him?";
		mes "Is there something suspicious going on?";
		next;
		mes "[Elly]";
		mes "They're not very friendly.";
		mes "Since they don't seem like they'll tell us where Maram is, let's ask someone else.";
		cutin "ep172_beta.bmp",2;
		changequest 11700,11701;
		ep18_main = 13;
		close2;
		cutin "",255;
		navigateto("rachel",105,134);
		end;
	}
	if (ep18_main == 13) {
		mes "[Villager]";
		mes "Why are you looking for him?";
		mes "Is there something suspicious going on?";
		next;
		mes "[Elly]";
		mes "They're not very friendly.";
		mes "Since they don't seem like they'll tell us where Maram is, let's ask someone else.";
		cutin "ep172_beta.bmp",2;
		close2;
		cutin "",255;
		navigateto("rachel",105,134);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11700) == 1" );
	end;
}

// Main Quest: Step 12.
rachel,105,134,3	script	 Villager#ep18_Rachel2	4_M_RACHMAN1,{
	if (ep18_main == 13) {
		select( "Ask if they've seen Maram." );
		mes "[Villager]";
		mes "...";
		next;
		mes "[Villager]";
		mes "I'm not sure?";
		next;
		mes "[Villager]";
		mes "But who are you?";
		mes "Why are you looking for Maram?";
		next;
		mes "[Villager]";
		mes "How do you know Maram?";
		npctalk "Suspicious?", "Villager#ep18_Rachel2", bc_self;
		next;
		mes "[Elly]";
		mes "This person doesn't seem like they'll tell us where Maram is either.";
		mes "Let's ask someone else.";
		changequest 11701,11702;
		ep18_main = 14;
		close2;
		navigateto("rachel",69,117);
		end;
	}
	if (ep18_main == 14) {
		mes "[Villager]";
		mes "Who are you?";
		mes "Why are you looking for Maram?";
		next;
		mes "[Villager]";
		mes "How do you know Maram?";
		npctalk "Suspicious?", "Villager#ep18_Rachel2", bc_self;
		next;
		mes "[Elly]";
		mes "This person doesn't seem like they'll tell us where Maram is either.";
		mes "Let's ask someone else.";
		close2;
		navigateto("rachel",69,117);
		end;
	}
	mes "[Villager]";
	mes "...";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11701) == 1" );
	end;
}

// Main Quest: Step 13.
rachel,69,117,7	script	Villager#ep18_Rachel3	4_F_SHABBY,{
	if (ep18_main == 14) {
		select( "Ask if they've seen Maram." );
		mes "[Villager]";
		mes "If you're looking for Maram, they mentioned having an appointment nearby.";
		mes "They passed by here, so if you go ^e5555eUpwards^000000 from here, you might meet them.";
		erasequest 11702;
		setquest 11703;
		ep18_main = 15;
		close2;
		navigateto("rachel",70,147);
		end;
	}
	if (ep18_main == 15) {
		mes "[Villager]";
		mes "If you're looking for Maram, they mentioned having an appointment nearby.";
		mes "They passed by here, so if you go ^e5555eUpwards^000000 from here, you might meet them.";
		close2;
		navigateto("rachel",70,147);
		end;
	}
	mes "[Villager]";
	mes "These days, the atmosphere in Rachel seems a bit gloomy.";
	mes "Is there something going on?";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11702) == 1" );
	end;
}

rachel,66,135,0	script	#Flower Room Main	HIDDEN_WARP_NPC,10,10,{
	end;
OnTouch:
	// Picking Half Flowers quest
	if (isbegin_quest(5936) == 2)
		cloakoffnpcself( "Mejai#E18_7" );
	else if (isbegin_quest(5933) > 0 || isbegin_quest(5934) == 1 || isbegin_quest(5935) == 1 || isbegin_quest(5936) == 1) {
		cloakoffnpcself( "Mejai#E18_5" );
		cloakoffnpcself( "Half Flower#E18_6" );
	}
	// main quest
	if (ep18_main == 16) {
		cloakoffnpcself( "Miriam#ep18_Rachel" );
		end;
	}
	if (ep18_main == 19 || ep18_main == 20) {
		cloakoffnpcself( "Miriam#ep18_merchant2" );
		cloakoffnpcself( "Maram#ep18_merchant2" );
		end;
	}
	if (ep18_main == 21 || ep18_main == 22 || ep18_main == 26) {
		cloakoffnpcself( "Merchant#ep18_Rachel3" );
		if (ep18_main == 22)
			cloakoffnpcself( "Miriam#ep18_merchant3" );
		end;
	}
	end;
}
rachel,112,136,0	duplicate(#Flower Room Main)	Niren Great Hall	HIDDEN_WARP_NPC,5,5
rachel,115,125,0	duplicate(#Flower Room Main)	Reminder#ra01	HIDDEN_WARP_NPC,3,3

// Main Quest: Step 14. and 24.
rachel,70,147,3	script	Maram#ep18_Rachel	4_EP18_MARAM,{
	if (ep18_main < 15) {
		mes "[Maram]";
		mes "I wonder when Miriam will arrive~";
		cutin "ep18_maram_01.png",2;
		close3;
	}
	if (ep18_main == 15) {
		mes "[Maram]";
		mes "Hello.";
		mes "I believe it's our first meeting. Is this your first time in Rachel?";
		mes "May the blessings of Freyja be with you, traveler.";
		cutin "ep18_maram_01.png",2;
		next;
		select( "Deliver Niren's message." );
		mes "[Maram]";
		mes "Ah!";
		mes "If it's a task entrusted by my mother, then I must do my best to help!!!";
		npctalk "Just leave it to me.", "Maram#ep18_Rachel", bc_self;
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Elly]";
		mes "But we don't know much about the situation here. How can we mediate between people?";
		cutin "ep172_beta.bmp",2;
		next;
		mes "[Maram]";
		mes "From my perspective...";
		mes "Before mediating between people, I hope you understand the situation faced by the natives and our Gray Children.";
		cutin "ep18_maram_01.png",2;
		next;
		select( "Who are the Gray Children?" );
		mes "[Maram]";
		mes "Rachel...";
		mes "It's a city with a beautiful temple now, but it used to be a ^e5555eBarren Wasteland^000000 where the natives lived.";
		next;
		mes "[Maram]";
		mes "But one day, ^e5555eFreyja's Disciples^000000 suddenly came and pushed the natives aside, building the temple.";
		next;
		mes "[Maram]";
		mes "Some people who followed the temple to settle down here tried to live together with the newcomers, but ^e5555emany couldn't bear it and left^000000 or... some ^e5555esuffered^000000.";
		next;
		mes "[Maram]";
		mes "It would have been good if those were just things of the past... but they've ^e5555econtinued until now^000000.";
		mes "As a result, there are ^e5555echildren who have lost their place to go^000000, and I am one of them.";
		next;
		mes "[Maram]";
		mes "My adoptive mother, who felt sorry for us, adopted me. And since she became a high-ranking priestess, she has been leading the way in ^e5555eadopting us into the homes of wealthy immigrants^000000.";
		next;
		mes "[Maram]";
		mes "Some people found this unacceptable and ^e5555ediscriminated against us^000000, calling us the Gray Children. But my mother hoped that we would become bridges between immigrants and natives.";
		npctalk "Why are they like that...", "Maram#ep18_Rachel", bc_self;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 14>We couldn't fit in anywhere properly, just remained as an outsiders</FONT>.";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Maram]";
		mes "It would be better to hear such stories ^e5555edirectly from people^000000, but...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "I have an ^e5555eimportant appointment with a friend^000000 right now, so could you please allow me to meet my friend and explain the situation later?";
		next;
		mes "[Maram]";
		mes "The time we agreed to meet...";
		next;
		mes "[???]";
		mes "It's already been 5 minutes, hasn't it?";
		cutin "ep18_miriam_03.png",2;
		cloakoffnpcself( "Miriam#ep18_Rachel" );
		npctalk "It's already been 5 minutes, hasn't it?", "Miriam#ep18_Rachel", bc_self;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 14>^e5555eMiriam!</FONT>";
		mes "Since when have you been here?";
		cutin "ep18_maram_01.png",2;
		npctalk "What a surprise!", "Maram#ep18_Rachel", bc_self;
		next;
		mes "[Miriam]";
		mes "But more importantly...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Oh!";
		mes "This is my ^e5555eFriend Miriam^000000.";
		mes "Miriam, these are " + strcharinfo(0) + " and... Elly?";
		mes "They've come to see me at my mother's request.";
		cutin "ep18_maram_01.png",2;
		erasequest 11703;
		setquest 11704;
		ep18_main = 16;
		close2;
		cutin "",255;
		navigateto("rachel",62,144);
		end;
	}
	if (ep18_main == 16) {
		mes "[Maram]";
		mes "Oh!";
		mes "This is my ^e5555eFriend Miriam^000000.";
		mes "Miriam, these are " + strcharinfo(0) + " and... Elly?";
		mes "They've come to see me at my mother's request.";
		cutin "ep18_maram_01.png",2;
		close2;
		cutin "",255;
		navigateto("rachel",62,144);
		end;
	}
	if (ep18_main == 17) {
		mes "[Maram]";
		mes "I'm sorry, " + strcharinfo(0) + " but could we leave after I quickly buy something?";
		mes "It'll be quick if I just place the order.";
		npctalk "Please wait just a moment.", "Maram#ep18_Rachel", bc_self;
		cutin "ep18_maram_01.png",2;
		close2;
		cutin "",255;
		navigateto("rachel",87,122);
		end;
	}
	if (ep18_main < 25) {
		mes "[Maram]";
		mes "Buying the item isn't as easy as I thought.";
		npctalk "Ugh...", "Maram#ep18_Rachel", bc_self;
		cutin "ep18_maram_01.png",2;
		close3;
	}
	if (ep18_main == 25) {
		mes "[Maram]";
		mes "Ah!";
		mes "" + strcharinfo(0) + ", you are here.";
		mes "We've gathered the necessary personnel, although we're a bit short.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "When Miriam returns... Oh!";
		npctalk "Oh!", "Tamarin#ep18_Maram", bc_self;
		next;
		mes "[Tamarin]";
		mes "Oh!";
		mes "It's Lord Niren's son!";
		cloakoffnpcself( "Tamarin#ep18_Maram" );
		cutin "ep18_tamarin_04.png",2;
		npctalk "Oh!", "Tamarin#ep18_Maram", bc_self;
		next;
		mes "[Maram]";
		mes "Ah, you're the ones who came looking for my mother last time.";
		mes "Tamarin, Mark, and Maggi, right?";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "Maram.";
		cloakoffnpcself( "Miriam#ep18_Rachel" );
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Miriam, you're back?";
		mes "Did you find the clothes?";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "I brought some, but...";
		mes "Is this enough?";
		cutin "ep18_miriam_01.png",2;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 14>Hahaha!</FONT>";
		mes "That outfit, could it be...";
		mes "It's perfect!";
		cutin "ep18_maram_02.png",2;
		npctalk "Hahaha!", "Tamarin#ep18_Maram", bc_self;
		next;
		mes "[Maram]";
		mes "Now that we've gathered all the necessary personnel and prepared the clothes, let me explain the plan.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "We'll wear the clothes brought by Miriam and head to the top of this exotic town to move the goods.";
		mes "I can't disclose the destination yet, so just follow me.";
		next;
		mes "[Maram]";
		mes "" + strcharinfo(0) + ", please go to the ^e5555estore where you bought the items^000000 and inform them that you will be leaving soon.";
		mes "The others will change into the clothes with me and head to the entrance of the village first.";
		erasequest 11713;
		setquest 11714;
		ep18_main = 26;
		close2;
		cloakoffnpcself( "Merchant#ep18_Rachel3" );
		cloakonnpcself( "Miriam#ep18_Rachel" );
		cloakonnpcself( "Tamarin#ep18_Maram" );
		cutin "",255;
		navigateto("rachel",137,85);
		end;
	}
	if (ep18_main == 26) {
		mes "[Maram]";
		mes "Now that all the necessary personnel are gathered and the clothes are ready, let me explain the plan.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "We'll ^e5555eput on the clothes Miriam brought and pretend to be a foreign merchant^000000, then move the goods.";
		mes "I can't disclose the destination yet, so just follow me.";
		next;
		mes "[Maram]";
		mes "" + strcharinfo(0) + ", could you please go to the shop where you bought the items earlier and inform them that we'll be leaving soon?";
		mes "The others will change into the clothes with me and head to the entrance of the village first.";
		close2;
		cloakoffnpcself( "Merchant#ep18_Rachel3" );
		cloakonnpcself( "Miriam#ep18_Rachel" );
		cloakonnpcself( "Tamarin#ep18_Maram" );
		cutin "",255;
		navigateto("rachel",137,85);
		end;
	}
	if (ep18_main == 27) {
		mes "[Maram]";
		mes "" + strcharinfo(0) + ", thanks to you, it seems like things are going quite smoothly!";
		cutin "ep18_maram_01.png",2;
		close3;
	}
	mes "[Maram]";
	mes "" + strcharinfo(0) + ", thanks to you, it seems like things are going quite smoothly!";
	cutin "ep18_maram_01.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11703) == 1" );

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11713) == 1" );
	end;
}

// Main Quest: Step 15.
rachel,62,144,5	script(CLOAKED)	Miriam#ep18_Rachel	4_EP18_MIRIAM,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		unittalk getcharid(3), "" + strcharinfo(0) + " : Where did Mini Elly go?", bc_self;
		end;
	}
	if (ep18_main == 16) {
		select( "Greetings." );
		mes "[Miriam]";
		mes "Hello, how are you?";
		mes "Nice to meet you.";
		mes "" + strcharinfo(0) + ".";
		mes "I'm Miriam, a friend of Maram.";
		cutin "ep18_miriam_01.png",2;
		next;
		mes "[Maram]";
		mes "So, Miriam, here's the thing.";
		mes "My mother asked you to help " + strcharinfo(0) + ", so I might not be able to go with you this time.";
		mes "Can you go alone?";
		cutin "ep18_maram_01.png",2;
		npctalk "Sorry.", "Maram#ep18_Rachel", bc_self;
		next;
		mes "[Miriam]";
		mes "If it's something Niren asked for, then there's no helping it.";
		mes "But we can't even leave because we don't have the items.";
		cutin "ep18_miriam_03.png",2;
		npctalk "No items?", "Miriam#ep18_Rachel", bc_self;
		next;
		mes "[Maram]";
		mes "What?";
		mes "Didn't you buy them?";
		cutin "ep18_maram_03.png",2;
		npctalk "What?", "Maram#ep18_Rachel", bc_self;
		next;
		mes "[Miriam]";
		mes "Here, a check.";
		cutin "ep18_miriam_03.png",2;
		npctalk "I'll return it.", "Miriam#ep18_Rachel", bc_self;
		next;
		mes "[Maram]";
		mes "Ugh...";
		mes "You didn't make a mistake while buying the items or something, did you?";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Miriam]";
		mes "Me...?";
		cutin "ep18_miriam_03.png",2;
		npctalk "What are you implying!", "Miriam#ep18_Rachel", bc_self;
		next;
		mes "[Maram]";
		mes "You're good most of the time, but sometimes you get annoyed...";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Miriam]";
		mes "<FONT SIZE = 16><B>No, right?</FONT></B>";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Sigh...";
		mes "This is really a big problem...";
		cutin "ep18_maram_03.png",2;
		npctalk "This is bad!", "Maram#ep18_Rachel", bc_self;
		next;
		mes "[Miriam]";
		mes "Can't you buy from those merchants last time?";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Hmm...";
		mes "If I want to deal with them, ^e5555eI have to go myself^000000...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "" + strcharinfo(0) + ", I'm sorry, but would it be okay if I just quickly buy the items and then leave?";
		mes "It'll be quick because I just need to place the order.";
		npctalk "Please wait a moment.", "Maram#ep18_Rachel", bc_self;
		erasequest 11704;
		setquest 11705;
		ep18_main = 17;
		close2;
		cutin "",255;
		navigateto("rachel",87,122);
		cloakonnpcself( "Miriam#ep18_Rachel" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11704) == 1" );
	end;
}

rachel,68,146,5	duplicate(dummy_cloaked_npc)	Tamarin#ep18_Maram	4_EP18_TAMARIN

// Main Quest: Step 16.
rachel,87,122,7	script	Merchant#ep18_Rachel1	4_F_DST_GRAND,{
	if (ep18_main == 17) {
		mes "[Maram]";
		mes "Hello.";
		mes "Merchant Sreen.";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Sreen]";
		mes "<FONT SIZE = 16><B>What are you here for!</FONT></B>";
		mes "<FONT SIZE = 14><B>We have nothing to sell to you, get out from here!</FONT></B>";
		next;
		mes "[Maram]";
		mes "Please don't say that.";
		cutin "ep18_maram_02.png",2;
		next;
		cutin "",255;
		mes "[Merchant Sreen]";
		mes "<FONT SIZE = 16><B>Just because of Niren, I won't forcibly chase you away!</FONT></B>";
		next;
		mes "[Miriam]";
		mes "<FONT SIZE = 14>Stop it.</FONT>";
		mes "Let's go back.";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Miriam]";
		mes "<B>I apologize.</B>";
		mes "Merchant Sreen.";
		next;
		mes "[Maram]";
		mes "But Miriam...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "<FONT SIZE = 14><B>Let's go!</FONT></B>";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "You were so confident, but ended up looking embarrassed from the start.";
		mes "Shall we try ^e5555eanother store^000000 then?";
		cutin "ep18_maram_02.png",2;
		erasequest 11705;
		setquest 11706;
		ep18_main = 18;
		close2;
		cutin "",255;
		navigateto("rachel",107,102);
		end;
	}
	mes "[Merchant Sreen]";
	mes "Hmm... Have you come from another region?";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11705) == 1" );
	end;
}

// Main Quest: Step 17.
rachel,107,102,7	script	Merchant#ep18_Rachel2	4_M_DESERT,{
	if (ep18_main == 18) {
		mes "[Maram]";
		mes "Hello.";
		mes "Mr. Sannat.";
		mes "Is Mrs. Sannat doing well too?";
		cutin "ep18_maram_02.png",2;
		next;
		cutin "",255;
		mes "[Merchant Sannat]";
		mes "Ah...";
		mes "Okay...";
		mes "What's the matter?";
		mes "Maram.";
		next;
		mes "[Merchant Sannat]";
		mes "...";
		next;
		mes "[Maram]";
		mes "I'm interested in buying some of the items listed here.";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Sannat]";
		mes "Ah... um...";
		mes "I'm sorry, but we don't have much stock at the moment.";
		next;
		mes "[Maram]";
		mes "Then, could you please check the list and see if there are any items are available?";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Sannat]";
		mes "Um...";
		mes "I'm sorry, but the items we have here are all low in stock...";
		next;
		mes "[Maram]";
		mes "That's alright, even if they're a bit low in stock.";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Sannat]";
		mes "I'm sorry...";
		next;
		mes "[Maram]";
		mes "Then, what about bread and meat...";
		cutin "ep18_maram_03.png",2;
		next;
		cutin "",255;
		mes "[Merchant Sannat]";
		mes "Ah...";
		mes "<FONT SIZE = 10>Those are already reserved...</FONT>";
		next;
		mes "[Maram]";
		mes "...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[Maram]";
		mes "Alright... I'm sorry.";
		mes "Then, next time...";
		next;
		cutin "",255;
		mes "[Merchant Sannat]";
		mes "<FONT SIZE = 10>Okay...</FONT>";
		erasequest 11706;
		setquest 11707;
		ep18_main = 19;
		close2;
		cloakoffnpcself( "Miriam#ep18_merchant2" );
		cloakoffnpcself( "Maram#ep18_merchant2" );
		navigateto("rachel",117,104);
		end;
	}
	if (ep18_main == 19 || ep18_main == 20) {
		mes "[Merchant Sannat]";
		mes "I'm sorry...";
		next;
		mes "[Maram]";
		mes "Then, how about bread and meat...";
		cutin "ep18_maram_03.png",2;
		next;
		cutin "",255;
		mes "[Merchant Sannat]";
		mes "Ah...";
		mes "<FONT SIZE = 10>Those are already reserved...</FONT>";
		next;
		mes "[Maram]";
		mes "...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[Maram]";
		mes "Yes... I'm sorry.";
		mes "Then, next time...";
		next;
		cutin "",255;
		mes "[Merchant Sannat]";
		mes "<FONT SIZE = 10>Alright...</FONT>";
		close2;
		cloakoffnpcself( "Miriam#ep18_merchant2" );
		cloakoffnpcself( "Maram#ep18_merchant2" );
		navigateto("rachel",117,104);
		end;
	}
	if (ep18_main == 21) {
		cloakoffnpcself( "Merchant#ep18_Rachel3" );
		end;
	}
	if (ep18_main == 22) {
		cloakoffnpcself( "Miriam#ep18_merchant3" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11706) == 1" );
	end;
}

// Main Quest: Step 18.
rachel,117,104,5	script(CLOAKED)	Miriam#ep18_merchant2	4_EP18_MIRIAM,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		unittalk getcharid(3), "" + strcharinfo(0) + " : Where did Mini Elly go?", bc_self;
		end;
	}
	if (ep18_main == 19) {
		mes "[Miriam]";
		mes "Ughhh...";
		cutin "ep18_miriam_03.png",2;
		npctalk "What is this!", "Miriam#ep18_merchant2", bc_self;
		next;
		mes "[Maram]";
		mes "...";
		cutin "ep18_maram_03.png",2;
		npctalk "Calm down, Miriam.", "Maram#ep18_merchant2", bc_self;
		next;
		mes "[Miriam]";
		mes "Before confessing my embarrassing behavior, let me apologize in advance.";
		mes "I'm sorry.";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "???";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[Miriam]";
		mes "I know it's impolite, but truthfully, I overheard a bit of the conversation between " + strcharinfo(0) + " and Maram earlier.";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Miriam]";
		mes "While I cannot be certain of how Niren and " + strcharinfo(0) + " perceive the current ^e5555econflict among Rachel residents^000000, I believe what you've seen just now would have given you a clear indication.";
		next;
		mes "[Miriam]";
		mes "Saying there are no goods to sell to the ^e5555eGray Children^000000...";
		next;
		mes "[Maram]";
		mes "Miriam, it's not...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[Miriam]";
		mes "<FONT SIZE = 14>Maram, this is reality.</FONT>";
		mes "<FONT SIZE = 14>You know it as well.</FONT>";
		cutin "ep18_miriam_03.png",2;
		npctalk "This is reality.", "Miriam#ep18_merchant2", bc_self;
		next;
		mes "[Maram]";
		mes "Miriam...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[Miriam]";
		mes "...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 10>Yeah, you're right.</FONT>";
		mes "Both Mr. Sreen and Mr. Sannat were ^e5555eparticipants in selling goods^000000 until recently...";
		mes "But now, even they are reluctant to sell.";
		cutin "ep18_maram_01.png",2;
		npctalk "You're right.", "Maram#ep18_merchant2", bc_self;
		next;
		mes "[Miriam]";
		mes "...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 16><B>Yeah!!!</FONT></B>";
		mes "<FONT SIZE = 16><B>That's right!!!</FONT></B>";
		mes "<FONT SIZE = 14><B>It would be easier if we just admit it to ourselves!!!</FONT></B>";
		cutin "ep18_maram_02.png",2;
		npctalk "Forget it!", "Maram#ep18_merchant2", bc_self;
		next;
		mes "[Maram]";
		mes "Instead of constantly complaining about how things are, let's think about how to acquire the goods!";
		erasequest 11707;
		setquest 11708;
		ep18_main = 20;
		close2;
		cutin "",255;
		navigateto("rachel",119,103);
		end;
	}
	if (ep18_main == 20) {
		mes "[Miriam]";
		mes "...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 16><B>Yeah!!!</FONT></B>";
		mes "<FONT SIZE = 16><B>That's right!!!</FONT></B>";
		mes "<FONT SIZE = 14><B>It would be easier if we just admit it to ourselves!!!</FONT></B>";
		cutin "ep18_maram_02.png",2;
		npctalk "Forget it!", "Maram#ep18_merchant2", bc_self;
		next;
		mes "[Maram]";
		mes "Instead of constantly complaining about how things are, let's think about how to acquire the goods!";
		close2;
		cutin "",255;
		navigateto("rachel",119,103);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11707) == 1" );
	end;
}

// Main Quest: Step 19.
rachel,119,103,3	script(CLOAKED)	Maram#ep18_merchant2	4_EP18_MARAM,{
	if (ep18_main == 20) {
		mes "[Maram]";
		mes "This is really a big problem.";
		mes "We need to acquire the goods somehow, quickly.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "It might be better to go to another city to buy them, although it'll be tough...";
		mes "But with the situation in Rachel and <FONT SIZE = 10>also with what Mother has asked,</FONT> it's difficult to go to another city...";
		next;
		mes "[Maram]";
		mes "At times like this, it would be great if we had a passing ^e5555eTrade delegation from another country^000000.";
		mes "<FONT SIZE = 10>From another country...</FONT>";
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 16><B>!!!</FONT></B>";
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 16><B>Oh!!!!</FONT></B>";
		mes "<FONT SIZE = 16><B>That's it!!!!</FONT></B>";
		mes "<FONT SIZE = 14><B>" + strcharinfo(0) + "!!!!</FONT></B>";
		npctalk "Oh!!!! That's it!!!!", "Maram#ep18_merchant2", bc_self;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 14>I have a favor to ask!</FONT>";
		mes "^e5555eCould you please help me secretly buy the goods for Mother?";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Maram]";
		mes "^e5555eWith an outsider^000000 like " + strcharinfo(0) + ", we might be able to buy the goods!";
		next;
		select( "Reason for Buying Goods" );
		mes "[Maram]";
		mes "Ah~";
		mes "That's...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "How long do you plan to keep it a secret?";
		mes "If someone asks for such a favor without knowing the reason, it's natural to refuse.";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Right.";
		mes "I understand.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "" + strcharinfo(0) + "...";
		mes "Actually, Miriam and I are ^e5555eHelping indigenous people struggling in another area^000000.";
		mes "^e5555eProcure the supplies needed to live^000000 is one of those tasks.";
		next;
		mes "[Maram]";
		mes "Although it's called ^e5555eDiscrimination and Persecution^000000, in reality, it's almost like escaping from ^e5555eHardliners or Extremists^000000.";
		mes "For those ^e5555eFugitives^000000, the only way to survive was ^e5555eTo Hide^000000.";
		next;
		mes "[Maram]";
		mes "Living in hiding... Even if they could survive without our help... <FONT SIZE = 10>Or rather, even if they couldn't</FONT> it would have been better if they could somehow make a living, but unfortunately, that's not the case.";
		cutin "ep18_maram_03.png",2;
		npctalk "Even if they couldn't survive without our help...", "Maram#ep18_merchant2", bc_self;
		next;
		mes "[Miriam]";
		mes "I also request the same.";
		mes "<FONT SIZE = 14>To prevent children exhausted from hunger from following the same path as me...</FONT> <FONT SIZE = 10>Experiencing the same suffering</FONT>.";
		cutin "ep18_miriam_03.png",2;
		npctalk "To prevent those children from experiencing the same suffering as me.", "Miriam#ep18_merchant2", bc_self;
		next;
		switch( select( "Help them.", "Don't help them.", "Inform Niren." ) ) {
		case 1:
			mes "[Maram]";
			mes "<FONT SIZE = 14><B>Thank you!</FONT></B>";
			mes "<FONT SIZE = 14><B>Let's go right away!</FONT></B>";
			mes "Since it would be strange to go back to the shop we just visited, it's better to go to the ^e5555eShop across the square^000000.";
			npctalk "Thank you!", "Maram#ep18_merchant2", bc_self;
			npctalk "Thank you!", "Miriam#ep18_merchant2", bc_self;
			cutin "ep18_maram_02.png",2;
			erasequest 11708;
			setquest 11709;
			ep18_main = 21;
			cloakoffnpcself( "Merchant#ep18_Rachel3" );
			close2;
			cutin "",255;
			cloakonnpcself( "Miriam#ep18_merchant2" );
			cloakonnpcself( "Maram#ep18_merchant2" );
			navigateto("rachel",137,85);
			end;
		case 2:
		case 3:
			close3;
		}
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11708) == 1" );
	end;
}

// Main Quest: Step 20. and 25.
rachel,137,85,5	script(CLOAKED)	Merchant#ep18_Rachel3	4_M_MIDDLE1,{
	if (ep18_main == 21) {
		mes "[Maram]";
		mes "Hello~";
		mes "Merchant Rencia~";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Rencia]";
		mes "What's up.";
		mes "Not for you......";
		next;
		mes "[Maram]";
		mes "Actually, <FONT SIZE = 14><B>this merchant here</FONT></B> is the one.";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Rencia]";
		mes "Hmm...";
		mes "<FONT SIZE = 10>Doesn't look like a merchant?</FONT>";
		next;
		mes "[Maram]";
		mes "This person is actually a Merchant " + strcharinfo(0) + " from Maroll.";
		mes "Since they travel around trading in various places, they often encounter dangerous areas, so they're armed~";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Rencia]";
		mes "Maroll, heard of it before...";
		next;
		mes "[Maram]";
		mes "Meeting <FONT SIZE = 14>monsters</FONT> on the road would be a big problem~";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Rencia]";
		mes "<FONT SIZE = 10>That's true.</FONT>";
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 16><B>Now!</FONT></B>";
		mes "<FONT SIZE = 14><B>Here's the list of items!</FONT></B>";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Merchant Rencia]";
		mes "You're buying all this alone?";
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 16><B>Of course~</FONT></B> The other merchants are waiting elsewhere.";
		mes "<FONT SIZE = 14><B>Right?</FONT></B>";
		cutin "ep18_maram_02.png",2;
		next;
		cutin "",255;
		switch( select( "Said to be at the tavern.", "Said to be at the inn.", "Said to be at the temple." ) ) {
		case 1:
			mes "[Merchant Rencia]";
			mes "Hmm, I've heard rumors of outsiders occasionally showing up these days...";
			next;
			mes "[Merchant Rencia]";
			mes "Anyway, since it seems you didn't bring separate carriers, just let us know when you're leaving town, and we'll deliver it to the town entrance.";
			next;
			mes "[Maram]";
			mes "You really don't have to go through all this trouble...";
			cutin "ep18_maram_01.png",2;
			next;
			cutin "",255;
			mes "[Merchant Rencia]";
			mes "Huh?";
			mes "Why not?";
			next;
			mes "[Maram]";
			mes "We haven't even decided on a departure time yet...";
			cutin "ep18_maram_01.png",2;
			next;
			cutin "",255;
			mes "[Merchant Rencia]";
			mes "I'll prepare in advance, so just let me know when the time is set.";
			mes "You're buying this much, so I should provide this level of <FONT SIZE = 14><B>service</FONT></B>~!";
			next;
			mes "[Maram]";
			mes "...";
			cutin "ep18_maram_01.png",2;
			next;
			mes "[Miriam]";
			mes "Thank you for offering to deliver.";
			mes "We'll inform you once the departure time is decided.";
			mes "See you when we depart.";
			cutin "ep18_miriam_03.png",2;
			next;
			cutin "",255;
			mes "[Merchant Rencia]";
			mes "Thank you for your purchase.";
			mes "Merchant " + strcharinfo(0) + " from Maroll.";
			next;
			mes "[Miriam]";
			mes "Let's have a little chat ^e5555eover here^000000.";
			cutin "ep18_miriam_03.png",2;
			erasequest 11709;
			setquest 11710;
			ep18_main = 22;
			close2;
			cutin "",255;
			cloakoffnpcself( "Miriam#ep18_merchant3" );
			navigateto("rachel",120,79);
			end;
		case 2:
			close3;
		case 3:
			close3;
		}
	}
	if (ep18_main == 22) {
		mes "[Merchant Rencia]";
		mes "I'll prepare in advance, so just let me know when the time is set.";
		mes "You're buying this much, so I should provide this level of <FONT SIZE = 14><B>Service</FONT></B>~!";
		next;
		mes "[Maram]";
		mes "...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "Thank you for offering to deliver.";
		mes "We'll inform you once the departure time is decided.";
		mes "See you when we depart.";
		cutin "ep18_miriam_03.png",2;
		next;
		cutin "",255;
		mes "[Merchant Rencia]";
		mes "Thank you for your purchase.";
		mes "Merchant " + strcharinfo(0) + " from Maroll.";
		next;
		mes "[Miriam]";
		mes "Let's have a little chat ^e5555eover here^000000.";
		cutin "ep18_miriam_03.png",2;
		close2;
		cutin "",255;
		cloakoffnpcself( "Miriam#ep18_merchant3" );
		navigateto("rachel",120,79);
		end;
	}
	if (ep18_main == 26) {
		mes "[Merchant Rencia]";
		mes "Ah!";
		mes "So you're that merchant from earlier.";
		mes "Did you forget something?";
		next;
		select( "I'm ready to depart." );
		mes "[Merchant Rencia]";
		mes "Is that so?";
		mes "Then I'll have my employee contact you, and you can pick up the goods at the ^e5555eWestern Entrance^000000 of the town.";
		changequest 11714,11715;
		ep18_main = 27;
		close2;
		navigateto("rachel",41,132);
		end;
	}
	if (ep18_main == 27) {
		mes "[Merchant Rencia]";
		mes "Ah!";
		mes "You're the merchant from earlier.";
		mes "Did you forget something?";
		next;
		select( "I'm ready to depart." );
		mes "[Merchant Rencia]";
		mes "Is that so?";
		mes "Then I'll have my employee contact you, and you can pick up the goods at the ^e5555eWestern Entrance^000000 of the town.";
		close2;
		navigateto("rachel",41,132);
		end;
	}
	mes "[Merchant Rencia]";
	mes "Thank you for your purchase!";
	mes "If you need more items in the future, please feel free to ask~";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11709) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11714) == 1" );
	end;
}

// Main Quest: Step 21.
rachel,120,79,5	script(CLOAKED)	Miriam#ep18_merchant3	4_EP18_MIRIAM,{
	if (ep18_main == 22) {
		mes "[Miriam]";
		mes "You're not even looking this way while we talk...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Well...";
		mes "There's nothing I can do about it.";
		mes "Let's just be grateful that we were able to buy the items safely thanks to you, " + strcharinfo(0) + ".";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Miriam]";
		mes "We shouldn't let our guard down until everything is completely in our hands.";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Yeah, it seems like Rencia is a bit suspicious because we're together.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "A person who doesn't want to sell items.";
		mes "And a merchant who came with combat attire.";
		mes "Other unseen members of the merchant group.";
		mes "Even if they agree to deliver the items, they hesitate...";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Miriam]";
		mes "<FONT SIZE = 14>It's natural to be suspicious, isn't it?</FONT>";
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 14><B>Haha?!</FONT></B>";
		mes "<FONT SIZE = 14>Well, it's all lies in reality~</FONT>";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Miriam]";
		mes "<FONT SIZE = 16><B>Is this a time to laugh!!!!</FONT></B>";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Sorry sorry~";
		mes "Anyway, even though it's a service, seeing as they say it will be delivered right before departure, I think I'd like to check ^e5555edirectly at the top^000000.";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Maram]";
		mes "To ensure that you receive your goods safely, it would be a good idea to ^e5555edecorate it to look like a real merchant^000000.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "I can only see a future ^e5555ejust the three of us went and our things were taken away on the spot^000000.";
		next;
		mes "[Maram]";
		mes "Then, we'll need ^e5555epeople who will pretend to be a merchant^000000..";
		next;
		mes "[Maram]";
		mes "It's dangerous for this matter to be heard by other merchants.";
		mes "I will ^e5555ehire adventurers from outside as escort mercenaries^000000.";
		mes "Miriam, could you please find some clothes that a merchant would wear?";
		next;
		mes "[Miriam]";
		mes "Got it.";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "As for you, " + strcharinfo(0) + "...";
		mes "<FONT SIZE = 14>Hmm......</FONT>";
		mes "<FONT SIZE = 16>Well......</FONT>";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "Would you like to rest here in this shop for a moment?";
		mes "I'll order ^e5555efood^000000 for you, so when you're finished eating, please come to the ^e5555eunder the tree we first met^000000.";
		next;
		mes "[Maram]";
		mes "If you happen to meet anyone you know, please casually mention about hiring mercenaries.";
		next;
		mes "[Elly]";
		mes "It seems like our tasks keep changing.";
		cutin "ep172_beta.bmp",2;
		erasequest 11710;
		setquest 11711;
		ep18_main = 23;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#ep18_merchant3" );
		navigateto("rachel",108,73);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11710) == 1" );
	end;
}

// Main Quest: Step 22.
rachel,108,74,3	script	Dumplings#ep18_Rachel	4_POINT_RED,{
	if (ep18_main == 23) {
		select( "Eat the food Maram ordered." );
		mes "[Tamarin]";
		mes "<FONT SIZE = 16><B>Oh?</FONT></B>";
		mes "Hey, " + strcharinfo(0) + "!";
		mes "Nice to see you!";
		cloakoffnpcself( "Tamarin#ep18_Rachel_dumpling" );
		cutin "ep18_tamarin_04.png",2;
		npctalk "Nice to see you!", "Tamarin#ep18_Rachel_dumpling", bc_self;
		next;
		mes "[Tamarin]";
		mes "What a coincidence to meet here!";
		cutin "ep18_tamarin_02.png",2;
		npctalk "Nice to see you again!", "Tamarin#ep18_Rachel_dumpling", bc_self;
		next;
		mes "[Tamarin]";
		mes "Is the food here really good?";
		mes "I tried it when I visited Rachel before and it was so delicious that I always make sure to visit this place whenever I'm here.";
		next;
		mes "[Tamarin]";
		mes "<FONT SIZE = 14>Excuse me, could I have one dumpling, please?</FONT>";
		cutin "ep18_tamarin_01.png",2;
		next;
		select( "Ask what they're doing." );
		mes "[Tamarin]";
		mes "Are you eating dumplings?";
		mes "<FONT SIZE = 14><B>Oh!</FONT></B>";
		mes "<FONT SIZE = 14>Are you here in Rachel?</FONT>";
		next;
		mes "[Tamarin]";
		mes "Well... I can't go into details, but I received a request, and after meeting with Niren, I suddenly needed extra guards, so I brought Duran and Alph with me.";
		next;
		mes "[Tamarin]";
		mes "So we're waiting for them, and if we have to wait too long, we might consider moving on to the next area...";
		mes "But we'll see.";
		npctalk "We'll manage to catch up.", "Tamarin#ep18_Rachel_dumpling", bc_self;
		next;
		select( "Request assistance with the merchant disguise." );
		next;
		mes "[Tamarin]";
		mes "<FONT SIZE = 14><B>Oh!</FONT></B>";
		mes "That sounds like a good idea.";
		mes "Let's go find Mark and Maggie and head over together.";
		mes "They're probably shopping near the square.";
		cutin "ep18_tamarin_02.png",2;
		erasequest 11711;
		setquest 11712;
		ep18_main = 24;
		close2;
		cutin "",255;
		cloakonnpcself( "Tamarin#ep18_Rachel_dumpling" );
		navigateto("rachel",122,120);
		end;
	}
	if (ep18_main == 24) {
		select( "Eat the food Maram ordered." );
		mes "[Tamarin]";
		mes "Once you finish the dumplings, let's find Mark and Maggie and go together.";
		mes "They're probably shopping near the square.";
		cloakoffnpcself( "Tamarin#ep18_Rachel_dumpling" );
		cutin "ep18_tamarin_02.png",2;
		close2;
		cutin "",255;
		cloakonnpcself( "Tamarin#ep18_Rachel_dumpling" );
		navigateto("rachel",122,120);
		end;
	}
	mes "- The dumplings look delicious. -";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11711) == 1" );
	end;
}

rachel,105,73,5	duplicate(dummy_cloaked_npc)	Tamarin#ep18_Rachel_dumpling	4_EP18_TAMARIN

// Main Quest: Step 23.
rachel,122,120,3	script	Mark#ep18_Rachel	4_EP18_MARK,{
	if (ep18_main == 24) {
		mes "[Mark]";
		mes "Hello.";
		mes "" + strcharinfo(0) + ".";
		cutin "ep18_mark_01.png",2;
		next;
		mes "[Maggi]";
		mes "Oh... Hello...";
		cutin "4job_maggi_04.PNG",2;
		next;
		mes "[Tamarin]";
		mes "Mark, Maggi, are you done with your business?";
		mes "" + strcharinfo(0) + " introduced you to a job, right?";
		mes "We're going to meet the client now, so let's go together.";
		cutin "ep18_tamarin_01.png",2;
		next;
		mes "[Mark]";
		mes "Oh...";
		mes "I found the book Alph requested.";
		mes "But I couldn't find the snacks that Dew asked for.";
		cutin "ep18_mark_02.png",2;
		next;
		mes "[Tamarin]";
		mes "Then we can leave now.";
		mes "Let's head to the meeting place.";
		cutin "ep18_tamarin_02.png",2;
		changequest 11712,11713;
		ep18_main = 25;
		close2;
		cutin "",255;
		navigateto("rachel",70,147);
		end;
	}
	if (ep18_main == 25) {
		mes "[Mark]";
		mes "Oh...";
		mes "I found the book Alph requested.";
		mes "But I couldn't find the snacks that Dew asked for.";
		cutin "ep18_mark_02.png",2;
		next;
		mes "[Tamarin]";
		mes "Then we can leave now.";
		mes "Let's head to the meeting place.";
		cutin "ep18_tamarin_02.png",2;
		close2;
		cutin "",255;
		navigateto("rachel",70,147);
		end;
	}
	mes "[Mark]";
	mes "Hello";
	mes "" + strcharinfo(0) + ".";
	cutin "ep18_mark_01.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11712) == 1" );
	end;
}

rachel,121,120,5	script	Magi#ep18_rachel	4_4JOB_MAGGI,{
	mes "[Maggi]";
	mes "Oh... Hello...";
	cutin "4job_maggi_04.PNG",2;
	close3;
}

// Main Quest: Step 26.
rachel,41,132,3	script	Box#ep18_procurement4	4_WOODBOX,{
	if (ep18_main == 27) {
		mes "[Merchant Rencia]";
		mes "Then please check if the ordered items are correct...";
		next;
		select( "Hand over the check." );
		mes "[Merchant Rencia]";
		mes "Ah~";
		mes "The amount is just right!";
		mes "Thank you!";
		mes "Please use our service again next time~!";
		next;
		mes "[Maram]";
		mes "Before you leave " + strcharinfo(0) + ", let's ^e5555echeck the path outside the door^000000.";
		cutin "ep18_maram_01.png",2;
		erasequest 11715;
		setquest 11716;
		ep18_main = 28;
		close2;
		cutin "",255;
		navigateto("ra_fild11",354,235);
		end;
	}
	if (ep18_main == 28) {
		mes "[Maram]";
		mes "Before you leave " + strcharinfo(0) + ", let's ^e5555echeck the path outside the door^000000.";
		cutin "ep18_maram_01.png",2;
		close2;
		cutin "",255;
		navigateto("ra_fild11",354,235);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11715) == 1" );
	end;
}

rachel,42,133,3	duplicate(dummy_npc)	Box#ep18_procurement1	4_WOODBOX
rachel,40,133,3	duplicate(dummy_npc)	Box#ep18_procurement2	4_WOODBOX
rachel,39,132,3	duplicate(dummy_npc)	Box#ep18_procurement3	4_WOODBOX

// Main Quest: Step 27.
ra_fild11,354,235,3	script	Merchant#ep18_rachel	4_EP18_MERCHANT,{
	if (ep18_main == 28 || ep18_main == 29) {
		mes "[Disguised Maram]";
		mes "From now on, please escort " + strcharinfo(0) + " along with Miriam and Tamarin to ^e5555eOz Gorge^000000 located to the west.";
		cutin "ep18_merchant.png",2;
		next;
		mes "[Disguised Maram]";
		mes "Considering the circumstances, I don't think we can take all these people with us, so I'll send them back and follow afterwards.";
		next;
		mes "[Disguised Maram]";
		mes "To avoid revealing our destination, it's best to move to a different location and send the people back.";
		if (ep18_main == 28) {
			erasequest 11716;
			setquest 11717;
			ep18_main = 29;
		}
		close2;
		cutin "",255;
		navigateto("ra_fild10",179,176);
		end;
	}
	mes "[Merchant]";
	mes "The wind is rough...";
	cutin "ep18_merchant.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11716) == 1" );
	end;
}

// Main Quest: Step 28. (entrance npc is a part of the instance Maze of Oz)
// Main Quest: Step 29. (1@oz solo instance)

// Main Quest: Step 30.
gw_fild01,276,339,3	duplicate(dummy_cloaked_npc)	Maram#ep18_Ozexit	4_EP18_MARAM

gw_fild01,273,339,3	script	#ep18_in front of Oz Exit	4_POINT_RED,1,1,{
// trigger OnClick + OnTouch, so OnTouch commented
	// end;
// OnTouch:
	if (ep18_main == 31 || ep18_main == 32) {
		mes "[Maram]";
		mes "<FONT SIZE = 14><B>Ah!</FONT></B>";
		mes "Finally, I'm out!";
		cloakoffnpcself( "Maram#ep18_Ozexit" );
		cutin "ep18_maram_01.png",2;
		npctalk "I'm so exhausted...", "Maram#ep18_Ozexit", bc_self;
		next;
		mes "[Maram]";
		mes "If you head a bit ^e5555ewest^000000 from here, you'll find the entrance to the ^e5555evillage^000000.";
		next;
		select( "Village?" );
		mes "[Maram]";
		mes "It's more like a ^e5555ehideout^000000 where people who fled from Rachel hide rather than a village.";
		next;
		mes "[Maram]";
		mes "It's better to see it for yourself than to hear me explain.";
		if (ep18_main == 31) {
			completequest 11720;
			setquest 11721;
			ep18_main = 32;
		}
		close2;
		cutin "",255;
		cloakonnpcself( "Maram#ep18_Ozexit" );
		navigateto("gw_fild01",35,102);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11720) == 1" );
	end;
}

// Main Quest: Step 31. + 33.
gw_fild01,39,100,5	duplicate(dummy_npc)	Exotic Merchant#ep18_gw2	4_EP18_MERCHANT
gw_fild01,34,96,3	duplicate(dummy_npc)	Exotic Merchant#ep18_gw3	4_EP18_MERCHANT

gw_fild01,35,102,5	script	Maram#ep18_gw	4_EP18_MARAM,{
	if (ep18_main == 32) {
		mes "[Camper]";
		mes "Hoooray~~~";
		mes "Sometimes, camping like this isn't so bad~~~";
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 14><B>It's me! Me!</FONT></B>";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Camper]";
		mes "You?";
		mes "Do we know each other?";
		next;
		mes "[Maram]";
		mes "What are you talking about?";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "Is this the reaction when you bring an ^e5555eoutsider^000000?";
		cloakoffnpcself( "Miriam#ep18_gw" );
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "Ah...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Imril]";
		mes "Then I'll go ahead.";
		cloakoffnpcself( "Imril#ep18_gw" );
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 14><B>Oops!! Imril, wait a moment!!!!</FONT></B>";
		cutin "ep18_maram_01.png",2;
		erasequest 11721;
		setquest 11722;
		ep18_main = 33;
		close3;
	}
	if (ep18_main == 33) {
		mes "[Maram]";
		mes "Ah...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Imril]";
		mes "Then I'll go ahead.";
		cloakoffnpcself( "Imril#ep18_gw" );
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Maram]";
		mes "<FONT SIZE = 14><B>Oops!! Imril, wait a moment!!!!</FONT></B>";
		cutin "ep18_maram_01.png",2;
		close3;
	}
	if (ep18_main == 34) {
		mes "[Maram]";
		mes "Suad is late...";
		mes "What if she doesn't come at all?";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "We should return to Rachel.";
		mes "If trust is already broken, ^e5555ewe might not be able to enter the village again.^000000";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Maram]";
		mes "But if we continue like this, the people in the village will only suffer more.";
		mes "If necessary, even the help of outsiders...";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Miriam]";
		mes "You don't understand.";
		cutin "ep18_miriam_03.png",2;
		npctalk "You're both the same and different from us.", "Miriam#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[Maram]";
		mes "I also... want to understand... you all...";
		npctalk "I'm sorry...", "Maram#ep18_gw", bc_self;
		next;
		mes "[Miriam]";
		mes "...";
		cutin "ep18_miriam_03.png",2;
		npctalk "To say such things, I'm the one who should apologize.", "Miriam#ep18_gw", bc_self;
		next;
		mes "[Suad]";
		mes "To bring an outsider without any consultation...";
		mes "Consider yourself fortunate that I came to hear your last excuse, considering our past relationship.";
		cutin "ep18_suad_03.png",2;
		cloakoffnpcself( "Suad#ep18_gw" );
		next;
		mes "[Maram]";
		mes "Suad!";
		mes "Bringing an outsider to the village entrance without saying a word was reckless of me!";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Maram]";
		mes "But these individuals are trustworthy enough for Mother to entrust important tasks to them!";
		mes "There's no need to worry; nothing bad will happen!";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Suad]";
		mes "Is Niren giving you that much trust to handle tasks?";
		mes "What does it matter if you have Niren's trust?";
		cutin "ep18_suad_03.png",2;
		npctalk "It means nothing!", "Suad#ep18_gw", bc_self;
		next;
		mes "[Suad]";
		mes "<FONT SIZE = 14>Niren doesn't even know that you're delivering goods here.</FONT>";
		next;
		mes "[Maram]";
		mes "That's...";
		cutin "ep18_maram_01.png",2;
		npctalk "That's true, but...", "Maram#ep18_gw", bc_self;
		next;
		mes "[Miriam]";
		mes "Stop mocking Suad.";
		cutin "ep18_miriam_03.png",2;
		npctalk "Enough with the words!", "Miriam#ep18_gw", bc_self;
		next;
		mes "[Suad]";
		mes "I'm not mocking.";
		mes "I'm just stating the truth...";
		cutin "ep18_suad_03.png",2;
		next;
		mes "[Miriam]";
		mes "If it's the truth, ^e5555ethen in Rachel, we won't have anyone to sell goods to us anymore,^000000 and we'll all starve to death like this.";
		cutin "ep18_miriam_03.png",2;
		npctalk "That's not what we want, right?", "Miriam#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "You can buy goods from Veins or other villages, but ^e5555ethe number of people who can pass through Oz Labyrinth is decreasing.^000000";
		cutin "ep18_maram_01.png",2;
		npctalk "Even Imril was in danger.", "Maram#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "For now, ^e5555eif you have combat skills, you can pass by killing monsters,^000000 but later it might not be about combat skills; ^e5555ethe entire maze might be locked in lava.^000000";
		next;
		mes "[Maram]";
		mes "By then, the people who could help wouldn't even be able to come this far.";
		npctalk "By then, it'll be too late!", "Maram#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "And if only ^e5555emediation between the natives and immigrants requested by Mother could be achieved, we could cross Oz's Gorge again with a bridge!";
		next;
		mes "[Suad]";
		mes "Mediation? It seems like Niren is having another dreamy idea.";
		mes "Just like when the ^e5555egray children^000000 appeared.";
		cutin "ep18_suad_03.png",2;
		npctalk "It seems like Niren is having another dreamy idea.", "Suad#ep18_gw", bc_self;
		next;
		mes "[Miriam]";
		mes "But thanks to that, we were able to avoid hunger, and now we can help the children in the village.";
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Suad]";
		mes "Fine.";
		mes "Then let's give them a chance.";
		mes "Just like Niren gave us a chance.";
		cutin "ep18_suad_03.png",2;
		npctalk "I abandoned that chance and ran away...", "Suad#ep18_gw", bc_self;
		next;
		mes "[Miriam]";
		mes "What?";
		cutin "ep18_miriam_03.png",2;
		npctalk "Are you allowing this so easily?", "Miriam#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "Really?!";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Maram]";
		mes "Seriously?";
		cutin "ep18_miriam_03.png",2;
		npctalk "I honestly didn't expect much!", "Maram#ep18_gw", bc_self;
		next;
		mes "[Suad]";
		mes "What is it?";
		mes "That reaction.";
		cutin "ep18_suad_03.png",2;
		npctalk "Then go back!!", "Suad#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "No~ No~";
		mes "Thank you~";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Maram]";
		mes "Then let's go to the ^e5555eVillage^000000 before Suad changes his mind!";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "Let's discuss the details inside.";
		erasequest 11723;
		setquest 11724;
		ep18_main = 35;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#ep18_gw" );
		cloakonnpcself( "Suad#ep18_gw" );
		warp "wolfvill",152,113;
		end;
	}
	if (ep18_main == 35) {
		mes "[Maram]";
		mes "Then let's hurry and go to the ^e5555evillage^000000 before Suad changes his mind!";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "Let's discuss the details inside.";
		close2;
		cutin "",255;
		warp "wolfvill",152,113;
		end;
	}
	mes "[Maram]";
	mes "Hoo~";
	mes "Shall we try lighting a campfire or something?";
	cutin "ep18_maram_01.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11721) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11723) == 1" );
	end;
}

gw_fild01,36,103,5	duplicate(dummy_cloaked_npc)	Miriam#ep18_gw	4_EP18_MIRIAM
gw_fild01,41,103,5	duplicate(dummy_cloaked_npc)	Suad#ep18_gw	4_EP18_SUAD

// Main Quest: Step 32.
gw_fild01,37,105,5	script(CLOAKED)	Imril#ep18_gw	4_EP18_IMRIL,{
	if (ep18_main == 33) {
		mes "[Imril]";
		mes "Why.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Maram]";
		mes "Don't go alone, help us a little.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Imril]";
		mes "Not bringing outsiders is our ^e5555erule^000000.";
		mes "Even if you ask for help, there's nothing I can do.";
		cutin "ep18_imril_02.png",2;
		npctalk "What power do I have.", "Imril#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "Hmm...";
		cutin "ep18_maram_03.png",2;
		next;
		mes "[Maram]";
		mes "Then how about going to the village and calling for ^e5555eSuad^000000?";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Maram]";
		mes "Because of bringing outsiders, I don't think even I will be allowed to enter the village.";
		cutin "ep18_maram_01.png",2;
		npctalk "Help me...", "Maram#ep18_gw", bc_self;
		next;
		mes "[Imril]";
		mes "^e5555eSuad^000000 is sensitive about that.";
		mes "Should have told him in advance.";
		cutin "ep18_imril_02.png",2;
		npctalk "He's going to be really angry.", "Imril#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "This time, things got messed up before I could tell.";
		mes "You roughly know the ^e5555eRachel situation^000000 right now.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Imril]";
		mes "That's why I went to ^e5555eVeins^000000 to buy goods.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "I owe him a favor for helping earlier, so I'll ask ^e5555eSuad^000000.";
		mes "But don't expect much.";
		cutin "ep18_imril_03.png",2;
		next;
		mes "[Maram]";
		mes "Got it.";
		cutin "ep18_maram_01.png",2;
		npctalk "Thanks.", "Maram#ep18_gw", bc_self;
		next;
		mes "[Maram]";
		mes "" + strcharinfo(0) + ", to enter the village, it seems we'll need to meet and persuade ^e5555eSuad^000000.";
		mes "I'm not sure if he'll agree to meet us though...";
		next;
		mes "[Maram]";
		mes "Let's wait for ^e5555eSuad^000000 to arrive first.";
		erasequest 11722;
		setquest 11723;
		ep18_main = 34;
		close2;
		cloakonnpcself( "Imril#ep18_gw" );
		cutin "",255;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11722) == 1" );
	end;
}

// Main Quest: Step 34.
// + Quest: Investigation of Oz Labyrinth. Step 1 + 13 (final).
wolfvill,143,114,5	duplicate(dummy_cloaked_npc)	Maram#ep18_wv	4_EP18_MARAM
wolfvill,145,114,5	duplicate(dummy_cloaked_npc)	Miriam#ep18_wv	4_EP18_MIRIAM

wolfvill,143,113,5	script	Imril#ep18_wv	4_EP18_IMRIL,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 35)
		end;
	if (ep18_main == 35) {
		mes "[Imril]";
		mes "<FONT SIZE = 14>Hey!</FONT>";
		mes "You really came in, didn't you?";
		cutin "ep18_imril_03.png",2;
		next;
		mes "[Imril]";
		mes "I did convey the message.";
		mes "But ^e5555eSuad^000000 won't allow outsiders to enter the village!";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Miriam]";
		mes "That probably indicates that the village situation isn't that good.";
		cloakoffnpcself( "Miriam#ep18_wv" );
		cloakoffnpcself( "Maram#ep18_wv" );
		cutin "ep18_miriam_03.png",2;
		next;
		mes "[Elly]";
		mes "It's difficult to be self-sufficient in this environment.";
		mes "Even the trees are as hard as rocks.";
		mes "Or perhaps they're not trees, but rocks?";
		cutin "ep172_beta.bmp",2;
		next;
		mes "[Maram]";
		mes "I think the situation will improve if we can receive a little help from the outside.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Imril]";
		mes "That would be good if it happens.";
		mes "Suad may not have said it, but he must have been thinking about it for quite some time.";
		cutin "ep18_imril_01.png",2;
		npctalk "Because he's someone with a strong sense of responsibility.", "Imril#ep18_wv", bc_self;
		next;
		mes "[Maram]";
		mes "And it seems that " + strcharinfo(0) + "'s help with purchasing items was effective!";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Maram]";
		mes "^e5555eThey may say that entry is only permitted when acquiring supplies^000000, but once they realize that you're ^e5555esomeone trustworthy^000000, they might feel more at ease.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "So, shall we start by talking to ^e5555ethe villagers^000000 for now?";
		next;
		mes "[Maram]";
		mes "^e5555eListening to the stories^000000 of the people and getting to know them might reveal ^e5555ethe key to what my mother entrusted^000000.";
		// note: unlocks side quests
		completequest 11724;
		ep18_main = 36;
		getitem 1000405,50;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#ep18_wv" );
		cloakonnpcself( "Maram#ep18_wv" );
		end;
	}

	// Quest before the daily quests
	switch( isbegin_quest(11735) ) {
	case 0:
		switch( isbegin_quest(11725) ) {
		case 0:
			mes "[Imril]";
			mes "Thanks to you, I was able to safely pass through ^e5555eOz Labyrinth^000000.";
			mes "Thank you.";
			cutin "ep18_imril_03.png",2;
			next;
			mes "[Imril]";
			mes "In the past, as long as I was careful, traveling alone wasn't a big issue. But these days, it's getting harder to go alone.";
			cutin "ep18_imril_02.png",2;
			next;
			mes "[Imril]";
			mes "Considering our village's current situation, I can't always have an escort, and besides, it's risky to attract attention by traveling in a group.";
			cutin "ep18_imril_01.png",2;
			next;
			mes "[Imril]";
			mes "It would be great if we could investigate deeper into Oz Labyrinth.";
			mes "<FONT SIZE = 14>Status of the lava...</FONT>";
			mes "<FONT SIZE = 16><B>Distribution of monsters...</FONT></B>";
			cutin "ep18_imril_02.png",2;
			next;
			mes "[Imril]";
			mes "Hmm...";
			mes "Adventurer, since you're strong, would you accompany me to ^e5555eOz Labyrinth when you have some free time^000000?";
			mes "It might be a shameless request, but it's not every day that I have the chance to meet someone as strong as an adventurer like you.";
			next;
			if (select( "Depart now!", "Later..." ) == 2) {
				mes "[Imril]";
				mes "Alright!";
				mes "If you're busy right now, I guess there's nothing to be done.";
				cutin "ep18_imril_02.png",2;
				next;
				mes "[Imril]";
				mes "If you have time later, will you come with me?";
				close3;
			}
			mes "[Imril]";
			mes "Wow!";
			mes "Really?";
			mes "You're willingly accepting my request like this? I'm touched!";
			cutin "ep18_imril_03.png",2;
			next;
			mes "[Imril]";
			mes "Then let's meet at ^e5555eOz Labyrinth entrance^000000 first!";
			mes "You remember the way, right?";
			cutin "ep18_imril_02.png",2;
			setquest 11725;
			close2;
			cutin "",255;
			navigateto("oz_dun01",27,184);
			end;
		case 1:
			mes "[Imril]";
			mes "The monsters that were moving or dealing with lava are obstacles.";
			mes "It would be great if there were a way to completely eliminate them.";
			cutin "ep18_imril_01.png",2;
			close3;
		case 2:
			end;
		}
		end;
	case 1:
		mes "[Imril]";
		mes "Ah...";
		mes "My skin feels prickly.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Suad]";
		mes "Where's the fool who dared to venture deep into the maze with such attire?";
		mes "Be grateful you're not roasted alive!";
		cutin "ep18_suad_03.png",2;
		next;
		mes "[Imril]";
		mes "Anyway, no matter what you say!";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Anyway, ^e5555eOz Labyrinth situation is getting worse^000000.";
		mes "^e5555eThe lava area is expanding^000000.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "At this rate, there won't be much time left to navigate through Maze of Oz.";
		next;
		mes "[Suad]";
		mes "Indeed, if the lava has spread to that extent, we need a solution as soon as possible.";
		cutin "ep18_suad_03.png",2;
		next;
		mes "[Suad]";
		mes "For now...";
		mes "To send workers, we need to reduce the number of monsters in Maze of Oz.";
		next;
		cutin "",255;
		completequest 11735;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		mes "^4d4dffYou receive a favorable evaluation about you.^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
		}
		close;
	case 2:
		break;
	}
	mes "[Imril]";
	mes "Monsters that were moving luggage or dealing with lava are obstacles.";
	mes "It would be great if there were a way to eliminate them completely.";
	cutin "ep18_imril_01.png",2;
	next;
	mes "[Imril]";
	mes "What do you say, adventurer?";
	mes "^e5555eInterested in monster extermination^000000?";
	cutin "ep18_imril_02.png",2;
	next;

	.@menu$[0] = "Oz Labyrinth 1F [170]";
	if (checkquest(11737,PLAYTIME) == 0 || checkquest(11737,PLAYTIME) == 1)
		.@menu$[0] = "^8C8C8C" + .@menu$[0] + "(pending)^000000";
	else if (checkquest(11736,HUNTING) == 0 || checkquest(11736,HUNTING) == 1)
		.@menu$[0] = "^8C8C8C" + .@menu$[0] + "(running)^000000";

	.@menu$[1] = "Oz Labyrinth 2F [200]";
	if (BaseLevel < 200)
		.@menu$[1] = "^8C8C8C" + .@menu$[1] + " (Insufficient level)^000000";
	else if (checkquest(11739,PLAYTIME) == 0 || checkquest(11739,PLAYTIME) == 1)
		.@menu$[1] = "^8C8C8C" + .@menu$[1] + "(pending)^000000";
	else if (checkquest(11738,HUNTING) == 0 || checkquest(11738,HUNTING) == 1)
		.@menu$[1] = "^8C8C8C" + .@menu$[1] + "(running)^000000";

	switch( select( .@menu$[0], .@menu$[1], "Stop" ) ) {
	case 1:
		switch( checkquest(11737,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Imril]";
			mes "You did a great job today. Thank you.";
			mes "Will you help me tomorrow too?.";
			cutin "ep18_imril_04.png",2;
			close3;
		case 2:
			erasequest 11737;
			break;
		}
		switch( checkquest(11736,HUNTING) ) {
		case -1:
			mes "[Imril]";
			mes "^e5555ePlease defeat about 20 " + getmonsterinfo(21295, MOB_NAME) + " on the 1st floor of Oz Labyrinth.^000000";
			mes "Even if the number of monsters decreases slightly, it will greatly help travelers passing through the maze.";
			cutin "ep18_imril_03.png",2;
			next;
			if (select( "Accept.", "Stop here." ) == 2) {
				mes "[Imril]";
				mes "Why~? Are you busy?";
				cutin "ep18_imril_02.png",2;
				close3;
			}
			mes "[Imril]";
			mes "Then be careful on your way back~";
			setquest 11736;
			close3;
		case 0:
		case 1:
			mes "[Imril]";
			mes "^e5555ePlease defeat about 20 " + getmonsterinfo(21295, MOB_NAME) + " on the 1st floor of Oz Labyrinth.^000000";
			mes "Even if the number of monsters decreases slightly, it will greatly help travelers passing through the maze.";
			cutin "ep18_imril_03.png",2;
			close3;
		case 2:
			mes "[Imril]";
			mes "Are you done already?";
			mes "Because it's reliable!";
			cutin "ep18_imril_04.png",2;
			erasequest 11736;
			setquest 11737;
			add_reputation_points(REPUTATION_EP18, 30);
			if (get_reputation_points(REPUTATION_EP18) >= 5000)
				.@bonus = 1;
			if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
				ep18_main = 37;
				setquest 18082;
			}
			getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
			getexp 4364880,3000000;
			close3;
		}
	case 2:
		if (BaseLevel < 200) {
			mes "[Imril]";
			mes "This is still too dangerous, so ^ff0000wait until you're around level 200^000000 to try again!";
			close;
		}
		switch( checkquest(11739,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Imril]";
			mes "You did a great job today. Thank you.";
			mes "Will you help me tomorrow too?.";
			cutin "ep18_imril_04.png",2;
			close3;
		case 2:
			erasequest 11739;
			break;
		}
		switch( checkquest(11738,HUNTING) ) {
		case -1:
			mes "[Imril]";
			mes "^e5555eDefeat about 20^000000 " + getmonsterinfo("EP18_HOT_MOLAR", MOB_NAME) + " in the second floor of the maze of Oz.";
			mes "Because even a small reduction in the number of monsters will be of great help to the hawkers who pass through the maze.";
			cutin "ep18_imril_03.png",2;
			next;
			if (select( "Accept", "Stop" ) == 2)
				close3;
			mes "[Imril]";
			mes "Then be careful and go there~";
			setquest 11738;
			close3;
		case 0:
		case 1:
			mes "[Imril]";
			mes "^e5555eDefeat about 20^000000 " + getmonsterinfo("EP18_HOT_MOLAR", MOB_NAME) + " in the second floor of the maze of Oz.";
			mes "Because even a small reduction in the number of monsters will be of great help to the hawkers who pass through the maze.";
			cutin "ep18_imril_03.png",2;
			close3;
		case 2:
			mes "[Imril]";
			mes "Are you done already?";
			mes "Because it's reliable!";
			cutin "ep18_imril_04.png",2;
			erasequest 11738;
			setquest 11739;
			add_reputation_points(REPUTATION_EP18, 30);
			if (get_reputation_points(REPUTATION_EP18) >= 5000)
				.@bonus = 1;
			if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
				ep18_main = 37;
				setquest 18082;
			}
			getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
			getexp 11588320,3000000;
			close3;
		}
		end;
	case 3:
		mes "[Imril]";
		mes "Why~? Are you busy?";
		cutin "ep18_imril_02.png",2;
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11724) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(11725) == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11735) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(11735) == 2 && checkquest(11736,HUNTING) == -1 && (checkquest(11737,PLAYTIME) == -1 || checkquest(11737,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11735) == 2 && checkquest(11736,HUNTING) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(11735) == 2 && checkquest(11738,HUNTING) == -1 && (checkquest(11739,PLAYTIME) == -1 || checkquest(11739,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11735) == 2 && checkquest(11738,HUNTING) == 2" );
	end;
}

// Main Quest: Step 35.
wolfvill,180,179,3	script	Village Boy#category	4_M_DST_CHILD,{
	if (ep18_main == 37) {
		mes "[Village Boy]";
		mes "The tournament is about to begin.";
		mes "It's not a small-scale meeting that happens frequently; it's a tournament where trustworthy people from all around participate!";
		next;
		mes "[Village Boy]";
		mes "<NAVI>[Over there]<INFO>wolfvill,144,151,0,101,0</INFO></NAVI> is where you should go. There's a spot for the adventurer too.";
		mes "Of course, now that you're an adventurer, you're someone we can trust.";
		erasequest 18082;
		setquest 16567;
		ep18_main = 38;
		close;
	}
	if (ep18_main == 38) {
		mes "[Boy]";
		mes "The meeting is about to start! Not just any meeting, but a competition!";
		mes "<NAVI>[People]<INFO>wolfvill,144,151,0,101,0</INFO></NAVI> They're gathered together. Adventurers, go quickly!";
		close;
	}
	mes "[Boy]";
	mes "In our village, meetings are held frequently. Everyone gathers to share their opinions at those times.";
	mes "But competitions are different! It's a really important occasion!";
	next;
	mes "[Boy]";
	mes "Of course, not just anyone can participate.";
	mes "They said only trustworthy friends from the village can join.";
	next;
	mes "[Boy]";
	mes "Can adventurers participate in the event too?";
	mes "Well, that's up to you, the adventurer!";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18082) == 1" );
	end;
}

wolfvill,146,148,0	script	#contest1	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	.@char_id = getcharid(0);
	if (ep18_main == 38 || ep18_main == 39 || ep18_main == 40) {
		cloakoffnpcself( "Maram#1" );
		cloakoffnpcself( "Suad#1" );
		cloakoffnpcself( "Miriam#1" );
		cloakoffnpcself( "Radical Youth#Radical2" );
		cloakoffnpcself( "Excited Youth#Radical3" );
		cloakoffnpcself( "Radical Young Man#Radic" );
		cloakoffnpcself( "Hot-blooded Youth#Radic" );
		cloakoffnpcself( "Angry Youth#Radical5" );
		cloakoffnpcself( "Timid Old Man#Elder3" );
		cloakoffnpcself( "Timid Old Man#Elder4" );
		cloakoffnpcself( "Embarrassed Old Man#Eld" );
		cloakoffnpcself( "Passionate Old Man#Weap" );
		cloakoffnpcself( "Neutral Youth#Neutral3" );
		cloakoffnpcself( "Timid Youth#Neutral1" );
		cloakoffnpcself( "Quiet Youth#Neutral2" );
		cloakoffnpcself( "Native Old Man#Elder1" );
		cloakoffnpcself( "Passionate Youth#Radica" );
		end;
	}
	if (ep18_main == 41) {
		cloakoffnpcself( "Maram#1" );
		cloakoffnpcself( "Suad#1" );
		cloakoffnpcself( "Miriam#1" );
		cloakoffnpcself( "Radical Young Man#Radic" );
		cloakoffnpcself( "Excited Youth#Radical3" );
		end;
	}
	if (ep18_main == 42) {
		cloakoffnpcself( "Suad#1" );
		cloakoffnpcself( "Radical Young Man#Radic" );
		cloakoffnpcself( "Excited Youth#Radical3" );
		end;
	}
	if (ep18_main == 47) {
		cloakoffnpcself( "Suad#sms01" );
		npctalk ".......", "Suad#sms01", bc_self;
		end;
	}
	if (ep18_main == 49) {
		cloakoffnpcself( "Suad#sms02" );
		cloakoffnpcself( "Maram#sms02" );
		cloakoffnpcself( "Miriam#sms02" );
		cloakoffnpcself( "Lamacus#sms01" );
		cloakoffnpcself( "Kun#sms01" );
		cloakoffnpcself( "Yopi#sms01" );
		end;
	}
	end;
}

wolfvill,147,148,3	script(CLOAKED)	Radical Youth#Radical2	4_DST_SOLDIER,{
	npctalk "Let's fight! We must fight!", "Radical Youth#Radical2", bc_self;
	end;
}

wolfvill,145,144,7	script(CLOAKED)	Excited Youth#Radical3	4_EP18_GW_MAN02,{
	npctalk "Hahaha! Of course, I should win if I fight!", "Excited Youth#Radical3", bc_self;
	end;
}

wolfvill,148,144,1	script(CLOAKED)	Hot-blooded Youth#Radic	4_EP18_GW_WOMAN01,{
	npctalk "Destroy them all! Hoo! Hoo!", "Hot-blooded Youth#Radic", bc_self;
	end;
}

wolfvill,143,148,5	script(CLOAKED)	Angry Youth#Radical5	4_EP18_GW_MAN02,{
	npctalk "Burn everything!", "Angry Youth#Radical5", bc_self;
	end;
}

// Main Quest: Step 36 + 41.
wolfvill,144,151,5	script(CLOAKED)	Suad#1	4_EP18_SUAD,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		mes "[Mini Elly]";
		mes "Take it out of the bag. Please put it on top of your head.";
		close;
	}
	if (ep18_main < 38)
		end;
	if (ep18_main == 38) {
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "You're a little late. No, there's no blame.";
		mes "Come this way. The meeting will start soon.";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "Finally being invited to this place, Adventurer, you're truly amazing.";
		mes "Well, we hoped for the same treatment too.";
		next;
		cutin "ep18_miriam_02.png",2;
		mes "[Miriam]";
		mes "... Nonsense. Adventurer, don't pay too much attention to Maram's words.";
		mes "It's an important occasion. Maram, don't behave like usual.";
		next;
		cutin "ep18_maram_03.png",2;
		emotion ET_HUK, getnpcid(0,"Maram#1");
		mes "[Maram]";
		mes "No, Miriam! If you say it like that, it sounds like I did something wrong.";
		mes "Oh, okay, okay. I'll focus.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Even if it's late, Suad is the exception, and actually, there is still time before the meeting starts.";
		mes "Adventurer, how about hearing people's opinions in advance before coming?";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "I think it would be helpful for sure to participate in the meeting....";
		mes "As you listen to the story, please also organize your perspective as an adventurer.";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Sure. That's not bad either.";
		mes "If you've heard enough, go ahead and tell me. Let's start the meeting.";
		erasequest 16567;
		setquest 16568;
		setquest 16569;
		setquest 16570;
		setquest 16571;
		ep18_main = 39;
		close3;
	}
	if (ep18_main == 39) {
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Once you've heard enough, tell me. I'll start the meeting.";
		close3;
	}
	if (ep18_main == 40) {
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Did everyone listen to it? We are also ready on this end.";
		mes "Let's start the meeting in a moment.";
		next;
		mes "[Suad]";
		mes "Everyone has gathered in their seats.";
		mes "Now, let's begin the meeting.";
		npctalk "Suad: Everyone has gathered in their seats. Now, let's begin the meeting.", "Suad#1", bc_self;
		next;
		mes "[Suad]";
		mes "Today, we are going to discuss future response measures.";
		mes "The current situation of Gray Wolf Village is not very favorable.";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[Suad]";
		mes "Today, countless people are crossing the canyon of Oz and coming to the village.";
		mes "In contrast, the supply of food and necessities is critically insufficient.";
		next;
		mes "[Suad]";
		mes "We now need to decide on the direction to move forward.";
		mes "Those who have something to say, please feel free to speak.";
		next;
		cutin "",255;
		emotion ET_ANGER, getnpcid(0,"Passionate Youth#Radica");
		mes "[Radical Man]";
		mes "Let's show the spicy taste to Rachel's immigrants.";
		mes "We must destroy their temple!";
		npctalk "That's right! That's right!", "Radical Youth#Radical2", bc_self;
		npctalk "We must destroy everything!", "Hot-blooded Youth#Radic", bc_self;
		next;
		mes "[Mini Elly]";
		mes "I felt it while listening to the story earlier, but those people are particularly rough.";
		mes "It is difficult to determine from the information given so far whether their expressions are rough or whether they are inherently rough.";
		next;
		mes "[Native old man]";
		mes "But haven't we been living peacefully until now?";
		mes "Suddenly destroying the temple, what kind of nonsense is that, making such a racket out of the blue!";
		npctalk "There are things to say and things not to say!", "Timid Old Man#Elder4", bc_self;
		next;
		mes "[Radical Man]";
		mes "How long must I hide in this palm-sized piece of land?";
		mes "Didn't Mr. Suad also mention a shortage of both resources and land compared to humans?";
		next;
		emotion ET_ANGER, getnpcid(0,"Passionate Youth#Radica");
		mes "[Radical Man]";
		mes "Originally, Rachel's land belonged to our indigenous people.";
		mes "Now is the time to take it back!";
		npctalk "We need to break and seize it!", "Hot-blooded Youth#Radic", bc_self;
		npctalk "That's right, we must fight now! It's war!", "Hot-blooded Youth#Radic", bc_self;
		next;
		mes "[Native old man]";
		mes "It's easier said than done. What are you going to do without any preparation?";
		mes "And do you not know that once blood is shed, it cannot be undone?";
		npctalk "Talking about war without even trying to fight is absurd!", "Timid Old Man#Elder3", bc_self;
		next;
		mes "[Radical Man]";
		mes "Have we not shed blood until now?";
		mes "They might not have shed any either.";
		next;
		mes "[Radical Man]";
		mes "But the marginalized indigenous people, exposed to violence and enduring countless years without even receiving proper wages.";
		mes "If what they shed isn't blood and tears, what else can you call it?";
		npctalk "The only option left for us is war!", "Radical Youth#Radical2", bc_self;
		npctalk "Those who oppose are just the same oppressors!", "Angry Youth#Radical5", bc_self;
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Uh, it seems to be getting a bit overheated.";
		mes "Suad, don't you think you need to calm down a bit?";
		next;
		cutin "ep18_suad_03.png",2;
		emotion ET_THINK, getnpcid(0,"Suad#1");
		mes "[Suad]";
		mes "Let's watch a little more.";
		next;
		cutin "",255;
		mes "[Mini Elly]";
		mes "It's a bit strange.";
		mes "The rhetoric that even drives those who disagree into a corner seems like an enemy tactic.";
		next;
		mes "[Radical Man]";
		mes "we have endured enough!";
		mes "Let's show our anger to those who are captivated only by the goddess!";
		npctalk "Let's show our anger!", "Radical Youth#Radical2", bc_self;
		next;
		mes "[Elderly Man]";
		mes "They seem like fearless young ones, don't they?";
		mes "One wrong move, and they could all die! Why must they take such risks?";
		next;
		mes "[Radical Man]";
		mes "Hmph, those who have hidden here, with the sole reason of preserving their insignificant lives, wouldn't understand.";
		mes "We have already staked our lives and are prepared to wash away blood with blood!";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Did you do it? I haven't done it yet... They say you should wash blood off with cold water for it to come off well.";
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "It's not the time for jokes, Maram.";
		mes "And Suad, if you don't organize things properly, the opinions of the forest residents will completely diverge like this.";
		next;
		mes "[Miriam]";
		mes "Even if I don't feel like it, it seems like it's time to organize now.";
		next;
		cutin "ep18_suad_03.png",2;
		emotion ET_THINK, getnpcid(0,"Suad#1");
		mes "[Suad]";
		mes "Enough, this is not a place for us to blush among ourselves. It's a space to gather opinions and move forward.";
		mes "Let's stop, this is not a place we created to make our faces red among ourselves.";
		npctalk "Suad: Enough, this is not a place for us to blush among ourselves.", "Suad#1", bc_self;
		next;
		cutin "",255;
		emotion ET_ANGER, getnpcid(0,"Passionate Youth#Radica");
		mes "[Radical Man]";
		mes "So, from now on, are we going to break everything in our path?";
		mes "Surely, Mr. Suad, you're not aligning yourself with those defeatists, are you?";
		next;
		mes "[Elderly Man]";
		mes "Look here. It's not like I'll be swayed by those ignorant, noisy kids blabbering about anything in that bright blue color, right?";
		next;
		cutin "ep18_suad_02.png",2;
		mes "[Suad]";
		mes "Do you want to leave me?";
		mes "If you believed someone would listen to your side, it seems I've misunderstood you all this time.";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[Suad]";
		mes "I will listen to the perspectives and reasons from both sides.";
		mes " There is an opinion that staying here indefinitely is not possible, and another opinion that rushing without preparation will lead to disgrace. Both are not wrong.";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "So let's not think about taking sides among ourselves, but try to persuade each other.";
		mes "It means to explain how and why you should realize your opinions.";
		npctalk "...", "Embarrassed Old Man#Eld", bc_self;
		npctalk "...", "Radical Youth#Radical2", bc_self;
		next;
		cutin "",255;
		mes "[Radical Man]";
		mes "We already have the ability to arm ourselves.";
		mes "The argument that we are not prepared is meaningless.";
		next;
		cutin "ep18_maram_03.png",2;
		emotion ET_QUESTION, getnpcid(0,"Maram#1");
		mes "[Maram]";
		mes "Huh? Are you saying there's a weapons purchasing route that I don't know about?";
		mes "That's the first time I've heard of such a thing....";
		next;
		cutin "",255;
		mes "[Radical Man]";
		mes "Until when do you plan to prepare!";
		mes "Until we grow old and die? Until our next generation learns to give up completely?";
		next;
		mes "[Native old man]";
		mes "But armed conflict is dangerous. If we fail, it will be irreparable.";
		mes "Rebellion is not an option. The furthest we can support is through protests.";
		npctalk "We also agree up to the protests.", "Timid Old Man#Elder4", bc_self;
		npctalk "We oppose war, but if it's protests....", "Timid Youth#Neutral1", bc_self;
		next;
		mes "[Timid Old-man]";
		mes "Sure. We don't want to be completely driven as reactionary elements!";
		mes "If such a stigma is stamped, it will also become difficult to live here.";
		next;
		mes "[Timid Old-man]";
		mes "I just want to show that we have this much dissatisfaction.";
		mes "I'm against things like smashing everything.";
		npctalk "Yes, that's right. Let's try to keep it quiet.", "Neutral Youth#Neutral3", bc_self;
		next;
		mes "[Timid Man]";
		mes "If everyone can come together with strength, we also support the protest.";
		mes "Let's show our opinions.";
		next;
		mes "[Radical Man]";
		mes "Even if you protest, nonviolent protests that are only done through words have no effect at all!";
		mes "At the very least, you need to occupy the temple and make your protest.";
		next;
		mes "[Passionate Man]";
		mes "That's right. Just pretend you heard about it and speak loudly, okay?";
		mes "If we take away what matters most to them, they'll start paying attention to us.";
		next;
		mes "[Mini Elly]";
		mes "The peaceful gathering of opinions seemed to be taking place, but it has turned back into a violent direction again...";
		next;
		cutin "ep18_suad_01.png",2;
		emotion ET_SURPRISE, getnpcid(0,"Suad#1");
		mes "[Suad]";
		mes "Stop, have we gathered enough opinions?";
		mes "Are we in favor of carrying out the protest, occupying the temple, and making our intentions known?";
		next;
		cutin "",255;
		mes "[Radical Man]";
		mes "It's not entirely to my liking, but... that seems to be the point of agreement.";
		next;
		mes "[Native old man]";
		mes "It still looks dangerous, but we need to make our intentions known nonetheless.";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Then, to discuss the details further, we will proceed with an additional meeting.";
		mes "You understand that this meeting must be confidential, right?";
		npctalk "Suad: Let's conclude the main meeting here.", "Suad#1", bc_self;
		next;
		mes "[Suad]";
		mes "Adventurer, Marum, and Miriam. With a few exceptions, let's disband for now.";
		mes "We'll inform you of the detailed plan after the operation is finalized.";
		next;
		cutin "",255;
		mes "[Radical Man]";
		mes "Let's show something through a nonviolent protest!";
		mes "Aja, aja!";
		next;
		mes "[Elderly Man]";
		mes "id we make the right judgment?";
		mes "I don't think we should be swayed by what Adel suggests.";
		cloakonnpcself( "Passionate Youth#Radica" );
		cloakonnpcself( "Quiet Youth#Neutral2" );
		cloakonnpcself( "Timid Old Man#Elder3" );
		cloakonnpcself( "Angry Youth#Radical5" );
		next;
		mes "[Neutral Youth]";
		mes "Can we really do this?";
		mes "Nevertheless, since it's decided at the competition, we should cooperate as much as possible.";
		cloakonnpcself( "Native Old Man#Elder1" );
		cloakonnpcself( "Embarrassed Old Man#Eld" );
		cloakonnpcself( "Hot-blooded Youth#Radic" );
		cloakonnpcself( "Timid Youth#Neutral1" );
		next;
		cutin "ep18_miriam_03.png",2;
		cloakonnpcself( "Passionate Old Man#Weap" );
		cloakonnpcself( "Radical Youth#Radical2" );
		cloakonnpcself( "Neutral Youth#Neutral3" );
		cloakonnpcself( "Timid Old Man#Elder4" );
		mes "[Miriam]";
		mes "Well, adventurer. I have a brief matter to discuss, could you come over here for a moment?";
		mes "Suad, Maram. I request that you also take a moment before the meeting.";
		erasequest 16572;
		setquest 16573;
		ep18_main = 41;
		close3;
	}
	if (ep18_main == 41) {
		cutin "ep18_suad_03.png",2;
		mes "[Suad]";
		mes "What's going on? If it's a sudden decision, it might be quite hard to implement it in reality from now on.";
		next;
		cutin "ep18_miriam_03.png",2;
		mes "[Miriam]";
		mes "Important talk. Please give me a moment.";
		close3;
	}
	if (ep18_main == 42) {
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Well then, I'll count on you.";
		mes "I'll be doing what I can here as well.";
		next;
		mes "[Suad]";
		mes "Minimizing conflicts as much as possible and ensuring the protest concludes safely... that's what I mean.";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16567) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16572) == 1" );
	end;
}

// Main Quest: Step 37.
wolfvill,145,146,5	script(CLOAKED)	Passionate Youth#Radica	4_EP18_GW_MAN01,{
	if (ep18_main < 38)
		end;
	if (ep18_main == 39) {
		if (isbegin_quest(16568) == 1) {
			mes "[Radical Man]";
			mes "All temples like the Temple of Freya must be destroyed!";
			mes "Let's show who the true owner of this land is!";
			next;
			mes "[Radical Man]";
			mes "Hoou! Hoou! Hoou! Hoou!";
			mes "We need to become stronger! We need to arm ourselves!";
			next;
			mes "[Passionate Man]";
			mes "Whoo! Whoo! Let's win! Let's fight!";
			npctalk "Let's win! Let's fight!", "Radical Youth#Radical2", bc_self;
			npctalk "Let's win! Let's fight!", "Radical Young Man#Radic", bc_self;
			npctalk "Let's win! Let's fight!", "Excited Youth#Radical3", bc_self;
			npctalk "Let's win! Let's fight!", "Hot-blooded Youth#Radic", bc_self;
			npctalk "Let's win! Let's fight!", "Angry Youth#Radical5", bc_self;
			next;
			mes "[Radical Man]";
			mes "It is to protect ourselves and find a place to settle!";
			mes "It is what we need to do right now!";
			completequest 16568;
			if (isbegin_quest(16568) == 2 && isbegin_quest(16569) == 2 && isbegin_quest(16570) == 2 && isbegin_quest(16571) == 2) {
				erasequest 16568;
				erasequest 16569;
				erasequest 16570;
				erasequest 16571;
				setquest 16572;
				ep18_main = 40;
			}
			close3;
		}
	}
	mes "[Radical Man]";
	mes "Let's show who the owner of this land is!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16568) == 1" );
	end;
}

// Main Quest: Step 38.
wolfvill,139,148,5	script(CLOAKED)	Native Old Man#Elder1	4_EP18_GW_OLD01,{
	if (ep18_main < 38)
		end;
	if (ep18_main == 39) {
		if (isbegin_quest(16569) == 1) {
			mes "[Native old man]";
			mes "I have never left this village since I was born.";
			mes "I was born, raised, and grew old in this town.";
			next;
			mes "[Native old man]";
			mes "Even though I've lived like this until now, it doesn't mean there haven't been any problems.......";
			mes "But now, do I really have to resort to drastic measures?";
			next;
			mes "[Native old man]";
			mes "Could it be that young people are doing senseless things due to blood rushing to their heads?";
			mes "What if they face consequences for making a big mistake?";
			next;
			mes "[Native old man]";
			mes "No, I'm not completely opposed to the thoughts of the young people.";
			mes "But let's just not do anything too extreme.";
			completequest 16569;
			if (isbegin_quest(16568) == 2 && isbegin_quest(16569) == 2 && isbegin_quest(16570) == 2 && isbegin_quest(16571) == 2) {
				erasequest 16568;
				erasequest 16569;
				erasequest 16570;
				erasequest 16571;
				setquest 16572;
				ep18_main = 40;
				unittalk getcharid(3), "" + strcharinfo(0) + " : It seems like I've heard enough at this point. Let's go back to Suad.", bc_self;
			}
			close3;
		}
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16569) == 1" );
	end;
}

// Main Quest: Step 39.
wolfvill,150,147,1	script(CLOAKED)	Passionate Old Man#Weap	4_M_MIDDLE,{
	if (ep18_main < 38)
		end;
	if (ep18_main == 39) {
		if (isbegin_quest(16570) == 1) {
			mes "[Passionate Man]";
			mes "Oh, my! Aren't you the adventurer!";
			mes "You must be nervous before the competition, right? Have a drink here to relax.";
			next;
			select( "I'll have what you're having.", "Where then, bottoms up!" );
			mes "[Passionate Man]";
			mes "Hey, that Suad's person is quite particular. Quite meticulous.";
			mes "Is there really a need to be so rigid like that?";
			next;
			mes "[Passionate Man]";
			mes "Don't be too tense just because it's a formal setting. Just speak comfortably.";
			mes "If possible, it would be even better if the adventurer supports our opinions!";
			next;
			mes "[Passionate Man]";
			mes "What do you think our opinion is? Of course, it's war.";
			mes "Look at these weapons. We're already fully armed and prepared!";
			next;
			mes "[Passionate Man]";
			mes "Just go to Rachel and sweep away everything, whether it's a goddess or whatever.";
			mes "It shows how much we've endured and lived up to now!";
			completequest 16570;
			if (isbegin_quest(16568) == 2 && isbegin_quest(16569) == 2 && isbegin_quest(16570) == 2 && isbegin_quest(16571) == 2) {
				erasequest 16568;
				erasequest 16569;
				erasequest 16570;
				erasequest 16571;
				setquest 16572;
				ep18_main = 40;
			}
			close3;
		}
	}
	mes "[Passionate Man]";
	mes "It's a competition, a competition. A big event!";
	mes "So, let's have a drink! Cheers, cheers!";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16570) == 1" );
	end;
}

// Main Quest: Step 40.
wolfvill,152,145,1	script(CLOAKED)	Timid Youth#Neutral1	4_M_RACHMAN1,{
	if (ep18_main < 39)
		end;
	if (ep18_main == 39) {
		if (isbegin_quest(16571) == 1) {
			mes "[Timid Man]";
			mes "Oh, our opinions?";
			mes "We're still young, is it okay to say such things?";
			next;
			mes "[Timid Man]";
			mes "Well, those guys over there who scream so loudly are young, after all.";
			mes "I don't know what they believe in and why they're causing such a commotion to fight....";
			next;
			mes "[Timid Man]";
			mes "I don't think we really believe we can just beat and break all the Rachel immigrants.";
			mes "The difference in numbers alone is this significant.";
			next;
			mes "[Timid Man]";
			mes "We didn't even undergo special forces training, did we?";
			mes "But still, I don't know who started it, suddenly those guys increased like that, and it just makes me uneasy.";
			completequest 16571;
			if (isbegin_quest(16568) == 2 && isbegin_quest(16569) == 2 && isbegin_quest(16570) == 2 && isbegin_quest(16571) == 2) {
				erasequest 16568;
				erasequest 16569;
				erasequest 16570;
				erasequest 16571;
				setquest 16572;
				ep18_main = 40;
			}
			close3;
		}
	}
	mes "[Timid Man]";
	mes "We're still young, is it okay to express our opinions in such a loud manner?";
	mes "Even though it's a competition, I doubt the adults will have loud voices, right?";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16571) == 1" );
	end;
}

wolfvill,149,152,3	script(CLOAKED)	Maram#1	4_EP18_MARAM,{
	if (ep18_main == 38) {
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Hoo hoo hoo, you've finally made it to this place.";
		mes "You trusted my judgment, but you're even more impressive than I thought, adventurer.";
		next;
		mes "[Maram]";
		mes "I hope you'll actively participate in the meeting as well.";
		mes "Suad can be a bit stubborn, you know. We need someone to soften that a bit~";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "I am counting on the adventurer. I still trust my instincts, you know.";
		mes "I believe in my vision and words.";
		close3;
	}
	if (ep18_main == 39) {
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Shh! The competition is about to start soon.";
		mes "If I make noise, I'll get scolded by Miriam and Suad, you know?";
		close3;
	}
	if (ep18_main == 40) {
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Shh! The competition is about to start soon.";
		mes "If I make noise, will I get scolded by Miriam and Suad beforehand?";
		next;
		mes "[Maram]";
		mes "So, adventurer, please listen to the story of Suad with us.";
		mes "Of course, also the stories of other people.";
		close3;
	}
	end;
}

// Main Quest: Step 42.
wolfvill,148,153,3	script(CLOAKED)	Miriam#1	4_EP18_MIRIAM,{
	if (checkweight(1000405,40) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		mes "[Mini Elly]";
		mes "Take it out of the bag. Please put it on top of your head.";
		close;
	}
	if (ep18_main == 38) {
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "Ah, I knew you would come to the competition after all.";
		mes "There was no one opposed to the adventurer coming.";
		next;
		cutin "ep18_miriam_02.png",2;
		mes "[Miriam]";
		mes "You must have worked hard here, right?";
		mes "You're truly impressive.";
		close3;
	}
	if (ep18_main == 39) {
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "Well, have you heard everyone's opinions?";
		mes "How was it? Have you made up your mind, adventurer?";
		close3;
	}
	if (ep18_main == 40) {
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "Well, have you listened to people's opinions?";
		mes "What did you think? Have you made up your mind, adventurer?";
		next;
		mes "[Miriam]";
		mes "If that's the case, let's wait for the meeting to start.";
		mes "Suad will make the opening declaration.";
		close3;
	}
	if (ep18_main == 41) {
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "What's going on? It seems like a real headache to prepare for the protest.";
		mes "Ah, seriously, because I'm a man who works for a living.";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "No joke. Look at those people. Isn't it strange? The ones who were shouting about being armed earlier.";
		mes "Take a good look at their armed state. It's not for hunting.";
		next;
		cutin "",255;
		mes "[Mini Elly]";
		mes "I've analyzed it too. Those weapons are classified as anti-personnel, meaning they're for warfare.";
		mes "Even if you try to hunt with those, the prey will be torn apart, rendering them useless for that purpose.";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[Suad]";
		mes "What happened?";
		mes "It can't be easy to acquire such weaponry.";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Oh... I can confidently say that such things are not readily available in the market.";
		mes "I wonder where they came from.";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "There's a guess, but it's not certain.";
		mes "So, what if we try to identify those people and find out where they're from?";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[Suad]";
		mes "I see. Anyway, some level of armament is necessary for the protest.";
		mes "What if we offer some bait in exchange for information?";
		next;
		cutin "ep18_suad_02.png",2;
		mes "[Suad]";
		mes "And I don't necessarily oppose arming ourselves through actual transactions.";
		mes "The reason we've been oppressed so far is because we lacked strength.";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "Hey, leader. At best, we've reduced the matter from a struggle to a protest, but What should we do if we are tempted by weapons in the midst of war?";
		mes "Let's just find the source, just the source.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "It doesn't look good for Suad to take the lead here.";
		mes "How about the adventurer and Miriam take the lead in the investigation?";
		next;
		cutin "ep18_miriam_01.png",2;
		mes "[Miriam]";
		mes "I have something I want to investigate on the other side, rather than confronting those people directly.";
		mes "So, I'll leave the direct contact to you and the adventurer, Mara.";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "Alright. Shall we go to work, adventurer?";
		mes "Approach while pretending to be interested in a deal, just to be safe.";
		mes "With this map, it shouldn't be too difficult.";
		erasequest 16573;
		setquest 16574;
		ep18_main = 42;
		getitem 1000405,40;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#1" );
		cloakonnpcself( "Maram#1" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16573) == 1" );
	end;
}

// Main Quest: Step 43.
wolfvill,143,145,7	script(CLOAKED)	Radical Young Man#Radic	4_M_RASWORD,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		mes "[Mini Elly]";
		mes "Take it out of the bag. Please put it on top of your head.";
		close;
	}
	if (ep18_main == 42) {
		cloakonnpcself( "Suad#1" );
		cloakoffnpcself( "Maram#1_1" );
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Hello.";
		mes "I have something I'd like to ask for a moment. Is it okay?";
		next;
		cutin "",255;
		mes "[Radical Man]";
		mes "What's going on? I don't really have anything to say.";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "No, the weaponry is incredibly cool.";
		mes "It seems like it would be hard to find anywhere else, where did you get it?";
		next;
		cutin "",255;
		mes "[Radical Man]";
		mes "This? I bought it because someone was selling it really cheap!";
		mes "To protect myself and to show off to others... Who would dare to mess with me when I'm dressed like this?";
		next;
		mes "[Energetic Man]";
		mes "That's right, that's right! We need this level of protection to be safe even during protests!";
		mes "Do you think they'll cower in fear and bow their heads at the temple on their own?";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Can you provide some information on who sold it over here?";
		next;
		cutin "",255;
		mes "[Radical Man]";
		mes "Uh... We can't just wear it bare. We did put some effort into acquiring it, after all.";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "But they said they sold it very cheap over there, didn't they?";
		mes "It seems like they are trying to clear their inventory. In that case, should we go with what we know, or what the temple knows~";
		next;
		cutin "",255;
		mes "[Energetic Man]";
		mes "Ha, well. It wouldn't be good if weapons sold so cheaply end up in the hands of those possessed by the Goddess, right?";
		mes "Just say it. Anyway, if we're going to the protest, we have to be armed.";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "You thought well. As expected, are you wise?";
		next;
		cutin "",255;
		mes "[Radical Man]";
		mes "I understand... but we can't just meet casually.";
		mes "First, go to Rachel and meet Bearded Jack.";
		next;
		npctalk "Maram: Bearded Jack?", "Maram#1_1", bc_self;
		mes "[Radical Man]";
		mes "If you say you came to buy a fragrant dandelion, They'll guide you from there.";
		mes "I'm not one to disregard what's called security. I'm not a fool either.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Who's the fool? All I've said so far is that I'm wise.";
		mes "Thanks for the great information!";
		next;
		cutin "",255;
		mes "[Mini Elly]";
		mes "You're going back to Rachel. Let's reset the target coordinates.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Well then, adventurer. It seems like we'll have to take a bit of a detour to find the core, as expected.";
		mes "Let's go together to <NAVI>[Rachel]<INFO>rachel,75,44,0,101,0</INFO></NAVI>!";
		erasequest 16574;
		setquest 16575;
		ep18_main = 43;
		cutin "",255;
		close2;
		cutin "",255;
		cloakonnpcself();
		cloakonnpcself( "Excited Youth#Radical3" );
		cloakonnpcself( "Maram#1_1" );
		end;
	}
	mes "[Radical Man]";
	mes "Wouldn't it be safe to be armed like this?";
	mes "Even those guys with goddess syndrome like Rachels will cower and bow their heads on their own!";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16574) == 1" );
	end;
}

wolfvill,148,145,3	duplicate(dummy_cloaked_npc)	Maram#1_1	4_EP18_MARAM

wolfvill,140,150,5	script(CLOAKED)	Embarrassed Old Man#Eld	4_EP18_GW_MIDDLE01,{
	npctalk "No, why are those young people behaving like that?", "Embarrassed Old Man#Eld", bc_self;
	end;
}

wolfvill,138,145,7	script(CLOAKED)	Timid Old Man#Elder3	4_EP18_GW_MIDDLE02,{
	npctalk "That seems a bit off, tsk tsk.", "Timid Old Man#Elder3", bc_self;
	end;
}

wolfvill,141,146,7	script(CLOAKED)	Timid Old Man#Elder4	4_M_DST_GRAND,{
	npctalk "It would be nice if you would listen to our opinions too...", "Timid Old Man#Elder4", bc_self;
	end;
}

wolfvill,154,146,1	script(CLOAKED)	Quiet Youth#Neutral2	4_EP18_GW_MAN02,{
	npctalk "...", "Quiet Youth#Neutral2", bc_self;
	end;
}

wolfvill,151,150,1	script(CLOAKED)	Neutral Youth#Neutral3	4_EP18_GW_MAN01,{
	npctalk "I don't agree with any opinions. Everyone is too naive.", "Neutral Youth#Neutral3", bc_self;
	end;
}

// Main Quest: Step 44.
rachel,72,42,3	duplicate(dummy_cloaked_npc)	Maram#1_2	4_EP18_MARAM

rachel,75,44,3	script	Bearded Jack#armsman_rachel	4_M_MIDDLE1,{
	if (ep18_main == 43) {
		cloakoffnpcself( "Maram#1_2" );
		mes "[Mini Elly]";
		mes "You have arrived. The business of 'Bearded Jack' is a hardware store.";
		next;
		mes "[Bearded Jack]";
		mes "Welcome. How can I help you?";
		next;
		mes "[Bearded Jack]";
		mes "When it comes to kitchen knives and pots, there's no place like our shop in Rachel.";
		mes "Take your time looking around.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Uh, we came looking for something a little different.";
		mes "What was that, Adventurer?";
		next;
		cutin "",255;
		switch( select( "Smelly Sock", "Smelly Dandelion", "Scented Sock", "Scented Dandelion" ) ) {
		case 1:
			mes "[Mini Elly]";
			mes "Hmm, I don't think that was it.";
			next;
			mes "[Bearded Jack]";
			mes "Why would you find such dirty things in our store?";
			close2;
			cloakonnpcself( "Maram#1_2" );
			end;
		case 2:
			mes "[Bearded Jack]";
			mes "Well, look who's finally arrived.";
			mes "Did you come to check out the place where the fragrant dandelions bloom?";
			next;
			mes "[Bearded Jack]";
			mes "Go to Veins. You'll find me there.";
			mes "In a corner of Veins Village, there's a weapon merchant that not many people know about.";
			next;
			mes "[Bearded Jack]";
			mes "If anyone asks who recommended you, just say it's Jack's recommendation, of course.";
			mes "They're probably just doing business for a short time so they can hit and run quickly. so if you're too late, they won't deal with you";
			next;
			mes "[Bearded Jack]";
			mes "Well, after connecting to <NAVI>[Weapon Shop]<INFO>veins,293,282,0,101,0</INFO></NAVI> it's not under my jurisdiction anymore.";
			mes "Well then, give it your best shot.";
			erasequest 16575;
			setquest 16576;
			ep18_main = 44;
			close2;
			cloakonnpcself( "Maram#1_2" );
			end;
		case 3:
			mes "[Mini Elly]";
			mes "Um, I don't think it was.";
			next;
			mes "[Bearded Jack]";
			mes "No, our store is a hardware store, not a laundry.";
			close2;
			cloakonnpcself( "Maram#1_2" );
			end;
		case 4:
			end;
		}
	}
	if (ep18_main == 44) {
		mes "[Bearded Jack]";
		mes "Well, <NAVI>[Weapon Merchant]<INFO>veins,293,282,0,101,0</INFO></NAVI> is not under my jurisdiction since you linked it.";
		mes "Then do your best.";
		cloakonnpcself( "Maram#1_2" );
		close;
	}
	mes "[Bearded Jack]";
	mes "Welcome. This is 'Bearded Jack' hardware store.";
	mes "We sell very well-made kitchen knives and pots.";
	next;
	mes "[Bearded Jack]";
	mes "My name? Of course, it's Bearded Jack.";
	mes "This store is all mine!";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16575) == 1" );
	end;
}

// Main Quest: Step 45.
veins,289,281,7	duplicate(dummy_cloaked_npc)	Maram#1_3	4_EP18_MARAM

veins,293,282,3	script	Dandelion#weapons_bains	4_M_DESERT,{
	if (ep18_main == 44) {
		mes "[Maram]";
		mes "Hello~";
		mes "Are you in business?";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "We're closed.";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "Don't be like that. I came here because Jack introduced me, saying there are smelly dandelions here.";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "Who is it, Dandelion, who is it!";
		mes "hich jerk came up with such a strange password!";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Ah, your name is... So, it was Dandelion.";
		mes "For something related to security, it's quite simple, isn't it.";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "Anyway, what's going on!";
		mes "If you came to buy weapons, just take what you need without hesitation.";
		next;
		select( "I came here to buy some weapons..." );
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "Right? What the adventurer is saying is correct.";
		mes "Rather than coming to buy one or two weapons, it's more like a bulk purchase, shall we say?";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "Bulk purchase? How much are you planning to buy?";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Well, roughly this much?";
		mes "Is this amount acceptable at this store?";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "Gulp, th-that much? Are you suggesting war?";
		mes "W-well, if you give me a little time, it seems possible.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "What should we do? We don't have much time.";
		mes "I hope we can find it as soon as possible.";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "Call your schedule. I'll try to accommodate as soon as possible.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "That's good too, but how about connecting us directly with the supplier?";
		mes "We'll take care of the intermediary fees without any inconvenience.";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "Hey! Who's revealing the background while doing business!";
		mes "Enough, go back, go back!";
		next;
		cutin "ep18_maram_02.png",2;
		mes "[Maram]";
		mes "Hey, who are you kidding? I already know everything. Selling this at such a special price is just a flashy business strategy, right?";
		mes "Anyway, we're not going to have a long-term business relationship, are we? ";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "So, I'm just asking for a bit of information from your end.";
		mes "Whether it's our urgent situation or the guy taking off the intermediary fee, either works. Isn't it a win-win?";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "Mmm... Alright. But absolutely do not leak it.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Such obvious words.";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "It's the Thor Volcano. Deep inside, there's a secret base, and the weapons come from there.";
		mes "I'm letting you know because once their stock there runs out, the deal is going to be cut off anyway.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "From the way you're talking, it seems like you'll cut ties soon, huh?";
		next;
		cutin "",255;
		mes "[Dandelion]";
		mes "Kid, don't try to float around more. Find out the rest yourself.";
		mes "If you've got what you wanted, pay the commission and leave.";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Thor Volcano's secret base... this smells very suspicious.";
		mes "I have a feeling this might be our final destination, don't you think?";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "I'll see you at <NAVI>[Thor Volcano]<INFO>thor_v01,169,169,0,101,0</INFO></NAVI> Make sure to come prepared!";
		mes "Don't enter the military base directly; instead, come in the direction of 3 o'clock from there, and I'll be waiting for you.";
		erasequest 16576;
		setquest 16577;
		ep18_main = 45;
		close2;
		cutin "",255;
		cloakonnpcself( "Maram#1_3" );
		end;
	}
	if (ep18_main == 45) {
		cloakoffnpcself( "Maram#1_3" );
		mes "[Dandelion]";
		mes "Kid, don't try to float around more. Find out the rest yourself.";
		mes "If you've got what you wanted, pay the commission and leave.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "I'll see you at<NAVI>[Thor Volcano]<INFO>thor_v01,169,169,0,101,0</INFO></NAVI> Make sure to come prepared!";
		mes "Don't enter the military base directly; instead, come in the direction of 3 o'clock from there, and I'll be waiting for you.";
		close2;
		cutin "",255;
		cloakonnpcself( "Maram#1_3" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16576) == 1" );
	end;
}

// Main Quest: Step 46.
thor_v01,169,169,3	script	Maram#Armybase-Secret passage	4_EP18_MARAM,{
	if (ep18_main == 45 || ep18_main == 46) {
		mes "[Maram]";
		mes "Over here! Follow me!";
		mes "Here's a <NAVI>[shortcut]<INFO>que_thr,133,53,0,101,0</INFO></NAVI> that will take you around a bit, but it'll keep you out of sight.";
		close2;
		warp "que_thr",181,53;
		end;
	}
	end;
}

// Main Quest: Step 47. (entrance npc is a part of the instance Thor Gunsu Base)
// Main Quest: Step 48-50 inside the instance 1@tcamp.

// Main Quest: Step 51.
wolfvill,140,112,0	duplicate(#contest1)	#sms01	HIDDEN_WARP_NPC,5,5

wolfvill,142,109,1	duplicate(dummy_cloaked_npc)	Miriam#sms01	4_EP18_MIRIAM
wolfvill,143,110,1	duplicate(dummy_cloaked_npc)	Maram#sms01	4_EP18_MARAM

wolfvill,140,112,5	script(CLOAKED)	Suad#sms01	4_EP18_SUAD,{
	if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
		npctalk ".......", "Suad#sms01", bc_self;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Where did Mini Elly go?", bc_self;
		end;
	}
	if (ep18_main == 47) {
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "Adventurer? Why have you returned already? Didn't you go to investigate the origin of the weapon with Miriam?";
		next;
		select( "I found out, but the origin is..." );
		cutin "",255;
		mes "[Mini Elly]";
		mes "That's not all. The bigger issue is that the weapons and ammunition that should have been disposed of have been flowing in without any guarantee of stability.";
		mes "The analysis results indicate that the risk of the stored gunpowder and unmanaged weapons is approximately 9.72%.";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[Suad]";
		mes "I anticipated it, but it's worse than I thought. I was only concerned about the origin. I can't guarantee the stability of the weapons either. They're old weapons...";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "While we do need armament, we can't use items with questionable origins. If we start tracing the weapons leaked from the other side and make it an issue, things could escalate into a bad situation.";
		next;
		mes "[Suad]";
		mes "However, finding a reliable supplier and negotiating deals will also take time, so we need to make careful decisions.";
		next;
		mes "[Suad]";
		mes "For now, let's retrieve all the weapons and discuss the future plan with Maram and Miriam when they return.";
		mes "Didn't Miriam and Maram return together?";
		next;
		select( "To expose the weapons smuggling..." );
		mes "[Suad]";
		mes "Yeah, it seems like waiting is all we can do for now.";
		next;
		cloakoffnpcself( "Miriam#sms01" );
		cloakoffnpcself( "Maram#sms01" );
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Suad!!! Suad, Suad!!! Something big happened! Big trouble, big trouble!!! Suad! Listen, listen to me, Suad!!!";
		next;
		cutin "ep18_suad_04.png",0;
		mes "[Suad]";
		mes "Maram, Miriam. What's going on?";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "We're all~~ going to die like this!!";
		next;
		cutin "ep18_suad_04.png",0;
		mes "[Suad]";
		mes "...What? Can you please explain in more detail? Why?";
		next;
		cutin "ep18_miriam_03.png",1;
		mes "[Miriam]";
		mes "I'll explain. Maram, why don't you sit down over there and calm down a bit.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Really? I'm a little startled... My heart is pounding.";
		npctalk "You...?", "Miriam#sms01", bc_self;
		npctalk "You didn't know? You really didn't know.", "Maram#sms01", bc_self;
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[Miriam]";
		mes "Do you remember the people we armed before?";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "They were weapons from the Thor Volcano, right? I heard that from the adventurer. Did we eventually find out about it from Rachel's side?";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[Miriam]";
		mes "Actually, I heard that the group raided the headquarters of the migrants. They took everything the headquarters had.";
		next;
		cutin "ep18_suad_04.png",0;
		mes "[Suad]";
		mes "What? When did that happen?";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[Miriam]";
		mes "It hasn't been long, but Rachel's side already knows about it.";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[Suad]";
		mes "Oh no... Why on earth...?";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[Miriam]";
		mes "It's not over yet. They're claiming over there that since we armed ourselves and carried out the attack, we're rebels. It seems like the voices advocating for a tough response are gaining strength.";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[Suad]";
		mes "This is the worst. If they launch an attack first... No, that's not it. We should meet with them first.";
		next;
		cutin "ep18_miriam_03.png",1;
		mes "[Miriam]";
		mes "How do you plan to do that?";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[Suad]";
		mes "We need to hold them accountable for their sudden actions that put our position at a disadvantage. We need to assess the scale and prepare a response strategy.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Let's go together. I know where it is! <NAVI>[]<INFO>wolfvill,131,257,0,101,0</INFO></NAVI>Adventure, come with us. I have a feeling that we might need a third-party witness!";
		erasequest 16580;
		setquest 17517;
		ep18_main = 48;
		close2;
		cutin "",255;
		cloakonnpcself( "Maram#sms01" );
		cloakonnpcself( "Miriam#sms01" );
		cloakonnpcself( "Suad#sms01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16580) == 1" );
	end;
}

// Main Quest: Step 52.
wolfvill,132,256,1	duplicate(dummy_npc)	Goods#sms01	4_WOODBOX
wolfvill,131,258,1	duplicate(dummy_npc)	Goods#sms02	4_WOODBOX
wolfvill,132,258,1	duplicate(dummy_npc)	Goods#sms03	4_WOODBOX

wolfvill,131,257,1	script	Goods#sms04	4_WOODBOX,{
	if (ep18_main == 48) {
		setpcblock PCBLOCK_NPC, true;
		cloakoffnpcself( "Suad#sms02" );
		cloakoffnpcself( "Maram#sms02" );
		cloakoffnpcself( "Miriam#sms02" );
		npctalk "Is this plundered goods?", "Suad#sms02", bc_self;
		sleep2 1000;
		npctalk "Oh... They're really here, the plundered items.", "Maram#sms02", bc_self;
		npctalk "Ah...", "Miriam#sms02", bc_self;
		sleep2 2000;
		cloakoffnpcself( "Lamacus#sms01" );
		cloakoffnpcself( "Kun#sms01" );
		cloakoffnpcself( "Yopi#sms01" );
		npctalk "Who dares to recklessly touch someone else's belongings?", "Lamacus#sms01", bc_self;
		npctalk "Has the master thief appeared?", "Kun#sms01", bc_self;
		npctalk "It's audacious. Other people's belongings!!!", "Yopi#sms01", bc_self;
		sleep2 2000;
		emotion ET_QUESTION, getnpcid(0,"Lamacus#sms01");
		setpcblock PCBLOCK_NPC, false;

		mes "[Lamacus]";
		mes "Oh? Suad! Miriam and Maram are here too.";
		next;
		mes "[Kun]";
		mes "What's going on, everyone? If it's about the weapons, I've already said everything before.";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Is there something else that needs to be said besides that?";
		next;
		cutin "",255;
		mes "[Yopi]";
		mes "Hey~ that's scary~ Why all of a sudden? Bringing in strangers too. Is there something to be afraid of?";
		npctalk "Who is that person?", "Kun#sms01", bc_self;
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "What nonsense is this? I'm more afraid of you guys! How can you attack the upper ranks?";
		next;
		cutin "",255;
		mes "[Lamacus]";
		mes "Oh, that? You don't have to praise me.";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Really~Ah?";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[Suad]";
		mes "We came to hear the reason why you attacked the innocent upper ranks.";
		next;
		cutin "",255;
		mes "[Kun]";
		mes "What's this about? You've all gathered here over something trivial?";
		next;
		cutin "ep18_suad_02.png",1;
		mes "[Suad]";
		mes "Something trivial? Because of what you've done, we're being branded as rebels. You've given them an excuse to attack us!";
		next;
		cutin "",255;
		mes "[Yopi]";
		mes "If they attack us, we'll just counterattack. What's there to worry about? We have weapons now too, you know?";
		npctalk "What's the problem?", "Kun#sms01", bc_self;
		npctalk "Talking is easy, huh?", "Maram#sms02", bc_self;
		next;
		mes "[Yopi]";
		mes "Do you know who we robbed? If you knew, you'd thank us. It wasn't an innocent upper rank, you know?";
		npctalk "You'll also regret treating us like this.", "Lamacus#sms01", bc_self;
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Do you know what it's called when you attack and rob the upper ranks regardless of innocence? It's called robbery.";
		next;
		cutin "",255;
		mes "[Kun]";
		mes "No, this is too much. Robbery? We targeted Ahmad's upper ranks.";
		next;
		emotion ET_SURPRISE, getnpcid(0,"Suad#sms02");
		emotion ET_HUK, getnpcid(0,"Miriam#sms02");
		emotion ET_HUK, getnpcid(0,"Maram#sms02");
		emotion ET_QUESTION, playerattached();
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "If it's Ahmad...";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Isn't it Suad's?";
		npctalk "Oh... It was there, after all.", "Maram#sms02", bc_self;
		next;
		cutin "",255;
		mes "[Kun]";
		mes "Yeah! They treated us like trash and even ignored their own sons!";
		next;
		mes "[Lamacus]";
		mes "They were sucking people like us dry!";
		npctalk "I thought it was a mosquito...?", "Yopi#sms01", bc_self;
		next;
		mes "[Yopi]";
		mes "Isn't it a good thing that we sought revenge on Suad and secured the necessary supplies?";
		npctalk "There's so much we need!", "Lamacus#sms01", bc_self;
		next;
		mes "[Kun]";
		mes "Exactly!! You suffered a lot because of your father. You came here because of him.";
		next;
		mes "[Kun]";
		mes "Simply because you're indigenous, he not only refused to acknowledge you as a capable son but also subjected you to abuse. In fact, he probably never even acknowledged you as his son.";
		next;
		mes "[Yopi]";
		mes "Is there anyone here who doesn't know Suad's story??";
		npctalk "No, there isn't. Think about it carefully. We avenged you.", "Kun#sms01", bc_self;
		next;
		mes "[Lamacus]";
		mes "You always imagined it in your heart, right? You didn't deserve such treatment. You wanted revenge against your stepfather.";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Say something, Suad.";
		next;
		cutin "ep18_suad_03.png",1;
		mes "[Suad]";
		mes "...Sigh... Alright, I understand... Just... Let's be careful next time. I understand why you did what you did, but we could end up in even bigger trouble...";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Suad? Is that the end of it?";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "I may not know much about this kind of thing, but from my limited perspective, won't they continue like this in the future? Shouldn't we arm ourselves just in case?";
		next;
		cutin "ep18_suad_03.png",1;
		mes "[Suad]";
		mes "Given the shortage of supplies in the village, that's true. It's becoming increasingly difficult for trade.";
		next;
		mes "[Suad]";
		mes "And as I mentioned before, being armed is necessary. We'll need to find new sources while keeping what we've already acquired. That's why I wanted to discuss it with you all";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Suad? Tell us. Are you completely unaware of this decision? Can you honestly say you have no involvement in this matter?";
		next;
		cutin "ep18_suad_03.png",1;
		mes "[Suad]";
		mes "Wait, wait. I need some time to gather my thoughts.";
		erasequest 17517;
		setquest 17518;
		ep18_main = 49;
		close3;
	}
	if (ep18_main == 49) {
		cloakoffnpcself( "Suad#sms02" );
		cloakoffnpcself( "Maram#sms02" );
		cloakoffnpcself( "Miriam#sms02" );
		cloakoffnpcself( "Lamacus#sms01" );
		cloakoffnpcself( "Kun#sms01" );
		cloakoffnpcself( "Yopi#sms01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17517) == 1" );
	end;
}

// Main Quest: Step 53.
wolfvill,131,252,3	script(CLOAKED)	Lamacus#sms01	EP18_ARMED_VILLAGER01,{
	if (checkweight(1000405,30) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main == 49) {
		mes "[Kun]";
		mes "No! But you know, when I think about it, what did we do wrong? Why are they trying to stop us?";
		npctalk "I don't know either. Didn't we help them?", "Yopi#sms01", bc_self;
		next;
		mes "[Lamacus]";
		mes "We're not trying to take everything for ourselves, we just want everyone to live well.";
		next;
		mes "[Yopi]";
		mes "Right? That's what I think too. Maybe if we work harder and more actively, they'll change their minds?";
		next;
		select( "Can we leave it as it is...?" );
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "No, we can't. Of course not. Acting recklessly without thinking about the future, is that what adults do?";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Suad, please speak up.";
		next;
		cutin "",255;
		cloakoffnpcself( "Citizen#sms01" );
		cloakoffnpcself( "Citizen#sms02" );
		cloakoffnpcself( "Citizen#sms03" );
		mes "[Citizen]";
		mes "Everyone's here. You mentioned an attack on the upper ranks? What's going on?";
		next;
		mes "[Citizen]";
		mes "Well done. Sometimes you just have to stir things up. Are we supposed to be powerless and do nothing? They've been looking down on us, and it's time to stop being ignored.";
		npctalk "We need to show that we can also make some waves.", "Citizen#sms02", bc_self;
		next;
		mes "[Yopi]";
		mes "But now Suad is saying we shouldn't do it.";
		next;
		mes "[Citizen]";
		mes "Why? Why is he saying not to do it? ";
		next;
		mes "[Kun]";
		mes "Well, he's saying our actions could put us in more danger, but I'm too confused to understand what he's talking about";
		next;
		mes "[Lamacus]";
		mes "Are they going to chase us out of Rachel just because we raided the upper ranks? They're going to attack us?";
		npctalk "What do they mean, chasing us out!?", "Citizen#sms01", bc_self;
		npctalk "They're going to attack us??", "Citizen#sms03", bc_self;
		npctalk "Is this true?", "Citizen#sms02", bc_self;
		next;
		cutin "ep18_suad_01.png",1;
		mes "[Suad]";
		mes "I see. Our position has become extremely unfavorable. There haven't been any major moves yet, but public opinion is not in our favor.";
		next;
		cutin "",255;
		mes "[Lamacus]";
		mes "Isn't this the time when we should raise our voices even more?";
		npctalk "We're humans too. Just like them.", "Citizen#sms02", bc_self;
		npctalk "Now that we have weapons too.", "Kun#sms01", bc_self;
		next;
		mes "[Citizen]";
		mes "Let's show them what we're made of!!! Let's raise our voices!!";
		npctalk "Yeah!! Let's do it!!!", "Citizen#sms02", bc_self;
		npctalk "Now it's our turn to speak up!", "Citizen#sms01", bc_self;
		npctalk "That's right! It's our time to do so!", "Lamacus#sms01", bc_self;
		npctalk "How much longer are we going to live like this?", "Kun#sms01", bc_self;
		npctalk "That's right!!!", "Yopi#sms01", bc_self;
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Just calm down for a moment.";
		next;
		cutin "",255;
		mes "[Citizen]";
		mes "Suad! How much longer do we have to live like this? I feel so unfairly treated, I can't take it anymore!";
		npctalk "Why do we have to live hiding like fugitives?", "Citizen#sms03", bc_self;
		npctalk "We can't live like this forever.", "Citizen#sms01", bc_self;
		next;
		mes "[Kun]";
		mes "Suad, you're being too cautious. We'll go and do it ourselves. Just like the ones who raided the upper ranks. Nothing will happen.";
		next;
		mes "[Citizen]";
		mes "Fortunately, we have an adventurer here. What do you think? You must have seen a lot traveling around, right?";
		next;
		select( "I..." );
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "The atmosphere is getting tense...";
		next;
		select( "It seems like things are taking a strange turn." );
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "People seem to be breaking free from Suad's control, and if it continues like this...";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Bang! Help! Somebody save me!";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[Suad]";
		mes "Yeah. Let's do it. Protest. We can't wait forever.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "What? Like this? Right now? Without any preparation?";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[Suad]";
		mes "It's not like we haven't prepared at all. We've been gradually moving through Rachel, hiding, and when the time is right, we can join from the temple.";
		next;
		cutin "",255;
		mes "[Lamacus]";
		mes "Tonight after sunset seems like a good time. The guards will be changing shifts, so the security will be lax.";
		next;
		mes "[Citizen]";
		mes "Great!!! I'll gather the people!!";
		next;
		cloakonnpcself( "Citizen#sms01" );
		cloakonnpcself( "Citizen#sms02" );
		cloakonnpcself( "Citizen#sms03" );
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Maran, you stay here and prepare for any potential situations.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Got it.";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[Suad]";
		mes "And you guys, leave all those weapons behind.";
		next;
		cutin "",255;
		mes "[Yopi]";
		mes "Oh, why!! We need to protect ourselves too!!";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[Suad]";
		mes "We're not going there to incite armed conflict. If by chance something unfortunate happens while we're carrying weapons, we'll truly be branded as rebels.";
		next;
		cutin "",255;
		mes "[Kun]";
		mes "Ah, alright! Anyway, Suad seems to be worried a lot.";
		next;
		mes "[Lamacus]";
		mes "Why worry about something that hasn't even happened yet?";
		next;
		cutin "ep18_suad_01.png",1;
		mes "[Suad]";
		mes "Alright, now that it's settled, let's hurry. Let's meet at <NAVI>[in front of the temple]<INFO>rachel,169,245,0,101,0</INFO></NAVI>";
		erasequest 17518;
		setquest 17519;
		ep18_main = 50;
		getitem 1000405,30;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		cutin "",255;
		cloakonnpcself( "Suad#sms02" );
		cloakonnpcself( "Maram#sms02" );
		cloakonnpcself( "Miriam#sms02" );
		end;
	}
	if (ep18_main == 50) {
		mes "[Lamacus]";
		mes "What are you doing? We agreed to meet at <NAVI>[in front of the temple]<INFO>rachel,169,245,0,101,0</INFO></NAVI>.";
		close2;
		cloakonnpcself( "Lamacus#sms01" );
		cloakonnpcself( "Kun#sms01" );
		cloakonnpcself( "Yopi#sms01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17518) == 1" );
	end;
}

wolfvill,129,256,3	duplicate(dummy_cloaked_npc)	Kun#sms01	EP18_ARMED_VILLAGER02
wolfvill,126,255,5	duplicate(dummy_cloaked_npc)	Yopi#sms01	EP18_ARMED_VILLAGER03

wolfvill,129,251,1	duplicate(dummy_cloaked_npc)	Citizen#sms01	4_M_RACHMAN1
wolfvill,129,248,7	duplicate(dummy_cloaked_npc)	Citizen#sms02	4_M_MIDDLE1
wolfvill,132,250,1	duplicate(dummy_cloaked_npc)	Citizen#sms03	4_EP18_GW_MAN01

wolfvill,126,252,7	duplicate(dummy_cloaked_npc)	Suad#sms02	4_EP18_SUAD
wolfvill,124,253,5	duplicate(dummy_cloaked_npc)	Miriam#sms02	4_EP18_MIRIAM
wolfvill,127,250,7	duplicate(dummy_cloaked_npc)	Maram#sms02	4_EP18_MARAM

// Main Quest: Step 54. (entrance npc is a part of the instance A Gathering Place of Wolves)
// Main Quest: Step 55-58 instance 1@nyr.

// Main Quest: Step 59.
rachel,118,197,1	duplicate(dummy_cloaked_npc)	Miriam#sms04	4_EP18_MIRIAM
rachel,119,199,3	duplicate(dummy_cloaked_npc)	Suad#sms04	4_EP18_SUAD

rachel,115,198,5	script(CLOAKED)	Zed#sms01	4_M_RACHOLD1,{
	cutin "ra_gman2.bmp",0;
	mes "[Zed]";
	mes "I think I'm going to be very busy from now on.";
	close3;
}

rachel,116,200,5	script	Niren#sms01	4_F_MADAME,{
	if (checkweight(1000405,60) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main == 52) {
		cloakoffnpcself( "Zed#sms01" );
		if (getequipid(EQI_HEAD_TOP) != 400127) {	// Ep18_Mini_Elly
			unittalk getcharid(3), "" + strcharinfo(0) + " : Where did Mini Elly go?", bc_self;
			end;
		}
		setpcblock PCBLOCK_NPC, true;
		npctalk "We've roughly assessed the number of casualties.", "Zed#sms01", bc_self;
		sleep2 800;
		cloakoffnpcself( "Suad#sms04" );
		cloakoffnpcself( "Miriam#sms04" );
		npctalk "We've also moved everyone to the safety zone here.", "Miriam#sms04", bc_self;
		setpcblock PCBLOCK_NPC, false;

		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "The damage... is too great.";
		next;
		cutin "ep18_suad_03.png",2;
		mes "[Suad]";
		mes "Moreover, with the bloodshed that occurred, rumors of a native uprising will spread in no time. It's already a bad situation with the headquarters attack incident.";
		next;
		cutin "ra_gman2.bmp",0;
		mes "[Zed]";
		mes "Don't worry about public opinion. Let us handle the recovery.";
		next;
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "It turns out that recent events were all part of a scheme.";
		next;
		cutin "ra_gman2.bmp",0;
		mes "[Zed]";
		mes "It was our oversight not to examine the suspicious movements within the temple more closely.";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Let's save self-blame for later and focus on resolving the situation on both sides for now.";
		next;
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "Are we sure about the involvement of the Youth Amal Vice-Chancellor?";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[Miriam]";
		mes "After the setback, my deputy, who had been languishing, suddenly regained vigor and became enthusiastic. Since then, tensions between the natives and immigrants of Arunafeltz have gradually escalated.";
		next;
		cutin "",255;
		mes "[Mini Elly]";
		mes "That aligns roughly with the time when the Heart Hunters escaped from the mansion.";
		next;
		cutin "ra_gman2.bmp",0;
		mes "[Zed]";
		mes "It seems certain that they conspired together after all.";
		next;
		select( "Because I even witnessed it." );
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "One thing that's troubling is that the Vice-Chancellor of Youth Amal wouldn't be unaware of the value of the Imir's Heart Fragment. Simply causing conflict by infiltrating the organization wouldn't have been enough to easily betray it...";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Did they agree to receive something more and hand it over?";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[Miriam]";
		mes "I'm not sure, but my deputy... No, I need to go and confirm it myself.";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "Where are you going? Do you have any idea where to start looking?";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[Miriam]";
		mes "There's a summer villa on the outskirts of Rachel. Recently, my deputy has been frequenting that place for medical treatment. If he's colluding with those mad scientists to plan something, that's probably where he'd be.";
		next;
		cutin "",255;
		mes "[Mini Elly]";
		mes "We'll need to do some tracking.";
		next;
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "Tracking down the person who stole the Heart Fragment should be left to Miriam. I hope the adventurer will accompany her.";
		next;
		select( "Understood." );
		cutin "ra_gman2.bmp",0;
		mes "[Zed]";
		mes "We'll stay here to attend to the injured and identify any remaining stragglers who might still be around. We also need to consider public opinion.";
		next;
		cutin "ep18_suad_01.png",2;
		mes "[Suad]";
		mes "We need to return to the forest and handle the aftermath there as well.";
		mes "Miriam, adventurer. Then I entrust you with tracking.";
		next;
		cutin "ep18_miriam_01.png",1;
		mes "[Miriam]";
		mes "Let's go, adventurer. Before heading to the villa, there's someone who will accompany us. Let's meet at <NAVI>[ ]<INFO>oz_dun01,223,116,0,101,0</INFO></NAVI>";
		erasequest 17521;
		setquest 17525;
		ep18_main = 53;
		getitem 1000405,60;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close2;
		cutin "",255;
		cloakonnpcself( "Miriam#sms04" );
		cloakonnpcself( "Suad#sms04" );
		end;
	}
	if (ep18_main == 53) {
		cutin "ra_gwoman.bmp",0;
		mes "[Niren]";
		mes "We agreed to meet Miriam at <NAVI>[Maze of Oz]<INFO>oz_dun01,223,116,0,101,0</INFO></NAVI>";
		close3;
	}
	mes "[Miriam]";
	mes "The situation here is not so good these days.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17521) == 1" );
	end;
}

// Main Quest: Step 60.
oz_dun01,223,116,3	script	Appointment Point#c12_evt01	4_POINT_BLUE,5,5,{
	if (ep18_main < 53)
		end;
	if (ep18_main == 53) {
		mes "Arrived at the meeting place.";
		mes "It seems like the others haven't arrived yet.";
		mes "Let's wait.";
		close2;
		setpcblock PCBLOCK_NPC, true;
		emotion ET_THINK, playerattached();
		sleep2 2000;
		emotion ET_SLEEPY, playerattached();
		cloakoffnpcself( "Maram#c12_01" );
		npctalk "Oh! It's still there!", "Maram#c12_01", bc_self;
		sleep2 500;
		cloakoffnpcself( "Suad#c12_01" );
		npctalk "Isn't it too late?", "Suad#c12_01", bc_self;
		setpcblock PCBLOCK_NPC, false;

		select( "Were you waiting for Miriam?" );
		mes "[Maram]";
		mes "I asked for my mother's permission and came out for a moment.";
		mes "I'm in the middle of handling the protest so I have to go back soon but...";
		mes "Where is Miriam?";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Suad]";
		mes "There she comes.";
		cutin "ep18_suad_01.png",0;
		next;
		cloakoffnpcself( "Miriam#c12_01" );
		cloakoffnpcself( "Ira#c12_01" );
		mes "[Miriam]";
		mes "Sorry for being late. I took some time to find someone.";
		cutin "ep18_miriam_01.png",0;
		next;
		mes "[Miriam]";
		mes "This is Ira.";
		mes "She's a child who often brings my father's books, but she needs help to enter the villa.";
		next;
		cutin "",255;
		npctalk "Hello.", "Ira#c12_01", bc_self;
		next;
		mes "[Maram]";
		mes "What, why is Ira here?";
		mes "Is she related to this matter?";
		cutin "ep18_maram_01.png",2;
		next;
		cutin "",255;
		mes "[Ira]";
		mes "Long time no see, Maramoppa.";
		mes "I came to repay a favor to Miriam unnie while I'm at it.";
		next;
		mes "[Ira]";
		mes "You said there's something to see at the villa?";
		mes "I've been pushing Sir Amal's wheelchair around, so I've been everywhere.";
		next;
		mes "[Ira]";
		mes "Coincidentally, I have the keys for the servants. I haven't returned them yet because I've been accompanying Sir Amal recently.";
		mes "Even recently, I haven't returned them as I've been out with Sir Amal.";
		next;
		mes "[Ira]";
		mes "And about that villa.";
		mes "Sometimes we lend it to the priests.";
		mes "That's what happened this time too.";
		mes "But it's a bit strange.";
		next;
		mes "[Suad]";
		mes "Strange?";
		mes "It would be good if you could be specific.";
		cutin "ep18_suad_04.png",0;
		next;
		cutin "",255;
		mes "[Ira]";
		mes "They said some priests would be staying for a while, but it feels like a lie...";
		next;
		mes "[Ira]";
		mes "It seems like Sir Amal is operating another secret group.";
		mes "Last time, he said he'd wage war but got pushed out of the temple, didn't he?";
		next;
		mes "[Ira]";
		mes "It seems like he hasn't given up yet.";
		mes "This time, there seem to be more dangerous people staying at the villa than last time.";
		next;
		mes "[Ira]";
		mes "I don't care who, but I wish someone would stop him.";
		mes "The atmosphere is not good either.";
		mes "If there's a war, we, the indigenous people, will be the ones caught in the crossfire.";
		next;
		mes "[Miriam]";
		mes "Well... no, it won't be a war.";
		mes "You can relax, it's okay.";
		cutin "ep18_miriam_01.png",0;
		next;
		cutin "",255;
		mes "[Ira]";
		mes "Sister! How can you be so calm?";
		mes "Do you know how scary it was for me to manage the villa?!";
		mes "Especially with that strange woman there...";
		next;
		mes "[Maram]";
		mes "Hahaha....";
		mes "Alright, calm down, Ira.";
		mes "We're gathered here to figure that out now.";
		cutin "ep18_maram_02.png",2;
		next;
		mes "[Miriam]";
		mes "For that reason, we're planning to enter the villa where aggressive guests are staying.";
		mes "Since they seem to be the same people we encountered at the temple.";
		cutin "ep18_miriam_01.png",0;
		next;
		mes "[Suad]";
		mes "I understand what you mean.";
		mes "Honestly, I'd like to go with you.";
		mes "But there are still things I need to take care of.";
		cutin "ep18_suad_01.png",0;
		next;
		mes "[Maram]";
		mes "Yeah. I hurriedly asked for permission and left for a moment.";
		mes "I still need to handle the protest and do some coordination work.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "Sorry, but Suadand I won't be able to go with you..";
		mes "Can you understand?";
		next;
		mes "[Miriam]";
		mes "Of course.";
		mes "It's better for you to handle matters among yourselves.";
		mes "I'll rely on the people of the Wolf Village.";
		cutin "ep18_miriam_01.png",0;
		next;
		mes "[Miriam]";
		mes "Then, " + strcharinfo(0) + ", will you scout the villa with us?";
		next;
		select( "Leave it to me." );
		mes "[Suad]";
		mes "Thank you for understanding.";
		mes "If you safely enter the villa, we'll bring Ira with us.";
		cutin "ep18_suad_01.png",0;
		next;
		mes "[Miriam]";
		mes "Thank you.";
		mes "Then, Ira. Will you send us to the villa?";
		cutin "ep18_miriam_01.png",0;
		next;
		cutin "",255;
		mes "[Ira]";
		mes "Of course.";
		mes "Just talk to me when you're ready.";
		mes "I'll send you right away.";
		erasequest 17525;
		setquest 18083;
		ep18_main = 54;
		close;
	}
	if (ep18_main == 54) {
		npctalk "Are you ready?", "Ira#c12_01", bc_self;
		cloakoffnpcself( "Miriam#c12_01" );
		cloakoffnpcself( "Ira#c12_01" );
		end;
	}
	if (ep18_main == 55) {
		cloakoffnpcself( "Maram#c12_01" );
		end;
	}
	mes "You can enter the MD Memorial's villa story mode.";
	mes "Adventurers who have already completed it can only enter to accompany fellow adventurers.";
	mes "Would you like to enter together for your companion?";
	next;
	.@md_name$ = "High Priest's Villa";

	select( "Enter the " + .@md_name$ + "" );

	switch( instance_enter(.@md_name$) ) {
	case IE_OTHER:
		mes "^ff0000An unknown error occurred.^000000";
		close;
	case IE_NOINSTANCE:
		mes "Accompanying is not currently possible. Please check if your accompanying party member has applied for MD.";
		close;
	case IE_NOMEMBER:
		mes "^ff0000Only a member of the party can enter the Memorial Dungeon.^000000";
		close;
	case IE_OK:
		mapannounce "oz_dun01", "" + strcharinfo(0) + " from the " + getpartyname( getcharid(1) ) + "'s party has entered the " + .@md_name$ + ".", bc_map, 0xFF99;
		// warp "1@adv",123,17;
		end;
	}
	end;

OnTouch:
	if (ep18_main == 54) {
		npctalk "Are you ready?", "Ira#c12_01", bc_self;
		cloakoffnpcself( "Miriam#c12_01" );
		cloakoffnpcself( "Ira#c12_01" );
		end;
	}
	if (ep18_main == 55) {
		cloakoffnpcself( "Maram#c12_01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(17525) == 1" );
	end;
}

oz_dun01,223,120,5	script(CLOAKED)	Suad#c12_01	4_EP18_SUAD,{
	mes "[Suad]";
	mes "I'm sorry for burdening you with this annoying task.";
	mes "But the Gray Wolf Village members must be waiting for me.";
	cutin "ep18_suad_01.png",0;
	next;
	mes "[Suad]";
	mes "I entrust Miriam to you.";
	close3;
}

oz_dun01,220,118,5	script(CLOAKED)	Miriam#c12_01	4_EP18_MIRIAM,{
	mes "[Miriam]";
	mes "Only Miriam and the adventurer can enter the villa.";
	mes "Suadand Maram will return to handle the protest.";
	cutin "ep18_miriam_01.png",0;
	next;
	mes "[Miriam]";
	mes "The villa is said to be located under this gorge.";
	mes "Ira has a separate entrance key, so when you're ready, talk to Ira.";
	close3;
}

// Main Quest: Step 61. (entrance npc is a part of the instance Villa of High Priest)
// Main Quest: Step 62-66 inside the instance.

// Main Quest: Step 67.
oz_dun01,225,119,3	script(CLOAKED)	Maram#c12_01	4_EP18_MARAM,{
	if (ep18_main == 55) {
		mes "[Maram]";
		mes "Oh, you're here.";
		mes "The situation has been somewhat resolved, so I came to see you.";
		mes "Miriam and Priest Yus have gone to the temple.";
		cutin "ep18_maram_01.png",2;
		next;
		mes "[Maram]";
		mes "Due to Priest Yus rampage, Suadwas kind of forced to escort him away.";
		mes "They said they'll discuss the details at the temple.";
		next;
		mes "[Maram]";
		mes "Will you go there right away?";
		next;
		if (select( "I'll ask for your help.", "I'll go on my own." ) == 2)
			end;
		mes "[Maram]";
		mes "Then let's go together this way. Haha...";
		close2;
		cutin "",255;
		warp "ra_temin",169,26;
		end;
	}
	mes "[Maram]";
	mes "Even if this event was fabricated by the Heart Hunters and the Illusions, it was going to explode someday.";
	cutin "ep18_maram_01.png",2;
	next;
	mes "[Maram]";
	mes "I don't know why it's so hard for everyone to live well together.";
	cutin "ep18_maram_03.png",2;
	next;
	mes "[Maram]";
	mes "These worries are left up to us.";
	mes "Adventures, investigate the villa with Miriam.";
	mes "I don't know what Amal is thinking.";
	cutin "ep18_maram_01.png",2;
	close3;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18084) == 1" );
	end;
}

// Main Quest: Step 68.
ra_temin,256,130,1	script	Temple Knight#c12_02	4_M_RASWORD,3,3,{
	if (ep18_main == 55 || ep18_main == 56)
		end;
	mes "[Temple Knight]";
	mes "The Sanctuary Sethrumnir.";
	mes "The general chapel is not here, so please go back.";
	close;
OnTouch:
	if (ep18_main == 55 || ep18_main == 56) {
		npctalk "I have been waiting. Please come inside.", "Temple Knight#c12_02", bc_self;
		cloakoffnpcself( "Niren#c12last" );
		cloakoffnpcself( "Maram#c12last" );
		cloakoffnpcself( "Suad#c12last" );
		cloakoffnpcself( "Miriam#c12_02" );
		end;
	}
	npctalk "Access is prohibited except for officials.", "Temple Knight#c12_02", bc_self;
	warp "ra_temin",255,138;
	end;
}

ra_temin,254,117,5	script(CLOAKED)	Miriam#c12_02	4_EP18_MIRIAM,{
	if (getequipid(EQI_HEAD_TOP) == 400127 && countitem(400127) == 1) {	// player must unequip the item
		mes "You must have the stretched Elly with you.";
		close;
	}
	if (ep18_main == 55) {
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "During your arrival, I heard some detailed stories....";
		mes "It seems that the real goal was the arrival of Freyja, through the fragment of Ymir.";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Setting fire between the natives and immigrants was also to divert the attention of the temple and the people.";
		mes "Sigh....";
		mes "[Miriam]";
		mes "How many people suffered and struggled because of that incident....";
		next;
		mes "[Miriam]";
		mes "The gods? What are the gods, really?";
		mes "What did my father wish for, to offer such misguided prayers?";
		next;
		mes "[Miriam]";
		mes "....";
		mes "I'll have to ask more to find out the details.";
		mes "But, I'm really disillusioned with blind faith.";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "You really have no shame.";
		mes "I never imagined Youth would do such a thing.";
		next;
		mes "[Niren]";
		mes "Do you remember he used to be the leader of the hardliners?";
		mes "But he couldn't start a war.";
		mes "After retreating from the frontline because of that, he's been scheming something like this from behind.";
		next;
		mes "[Niren]";
		mes "We are servants of the gods, serving their will.";
		mes "We are always waiting, hoping that Freyja will speak to us again.";
		next;
		mes "[Niren]";
		mes "But even so, we must not dare to summon the gods to the mortal realm.";
		mes "That's not the will of the gods.";
		next;
		mes "[Niren]";
		mes "Youth has violated taboo.";
		mes "Daring to call oneself a servant of the gods and trying to take the gods as one's own.";
		next;
		mes "[Niren]";
		mes "That alone is unforgivable, but he also caused pain to the gods and innocent people for that.";
		mes "What should we do about the lost fragment of Ymir's heart....";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Mother.";
		mes "We can retrieve the fragment of Ymir's heart.";
		mes "Don't worry too much.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "You're right.";
		mes "I will also retrieve the fragment of Ymir's heart.";
		next;
		mes "The story is getting longer.";
		mes "When can we intervene....";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "....";
		mes "If you're here, show your presence.";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "Oh, we were discussing without even realizing that the adventurer had arrived.";
		mes "What about your investigation?";
		mes "It's about the remnants of that blasphemous thing found in Youth's mansion.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "The 'Bagot,' was it?";
		mes "What we saw at the mansion was a chimera created by the Bagot....";
		close2;
		cutin "",255;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Elly: Allow me to explain.", bc_self;
		cloakoffnpcself( "Elly's Figure#c12_02" );
		specialeffect EF_BLUELIGHTBODY, AREA, "Elly's Figure#c12_02";
		erasequest 18084;
		setquest 18085;
		ep18_main = 56;
		end;
	}
	npctalk "We had to stop Father before he committed a greater sin.", "Miriam#c12_02", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(18084) == 1" );
	end;
}

// Main Quest: Step 69.
ra_temin,258,117,3	script(CLOAKED)	Elly's Figure#c12_02	4_EP17_TABLET,{
	disable_items;
	if (checkweight(1201,2) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (getequipid(EQI_HEAD_TOP) == 400127 && countitem(400127) == 1 || countitem(400127) == 0) {
		mes "Must carry a droopy Elly in the inventory.";
		close;
	}
	if (ep18_main == 56) {
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "I projected my original form because it seems like a story you all need to hear together.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Oh... I sometimes heard a faint moaning sound somewhere, and it was here?";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "You look composed. Indeed, I can say you are the adventurer's party.";
		mes "Let's get straight to the point. This form has a short duration.";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "Truly surprising, but please do. I need to understand the true identity of Freya's manifestation.";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "Alright. Let me explain quickly.";
		mes "The remains collected from the mansion were structurally identical to the Embryo, the origin of Homunculus.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Embryo?";
		mes "What's that? Some kind of alchemy?";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "Do you know about this field?";
		mes "The Embryo is the fetal form of the artificial life form, the Homunculus.";
		next;
		mes "[Elly]";
		mes "Artificial life forms are beautiful. Depending on the alchemist who nurtures them, they can take on hundreds of different forms.";
		next;
		mes "[Elly]";
		mes "Bagot based the Chimera on the Embryo, modeled after the Pope, and then modified it into a Chimera.";
		mes "What you saw in the mansion was that modified Chimera.";
		next;
		select( "Because it's an illusion." );
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "Can I know more about this illusion?";
		next;
		mes "I explained briefly about the illusion.";
		next;
		cutin "ep18_suad_02.png",0;
		mes "[Suad]";
		mes "So, we were fooled by Bagot's trickery to get a piece of Ymir's heart to summon a goddess?";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "In summary, yes.";
		mes "You catch on quickly. You must have an excellent brain.";
		next;
		cutin "ep18_suad_03.png",0;
		mes "[Suad]";
		mes "I understand well that Yuseh got caught up in the illusion's ploy and tried to summon a goddess but ended up self-destructing.";
		mes "But what about the illusion? Where did Bagot and the heart go?";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "Most of all, I... I can't stand the fact that we suffered because of some personal power play, not just God's will.";
		next;
		cutin "ep18_miriam_03.png",0;
		mes "[Miriam]";
		mes "Suad.";
		mes "I feel the same way. We all do.";
		mes "Above all, the fact that I was closest and still didn't notice is the worst...";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "Mother. What should we do from now on?";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "Form a council.";
		mes "As far as I can see, this country lacks communication.";
		mes "How can you know what you want if the natives and immigrants don't talk to each other?";
		next;
		mes "[Elly]";
		mes "Give status and power to the natives. Guarantee them legally.";
		mes "It's difficult but easy. You just have to guarantee it.";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "I see. Rather than just waiting for God's word and forcing it, we need to listen to people's stories.";
		mes "Such fundamental...";
		next;
		cutin "ep18_maram_03.png",2;
		mes "[Maram]";
		mes "But the ruling class won't stay quiet.";
		mes "If anything, there might be more resistance and turmoil than now.";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "Ha, but we can't just stay like this, can we?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Right. Reform is necessary.";
		mes "We can't just shout at walls and hide in the forest forever.";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "Humans. Don't worry.";
		mes "Time is always on our side.";
		mes "Your role is to strengthen the opposite side to match the power of authority. That's all.";
		next;
		mes "[Elly]";
		mes "The rest will be resolved by time and human adaptability.";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "This is a great lesson from an outsider.";
		mes "Understood. Let's formally raise this issue for discussion.";
		next;
		mes "[Niren]";
		mes "If it's Zedd Mansion, it might be of great help.";
		mes "You guys decide on a representative for the natives.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Suad is here. Father.";
		mes "And there's me and Maram. Aren't we here for this day?";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "It's time for the children of gray to do their job.";
		mes "The reason Mother adopted us, was it for this day?";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "Don't worry about this side. Just make sure to prepare a proper board.";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "Thank you. You've grown well...";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "Alright. The situation in this country is actually beyond my knowledge, but it seems to have been resolved well.";
		mes "Now let's go back to the story of the illusion.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Right. Bagot took Ymir's heart and went somewhere, right?";
		mes "And the adventurer will leave to find the heart.";
		next;
		select( "We need to know Bagot's whereabouts." );
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Bagot seems to have headed to the northern continent.";
		mes "I remember having a conversation with my father about Jormungand.";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "The north?";
		mes "Are you talking about Jormungand, the sealed area beyond the barrier?";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Is it true? That Jormungand is sealed. Bagot seems interested.";
		mes "Bagot was interested in resurrecting a god.";
		next;
		mes "[Miriam]";
		mes "At first, it seemed like a false promise of a divine advent just to steal Ymir's heart, but....";
		mes "No one knows what he will do with Ymir's heart he obtained.";
		next;
		mes "[Miriam]";
		mes "However, it seems that one of Bagot's companions has already moved to the northern continent.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Jormungand exists?";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "The Jormungand sect did exist.";
		mes "The heroes who won in the fight against the sect became the founders of the Rune-Midgarts Kingdom.";
		next;
		mes "[Niren]";
		mes "At that time, they fought in the name of Odin, not Freya, as we did.";
		mes "Clearly, it was Freya who unfolded the meaning for humans.";
		next;
		mes "[Niren]";
		mes "However, the family of heroes who won the fight against the Church founded a country in the name of Odin.";
		mes "There is also a story that Jormungand placed a curse on the victorious hero and first king because of this.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "I've never heard of this before?";
		mes "Curse...?";
		next;
		select( "The curse is not important." );
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "Yes. The story of the current royal curse isn't important.";
		mes "What's important is that the Jormungand sect did exist.";
		next;
		mes "[Niren]";
		mes "The story of Jormungand being sealed in the place called the northern continent is also told.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "If Bagot really wants to resurrect a god, he will aim for Jormungand next.";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "That must be prevented.";
		mes "The darkness of the continent is greater than the divine war that lasted a thousand years.";
		mes "We must track down and stop Bagot.";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "The north is a sealed land. It's not easy to cross the barrier.";
		next;
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "Because there's a barrier, we can't cross it?";
		mes "Then did Bagot use Ymir's heart to cross the barrier?";
		next;
		mes "[Miriam]";
		mes "To track him down, we need to find a way to cross the barrier that blocks the north.";
		mes "It will take time.";
		next;
		cutin "ep172_beta.bmp",2;
		mes "[Elly]";
		mes "I'll do that.";
		mes "Let me return to the mansion and find a way to cross the barrier.";
		next;
		mes "[Elly]";
		mes "And it's not boasting, but if you had used the owner's unfairness, you would have crossed that barrier somehow, right?";
		mes "If you used the unfairness, you could track the traces.";
		next;
		mes "[Elly]";
		mes "I'll return to the administrator's main body. I'll give you this shell as a souvenir for the adventurer.";
		mes "See you at the mansion.";
		ep18_main = 57;
		completequest 18085;
		delitem 400127,1;	// Ep18_Mini_Elly
		getitem 400128,1;	// Costume Dropping Elly
		getitem 1000405,180;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		next;
		cloakonnpcself( "Elly's Figure#c12_02" );
		cutin "ep18_miriam_01.png",0;
		mes "[Miriam]";
		mes "There's nothing we can do until more information gathers.";
		mes "I'll try to have a conversation with my father a bit more.";
		mes "Thank you for your help.";
		next;
		cutin "ep18_suad_01.png",0;
		mes "[Suad]";
		mes "Then I'll return to the Gray Wolf Forest.";
		mes "Niren, please call me back when the council is formed. I'll prepare until then.";
		next;
		cutin "ep18_maram_01.png",2;
		mes "[Maram]";
		mes "Then shall I go and listen to Miriam and Yuse's story together?";
		mes "I want to help find Ymir's heart fragment.";
		next;
		cutin "ra_gwoman.bmp",2;
		mes "[Niren]";
		mes "Then I'll go meet Deputy Jed.";
		mes "Adventurer, you've done us a service once again.";
		next;
		mes "[Niren]";
		mes "Prayers are always directed towards God,";
		mes "to support those who make wishes ...";
		mes "But what did Yuse pray for?";
		next;
		mes "[Niren]";
		mes "At the end of that prayer is only downfall.";
		mes "...";
		close3;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(18085) == 1" );
	end;
}

ra_temin,254,114,7	script(CLOAKED)	Suad#c12last	4_EP18_SUAD,{
	if (ep18_main < 57) {
		npctalk "...", "Suad#c12last", bc_self;
		end;
	}
	npctalk "Thank you for helping the Gray Wolf Forest.", "Suad#c12last", bc_self;
	end;
}

ra_temin,258,114,3	script(CLOAKED)	Niren#c12last	4_F_RACHOLD,{
	npctalk "I didn't expect Youth to be like that...", "Niren#c12last", bc_self;
	end;
}

ra_temin,259,111,1	script(CLOAKED)	Maram#c12last	4_EP18_MARAM,{
	if (ep18_main < 57) {
		npctalk "Miriam has brought some information, let's hear it together.", "Maram#c12last", bc_self;
		end;
	}
	npctalk "I would appreciate it if I could accompany you when you go to find the heart.", "Maram#c12last", bc_self;
	end;
}



//--- Daily quests
//-------------------------------------------------------------------
// Quest: Investigation of Oz Labyrinth. Step 1 + 13 (final). (NPC part of the main quest).
// wolfvill,143,113,5	script	Imril#ep18_wv	4_EP18_IMRIL,{

// Quest: Investigation of Oz Labyrinth. Step 2.
oz_dun01,27,184,5	script	#ep18_sb1	4_POINT_RED,{
	if (isbegin_quest(11725) == 1 || isbegin_quest(11726) == 1) {
		mes "[Imril]";
		mes "Phew... It's hot!";
		mes "It used to be a cool cave...";
		mes "Now, just standing still feels like sweat is pouring down.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "If we stay too long, I might get dizzy, so let's explore quickly.";
		mes "For now, this path is an ^e5555eexternal path^000000, so we just need to walk straight.";
		if (isbegin_quest(11725) == 1) {
			completequest 11725;
			setquest 11726;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun01",68,284);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11725) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 3.
oz_dun01,68,284,5	script	Box#ep18_sb1	4_WOODBOX,{
	if (isbegin_quest(11726) == 1 || isbegin_quest(11727) == 1) {
		mes "[Imril]";
		mes "Someone left their luggage behind.";
		mes "Sometimes when facing monsters or feeling too exhausted to carry items, people hide their luggage like this and move on.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "While it's important to move items, life is precious.";
		mes "Since we're close to the entrance here, it's convenient to retrieve the items later.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Let's leave this luggage for now and move on.";
		if (isbegin_quest(11726) == 1) {
			erasequest 11726;
			setquest 11727;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun01",65,189);
		end;
	}
	mes "- A box has been left unattended. -";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11726) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 4.
oz_dun01,65,189,5	script	Steep Road#ep18_sb1	4_POINT_RED,{
	if (isbegin_quest(11727) == 1 || isbegin_quest(11728) == 1) {
		mes "[Imril]";
		mes "The path here is rough, so be careful.";
		mes "You might slip and hurt your ankle if you're not careful.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Let's go down straight from here.";
		if (isbegin_quest(11727) == 1) {
			erasequest 11727;
			setquest 11728;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun01",111,96);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11727) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 5.
oz_dun01,111,96,5	script	Steaming Hole#ep18_sb1	4_POINT_RED,{
	if (isbegin_quest(11728) == 1 || isbegin_quest(11729) == 1) {
		mes "[Imril]";
		mes "Hoo!";
		mes "It's hot!";
		mes "Steam is escaping from the cracked crevice.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "Fortunately, the ground seems okay for now, but steam rising indicates that the ground deep below has heated up, so we might not be able to go much further before lava starts flowing.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "It's really serious that it's starting to heat up near the main path...";
		next;
		cutin "",255;
		mes "[???]";
		mes "<FONT SIZE = 16><B>Imril!!</FONT></B>";
		if (isbegin_quest(11728) == 1) {
			erasequest 11728;
			setquest 11729;
		}
		close2;
		navigateto("oz_dun01",100,92);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11728) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 6 + 7 + 8.
oz_dun01,100,92,3	script	???#ep18_sb1	4_EP18_GW_MIDDLE02,{
	if (isbegin_quest(11729) == 1) {
		mes "[Imril]";
		mes "Are you okay, Paul?";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[Paul]";
		mes "Haha...";
		mes "I got hit by hot steam while running away from monsters.";
		mes "I let my guard down on the path I always took.";
		next;
		mes "[Paul]";
		mes "I'm not sure where my belongings went either.";
		mes "Getting hurt and losing my belongings, it's miserable...";
		next;
		mes "[Imril]";
		mes "Don't say that, your life is more important than your belongings.";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[Paul]";
		mes "Yeah...";
		mes "Thanks.";
		next;
		mes "[Imril]";
		mes "I have some potions here, so drink this and return to the village first.";
		mes "You can find your belongings later.";
		cutin "ep18_imril_01.png",2;
		next;
		cutin "",255;
		mes "[Paul]";
		mes "No, keep it!";
		mes "We can't waste the village's valuable resources like this.";
		next;
		mes "[Paul]";
		mes "Rest for a while, then go back to the village and apply ointment.";
		next;
		mes "[Paul]";
		mes "Still, I don't want to get hit by monsters while recovering, so can you help me ^e5555eclean up the monsters nearby^000000?";
		erasequest 11729;
		setquest 11730;
		close;
	}
	switch( checkquest(11730,HUNTING) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Paul]";
		mes "Rest for a while, then go back to the village and apply ointment.";
		next;
		mes "[Paul]";
		mes "Still, I don't want to get hit by monsters while recovering, so can you help me ^e5555eclean up the monsters nearby^000000?";
		close;
	case 2:
		mes "[Paul]";
		mes "Phew~";
		mes "Thanks!";
		mes "I'm feeling a bit better now and can move.";
		next;
		mes "[Paul]";
		mes "Well, I'll slowly head back to the village now.";
		mes "It's good to investigate the maze, but be careful of your health.";
		next;
		mes "[Imril]";
		mes "Got it.";
		mes "Take care, Paul.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Hmm...";
		mes "Steam rising from various places is indeed a big problem, not just the monsters.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "Travelers rarely descend further down, but if they are chased by monsters, they might take the wrong path...";
		next;
		mes "[Imril]";
		mes "Let's ^e5555ego down a bit more^000000 for now.";
		erasequest 11730;
		setquest 11731;
		close2;
		cutin "",255;
		navigateto("oz_dun01",134,56);
		end;
	}
	if (isbegin_quest(11731) == 1) {
		mes "[Paul]";
		mes "Well, I'll slowly head back to the village now.";
		mes "It's good to investigate the maze, but be careful of your health.";
		next;
		mes "[Imril]";
		mes "Got it.";
		mes "Take care, Paul.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Hmm...";
		mes "Steam rising from various places is indeed a big problem, not just the monsters.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "Travelers rarely descend further down, but if they are chased by monsters, they might take the wrong path...";
		next;
		mes "[Imril]";
		mes "Let's ^e5555ego down a bit more^000000 for now.";
		close2;
		cutin "",255;
		navigateto("oz_dun01",134,56);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11729) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "checkquest(11730,HUNTING) == 2" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 9.
oz_dun01,134,56,5	script	Box#ep18_sb2	4_WOODBOX,{
	if (isbegin_quest(11731) == 1 || isbegin_quest(11732) == 1) {
		mes "[Imril]";
		mes "There's some luggage here too...";
		mes "Could this be the luggage Paul lost?";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "Let's just remember the location for now and retrieve it later.";
		mes "We still need to check ^e5555efurther down^000000.";
		mes "This way...";
		if (isbegin_quest(11731) == 1) {
			erasequest 11731;
			setquest 11732;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun01",110,37);
		end;
	}
	mes "- The box is left unattended. -";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11731) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 10.
oz_dun01,110,37,5	script	#ep18_sb2	4_POINT_RED,{
	if (isbegin_quest(11732) == 1 || isbegin_quest(11733) == 1) {
		mes "[Imril]";
		mes "Ugh...";
		mes "The heat is already unbearable.";
		mes "It's even more dangerous down here, so we really need to be careful.";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "To be honest, unless you're as strong as an adventurer, coming this far is as good as a death sentence.";
		cutin "ep18_imril_01.png",2;
		next;
		mes "[Imril]";
		mes "But since I'm here with you, I'll venture further down.";
		if (isbegin_quest(11732) == 1) {
			erasequest 11732;
			setquest 11733;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun02",152,276);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11732) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 11.
oz_dun02,152,276,5	script	#ep18_sb3	4_POINT_RED,{
	if (isbegin_quest(11733) == 1 || isbegin_quest(11734) == 1) {
		mes "[Imril]";
		mes "It seems like the monsters down here have slightly changed their form just from coming down a bit further.";
		mes "Even this level of change could pose a risk to adventurers, don't you think?";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "Since it's too dangerous here, let's just take a quick look around and then head back to town.";
		if (isbegin_quest(11733) == 1) {
			erasequest 11733;
			setquest 11734;
		}
		close2;
		cutin "",255;
		navigateto("oz_dun02",143,231);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11733) == 1" );
	end;
}

// Quest: Investigation of Oz Labyrinth. Step 12.
oz_dun02,143,231,3	script	Old Man#ep18_sb1	4_EP18_GW_OLD01,{
	if (isbegin_quest(11734) == 1) {
		mes "[Imril]";
		mes "<FONT SIZE = 14><B>Elder!!!!</FONT></B>";
		mes "You're safe!!!";
		cutin "ep18_imril_03.png",2;
		next;
		cutin "",255;
		mes "[Elder]";
		mes "No.";
		mes "Who is this?";
		mes "Isn't this Imril?";
		mes "Why did you come to such a dangerous place?";
		next;
		mes "[Imril]";
		mes "No, why are you really here, Elder.";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[Maze Master Elder]";
		mes "The maze master is in the maze, where else would I be.";
		next;
		mes "[Imril]";
		mes "But this place is too dangerous with monsters...";
		cutin "ep18_imril_01.png",2;
		next;
		cutin "",255;
		mes "[Maze Master Elder]";
		mes "Well, it's not only here, so don't worry.";
		mes "With all the noise the monsters are making these days, I thought there might be someone in danger and came down to check.";
		next;
		mes "[Maze Master Elder]";
		mes "I've told Suad that the lava has reached this far, and below here, the ground has already melted a lot, making it even more dangerous, so don't go down.";
		next;
		mes "[Maze Master Elder]";
		mes "If it were an adventurer next to you, it might be okay, but it's too dangerous for you.";
		next;
		mes "[Imril]";
		mes "Got it.";
		mes "Please take care of yourself, Elder.";
		mes "Hurry back to the village.";
		cutin "ep18_imril_02.png",2;
		next;
		cutin "",255;
		mes "[Maze Master Elder]";
		mes "Oh my~";
		mes "If the maze master isn't in the maze, who will manage the maze!";
		next;
		mes "[Imril]";
		mes "Anyway, stubbornness...";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "As Inspirational said, I don't think I can handle going further down, so let's go back to the ^e5555evillage^000000.";
		mes "I feel like my skin is burning even now.";
		erasequest 11734;
		setquest 11735;
		close2;
		cutin "",255;
		navigateto("wolfvill",143,113);
		end;
	}
	if (isbegin_quest(11735) == 1) {
		mes "[Maze Master Elder]";
		mes "Oh my~";
		mes "If the maze Master isn't in the maze, who will manage the maze!";
		next;
		mes "[Imril]";
		mes "Anyway, you're so stubborn...";
		cutin "ep18_imril_02.png",2;
		next;
		mes "[Imril]";
		mes "As the elder said, I don't think I can go down any further, so let's go back to ^e5555eVillage^00000.";
		mes "Even now, my skin feels like it's going to burn.";
		close2;
		cutin "",255;
		navigateto("wolfvill",143,113);
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(11734) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Training Grey Wolves. Step 1 + 4 (final).
wolfvill,120,117,1	duplicate(dummy_npc)	Aisha#wms01	4_F_SHABBY

wolfvill,121,113,1	script	Peco#wms01	4_PECOPECO,{
	npctalk "Gwogak... Gwogak...", "Peco#wms01", bc_self;
	end;
}

wolfvill,117,113,7	script	Pando#wms01	4_HEN,{
	npctalk "Cluck cluck cluck-", "Pande#wms01", bc_self;
	end;
}

wolfvill,123,110,5	script	Guest#wms01	4_HEN,{
	npctalk "....cluck?", "Pandu#wms01", bc_self;
	end;
}

wolfvill,125,111,3	script	Cute#wms01	4_HEN,{
	npctalk "Cluck!! Cluck!!!", "Pando#wms01", bc_self;
	end;
}

wolfvill,121,119,3	script	Goat#wms01	EP18_GREY_GOAT,{
	emotion ET_DELIGHT;
	npctalk "Yaaaawwwwn~~~", "", bc_self;
	end;
}
	
wolfvill,124,116,3	script	Sheep#wms01	4_LAM,{
	npctalk "Yum...", "", bc_self;
	end;
}

wolfvill,117,119,5	script	Scania#wms01	4_EP18_GW_MAN02,5,5,{
	if (checkweight(1000405,10) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36) {
		mes "[Scania]";
		mes "Oh my, look at him breathing. Isn't our little pup just adorable?";
		close;
	}
	switch( isbegin_quest(17510) ) {
	case 0:
		mes "[Scania]";
		mes "Hey, buddy, it's time for you to learn a foreign language too...";
		npctalk "What's up?", "Goat#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Oh my, look at this! Look at the way they're breathing. They're a genius at inhaling and exhaling! A true genius!";
		next;
		cloakoffnpcself( "Maram#wms01" );
		mes "[Maram]";
		mes "Hello! Scania!";
		next;
		mes "[Scania]";
		mes "Maram? When did you come? You came earlier than expected?";
		next;
		mes "[Maram]";
		mes "Thanks to the adventurer's help, I came a little faster this time.";
		npctalk "Hello. You are a strong and mighty adventurer.", "Maram#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Is this the newcomer who just arrived?";
		next;
		mes "[Maram]";
		mes "Oh, that's not it. He is not from around here. He is from a completely different place. He helped with purchasing goods this time, and they've transported them all the way here.";
		npctalk "He is a strong and mighty adventurer.", "Maram#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Hmm... An adventurer...? So, they're an outsider? Are we sure about your identity? What if we search through everything he have?";
		mes "Or perhaps we could let slip some information over there? If not, what if they try to claim our land like those immigrants?";
		next;
		mes "[Maram]";
		mes "No, not him! He have nothing but kind words for everyone they meet! They're not that kind of person at all. Why would you compare him to those troublemakers?";
		next;
		mes "[Scania]";
		mes "Do you think someone's intentions are written on their face? Whether they're a thief or a military member, that's something we'll find out over time!";
		mes "Isha brought back a wolf cub, and now, Marem, are you bringing back people?";
		npctalk "Bringing back, huh! Watch your words!", "Maram#wms01", bc_self;
		next;
		select( "I'm not that kind of person, though." );
		mes "[Maram]";
		mes "Oh, of course, what comes out of their mouth isn't the truth. It's just talk, that's all.";
		mes "By the way, a wolf cub? What wolf cub?";
		next;
		mes "[Scania]";
		mes "Oh! Isha brought back a Baby Grey Wolf from the forest not too long ago! She won't even listen when we tell her to take it back to the woods!";
		next;
		mes "[Scania]";
		mes "Do you know what that means? It's already causing trouble for our sheep! Even now, it's behaving like that. What will happen when it gets bigger? It will definitely harm our sheep!";
		mes "So, why don't you go and try saying it once! I won't listen to what you say!";
		next;
		mes "[Maram]";
		mes "Oh? That's actually a great suggestion. It would be a very constructive conversation. But what should I do? I have to tidy up the stuff I brought.";
		npctalk "Oh, what's with the awkward tone?", "Scania#wms01", bc_self;
		next;
		mes "[Maram]";
		mes "Ah, of course! Adventurer! Would you care to go? Explore this place, take in the sights, and perhaps make a lasting impression on the locals as well.";
		mes "Since we'll be staying here for a while anyway, right? Everyone here is as friendly and kind-hearted as I am, so you won't encounter any hostility.";
		next;
		mes "[Maram]";
		mes "Right, Scania?";
		next;
		mes "[Scania]";
		mes "......";
		npctalk "What's with the glare?", "Maram#wms01", bc_self;
		next;
		mes "[Maram]";
		mes "Just go and check whether what Aisha brought back is a real wolf cub or just a puppy that looks like a wolf.";
		npctalk "It's a wolf even without checking! I saw it all!", "Scania#wms01", bc_self;
		next;
		select( "What about verifying it?" );
		mes "[Maram]";
		mes "Oh... well, I haven't really thought that far. But wouldn't it be troublesome if it's really a wolf cub? Even a puppy would be a hassle in that case.";
		npctalk "Where would the trouble be?", "Scania#wms01", bc_self;
		next;
		mes "[Maram]";
		mes "Let me explain for our newly arrived adventurer. Here, the land is such that there aren't many animals suitable for raising.";
		next;
		mes "[Maram]";
		mes "Mostly, Skania takes care of the sheep and chickens. There are hardly any cattle or pigs that can adapt to such places. Therefore, livestock is really precious here.";
		next;
		mes "[Scania]";
		mes "But what if what Aisha is carrying is indeed a wolf cub?";
		next;
		mes "[Maram]";
		mes "The mother is coming to find her cub!";
		next;
		mes "[Scania]";
		mes "Even if the mother doesn't come looking for it?";
		next;
		mes "[Maram]";
		mes "The cub will grow up and start harming the livestock!";
		next;
		emotion ET_SWEAT, playerattached();
		mes "[Scania]";
		mes "Did you hear?";
		next;
		select( "Where should I go?" );
		mes "[Maram]";
		mes "Where did Aisha live again? Ah, right! <NAVI>[Upper Side]<INFO>wolfvill,99,178,0,101,0</INFO></NAVI>, if you go there, you'll find Aisha's house.";
		next;
		emotion ET_SWEAT, playerattached();
		mes "[Scania]";
		mes "But there's no point in saying it, right? If I persuade you, it might change your mind about me too.";
		npctalk "Skania, adventurer, you are not someone whose worth is judged by your opinion.", "Maram#wms01", bc_self;
		npctalk "Who said that? I'll take care of it.", "Scania#wms01", bc_self;
		next;
		mes "[Maram]";
		mes "Adventurer, then, please go and return safely! I'll take my leave for now too!";
		setquest 17510;
		close2;
		cloakonnpcself( "Maram#wms01" );
		end;
	case 1:
		mes "[Scania]";
		mes "<NAVI>[Aisha]<INFO>wolfvill,99,178,0,101,0</INFO></NAVI>, no matter how many times I say it to you, it won't make a difference, will it? If I persuade you, it might change my opinion of you too.";
		close;
	case 2:
		break;
	}
	switch( isbegin_quest(17512) ) {
	case 0:
		mes "[Scania]";
		mes "<NAVI>[Aisha]<INFO>wolfvill,99,178,0,101,0</INFO></NAVI> for a hundred days won't help? If you convince me, I'll change my opinion of you.";
		close;
	case 1:
		mes "[Scania]";
		mes "Woof woof. Today's walk is over now. I'm too tired.";
		next;
		mes "[Goat]";
		mes "Yaaawwwn---";
		next;
		mes "[Scania]";
		mes "I can't let you go alone. How can I send you to such a dangerous place alone? Of course, I know you can handle a walk by yourself, but I'm worried.";
		next;
		setnpcdisplay( "Boksil#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpcself( "Aisha#wms01" );
		cloakoffnpcself( "Boksil#wms01" );
		npctalk "Scania!", "Aisha#wms01", bc_self;
		mes "[Scania]";
		mes "Aisha? Why are you here? Did you come to return the wolf?";
		next;
		npctalk "Wow!!", "Boksil#wms01", bc_self;
		mes "[Scania]";
		mes "No, it's not like that. You brought the wolf... with you? In front of the sheep? Are you out of your mind?";
		next;
		mes "[Scania]";
		mes "Why on earth are you trying to raise a wolf? Do you need a dog? Then get a dog.";
		mes "No, I'll just become the dog. I'll mess up your house too and occasionally bite you.";
		next;
		mes "[Aisha]";
		mes "Scania, I heard your wishes loud and clear. So, did you even send a person to me? Are you treating me like some kind of a contractor, adventurer?";
		next;
		mes "[Aisha]";
		mes "Despite all your efforts, so what? This person has already sided with me! Hahaha! Come on, show me that face of despair!";
		next;
		mes "[Scania]";
		mes "What? Adventurer? You betrayed me? How could you do that? Betrayal at first sight, isn't that too much? I should have known. Outsiders like you can't be trusted.";
		next;
		mes "[Aisha]";
		mes "Scania, have you ever been to the Ice Caves? Is the blood flowing in your veins colder than the frozen water there? You cold-blooded one!";
		npctalk "What? Was that water frozen?", "Scania#wms01", bc_self;
		npctalk "No...?", "Aisha#wms01", bc_self;
		next;
		mes "[Aisha]";
		mes "How can you even suggest sending this small and fragile little creature back to such a dangerous place? Its mother is dead, and it can't survive on its own.";
		next;
		mes "[Scania]";
		mes "Its mother... is gone?";
		next;
		mes "[Aisha]";
		mes "I said that, didn't I? I told you a hundred times. You didn't listen again, did you? You just believe what you want to believe, right?";
		next;
		mes "[Aisha]";
		mes "I don't know about you, but I can't bear to send this small and fragile young wolf back to the market.";
		next;
		mes "[Scania]";
		mes "But if that wolf grows up, our sheep...";
		next;
		mes "[Aisha]";
		mes "Don't worry about that. Adventurer?";
		next;
		select( "Oh, do I need to talk about it?" );
		mes "[Aisha]";
		mes "You won't listen to me anyway. You never listen to me when I talk, and you only believe what other people say.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "This wolf cub will be fine if it is trained. If it grows up with other friends from a young age, it will not harm them and will instead protect the sheep.";
		next;
		mes "[Aisha]";
		mes "Did you hear me? Where is your refutation? Come on, smart genius! Sit down! Hands up!";
		emotion ET_WRAP, getnpcid(0,"Aisha#wms01");
		npctalk "Woof!!", "Boksil#wms01", bc_self;
		emotion ET_ROCK, getnpcid(0,"Boksil#wms01");
		npctalk "I'm glad you think so! You did a great job too! We're both genius!", "Aisha#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "It's true. But... but I don't know how long it will last... I don't know if it will be able to suppress its wild nature...";
		next;
		mes "[Scania]";
		mes "But most of all, I don't think you'll be able to train it that patiently.";
		npctalk "What are you looking at me for? Hey, come with me.", "Aisha#wms01", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I'll help you with any nervousness so you can be fully trained. I'll take him for walks so we can bond.";
		next;
		mes "[Scania]";
		mes "But...";
		next;
		mes "[Aisha]";
		mes "You said it was hard to keep chasing after the cub when he went for walks alone. Isn't this a good thing?";
		npctalk "A shepherd who is too lazy to feed his sheep.", "Aisha#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Are you sure you can take care of our wolf cub? I'm worried about him being outside with all the dangerous monsters.";
		next;
		mes "[Aisha]";
		mes "See those calluses on your hands, Adventurer? You said Maram brought him here, so he must be trustworthy. He's a veteran we trained in minutes!";
		npctalk "There's nothing you can't do!", "Aisha#wms01", bc_self;
		next;
		mes "[Scania]";
		mes "Oh, well... I can't help coming all the way here, so can I ask you a favor? Hehe.";
		next;
		mes "[Aisha]";
		mes "You're so excited, like you've been waiting for this moment. Aren't you taking it too cold?";
		next;
		mes "[Scania]";
		mes "Oh no~ You're so~ desperately~ asking!! So, I can't help but...";
		next;
		mes "[Aisha]";
		mes "Anyway... I need to talk to the villagers about the cub. Our little one is safe! Let's go, little cub!";
		npctalk "Woof!", "Boksil#wms01", bc_self;
		next;
		cloakonnpcself( "Aisha#wms01" );
		cloakonnpcself( "Boksil#wms01" );
		mes "[Scania]";
		mes "Oh... suddenly became a temporary shepherd, huh...? Thank you. I had a lot to do. What can I do to help?";
		next;
		mes "[Scania]";
		mes "Ah, right! Outsiders often like these sorts of things. Do you like it, adventurer? Even if you don't, you can exchange it for something you like with someone who does. Take it with you.";
		next;
		mes "[Scania]";
		mes "Sure, see you on our walk then.";
		mes "^4d4dffYou receive favorable evaluations.^000000";
		completequest 17512;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(17516,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Scania]";
		mes "Please wait the end of the quest delay.";
		close;
	case 2:
		erasequest 17516;
		break;
	}
	if (isbegin_quest(17515) == 1) {
		mes "[Scania]";
		mes "Adventurer, you've worked hard. I think our dog is also satisfied. Did you have a good meal time? Then, please try again tomorrow!";
		erasequest 17515;
		setquest 17516;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		close;
	}
	if (isbegin_quest(17514) == 1) {
		mes "[Scania]";
		mes "There are a few places the dog likes, and I will guide you. You only need to deal with dangerous monsters nearby.";
		next;
		mes "[Scania]";
		mes "It's a pain in the ass because ashrings rush in. Please take care of the surrounding ashrings. I usually catch 20 eagles a day. Then please.";
		close;
	}
	switch( isbegin_quest(17513) ) {
	case 0:
		mes "[Scania]";
		mes "Adventurer, I came on time for our walk. But Aisha didn't show up...";
		next;
		setnpcdisplay( "Boksil#wms01", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpcself( "Aisha#wms01" );
		cloakoffnpcself( "Boksil#wms01" );
		mes "[Aisha]";
		mes "Ta-da! We're here!";
		next;
		mes "[Boksil]";
		mes "Woof!!";
		next;
		mes "[Scania]";
		mes "Sure, I'll take you for a walk. Really... do I have to go too? Can I trust you to handle it?";
		next;
		if (select( "Alright then.", "I'm a bit busy today." ) == 2) {
			mes "[Scania]";
			mes "Ah... I see... You're busy. Well, then there's nothing to be done about it.";
			next;
			mes "[Scania]";
			mes "Oh, come on, look at my disappointed face. There's nothing I can do. Today, come with me. Well then, goodbye, adventurer!";
			close;
		}
		mes "[Aisha]";
		mes "If you're worried, you can come along.";
		next;
		mes "[Scania]";
		mes "h, no. Alright then, I'll leave it to you. Take care, pup. If you're worried or don't like it, let me know and come home. Got it?";
		next;
		mes "[Goat]";
		mes "Yahaaaaawwwn---";
		next;
		mes "[Scania]";
		mes "I'll guide you to a few places that the pup likes. He can find and eat on his own, so just take care of any nearby dangerous monsters.";
		next;
		mes "[Scania]";
		mes "Ashlings keep swarming and causing headaches... Please take care of the nearby Ashlings. We usually end up catching about 20 of them per day. So, I'd appreciate your help with that.";
		setquest 17513;
		close2;
		cloakonnpcself( "Boksil#wms01" );
		cloakonnpcself( "Goat#wms01" );
		navigateto("gw_fild01",138,106);
		end;
	case 1:
		mes "[Scania]";
		mes "I'll guide you to a few places that the pup likes. Just take care of any nearby dangerous monsters.";
		next;
		mes "[Scania]";
		mes "Ashlings keep swarming and causing headaches... Please take care of the nearby Ashlings. We usually end up catching about 20 of them per day. So, I'd appreciate your help with that.";
		close;
	case 2:
		end;
	}
	end;

OnTouch_:
	if (isbegin_quest(17510) == 0)
		npctalk "Hey, buddy, even if you want to go for a walk, try to be patient for a little while.", "Scania#wms01", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17510) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17512) == 1" );
	
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17512) == 2 && isbegin_quest(17515) == 1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17512) == 2 && isbegin_quest(17513) == 0 && isbegin_quest(17514) == 0 && (checkquest(17516,PLAYTIME) == -1 || checkquest(17516,PLAYTIME) == 2)" );
	end;
}

wolfvill,120,121,3	duplicate(dummy_cloaked_npc)	Maram#wms01	4_EP18_MARAM
wolfvill,119,117,1	duplicate(dummy_cloaked_npc)	Boksil#wms01	EP18_GREY_WOLF_BABY

// Quest: Training Grey Wolves. Step 2.
wolfvill,99,178,5	script	Aisha#wms02	4_F_SHABBY,{
	if (isbegin_quest(17512) == 1) {
		mes "[Aisha]";
		mes "We need to show Scania that our Boksil is safe and reliable!";
		close;
	}
	switch( isbegin_quest(17510) ) {
	case 0:
		mes "[Aisha]";
		mes "Do you want to see wolf cub poop? How cute is it? Oh, but don't touch it.";
		close;
	case 1:
		mes "[Aisha]";
		mes "Boksil~ Let's live together forever with me. If someone comes to harm you, I will personally bury them in the Oz Maze. So don't worry, Wolf Cub~ Just trust me and let's live happily.";
		next;
		mes "[Boksil]";
		mes "Woof---";
		emotion ET_FRET, getnpcid(0,"Boksil#wms02");
		next;
		mes "[Aisha]";
		mes "No, Boksil. Calm down a bit. Oh dear. What will happen if you still act unfamiliar? No, I'm not saying anything to you... Let's get closer, shall we?";
		next;
		mes "[Boksil]";
		mes "Roaarrrr---";
		next;
		mes "[Aisha]";
		mes "I understand, I understand. You need some time alone. Honestly, I feel the same way. In the end, we're all alone in this world. So let's live well on our own while still living together.";
		next;
		mes "[Boksil]";
		mes "Roarrrrrr---";
		next;
		mes "[Aisha]";
		mes "Why? What did I do...... Huh? Who are you? I've never seen you before.";
		npctalk "Our Boksil, did she become cautious because a stranger came? Oh, well done~", "Aisha#wms02", bc_self;
		npctalk "Roar--", "Boksil#wms02", bc_self;
		next;
		select( "So this is the wolf cub?" );
		mes "[Aisha]";
		mes "Don't get too close to my wolf cub. Put your hands down. Turn around and disappear.";
		next;
		select( "I'm not a bad guy..." );
		mes "[Aisha]";
		mes "I don't call anyone a bad people. Anyone who tells me to abandon my wolf cub is a villain. And I show no mercy to villains.";
		next;
		select( "How long have you been here?" );
		mes "[Aisha]";
		mes "I can't disclose that as it's personal information. Why do you ask?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "No, this wolf cub, I don't think he's trained yet.";
		next;
		mes "[Aisha]";
		mes "... No, that's. She's about a month old now. There's no way she can train while she's still a baby. ";
		next;
		select( "Actually, I'm here to..." );
		mes "[Aisha]";
		mes "What? I knew it! Get at least 10 paces away from my wolf cub right now. Don't come any closer.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I am not here to take her, I am here to check on here... If she separated from the pack, we have to put them back, and we have to be prepared for the mother wolf to come looking for them.";
		next;
		mes "[Aisha]";
		mes "She's not stray out of the pack, she was picked up next to next to its dying mother wolf.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Oops. It's probably nervous about being separated from his mother and living in a strange place.";
		next;
		mes "[Aisha]";
		mes "Are you sure you're not here to take her away, then why are you here?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I did come to persuade after confirming whether it was indeed a wolf cub...";
		next;
		mes "[Aisha]";
		mes "I knew it! Sent by Scania, right? Why are you meddling with other people's pets? Our wolf cub isn't dangerous, so go back. There's nothing more to see.";
		next;
		select( "As long as you're careful, there's nothing to worry about." );
		mes "[Aisha]";
		mes "Do you really think so? Do you really think our wolf cub could be a potential threat? Look at how small and cute she is...";
		npctalk "Roarr--", "Boksil#wms02", bc_self;
		npctalk "Oh, does Boksil not like compliments? Alright, alright.", "Aisha#wms02", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "You might have thought so under normal circumstances, but... if she doesn't have a mother, at least there wouldn't be any reason for wolves to come here.";
		next;
		mes "[Aisha]";
		mes "I understand what you're saying! But stupid Scania doesn't know that! Even a complete stranger like you understands my heart so well!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Moreover, this motherless wolf cub wouldn't be able to survive on its own.";
		next;
		mes "[Aisha]";
		mes "That's right! That cold-hearted one has turned ice-cold right down to the head.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "However, for Boksil to live in the village, she needs training. She must learn how to interact with others without causing harm and how to get along.";
		next;
		mes "[Aisha]";
		mes "She is still so young...?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "It should be done when she's young. If we start training it from a young age, there won't be any of the concerns the villagers have.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Firm tone, immediate response, and sufficient praise will be enough for it to understand well. Wolves are smart, you know. What does wolf cub like the most?";
		next;
		mes "[Aisha]";
		mes "Hm... Meat? But there isn't any right now. Do adventurers have some?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Oh...! There's no meat to give as a snack, meat... I need to bring some meat.";
		completequest 17510;
		setquest 17511;
		close;
	case 2:
		mes "[Aisha]";
		mes "How are you supposed to train with meat? You only need one?";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17510) == 1" );
	end;
}

// Quest: Training Grey Wolves. Step 3.
wolfvill,100,177,1	script	Boksil#wms02	EP18_GREY_WOLF_BABY,{
	if (checkweight(1000405,10) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	switch( isbegin_quest(17511) ) {
	case 0:
		emotion ET_QUESTION;
		npctalk "Woof?", "", bc_self;
		mes "[Aisha]";
		mes "Oh, don't touch our Boksil! She doesn't like it!";
		close;
	case 1:
		if (countitem(517) < 1) {	// Meat
			mes "[Aisha]";
			mes "Didn't you say you needed a chunk of meat? is not it?";
			close;
		}
		mes "[" + strcharinfo(0) + "]";
		mes "Hello~ I am " + strcharinfo(0) + ". Your name is Boksil, right? Nice to meet you. Are you feeling anxious in this unfamiliar place? I know exactly how you feel, I know everything about you.";
		next;
		emotion ET_FRET, getnpcid(0,"Boksil#wms02");
		mes "[Boksil]";
		mes "Roarrr---";
		npctalk "Is everything okay? You seem uncomfortable.", "Aisha#wms02", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "But it's okay. Everything's fine. There's no one here who would harm our Boksil. Don't worry.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Now we're all living together. With a warm shelter and delicious food to eat.";
		mes "Then we need to establish some rules. Okay?";
		next;
		emotion ET_QUESTION, getnpcid(0,"Boksil#wms02");
		mes "[Boksil]";
		mes "Woof?";
		next;
		mes "[Aisha]";
		mes "I feel like I'm talking to a child.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Here, look. Meat. Does Boksil like meat? Grilled, raw, or boiled? You've never tried grilled? That's okay, you'll have plenty of opportunities to try it in the future.";
		next;
		emotion ET_THROB, getnpcid(0,"Boksil#wms02");
		mes "[Boksil]";
		mes "Woof!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Let's do it right.";
		mes "Boksil, sit down!";
		mes "Wait!";
		mes "Well done. Here is your meat.";
		emotion ET_THROB, getnpcid(0,"Boksil#wms02");
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Did you see? If she follows instructions like this, please give her a lot of praise.";
		next;
		mes "[Aisha]";
		mes "Mom, Mom. Isn't our child a real genius?";
		mes "Our Boksil did a great job!!!!";
		emotion ET_GOODBOY, getnpcid(0,"Boksil#wms02");
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "We need to keep doing this until she gets used to it. Repetitive training is important. Just keep doing it like you're doing now.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Boksil, sit.";
		mes "Hand.";
		mes "Wait. Now, try it yourself.";
		next;
		mes "[Aisha]";
		mes "Boksil, sit!";
		mes "Hand!";
		mes "Wow, that's really amazing.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Training these kinds of domestic animals varies. Making them feel secure in this place and building a good bond with them will help them settle in well.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "And if they also interact with other friends and spend time together from a young age, they should get along well without any major issues.";
		next;
		mes "[Aisha]";
		mes "Do people recognize that?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "You just need to show them what you've done. It shows that Boksil is ready to live as a member of this village.";
		mes "Let's go back to <NAVI>[Scania]<INFO>wolfvill,117,119,0,101,0</INFO></NAVI> and show off our wonderful and majestic Boksil.";
		delitem 517,1;	// Meat
		completequest 17511;
		setquest 17512;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		close;
	case 2:
		mes "[Aisha]";
		mes "Boksil is cute. But we're going to <NAVI>[Scania]<INFO>wolfvill,117,119,0,101,0</INFO></NAVI> right? Don't forget.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17511) == 1 && countitem(517) > 0" );
	end;
}
//-------------------------------------------------------------------

// Quest: Training Grey Wolves. Daily.
gw_fild01,138,106,5	script	Grass#wms01	4_POINT_YELLOW,5,5,{
	if (isbegin_quest(17513) == 1) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "Yahaha?", "Goat#wms02", bc_self;
		sleep2 2000;
		setnpcdisplay( "Boksil#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		erasequest 17513;
		setquest 17514;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Already here. Do you like it here? Oh... There's no grass here. Let's look for another place. Do you have any place in mind?", bc_self;
		sleep2 1500;
		npctalk "Yaaaaa!", "Goat#wms02", bc_self;
		sleep2 1500;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpcself( "Goat#wms02" );
		cloakonnpcself( "Boksil#wms03" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		unittalk getcharid(3), "" + strcharinfo(0) + " : Already gone. Let's get Ashring!", bc_self;
		end;
	}
	if (checkquest(17514,HUNTING) == 2) {
		setpcblock PCBLOCK_NPC, true;
		setnpcdisplay( "Boksil#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpcself( "Goat#wms02" );
		cloakoffnpcself( "Boksil#wms03" );
		erasequest 17514;
		setquest 17515;
		unittalk getcharid(3), "Are you full?", bc_self;
		sleep2 1000;
		npctalk "Yah ha ha!", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "Did Boksil take good care of the dog?", bc_self;
		sleep2 1000;
		npctalk "Woof!!!", "Boksil#wms03", bc_self;
		sleep2 1500;
		unittalk getcharid(3), "Good job. Let's go home!!!", bc_self;
		cloakonnpcself( "Goat#wms02" );
		cloakonnpcself( "Boksil#wms03" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	end;
OnTouch:
	if (isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2) {
		cloakoffnpcself( "Goat#wms02" );
		cloakoffnpcself( "Boksil#wms03" );
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2" );
	end;
}

gw_fild01,160,104,0	script	Delicious grass#wms11	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(17513) == 1 || checkquest(17514,HUNTING) == 2) {
		cloakoffnpcself( "Goat#wms02" );
		cloakoffnpcself( "Boksil#wms03" );
	}
	end;
}
gw_fild01,26,101,0	duplicate(Delicious grass#wms11)	#wms01	HIDDEN_WARP_NPC,3,3

gw_fild01,138,106,3	script(CLOAKED)	Goat#wms02	EP18_GREY_GOAT,{
	if (isbegin_quest(17513) == 1) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "Yah ha ha?", "", bc_self;
		sleep2 2000;
		setnpcdisplay( "Boksil#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		erasequest 17513;
		setquest 17514;
		unittalk getcharid(3), "You've already been here. Do you like it? Ah.. There is no grass here. Let's find another place. Is there any place you want?", bc_self;
		sleep2 1500;
		npctalk "Yah ha ha!", "", bc_self;
		sleep2 1500;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpcself( "Goat#wms02" );
		cloakonnpcself( "Boksil#wms03" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		unittalk getcharid(3), "Already gone. Let's catch Ashling!!", bc_self;
		end;
	}
	if (checkquest(17514,HUNTING) == 2) {
		setpcblock PCBLOCK_NPC, true;
		setnpcdisplay( "Boksil#wms03", 21324 );	// EP18_GREY_WOLF_BABY
		cloakoffnpcself( "Goat#wms02" );
		cloakoffnpcself( "Boksil#wms03" );
		erasequest 17514;
		setquest 17515;
		unittalk getcharid(3), "Are you full?", bc_self;
		sleep2 1000;
		npctalk "Yah ha ha!", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "Did Boksil take good care of the dog?", bc_self;
		sleep2 1000;
		npctalk "Woof!!!", "Boksil#wms03", bc_self;
		sleep2 1500;
		unittalk getcharid(3), "Good job. Let's go home!!!", bc_self;
		cloakonnpcself( "Goat#wms02" );
		cloakonnpcself( "Boksil#wms03" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		setpcblock PCBLOCK_NPC, false;
		end;
	}
	end;
}

gw_fild01,137,104,7	duplicate(dummy_npc)	Boksil#wms03	CLEAR_NPC
//-------------------------------------------------------------------



//-------------------------------------------------------------------
// Quest: Ahab's Request. Step 1 + 8 (final).
wolfvill,85,111,3	script	Zlan#ep18	4_M_RACHMAN1,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36) {
		mes "[Zlan]";
		mes "Why are you eavesdropping on other people's conversations?";
		close;
	}
	switch( isbegin_quest(16560) ) {
	case 0:
		mes "[Zlan]";
		mes "Uh, once again at the village meeting, all they did was talk nonsense, that old man.";
		next;
		mes "[Redcell]";
		mes "That old man? Ah, the one whose name cannot be mentioned?";
		next;
		mes "[Zlan]";
		mes "I mean, I can't mention it.";
		mes "I heard he was someone important in Rahel, said to have some influence in the Gray Wolf Forest.";
		next;
		mes "[Zlan]";
		mes "That old man, whether it's Ahap or Ahab!";
		mes "He doesn't act like that when he's in Rachel~ He must have messed up~";
		next;
		mes "[Zlan]";
		mes "If that's the case, why bother coming here instead of staying in Rachel?";
		mes "I really don't understand!";
		next;
		mes "[Karr]";
		mes "Does she still not realize she's in Rachel?";
		mes "Even sleeping in a drafty tent, hasn't she woken up from her dream yet?";
		next;
		mes "[Zlan]";
		mes "If you want to dream, do it alone.";
		mes "Why bother others with your troubles?";
		next;
		mes "[Redcell]";
		mes "Who do you think you are, eavesdropping on our conversation?";
		mes "Are you the Ahab old man's spy?";
		next;
		mes "[Karr]";
		mes "You're not even smart enough to cultivate weeds like Ahab.";
		mes "So, who are you? Eavesdropping on others' gossip. Shameful.";
		next;
		select( "Just a passing traveler." );
		mes "[Zlan]";
		mes "Liar. Where's a passing traveler in this Gray Wolf Forest?";
		mes "They must be related to us somehow.";
		next;
		mes "[Redcell]";
		mes "If you won't speak, we'll have to use force to make you.";
		mes "Are you really just going to keep lying?";
		next;
		mes "[Karr]";
		mes "Calm down, Redcell. Even if Zlan is not a passing traveler, there could still be someone here we don't know about but wouldn't be out of place.";
		next;
		mes "[Zlan]";
		mes "Who would that be?";
		setquest 16560;
		close;
	case 1:
		mes "[Zlan]";
		mes "Now that Ahab is starting to listen to people... He doesn't seem like such a bad person after all.";
		mes "Yeah, that's just how adults communicate.";
		next;
		mes "[Zlan]";
		mes "It's a relief that they don't end up causing too much trouble by just blocking each other's ears and shouting";
		mes "Thanks to you. I appreciate it.";
		close;
	case 2:
		break;
	}
	if (isbegin_quest(16566) == 1) {
		mes "[Zlan]";
		mes "You're back? What did Ahab say?";
		mes "What? He said he'll start listening to others now?";
		next;
		mes "[Zlan]";
		mes "I guess he hasn't been listening until now.";
		next;
		mes "[Kayar]";
		mes "Hmph... Don't tease, Zlan.";
		mes "What matters now is that he's decided to do it properly.";
		next;
		mes "[Redcell]";
		mes "Ya, ya.";
		mes "Why did Dah... I mean, Ahab change his mind?";
		mes "You must have convinced him, being a high-ranking or well-connected person.";
		next;
		mes "[Redcell]";
		mes "Thanks to you, we don't have to kick people out of here anymore.";
		mes "Even though he said he'd do it, it was still uncomfortable.";
		next;
		mes "[Kayar]";
		mes "I may not be a representative at the village meetings... but we'll show some courtesy.";
		mes "We're lucky to have someone like you.";
		completequest 16566;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes " ";
		mes "^4d4dffA favorable evaluation of you occurs.^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		close;
	}
	if (isbegin_quest(16566) == 2) {
		mes "[Zlan]";
		mes "Now that Ahab is starting to listen to people... He doesn't seem like such a bad person after all.";
		mes "Yeah, that's just how adults communicate.";
		next;
		mes "[Zlan]";
		mes "It's a relief that they don't end up causing too much trouble by just blocking each other's ears and shouting";
		mes "Thanks to you. I appreciate it.";
		close;
	}
	mes "[Zlan]";
	mes "I hope you'll leave if you don't intend to follow the rules of this forest.";
	mes "You're no different. Rules are meant to be followed.";
	next;
	mes "[Zlan]";
	mes "The same goes for manners. A society without manners and rules? Barbaric.";
	mes "I don't want to be in a state of wilderness!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16560) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16566) == 1" );
	end;
}

// Quest: Ahab's Request. Step 2.
wolfvill,83,109,5	script	Karr#ep18	4W_M_03,{
	switch( isbegin_quest(16560) ) {
	case 0:
		mes "[Karr]";
		mes "Ah, it's troubling. There's a bothersome issue.";
		next;
		mes "[Karr]";
		mes "It's a problem with relationships, so I don't want to talk to someone I don't know...";
		close;
	case 1:
		mes "[Karr]";
		mes "Would it make sense to speak if it's an important guest?";
		mes "Since we can't even know about the affairs of the leaders here.";
		next;
		mes "[Zlan]";
		mes "Is that true?";
		mes "...Well, if it's a secret to us, then maybe they won't tell us.";
		next;
		mes "[Redcell]";
		mes "If they're really important, then listen to us.";
		mes "If not? They're probably still someone important. Listen.";
		next;
		mes "[Redcell]";
		mes "That elder... no, that's just a nickname we use among ourselves.";
		mes "How can we help that Mr. Ahap?";
		next;
		mes "[Zlan]";
		mes "He's a really bothersome old man, that guy!";
		mes "He always interrupts village meetings and talks nonsense.";
		next;
		mes "[Zlan]";
		mes "He doesn't listen to others and just keeps rambling on, and it's not even useful.";
		mes "He insists he's an elder, so we should listen to him, but it's so frustrating.";
		next;
		mes "[Zlan]";
		mes "I heard he used to boss around the immigrants and live off them.";
		mes "Thinking he can tell the natives what to do based on his past is ridiculous.";
		next;
		mes "[Karr]";
		mes "I just want to chase him away if I can.";
		mes "Maybe if we gather our opinions and assert ourselves strongly.";
		next;
		mes "[Redcell]";
		mes "Hey, even if that's true, it's not right.";
		mes "This is where people with nowhere else to go gather.";
		next;
		mes "[Redcell]";
		mes "If we drive him away, he'll have nowhere to go.";
		next;
		mes "[Zlan]";
		mes "But do we have to put up with that charade forever?";
		mes "I have nowhere else to go either, so can I just start acting however I want?";
		next;
		mes "[Karr]";
		mes "If you do that, then we'll both be charades. I can't stand it...";
		next;
		mes "[Redcell]";
		mes "Hey, you there, high and mighty! You seem really interested in our affairs, still listening?";
		mes "Even if you're not high and mighty, it doesn't matter. Someone with a broad reach!";
		completequest 16560;
		setquest 16561;
		close;
	case 2:
		break;
	}
	if (isbegin_quest(16566) == 2) {
		mes "[Karr]";
		mes "People rarely change... was I witnessing one of those rare changes?";
		next;
		mes "[Karr]";
		mes "It might still need more time, but Mr. Ahap, until now, seems like he could be a good neighbor.";
		close;
	}
	mes "[Karr]";
	mes "In our village, only important people don't participate in village management meetings.";
	mes "Of course, the decisions themselves are made by the important people, but still...";
	next;
	mes "[Karr]";
	mes "So, there's no one who interferes with the meetings just because they attend.";
	mes "Except for that Mr. Ahap.";
	next;
	mes "[Karr]";
	mes "I don't like that attitude, not at all...";
	mes "The longer it goes on, the worse the impact will be.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16560) == 1" );
	end;
}

// Quest: Ahab's Request. Step 3.
wolfvill,87,109,3	script	Redcell#ep18	4_M_DESERT,{
	if (isbegin_quest(16566) == 2) {
		mes "[Redcell]";
		mes "Mr. Ahab, you seem to be becoming more bearable to be around.";
		mes "There's still a lot to watch out for, but compared to before, you're much better now.";
		next;
		mes "[Redcell]";
		mes "Watching someone change is a sacred moment.";
		mes "I should also try harder to behave like a human.";
		close;
	}
	if (isbegin_quest(16562) == 1) {
		mes "[Redcell]";
		mes "Make that old Mr. Ahab into a person.";
		mes "Shouldn't a person look like a person and act like a person...?";
		next;
		mes "[Redcell]";
		mes "Is it too much criticism? ...Well, I'll admit it's a bit much.";
		mes "But after working together, you'll see for yourself.";
		close;
	}
	if (isbegin_quest(16561) == 1) {
		mes "[Redcell]";
		mes "Have you heard everything up to now?";
		mes "You're the only one who can help us solve this suffering.";
		next;
		mes "[Zlan]";
		mes "Since there's really no solution, if it doesn't work out, I'll suggest expulsion from the village by gathering opinions.";
		next;
		mes "[Redcell]";
		mes "Geez, let's put that off for later...";
		mes "But in the end, that'll probably be the last solution.";
		next;
		mes "[Karr]";
		mes "It's not just us who are bothered, so if we propose it, it'll be accepted.";
		mes "Everyone attending the village meeting is in trouble.";
		next;
		mes "[Redcell]";
		mes "But! Let's leave that for later.";
		mes "Help me a bit before the end comes. Bro.";
		next;
		mes "[Karr]";
		mes "We can't communicate with that old man.";
		mes "Why don't you go and talk to him?";
		next;
		mes "[Redcell]";
		mes "Wow, that sounds great. Go and talk to him, find out why he's like that, if it's possible for him not to be like that.";
		mes "It's a real lifetime request.";
		next;
		mes "[Zlan]";
		mes "Do it as a lifetime request. I'm saving it for when I get a lover.";
		next;
		mes "[Redcell]";
		mes "Yeah, that's fine. I won't be dating anyone.";
		mes "So that's my lifelong wish. Make that old grump into a person.";
		next;
		mes "[Karr]";
		mes "It seems like your wish is getting bigger.";
		mes "Anyway, please do it. Go and talk to Mr. Ahap. ";
		erasequest 16561;
		setquest 16562;
		close;
	}
	mes "[Redcell]";
	mes "Someone who can't understand a word! Someone stupid! Someone who makes you say things again! Someone who shows emotions in their work!";
	next;
	mes "[Redcell]";
	mes "Someone who hides their mistakes and then can't undo them! Someone who can't take responsibility for their own actions!";
	next;
	mes "[Redcell]";
	mes "It's just disgusting!";
	next;
	mes "[Redcell]";
	mes "Why do so many people hate you like this?";
	mes "No, I hate just one person... Just one person!";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16561) == 1" );
	end;
}

// Quest: Ahab's Request. Step 4 + 6 + 7.
wolfvill,127,155,3	script	Ahab#ep18	4_M_MIDDLE1,{
	if (ep18_main < 36) {
		mes "[Ahab]";
		mes "Oh, someone new. Are you a resident here?";
		mes "Heh heh, it's natural for those in power to have trouble remembering everyone. You'll understand.";
		next;
		mes "[Ahab]";
		mes "Who am I? Why, I'm none other than Ahab, of course.";
		mes "I'm the one who goes all the way to the council that decides everything in the village, that's me.";
		close;
	}
	if (isbegin_quest(16566) == 1) {
		mes "[Ahab]";
		mes "I, I'm also trying my best.";
		mes "So please don't chase me away.";
		next;
		mes "[Ahab]";
		mes "If I get chased away from here, I have nowhere else to go.";
		mes "So I've been trying to do my best in my own way. But if everyone dislikes me.";
		close;
	}
	if (isbegin_quest(16565) == 1) {
		mes "[Ahab]";
		mes "Tsk tsk, alright, let's hear about manners, Ahab.";
		mes "If you keep babbling nonsense, I won't forgive you!";
		next;
		select( "Do you know that people dislike you, Ahab?" );
		mes "[Ahab]";
		mes "Ah... I know! So what!";
		mes "Is it my fault? They mock the elders for being old!";
		next;
		select( "That's not the issue.", "It's your problem, Ahab." );
		mes "[Ahab]";
		mes "What do you mean I have a problem!";
		mes "I don't have any problems!";
		next;
		select( "You're considering sending me away from here." );
		mes "[Ahab]";
		mes "What, what did you say? That's not possible!";
		mes "I have nowhere else to go but here.";
		next;
		mes "[Ahab]";
		mes "In Rachel... everything was going well...";
		mes "Among the locals, it was a pride that no one was as successful as me.";
		next;
		mes "[Ahab]";
		mes "But due to a misunderstanding with the immigrant boss...";
		mes "I lost all my wealth and had nowhere else to go, so I came here.";
		next;
		mes "[Ahab]";
		mes "Hey. How can I avoid being sent away from here?";
		next;
		mes "[Ahab]";
		mes "I know it. That I have no power here.";
		mes "Huh? I have no power or money now. What should I do?";
		next;
		select( "You don't need power and money.", "Treat people with respect." );
		mes "[Ahab]";
		mes "Hmm, I'm doing my best.";
		mes "I give advice to young people and attend village meetings to voice my opinions.";
		next;
		mes "[Ahab]";
		mes "Is my effort wrong?";
		next;
		select( "Don't think of yourself as superior." );
		mes "[Ahab]";
		mes "But I'm an adult! Is it wrong for an adult to expect to be treated as an adult?";
		next;
		select( "Then, perhaps you should leave...." );
		mes "[Ahab]";
		mes "Hmm, hmm... What should I do!";
		next;
		select( "Don't shout first.", "Unsolicited advice about the situation is just nagging.", "Listen to what others have to say.", "Try to learn about this place." );
		mes "[Ahab]";
		mes "Ah... I see. Since I've listened to your advice.";
		mes "I didn't even raise my voice, did I?";
		next;
		mes "[Ahab]";
		mes "I'll try to listen to your advice.";
		mes "So... please don't chase me away from here.";
		next;
		mes "[Ahab]";
		mes "I just wanted to get along well with the young people...";
		mes "Was that so upsetting? It's a bit bitter....";
		next;
		mes "[Ahab]";
		mes "Anyway, thanks for coming to talk instead of immediately chasing me away.";
		mes "Tell <NAVI>[Other People]<INFO>wolfvill,85,111,0,101,0</INFO></NAVI> that I'll try to do better now....";
		erasequest 16565;
		setquest 16566;
		close;
	}
	if (isbegin_quest(16564) == 1) {
		mes "[Ahab]";
		mes "Oh, did you buy the cucumber sauce? Let me see. ";
		mes "You bought the right one.";
		next;
		mes "[Ahab]";
		mes "So, where should we try to eat?";
		mes "I haven't had a proper meal in that watered-down place for a while, I'm quite hungry.";
		next;
		select( "But first, let's talk..." );
		mes "[Ahab]";
		mes "Oh, you impudent young one!";
		mes "When an elder is about to eat, one must wait politely until the end!";
		next;
		mes "[Ahab]";
		mes "In Rachel, if there were someone like you, they would've scolded us for not learning anything!";
		next;
		select( "This is about manners, Ahab." );
		mes "[Ahab]";
		mes "Ahab? Ahab? No, are you boasting because you ran an errand now!";
		mes "If you run an errand twice, then, oh, you'll become best buddies with them and have dinner!";
		next;
		mes "[Ahab]";
		mes "Alright, let's hear your precious words then!";
		mes "......While we eat!";
		erasequest 16564;
		setquest 16565;
		close;
	}
	if (isbegin_quest(16563) == 1) {
		mes "[Ahab]";
		mes "Why aren't you going already? Can't you understand my words?";
		mes "Sigh, the young ones here just can't learn any manners.";
		next;
		mes "[Ahab]";
		mes "Hurry up and go to <NAVI>[Munomart]<INFO>rachel,135,64,0,101,0</INFO></NAVI> and buy cucumber sauce!";
		mes "What, do I have to give you money? Hurry up and go!";
		close;
	}
	if (isbegin_quest(16562) == 1) {
		mes "[Ahab]";
		mes "Oh, someone new. Are you a resident here?";
		mes "Heh heh, it's natural for those in power to have trouble remembering everyone. You'll understand.";
		next;
		mes "[Ahab]";
		mes "Right, while you're here, could you do me a favor?";
		mes "It's not difficult. It's a simple task that even a fool could do.";
		next;
		mes "[Ahab]";
		mes "It's just that someone like me has different values of time available to them.";
		mes "Of course, I'm expensive. Haha!";
		next;
		if (select( "I'll run the errand for you.", "I'm not here for that kind of thing." ) == 2)
			end;
		mes "[Ahab]";
		mes "Oh, how noble of you.";
		mes "Yes, a young person should have a bit of nobility.";
		next;
		mes "[Ahab]";
		mes "You see, there's a delicious sauce that I must have with my meals.";
		mes "Without it, it feels like I haven't eaten anything at all...";
		next;
		mes "[Ahab]";
		mes "So, go to Rachel and buy some sauce.";
		mes "If you ask for cucumber sauce at Munomart, they'll understand.";
		next;
		mes "[Ahab]";
		mes "Hurry, or it'll go bad. Just get one bottle from <NAVI>[Munomart]<INFO>rachel,135,64,0,101,0</INFO></NAVI>.";
		mes "Freshness is key to good taste.";
		erasequest 16562;
		setquest 16563;
		close;
	}
	mes "[Ahab]";
	mes "At the meeting, I try to be humble.";
	mes "Then the young men's eyes became softer...";
	next;
	mes "[Ahab]";
	mes "I think it might be a little to say that it's not a change, but an attitude, and the world is changing. There is no one who doesn't change.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16562) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16564) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16565) == 1" );
	end;
}

// Quest: Ahab's Request. Step 5.
rachel,135,64,3	script	Shopkeeper#ep18	4_M_RACHMAN2,{
	if (isbegin_quest(16563) == 1) {
		mes "[Shop Owner]";
		mes "Welcome, this is Munomart grocery store.";
		mes "What ingredients are you looking for?";
		next;
		if (select( "Obirerger Sauce", "Obiger Sauce", "Oiger Sauce", "Oiger Sauce" ) != 3) {
			mes "[Shop Owner]";
			mes "Hmm? We don't have that sauce.";
			mes "I've never even heard of a sauce with that name before.";
			close;
		}
		mes "[Shop Owner]";
		mes "Ah, Oiger Sauce! Let me see... Here it is.";
		mes "This sauce contains cucumber and yogurt, so it's very refreshing. It tastes great when spread on bread.";
		next;
		mes "[Shop Owner]";
		mes "How many would you like? One? Here you go.";
		mes "Store it in a cool place and consume it quickly after opening the seal.";
		erasequest 16563;
		setquest 16564;
		close;
	}
	mes "[Shop Owner]";
	mes "Welcome, this is Munomart grocery store.";
	mes "It's Rachel's best grocery store, yes.";
	next;
	mes "[Shop Owner]";
	mes "Most restaurants use our ingredients.";
	mes "Just take them home, heat them up, cook them, and voila! You'll have a great meal in no time!";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16563) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Collecting Folklore. Step 1 + 5 (final).
wolfvill,61,170,5	script	Folklorist Gudra#ep18	4_F_SHABBY,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36) {
		mes "[Folklorist Gudra]";
		mes "I assume you must be a new villager around here. Who are you?";
		close;
	}
	switch( isbegin_quest(16554) ) {
	case 0:
		if ((isbegin_quest(16551)+isbegin_quest(16552)+isbegin_quest(16553)) == 0) {
			select( "Scholar, what are you doing?" );
			mes "[Folklorist Gudra]";
			mes "Oh, oh oh.";
			mes "...Do I seem like a scholar to you?";
			next;
			select( "You're not a scholar?" );
			mes "[Folklorist Gudra]";
			mes "No! I used to be a scholar. Long time ago.";
			mes "I'm pleased that someone from outside immediately recognizes me as a Scholar.";
			next;
			mes "[Folklorist Gudra]";
			mes "Hmm, hmm. What are you asking about what I'm doing.";
			mes "I'm organizing the collected stories.";
			next;
			mes "[Folklorist Gudra]";
			mes "It's about gathering the myths and folk tales handed down to us.";
			mes "It's also about preserving the precious cultural heritage of indigenous people.";
			next;
			mes "[Folklorist Gudra]";
			mes "To ensure that these stories are not lost and can be passed down to future generations, we'll publish them as books.";
			next;
			mes "[Folklorist Gudra]";
			mes "It seems like you're interested.";
			mes "...Are you interested in this work?";
			next;
			if (select( "Interested.", "Not interested." ) == 2)
				end;
			mes "[Folklorist Gudra]";
			mes "So, your interest means you're willing to help?";
			mes "Extra hands are always welcome. I would be glad if you could assist.";
			next;
			mes "[Folklorist Gudra]";
			mes "Do you know how to write? Excellent.";
			mes "Please gather stories from the villagers.";
			next;
			mes "[Folklorist Gudra]";
			mes "I've promised to listen to the stories of one child, one young person, and one grandmother from the village.";
			next;
			mes "[Folklorist Gudra]";
			mes "They say it's a long story, so we may not finish in one day. We'll need your patience.";
			mes "Here, I'll give you a notebook for gathering stories.";
			next;
			mes "[Folklorist Gudra]";
			mes "The child's name is Dinar. The young person is a woman named Amira.";
			mes "After that, you can go to Grandma Shania and write down her story.";
			setquest 16551;
			setquest 16552;
			setquest 16553;
			getitem 1000408,1;	// Ep18_Recording_Note
			close;
		}
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		mes "[Folklorist Gudra]";
		mes "We've made a promise to listen to stories from one child, one young person, and one grandmother in the village.";
		next;
		mes "[Folklorist Gudra]";
		mes "Since it's a long story and can't be heard all in one day, we'll need your patience to help us through it.";
		next;
		mes "[Folklorist Gudra]";
		mes "The child's name is Dinar. The young woman is called Amira.";
		mes "Next, go to Grandma Shanina's place, listen to her story, and write it down.";
		close;
	case 1:
		mes "[Folklorist Gudra]";
		mes "Dinar and Amira, did you come to tell stories to Granny Shannina?";
		mes "I'm excited to hear what stories they are. Please show me the notebook.";
		next;
		mes "[Folklorist Gudra]";
		mes "Is this the story Amira told you?";
		mes "It's really diverse and wonderful! I also remember hearing stories about these gods when I was young.";
		next;
		mes "[Folklorist Gudra]";
		mes "But the names of the animal gods in this story are similar to the ones I heard when I was young, but a little different.";
		mes "Hmm, I'll need to do some research.";
		next;
		mes "[Folklorist Gudra]";
		mes "These are great stories that fuel my research interests!";
		mes "Please continue to record Amira's stories for me in the future.";
		next;
		mes "[Folklorist Gudra]";
		mes "I'd appreciate it if you could come back tomorrow and record the next part of this story.";
		mes "Thank you. This is your payment for today's work.";
		delitem 1000408,1;	// Ep18_Recording_Note
		completequest 16554;
		setquest 16559;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes " ";
		mes "^4d4dffA favorable evaluation of you occurs.^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		close;
	case 2:
		break;
	}
	switch( checkquest(16559,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Folklorist Gudra]";
		mes "As much as I'd like to hear all the stories today...";
		mes "Both of you, the adventurer and the people would tire out.";
		next;
		mes "[Folklorist Gudra]";
		mes "Take a good rest for the remaining day, and please come back after dawn.";
		mes "During that time, I'll organize and analyze the stories you've gathered.";
		close;
	case 2:
		erasequest 16559;
		break;
	}
	switch( isbegin_quest(16558) ) {
	case 0:
		if ((isbegin_quest(16555)+isbegin_quest(16556)+isbegin_quest(16557)) == 0) {
			mes "[Folklorist Gudra]";
			mes "We appreciated your last visit.";
			mes "Today, we would also like to record our conversation.";
			next;
			mes "[Folklorist Gudra]";
			mes "Dinar and Amira, please go to Grandma Shanina and listen to her story, then write it down.";
			mes "Here are some blank notebooks for you.";
			next;
			if (select( "I'll go.", "It's difficult right now." ) == 2) {
				mes "[Folklorist Gudra]";
				mes "Ah, is it difficult right now? It's okay, we can do it later.";
				mes "Just remember, this work requires patience and persistence.";
				next;
				mes "[Folklorist Gudra]";
				mes "We're already colleagues on the same path, aren't we?";
				mes "If it's tough, you can take a break. As long as we keep moving forward steadily.";
				close;
			}
			mes "[Folklorist Gudra]";
			mes "Thank you for always being willing to help.";
			mes "I will repay this kindness by making a good storybook.";
			next;
			mes "[Folklorist Gudra]";
			mes "Oh, of course, I'll make sure you're paid for your work today too.";
			mes "That's important too, isn't it? I understand.";
			setquest 16555;
			setquest 16556;
			setquest 16557;
			getitem 1000408,1;	// Ep18_Recording_Note
			close;
		}
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		break;
	case 1:
		if (countitem(1000408) < 1) {
			getitem 1000408,1;	// Ep18_Recording_Note
		}
		mes "[Folklorist Gudra]";
		mes "Dinar and Amira, did you bring stories from Shannina Grandma?";
		mes "I'm excited to hear what kind of stories they are. Please show me the notebook.";
		next;
		mes "[Folklorist Gudra]";
		mes "Amira's stories include many myths familiar to me as well.";
		mes "They are stories that all indigenous people here have heard and grown up with.";
		next;
		mes "[Folklorist Gudra]";
		mes "Of course, there are some differences from the myths I know...";
		mes "But researching those differences and commonalities is precisely my job, isn't it?";
		next;
		mes "[Folklorist Gudra]";
		mes "These are stories that fuel my research curiosity!";
		mes "I hope you continue to transcribe Amira's stories.";
		next;
		mes "[Folklorist Gudra]";
		mes "I'd appreciate it if you could come back tomorrow and transcribe the next part of this story.";
		mes "Thank you. This is your payment for today's work.";
		delitem 1000408,1;	// Ep18_Recording_Note
		erasequest 16555;
		erasequest 16556;
		erasequest 16557;
		erasequest 16558;
		setquest 16559;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close;
	case 2:	// shouldn't happen
		break;
	}
	mes "[Folklorist Gudra]";
	mes "Dinar and Amira, please go to Grandma Shani's house and listen to her story and write it down.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(16554) == 0 && isbegin_quest(16551) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16554) == 1" );

	// note: QTYPE_DAILYQUEST to take the quest, QTYPE_QUEST otherwise
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(16554) == 2 && isbegin_quest(16558) == 0 && isbegin_quest(16555) == 0 && (checkquest(16559,PLAYTIME) == -1 || checkquest(16559,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16554) == 2 && isbegin_quest(16558) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 2.
wolfvill,106,224,3	script	Dinar#ep18	4_F_DST_CHILD,{
	if (isbegin_quest(16551) == 1) {
		mes "[Dinar]";
		mes "You've come to listen to my story, right?";
		mes "Oh, that's right. I promised Granny Gudra!";
		next;
		mes "[Dinar]";
		mes "Hmm, hmm. I'll tell you once, so write it down carefully.";
		mes "This is something I really experienced.";
		next;
		select( "Not just a rumor?" );
		mes "[Dinar]";
		mes "What's a rumor? Anyway, please pay attention!";
		mes "Long ago, when I was still young.";
		next;
		select( "You're still young now..." );
		mes "[Dinar]";
		mes "Oh, you keep interrupting!";
		mes "Among the gray wolves in the Gray Wolf Forest, there was one that seemed like the leader...";
		completequest 16551;
		if (isbegin_quest(16552) == 2 && isbegin_quest(16553) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16555) == 1) {
		mes "[Dinar]";
		mes "You've come to listen to my story again today!";
		mes "Aunt Gudra said she'll turn it into a book later.";
		next;
		mes "[Dinar]";
		mes "Hmm..., where did we leave off last time?";
		mes "Did we stop in the middle of the scene where the dragon and the fairy have their final showdown?";
		next;
		mes "[Dinar]";
		mes "As the dragon summoned the giant tower of metal for the last time, the fairy confronted it by summoning the giant spirit of fire...";
		completequest 16555;
		if (isbegin_quest(16557) == 2 && isbegin_quest(16556) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[Dinar]";
	mes "I really enjoy reading interesting stories.";
	mes "Reading and imagining the next story is even better!";
	next;
	mes "[Dinar]";
	mes "The characters, they come alive in my mind.";
	mes "I just need to watch them like watching a play.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16551) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16555) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 3.
wolfvill,180,204,3	script	Amira#ep18	4_F_DESERT,{
	if (isbegin_quest(16552) == 1) {
		mes "[Amira]";
		mes "Are you the one who came after being asked by Sister Gudra?";
		mes "She made a strange request. She wants to hear an old... story that I know.";
		next;
		mes "[Amira]";
		mes "Anyway, I promised to tell the story I heard from our grandfather before we came to the Gray Wolf Forest.";
		next;
		mes "[Amira]";
		mes "Are you ready to listen? Alright, I'll tell you slowly.";
		mes "There are far more gods in the world than we know...";
		completequest 16552;
		if (isbegin_quest(16551) == 2 && isbegin_quest(16553) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16556) == 1) {
		mes "[Amira]";
		mes "You've come for Sister Gudra's errand again today.";
		mes "What does she want to use these stories for?";
		next;
		mes "[Amira]";
		mes "Anyway, I'll tell you the next story.";
		mes "This is also a story our grandfather told us, some gods are still...";
		next;
		mes "[Amira]";
		mes "...So, um, what was the name? I don't remember well, but anyway, the important thing is...";
		completequest 16556;
		if (isbegin_quest(1655) == 2 && isbegin_quest(16557) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[Amira]";
	mes "Our grandfather said so. It's important not to forget our gods.";
	mes "That's why he's telling me all these stories.";
	next;
	mes "[Amira]";
	mes "I've heard so many stories, but now there are some that I've forgotten...";
	mes "If Sister Gudra turns them into a book, I won't forget them anymore.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16552) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16556) == 1" );
	end;
}

// Quest: Collecting Folklore. Step 4.
wolfvill,154,184,5	script	Shanina#ep18	4_F_DST_GRAND,{
	if (isbegin_quest(16553) == 1) {
		mes "[Shanina]";
		mes "Ah, Grodra's errand? You came to hear an old tale, didn't you?";
		mes "I'll tell you a story. It's a very old story, not everyone's cup of tea, perhaps, but it's one my grandmother used to tell me.";
		next;
		mes "[Shanina]";
		mes "Worried it won't be entertaining? Don't worry. It'll be a pleasant distraction.";
		next;
		mes "[Shanina]";
		mes "So, long long ago. In a time long past, there lived a blacksmith...";
		completequest 16553;
		if (isbegin_quest(16551) == 2 && isbegin_quest(16552) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16554;
		}
		close;
	}
	if (isbegin_quest(16557) == 1) {
		mes "[Shanina]";
		mes "Here you are again for Gudra's errand. Quite diligent, aren't you.";
		mes "You said the stories I tell are alright, didn't you?";
		next;
		mes "[Shanina]";
		mes "I'm glad if it helps Gudra.";
		mes "How far did we get in the story? Is it time for a new tale today?";
		next;
		mes "[Shanina]";
		mes "Oh, the last story wasn't finished yet, was it? My memory's a bit foggy.";
		mes "Did I mention the blacksmith riding an owl down from the sky?";
		next;
		mes "[Shanina]";
		mes "Right, my memory serves me well.";
		mes "Then please tell the next part. The pitiful nymph...";
		completequest 16557;
		if (isbegin_quest(16555) == 2 && isbegin_quest(16556) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I've written down all three stories. Let's return to Gudra.", bc_self;
			setquest 16558;
		}
		close;
	}
	mes "[Shanina]";
	mes "There's not much excitement in my life now, but telling old tales to young children is enjoyable.";
	next;
	mes "[Shanina]";
	mes "I'm very grateful to have someone to listen. Blessings upon them.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16553) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(16557) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Purifying Water. Step 1 + 4 (final).
wolfvill,103,230,3	script	Budan#ep18	4_M_RACHMAN1,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36) {
		mes "[Budan]";
		mes "Outsiders are coming in and out from here.";
		mes "If you're just snooping around out of curiosity, I can't let you in.";
		close;
	}
	switch( isbegin_quest(8693) ) {
	case 0:
		if (isbegin_quest(8691) == 1 || isbegin_quest(8692) == 1) {
			mes "[Budan]";
			mes "If you go in front of the temple, there will probably be devotees out there for good deeds that day.";
			mes "Just say a few words and buy it.";
			mes "I beg you.";
			close;
		}
		// isbegin_quest(8691) == 0
		mes "[Budan]";
		mes "We've heard that you've been poking your nose into our business....";
		mes "I also heard that they will teach you how to do it easily.";
		mes "Can you help me too?";
		next;
		mes "[Budan]";
		mes "As you can see, we can't easily get to Rachel.";
		mes "So this is something I really want you to help me with, adventurer.";
		next;
		mes "[Budan]";
		mes "I want you to get me some things that can only be made in Rachel's Temple of Sessrumnir.";
		mes "As you can see, there is no easy access to clean water in the area due to volcanic ash and sand in the area around Rachel.";
		next;
		mes "[Budan]";
		mes "So I developed a water purification artefact...";
		mes "This thing really absorbs the dirt in the water through some unknown magical process.";
		mes "Even all kinds of miscellaneous magical powers.";
		next;
		mes "[Budan]";
		mes "Even the sulfur spring water, which contains the mysterious magic of this forest, can be turned into drinking water.";
		mes "But the magic doesn't last long... so you have to buy it when you need it.";
		next;
		mes "[Budan]";
		mes "You get the idea.";
		mes "Can I ask for help?";
		mes "Even if we go anyway... they won't sell it to us.";
		next;
		mes "[Budan]";
		mes "Pretend to be a merchant who stopped by Rachel and quietly buy one, and put it in the water tank over there.";
		mes "Then you will get completely purified, clean water.";
		mes "You just need to bring it to me.";
		next;
		if (select( "It won't be difficult", "It will be difficult" ) == 2) {
			mes "[Budan]";
			mes "If you're busy, so be it then.";
			close;
		}
		mes "[Budan]";
		mes "It was a long story, but thank you for the short answer.";
		next;
		setquest 8691;
		mes "[Budan]";
		mes "If you go to a temple, there will probably be worshippers out doing good deeds that day.";
		mes "Just say a few words and buy it.";
		mes "Please do me a favor.";
		close;
	case 1:
		if (countitem(1000411) < 1) {
			mes "[Budan]";
			mes "If you go to a temple, there will probably be worshippers out doing good deeds that day.";
			mes "Just say a few words and buy it.";
			mes "Please do me a favor.";
			close;
		}
		delitem 1000411,1;	// Ep18_Purified_Bucket
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		completequest 8693;
		setquest 8694;
		add_reputation_points(REPUTATION_EP18, 100);
		mes "[Budan]";
		mes "We've had some good water for a while.";
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(8694,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Budan]";
		mes "I've got plenty of drinking water for a while.";
		close;
	case 2:
		erasequest 8694;
		break;
	}
	if (isbegin_quest(8695) == 1 || isbegin_quest(8696) == 1) {
		mes "[Budan]";
		mes "If you go to a temple, there will probably be worshippers out doing good deeds that day.";
		mes "Just say a few words and buy it.";
		mes "Please do me a favor.";
		close;
	}
	if (isbegin_quest(8697) == 1) {
		if (countitem(1000411) < 1) {
			mes "[Budan]";
			mes "If you go in front of the temple, there will probably be devotees out there for good deeds that day.";
			mes "Just say a few words and buy it.";
			mes "I beg you.";
			close;
		}
		delitem 1000411,1;	// Ep18_Purified_Bucket
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		// erasequest 8695;
		// erasequest 8696;
		erasequest 8697;
		setquest 8694;
		getexp 18252408,2000000;
		mes "[Budan]";
		mes "Thank you for helping me secure drinking water. Then I will boil this and prepare a meal.";
		mes "If you have time to stay here tomorrow, may I ask for another route to Rachel?";
		next;
		select( "I do", "I think I will be busy tomorrow" );
		mes "[Budan]";
		mes "Is your answer quick?";
		mes "Sorry for the long journey. But I want to feed my kids something safe. Thanks.";
		close;
	}
	mes "[Budan]";
	mes "Adventurer, you're back.";
	mes "Do you have time to go to Rachel?";
	next;
	mes "[Budan]";
	mes "Pretend to be a merchant who stopped by Rachel and quietly buy one, and put it in the water tank over there.";
	mes "Then you will get completely purified, clean water.";
	mes "You just need to bring it to me.";
	next;
	if (select( "It won't be difficult", "It will be difficult" ) == 2) {
		mes "[Budan]";
		mes "If you're busy, so be it then.";
		close;
	}
	mes "[Budan]";
	mes "It was a long story, but thank you for the short answer.";
	next;
	setquest 8695;
	mes "[Budan]";
	mes "If you go to a temple, there will probably be worshippers out doing good deeds that day.";
	mes "Just say a few words and buy it.";
	mes "Please do me a favor.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8691) == 0 && isbegin_quest(8692) == 0 && isbegin_quest(8693) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8693) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8693) == 2 && (checkquest(8694,PLAYTIME) == -1 || checkquest(8694,PLAYTIME) == 2) && isbegin_quest(8695) == 0 && isbegin_quest(8696) == 0 && isbegin_quest(8697) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8697) == 1" );
	end;
}

// Quest: Purifying Water. Step 2.
rachel,103,141,5	script	Salesman#ep18	4_M_DESERT,{
	if (checkweight(1000405,20) == 0) {
		mes "- You can't proceed with the quest because you have too many items in your possession. -";
		close;
	}
	if (isbegin_quest(8692) == 1 && countitem(1000410) > 0) {
		mes "[Salesman]";
		mes "May you be safe~";
		close;
	}
	if (isbegin_quest(8691) == 1 || isbegin_quest(8692) == 1 && countitem(1000410) < 1) {
		mes "[Salesman]";
		mes "Today's we have holy water purification relic~!";
		mes "Come early before they're all sold out~!";
		next;
		mes "[Salesman]";
		mes "Huh?";
		mes "How may I help you, outsider?";
		next;
		select( "I need it to go to the top" );
		mes "[Salesman]";
		mes "Alas, you've heard the rumors~";
		mes "I'll explain briefly~";
		mes "It is a consecrated holy purification relic that purifies a large amount of contaminated water at once.";
		mes "This is it~";
		next;
		mes "[Salesman]";
		mes "It's made in the temple~";
		mes "Now that the waterways are well-maintained, it's not in such high demand~";
		mes "I'm only making a small amount~";
		mes "The ingredients are hard to find~";
		next;
		mes "[Salesman]";
		mes "I need it in a few days, so I can't buy it in bulk~";
		mes "But~ there's only so much water you can purify in a single use~";
		next;
		mes "[Salesman]";
		mes "If you run out of water on the way to your destination, and you have a suitable hydration station, you can use the item~";
		mes "It's better than carrying water~";
		next;
		mes "[Salesman]";
		mes "But you have to boil the water once~";
		mes "Some people say it smells~";
		next;
		mes "[Salesman]";
		mes "It's 550 Zeny.~";
		next;
		if (select( "Buy", "Don't buy" ) == 2) {
			mes "[Salesman]";
			mes "Buy what you need~";
			mes "May the goddess Freyja bless you~";
			close;
		}
		if (Zeny < 550) {
			mes "[Salesman]";
			mes "You don't have enough Zeny.";
			close;
		}
		Zeny -= 550;
		if (isbegin_quest(8691) == 1) {
			erasequest 8691;
			setquest 8692;
		}
		getitem 1000410,1;	// Ep18_Water_Filter
		mes "[Salesman]";
		mes "Here is the item~";
		mes "May the goddess Freyja bless you.";
		close;
	}
	if (isbegin_quest(8695) == 1 || isbegin_quest(8696) == 1 && countitem(1000410) < 1) {
		mes "[Salesman]";
		mes "It is a holy relic for the essence of today's fish~";
		mes "Hurry up before it's sold out~";
		next;
		mes "[Salesman]";
		mes "Ah, the last time you went to the top, didn't you?";
		mes "You came back sooner than expected. It seems that business is going well~";
		next;
		switch( select( "Buy a relic", "Listen to an explanation", "Cancel" ) ) {
		case 1:
			break;
		case 2:
			end;
		case 3:
			end;
		}
		mes "[Salesman]";
		mes "This is 550 Jenny~";
		next;
		if (select( "buy", "don't buy" ) == 2)
			end;
		if (Zeny < 550) {
			mes "[Salesman]";
			mes "You don't have enough Zeny.";
			close;
		}
		Zeny -= 550;
		if (isbegin_quest(8695) == 1) {
			erasequest 8695;
			setquest 8696;
		}
		getitem 1000410,1;	// Ep18_Water_Filter
		mes "[Salesman]";
		mes "The stuff is here~";
		mes "May Goddess Freya bless you~";
		close;
	}
	mes "[Salesman]";
	mes "Today's holy water purification relic has just been released~";
	mes "Just one in front of each person. Now, come quickly~";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8691) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8695) == 1" );
	end;
}

// Quest: Purifying Water. Step 3.
wolfvill,104,235,0	script	Water barrel#ep1801	CLEAR_NPC,{
	if (isbegin_quest(8692) == 1 || isbegin_quest(8696) == 1) {
		if (countitem(1000410) < 1)
			end;
		if (checkweight(1000411,1) == 0) {
			mes "- Wait a minute !! -";
			mes "- Currently you're carrying -";
			mes "- too many items with you. -";
			mes "- Please try again -";
			mes "- after you loose some weight. -";
			close;
		}
		specialeffect EF_BLUECASTING;
		specialeffect EF_STOPEFFECT;
		specialeffect EF_HEALSP;
		specialeffect EF_SMOKE;
		delitem 1000410,1;	// Ep18_Water_Filter
		getitem 1000411,1;	// Ep18_Purified_Bucket
		if (isbegin_quest(8692) == 1)
			changequest 8692,8693;
		else
			changequest 8696,8697;
		mes "I thought it was relatively clean water, but when I put a holy object in it, it glowed brightly and gave me a somewhat sacred feeling.";
		mes "As the light subsides, the water looks clean.";
		next;
		mes "I'll put it in a bucket and take it to Budan.";
		close;
	}
	mes "This is a water container for drinking water used throughout the village.";
	mes "One side contains clean water, the other relatively clean water.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8692) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8696) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Transporting Goods. Step 1 + 3.
wolfvill,53,234,0	script	#ep18_wp01	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (ep18_main < 36)
		end;
	cloakoffnpcself( "Hazar#ep18_1" );
	cloakoffnpcself( "Camille#ep18_1" );
	cloakoffnpcself( "Transport Cart#ep18_1" );
	end;
}

wolfvill,50,234,6	script(CLOAKED)	Hazar#ep18_1	4_EP18_HAZAR,{
	if (ep18_main < 36)
		end;
	switch( isbegin_quest(12532) ) {
	case 0:
		mes "^0000ffAn elderly person is scolding a young man.^000000";
		next;
		npctalk "Did I tell you that I had to leave today or not?", "Hazar#ep18_1", bc_self;
		next;
		npctalk "Yes, you did.", "Camille#ep18_1", bc_self;
		next;
		npctalk "What's the matter with this cart? There's gold on the cart wheels, huh? Did you replace them with new wheels, or are my eyes getting too old to see?", "Hazar#ep18_1", bc_self;
		next;
		npctalk "Sorry! I quickly looked for new wheels, but I couldn't find any spares....", "Camille#ep18_1", bc_self;
		next;
		npctalk "To go upstream, there should be 30 pieces of leather among the items, but it seems I can't see it. Is this also a problem with my eyes?", "Hazar#ep18_1", bc_self;
		next;
		emotion ET_HUK, getnpcid(0,"Camille#ep18_1");
		npctalk "Opps!", "Camille#ep18_1", bc_self;
		next;
		npctalk "Where did the ox, which was pulling the cart, go off to now? I must be getting old, it seems like I should retire now. I can't see anything in front of the cart.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "I'm sorry. I'll be there soon!", "Camille#ep18_1", bc_self;
		next;
		npctalk "Have you recruited anyone to be the escort knight? Why doesn't anyone appear? Surely you don't expect me to pull this carriage alone.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "That's... Master, I tried to recruit for the journey, but no one volunteered.", "Camille#ep18_1", bc_self;
		next;
		npctalk "You have no intention of going upstream, Camille.... What are you thinking?.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "......", "Camille#ep18_1", bc_self;
		next;
		npctalk "I will inquire thoroughly about any shortcomings in the preparations later, but for now, let's focus on practical matters.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "The transaction date has already been set, and the upstream carriage must depart. We need to address the issue of the carriage wheels and the insufficient upstream items. How do you plan to resolve it? ", "Hazar#ep18_1", bc_self;
		next;
		npctalk "Um... for now, I will work on adjusting the leather quantity! Uma has sent someone, so it should be ready soon", "Camille#ep18_1", bc_self;
		next;
		npctalk "What should we do about the carriage wheels? They look so unstable that it might collapse after just a few steps.", "Hazar#ep18_1", bc_self;
		next;
		if (select( "interfere", "ignore" ) == 2) {
			mes "^0000ffThere's nothing good in intervening, so let's go our own way.^000000";
			close;
		}
		npctalk "Hmm? What do you want with us? We've got enough trouble with that carriage wheels. Don't disturb us....", "Hazar#ep18_1", bc_self;
		next;
		select( "Describe how to repair" );
		unittalk getcharid(3), "" + strcharinfo(0) + " : If we reinforce the wheel with a strong cord, it should roll somehow, don't you think?", bc_self;
		next;
		npctalk "Oh, this person. The carriage wheel isn't like a wooden chair or anything... No, is it even possible?", "Hazar#ep18_1", bc_self;
		next;
		if (select( "Wouldn't it be a good idea to at least give it a try?", "Indeed, it seems impossible." ) == 2) {
			mes "^0000ffLet's stop involved at this point^000000";
			close;
		}
		npctalk "Adventurer. I am responsible for this ascent. If the adventurer solves the cart wheel, we will pay the adventurer the appropriate experience points based on the vision of our clan", "Camille#ep18_1", bc_self;
		next;
		if (select( "Alright!", "I guess that doesn't work." ) == 2)
			end;
		npctalk "Thank you. Could you please take a look at this carriage right here?", "Camille#ep18_1", bc_self;
		specialeffect 1090, AREA, "Transport Cart#ep18_1";
		next;
		npctalk "I would appreciate it if you could reinforce the wheels of this carriage enough for use in the expedition. Thank you. I need to go check the leather that will be used for the expedition, so I will be away for a moment..", "Camille#ep18_1", bc_self;
		setquest 12532;
		cloakonnpcself( "Camille#ep18_1" );
		close;
	case 1:
		npctalk "Hmm, I'm not sure if you can really fix that carriage wheel, but I'll give you the benefit of the doubt..", "Hazar#ep18_1", bc_self;
		end;
	case 2:
		break;
	}
	switch( isbegin_quest(12533) ) {
	case 0:
		mes "^0000ffHazar gazes with a friendly look^000000";
		next;
		npctalk "Ah... you have quite an interesting skill, don't you?", "Hazar#ep18_1", bc_self;
		next;
		npctalk "By the way, has Camille finished organizing things yet?", "Hazar#ep18_1", bc_self;
		next;
		npctalk "Master, I have confirmed all the necessary supplies for the expedition. Now, we just need to check the carriage, and then we can depart...", "Camille#ep18_1", bc_self;
		next;
		npctalk "The adventurer here has taken care of the carriage wheels. Please express our gratitude.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "Thank you so much, adventurer. When you return from the expedition, please come visit us. Would you mind sharing your name?", "Camille#ep18_1", bc_self;
		next;
		select( "My name is " + strcharinfo(0) + " that's all." );
		select( "As the journey is long, let's depart for now.." );
		npctalk "Your are correct. I need to set off on the expedition for now. I will definitely come and greet you upon my return. " + strcharinfo(0) + " Alright then. I'll be off now, Master.", "Camille#ep18_1", bc_self;
		next;
		cloakonnpcself( "Camille#ep18_1" );
		cloakonnpcself( "Transport Cart#ep18_1" );
		npctalk "Thank you for helping me with my shortcomings. Despite being clever, I tend to overthink, and I unintentionally showed a shameful side of myself..", "Hazar#ep18_1", bc_self;
		next;
		npctalk "I cannot guarantee whether that fellow will successfully complete the expedition unharmed. If my body were in better condition, I would have led the expedition.", "Hazar#ep18_1", bc_self;
		next;
		npctalk "" + strcharinfo(0) + " Of course,If you have the time, could you please grant this old man one more favor?", "Hazar#ep18_1", bc_self;
		next;
		select( "Please go ahead and tell me" );
		npctalk "Camille is commanding the expedition for the first time, and it's making me uneasy in various ways. I wonder if they'll be able to avoid monster attacks. ", "Hazar#ep18_1", bc_self;
		next;
		npctalk "So, what I'm asking is, could you kindly keep an eye on him from behind while following along? I can't offer much, but I sincerely request your assistance..", "Hazar#ep18_1", bc_self;
		next;
		if (select( "I accept", "I decline" ) == 2)
			end;
		npctalk "You're welcome. Truly, you have my gratitude." + strcharinfo(0) + "", "Hazar#ep18_1", bc_self;
		setquest 12533;
		close;
	case 1:
		mes "^0000ffHazar gazes with a friendly look^000000";
		next;
		npctalk "Well then, I should get back to my duties as well.", "Hazar#ep18_1", bc_self;
		cloakonnpcself( "Hazar#ep18_1" );
		close;
	case 2:
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8692) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12532) == 0 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12533) == 0 && isbegin_quest(12532) == 2" );
	end;
}

// Quest: Transporting Goods. Step 2.
wolfvill,53,234,4	script	Transport Cart#ep18_1	4_EP18_WAGON,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(12532) == 1) {
		mes "^0000ffAlthough it looks fine, there is a worn-out carriage wheel..^000000";
		next;
		if (select( "I attempt maintenance work", "I stop the maintenance work" ) == 2) {
			mes "^0000ffLet's revisit this when it comes to mind later.^000000";
			close;
		}
		progressbar_npc "FFFF00",2;
		if (countitem(7197) < 1) {
			mes "Materials suitable for reinforcing the carriage wheel <ITEM>[Tough Vines]<INFO>7197</INFO></ITEM> unavailable.";
			close;
		}
		// note: Tough_Vines not deleted on fail
		.@r = rand(1,5);
		if (.@r == 1) {
			specialeffect EF_REFINEOK;
			mes "^0000ffRepair successful!^000000";
			delitem 7197,1;	// Tough_Vines
			removespecialeffect 1090;
			completequest 12532;
			close;
		}
		specialeffect EF_REFINEFAIL;
		mes "^0000ffIt doesn't seem to have been properly reinforced yet. The material hasn't disappeared, so let's keep trying^000000";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12532) == 1" );
	end;
}

wolfvill,56,234,4	script(CLOAKED)	Camille#ep18_1	4_EP18_KAMIL,{
	mes "^0000ffHe seems preoccupied, perhaps scolded by Hazar^000000";
	close;
}

// Quest: Transporting Goods. Step 4.
gw_fild01,115,130,0	script	#ep18_wp02	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(12533) == 1)
		cloakoffnpcself( "Transport Cart#ep18_2" );
	end;
}

gw_fild01,115,130,4	script(CLOAKED)	Transport Cart#ep18_2	4_EP18_WAGON,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(12533) == 1) {
		mes "^0000ffIt's clear that the carriage led by Camille has left. Judging by the scattered cargo, something unfavorable must have happened. I need to find Camille.^000000";
		completequest 12533;
		setquest 12534;
		close;
	}
	mes "^0000ffIt seems that most of the cargo has already been lost.^000000";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12533) == 1" );
	end;
}

// Quest: Transporting Goods. Step 5.
gw_fild01,202,102,0	script	#ep18_wp03	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(12534) == 1) {
		cloakoffnpcself( "#ep18_2_mon" );
		cloakoffnpcself( "Camille#ep18_2" );
		end;
	}
	if (isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0) {
		cloakoffnpcself( "Camille#ep18_2" );
		end;
	}
	end;
}

gw_fild01,205,102,4	script(CLOAKED)	#ep18_2_mon	EP18_GREY_WOLF,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(12534) != 1)
		end;
	.@wolf_hp = 1000;
	.@camille_hp = 1000;

	mes "^0000ffThe situation doesn't seem favorable.^000000";
	next;
	npctalk "Arrgghh...", "#ep18_2_mon", bc_self;
	next;
	npctalk "Good grief", "Camille#ep18_2", bc_self;
	next;
	mes "^0000ffSeems like I'm about to collapse. Unable to focus on where to attack, my eyes are rolling without restraint. Probably won't last even a second, becoming an easy meal for the wolves^000000";
	next;
	while(1) {
		next;
		switch( select( "Give combat advice to Camille", "I handle the wolves personally", "Pretend not to notice and pass by" ) ) {
		case 1:
			mes "^0000ffTell Camille where to attack the wolves?^000000";
			PlayBGM "182";
			while(1) {
				mes "Wolf vitality - ^ff0000" + .@wolf_hp + "^000000";
				mes "Camille's vitality - ^0000ff" + .@camille_hp + "^000000";
				next;
				switch( select( "Timid attack(High probability)", "Moderate attack(Normal probability)", "Strong attack(Low probability)", "Counterattack(Thin Probability)", "Run away for now" ) ) {
				case 1:
					.@wolf_chance = 65;	// 65% chance the wolf is being hit / 35% Camille
					.@wolf_damage = rand(25,50);
					.@camille_damage = rand(45,93);
					break;
				case 2:
					.@wolf_chance = 42;
					.@wolf_damage = rand(32,58);
					.@camille_damage = rand(37,72);
					break;
				case 3:
					.@wolf_chance = 30;
					.@wolf_damage = rand(45,70);
					.@camille_damage = rand(34,53);
					break;
				case 4:
					.@wolf_chance = 25;
					.@wolf_damage = rand(66,80);
					.@camille_damage = rand(26,50);
					break;
				case 5:
					mes "I'm upset, but there's no chance of winning now. Let's fix it and try again";
					close;
				}
				if (.@wolf_chance > rand(100)) {
					.@wolf_hp = .@wolf_hp - .@wolf_damage;
					npctalk "-" + .@wolf_damage, "#ep18_2_mon", bc_self;
					npctalk " ", "Camille#ep18_2", bc_self;
					specialeffect EF_ACIDDEMON, SELF, "#ep18_2_mon";
					specialeffect EF_HFLIMOON3, SELF, "#ep18_2_mon";
				}
				else {
					.@camille_hp = .@camille_hp - .@camille_damage;
					npctalk " ", "#ep18_2_mon", bc_self;
					npctalk "-" + .@camille_damage, "Camille#ep18_2", bc_self;
					specialeffect EF_ACIDDEMON, SELF, "Camille#ep18_2";
					specialeffect EF_HFLIMOON3, SELF, "Camille#ep18_2";
				}
				if (.@wolf_hp < 1) {
					mes "^0000ffYou have defeated the gray wolf.^000000";
					completequest 12534;
					cloakonnpcself( "#ep18_2_mon" );
					playbgm "183";
					close;
				}
				if (.@camille_hp < 1) {
					next;
					mes "^ff0000Dangerous!! I need to stop the battle and restore Camille's health.^000000";
					playbgm "183";
					close;
				}
			}
			break;
		case 2:
			mes "^0000ff No, it might be right to just help Camille grow up on her own....^000000";
			continue;
		case 3:
			mes "^0000ffCome back later and build Camille's grave.^000000";
			close;
		}
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12534) == 1" );
	end;
}

// Quest: Transporting Goods. Step 6.
gw_fild01,201,102,6	script	Camille#ep18_2	4_EP18_KAMIL,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0) {
		mes "^0000ffCamille's body is trembling thinly with the excitement after the battle.^000000";
		npctalk "Heuk...heuk... ", "Camille#ep18_2", bc_self;
		next;
		select( "You had pretty good movement", "That was terrible. Don't touch a sword again" );
		npctalk "No " + strcharinfo(0) + "If it weren't for your instructions, I would have been completely defeated..", "Camille#ep18_2", bc_self;
		next;
		select( "Why did you abandon the carriage and come this far??" );
		npctalk "I was chasing the guys who were running away with the goods, and that's how it happened. I wasn't able to recover everything, but I did manage to save some of it..", "Camille#ep18_2", bc_self;
		next;
		npctalk "I need to move the expedition carriage back to the village first. We should gather the remaining supplies and apologize for the inconvenience..", "Camille#ep18_2", bc_self;
		next;
		select( "Isn't it just an accident? Apologizing might be unnecessary...." );
		npctalk "The goods were essential for the village's survival. Losing them will be a major setback..", "Camille#ep18_2", bc_self;
		next;
		select( "You're being too harsh on the trade manager." );
		npctalk "The fact that I insisted on leading the trade caravan even though my master stopped me is my fault. It's not like I was forced to do it.", "Camille#ep18_2", bc_self;
		next;
		npctalk "If I die or run away here, my master will have to take responsibility. That must never happen.", "Camille#ep18_2", bc_self;
		next;
		select( "I'm not going to argue with you anymore. Just do what you think is best..", "Should we run away?" );
		npctalk "Thank you again for your help. I need to get back to my line now. If fate leads us, I hope to see you again...", "Camille#ep18_2", bc_self;
		setquest 12535;
		close2;
		npctalk "You haven't left yet. I'll go first..", "Camille#ep18_2", bc_self;
		cloakonnpcself( "Camille#ep18_2" );
		setnpcdisplay( "Boksil#wms03", CLEAR_NPC );
		end;
	}
	mes "^0000ffIt seems like you're not in a state to listen to the conversation properly.^000000";
	close;

OnInit:
	cloakonnpc strnpcinfo(0);
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(12534) == 2 && isbegin_quest(12535) == 0" );
	end;
}

wolfvill,76,210,0	script	#ep18_wp03_	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch_:
	if (isbegin_quest(12531) == 1 || isbegin_quest(12535) == 1) {
		cloakoffnpcself( "Hazar#ep18_3" );
		cloakoffnpcself( "Camille#ep18_3" );
		cloakoffnpcself( "Observer#ep18_31" );
		cloakoffnpcself( "Observer#ep18_32" );
		cloakoffnpcself( "Observer#ep18_33" );
	}
	end;
}

// Quest: Transporting Goods. Step 7 + 12 (final).
wolfvill,75,214,4	script(CLOAKED)	Hazar#ep18_3	4_EP18_HAZAR,{
	if (ep18_main < 36)
		end;
	if (!checkweight(1000405,20)) {
		mes "^ff0000 I think the weight of the items I have is too much. Please organize Tori once.^000000";
		close;
	}
	if (isbegin_quest(12535) == 1) {
		mes "^0000ffA meeting is taking place among the leaders of the Grey Wolf Village.^000000";
		next;
		npctalk "I apologize to everyone. I was lacking, and I couldn't properly guide my apprentice..", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Hazar, it's not your fault. It's more about Camille's ambitious decision to push the expedition beyond its limits..", "Observer#ep18_31", bc_self;
		next;
		npctalk "No, it was my decision to push my apprentice into the expedition against their will..", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Is that really true, Camille? Are you saying your mentor forced you into the expedition against your will.", "Observer#ep18_33", bc_self;
		next;
		npctalk "I sincerely apologize to everyone. And, it wasn't my mentor who forced me; I insisted on the expedition against their advice.", "Camille#ep18_3", bc_self;
		next;
		npctalk "I knew it would come to this. Something seemed off ever since Hazar suddenly mentioned feeling unwell.", "Observer#ep18_32", bc_self;
		next;
		npctalk "Camille, what on earth are you doing right now!", "Hazar#ep18_3", bc_self;
		next;
		npctalk "I insisted against my mentor's advice and failed to complete the task properly. It's all my fault.", "Camille#ep18_3", bc_self;
		next;
		npctalk "Ahem... hmm", "Observer#ep18_31", bc_self;
		npctalk "Wow~", "Observer#ep18_32", bc_self;
		npctalk "Tsk Tsk.", "Observer#ep18_33", bc_self;
		next;
		npctalk "Seems like I have a rough idea of the situation now. Well then, let's discuss the post-incident procedures?", "Observer#ep18_33", bc_self;
		next;
		npctalk "Listen, everyone! Why are we rushing to make decisions like this!", "Hazar#ep18_3", bc_self;
		next;
		npctalk "In truth, haven't we been watching over Camille since they were young? While I understand the circumstances.", "Observer#ep18_32", bc_self;
		next;
		npctalk "Indeed, there are circumstances, but the leadership has its own rules and regulations, right?.", "Observer#ep18_33", bc_self;
		next;
		emotion ET_HUK, getnpcid(0,"Observer#ep18_31");
		npctalk "This person! According to the regulations, you should face the consequences! It's not something to be taken lightly!", "Observer#ep18_31", bc_self;
		next;
		npctalk "No, that's true, but... sigh, what should we do about this?.", "Observer#ep18_33", bc_self;
		next;
		npctalk "I will follow the rules. It seems appropriate since it was my own decision..", "Camille#ep18_3", bc_self;
		next;
		npctalk "Oh no! Camille, you rascal! This is not the time for you to speak!", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Calm down. We're talking about the rules of the leadership. Let's first examine the basis for Camille's decision.", "Observer#ep18_31", bc_self;
		next;
		npctalk "A loss of 800kg of fur/leather intended for winter budget allocation. Additionally, the failure to purchase provisions due to this loss..", "Observer#ep18_33", bc_self;
		next;
		npctalk "Well... even now, couldn't we organize a search party from the leadership to find the lost cargo?", "Observer#ep18_31", bc_self;
		next;
		npctalk "That's true. However, if the leadership resolves the situation, Camille's mistake will officially become a subject for punishment..", "Observer#ep18_33", bc_self;
		next;
		npctalk "Right, as of now, the villagers and the practical members of the leadership are still unaware of this fact. The moment we send out a search party, Camille's guilt will be confirmed.", "Observer#ep18_32", bc_self;
		next;
		select( "Let's consider other advice" );
		unittalk getcharid(3), "" + strcharinfo(0) + " : If an external party unofficially recovers the cargo and returns it, how would it be handled by the leadership?", bc_self;
		next;
		npctalk "No, you are " + strcharinfo(0) + "aren't you?", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Oh, that's a good suggestion. If an outsider discreetly resolves it without anyone knowing, the incident itself may be considered non-existent..", "Observer#ep18_33", bc_self;
		next;
		npctalk "The leadership's rules cannot punish what they do not know..", "Observer#ep18_31", bc_self;
		next;
		npctalk "" + strcharinfo(0) + "does that mean... it's acceptable to interpret it as an offer to find the lost cargo on behalf of our leadership?", "Hazar#ep18_3", bc_self;
		next;
		select( "I'll give it a try.", "What kind of joke is this?." );
		npctalk "Thank you " + strcharinfo(0) + "I'll take the lead and guide the way", "Camille#ep18_3", bc_self;
		next;
		npctalk "No, that won't do. This incident needs to become nonexistent. Camille, you can't take the lead on this..", "Observer#ep18_33", bc_self;
		next;
		npctalk "" + strcharinfo(0) + "You refer to me? Thank you for stepping forward on behalf of our poor Camille. I express my gratitude in your stead.", "Observer#ep18_31", bc_self;
		next;
		npctalk "I also express my gratitude. Despite some flaws in that lad, he's a talent that shouldn't lose his life over such an incident.", "Observer#ep18_32", bc_self;
		next;
		npctalk "Expressing my gratitude to such an extent is difficult. What are you going to do? I'll provide you with Camille's approximate location.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Yes, I understand.", "Camille#ep18_3", bc_self;
		next;
		mes "^ff0000I've obtained rough information about where the cargo taken by Camille was headed.^000000";
		completequest 12535;
		setquest 12536;
		setquest 12537;
		setquest 12538;
		setquest 12539;
		next;
		npctalk "Then " + strcharinfo(0) + "I'm putting everything on you", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Um, this meeting never happened. Let's quickly disperse.", "Observer#ep18_31", bc_self;
		next;
		npctalk "Of course. I'm busy too. Let's disperse.", "Observer#ep18_33", bc_self;
		next;
		cloakonnpcself( "Hazar#ep18_3" );
		cloakonnpcself( "Camille#ep18_3" );
		cloakonnpcself( "Observer#ep18_31" );
		cloakonnpcself( "Observer#ep18_32" );
		cloakonnpcself( "Observer#ep18_33" );
		close;
	}
	if (isbegin_quest(12531) == 1) {
		mes "^0000ffA meeting is taking place among the leaders of the Grey Wolf Village..^000000";
		next;
		unittalk getcharid(3), "" + strcharinfo(0) + " : I've collected the lost cargo as soon as it was spotted. Please check the quantity..", bc_self;
		next;
		npctalk "Oh, this quickly?", "Observer#ep18_31", bc_self;
		next;
		npctalk "It seems I owe you a debt for the second time already. Well, considering the battle with Camille, is it the third time?", "Hazar#ep18_3", bc_self;
		next;
		npctalk "You have my gratitude. Truly... thank you..", "Camille#ep18_3", bc_self;
		next;
		npctalk "Let's see, 500 leather, 280 fur processing... hmm, a bit short on fur, but...", "Observer#ep18_32", bc_self;
		next;
		npctalk "At this level, it's just ordinary loss and damage.", "Observer#ep18_33", bc_self;
		next;
		npctalk "Indeed, it's well within an acceptable range. Phew... We can proceed with the meeting agenda again.", "Observer#ep18_31", bc_self;
		next;
		select( "What will be the new agenda?" );
		npctalk "The original agenda was a meeting regarding the loss of trade goods, but now it has changed to a discussion about the delay in the leadership's departure. Isn't that correct, Chief?", "Observer#ep18_33", bc_self;
		next;
		npctalk "Oh... hmm. Yes, I see. It looks like we'll be departing two days later than the original schedule.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Master... that is...", "Camille#ep18_3", bc_self;
		next;
		npctalk "Stay calm, Camille. Now, let's not rush to conclusions. What is the punishment for delaying?", "Hazar#ep18_3", bc_self;
		next;
		npctalk "It's a reflection period within the next three months, handling the duties of the leadership and reflecting on my actions as a top-tier administrator.", "Observer#ep18_33", bc_self;
		next;
		npctalk "I have no objections.", "Observer#ep18_31", bc_self;
		next;
		npctalk "I also have no objections..", "Observer#ep18_32", bc_self;
		next;
		npctalk "Seems like you've dodged a major crisis there, Camille", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Thank you, Master. I'm also grateful to the Chief.", "Camille#ep18_3", bc_self;
		next;
		npctalk "Ahem, enough of this. Since the departure is delayed, go and prepare to set out again.", "Observer#ep18_31", bc_self;
		next;
		npctalk "Indeed, starting from today, I'll have to endure the punishment as soon as possible.", "Observer#ep18_32", bc_self;
		next;
		npctalk "Now that the important matters are settled, let's conclude our discussion. Thank you once again, " + strcharinfo(0) + "I truly appreciate it. Here's a small token of my gratitude.", "Hazar#ep18_3", bc_self;
		next;
		npctalk "Thank you very much " + strcharinfo(0) + "You're my lifesaver. Here's a small token of my gratitude.", "Camille#ep18_3", bc_self;
		emotion ET_CRY, getnpcid(0,"Observer#ep18_31");
		completequest 12531;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		next;
		mes "^4d4dffYou are receiving favorable evaluations.^000000";
		close2;
		cloakonnpcself( "Hazar#ep18_3" );
		cloakonnpcself( "Camille#ep18_3" );
		cloakonnpcself( "Observer#ep18_31" );
		cloakonnpcself( "Observer#ep18_32" );
		cloakonnpcself( "Observer#ep18_33" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12535) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(12531) == 1" );
	end;
}

wolfvill,79,213,3	duplicate(dummy_cloaked_npc)	Camille#ep18_3	4_EP18_KAMIL

wolfvill,77,207,8	script(CLOAKED)	Observer#ep18_33	4_M_RACHMAN1,{
	mes "[Observer]";
	mes "Hmm, let's save personal stories for later..";
	close;
}

wolfvill,74,208,8	script(CLOAKED)	Observer#ep18_32	4_M_MIDDLE1,{
	mes "[Observer]";
	mes "There's no time for small talk.";
	close;
}

wolfvill,72,209,8	script(CLOAKED)	Observer#ep18_31	4_M_MIDDLE,{
	mes "[Observer]";
	mes "In upper-level meetings, small talk is prohibited..";
	close;
}

// Quest: Transporting Goods. Step 8 + 9 + 10 + 11.
gw_fild01,242,325,4	script	#ep18_12536	4_POINT_RED,5,5,{
	if (isnpccloaked(strnpcinfo(0)) == true)
		end;
	.@quest_id = atoi( replacestr(strnpcinfo(2), "ep18_", "") );
	.@state = isbegin_quest(.@quest_id);
	if (.@state == 1) {
		specialeffect EF_BIG_PORTAL, SELF; // 561
		progressbar_npc "FFFF00",2;
		completequest .@quest_id;
		removespecialeffect 561;
		specialeffect EF_ICECRASH, SELF; // 135

		if (isbegin_quest(12536) == 2 && isbegin_quest(12537) == 2 && isbegin_quest(12538) == 2 && isbegin_quest(12539) == 2)
			setquest 12531;
		cloakonnpc strnpcinfo(0), getcharid(0);
	}
	end;

OnTouch:
	end;

OnInit:
	.@quest_id = atoi( replacestr(strnpcinfo(2), "ep18_", "") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(" + .@quest_id + ") == 1" );
	end;
}
gw_fild01,89,211,4	duplicate(#ep18_12536)	#ep18_12537	4_POINT_RED,5,5
gw_fild01,347,194,4	duplicate(#ep18_12536)	#ep18_12538	4_POINT_RED,5,5
gw_fild01,230,52,4	duplicate(#ep18_12536)	#ep18_12539	4_POINT_RED,5,5

gw_fild01,242,325,0	script	#wp12536	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch_:
	.@quest_id = atoi( replacestr(strnpcinfo(2), "wp", "") );
	if (isbegin_quest(.@quest_id) == 1)
		cloakoffnpcself( "#ep18_" + .@quest_id );
	end;
}
gw_fild01,89,211,0	duplicate(#wp12536)	#wp12537	HIDDEN_WARP_NPC,5,5
gw_fild01,347,194,0	duplicate(#wp12536)	#wp12538	HIDDEN_WARP_NPC,5,5
gw_fild01,230,52,0	duplicate(#wp12536)	#wp12539	HIDDEN_WARP_NPC,5,5
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Clinic Construction. Step 1 + 3 + 4 + 5 (final).
wolfvill,171,253,5	script	Ezekiel#hms01	4_M_RACHMAN2,5,5,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36) {
		mes "[Ezekiel]";
		mes "I can't have made the wrong choice in coming here...?";
		close;
	}
	switch( isbegin_quest(17507) ) {
	case 0:
		if (isbegin_quest(17506) == 1) {
			if (countitem(999) < 3) {
				mes "[Ezekiel]";
				mes "We can get most things here, but not steel. I'd like to ask for a small favor. Just 3...";
				close;
			}
			mes "[Ezekiel]";
			mes "Steel!! Steel, when will it come! ... oh it's here. You're here, Adventurer. It's heavy, isn't it? Give it to me. I can't let you hold it for another second, you're a precious person. Thank you. You've done a good job.";
			next;
			mes "[Ezekiel]";
			mes "When the clinic is completed, we'll engrave your name on the foundation stone so that your name will live on in the lives of future newborns.";
			next;
			emotion ET_SWEAT, playerattached();
			mes "[Ezekiel]";
			mes "Although time passes and the building disappears, the adventurer's will will remain forever.";
			next;
			select( "No, it's not necessary..." );
			mes "[Ezekiel]";
			mes "With this steel, I'll now build a clinic that would withstand any kind of weather, and will stand up to any elements.";
			next;
			cloakoffnpcself( "Old Man#hms01" );
			cloakoffnpcself( "Old Man#hms02" );
			cloakoffnpcself( "Old Man#hms03" );
			mes "[Old Man]";
			mes "Wait, what are you doing?";
			npctalk "Didn't I make myself clear?", "Old Man#hms03", bc_self;
			next;
			mes "[Old Man]";
			mes "Are you saying you're going to build a Clinic? Now?";
			next;
			select( "Calm down, old man..." );
			mes "[Old Man]";
			mes "What do you mean by Calm down? We're having an ice-cold, rational conversation. Now!";
			npctalk "We don't have the energy to do this!", "Old Man#hms02", bc_self;
			next;
			mes "[Ezekiel]";
			mes "Why are you doing this? Are you being territorial about the newcomers?";
			next;
			mes "[Old Man]";
			mes "Oh my, we're not those kind of people.";
			npctalk "What? What do you mean?", "Old Man#hms03", bc_self;
			next;
			mes "[Ezekiel]";
			mes "Then why are you so opposed to it?";
			next;
			mes "[Old Man]";
			mes "The comfortable life you want is a trap. Something foreign, something comfortable. Those things will ruin us.";
			next;
			mes "[Ezekiel]";
			mes "Comfortable housing, thriving schools, clean clinics. Why shouldn't we have them? We've avoided discrimination, not convenience.";
			next;
			mes "[Ezekiel]";
			mes "I live here anyway, what's the harm in having better facilities?";
			next;
			mes "[Old Man]";
			mes "No, I guess that's what the newcomers want?";
			npctalk "Exactly!", "Old Man#hms01", bc_self;
			next;
			mes "[Old Man]";
			mes "Accustoming your body to comfort makes an uncomfortable life unbearable. Live with satisfaction within the minimum life they provide.";
			mes "They say that if you protest, they will take this away too.";
			next;
			mes "[Old Man]";
			mes "How long do you think we're going to live here, never mind take our land back!";
			npctalk "I mean it!", "Old Man#hms03", bc_self;
			next;
			mes "[Old Man]";
			mes "What you have now is enough, what more do you need?";
			next;
			mes "[Ezekiel]";
			mes "I'm not doing this because I'm ungrateful. They say that they are not bringing it here because this it's too foreign for them. Technology and facilities have developed over time, but you just don't understand it!";
			next;
			cloakoffnpcself( "Maram#hms01" );
			cloakoffnpcself( "Villager#hms01" );
			cloakoffnpcself( "Injured#hms01" );
			mes "[Joel]";
			mes "Oh my, I think I'm dying. Help...";
			npctalk "Someone is waving to me in the distance...", "Injured#hms01", bc_self;
			next;
			mes "[Maram]";
			mes "Ezekiel!!! Something is wrong!";
			next;
			mes "[Ezekiel]";
			mes "Maram? What is it? What happened?";
			next;
			mes "[Joel]";
			mes "If I die... put my accumulated wealth...! With me. Did you get it?! It's unfair! Maram, make sure you guard my grave well! Don't let a single penny be stolen!";
			emotion ET_CRY, getnpcid(0,"Injured#hms01");
			next;
			mes "[Maram]";
			mes "No, you won't die. Don't be ominous.";
			next;
			mes "[Old Man]";
			mes "What's wrong with Joel?";
			next;
			mes "[Maram]";
			mes "There's been an accident while moving the luggage. I need to get it taken care of quickly. Can you do that, Ezekiel?";
			next;
			mes "[Old Man]";
			mes "Oh my, how come? I can't use one leg at all and I'm still fine.";
			next;
			mes "[Old Man]";
			mes "Let me see. Hmm...";
			next;
			mes "[Old Man]";
			mes "Let's move it to my house quickly. I may not be able to use my legs, but I need to at least apply some medicine to prevent them from rotting.";
			npctalk "I beg your pardon? Are his legs rotting??", "Injured#hms01", bc_self;
			npctalk "Would you rather have a plaster?", "Maram#hms01", bc_self;
			next;
			mes "[Joel]";
			mes "Do I have to cut my legs off like Mr. White Pine over here? I can't do that... I just bought a new pair of work boots...!";
			next;
			mes "[Old Man]";
			mes "Are your boots a problem now?";
			next;
			mes "[Joel]";
			mes "... That's right, Maram. I have a favor to ask. Can you find someone who is missing a left leg but has a healthy right leg? I guess I'll have to sell him my right boot.";
			mes "Sir, please make this as smooth as possible.";
			npctalk "Ah, the size doesn't matter.", "Injured#hms01", bc_self;
			next;
			mes "[Ezekiel]";
			mes "I'm not going to cutting your leg off, I can heal it.";
			next;
			mes "[Old Man]";
			mes "What? With a leg that is shaped like that?";
			next;
			mes "[Old Man]";
			mes "How do you fix a leg like that...! Let's cut it off and put some medicine on it to stop it from getting infected! Don't waste time by holding it...!";
			next;
			mes "[Ezekiel]";
			mes "I'm saying I can do it because I can do it. Everybody, get out of the way.";
			next;
			mes "[Maram]";
			mes "You'll have to trust him. Ezekiel may not look like much in your eyes, but he's pretty good, right?";
			npctalk "I didn't go out of my way to bring him in.", "Maram#hms01", bc_self;
			next;
			mes "[Old Man]";
			mes "No, the time is...!";
			next;
			specialeffect EF_HEALSP, AREA, "Injured#hms01";
			mes "[Ezekiel]";
			mes "Ahhh... If only we had the right equipment... I could have done it faster... I can't help it.";
			next;
			specialeffect EF_REPAIRWEAPON, AREA, "Injured#hms01";
			mes "[Joel]";
			mes "Aaaaaah!!! I'm dying!!!";
			npctalk "Oh, no!!!", "Old Man#hms01", bc_self;
			npctalk "Isn't he supposed to heal him?", "Old Man#hms02", bc_self;
			npctalk "Stop it!!!!", "Old Man#hms03", bc_self;
			delitem 999,3;	// Steel
			erasequest 17506;
			setquest 17507;
			close;
		}
		if (isbegin_quest(17505) == 1) {
			mes "[Ezekiel]";
			mes "Adventurer, how's it going, can I start my construction?";
			next;
			select( "About that..." );
			mes "[Ezekiel]";
			mes "I'm trying to keep it out of the way so it doesn't affect anything else, but I guess that doesn't work either.";
			next;
			mes "[Ezekiel]";
			mes "But I can't give up, and I'm glad you're willing to come back and talk about it, but before then, I need to get a group of like-minded people together and get ready to convince them.";
			next;
			mes "[Ezekiel]";
			mes "I thought about doing what they said, but I can't. I don't know what else to do, but this is something I need to do.";
			next;
			mes "[Ezekiel]";
			mes "Speaking of which, Adventurer, I have a favor to ask.";
			next;
			select( "What is it?" );
			mes "[Ezekiel]";
			mes "You can get most things here, but not Steel. Because of how difficult it is to bring it in, not to mention you need a lot of facilities to make Steel. So, Would it be okay if you bring me 3 of them? just 3...";
			next;
			select( "I'll bring it to you." );
			mes "[Ezekiel]";
			mes "Thank you for your generosity. I'm glad you're so sympathetic to my cause and willing to help... I'll go get ready for construction.";
			erasequest 17505;
			setquest 17506;
			close;
		}
		if (isbegin_quest(17504) == 1) {
			mes "[Ezekiel]";
			mes "Please convince <NAVI>[sir]<INFO>wolfvill,176,111,0,101,0</INFO></NAVI>that we need this facility.";
			close;
		}
		mes "[Ezekiel]";
		mes "Ezekiel, you didn't come here to live a life of riches. You came here to do a job!";
		next;
		mes "[Ezekiel]";
		mes "No, but to live here as myself is to really live. I am an eternal stranger here, am I not?";
		next;
		cloakoffnpcself( "Maram#hms01" );
		select( "That person...?" );
		mes "[Maram]";
		mes "Shhh- wait a minute, listen to what he's saying, he sounds like he's saying something.";
		next;
		mes "[Ezekiel]";
		mes "No, but I'm just as much an outsider here as I am there. Isn't that the same? Shouldn't I be more comfortable?";
		mes "Maybe I should just give up and go home.";
		next;
		mes "[Ezekiel]";
		mes "No, but that's what I initially aimed for. Finding my roots...";
		next;
		mes "[Maram]";
		mes "Ezekiel! How have you been? Why are you muttering to yourself like that?";
		next;
		mes "[Ezekiel]";
		mes "Maram? Maram?? That's great. You know what, listen to me. You're busy? You're busy, but listen. Who am I going to tell this to? I don't even know anybody yet. So listen to me.";
		npctalk "Okay, okay, I'm listening, calm down.", "Maram#hms01", bc_self;
		next;
		mes "[Ezekiel]";
		mes "I told you I was going to build a clinic here. When I came here, there was no decent clinic, so I build one.";
		next;
		mes "[Maram]";
		mes "That's right. That's why I got a lot of things to fill it with this time.";
		npctalk "Really? We'll see about that later. Just listen to the story first.", "Ezekiel#hms01", bc_self;
		next;
		mes "[Ezekiel]";
		mes "I did that, but as soon as I started digging, the elders here stopped me. They say we should live in harmony with nature as we have done up until now, but they look at me as some sort of environmental destroyer. Am I that kind of person?";
		next;
		mes "[Ezekiel]";
		mes "Is it really that destructive to nature and the environment to just build a more hygienic, more modern clinic, which would allow for a faster response in an emergency?";
		next;
		mes "[Maram]";
		mes "No. You aren't that kind of person. Everyone else, but never you.";
		next;
		mes "[Ezekiel]";
		mes "Isn't that right? And you've gotten me to the point where... I'm not doing anything right now because I'm thinking, Am I really a bad person?";
		next;
		mes "[Maram]";
		mes "If that's the case, you should talk to Suad. That's not fair. We're all trying to live together. The clinic isn't against nature. Oh, come on.";
		next;
		mes "[Ezekiel]";
		mes "Well... I talked to Suad... but he said there was nothing he could do and that he couldn't do what he wanted either.";
		next;
		mes "[Ezekiel]";
		mes "I told him that we need a clinic, but we can't just push it through because the elderly people who have lived here for a long time are against it, so we have to convince them.";
		next;
		mes "[Maram]";
		mes "From the sounds of it, so does he. We can't ignore the opinions of the elders, after all, and it's not like Suad's the kind of guy who'd bend over backwards to do so.";
		next;
		mes "[Ezekiel]";
		mes "So... I'm... going back to Rachel... What do you think?";
		next;
		mes "[Maram]";
		mes "What, you came this far and you're going back?";
		next;
		mes "[Ezekiel]";
		mes "No, I didn't set out to go back... It's just that people are like that, they come here to have a better life, and if it's the same here or there, why wouldn't they want to stay where it's easier...";
		next;
		mes "[Ezekiel]";
		mes "So what I'm saying is... I'm trying to figure it out. When did I say I would just cut it and go back? Can you please not listen to me however you want?";
		next;
		mes "[Maram]";
		mes "Hmmm... but the clinic is a necessity as far as I'm concerned, and if I can make the case...";
		next;
		mes "[Maram]";
		mes "That's right! I think the adventurer might be able to help us out. You know, this adventurer is really good at talking, don't you think his face makes him believable? This is just the kind of prize that grown-ups like.";
		next;
		mes "[Maram]";
		mes "He has a big heart, and he helped us buy and transport supplies.";
		next;
		mes "[Ezekiel]";
		mes "He's a nice guy. He's a good man, yes, but...";
		next;
		mes "[Ezekiel]";
		mes "...Is that really the kind of person who gets the favor of the adults? They're so... so... stubborn.";
		npctalk "You're so good at calling yourself stubborn.", "Maram#hms01", bc_self;
		next;
		mes "[Maram]";
		mes "You have to make the most of it. Even if I can't persuade you, what else is there to do but listen to more nagging? Is that the adventurer going to listen to that instead?";
		npctalk "Oh, that's kind of nice.", "Ezekiel#hms01", bc_self;
		next;
		mes "[Ezekiel]";
		mes "Well... Can I ask you a favor?";
		mes "Adventurer, do me a favor, we really need a modern clinic here, even if it's not as big as the one from Rachel.";
		next;
		mes "[Ezekiel]";
		mes "Where I am now, if I get hurt or sick, I have to rely on folk remedies from the past.";
		npctalk "Oh, I know what that is! They put an unknown salve on the wound!", "Maram#hms01", bc_self;
		next;
		mes "[Ezekiel]";
		mes "I have some medicines and medical supplies from Rachel, but they are scarce, and I'm not in the right place to use them.";
		next;
		mes "[Ezekiel]";
		mes "But there's nothing I can do to convince the naysayers, so I'm going to ask an adventurer <NAVI>[sir]<INFO>wolfvill,176,111,0,101,0</INFO></NAVI> to do it for me.";
		next;
		mes "[Maram]";
		mes "Please do, and in the meantime, I'll go meet some other people.";
		setquest 17504;
		close2;
		cloakonnpcself( "Maram#hms01" );
		end;
	case 1:
		specialeffect EF_PHARMACY_OK, AREA, "Injured#hms01";
		specialeffect EF_HEALSP, AREA, "Injured#hms01";
		mes "[Ezekiel]";
		mes "How about this? Don't push yourself for a while, eat good food, think good thoughts, and rest well, and you'll be able to walk or run lightly.";
		next;
		mes "[Joel]";
		mes "Am I alive?? Am I alive?? Is my leg okay??";
		next;
		mes "[Maram]";
		mes "Uh, since you say it is, it must be, right?";
		next;
		mes "[Joel]";
		mes "Thank you so much!! You saved my boots! What's your name? I'll be good to you in the future. You're my savior. I never forget his saviors. For life.";
		next;
		mes "[Old Man]";
		mes "So, how did you save the leg?";
		next;
		mes "[Ezekiel]";
		mes "Because that's what I learned. If the clinic had been properly equipped, we could have treated him more completely and accelerated his recovery.";
		next;
		mes "[Old Man]";
		mes "Hmm... Is that what everyone does these days?";
		next;
		mes "[Ezekiel]";
		mes "Yeah, it's not going to cost you your leg, as long as you treat it right.";
		next;
		mes "[Old Man]";
		mes "You can do that faster and more appropriately if you have a clinic, right?";
		next;
		mes "[Ezekiel]";
		mes "Yes...? Isn't that right...?";
		next;
		mes "[Old Man]";
		mes "Hmm... That's the way it is these days, isn't it, Adventurer?";
		next;
		select( "That's the way it is these days." );
		mes "[Ezekiel]";
		mes "Like I said, it's not the technology of the foreigns, it's the technology and facilities of the advanced era.";
		next;
		mes "[Old Man]";
		mes "Hmm, I don't think this is something you should just blindly oppose.";
		npctalk "It looks like it could be useful.", "Old Man#hms01", bc_self;
		next;
		mes "[Old Man]";
		mes "Right? That's my opinion too. It's about saving people. If we do it our way, we can save something from death.";
		npctalk "If only we could have done this...", "Old Man#hms02", bc_self;
		next;
		mes "[Old Man]";
		mes "Hmm... How long would it take to build that clinic?";
		next;
		mes "[Ezekiel]";
		mes "Eh...? Well, it depends on labor and capital.";
		next;
		mes "[Old Man]";
		mes "We'll help you as much as we can. Let's build it.";
		npctalk "I'll carry anything I can.", "Old Man#hms03", bc_self;
		next;
		mes "[Old Man]";
		mes "Instead, it should fit in with the way of life here, it should fit in with the place.";
		npctalk "Because the elderly here have a hard time adapting to anything too new.", "Old Man#hms02", bc_self;
		next;
		mes "[Ezekiel]";
		mes "I see... I understand it.";
		next;
		mes "[Maram]";
		mes "Wow, you guys thought of everything. This is exactly what I need, and I'm all for it.";
		next;
		mes "[Old Man]";
		mes "Is there anything else we need here?";
		next;
		mes "[Old Man]";
		mes "What, you're accepting more than clinics?";
		next;
		mes "[Old Man]";
		mes "Didn't that make you think? You have to go with the flow. You can't be stubborn forever.";
		next;
		mes "[Old Man]";
		mes "I mean, we're not going to live the way we do now, even if we do reclaim our land. We already live differently than we used to.";
		next;
		mes "[Old Man]";
		mes "Hey, young man, if there's anything else that's important or necessary, let me know and we'll give it some thought.";
		next;
		mes "[Ezekiel]";
		mes "I will. I'll build the clinic as close to this place as possible, as you said.";
		next;
		mes "[Old Man]";
		mes "Yeah. You know we're not going to live here forever, right?";
		next;
		mes "[Ezekiel]";
		mes "Yes, that's exactly what I thought.";
		next;
		mes "[Old Man]";
		mes "Well, we'll take our leave. Thank you for your time today.";
		next;
		cloakonnpcself( "Old Man#hms01" );
		cloakonnpcself( "Old Man#hms02" );
		cloakonnpcself( "Old Man#hms03" );
		mes "[Maram]";
		mes "Let's see!!!";
		mes "Whoa- that's a relief, isn't it?";
		next;
		mes "[Ezekiel]";
		mes "Yeah, it's there... right? But it's so abrupt that it's a little baffling, isn't it?";
		next;
		mes "[Maram]";
		mes "Now that they've seen it with their own eyes, they think differently. That's good. Now, let's finish what we started, shall we?";
		next;
		mes "[Ezekiel]";
		mes "Yes. But first, I think we need to change the design to match this place. ";
		next;
		mes "[Maram]";
		mes "The Adventurer will help you, right?";
		next;
		select( "That's... right..." );
		mes "[Maram]";
		mes "If you need any equipment or tools, let me know in advance and I'll bring them next time.";
		mes "Joel, let's go get some rest, too.";
		next;
		mes "[Joel]";
		mes "Goodbye, my savior. I'll be back in the near future!";
		emotion ET_THROB, getnpcid(0,"Injured#hms01");
		next;
		cloakonnpcself( "Maram#hms01" );
		cloakonnpcself( "Villager#hms01" );
		cloakonnpcself( "Injured#hms01" );
		mes "[Ezekiel]";
		mes "Adventurer, thank you so much for your help. This is what I got when I got settled here, and I don't need anything... I'll give it to you, Adventurer, as a token of my appreciation.";
		next;
		mes "[Ezekiel]";
		mes "Well, until next time, and maybe I'll ask you for a favor, so stop by often!";
		completequest 17507;
		mes "^4d4dffThis will result in a favorable evaluation of you.^000000";
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		close;
	case 2:
		break;
	}
	// daily
	switch( checkquest(17509,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Ezekiel]";
		mes "Ugh, it's hard. Adventurer, what's going on here. The thing you brought me is under construction... It's dangerous if you're here, so come back after dawn.";
		close;
	case 2:
		erasequest 17509;
		break;
	}
	switch( isbegin_quest(17508) ) {
	case 0:
		mes "[Ezekiel]";
		mes "Hello, Adventurer.";
		next;
		select( "How's the construction going?" );
		mes "[Ezekiel]";
		mes "It's fine. But we're still short on some things, like Steel and Very Unusual Crystals.";
		next;
		mes "[Ezekiel]";
		mes "They use a lot of crystals here, and they're very hard, so they're great to use here and there.";
		next;
		if (select( "I'll get it for you.", "I'd love to get you one, but..." ) == 2) {
			mes "[Ezekiel]";
			mes "Are you busy? It seemed like that. Even if you are busy, make sure to eat your meals.";
			close;
		}
		mes "[Ezekiel]";
		mes "Wow, thank you so much!";
		next;
		mes "[Ezekiel]";
		mes "I would need 1 Steel and 10 Very Unusual Crystal, and the Very Unusual Crystal can be obtained from the Gray Wolf.";
		mes "I'll wait!";
		setquest 17508;
		close;
	case 1:
		if (countitem(999) < 1 || countitem(1000406) < 10) {
			mes "[Ezekiel]";
			mes "Thank you, Adventurer, for your efforts. Uh... but we're a little low on quantity, did you forget...?";
			next;
			mes "[Ezekiel]";
			mes "I would need 1 Steel and 10 Very Unusual Crystal, and the Very Unusual Crystal can be obtained from the Gray Wolf.";
			close;
		}
		mes "[Ezekiel]";
		mes "Adventurer, you've worked hard. I'm always grateful. I'll take a break today and see you again after dawn!";
		delitem 999,1;	// Steel
		delitem 1000406,10;	// Ep18_Very_Ddan_Crystal
		erasequest 17508;
		setquest 17509;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		close;
	case 2:	// impossible
		end;
	}
	end;

OnTouch:
	if (isbegin_quest(17504) == 0 && isbegin_quest(17505) == 0 && isbegin_quest(17506) == 0 && isbegin_quest(17507) == 0)
		npctalk "What wealth and glory did you come here to enjoy. What did you do?", "Ezekiel#hms01", bc_self;
	else if (isbegin_quest(17507) == 1) {
		cloakoffnpcself( "Old Man#hms01" );
		cloakoffnpcself( "Old Man#hms02" );
		cloakoffnpcself( "Old Man#hms03" );
		cloakoffnpcself( "Maram#hms01" );
		cloakoffnpcself( "Villager#hms01" );
		cloakoffnpcself( "Injured#hms01" );
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(17504) == 0 && isbegin_quest(17505) == 0 && isbegin_quest(17506) == 0 && isbegin_quest(17507) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17505) == 1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17506) == 1 && countitem(999) >= 2" );	// Steel
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17507) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(17507) == 2 && isbegin_quest(17508) == 0 && (checkquest(17509,PLAYTIME) == -1 || checkquest(17509,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(17508) == 1 && countitem(999) > 0 && countitem(1000406) > 9" );
	end;
}

wolfvill,174,252,3	duplicate(dummy_cloaked_npc)	Maram#hms01	4_EP18_MARAM
wolfvill,175,249,1	duplicate(dummy_cloaked_npc)	Old Man#hms01	4_EP18_GW_OLD01
wolfvill,173,247,1	duplicate(dummy_cloaked_npc)	Old Man#hms02	4_EP18_GW_OLD02
wolfvill,170,248,7	duplicate(dummy_cloaked_npc)	Old Man#hms03	4_EP18_GW_MIDDLE01
wolfvill,170,251,5	duplicate(dummy_cloaked_npc)	Villager#hms01	4_M_RACHMAN1
wolfvill,172,250,1	duplicate(dummy_cloaked_npc)	Injured#hms01	4_M_DIEMAN

// Quest: Clinic Construction. Step 2.
wolfvill,174,111,5	script	Old Man#hms05	4_EP18_GW_OLD02,{
	mes "[Old man]";
	mes "If you have any difficulties in life, tell me.";
	close;
}

wolfvill,178,110,3	script	Old Man#hms06	4_EP18_GW_MIDDLE01,{
	mes "[Old Man]";
	mes "Do you have any questions?";
	close;
}

wolfvill,176,111,3	script	Old Man#hms04	4_EP18_GW_OLD01,{
	if (ep18_main < 36) {
		mes "[Old Man]";
		mes "I've got to see the newcomers.";
		close;
	}
	if (isbegin_quest(17504) == 1) {
		mes "[Old Man]";
		mes "The people who came in this time will also have to adapt well.";
		next;
		mes "[Old Man]";
		mes "We'll have to take another look.";
		next;
		mes "[Old Man]";
		mes "She doesn't like it when I visit too often. You think it's the same as when we were kids?";
		next;
		mes "[Old Man]";
		mes "Now, if you want to live here from now on, you have to fit in. You have to follow the rules here so we can all live in harmony.";
		next;
		mes "[Old Man]";
		mes "Whether it's the same as ours or not, it's always nice to have one more neighbor to talk to. Who doesn't love a friendly neighbor?";
		npctalk "Everyone adjusted that way.", "Old Man#hms05", bc_self;
		next;
		select( "I..." );
		mes "[Old Man]";
		mes "Who are you? I don't recognize you.";
		npctalk "Is this a newcomer?", "Old Man#hms05", bc_self;
		npctalk "I'm not forgetting something, am I?", "Old Man#hms06", bc_self;
		next;
		mes "[Old Man]";
		mes "Oh, you're back again? Wasn't it a while ago? Are you going to be here more often now?";
		next;
		mes "[Old Man]";
		mes "Welcome, welcome, welcome, and be sure to ask if you have any questions.";
		next;
		mes "[Old Man]";
		mes "Feel free to ask, not everyone here is bothered by that.";
		next;
		select( "I'm here for a clinic matter..." );
		mes "[Old Man]";
		mes "What's that? A clinic? This can't be the clinic they're building, can it?";
		npctalk "Sure. What else could it be?", "Old Man#hms05", bc_self;
		next;
		mes "[Old Man]";
		mes "I think I said it well enough for everyone to understand. There is no need to build a clinic, and you should not build one.";
		next;
		mes "[Old Man]";
		mes "Why build a new building, a foreign one even, when you can just do the treatment where you are now?";
		next;
		mes "[Old Man]";
		mes "Isn't that how we all live without it?";
		next;
		select( "Because medical facilities are important." );
		mes "[Old Man]";
		mes "No, what? So you're saying this is because we don't think it's important? Are we not good enough?";
		npctalk "We're not being grumpy for no reason.", "Old Man#hms06", bc_self;
		next;
		mes "[Old Man]";
		mes "We know it's good, we know it's comfortable, we know how good it is, but you can't get used to it.";
		next;
		mes "[Old Man]";
		mes "We get used to the way of life of the foreigners, and eventually we get used to it, and then we can't live without that convenience.";
		npctalk "That's what the people occupying our land want.", "Old Man#hms05", bc_self;
		next;
		mes "[Old Man]";
		mes "What you have now is enough, but you shouldn't rely on it. That means losing.";
		next;
		select( "But it's a necessary facility." );
		mes "[Old Man]";
		mes "Well, it hasn't been lacking, because if it had, we wouldn't have survived here for as long as we have.";
		next;
		mes "[Old Man]";
		mes "Anyway, I think that's the case. Even though I said it in a nice way, you still don't understand.";
		next;
		mes "[Old Man]";
		mes "If you want to live here from now on, you'd better forget all about life over there as soon as possible.";
		next;
		mes "[Old Man]";
		mes "The sooner you adapt to life here, the better off you will be.";
		next;
		select( "I'm not... I'm not from here..." );
		mes "[Old Man]";
		mes "What? You're not even from here? What right do you have to interfere?";
		next;
		mes "[Old Man]";
		mes "Calm down. You can do that. Don't be mad at him, he's been helping your kids.";
		next;
		mes "[Old Man]";
		mes "We'll talk about <NAVI>[that tooth]<INFO>wolfvill,171,253,0,101,0</INFO></NAVI> on the clinic later, but I think we should keep the outsiders out of this.";
		erasequest 17504;
		setquest 17505;
		close;
	}
	if (isbegin_quest(17505) == 1) {
		mes "[Old Man]";
		mes "We'll talk about <NAVI>[that tooth]<INFO>wolfvill,171,253,0,101,0</INFO></NAVI> on the clinic later, but I think we should keep the outsiders out of this.";
		close;
	}
	mes "[Old man]";
	mes "I'll have to go to the newcomers.";
	close;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(17504) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Checking Traps for Food. Step 1 + 3 (final).
wolfvill,197,170,5	script	Larama#ep18	4_M_DESERT,{
	if (rand(2))
		mes "He is busy sharpening his knife, so I call, but there is no answer.";
	else {
		mes "[Larama]";
		mes "Oh, I'm busy right now. We'll talk later.";
	}
	close;
}

wolfvill,202,166,3	script	Eruin#ep18	4_F_SHABBY,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36) {
		mes "[Eruin]";
		mes "...";
		mes "Hunting non-monster animals in this forest is forbidden for outsiders..";
		mes "Don't catch any rabbits.";
		close;
	}
	switch( isbegin_quest(8688) ) {
	case 0:
		mes "[Eruin]";
		mes "...You say an adventurer has arrived.";
		mes "Are you wandering around, looking for something to do?";
		next;
		if (select( "Yes", "No" ) == 2) {
			mes "[Eruin]";
			mes "If you don't have anything to do, don't just sit around here and watch the fire that's been lit over there.";
			close;
		}
		mes "[Eruin]";
		mes "I am in charge of livestock and wildlife viewing with the Eruin and their families over there.";
		mes "It's also my job to maintain knives and other blades.";
		npctalk "take care of Eruin's grandmother~!", "Larama#ep18", bc_self;
		next;
		mes "[Eruin]";
		mes "...Tsk tsk.";
		npctalk "hehe.", "Larama#ep18", bc_self;
		next;
		mes "[Eruin]";
		mes "If there's one thing I'd leave to an outsider, it's to checking the traps I set this morning.";
		mes "Can you do it?";
		next;
		select( "That shouldn't be too hard" );
		mes "[Eruin]";
		mes "It's good to have a quick answer.";
		mes "...";
		next;
		setquest 8688;
		mes "[Eruin]";
		mes "<NAVI>[Gray Wolf Forest]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI> If you look around, you'll see a bunch of traps..";
		mes "If you've got some time, go get five of them.";
		mes "If you leave the remaining bait alone, something will catch on it again, so you'll just have to wait and see.";
		next;
		mes "[Eruin]";
		mes "Thank you for your hard work.";
		close;
	case 1:
		.@trap01 = countitem(1000412);
		.@trap02 = countitem(1000413);
		.@trap03 = countitem(1000414);
		if ((.@trap01 + .@trap02 + .@trap03) < 5) {
			mes "[Eruin]";
			mes "<NAVI>[Gray Wolf Forest]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI>I'd like you to collect about 5 of the things caught in the trap.";
			close;
		}
		if (.@trap01 > 0)
			delitem 1000412, .@trap01;
		if (.@trap02 > 0)
			delitem 1000413, .@trap02;
		if (.@trap03 > 0)
			delitem 1000414, .@trap03;

		completequest 8688;
		setquest 8689;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes "^4d4dffThis will result in a favorable assessment of you.^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		next;
		mes "[Eruin]";
		mes "...Okay. Good job.";
		mes "If you're free enough to hang around here tomorrow, can I ask you again?";
		next;
		if (select( "Sure", "I think I'll be busy tomorrow" ) == 2)
			end;
		mes "[Eruin]";
		mes "Okay. I'm in charge of trapping and grooming, so I'm always working, so if you peek again, I'll know and I'll make you do the work instead of bothering me.";
		mes "It's no different for an outsider.";
		close;
	case 2:
		break;
	}

	// daily
	switch( checkquest(8689,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Eruin]";
		mes "Go back and rest today.";
		close;
	case 2:
		erasequest 8689;
		break;
	}
	switch( isbegin_quest(8690) ) {
	case 0:
		mes "[Eruin]";
		mes "Are you here? I see you're snooping around again, so it looks like you're free.";
		next;
		switch( select( "Go investigate the trap", "Chat", "Quit" ) ) {
		case 1:
			mes "[Eruin]";
			mes "If you lend a hand, I have a lot of other things to do, so I appreciate it.";
			mes "While going around the area, collect 5 things caught in the traps I've set up.";
			next;
			if (select( "Accept", "Decline" ) == 2) {
				mes "[Eruin]";
				mes "Stop fidgeting and sit still. You're restless.";
				close;
			}
			setquest 8690;
			mes "[Eruin]";
			mes "If you leave the remaining bait alone, something else will be caught again, so just wait and see.";
			mes "Thanks for your hard work.";
			close;
		case 2:
			mes "[Eruin]";
			mes "Stop fidgeting and sit still. You're restless.";
			close;
		case 3:
			mes "[Eruin]";
			mes "Since when have you been setting traps?";
			mes "Hmm. Since you quit being an adventurer?";
			close;
		}
		end;
	case 1:
		.@trap01 = countitem(1000412);
		.@trap02 = countitem(1000413);
		.@trap03 = countitem(1000414);
		if ((.@trap01 + .@trap02 + .@trap03) < 5) {
			mes "[Eruin]";
			mes "It would be nice if you could gather about 5 things caught in traps from <NAVI>[Gray Wolf Forest]<INFO>gw_fild01,25,101,0,101,0</INFO></NAVI>.";
			close;
		}
		if (.@trap01 > 0)
			delitem 1000412, .@trap01;
		if (.@trap02 > 0)
			delitem 1000413, .@trap02;
		if (.@trap03 > 0)
			delitem 1000414, .@trap03;

		erasequest 8690;
		setquest 8689;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 18252408,2000000;
		mes "[Eruin]";
		mes "...Okay. Good job.";
		mes "If you are free enough to be here tomorrow as well, can I ask you again?";
		next;
		if (select( "Okay", "I think I'll be busy tomorrow" ) == 2)
			end;
		mes "[Eruin]";
		mes "That's good.";
		mes "He does not refuse help. Thank you.";
		close;
	case 2:	// impossible
		end;
	}
	end;

OnInit:
	// note: the questinfo on official is never removed except by PLAYTIME == 1
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(8688) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8688) == 1" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8688) == 2 && isbegin_quest(8690) == 0 && (checkquest(8689,PLAYTIME) == -1 || checkquest(8689,PLAYTIME) == 2)" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8690) == 1" );
	
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11724) == 2 && isbegin_quest(8688) == 0" );
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8688) == 1 && (countitem(1000412)+countitem(1000413)+countitem(1000414)) > 4" );
	// questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8688) == 2 && isbegin_quest(8690) == 0 && (checkquest(8689,PLAYTIME) == -1 || checkquest(8689,PLAYTIME) == 2)" );
	// questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8690) == 1 && (countitem(1000412)+countitem(1000413)+countitem(1000414)) > 4" );
	end;
}

// Quest: Checking Traps for Food. Step 2.
gw_fild01,24,122,0	script	Trap Set#01	CLEAR_NPC,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8688) == 1 || isbegin_quest(8690) == 1) {
		.@amount = countitem(1000412) + countitem(1000413) + countitem(1000414);
		if (.@amount >= 5) {
			mes "I've collected enough things caught in the traps today.";
			mes "Let's bring it to <NAVI>[Eruin]<INFO>wolfvill,202,166,0,101,0</INFO></NAVI>.";
			close;
		}
		specialeffect2 EF_STEAL;
		progressbar "FFFF00",10;
		.@r = rand(1,5);
		if (.@r == 1)
			getitem 1000412,1;	// Ep18_Trapped01
		else if (.@r == 2)
			getitem 1000413,1;	// Ep18_Trapped02
		else if (.@r == 3)
			getitem 1000414,1;	// Ep18_Trapped03
		else
			mes "I didn't get anything...";
		disablenpc strnpcinfo(0);
		initnpctimer;
		end;
	}
	end;
OnTimer60000:
	enablenpc strnpcinfo(0);
	stopnpctimer;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(8688) == 1" );
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(8690) == 1" );
	end;
}
gw_fild01,93,113,0	duplicate(Trap Set#01)	Trap Set#02	CLEAR_NPC
gw_fild01,106,126,0	duplicate(Trap Set#01)	Trap Set#03	CLEAR_NPC
gw_fild01,213,130,0	duplicate(Trap Set#01)	Trap Set#04	CLEAR_NPC
gw_fild01,267,156,0	duplicate(Trap Set#01)	Trap Set#05	CLEAR_NPC
gw_fild01,229,205,0	duplicate(Trap Set#01)	Trap Set#06	CLEAR_NPC
gw_fild01,192,210,0	duplicate(Trap Set#01)	Trap Set#07	CLEAR_NPC
gw_fild01,153,212,0	duplicate(Trap Set#01)	Trap Set#08	CLEAR_NPC
gw_fild01,121,245,0	duplicate(Trap Set#01)	Trap Set#09	CLEAR_NPC
gw_fild01,86,327,0	duplicate(Trap Set#01)	Trap Set#10	CLEAR_NPC
gw_fild01,126,356,0	duplicate(Trap Set#01)	Trap Set#11	CLEAR_NPC
gw_fild01,175,339,0	duplicate(Trap Set#01)	Trap Set#12	CLEAR_NPC
gw_fild01,192,361,0	duplicate(Trap Set#01)	Trap Set#13	CLEAR_NPC
gw_fild01,232,319,0	duplicate(Trap Set#01)	Trap Set#14	CLEAR_NPC
gw_fild01,257,297,0	duplicate(Trap Set#01)	Trap Set#15	CLEAR_NPC
gw_fild01,249,245,0	duplicate(Trap Set#01)	Trap Set#16	CLEAR_NPC
gw_fild01,303,276,0	duplicate(Trap Set#01)	Trap Set#17	CLEAR_NPC
gw_fild01,325,254,0	duplicate(Trap Set#01)	Trap Set#18	CLEAR_NPC
gw_fild01,335,241,0	duplicate(Trap Set#01)	Trap Set#19	CLEAR_NPC
gw_fild01,308,318,0	duplicate(Trap Set#01)	Trap Set#20	CLEAR_NPC
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "s. Step 1 + 2 + 3 (final).
wolfvill,147,97,5	script	Ahir#ep18	4_M_DST_CHILD,3,3,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36) {
		mes "[Ahir]";
		mes "Ah, an outsider...";
		close;
	}
	if (isbegin_quest(16548) != 2) {
		switch( checkquest(16548,HUNTING) ) {
		case -1:
			mes "[Ahir]";
			mes "Haaam... Huh? Someone I haven't seen before. Are you a new member of the Gray Wolf Village?";
			mes "Ugh...";
			next;
			select( "Did you have trouble sleeping last night?" );
			mes "[Ahir]";
			mes "Yes, I couldn't sleep a wink.";
			mes "Haaam... In the forest of the Gray Wolves, if you lie down to sleep, you hear all sorts of sounds.";
			next;
			mes "[Ahir]";
			mes "The sounds of fireflies, the chatter of adults, the sounds of beasts...";
			mes "The most disturbing sound that disrupts sleep is the cries of various monsters";
			next;
			mes "[Ahir]";
			mes "Huam... Among them, the cries of the " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + " are the most frightening.";
			mes "People even worry that they might bring sparks and burn down the entire village.";
			next;
			mes "[Ahir]";
			mes "The sight of them crying with sparks in their mouths and the suppressed voices are truly terrifying...";
			mes "Ugh, just thinking about it makes my body tremble.";
			next;
			select( "I'm an Adventurer, shall I hunt them down for you?" );
			mes "[Ahir]";
			mes "Wow! You're an Adventurer?";
			mes "In that case, I'll definitely ask for your help!";
			next;
			mes "[Ahir]";
			mes "Would you catch only 30 " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + " for us?";
			mes "If we hunt down a bunch, maybe the " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + " will keep quiet for tonight.";
			next;
			if (select( "Just leave it to me!", "Oops, I'm in a bit of a pickle right now." ) == 2) {
				mes "[Ahir]";
				mes "Well, I imagine even adventurers like you must be busy, right?";
				mes "I know you are been busy right now, but have you ever try to close your eyes and sleep well with all these various noises? That's what happened to me recently.";
				close;
			}
			mes "[Ahir]";
			mes "Wow, thank you, Adventurer!";
			mes "It's 30 " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + ". I'll be counting on you.";
			next;
			mes "[Ahir]";
			mes "Once you've hunted them all down please let me know by return to me. I'll prepare a small reward for you!";
			setquest 16548;
			close;
		case 0:
		case 1:
			mes "[Ahir]";
			mes "Thank you, Adventurer!";
			mes "There are 30 " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + ". Please, take care of them.";
			close;
		case 2:
			mes "[Ahir]";
			mes "Thank you! The chirping sound of the windstorm kite has definitely been reduced!";
			mes "I can sleep comfortably tonight.";
			next;
			mes "[Ahir]";
			mes "Okay, it probably won't last long.";
			mes "It will increase again tomorrow, but I hope you will come again after dawn and catch a " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + ".";
			next;
			mes "[Ahir]";
			mes "This is a thank you for letting me sleep well tonight.";
			mes "Please accept even a small heart, adventurer.";
			completequest 16548;
			setquest 16550;
			getitem 1000405,20;	// Ep18_Amethyst_Fragment
			getexp 7769124,3000000;
			mes " ";
			mes "^4d4dff A favorable rating for you occurs.^000000";
			add_reputation_points(REPUTATION_EP18, 100);
			if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
				ep18_main = 37;
				setquest 18082;
				mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
				mes "You are eligible to participate in the ^4d4dff conference.^000000";
			}
			close;
		}
	}
	switch( checkquest(16550,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Ahir]";
		mes "It looks like the " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + " is still lurking.";
		mes "If you provoke me now, it might be more noisy because of evil.";
		next;
		mes "[Ahir]";
		mes "Will you come back after dawn and catch a " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "?";
		mes "I beg you, Adventurer.";
		close;
	case 2:
		erasequest 16550;
		break;
	}
	switch( checkquest(16549,HUNTING) ) {
	case -1:
		mes "[Ahir]";
		mes "Sigh, I'm so sleepy again today.";
		mes "Adventurer, would you mind catching only 30 " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + " for me?";
		next;
		mes "[Ahir]";
		mes "If you hunt in a group, the " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + " will probably be silent tonight.";
		next;
		if (select( "For sure, I will catch them all.", "I'm not interested to catch them." ) == 2) {
			mes "[Ahir]";
			mes "Well, I suppose you're busy too, Adventurer?";
			mes "You must be tired, so go ahead and get some rest. It might be hard to sleep with all this chipred, though.";
			close;
		}
		mes "[Ahir]";
		mes "Wow, thank you, Adventurer!";
		mes "It's 30 " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "s, I really appreciate it.";
		next;
		mes "[Ahir]";
		mes "After you've hunted them all, please come back and let me know. I'll prepare a small reward for you!";
		setquest 16549;
		close;
	case 0:
	case 1:
		mes "[Ahir]";
		mes "Thank you, Adventurer!";
		mes "There are 30 " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + "s. Please, take care of them.";
		close;
	case 2:
		mes "[Ahir]";
		mes "Thank you! The chirping sound of the windstorm kite has definitely been reduced!";
		mes "I can sleep comfortably tonight.";
		next;
		mes "[Ahir]";
		mes "Okay, it probably won't last long.";
		mes "It will increase again tomorrow, but I hope you will come again after dawn and catch a " + getmonsterinfo("EP18_FIREWIND_KITE", MOB_NAME) + ".";
		next;
		mes "[Ahir]";
		mes "This is a thank you for letting me sleep well tonight.";
		mes "Please accept even a small heart, adventurer.";
		erasequest 16549;
		setquest 16550;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 10318080,3000000;
		close;
	}
	end;

OnTouch_:
	npctalk "Ahir: I'm really tired... and need more sleep.", "Ahir#ep18", bc_self;
	end;

OnInit:
	// first completion
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16548,HUNTING) == -1 && isbegin_quest(11724) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16548,HUNTING) == 2" );

	// daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(16548) == 2 && checkquest(16549,HUNTING) == -1 && (checkquest(16550,PLAYTIME) == -1 || checkquest(16550,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(16549,HUNTING) == 2" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Childhood Friends. Step 1.
wolfvill,182,82,5	script	Albert#ep18	4_M_RACHMAN1,{
	if (ep18_main < 36) {
		mes "[Albert]";
		mes "...";
		close;
	}
	switch( isbegin_quest(8718) ) {
	case 0:
		mes "[Albert]";
		mes "If you ever decide to go back to Rachel, will you do me a favor?";
		next;
		mes "[Albert]";
		mes "To put it bluntly... I have a friend who worked as a clerk at Rachel's hotel.";
		mes "If he hasn't come here yet, he's probably still working there.";
		next;
		mes "[Albert]";
		mes "Me and my friend... Horim has lived next door to me since we were kids.";
		mes "I used to live in Rachel, but I couldn't stand it anymore, so...";
		next;
		mes "[Albert]";
		mes "Their family and my family decided to knit Rachel.";
		mes "But Horim said he would stay in Rachel.";
		mes "We couldn't wait any longer, so we left him behind and moved him here.";
		next;
		mes "[Albert]";
		mes "Rachel is a big city, but right now he's alone.";
		mes "...";
		mes "If you don't mind, I was wondering if I could stop by and see how he is doing.";
		next;
		if (select( "Sure", "I'm not going anywhere for a while." ) == 2) {
			mes "[Albert]";
			mes "If that's the case, so be it then.";
			close;
		}
		mes "[Albert]";
		mes "thanks.";
		mes "Just... stop by and take a look. You don't need to report to me.";
		setquest 8718;
		close;
	case 1:
		mes "[Albert]";
		mes "You don't need to report to me.";
		mes "All you have to do is check that Horim is doing well.";
		close;
	case 2:
		mes "[Alber]";
		mes "Has he met the boy?";
		mes "Yes.";
		mes "...yes.";
		mes "I said everything I couldn't say when I left.";
		mes "Now I have no regrets left.";
		next;
		mes "[Alber]";
		mes "It feels like a gray forest is shining.";
		mes "I can't.";
		mes "All adventurers, thanks to you.";
		mes "Thank you.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8718) == 0 && isbegin_quest(11724) == 2" );
	end;
}

// Quest: Childhood Friends. Step 2.
ra_in01,386,44,0	script	#ep18w01_	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (isbegin_quest(8718) == 1) {
		cloakoffnpcself( "Employee#ep1800" );
	}
	end;
}	

ra_in01,388,59,5	script(CLOAKED)	Employee#ep1800	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8718) == 1) {
		mes "[Employee]";
		mes "...!";
		mes "Adventurer, you smell like volcanic ash.";
		mes "Thor Volcano... no, it doesn't.";
		next;
		mes "The employee looked around for a moment and then said in a low voice, I'm sorry.";
		next;
		mes "[Employee]";
		mes "Have you ever found your way to a grey wolf forest...";
		next;
		if (select( "I know.", "I don't know" ) == 2) {
			mes "[Employee]";
			mes "Pretending you don't know won't help.";
			next;
		}
		mes "[Employee]";
		mes "...I was wondering if you could direct me there.";
		mes "I really... I really want to go there.";
		next;
		mes "[Employee]";
		mes "I know it's a dangerous road, and I'm not an adventurer...";
		mes "But I really have no way to get there.";
		next;
		mes "[Employee]";
		mes "My friends and family were leaving, so I decided to hang in there, but...";
		mes "They all left like a bunch of vandals one night, thinking I was going to interfere.";
		mes "And then, of course, we didn't hear from them...";
		next;
		mes "[Employee]";
		mes "Please take me there.";
		mes "I don't have anybody anymore.";
		next;
		select( "Did something go wrong?" );
		mes "He hadn't even finished introducing himself.";
		next;
		mes "[Employee]";
		mes "Yeah, I don't know what the hell I'm talking about.";
		mes "My name is Horim.";
		mes "Adventurer...";
		mes "" + strcharinfo(0) + ", you?";
		next;
		mes "[Horim]";
		mes "Then... " + strcharinfo(0) + "You.";
		mes "Once you've been there, you're in the <B>Our</B>is in, you know the situation.";
		next;
		mes "[Horim]";
		mes "It was better than it is now, until my family left.";
		mes "It looks no different now than it did then...";
		next;
		mes "[Horim]";
		mes "Now, on the surface...it's fine, we have a bunch of policies. But underneath, it's festering and festering...";
		mes "When I'm out on the street, I can't even hear myself laugh. I feel like someone else is calling me, us, names.";
		mes "I can't take it anymore...";
		next;
		select( "Once I started..." );
		mes "[" + strcharinfo(0) + "]";
		mes "If you start it once, it will be the same on the second or third time.";
		next;
		mes "[Horim]";
		mes "...Thank you. Thank you so much...";
		next;
		mes "Horim managed to squeeze out a word of thanks and breathed a sigh of relief.";
		next;
		npctalk "Employee: Coming~", "Employee#ep1801", bc_self;
		mes "[Horim]";
		mes "...I'm sorry, sir. I've got a little something going on right now, and I have to go.";
		next;
		mes "[Horim]";
		mes "Later, See you outside the gates of Rachel.";
		completequest 8718;
		setquest 8698;
		close2;
		cloakonnpcself( "Employee#ep1800" );
		cloakonnpcself( "Employee#ep1801" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8718) == 1" );
	end;
}

ra_in01,388,63,5	script	Employee#ep1801	4_M_03,{
	mes "[Employee]";
	mes "Ha~ I wonder what happens when people use such harsh words.";
	next;
	mes "[Employee]";
	mes "Ackoooo! Welcome! Freyja's favor be with you!";
	close;
}

// Quest: Childhood Friends. Step 3.
ra_fild11,355,226,0	script	#ep18w02__	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8698) == 1)
		cloakoffnpcself( "Horim#ep1810" );
	end;
}

ra_fild11,350,236,0	script	#Horim01	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8698) == 1)
		cloakoffnpcself( "Horim#ep1810" );
	end;
}

ra_fild11,350,236,3	script(CLOAKED)	Horim#ep1810	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8698) == 1) {
		mes "[Horim]";
		mes "...Ah, adventurer.";
		mes "In fact, I've never been farther from the city than this.";
		next;
		mes "[Horim]";
		mes "So where is my hometown?";
		mes "Is it Rachel?";
		next;
		mes "[Horim]";
		mes "If you've never felt at ease no matter where you are...";
		mes "I wonder if I should leave Rachel after all...?";
		next;
		mes "[Horim]";
		mes "...That was a long way to put it.";
		mes "Which way from here?";
		mes "I'll follow your lead.";
		navigateto("ra_fild10",375,293);
		erasequest 8698;
		setquest 8699;
		cloakonnpcself( "Horim#ep1810" );
		next;
		mes "Let's head back to the grey wolf forest.";
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8698) == 1" );
	end;
}

// Quest: Childhood Friends. Step 4.
ra_fild10,375,293,0	script	#Horim02	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(8699) == 1)
		cloakoffnpcself( "Horim#ep1811" );
	end;
}

ra_fild10,379,282,0	script	#Horim03	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (isbegin_quest(8699) == 1)
		cloakoffnpcself( "Horim#ep1811" );
	end;
}

ra_fild10,375,293,5	script(CLOAKED)	Horim#ep1811	4_M_RACHMAN2,5,5,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8699) == 1) {
		mes "[Horim]";
		mes "Adventurer, hold on a second.";
		mes "Where are we now?";
		next;
		mes "[Horim]";
		mes "I looked back and saw Rachel... The city walls were so far away.";
		mes "How much further do we have to go?";
		next;
		mes "[Horim]";
		mes "...";
		mes "We're not even halfway there?";
		next;
		mes "[Horim]";
		mes "Will the road be rough?";
		mes "Will the family get along?";
		next;
		mes "[Horim]";
		mes "Will your friends get along?";
		mes "Do you mind if I go?";
		navigateto("oz_dun01",285,170);
		erasequest 8699;
		setquest 8700;
		cloakonnpcself( "Horim#ep1811" );
		next;
		mes "Let's head back to the grey wolf forest.";
		close;
	}
	end;

OnTouch:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8699) == 1" );
	end;
}

// Quest: Childhood Friends. Step 5.
oz_dun01,285,169,0	script	#ep18w04	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8700) == 1)
		cloakoffnpcself( "Horim#ep1812" );
	end;
}

oz_dun01,285,170,5	script	Horim#ep1812	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8700) == 1) {
		mes "[Horim]";
		mes "I've never seen anything like it.";
		next;
		mes "[Horim]";
		mes "As an adventurer, you see things like this all the time.";
		next;
		mes "[Horim]";
		mes "What does it look like there?";
		mes "Word on the street is that it's not a very comfortable place to live.";
		next;
		mes "[Horim]";
		mes "Still...";
		next;
		mes "[Horim]";
		mes "I like this path.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "This length?";
		next;
		mes "[Horim]";
		mes "There are so many monsters, you can't go alone...";
		mes "You've traveled so much, aren't you getting a little tired of adventuring?";
		next;
		mes "[Horim]";
		mes "That's okay, I'm good at this.";
		mes "After all, this is what I do for a living.";
		next;
		mes "[Horim]";
		mes "Let's go.";
		navigateto("gw_fild01",272,342);
		erasequest 8700;
		setquest 8701;
		cloakonnpcself( "Horim#ep1812" );
		next;
		mes "Let's head back to the gray wolf forest.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8700) == 1" );
	end;
}

// Quest: Childhood Friends. Step 6.
gw_fild01,272,342,0	script	#Horim04	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (isbegin_quest(8701) == 1) {
		cloakoffnpcself( "Horim#ep1813" );
		end;
	}
	end;
}
gw_fild01,275,338,0	duplicate(#Horim04)	#ep18w04_	HIDDEN_WARP_NPC,4,4

gw_fild01,272,342,5	script(CLOAKED)	Horim#ep1813	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8701) == 1) {
		mes "[Horim]";
		mes "The smell of volcanic ash has changed.";
		next;
		mes "[Horim]";
		mes "Remember what I told you when we first met the Adventurer?";
		mes "Thor volcano and volcanic ash smell different.";
		next;
		mes "[Horim]";
		mes "It's... I've never been out there, but I've had people come into my workplace and smell like that.";
		mes "They must have some kind of weapon... Those men must have came from the Thor volcano.";
		next;
		mes "[Horim]";
		mes "How did you know they were hiding a weapon?";
		mes "They don't see our people anyway.";
		next;
		mes "[Horim]";
		mes "Sometimes they'll talk about something confidential at the dinner table as if we can't really see them.";
		mes "Even if you try not to listen, you'll hear a word or two.";
		next;
		mes "[Horim]";
		mes "Of course, if it's a really important story, I wouldn't say it in a place like that.";
		next;
		mes "[Horim]";
		mes "However, some people have a slightly different smell of volcanic ash.";
		mes "People like me...";
		next;
		mes "[Horim]";
		mes "Will I get that smell too?";
		mes "...";
		next;
		mes "[Horim]";
		mes "...Let's go.";
		navigateto("gw_fild01",36,99);
		erasequest 8701;
		setquest 8702;
		cloakonnpcself( "Horim#ep1813" );
		cloakoffnpcself( "Horim#ep1814" );
		next;
		mes "Let's head back to Grey Wolf Village.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8701) == 1" );
	end;
}

// Quest: Childhood Friends. Step 7.
gw_fild01,36,99,0	script	#HorimF	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (isbegin_quest(8702) == 1) {
		cloakoffnpcself( "Horim#ep1814" );
		navigateto("ra_fild11",358,229);
	}
	end;
}

gw_fild01,36,99,5	script(CLOAKED)	Horim#ep1814	4_M_RACHMAN2,{
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8702) == 1) {
		mes "[Horim]";
		mes "Let's take a little break here...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Where?";
		next;
		mes "[Horim]";
		mes "There are also logs...";
		next;
		mes "[Gatekeeper]";
		mes "Hello?";
		next;
		mes "[Horim]";
		mes "hello...";
		next;
		mes "[Horim]";
		mes "Is it hard to live there?";
		next;
		select( "You don't have to think too hard about it." );
		mes "[" + strcharinfo(0) + "]";
		mes "I don't think you need to think about it too much.";
		next;
		mes "[Horim]";
		mes "You're right.";
		mes "I'm already...";
		mes "Left Rachel";
		next;
		mes "[Horim]";
		mes "...";
		next;
		select( "Reason for leaving" );
		mes "[" + strcharinfo(0) + "]";
		mes "You said you're following because all your friends and family are gone, right?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "So why bother?";
		next;
		mes "[Horim]";
		mes "Adventurer...";
		mes "Okay. So, adventurer, is there a place you have to go back to?";
		mes "First of all, many of the customers who used to come to where I worked were not adventurers.";
		next;
		mes "[Horim]";
		mes "But I need a place to return to.";
		mes "A place to say goodnight to everyone, turn off the lights, and go to sleep.";
		next;
		mes "[Horim]";
		mes "It's not because I'm lonely...";
		mes "...";
		next;
		mes "Horim swallowed while trying to say something.";
		next;
		mes "[Horim]";
		mes "There are people like that too.";
		next;
		mes "[Horim]";
		mes "...Let's go.";
		next;
		mes "[Gatekeeper]";
		mes "Is this someone coming to town?";
		next;
		mes "[Horim]";
		mes "?";
		next;
		mes "[Gatekeeper]";
		mes "I've heard the story. If he's the one who brought you, you can trust him. Get in here.";
		next;
		mes "[Horim]";
		mes "yes?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "This is the entrance.";
		mes "Enter.";
		close2;
		erasequest 8702;
		setquest 8703;
		warp "wolfvill",270,26;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8702) == 1" );
	end;
}

// Quest: Childhood Friends. Step 8 (final).
wolfvill,271,26,0	script	#HorimG	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch_:
	if (isbegin_quest(8703) == 1)
		cloakoffnpcself( "Horim#ep1815" );
	end;
}

wolfvill,266,26,5	script(CLOAKED)	Horim#ep1815	4_M_RACHMAN2,{
	if (checkweight(1000405,20) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (ep18_main < 36)
		end;
	if (isbegin_quest(8703) == 1) {
		mes "[" + strcharinfo(0) + "]";
		mes "It's here.";
		next;
		mes "[Horim]";
		mes "...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Are you disappointed?";
		next;
		mes "[Horim]";
		mes "No.";
		next;
		mes "[Horim]";
		mes "I'll look for my family.";
		mes "It must be here somewhere, right?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I'm sure you'll be happy because I didn't abandon you.";
		mes "As you said, you are good at working hard, so I would welcome it.";
		next;
		mes "[Horim]";
		mes "Whoops...";
		next;
		mes "[Horim]";
		mes "Thanks.";
		next;
		mes "[Horim]";
		mes "Thank you so much!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Can I go now?";
		next;
		mes "[Horim]";
		mes "Sure.";
		mes "Tonight... It's been a while since I can say good night to everyone.";
		next;
		mes "[Horim]";
		mes "May your journey be blessed, adventurer...";
		completequest 8703;
		getitem 1000405,20;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;
		mes "^4d4dffA favorable evaluation of you will occur.^000000";
		add_reputation_points(REPUTATION_EP18, 100);
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		// next;
		close2;
		cloakonnpcself( "Horim#ep1815" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8703) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Helping the Children. Step 1.
rachel,38,44,3	script	Samariam#ep18	4_M_CHILD1,{
	if (BaseLevel < 170) {
		mes " - This quest is only available for players level 170 and above - ";
		close;
	}
	if (isbegin_quest(16581) == 0) {
		mes "[Samariam]";
		mes "Man, I'm thirsty. Could you get me some water? Your house is the closest.";
		next;
		mes "[Karl]";
		mes "Do you have anything to eat at home? If not, could you buy some dried fruit?";
		mes "Man, you're so kind.";
		next;
		mes "[Naiman]";
		mes "There's... nothing to eat.";
		mes "I don't have any money....";
		next;
		mes "[Lukshi]";
		mes "Hey, where's this house with nothing to eat?";
		mes "You're just being stingy, aren't you?";
		next;
		mes "[Samariam]";
		mes "Disappointing, Naiman.";
		mes "I thought you were a kind person.";
		next;
		mes "[Naiman]";
		mes "Oh, no!";
		mes "We have water, so I'll go fetch some.";
		next;
		mes "[Samariam]";
		mes "Fine. Water will be wasted. Where's our share?";
		mes "Even water is bought with money, yet you claim to have none.";
		setquest 16581;
		close;
	}
	mes "[Samariam]";
	mes "Ah, I'm hungry and thirsty from playing.";
	mes "I wish I could sit somewhere cool and have some iced tea with dried fruit.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 170 && isbegin_quest(16581) == 0" );
	end;
}

// Quest: Helping the Children. Step 2.
rachel,37,42,7	script	Karl#ep18	4_M_RACHMAN1,{
	if (isbegin_quest(16581) == 1) {
		mes "[Karl]";
		mes "Why don't you have any money? Doesn't your dad work at Lukshi's pawn shop?";
		mes "Is it because Lukshi's mom didn't give your dad any money?";
		next;
		mes "[Lukshi]";
		mes "Our mom gives money to your dad, but you don't want to buy us a single fruit that's on sale?";
		next;
		mes "[Samariam]";
		mes "Alright, let's stop. It's pitiful~ Let's stop saying we don't have money.";
		next;
		mes "[Naiman]";
		mes "No!!! It's not pitiful....";
		mes "It's not pitiful...!!";
		next;
		mes "[Samariam]";
		mes "Oh, sorry~ It was a joke.";
		mes "Why are you getting serious and angry. Scary....";
		next;
		mes "[Samariam]";
		mes "I heard the natives are a bit hot-tempered, but still, isn't it a bit much to get angry one by one?";
		mes "Isn't it?";
		next;
		mes "[Karl]";
		mes "Yeah, that's right. Even if you're angry, you have to know how to endure it to play together.";
		mes "Be grateful to us for playing with a kid like you.";
		completequest 16581;
		setquest 16582;
		close;
	}
	mes "[Karl]";
	mes "I want to drink sweet tea with lots of ice.";
	mes "Then it would be even more fun to play!";
	next;
	mes "[Karl]";
	mes "It's too hot and I'm thirsty right now.";
	mes "But I don't want to go home either.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16581) == 1" );
	end;
}

// Quest: Helping the Children. Step 3.
rachel,40,45,3	script	Lukshi#ep18	4_M_DST_CHILD,{
	if (isbegin_quest(16582) == 1) {
		mes "[Lukshi]";
		mes "Yes, you should thank us!";
		next;
		select( "I can't stand it anymore.", "Stop bothering us." );
		mes "[Lukshi]";
		mes "Hmm? Who are you to interrupt us while we're playing?";
		mes "You don't seem like you belong here... Why are you meddling?";
		next;
		select( "Is that playing?", "It's playing, not bothering." );
		mes "[Samariam]";
		mes "It's inevitable that we're a bit different from you due to our age~";
		mes "This one is a native here, and we're all immigrants.";
		next;
		mes "[Samariam]";
		mes "Everyone knows that natives have some shortcomings compared to immigrants, right?";
		mes "But still, we're all playing together like this.";
		next;
		mes "[Naiman]";
		mes "No! Who says that? What's the difference between natives and immigrants!";
		next;
		mes "[Karl]";
		mes "Shouting again.";
		mes "You're proving that natives are more hot-tempered.";
		next;
		select( "You're behaving in a way that makes people angry.", "Of course, people get angry when you speak like that." );
		mes "[Samariam]";
		mes "But it's true, isn't it?";
		mes "Naiman's dad works at Lukshi's shop, and Lukshi's mom always says that.";
		next;
		mes "[Samariam]";
		mes "Natives learn things late and are hot-tempered.";
		mes "But the aunty who hires such natives and pays them a salary is amazing, right?";
		erasequest 16582;
		setquest 16583;
		close;
	}
	mes "[Lukshi]";
	mes "We have cool drinks and snacks at our house!";
	mes "But it's too far... Isn't Naiman's house the closest from here?";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16582) == 1" );
	end;
}

// Quest: Helping the Children. Step 4 (final).
rachel,36,45,5	script	Naiman#ep18	4_F_DST_CHILD,{
	if (isbegin_quest(16583) == 1) {
		if (checkweight(1000405,10) == 0) {
			mes "[Notice]";
			mes " - Your inventory is full. Please check the weight and the quantity of items you're carrying, then talk to me again. -";
			close;
		}
		mes "[Naiman]";
		mes "......";
		next;
		select( "Why do you hang out with these kids?" );
		mes "[Naiman]";
		mes "Yes, yes?";
		next;
		select( "Why do you let them treat you like this?" );
		mes "[Naiman]";
		mes "Well... they're my friends.";
		mes "If it weren't for them, I wouldn't have anyone to hang out with.";
		next;
		mes "[Samariam]";
		mes "See? Naiman hangs out with us because he likes it.";
		mes "If we were really bothering him, he wouldn't hang out with us.";
		next;
		mes "[Lukshi]";
		mes "I already know that foreigners are busybodies, but....";
		mes "Don't butt in on things you don't understand.";
		next;
		mes "[Naiman]";
		mes "I... I'm going home to get some water.";
		mes "And... sorry for getting upset for no reason.";
		next;
		cloakonnpcself( "Naiman#ep18" );
		mes "[Samariam]";
		mes "Well, things happen when you hang out together, right?";
		mes "Don't worry too much.";
		next;
		cloakonnpcself( "Samariam#ep18" );
		mes "[Lukshi]";
		mes "Let's go somewhere else and have fun.";
		mes "Let's leave the busybody foreigner here.";
		next;
		cloakonnpcself( "Lukshi#ep18" );
		mes "[Karl]";
		mes "Yeah, let's do that.";
		mes "Goodbye, foreign adventurer!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "....Feels like I've gained some life experience.";
		mes "It's not exactly a pleasant feeling, but....";
		cloakonnpcself( "Karl#ep18" );
		erasequest 16583;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		close;
	}
	mes "[Naiman]";
	mes "It's hot... I want to go home.";
	mes "But everyone else wants to play more.....";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16583) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Price of Labor. Step 1 + 3 (final).
rachel,181,51,3	script	Amodipin#ep18	4_M_MIDDLE,{
	if (checkweight(1000405,10) == 0) {
		mes "[Notice]";
		mes " - Your inventory is full. Please check the weight and the quantity of items you're carrying, then talk to me again. -";
		close;
	}
	if (BaseLevel < 170) {
		mes " - This quest is only available for players level 170 and above - ";
		close;
	}
	if (isbegin_quest(16584) == 0) {
		mes "[Amodipin]";
		mes "They still haven't paid the salary today. It's been three months already...";
		mes "I'd love to quit this shop right away, but then I wouldn't have any way to get the overdue salary.";
		next;
		mes "[Amodipin]";
		mes "And if rumors spread that I quit like that, as a native, I won't be able to work in other shops either.";
		mes "Oh, what should I do...";
		next;
		mes "[Amodipin]";
		mes "Oh, were you listening to my story?";
		mes "Judging by your outfit, you must be an adventurer. How lucky. Living a free life as an adventurer...";
		next;
		mes "[Amodipin]";
		mes "Um, excuse my shamelessness, but I have a favor to ask of you.";
		mes "Although my boss pretends to listen to me, if it's advice from a famous adventurer like yourself, I think he'll pay attention.";
		next;
		mes "[Amodipin]";
		mes "Could you please go to my boss's shop and urge him to pay my salary?";
		mes "I can't even afford to buy tomorrow's meal like this.";
		next;
		if (select( "I'll help.", "Why should I?" ) == 2) {
			mes "[Amodipin]";
			mes "You don't necessarily have to do that.";
			mes "I was just curious if you could help a bit.";
			close;
		}
		mes "[Amodipin]";
		mes "Thank you, thank you!";
		mes "My boss's shop is <NAVI>[here]<INFO>rachel,136,95,0,101,0</INFO></NAVI>.";
		setquest 16584;
		close;
	}
	if (isbegin_quest(16585) == 1) {
		mes "[Amodipin]";
		mes "You came. Do you have some good news?";
		next;
		select( "Share my story." );
		mes "[Amodipin]";
		mes "They'll pay the overdue salary tomorrow! Oh, thank you so much. I'm really grateful.";
		mes "Now I can buy food and clothes for my children.";
		next;
		mes "[Amodipin]";
		mes "I might get scolded tomorrow, but honestly, I'm happier that I finally got my salary.";
		mes "Getting scolded is nothing, it's just for a day or two.";
		next;
		mes "[Amodipin]";
		mes "Aren't you angry? Of course, I am.";
		mes "But what can I do? Being born as a native was my mistake.";
		next;
		mes "[Amodipin]";
		mes "I can't even run away anywhere.";
		mes "I heard rumors about a village where natives who fled to Veins live, but I doubt if such a place really exists.";
		next;
		mes "[Amodipin]";
		mes "But even if it does, I don't have the courage to live there. Oh, I've talked too much.";
		mes "I'm sorry for keeping you busy. Thank you so much!";
		erasequest 16585;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		close;
	}
	mes "[Amodipin]";
	mes "Worrying about meals every day, worrying about the children... There's never a day without worry.";
	mes "Why was I born a native, to suffer unnecessary hardships.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 170 && isbegin_quest(16584) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16585) == 1" );
	end;
}

// Quest: Price of Labor. Step 2.
rachel,136,95,3	script	Dahil#ep18	4_M_RACHMAN2,{
	if (isbegin_quest(16584) == 1) {
		mes "[Dahil]";
		mes "Welcome, I am Dahil.";
		mes "Nice to meet you. Judging by your attire, you must be an adventurer!";
		next;
		mes "[Dahil]";
		mes "I really like adventurers!";
		mes "I once dreamed of being an adventurer myself. But then I took an arrow to the knee and now I'm stuck in the city.";
		next;
		mes "[Dahil]";
		mes "If you're okay with it, could you browse some items while telling me your adventure stories?";
		next;
		select( "I came for a different story." );
		mes "[Dahil]";
		mes "A different story?";
		mes "Hmm, about Amodipin's salary? Did Amodipin ask you to talk about it?";
		next;
		mes "[Dahil]";
		mes "Well, Amodipin may know about it, but the shop's situation isn't good.";
		mes "I promised to pay it all at once next month, but using my favorite adventurer.";
		next;
		mes "[Dahil]";
		mes "Is it fair to hide behind someone else's back like that?";
		mes "You seemed to be good at your job so I hired you, but maybe I should reconsider hiring natives.";
		next;
		select( "What do you mean by that?" );
		mes "[Dahil]";
		mes "Oh, don't worry about it, adventurer. It's an old ritual problem with the natives.";
		mes "They're weak and like to hide behind others.";
		next;
		select( "Still, withholding wages is wrong", "Isn't that discrimination?" );
		mes "[Dahil]";
		mes "Who doesn't know that? Even if you know, if there's no money, what can you do?";
		mes "Well, Amodipin's salary is the last to be paid. But that can't be helped.";
		next;
		mes "[Dahil]";
		mes "It's not discrimination against the natives.";
		mes "It's just that he's the last one to come in, so the order goes like that.";
		next;
		mes "[Dahil]";
		mes "Ah, why do I have to talk only about this with adventurers?";
		mes "Tell Amodipin to put the salary in tomorrow and stop this nonsense.";
		next;
		mes "[Dahil]";
		mes "I won't discipline you for this incident, but please tell <NAVI>[Amodipin]<INFO>rachel,181,51,0,101,0</INFO></NAVI> to come to work properly.";
		mes "I'm not someone who discriminates against natives, but they lack responsibility, so if I scold them, I might just leave it at that.";
		completequest 16584;
		setquest 16585;
		close;
	}
	mes "[Dahil]";
	mes "I am currently running the shop, but I really like adventurers!";
	mes "I once dreamed of being an adventurer myself. But then I took an arrow to the knee and got stuck in the city.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16584) == 1" );
	end;
}
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Quest: Gather Opinions in Rachel. Step 1 + 2 (final).
rachel,155,236,3	script	Junok#atm	4_M_TRAINEE,{
	if (checkweight(1000405,10) == 0) {
		mes "[Junok]";
		mes "I hope the situation calms down soon. Let's talk after you've organize some of your belongings.";
		close;
	}
	if (BaseLevel < 170) {
		mes "[Junok]";
		mes "Hello. It seems you may lack the experience to undertake my request at the moment.";
		next;
		mes "[Junok]";
		mes "Please come back to me after gaining a bit more training.";
		next;
		mes "- This quest is available for those level 170 and above. -";
		close;
	}
	if (ep18_main < 12)
		end;	// unknown text
	switch( checkquest(3504,PLAYTIME) ) {
	case -1:	// first time
		if (isbegin_quest(3503) == 0) {
			mes "[Junok]";
			mes "Hello, my name is Priest Junok.";
			next;
			mes "[Junok]";
			mes "This village has been divided into two factions, the natives and the immigrants, for some time now, leading to a state of confrontation.";
			next;
			mes "[Junok]";
			mes "Efforts to resolve the conflict between the two factions are ongoing, but clear results have not been achieved.";
			next;
			mes "[Junok]";
			mes "Therefore, I would like you to approach each of them directly and find out what the issues are.";
			next;
			mes "[Junok]";
			mes "Would you be able to have a conversation with them on my behalf? I find it difficult to leave my post.";
			next;
			if (select( "Yes.", "Next Time." ) == 2) {
				mes "[Junok]";
				mes "I'm disappointed that you rejected me. My heart is in so much pain.";
				close;
			}
			setquest 3503;

			setarray .@quest_id[0],3493,3494,3495,3496,3497,3498,3499,3500,3501,3502;
			.@size = getarraysize(.@quest_id);

			for ( .@i = 0; .@i < 6; ++.@i ) {
				.@r = rand(.@size);
				setquest .@quest_id[.@r];
				deletearray .@quest_id[.@r],1;
				.@size--;
			}
			mes "[Junok]";
			mes "Please talk to the specified 3 natives and 3 immigrants, and let me know the results afterward.";
			next;
			mes "[Junok]";
			mes "The list of people to talk to can be found in the quest window or mini-map.";
			close;
		}
		break;
	case 0:
	case 1:
		mes "[Junok]";
		mes "Today, I have gathered enough information. If you need assistance again, please come back tomorrow.";
		close;
	case 2:	// daily
		if (isbegin_quest(3503) == 0) {
			mes "[Junok]";
			mes "Sure, I'll check the atmosphere between the indigenous people and the immigrants today. If there's anything specific you need assistance with, feel free to let me know.";
			next;
			if (select( "Yes", "No." ) == 2)
				end;
			erasequest 3504;
			setquest 3503;

			setarray .@quest_id[0],3493,3494,3495,3496,3497,3498,3499,3500,3501,3502;
			.@size = getarraysize(.@quest_id);

			for ( .@i = 0; .@i < 6; ++.@i ) {
				.@r = rand(.@size);
				setquest .@quest_id[.@r];
				deletearray .@quest_id[.@r],1;
				.@size--;
			}
			mes "[Junok]";
			mes "Then, I'll leave it to you. If you need any assistance, feel free to ask. Have a great day!.";
			next;
			mes "[Junok]";
			mes "Please come back after talking to the 3 natives and the 3 immigrants.";
			next;
			mes "[Junok]";
			mes "The list of people to talk to can be found in the quest window or on the mini-map.";
			close;
		}
		break;
	}
	switch( isbegin_quest(3505) ) {
	case 0:
		mes "[Junok]";
		mes "Please have conversations with all 6 citizens and return afterward.";
		close;
	case 1:	// task completed
		switch( checkquest(3504,PLAYTIME) ) {
		case -1:	// first completion
			mes "[Junok]";
			mes "Is that so...";
			next;
			mes "[Junok]";
			mes "It seems there is still a lot of resentment between them.";
			next;
			mes "[Junok]";
			mes "It's worse than I expected. Hm... I wonder what can be done about this.";
			next;
			getitem 1000405,10;	// Ep18_Amethyst_Fragment
			getexp 7769124,3000000;	// dummy value
			break;
		case 0:
		case 1:	// (shouldn't happen)
			mes "[Junok]";
			mes "Today, I have gathered enough information. If you need assistance again, please come back tomorrow.";
			close;
		case 2:	// daily quest
			mes "[Junok]";
			mes "Is that so...";
			next;
			mes "[Junok]";
			mes "It seems there is still a lot of resentment between them.";
			next;
			mes "[Junok]";
			mes "It's worse than I expected. Hm... I wonder what can be done about this.";
			next;
			getitem 1000405,3;	// Ep18_Amethyst_Fragment
			getexp 18252408,2000000;
			break;
		}
		for ( .@i = 3493; .@i < 3506; ++.@i ) {
			if (isbegin_quest(.@i) > 0)
				erasequest .@i;
		}
		setquest 3504;
		mes "[Junok]";
		mes "It was helpful guidance..";
		next;
		mes "[Junok]";
		mes "Thank you for your help. Please come again if you can assist tomorrow.";
		close;
	case 2:
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep18_main >= 12 && isbegin_quest(3503) == 0 && (checkquest(3504,PLAYTIME) == -1 || checkquest(3504,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3505) == 1" );
	end;
}

rachel,69,234,3	script	Jarad#atm1	4_M_CHILD1,2,2,{
	if (isbegin_quest(3493) == 1) {
		mes "[Jarad]";
		mes "Hello.";
		next;
		mes "[Jarad]";
		mes "There was a big disturbance in the village not too long ago.";
		next;
		mes "[Jarad]";
		mes "A speaker was giving a speech on the theme of respecting the dignity of an ideal human, but it seems to have stirred up some of the audience instead.";
		next;
		mes "[Jarad]";
		mes "I also felt that the speech was not received as favorably as one would hope.";
		next;
		mes "[Jarad]";
		mes "It was merely an idealistic narrative, detached from reality.";
		next;
		mes "[Jarad]";
		mes "A loud exchange of words occurred, and even physical confrontation seemed imminent, but bystanders managed to prevent it.";
		next;
		mes "[Jarad]";
		mes "Well, if it doesn't affect me personally, I don't really mind.";
		next;
		completequest 3493;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;	// setquest here to prevent bug
		mes "[Jarad]";
		mes "Have a good day!";
		next;
		mes " - You have completed the conversation with Jarad. - ";
		next;
		mes " - Let's find the next person - ";
		if (.@total == 12) {
			next;
			// setquest 3505;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Jarad]";
	mes "Quietly...";
	next;
	mes "[Jarad]";
	mes "I want to live without any trouble..";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3493) == 1" );
	end;
}

rachel,100,72,3	script	Rohi#atm2	4_F_SHABBY,2,2,{
	if (isbegin_quest(3494) == 1) {
		mes "[Rohi]";
		mes "Hello, My name is Rohi.";
		next;
		mes "[Rohi]";
		mes "I was living in poverty without any suitable work until recently...";
		next;
		mes "[Rohi]";
		mes "Thanks to Dina, I was able work on building management work recently, allowing me to put food on the table.";
		next;
		mes "[Rohi]";
		mes "However, from some point onward, the given working hours have increased, but there has been no increase in compensation for that.";
		next;
		mes "[Rohi]";
		mes "Why is that happening? Even among immigrants, Dina is considered wealthy, so it doesn't seem like she would lack the funds to pay.";
		next;
		mes "[Rohi]";
		mes "I talked directly to Dina about the unfair aspect, but it was in vain.";
		next;
		mes "[Rohi]";
		mes "Even if they offer a lower salary, many people are willing to take the job, you know...";
		next;
		mes "[Rohi]";
		mes "I've decided to wait for now, as Maram and other senior members are currently discussing ways to address this issue and find a solution.";
		next;
		completequest 3494;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Rohi]";
		mes "Thank you, I wish you a peaceful day as well!.";
		next;
		mes " - You concluded the conversation with Rohi - ";
		next;
		mes " - Let's find the next person - ";
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Rohi]";
	mes "With so much work given today, I'm not sure if I can finish everything on time..";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3494) == 1" );
	end;
}

rachel,258,207,3	script	Jeojin#atm3	4_F_RACHOLD,2,2,{
	if (isbegin_quest(3495) == 1) {
		mes "[Jeojin]";
		mes "Hello, I'm called Jeojin.";
		next;
		mes "[Jeojin]";
		mes "You could say I'm a native, having lived in this area since my ancestors' time.";
		next;
		mes "[Jeojin]";
		mes "These days, there's been some noise due to friction with immigrants.";
		next;
		mes "[Jeojin]";
		mes "Some of them are wealthy, and among them, Dina, in particular, holds significant economic power.";
		next;
		mes "[Jeojin]";
		mes "Even among the native, I, who have a considerable amount of property, can't really compare with that person.";
		next;
		mes "[Jeojin]";
		mes "They've begun to influence the native business district, and policies are being shaped in their favor, making my business gradually more difficult.";
		next;
		mes "[Jeojin]";
		mes "At that time, Dina proposed to purchase some of the buildings I own. I'm not sure what to do.";
		next;
		completequest 3495;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Jeojin]";
		mes "Well then, have a nice day.";
		next;
		mes " - You've finished the conversation with Jeojin. - ";
		next;
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Jeojin]";
	mes "Hmm... What should I do";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3495) == 1" );
	end;
}

rachel,159,173,3	script	Squain#atm4	4_M_LGTPOOR,2,2,{
	if (isbegin_quest(3496) == 1) {
		mes "[Squain]";
		mes "Hello~~";
		next;
		mes "[Squain]";
		mes "Thank you so much for the job.";
		next;
		mes "[Squain]";
		mes "You don't have to depend on others anymore!";
		next;
		mes "[Squain]";
		mes "If I get paid, I'd like to change the clothes I'm wearing first.";
		next;
		mes "[Squain]";
		mes "There have been many people's help...";
		next;
		mes "[Squain]";
		mes "Now I will become a person who can help others.";
		next;
		completequest 3496;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Squain]";
		mes "Then enter carefully.";
		next;
		mes " - Finished the conversation with Squain. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	end;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3496) == 1" );
	end;
}

rachel,190,30,5	script	Senado#atm5	4_F_MONK,2,2,{
	if (isbegin_quest(3497) == 1) {
		mes "[Senado]";
		mes "Hello.";
		next;
		mes "[Senado]";
		mes "Senado is someone who has trained in martial arts for over 20 years.";
		next;
		mes "[Senado]";
		mes "I've been traveling to various villages to test the strength of my accumulated martial arts skills. After breaking many dojos, I settled here in Rachel quite a while ago.";
		next;
		mes "[Senado]";
		mes "However, lately, I've sensed that the atmosphere in this village is not quite right.";
		next;
		mes "[Senado]";
		mes "It seems that people are divided into two factions and engaged in a confrontation, a conflict between the natives and immigrants...";
		next;
		mes "[Senado]";
		mes "In a strict sense, I belong to the natives. However, I don't want to be part of this confrontation.";
		next;
		mes "[Senado]";
		mes "I have no interest in their power struggle.";
		next;
		completequest 3497;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Senado]";
		mes "Then let's meet again next time.";
		next;
		mes " - I have finished the conversation with Senado. - ";
		next;
		mes " - Let's find the next person - ";
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Senado]";
	mes "Whether native or immigrant...";
	next;
	mes "[Senado]";
	mes "I don't know why they are so divided and arguing.";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3497) == 1" );
	end;
}

rachel,210,52,5	script	Japer#atm6	1_ETC_01,2,2,{
	if (isbegin_quest(3498) == 1) {
		mes "[Japer]";
		mes "Hello, they call me Trader Japer..";
		next;
		mes "[Japer]";
		mes "I believe I have exceptional business skills compared to anyone else. That's how I've reached my current position.";
		next;
		mes "[Japer]";
		mes "Certainly, the prosperity of the nation is not possible without dedicated individuals like me fulfilling their roles diligently, don't you think?";
		next;
		mes "[Japer]";
		mes "Moreover, by establishing a significant merchants' association, I've been able to provide employment opportunities for many indigenous residents living in Rachel..";
		next;
		mes "[Japer]";
		mes "I see, it seems that there's currently a lot of tension and conflict between the immigrants and the native, especially with growing dissatisfaction towards me.";
		next;
		mes "[Japer]";
		mes "It seems that the current working conditions are not satisfactory, and there's a sense of dissatisfaction, thinking that without me, they might not have had those job opportunities in the first place.";
		next;
		mes "[Japer]";
		mes "I am trembling because of the native people who are not only ungrateful but also filled with a sense of victimhood";
		next;
		completequest 3498;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Japer]";
		mes "So, until next time then..";
		next;
		mes " - You've finished talking to Japer - ";
		next;
		mes " - Let's find the next person - ";
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Japer]";
	mes "I was able to accumulate wealth by sticking to my own methods";
	next;
	mes "[Japer]";
	mes "They are misunderstanding me.";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3498) == 1" );
	end;
}

rachel,40,73,7	script	Shiroan#atm7	1_F_02,2,2,{
	if (isbegin_quest(3499) == 1) {
		mes "[Shiroan]";
		mes "Hello.";
		next;
		mes "[Shiroan]";
		mes "I am Japer disciple, Shiroan.";
		next;
		mes "[Shiroan]";
		mes "I have always followed Japer.";
		next;
		mes "[Shiroan]";
		mes "His excellent business skills are truly something to learn from.";
		next;
		mes "[Shiroan]";
		mes "However, sometimes he forces things too much.";
		next;
		mes "[Shiroan]";
		mes "As a result, conflicts with the native he employed increased";
		next;
		mes "[Shiroan]";
		mes "He is so stubborn that he doesn't listen to me... It's worrisome.";
		next;
		completequest 3499;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Shiroan]";
		mes "Then I hope you have a peaceful day.";
		next;
		mes " - I have finished the conversation with Shiroan. - ";
		next;
		mes " - Let's find the next person - ";
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Shiroan]";
	mes "I hope Japer stops arguing.";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3499) == 1" );
	end;
}

rachel,88,151,3	script	Ishira#atm8	1_F_03,2,2,{
	if (isbegin_quest(3500) == 1) {
		mes "[Isira]";
		mes "Hello, nice to meet you. I'm Isira. How can I help you?";
		next;
		mes "[Isira]";
		mes "I am a faithful follower of Freyja.";
		next;
		mes "[Isira]";
		mes "Is the atmosphere among the believers tense lately?";
		next;
		mes "[Isira]";
		mes "I wasn't aware of it, but it seems that the tension between the native and immigrants has escalated recently, judging by the current situation.";
		next;
		mes "[Isira]";
		mes "The land, already rugged, was transformed into a fertile field through the grace of the goddess, providing a path for sustenance and life...";
		next;
		mes "[Isira]";
		mes "Shouldn't we be grateful instead??";
		next;
		mes "[Isira]";
		mes "Despite that, the recent disturbance that occurred a while ago... sigh...";
		next;
		mes "[Isira]";
		mes "I'm not sure what exactly is causing the dissatisfaction.";
		next;
		completequest 3500;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Isira]";
		mes "Then, have a peaceful day.";
		next;
		mes " - The conversation with Isira has concluded. - ";
		next;
		mes " - Let's find the next person - ";
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Isira]";
	mes "Thanks to the immigrants, the benefits received by the natives must be significant...";
	next;
	mes "[Isira]";
	mes "I don't really understand why they're acting like that.";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3500) == 1" );
	end;
}

rachel,240,182,5	script	Dina#atm9	1_F_04,2,2,{
	if (isbegin_quest(3501) == 1) {
		mes "[Dina]";
		mes "Hello, what brings you here??";
		next;
		mes "[Dina]";
		mes "Ah~ It seems there are various rumors circulating about me in a negative light, right?";
		next;
		mes "[Dina]";
		mes "I hope you don't only think about the parts you heard from.";
		next;
		mes "[Dina]";
		mes "To accumulate the wealth I have now, I have always acted strategically and pragmatically.";
		next;
		mes "[Dina]";
		mes "It's regrettable to hear various negative stories recently, considering that we have a contractual relationship based on mutual understanding..";
		next;
		mes "[Dina]";
		mes "If it's about the building acquisition, I plan to maintain the current position..";
		next;
		mes "[Dina]";
		mes "It's a process of rightfully gaining profit. Saying anything against this would be unreasonable..";
		next;
		completequest 3501;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Dina]";
		mes "Wishing you a good day!.";
		next;
		mes " - I have finished the conversation with Dina. - ";
		next;
		mes " - Let's find the next person - ";
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Dina]";
	mes "Oh well, I don't know why I'm the only one dealing with this.";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3501) == 1" );
	end;
}

rachel,212,52,3	script	Hari#atm10	1_F_MERCHANT_02,2,2,{
	if (isbegin_quest(3502) == 1) {
		mes "[Hari]";
		mes "Hello, this is Jafer's wife Hari.";
		next;
		mes "[Hari]";
		mes "Because of his fiery nature, sometimes when an accident occurs, I take care of the rearrangement.a person who does.";
		next;
		mes "[Hari]";
		mes "I suffered a lot because there was no compromise on the wage increase for the natives.";
		next;
		mes "[Hari]";
		mes "Actually, I didn't think there was any need for a raise, but I hated fighting with my husband more.";
		next;
		mes "[Hari]";
		mes "Anyway, I'm glad there seems to be some compromise.";
		next;
		mes "[Hari]";
		mes "I want you to be quiet now.";
		next;
		completequest 3502;
		for ( .@i = 3493; .@i <= 3502; ++.@i )
			.@total += isbegin_quest(.@i);
		if (.@total == 12)
			setquest 3505;
		mes "[Hari]";
		mes "Then just go inside~";
		next;
		mes " - Conversation with Hari is over. - ";
		next;
		mes " - Let's find the next contact. - ";
		if (.@total == 12) {
			next;
			mes " - You have completed conversations with all 6 individuals. Let's return to Junok -";
		}
		close;
	}
	mes "[Hari]";
	mes "Hello, this is Hari.";
	next;
	mes "[Hari]";
	mes "She is the stubborn and unyielding lady in front of me.";
	close;

OnTouch_:
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3502) == 1" );
	end;
}
//-------------------------------------------------------------------



//-------------------------------------------------------------------
// Quest: Picking Half Flowers. Step 1.
rachel,169,79,0	script(CLOAKED)	#Directing Warp	WARPNPC,{
	end;
OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 170 && isbegin_quest(5932) == 0" );
	end;
}

rachel,170,80,6	duplicate(dummy_cloaked_npc)	Greedy Man#E18_1	4_M_RASWORD
rachel,172,80,4	duplicate(dummy_cloaked_npc)	Abused Child#E18_2	4_M_DST_CHILD
rachel,175,80,4	duplicate(dummy_cloaked_npc)	Abused Child#E18_3	4_M_DST_CHILD
	
rachel,176,80,0	script	#Hoesopflowerstart	HIDDEN_WARP_NPC,10,10,{
	end;
OnTouch:
	if (BaseLevel < 170)
		end;
	switch( isbegin_quest(5932) ) {
	case 0:
		cloakoffnpcself( "#Directing Warp" );
		cloakoffnpcself( "Greedy Man#E18_1" );
		cloakoffnpcself( "Abused Child#E18_2" );

		mes "- A man who appears to be greedy";
		mes "- Is yelling at a child.";
		next;
		if (select( "Listen to what's happening.", "Ignore it." ) == 2)
			end;
		emotion ET_FRET, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: Is this all I get in return after feeding and sheltering a tribal child with nowhere else to go?", "Greedy Man#E18_1", bc_self;
		emotion ET_SURPRISE, playerattached();
		unittalk getcharid(3), "" + strcharinfo(0) + " : ??", bc_self;
		next;
		emotion ET_ANGER, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: Huh?! This isn't even funny. How dare you lay your hands on a guest's wallet?", "Greedy Man#E18_1", bc_self;
		next;
		emotion ET_FRET, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: Ugh... I was just heeding the advice around not to be lenient with the natives.", "Greedy Man#E18_1", bc_self;
		next;
		npctalk "Man: I must have lost my mind for a moment. I'll let it slide this time, but disappear from my sight immediately.", "Greedy Man#E18_1", bc_self;
		specialeffect EF_HIT1, AREA, "Abused Child#E18_2";
		npctalk "Child: Aah!", "Abused Child#E18_2", bc_self;
		emotion ET_PROFUSELY_SWAT, getnpcid(0,"Abused Child#E18_2");
		cloakonnpcself( "Abused Child#E18_2" );
		cloakoffnpcself( "Abused Child#E18_3" );
		next;
		emotion ET_STARE, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: Can't you keep quiet? What are you doing making such a fuss and yelling all over the neighborhood?!", "Greedy Man#E18_1", bc_self;
		next;
		emotion ET_CRY, getnpcid(0,"Abused Child#E18_3");
		npctalk "Child: I didn't do anything. I've never seen the guest's wallet.", "Abused Child#E18_3", bc_self;
		next;
		npctalk "Man: This... This...", "Greedy Man#E18_1", bc_self;
		next;
		npctalk "Man: How dare this kid talk back instead of begging for forgiveness?!", "Greedy Man#E18_1", bc_self;
		next;
		npctalk "Man: So now you're lying even after I tried to let it slide and give you forgiveness?", "Greedy Man#E18_1", bc_self;
		next;
		emotion ET_BLABLA, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: I don't need insolent brats like you around! You're fired immediately!", "Greedy Man#E18_1", bc_self;
		next;
		cloakonnpcself( "Abused Child#E18_3" );
		cloakoffnpcself( "Abused Child#E18_2" );
		emotion ET_CRY, getnpcid(0,"Abused Child#E18_2");
		npctalk "Child: You're wrong, sir.", "Abused Child#E18_2", bc_self;
		next;
		npctalk "Child: Please, do not fire me... I needs to earn money for my father medication.", "Abused Child#E18_2", bc_self;
		next;
		emotion ET_FRET, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: ?! Medication expenses?", "Greedy Man#E18_1", bc_self;
		next;
		npctalk "Man: That's your business. Why should I even care?", "Greedy Man#E18_1", bc_self;
		next;
		npctalk "Child: Sir, then how about the money I've earned for working until now?", "Abused Child#E18_2", bc_self;
		next;
		emotion ET_QUESTION, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: What? Money you've earned?", "Greedy Man#E18_1", bc_self;
		next;
		npctalk "Man: Huh? What kind of era is this? I've heard all sorts of nonsense, but asking for money shamelessly after getting caught stealing?", "Greedy Man#E18_1", bc_self;
		next;
		emotion ET_QUESTION, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: Claiming compensation for the stolen wallet is embarrassing enough, but now you're asking for money? How laughable.", "Greedy Man#E18_1", bc_self;
		next;
		emotion ET_CRY, getnpcid(0,"Abused Child#E18_2");
		specialeffect EF_HIT1, AREA, "Abused Child#E18_2";
		npctalk "Child: Aah!", "Abused Child#E18_2", bc_self;
		cloakonnpcself( "Abused Child#E18_2" );
		cloakoffnpcself( "Abused Child#E18_4" );
		next;
		npctalk "Man: Hey! Can't you keep it down?", "Greedy Man#E18_1", bc_self;
		next;
		npctalk "Man: Kid, if you're wandering around here again and I catch you, you better be prepared.", "Greedy Man#E18_1", bc_self;
		next;
		setquest 5932;
		emotion ET_FRET, getnpcid(0,"Greedy Man#E18_1");
		npctalk "Man: Ah, luck just isn't on my side.", "Greedy Man#E18_1", bc_self;
		cloakonnpcself( "#Directing Warp" );
		cloakonnpcself( "Greedy Man#E18_1" );
		close;
	case 1:
		cloakonnpcself( "#Directing Warp" );
		cloakonnpcself( "Greedy Man#E18_1" );
		cloakoffnpcself( "Abused Child#E18_4" );
		end;
	case 2:
		end;
	}
}

rachel,180,80,4	script(CLOAKED)	Abused Child#E18_4	4_M_DST_CHILD,{
	if (checkweight(1000405,10) == 0) {
		mes "- You have too many items to proceed. -";
		close;
	}
	if (isbegin_quest(5932) == 1) {
		mes "[Kid]";
		mes "Ah.. unlucky, isn't it? Dealing with a mere native.";
		next;
		mes "[Kid]";
		mes "Ah.. I gave him some freedom with the money, but I didn't give him too much freedom, so it was quite satisfying. I thought it would last.";
		next;
		select( "Are you okay?" );
		mes "[Kid]";
		mes "Uncle What?";
		next;
		mes "[Kid]";
		mes "Mister You seem like an outsider, so spare me your shallow sympathy. This kind of treatment is common for natives.";
		next;
		mes "[Kid]";
		mes "Then Mister can continue on their way. It wasn't nice meeting you, and let's not meet again~";
		next;
		emotion ET_STARE_ABOUT;
		mes "[Kid]";
		mes "Ha... I knew I'd get caught.";
		next;
		emotion ET_KIK;
		mes "[Kid]";
		mes "Even the boss is stupid. What I stole wasn't the guest's wallet.";
		next;
		mes "[Kid]";
		mes "Oh! But then, who stole the guest's wallet? If I stole that too, I'd feel more fair.";
		next;
		mes "[Kid]";
		mes "Let's see... How much did I take?";
		next;
		emotion ET_MONEY;
		mes "[Kid]";
		mes "One. Two... Three, four, five, squid, spicy beef stew, seven, octopus, cross screwdriver.";
		next;
		mes "[Kid]";
		mes "Oh my, salty. It's salty.";
		next;
		emotion ET_THINK;
		sleep2 3000;
		emotion ET_SWEAT;
		mes "[Kid]";
		mes "Haha? Mister.. You're still here? Did you see me counting money? Planning to twist the boss's arm?";
		next;
		select( "How about returning it since you won't use it?" );
		mes "[Kid]";
		mes "Ha.. This Mister! You're still talking nice words, haven't you seen just now?";
		next;
		mes "[Kid]";
		mes "I haven't even received a proper salary for months of hard work?";
		next;
		mes "[Kid]";
		mes "Even if I can't, at least taking the boss's wallet will provide some comfort for the unpaid salary.";
		next;
		mes "[Kid]";
		mes "Oh, whatever! If you're gonna twist, just twist. Now, my father has recovered enough to move around on his own.";
		next;
		mes "[Kid]";
		mes "We were also slowly gathering business funds to start up.";
		next;
		select( "What kind of business? Nothing illegal, right?" );
		mes "[Kid]";
		mes "Hehe.. You, Mister! You're up to something big, Mister.";
		next;
		mes "[Kid]";
		mes "Are you trying to snatch other people's business ideas with your sharp tongue?";
		next;
		mes "[Kid]";
		mes "It's not easy for me to do it alone, and you don't seem like a bad adult, so I'll make an exception.";
		next;
		mes "[Kid]";
		mes "I'll give you a rough sketch of the spot I've set aside for my business. If you're really interested in my business, come find me.";
		next;
		completequest 5932;
		setquest 5933;
		mes "[Kid]";
		mes "Oh! And my name is Mejai. See you again.";
		close2;
		cloakonnpcself( "Abused Child#E18_4" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5932) == 1" );
	end;
}

// Quest: Picking Half Flowers. Step 2.
rachel,70,135,4	script(CLOAKED)	Mejai#E18_5	4_M_DST_CHILD,{
	if (checkweight(1000405,10) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (isbegin_quest(5933) == 1) {
		mes "[Mejai]";
		mes "Well, well, well. So this Mister is really here. The fact that you're here means you're interested in my business, right?";
		next;
		mes "[Mejai]";
		mes "Hm... What should I do..";
		next;
		mes "[Mejai]";
		mes "Ah, hiding things doesn't suit my nature, so I'll just be honest.";
		next;
		mes "[Mejai]";
		mes "There have been a few people who came to listen to my business plan, but as soon as they heard it, they all just left.";
		next;
		if (select( "What's going on?", "I'm not interested." ) == 2) {
			mes "[Mejai]";
			mes "Hmph!";
			mes "Uncle Why bother coming here and wasting time if you're not even interested?";
			close;
		}
		mes "[Mejai]";
		mes "Huh! Don't be surprised to hear this, I'll be selling flowers in this desert.";
		next;
		emotion ET_QUESTION, playerattached();
		sleep2 3000;
		emotion ET_THINK, playerattached();
		mes "[Mejai]";
		mes "Why? What? Look at this, look. This is why outsiders say it's not possible. Do you know how precious flowers are in the desert?";
		next;
		mes "[Mejai]";
		mes "MisterHave you seen a flower shop in Rachel?";
		next;
		emotion ET_OK, playerattached();
		mes "[Mejai]";
		mes "Well, of course you've seen it. There must be a flower shop in Rachel, right?";
		next;
		mes "[Mejai]";
		mes "If a shop that only sells arrangements, not living flowers, can be called a flower shop, that is.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "But where can you get flowers then?";
		next;
		mes "[Mejai]";
		mes "That's the problem, exactly. You're quite sharp, Mister. I like that.";
		next;
		mes "[Mejai]";
		mes "It's not impossible to get fresh flowers around here. It's rare, but there are ways to obtain them.";
		next;
		mes "[Mejai]";
		mes "Have you heard of Half Flowers? Outsiders probably aren't familiar with them. Have you asked the locals on Aldebaran?";
		next;
		mes "[Mejai]";
		mes "It's a beautiful and mysterious flower that only blooms in the Grey Wolf Forest. My dad said he picked one to propose to my mom.";
		next;
		mes "[Mejai]";
		mes "And ever since Mom passed away, Dad would only talk about the method of gathering Half Flowers when he drank.";
		next;
		mes "[Mejai]";
		mes "They say Half Flowers bloom under trees, near rocks, or beside grass.";
		next;
		mes "[Mejai]";
		mes "You have to consider the humidity around the flower and cut it at angles of 10, 20, and 30 degrees.";
		next;
		emotion ET_THINK;
		mes "[Mejai]";
		mes "Ah... I got a little excited. Whenever my dad talks about this, it stresses me out.";
		next;
		mes "[Mejai]";
		mes "Well, in the end, it became my business, so all his lectures about it turned out to be worthwhile..";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "So, what can I help you with?";
		next;
		mes "[Mejai]";
		mes "I believe that maintaining an ample supply of Half Flowers is crucial for the stable operation of the business I'm planning.";
		next;
		mes "[Mejai]";
		mes "So, I plan to contract with numerous adventurers. Of course, you, Mister, will be one of those adventurers, right?";
		next;
		mes "[Mejai]";
		mes "Uncle will be tasked with gathering Half Flowers in the Gray Wolf Forest.";
		next;
		mes "[Mejai]";
		mes "Of course, there are additional ventures I plan to pursue once this business stabilizes, but let's save that discussion for when the business is truly stable.";
		next;
		mes "[Mejai]";
		mes "What do you say, Mister? Will you work with me?";
		next;
		if (select( "Let's do it.", "It's a bit inconvenient right now." ) == 2) {
			completequest 5933;
			mes "[Mejai]";
			mes "Well, if it's inconvenient, there's nothing we can do.";
			next;
			mes "[Mejai]";
			mes "In life, there may come a day when we can work together again, right? If you ever reconsider, let's give working together a try.";
			close;
		}
		mes "[Mejai]";
		mes "Okay. I think mutual respect between the boss and employees is important. You can guess why I say this.";
		next;
		mes "[Mejai]";
		mes "Now that we are working together, please call me President Mejai from now on. I will respect you as well as the staff.";
		next;
		mes "[Mejai]";
		mes "I'm not going to treat you badly. I'm tired of that kind of thing...";
		next;
		mes "[Mejai]";
		mes "First of all, I would like to educate you on the most important task, how to gather Half Flowers.";
		next;
		erasequest 5933;
		setquest 5934;
		mes "[Mejai]";
		mes "Talk to me when you're ready.";
		close;
	}
	if (isbegin_quest(5933) == 2) {
		mes "[Mejai]";
		mes "Back again? I'm quite busy preparing for the business, so please refrain from bothering me unless you have something important?";
		next;
		if (select( "Sorry, maybe later.", "Can I participate in the business?" ) == 1) {
			mes "[Mejai]";
			mes "Be cautious. I have a lot on my mind, so I can be sharp.";
			close;
		}
		mes "[Mejai]";
		mes "Really? Hm!";
		mes "Understood. I believe mutual respect between the employer and employees is crucial. You might guess why I'm saying this.";
		next;
		mes "[Mejai]";
		mes "Now that we're working together, please address me as Manager Mejai from now on. I'll also ensure to respect you as a member of the team rather than just Mister.";
		next;
		mes "[Mejai]";
		mes "You won't find me acting recklessly. I've grown tired of such behavior...";
		next;
		mes "[Mejai]";
		mes "First and foremost, it would be wise to educate on the most crucial task, which is the method of harvesting Half Flowers.";
		next;
		erasequest 5933;
		setquest 5934;
		mes "[Mejai]";
		mes "Talk to me when you're ready.";
		close;
	}
	if (isbegin_quest(5934) == 1) {
		mes "[Mejai]";
		mes "Are you ready to begin the Half Flower harvesting education?";
		next;
		if (select( "Manager, please proceed.", "Just a moment." ) == 2) {
			mes "[Mejai]";
			mes "Take your time.";
			close;
		}
		mes "[Mejai]";
		mes "Hmm, welcome to the Half Flower harvesting education.";
		next;
		mes "[Mejai]";
		mes "The harvesting process is divided into four main steps. First, you'll cut the stems.";
		next;
		mes "[Mejai]";
		mes "Second, you'll remove the leaves from the cut stems.";
		next;
		mes "[Mejai]";
		mes "Third, you'll dip the stem ends into a small container filled with water and secret powder, mixing them well.";
		next;
		mes "[Mejai]";
		mes "Lastly, you'll package the stem ends carefully in a small container to prevent the flowers from wilting.";
		next;
		mes "[Mejai]";
		mes "Looking at it simply in terms of the method, it shouldn't be too difficult, right?";
		next;
		mes "[Mejai]";
		mes "In the advanced stages, however, the angle at which the stems are cut, the number of leaves removed depending on the location where the Half Flowers are blooming, and the amount of water and secret powder in the container may vary...";
		next;
		mes "[Mejai]";
		mes "Don't worry. I'll make sure to provide detailed instructions when you take on the task, so you won't forget anything.";
		next;
		mes "[Mejai]";
		mes "Can you see the practice Half Flower next to you?";
		next;
		mes "[Mejai]";
		mes "I think I invested half of my money into making this practice Half Flower when I started my business.";
		next;
		mes "[Mejai]";
		mes "Well, I don't regret it since it made it easier to train employees. Shall we practice as if it were the real thing?";
		next;
		erasequest 5934;
		setquest 5935;
		mes "[Mejai]";
		mes "What do you think? Shall we assume that the Half Flowers are blooming under the trees and practice with the practice Half Flower next to me?";
		close;
	}
	if (isbegin_quest(5935) == 1) {
		mes "[Mejai]";
		mes "Please pay attention to the practice Half Flower next to me.";
		close2;
		cloakoffnpcself( "Half Flower#E18_6" );
		end;
	}
	if (isbegin_quest(5936) == 1) {
		// if (rentalcountitem(1000407) < 1)
		mes "[Mejai]";
		mes "Well done. The future Half Flower collection will proceed in the same manner as just now.";
		next;
		mes "[Mejai]";
		mes "It will be your task to deliver the collected flowers to me.";
		next;
		mes "[Mejai]";
		mes "As you, as a staff member, are engaged in various other tasks simultaneously...";
		next;
		mes "[Mejai]";
		mes "I would appreciate it if you could bring them to me before the Half Flowers wilt while you are working.";
		next;
		mes "[Mejai]";
		mes "Oh! One tip I should mention is that the longer you collect the flowers using the method I provided, the longer they will last.";
		next;
		select( "When shall we start our work?" );
		mes "[Mejai]";
		mes "Today, I'm also busy preparing for the shop opening, so how about starting from tomorrow?";
		next;
		select( "Sure. See you tomorrow." );
		mes "[Mejai]";
		mes "Oh dear, I need to give you this.";
		next;
		mes "[Mejai]";
		mes "I've done my fair share of work, but during the training period, I can't just let you off the hook for this and that.";
		next;
		if (rentalcountitem(1000407) > 0)
			delitem 1000407,1;	// Ep18_Half_Flower
		completequest 5936;
		setquest 5937;
		getitem 1000405,10;	// Ep18_Amethyst_Fragment
		getexp 7769124,3000000;	// dummy value
		mes "[Mejai]";
		mes "What I'm giving you now is a reward for today's training. Rest well and see you tomorrow.";
		close;
	}
	mes "[Mejai]";
	mes "Rest well, and I'll see you tomorrow.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5933) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5934) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5936) == 1" );
	end;
}

// Quest: Picking Half Flowers. Step 3 (final).
rachel,72,133,4	script(CLOAKED)	Half Flower#E18_6	4_EP18_HALFFLOWER,{
	if (checkweight(1000407,1) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (isbegin_quest(5935) == 1) {
		setarray .@good_answer[0],2,2,2,3;
		.@time = 86400;
		mes "This is a practice Half Flower.";
		next;
		npctalk "Mejai: Let's assume that Half Flowers are blooming under the trees and start practicing.", "Mejai#E18_5", bc_self;
		next;
		npctalk "Mejai: Shall we start by cutting the stems of the Half Flowers?", "Mejai#E18_5", bc_self;
		next;
		if (select( "Cut at 10 angle.", "Cut at 20 angle.", "Cut at 30 angle.", "Cut at 40 angle." ) != .@good_answer[0])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "Mejai: Thank you for your decision. Let's start by cutting the stem first.", "Mejai#E18_5", bc_self;
		next;
		npctalk "Mejai: Understood. Next, I'll remove the leaves. I'll leave just enough and remove the rest.", "Mejai#E18_5", bc_self;
		next;
		if (select( "Leave 2 leaves.", "Leave 4 leaves.", "Leave 6 leaves.", "Leave 8 leaves." ) != .@good_answer[1])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "Mejai: Well done. Next, we'll prepare a jar to soak the stem end.", "Mejai#E18_5", bc_self;
		next;
		npctalk "Mejai: First, please fill the small jar with water.", "Mejai#E18_5", bc_self;
		next;
		if (select( "Pour 20 ml.", "Pour 30 ml.", "Pour 40 ml.", "Pour 50 ml." ) != .@good_answer[2])
			.@time /= 2;
		progressbar "FFFF00",1;
		npctalk "Mejai: I'll now add the secret powder I made to the water and mix it.", "Mejai#E18_5", bc_self;
		next;
		npctalk "Mejai: Please mix it in the right amount.", "Mejai#E18_5", bc_self;
		next;
		if (select( "Add 2 grams.", "Add 4 grams.", "Add 6 grams.", "Add 8 grams." ) != .@good_answer[3])
			.@time /= 2;
		npctalk "Mejai: Now, for the final step.", "Mejai#E18_5", bc_self;
		next;
		npctalk "Mejai: Now, just put the cut stem ends into the container with the water and secret powder we just mixed, and we're done with the packaging!", "Mejai#E18_5", bc_self;
		next;
		progressbar "FFFF00",1;
		// note: the timer decreases according to the answer but no idea of the ratio
		rentitem 1000407,.@time;	// Ep18_Half_Flower
		erasequest 5935;
		setquest 5936;
		cloakonnpcself( "Half Flower#E18_6" );
		npctalk "Mejai: Completed! Would you bring me the half flower you just harvested?", "Mejai#E18_5", bc_self;
		close;
	}
	end;

OnInit:
	setunittitle( getnpcid(0), "For Practice" );

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5935) == 1" );
	end;
}

// daily quest
rachel,70,135,4	script(CLOAKED)	Mejai#E18_7	4_M_DST_CHILD,{
	if (checkweight(1000405,3) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (isbegin_quest(5933) == 1) {
		if (checkquest(5937,PLAYTIME) == 2)
			erasequest 5937;
		npctalk "Mejai: Oh, you're here? Shall we start today energetically as well?", "Mejai#E18_7", bc_self;
		mes "[Mejai]";
		mes "Welcome. We were just about to hold a modest opening ceremony for the 'Flower Room'.";
		next;
		mes "[Mejai]";
		mes "Hm...";
		next;
		mes "[Mejai]";
		mes "Although not everyone could attend this gathering, I am truly grateful to those who could join us and illuminate this occasion.";
		next;
		mes "[Mejai]";
		mes "I must succeed here.";
		next;
		mes "[Mejai]";
		mes "I know it's not ideal, but this business was started with every last penny I could gather.";
		next;
		mes "[Mejai]";
		mes "There's no safety net. So, I'll do my best, and I hope you, my employees, will do the same.";
		next;
		mes "[Mejai]";
		mes "I'll strive to be a boss who repays your best efforts with my own.";
		next;
		setquest 5942;
		completequest 5942;
		mes "[Mejai]";
		mes "Grand opening over! Shall we now put our hearts into our work?";
		next;
	}
	setpcblock PCBLOCK_NPC, true;
	if (checkquest(5937,PLAYTIME) != 2)
		npctalk "Mejai: Hello. Let's do our best today too.", "Mejai#E18_7", bc_self;
	else {
		npctalk "Mejai: Come on! Today's work is done.", "Mejai#E18_7", bc_self;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		npctalk "Mejai: Go home and be faithful to your family. It's not like this is the only thing you have to do.", "Mejai#E18_7", bc_self;
		end;
	}
	sleep2 1000;
	setpcblock PCBLOCK_NPC, false;
	switch( select( "I'm currently busy..", "Harvesting Half Flowers", "Delivering Half Flowers" ) ) {
	case 1:
		npctalk "Mejai: It seems you're busy with something? Please come see me when you're free.", "Mejai#E18_7", bc_self;
		end;
	case 2:
		for ( .@id = 5938; .@id < 5942; .@id++ ) {
			if (isbegin_quest(.@id) == 1) {
				.@quest_id = .@id;
				break;
			}
		}
		if (.@quest_id == 0)
			.@quest_id = rand(5938,5941);

		switch( isbegin_quest(.@quest_id) ) {
		case 0:
			npctalk "Mejai: Are you planning to collect half flowers?", "Mejai#E18_7", bc_self;
			if (select( "I'll go collect them.", "I'll skip today." ) == 2)
				end;
			switch( checkquest(5937,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				npctalk "Mejai: Oh! Are you sure?", "Mejai#E18_7", bc_self;
				setpcblock PCBLOCK_NPC, true;
				sleep2 1000;
				setpcblock PCBLOCK_NPC, false;
				npctalk "Mejai: Since today hasn't ended yet, if you happen to finish your tasks early today, please consider helping out at the Flower Room as well.", "Mejai#E18_7", bc_self;
				end;
			case 2:
				break;
			}
			setquest .@quest_id;
			npctalk "Mejai: Please be careful of the half flowers blooming near the trees today.", "Mejai#E18_7", bc_self;
			setpcblock PCBLOCK_NPC, true;
			sleep2 1000;
			setpcblock PCBLOCK_NPC, false;
			npctalk "Mejai: Alright! Fighting! Bring back some fresh half flowers with vigor today.", "Mejai#E18_7", bc_self;
			end;
		case 1:
			if (rentalcountitem(1000407) < 1) {
				npctalk "Mejai: Please continue your hard work for the fresh Half Flowers today.", "Mejai#E18_7", bc_self;
				end;
			}
			delitem 1000407,1;	// Eps18_Half_Flower
			erasequest .@quest_id;
			if (checkquest(5937,PLAYTIME) == 2)
				erasequest 5937;
			setquest 5937;
			getitem 1000405,3;	// Ep18_Amethyst_Fragment
			getexp 18252408,2000000;
			npctalk "Mejai: You've worked hard today as well. Please leave the rest to me.", "Mejai#E18_7", bc_self;
			end;
		case 2:
			end;	// impossible
		}
		end;
	case 3:
		npctalk "Mejai: It's a service that I'm still contemplating. Perhaps we could initiate it once the business stabilizes a bit?", "Mejai#E18_7", bc_self;
		setpcblock PCBLOCK_NPC, true;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		npctalk "Mejai: When that time comes, I'll rely on your assistance.", "Mejai#E18_7", bc_self;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(5936) == 2 && isbegin_quest(5938) == 0 && isbegin_quest(5939) == 0 && isbegin_quest(5940) == 0 && isbegin_quest(5941) == 0 && checkquest(5937,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(5936) == 2 && rentalcountitem(1000407) > 0" );
	end;
}

gw_fild01,325,376,1	script	Half Flower#EP18_R01	4_EP18_HALFFLOWER,7,7,{
	if (checkweight(1000407,1) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	for ( .@id = 5938; .@id < 5942; .@id++ ) {
		if (isbegin_quest(.@id) == 1) {
			.@quest_id = .@id;
			break;
		}
	}
	if (.@quest_id == 0) {
		unittalk getcharid(3), "Half flower is blooming", bc_self;
		end;
	}
	// player interacts with the npc according to the quest ID
	// 5938 requires EP18_R (flower near a Rock)
	// 5939 requires EP18_L (?)
	// 5940 requires EP18_T (Tree)
	// 5941 requires EP18_W (Water)
	switch( .@quest_id ) {
	case 5938:
		.@string$ = "EP18_R";
		setarray .@good_answer[0],4,1,4,1;
		break;
	case 5939:
		.@string$ = "EP18_L";
		setarray .@good_answer[0],3,2,3,2;
		break;
	case 5940:
		.@string$ = "EP18_T";
		setarray .@good_answer[0],2,2,2,3;
		break;
	case 5941:
		.@string$ = "EP18_W";
		setarray .@good_answer[0],1,4,1,4;
		break;
	}
	if (compare(strnpcinfo(2), .@string$) == false) {
		cloakonnpc strnpcinfo(0), getcharid(0);
		end;
	}
	if (rentalcountitem(1000407) > 0) {
		mes "- the Half Flower is more";
		mes "- not necessary, before wither";
		mes "- Bring it to Mejai.";
		close;
	}
	.@time = 86400;
	mes "- The Half Flower is in bloom. Let's";
	mes "- gather the required materials from the";
	mes "- harvesting tool provided by Mejai.";
	next;
	unittalk getcharid(3), "" + strcharinfo(0) + " : What angle should I cut the stem?", bc_self;
	next;
	if (select("Cut at 10 angle", "Cut at 20 angle", "Cut at 30 angle", "Cut at 40 angle" ) != .@good_answer[0])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How many leaves should I leave?", bc_self;
	next;
	if (select("Leave 2 leaves", "Leave 4 leaves", "Leave 6 leaves", "Leave 8 leaves" ) != .@good_answer[1])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How many milliliters of water should I put in the small bottle?", bc_self;
	next;
	if (select("Put in 20 ml", "Put in 30 ml", "Put in 40 ml", "Put in 50 ml" ) != .@good_answer[2])
		.@time /= 2;
	progressbar "FFFF00",1;
	unittalk getcharid(3), "" + strcharinfo(0) + " : How many grams of secret powder should I put in?", bc_self;
	next;
	if (select( "Put in 2 grams.", "Put in 4 grams.", "Put in 6 grams.", "Put in 8 grams." ) != .@good_answer[3])
		.@time /= 2;
	progressbar "FFFF00",1;
	cloakonnpcself();
	// note: the timer decreases according to the answer but no idea of the ratio
	rentitem 1000407, .@time;	// Ep18_Half_Flower
	mes "- You have harvested the Half Flower.";
	mes "- Let's deliver it to Mejai before it withers.";
	close;

OnTouch:
	for ( .@id = 5938; .@id < 5942; .@id++ ) {
		if (isbegin_quest(.@id) == 1) {
			.@quest_id = .@id;
			break;
		}
	}
	if (.@quest_id == 0)
		end;
	setarray .@string$[5938], "EP18_R", "EP18_L", "EP18_T", "EP18_W";
	if (compare(strnpcinfo(2), .@string$[.@quest_id]) == false) {
		cloakonnpc strnpcinfo(0), getcharid(0);
		end;
	}
	end;
}
gw_fild01,280,106,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R02	4_EP18_HALFFLOWER,7,7
gw_fild01,382,271,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R03	4_EP18_HALFFLOWER,7,7
gw_fild02,291,248,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R04	4_EP18_HALFFLOWER,7,7
gw_fild02,119,93,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R05	4_EP18_HALFFLOWER,7,7
gw_fild02,287,321,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_R06	4_EP18_HALFFLOWER,7,7

gw_fild01,297,310,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L01	4_EP18_HALFFLOWER,7,7
gw_fild01,219,211,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L02	4_EP18_HALFFLOWER,7,7
gw_fild01,316,150,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L03	4_EP18_HALFFLOWER,7,7
gw_fild02,104,338,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L04	4_EP18_HALFFLOWER,7,7
gw_fild02,207,101,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L05	4_EP18_HALFFLOWER,7,7
gw_fild02,268,262,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L06	4_EP18_HALFFLOWER,7,7
gw_fild02,144,94,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L07	4_EP18_HALFFLOWER,7,7
wolfvill,212,86,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L08	4_EP18_HALFFLOWER,7,7
wolfvill,143,43,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L09	4_EP18_HALFFLOWER,7,7
wolfvill,58,113,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_L10	4_EP18_HALFFLOWER,7,7

gw_fild01,157,92,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T01	4_EP18_HALFFLOWER,7,7
gw_fild01,189,183,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T02	4_EP18_HALFFLOWER,7,7
gw_fild01,202,358,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T03	4_EP18_HALFFLOWER,7,7
gw_fild01,279,64,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T04	4_EP18_HALFFLOWER,7,7
gw_fild01,159,206,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T05	4_EP18_HALFFLOWER,7,7
gw_fild02,125,367,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T06	4_EP18_HALFFLOWER,7,7
gw_fild02,114,355,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T07	4_EP18_HALFFLOWER,7,7
gw_fild02,248,288,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T08	4_EP18_HALFFLOWER,7,7
wolfvill,258,226,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T09	4_EP18_HALFFLOWER,7,7
wolfvill,130,203,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_T10	4_EP18_HALFFLOWER,7,7

gw_fild01,48,83,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W01	4_EP18_HALFFLOWER,7,7
wolfvill,88,57,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W02	4_EP18_HALFFLOWER,7,7
wolfvill,65,95,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W03	4_EP18_HALFFLOWER,7,7
wolfvill,78,222,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W04	4_EP18_HALFFLOWER,7,7
wolfvill,193,238,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W05	4_EP18_HALFFLOWER,7,7
wolfvill,208,245,1	duplicate(Half Flower#EP18_R01)	Half Flower#EP18_W06	4_EP18_HALFFLOWER,7,7
//-------------------------------------------------------------------


//-------------------------------------------------------------------
// Others daily
gw_fild01,32,101,3	script	Camper#to_wolfvill	4_M_SITDOWN,{
	if (ep18_main < 35) {
		mes "[Camper]";
		mes "I couldn't find a job, and I kept failing my exams, so I left home in a fit of rage...";
		mes "Then I stumbled upon a place like this.";
		mes "I'm planning to stay here for a little while.";
		npctalk "I wanted to try camping~", "", bc_self;
		next;
		mes "[Camper]";
		mes "Aren't you scared?";
		mes "The old timers who asked me when I was going to get a job and everytime I meet them are way scarier.";
		mes "...";
		close;
	}
	if (checkweight(1000405,4) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	if (checkquest(18086,HUNTING) == 2) {
		mes "[Gatekeeper]";
		mes "Oh, I heard you said it was peaceful, so you did my favor.";
		mes "Thank you.";
		mes "Come on, I'll give you what I have.";
		erasequest 18086;
		setquest 18087;
		add_reputation_points(REPUTATION_EP18, 30);
		if (get_reputation_points(REPUTATION_EP18) >= 5000)
			.@bonus = 1;
		if (get_reputation_points(REPUTATION_EP18) >= 1000 && ep18_main == 36) {// Custom implementation: reputation 1000 on wolfvill => player can continue the main quest
			ep18_main = 37;
			setquest 18082;
			mes "^4d4dff The villagers of the gray wolf have accepted you as part of the village.^000000";
			mes "You are eligible to participate in the ^4d4dff conference.^000000";
		}
		getitem 1000405,3+.@bonus;	// Ep18_Amethyst_Fragment
		getexp 9956480,2000000;
		next;
	}
	mes "[Gatekeeper]";
	mes "Are you going to the village?";
	next;
	switch( select( "To the Grey Wolf Village", "Don't go.", "Who are you?", "Make Grey Wolf Forest safer" ) ) {
	case 1:
		mes "[Gatekeeper]";
		mes "Alright. You need to go through the gap between those trees.";
		mes "Follow me.";
		close2;
		warp "wolfvill",270,26;
		end;
	case 2:
		mes "[Gatekeeper]";
		mes "Okay then. How about hunting some monsters nearby?";
		mes "They were too noisy when I was trying to sleep.";
		close;
	case 3:
		mes "[Gatekeeper]";
		mes "As you can see, I'm the gate keeper.";
		mes "I also drive away any unwanted visitors.";
		mes "Usually, I disguise myself as a vagabond, but I'm not actually one.";
		mes "Don't you dare think of me as one!";
		close;
	case 4:
		if (ep18_main == 35) {
			mes "[Gatekeeper]";
			mes "No, no. I wouldn't ask for a favor right after meeting you.";
			mes "The forest may be a bit dangerous, but it's alright.";
			close;
		}
		switch( checkquest(18087,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Gatekeeper]";
			mes "Um... it'll be fine for a while.";
			mes "It's been a threat to some extent, so if they think about it, they won't attack.";
			close;
		case 2:
			erasequest 18087;
			break;
		}
		switch( checkquest(18086,HUNTING) ) {
		case -1:
			mes "[Gatekeeper]";
			mes "As you can see, I'm guarding the entrance here.";
			mes "Sometimes monsters come all the way here and bother me even though I'm tired.";
			next;
			mes "[Gatekeeper]";
			mes "Would you clear about thirty monsters in the nearby forest regardless of the type?";
			mes "I have some beautiful amethyst fragments I found lying around. I'll give them to you.";
			next;
			if (select( "Accept the request", "Refuse" ) == 2) {
				mes "[Gatekeeper]";
				mes "I see... You're someone who doesn't care about the safety of a poor gatekeeper's life...";
				mes "Got it. I'll sincerely remember this deep in my heart.";
				close;
			}
			mes "[Gatekeeper]";
			mes "Thank you!";
			mes "Now I can relax and unwind a bit!";
			mes "I'll leave it to you then.";
			setquest 18086;
			close;
		case 0:
		case 1:
			mes "[Gatekeeper]";
			mes "Anything's fine. Just hunt some monsters nearby.";
			mes "That way, I can stand guard more safely too, right?";
			close;
		case 2:
			end;
		}
	}
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "ep18_main == 35" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ep18_main > 35 && checkquest(18086,HUNTING) == -1 && (checkquest(18087,PLAYTIME) == -1 || checkquest(18087,PLAYTIME) == 2)" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(18086,HUNTING) == 2" );
	end;
}
//-------------------------------------------------------------------



//--- Others NPCs
//============================================================
oz_dun01,284,164,3	script	Rope#to_ra_fild10	4_ROPEPILE,{
	if (ep18_main < 31)
		end;
	mes "Looks like you can climb using a rope.";
	next;
	if (select( "Use the rope to ascend.", "Don't use." ) == 2) {
		emotion ET_THINK, playerattached();
		end;
	}
	warp "ra_fild10",173,176;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(11720) == 2" );
	end;
}

oz_dun01,28,190,3	script	Rope#to_gw_fild01	4_ROPEPILE,{
	if (ep18_main < 31)
		end;
	mes "Looks like you can climb using a rope.";
	next;
	if (select( "Use the rope to ascend.", "Don't use." ) == 2) {
		emotion ET_THINK, playerattached();
		end;
	}
	warp "gw_fild01",275,337;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(11720) == 2" );
	end;
}


gw_fild01,279,335,3	script	Rope#to_oz_dun01	4_ROPEPILE,{
	if (ep18_main < 31)
		end;
	mes "It seems there's a cave beneath the gap in the rock,";
	mes "and looks like you can slip through using a rope.";
	next;
	if (select( "Use the rope to descend.", "Don't use." ) == 2) {
		emotion ET_THINK, playerattached();
		end;
	}
	warp "oz_dun01",27,188;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(11720) > 0" );
	end;
}

ra_fild10,175,179,3	script	Rope#to_oz_dun01_	4_ROPEPILE,{
	if (ep18_main < 31)
		end;
	mes "It seems there's a cave beneath the gap in the rock,";
	mes "and looks like you can slip through using a rope.";
	next;
	if (select( "Use the rope to descend.", "Don't use." ) == 2) {
		emotion ET_THINK, playerattached();
		end;
	}
	warp "oz_dun01",284,167;
	end;

OnInit:
	questinfo( QTYPE_CLICKME, QMARK_YELLOW, "isbegin_quest(11720) > 0" );
	end;
}



//-------------------------------------------------------------------
// Other NPCs
//-------------------------------------------------------------------

gw_fild01,396,269,3	script	Old milestone#ep18	2_BOARD2,{
	mes "Only traces of a broken bridge over the cliff are visible.";
	mes "This path is not currently in use.";
	close;
}

wolfvill,90,261,6	script	Syeil#E18_D7	4_F_RUSWOMAN1,{
	mes "[Syeil]";
	mes "I was frustrated and came to this deserted place, and yet, there's still someone here.";
	close;
}

wolfvill,269,68,4	script	Seil#E18_D8	4_F_RUSWOMAN2,{
	mes "[Seil]";
	mes "Oh-ho! Welcome to the Grey Wolf Village.";
	close;
}

wolfvill,167,253,1	duplicate(dummy_npc)	Building materials#hms01	4_WOODBOX
wolfvill,166,252,1	duplicate(dummy_npc)	Building materials#hms02	4_WOODBOX
wolfvill,165,254,1	duplicate(dummy_npc)	Building materials#hms03	4_ROPEPILE
wolfvill,165,250,1	duplicate(dummy_npc)	Building materials#hms04	4_WOODPILE
wolfvill,164,251,1	duplicate(dummy_npc)	Building materials#hms05	4_BRICKPILE

wolfvill,154,217,3	script	Sarana#cmm01	4_EP18_GW_WOMAN01,{
	mes "[Sarana]";
	mes "We usually plant corn or soybeans here.";
	mes "You can plant them anywhere and they'll thrive, just make sure you fertilize them well.";
	next;
	mes "[Sarana]";
	mes "Potatoes grow consistently well, but other than that...";
	mes "Ha... I want to eat something made with wheat flour.";
	close;
}

wolfvill,146,131,1	duplicate(dummy_npc)	Village child#cmm01	4_EP18_GW_CHILD02

wolfvill,192,146,3	script	Oha#cmm01	4_EP18_GW_MIDDLE01,{
	mes "[Oha]";
	mes "Does this make 35 servings? I'm always boiling it, but I can't get the right amount.";
	close;
}

wolfvill,123,162,7	script	Zen#cmm01	4_EP18_GW_OLD02,{
	mes "[Zen]";
	mes "Just keep it safe so that the primordial fire does not devour this village and forest...";
	close;
}

wolfvill,38,243,5	duplicate(dummy_npc)	#con_admin	CLEAR_NPC

wolfvill,188,140,7	script	Cassoulet#villager	4_EP18_GW_CHILD01,{
	mes "[Cassoulet]";
	mes "Hiya... What a delicious smell.";
	mes "I'll wait here until everything is cooked.";
	next;
	mes "[Cassoulet]";
	mes "Hiya... What a delicious smell.";
	mes "I'll wait here until everything is cooked.";
	close;
}

wolfvill,202,130,7	script	Hiyares#villager	4_EP18_GW_WOMAN02,{
	mes "[Hiyares]";
	mes "This is a precious fermentation container. Please don't touch it yet, as it's still fermenting.";
	next;
	mes "[Hiyares]";
	mes "It's a fermented food made with a starter culture passed down since my great-great-grandfather's time.";
	mes "Honestly, I'm not a big fan because it has a strong smell.";
	close;
}

wolfvill,224,230,3	script	Director#villager	4_EP18_GW_CHILD02,{
	mes "[Director]";
	mes "You can't go into the water? Why?";
	next;
	mes "[Director]";
	mes "You look so warm and comfortable... I want to play in the water.";
	mes "If you're playing with the wind, you'll soon be full of ash.";
	close;
}


gw_fild01,147,137,2	script	Boksil#wms04	EP18_GREY_WOLF_BABY,{
	end;
OnMove:
	while(1) {
		switch( .move ) {
		case 0:
			.val = !.val;
			setarray .@a[0],147,137;
			setarray .@b[0],147,138;
			break;
		case 1:
			setarray .@a[0],148,127;
			setarray .@b[0],147,127;
			break;
		case 2:
			setarray .@a[0],159,115;
			setarray .@b[0],160,115;
			break;
		case 3:
			setarray .@a[0],159,104;
			setarray .@b[0],160,104;
			break;
		case 4:
			setarray .@a[0],159,93;
			setarray .@b[0],160,93;
			break;
		case 5:
			setarray .@a[0],160,82;
			setarray .@b[0],161,82;
			break;
		case 6:
			.val = !.val;
			setarray .@a[0],161,71;
			setarray .@b[0],162,71;
			break;
		}
		.move = .move + .sens[.val];
		unitstopwalk getnpcid(0),USW_FORCE_STOP;
		unitstopwalk getnpcid(0,"Goat#wms03"),USW_FORCE_STOP;
		unitwalk getnpcid(0),.@a[0],.@a[1];
		unitwalk getnpcid(0,"Goat#wms03"),.@b[0],.@b[1];
		sleep 6000;
	}
	end;
OnInit:
	npcspeed 300;
	setarray .sens[0],1,-1;
	.move = 1;
	donpcevent strnpcinfo(0) + "::OnMove";
	end;
}

gw_fild01,147,138,15	script	Goat#wms03	EP18_GREY_GOAT,{
	end;
OnInit:
	npcspeed 300;
	end;
}


//-------------------------------------------------------------------
// Dummy NPCs (need to check the dialog)
//-------------------------------------------------------------------
// rachel,67,134,8	duplicate(dummy_cloaked_npc)	Guest#E18_8	4_M_OLDSCHOLAR
// rachel,114,66,2	duplicate(dummy_npc)	Flower Lady#E18_9	4_F_GODEMOM
// rachel,55,106,6	duplicate(dummy_npc)	Telling#E18_D6	4_F_07	// an old npc already exists at this location

rachel,135,208,6	duplicate(dummy_npc)	Physics#E18_D1	4_F_MASK
rachel,163,196,4	duplicate(dummy_npc)	Molly#E18_D2	4_F_MASK1
rachel,31,89,6	duplicate(dummy_npc)	Tiling#E18_D5	4_F_02


//-------------------------------------------------------------------
// Merchants NPCs
//-------------------------------------------------------------------

// Storage and unlock reputation feature
wolfvill,167,135,3	script	Asad#asad	4_EP18_GW_MAN01,{
	if (checkweight(1201,1) == 0) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you loose some weight. -";
		close;
	}
	.@reputation = get_reputation_points(REPUTATION_EP18);
	if (.@reputation < 1000) {
		mes "[Asad]";
		mes "Sir, it's been a while since I've seen you.";
		mes "Once you get somewhat familiar with the village, come find me.";
		mes "I'll offer you some conveniences.";
		next;
		mes "[Asad]";
		mes "But that's only if you're ^4d4dffgoing to participate in the tournament^000000.";
		mes "I don't just do favors for anyone.";
		next;
		mes "[Asad]";
		mes "If you look closely, there will be places where a helping hand is needed.";
		mes "By lending a hand, you'll earn some goodwill among the people, I reckon.";
		mes "Give it your best shot.";
		close;
	}

	if (.@reputation >= 3000) {
		mes "[Asad]";
		mes "Welcome, my wolf-like " + strcharinfo(0) + ".";
		mes "What do you need?";
		mes "Oh, I've been looking for a better smelting box.";
		mes "Would you like to exchange it for amethyst?";
	}
	else {
		mes "[Asad]";
		mes "Welcome, Sir.";
		mes "Would you like to tidy up some things?";
		mes "Or would you like to browse through some items I have for sale?";
	}
	next;
	.@amethyst_name$ = getitemname(1000405);
	if (.@reputation >= 4000)
		.@menu$[2] = "Exchange Smelting Box for " + .@amethyst_name$;
	else if (.@reputation >= 3000)
		.@menu$[1] = "Exchange Smelting Box for " + .@amethyst_name$;
	if (.@reputation >= 2000)
		.@menu$[0] = "Request space movement.";
	switch( select( "Use the Storage.", "Use the store.", .@menu$[0], .@menu$[1], .@menu$[2] ) ) {
	case 1:
		mes "[Asad]";
		mes "The Storage fee is 200z.";
		mes "Which Storage would you like to open?";
		next;
		select( "Storage 1" );
		if (Zeny < 200)
			end;
		Zeny -= 200;
		mes "[Asad]";
		mes "Alright, I'll open the Storage.";
		mes "Use it well.";
		close2;
		openstorage();
		end;
	case 2:
		mes "[Asad]";
		mes "Are you going to sell items?";
		mes "Are you going to buy what you need?";
		next;
		switch( select( "Buy items.", "Sell items." ) ) {
		case 1:
			mes "[Asad]";
			mes "I'm not sure if I have everything you need.";
			mes "But whatever it is, you can count on me.";
			close2;
			callshop "Tool Dealer#wolf",1;
			end;
		case 2:
			mes "[Asad]";
			mes "Alright. I'll sell you anything at a reasonable price.";
			close2;
			callshop "Tool Dealer#wolf",2;
			end;
		}
		end;
	case 3:
		mes "[Asad]";
		mes "Do you want to teleport to Rachel for 1 " + .@amethyst_name$ + " ?";
		next;
		if (select( "No", "Yes" ) == 1)
			end;
		if (countitem(1000405) < 1) {
			mes "[Asad]";
			mes "You don't have enough material.";
			close;
		}
		delitem 1000405,1;	// Ep18_Amethyst_Fragment
		warp "rachel",115,125;
		end;
	case 4:
		mes "[Asad]";
		mes "Amethyst shop?";
		mes "You can exchange them for a smelting box..";
		close2;
		callshop "barter_ep18_2",1;
		end;
	case 5:
		mes "[Asad]";
		mes "Amethyst shop?";
		mes "You can exchange them for a smelting box..";
		close2;
		callshop "barter_ep18_3",1;
		end;
	}
	end;
}

// (custom tool dealer)
-	shop	Tool Dealer#wolf	-1,611:-1,1750:-1,501:-1,502:-1,503:-1,504:-1,506:-1,645:-1,656:-1,601:-1,602:-1,1065:-1,2239:-1

// Greywolf enchant
wolfvill,164,137,3	script	Emmet#emet	4_EP18_GW_WOMAN01,{
	if (ep18_main < 38) {
		mes "[Emmet]";
		mes "Hello there!";
		mes "I see you've recently received some <ITEM>[Amethyst Fragment]<INFO>1000405</INFO></ITEM> in the village, right?";
		mes "I've noticed that people often exchange them, considering them symbols of luck or something.";
		next;
		mes "[Emmet]";
		mes "We're collecting crystals.";
		mes "Would you mind giving them to me later if you happen to gather a large amount?";
		next;
		mes "[Emmet]";
		mes "Of course, I won't just take the crystal pieces for nothing.";
		mes "I'll exchange them for equipment or other items that adventurers like yourself might need.";
		next;
		mes "[Emmet]";
		mes "When you gather a large amount, please come to me.";
		mes "You understand, right?";
		close;
	}
	disable_items;
	mes "[Emmet]";
	mes "Hello.";
	mes "Do you happen to have <ITEM>[Amethyst Fragment]<INFO>1000405</INFO></ITEM>?";
	mes "We are collecting crystals.";
	next;
	mes "[Emmet]";
	mes "We offer carefully crafted ^4d4dffarmor and enchantments^000000 in exchange for crystals.";
	mes "What would you like to do?";
	next;
	switch( select( "Exchange Armor", "Gray Wolf Enchantment" ) ) {
	case 1:
		mes "[Emmet]";
		mes "As promised, you've brought many Amethyst Fragment?";
		mes "Take your time and have a look around.";
		close2;
		callshop "barter_ep18_1",1;
		end;
	case 2:
		mes "[Emmet]";
		mes "Do you have enough equipment and materials for enchanting?";
		mes "I mean, the Amethyst Fragment.";
		mes "Please select the part you want to enchant.";
		next;
		switch( select( "Armor", "Coat", "Shoes", "Right(R) Accessory", "Left(L) Accessory" ) ) {
		case 1:
			mes "[Emmet]";
			mes "You're enchanting the armor, I see.";
			close2;
			item_enchant(1);
			end;
		case 2:
			mes "[Emmet]";
			mes "You're enchanting the footwear, I see.";
			close2;
			item_enchant(2);
			end;
		case 3:
			mes "[Emmet]";
			mes "You're enchanting the shoes, I see.";
			close2;
			item_enchant(3);
			end;
		case 4:
			mes "[Emmet]";
			mes "You're enchanting the right accessory, I see.";
			close2;
			item_enchant(4);
			end;
		case 5:
			mes "[Emmet]";
			mes "You're enchanting the left accessory, I see.";
			close2;
			item_enchant(5);
			end;
		}
		end;
	}
	end;
}

// item exchange
wolfvill,170,131,3	script	Bamdat#bamdat	4_EP18_GW_OLD02,{
	if (ep18_main < 38) {
		mes "[Bamdatt]";
		mes "I used to be a recognized technician in the past.";
		mes "Now it's hard to find any work...";
		mes "But if there ever comes a time when my skills are needed, I'll be ready to help.";
		close;
	}
	disable_items;
	mes "[Bamdatt]";
	mes "I heard the shrine's villa has changed in a very strange way, right?";
	mes "It's where the fallen god passed by....";
	mes "The loot obtained from there must also be filled with false beliefs.";
	next;
	mes "[Bamdatt]";
	mes "If you wish, I can perform a purification ritual to transform them into weapons filled with true faith.";
	mes "My sorcerous skills will also be put to good use.";
	next;
	mes "[Bamdatt]";
	mes "You have a choice between a basic purification ritual, which significantly reduces refining power, and an advanced purification ritual, which maintains most of the refining power.";
	next;
	mes "You can reform the +9 refined Adulter Pides weapon series into the Vibtus Pides series.";
	mes "The refining power dropped varies depending on the purification ritual chosen.";
	next;
	switch( select( "Basic Purification Ritual", "Advanced Purification Ritual", "Never mind." ) ) {
	case 1:
		mes "[Bamdatt]";
		mes "May the blessings of the gods be with you.";
		close2;
		item_reform("Consecrate_Weapon_1");
		end;
	case 2:
		mes "[Bamdatt]";
		mes "May the blessings of the gods be with you.";
		close2;
		item_reform("Consecrate_Weapon_2");
		end;
	case 3:
		mes "[Bamdatt]";
		mes "Hmm? You seem to possess skills comparable to researchers from other countries.";
		close;
	}
	end;
}
