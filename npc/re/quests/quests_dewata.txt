//===== rAthena Script =======================================
//= Dewata Quest NPCs
//===== By: ==================================================
//= Gennosuke Kouga
//===== Current Version: =====================================
//= 1.1
//===== Compatible With: =====================================
//= rAthena SVN
//===== Description: =========================================
//= Quest NPCs related to Dewata:
//== "Dewata Legend"
//== "Help The Old Man"
//== "The Enchantment Weapon" (Keris)
//===== Additional Comments: =================================
//= 1.0 First version.
//= 1.1 Standardized. [Euphy]
//============================================================

// Entrance - Alberta Sailors
//============================================================

alberta,240,47,5	script	Alberta Sailor#alberta	536,{
	mes "[Alberta Sailor]";
	mes "Do ya want to visit ^C35817Dewata Island?^000000";
	mes "With dazzling waves and charming vistas, it's a great place to relax.";
	mes "The transit fee is 10,000 Zeny.";
	next;
	if(select("Yes:No")==2) {
		mes "[Alberta Sailor]";
		mes "Let me know";
		mes "when you're ready to travel~";
		close; }
	mes "[Alberta Sailor]";
	mes "Have a nice trip~";
	close2;
	warp "dewata",232,53;
	end;
}

dewata,230,49,5	script	Alberta Sailor#dewata	536,{
	mes "[Alberta Sailor]";
	mes "Want to go back to ^C35817Alberta^000000?";
	next;
	if(select("Yes:No")==2) {
		mes "[Alberta Sailor]";
		mes "Have some more fun before you go!";
		mes "^C35817Dewata^000000 Island still has more to offer.";
		close; }
	mes "[Alberta Sailor]";
	mes "I hope you had a lot of fun on your trip to ^C35817Dewata^000000 Island.";
	close2;
	warp "alberta",235,44;
	end;
}

dewata,235,56,4	script	Gatekeeper of Krakatau#1	534,{
	mes "[Gatekeeper of Krakatau Volcano]";
	mes "^C35817Krakatau Volcano^000000 is a very dangerous area";
	mes "I cannot allow anyone to go inside.";
	next;
	if (checkquest(9162)>=0 && countitem(11533)) {
		select("^0000FFTribal Chief Paiko^000000");
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "Oh! I didn't know about that!";
		mes "This is some of the best news";
		mes "I have heard recently.";
		next;
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "What is this wonderful smell?";
		mes "Of course, it's our ^4AA02CSatay^000000!";
		mes "I was sightly hungry...";
		mes "so this should fill me up.";
		next;
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "Since you came all the way here";
		mes "I will share an interesting story.";
		next;
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "It has become a lost tradition in";
		mes "recent years, but until 10";
		mes "years ago in order to become a";
		mes "^C35817Jaty Tribe^000000 warrior you had to";
		mes "climb ^C35817Krakatau Volcano^000000 to prove your endurance.";
		next;
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "The eyes of those warriors were";
		mes "anxious yet determined before going";
		mes "up ^C35817Krakatau Volcano^000000.";
		next;
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "I still cannot forget that look in";
		mes "their eyes. I feel a little bit of";
		mes "the same emotion from you, Adventurer.";
		next;
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "I want you to live long and";
		mes "prosper. Be heathly and safe.";
		mes "Travel so you can live to tell";
		mes "the tale of your adventures.";
		changequest 9162,9163;
		delitem 11533,1;
		close; }
	if(select("Allow me through:I don't want to go in")==1) {
		if(dewata_legend >= 5) {
			mes "[Gatekeeper of Krakatau Volcano]";
			mes "You are the traveler who was";
			mes "acknowledged by tribe leader as a";
			mes "friend of the tribe and received a";
			mes "^4AA02CShining Cendrawasih Feather.^000000";
			next;
			mes "[Gatekeeper of Krakatau Volcano]";
			mes "I will let you pass, but";
			mes "^C35817Krakatau Volcano^000000 is";
			mes "dangerous so please take care.";
			close2;
			warp "dew_dun01",289,160;
			end; }
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "^C35817Krakatau Volcano^000000 is";
		mes "a very dangerous area,";
		mes "so I can't allow you in";
		mes "unless you qualify for entry.";
		close; }
	mes "[Gatekeeper of Krakatau Volcano]";
	mes "You have choosen wisely.";
	mes "^C35817Krakatau Volcano^000000 is";
	mes "an extremely dangerous area.";
	close;
}

dew_dun01,292,164,4	script	Gatekeeper of Krakatau#2	541,{
	mes "[Gatekeeper of Krakatau Volcano]";
	mes "Want to go back to Dewata?";
	next;
	if(select("Yes:No")==2) {
		mes "[Gatekeeper of Krakatau Volcano]";
		mes "^C35817Krakatau Volcano^000000 is";
		mes "a dangerous place.";
		mes "You should go back now.";
		close; }
	close2;
	warp "dewata",232,53;
	end;
}

dew_fild01,78,288,5	script	Jaty Tribe Warrior	541,{
	mes "[Jaty Tribe Warrior]";
	mes "We revere strength and bravery.";
	mes "We are the ^FF0000Jaty^000000 Tribe.";
	if (checkquest(9158)==-1 || !countitem(11533)) close;
	next;
	mes "[Jaty Tribe Warrior]";
	mes "My trained eyes see that";
	mes "you are about to say something.";
	mes "Speak, state your business.";
	next;
	select("^0000FFTribal Chief Paiko^000000");
	mes "[Jaty Tribe Warrior]";
	mes "I've heard about your";
	mes "helpful deeds...";
	mes "As a representative of my tribe";
	mes "I express my thanks to you.";
	next;
	mes "[Jaty Tribe Warrior]";
	mes "Also, thank you for the ^4AA02CSatay^000000.";
	mes "My mouth is already watering...";
	mes "There is something I would like";
	mes "to share with you regarding our tribe.";
	next;
	mes "[Jaty Tribe Warrior]";
	mes "Unlike the ancient times when our";
	mes "tribe's warriors fought and shed";
	mes "their blood, the world has become";
	mes "more peaceful nowadays. But our";
	mes "tribe's territory has shrunk drastically.";
	next;
	mes "[Jaty Tribe Warrior]";
	mes "Nevertheless, we will continue";
	mes "keeping the warrior tradition of";
	mes "our tribe alive, and we will";
	mes "preserve the pride we have earned";
	mes "through the sacrifice of past warriors.";
	next;
	mes "[Jaty Tribe Warrior]";
	mes "I hope that your perserverance and";
	mes "pride remain with you in your travels.";
	changequest 9158,9159;
	delitem 11533,1;
	close;
}

dew_fild01,185,300,4	script	Tribe Manager	541,{
	mes "[Tribe Manager]";
	mes "Keeping our culture and tradition";
	mes "is very important.";
	if(!checkquest(9160)>=0 || !countitem(11533)) {
		mes "Although it is a little boring...";
		close; }
	next;
	mes "[Tribe Manager]";
	mes "It seems to me that you have";
	mes "something to say, don't you?";
	next;
	select("^0000FFTribal Chief Paiko^000000");
	mes "[Tribe Manager]";
	mes "I didn't know that there was";
	mes "such an effort being put forth";
	mes "and that you took a key role in the effort...";
	mes "You are the hero of the ^C35817Jaty Tribe^000000!";
	next;
	mes "[Tribe Manager]";
	mes "Wow~ the savory scent of";
	mes "delicious homemade ^4AA02CSatay^000000!";
	mes "Thank you for the meal.";
	mes "Please give my regards";
	mes "to our Tribe Leader.";
	next;
	mes "[Tribe Manager]";
	mes "There are few contacts between";
	mes "^C35817Dewata Island^000000 and ^C35817Jaty Tribe^000000.";
	mes "We used to have a stronger bond";
	mes "in older times.";
	next;
	mes "[Tribe Manager]";
	mes "But with the new culture and";
	mes "foreigners flowing in,";
	mes "^C35817Dewata Island^000000 has became a";
	mes "tourist attraction and we";
	mes "have lost touch with them.";
	next;
	mes "[Tribe Manager]";
	mes "The tourist attraction has";
	mes "expanded continously, but the";
	mes "reason it hasn't influenced us";
	mes "here is due to this small temple";
	mes "which I am managing.";
	next;
	mes "[Tribe Manager]";
	mes "I couldn't let our tradition fade";
	mes "away like that so easily.";
	mes "I hope keeping our tradition and";
	mes "culture alive lets people know how";
	mes "important these things are to us.";
	next;
	mes "[Tribe Manager]";
	mes "From now on, I hope people from";
	mes "^C35817Dewata Island^000000 and ^C35817Jaty";
	mes "Tribe^000000 can get along and interact";
	mes "more often.";
	changequest 9160,9161;
	delitem 11533,1;
	close;
}

// NPC - Memo
//============================================================

dewata,109,262,4	script	Memo#dew_drink	534,{
	if(dewata_oldman >= 1) {
		if (checkquest(5040) >= 0) {
			mes "[Memo]";
			mes "So, what did Lero say?";
			next;
			select("Palm tree... became.");
			mes "- You explain the situation to";
			mes "Mr. Memo -";
			next;
			mes "[Memo]";
			mes "Lero said sorry?";
			mes "Hmmm, it's okay.";
			next;
			mes "[Memo]";
			mes "That must be ^0000FFPoby^000000. If he has";
			mes "been hurt, that's why there wasn't";
			mes "any message. Lero actually";
			mes "cares about him a lot...";
			next;
			changequest 5040,5041; }
		if (checkquest(5041) >= 0) {
			mes "[Memo]";
			mes "He might be troublesome,";
			mes "but please visit Jaty village.";
			mes "Lero must complete the oil.";
			next;
			mes "[Memo]";
			mes "If it is not, wait there and bring";
			mes "^FF000030 Bottle of Oil^000000 to me.";
			close; }
		if (checkquest(5042) >= 0 && countitem(6401) >= 30) {
			mes "[Memo]";
			mes "You brought the oil. Good job, and thank you.";
			next;
			mes "[Memo]";
			mes "Excuse me, but I have an urgent";
			mes "matter to attend to. Wait for a bit,";
			mes "then talk to me when I'm done.";
			delitem 6401,30;
			changequest 5042,5043;
			set dewata_oldman,2;
			close;
		} else if (checkquest(5043,PLAYTIME) == 2) {
			mes "[Memo]";
			mes "Did I make you wait too long?";	
			next;
			mes "[Memo]";
			mes "My family has been making Arks for four generations.";
			next;
			mes "[Memo]";
			mes "Grandfather had a hard living";
			mes "since he didn't get many good sales.";
			next;
			mes "[Memo]";
			mes "Dewata island people do not drink";
			mes "much in the hot weather.";
			next;
			mes "[Memo]";
			mes "When I was young, Dewata";
			mes "developed as a tourist atrraction,";
			mes "and that's when the tour package";
			mes "Ark started selling well.";
			next;
			mes "[Memo]";
			mes "Good liquid needs fresh oil,";
			mes "I was able to make a liquid";
			mes "for ten years and deliver it all on time.";
			next;
			mes "[Memo]";
			mes "Because today's oil has not";
			mes "arrived on time, I think I might";
			mes "have a hard time.";
			next;
			mes "[Memo]";
			mes "You helped me make the liquid correctly.";
			next;
			mes "[Memo]";
			mes "This proverb '^0000FFMengatakan mudah,";
			mes "mengerjakan susah^000000.' means it is";
			mes "easy to say something, but hard to";
			mes "do anything.";
			next;
			mes "[Memo]";
			mes "In other words, it's easy to say";
			mes "that we'll help others but its hard";
			mes "to actually do the action.";
			next;
			emotion e_thx;
			mes "[Memo]";
			mes "You really did a great job. I like";
			mes "you because you are different from";
			mes "today's youngins.";
			getitem 617,1;
			getexp 50000,10000;
			changequest 5043,5044;
			next;
			mes "[Memo]";
			mes "Will you help me with my work";
			mes "from time to time?";
			mes "I will pay you for what you do for me.";
			close;
		} else if (checkquest(5043,PLAYTIME) != -1) {
			mes "[Memo]";
			mes "... ... ...";
			next;
			mes "- Memo is making an ark -";
			close;
		} else if (checkquest(5044,PLAYTIME) == 2) {
			mes "[Memo]";
			mes "^FF0000" + strcharinfo(0) +"^000000? -";
			next;
			if(select("Just came by to say hello...:I will help you.")==1) {
				mes "[Memo]";
				mes "I guess you are busy.";
				mes "If possible, will you get the oil";
				mes "from Lero? I appreciate it...";
				close; }
			mes "[Memo]";
			mes "Thank you, I know you're busy";
			mes "and helping me can be a chore.";
			next;
			mes "[Memo]";
			mes "Can you help Lero and bring back palm tree oil...?";
			erasequest 5044;
			setquest 5045;
			close;
		} else if (checkquest(5044,PLAYTIME) != -1) {
			mes "[Memo]";
			mes "Will you help me tomorrow?";
			mes "Poby still has a back pain.";
			mes "Backaches don't just go away";
			mes "after one day...";
			close;
		} else if (checkquest(5045) >= 0) {
			mes "[Memo]";
			mes "Can you help Lero and bring back palm tree oil...?";
			close;
		} else if (checkquest(5047) >= 0 || checkquest(5049) >= 0 || checkquest(5051) >= 0) {
			mes "[Memo]";
			mes "Oh, you brought the oil! Good job!";
			next;
			mes "[Memo]";
			mes "You must have had a hard time";
			mes "bringing the oil, so take this drink.";
			next;
			mes "[Memo]";
			mes "Ark is famous for tourists. A guy";
			mes "bought many bottles by himself.";
			next;
			mes "[Memo]";
			mes "Worrying that he'll drink alone?";
			mes "Too much drink always becomes poisonous.";
			next;
			mes "[Memo]";
			mes "I want you to help me this time.";
			next;
			mes "[Memo]";
			mes "Poby still has back pains and it";
			mes "will take some days for him to";
			mes "recover.";
			if (checkquest(5047)>=0) {
				delitem 6401,10;
				getitem 11534,2;
				erasequest 5047;
				setquest 5044;
			} else if (checkquest(5049)>=0) {
				delitem 6401,15;
				getitem 11534,2;
				erasequest 5049;
				setquest 5044;
			} else if (checkquest(5051)>=0) {
				delitem 6401,20;
				getitem 11534,2;
				erasequest 5051;
				setquest 5044; }
			close; }
		mes "[Memo]";
		mes "So, what did Lero say?";
		next;	
		emotion e_dots;
		mes "[Memo]";
		mes "... ... ...";
		next;
		mes "[Memo]";
		mes "You didn't find out what happened?";
		next;
		mes "[Memo]";
		mes "Find the best oil master. His name is ^0000FFLero^000000.";
		close; }
	if(rand(1,5)==1) {
		mes "[Memo]";
		mes "What should I do? I still don't";
		mes "have any news from the Jaty tribe.";
		next;
		mes "[Memo]";
		mes "Oh no~ All the liquid is going to spoil...";
		next;
		select("What happened?");
		emotion e_what;
		mes "[Memo]";
		mes "Who are you?";
		next;
		mes "[Memo]";
		mes "You're an adventurer, right?";
		mes "As you can see from the jars around";
		mes "me, I am making ^0000FFtraditional wine^000000";
		mes "for a living.";
		next;
		mes "[Memo]";
		mes "Everyone knows about this, so";
		mes "^0000FFDewata Island^000000 attracts many";
		mes "tourists.";
		next;
		mes "[Memo]";
		mes "Especially this traditional wine, which";
		mes "has been made for four generations!";
		mes "But ^FF0000Ark^000000 is short of supply.";
		mes "Ark needs ^0000FFPalm Oils^000000, made";
		mes "from Oil Palm Fruit.";
		next;
		mes "[Memo]";
		mes "Unfortunately, we haven't been";
		mes "getting ^0000FFPalm Oil^000000 from the Jaty";
		mes "tribe village lately.";
		mes "The ingredients might be useless";
		mes "if it is delivered too late.";
		next;
		select("Sound like a big problem.");
		mes "[Memo]";
		mes "It is more of a problem than you";
		mes "think. Sales are credit, but if we";
		mes "do not make due today we'll lose";
		mes "the credit, the ingredients, and";
		mes "the tourists who do not get the";
		mes "Ark. So it's quite damaging.";
		next;
		emotion e_dots;
		mes "[Memo]";
		mes "... ...";
		next;
		emotion e_gasp;
		mes "[Memo]";
		mes "Ah, right! Are you busy now?";
		next;
		if(select("Sorry, I am busy.:No, I am not busy.")==1) {
			emotion e_pif;
			mes "[Memo]";
			mes "Hmm, I have no choice.";
			mes "You don't care that others are in";
			mes "trouble. What has this world come to?";
			close; }
		mes "[Memo]";
		mes "That's good to hear.";
		mes "So since you are wandering here...";
		next;
		mes "[Memo]";
		mes "Do you mind if I ask a favor~?";
		mes "Actually, I have visited the Jaty";
		mes "Tribe, but this unmatured ^FF0000Ark^000000";
		mes "won't let me leave.";
		next;
		mes "[Memo]";
		mes "Will you go to Jaty village and";
		mes "ask ^0000FFLero^000000 what happened?";
		next;
		mes "[Memo]";
		mes "This guy has never broken a";
		mes "promise for 10 years, so he must have";
		mes "a really good reason not to come.";
		setquest 5035;
		set dewata_oldman,1;
		next;
		mes "[Memo]";
		mes "Find the best oil master.";
		mes "His name again is ^0000FFLero^000000... Remember it!";
		close;
	} else {
		emotion e_swt2;
		mes "[Memo]";
		mes "Oh God! We don't have a message";
		mes "from the Jaty tribe yet.";
		next;
		mes "[Memo]";
		mes "They have never broken a promise";
		mes "for 10 years, and I don't know the";
		mes "reason. What's happening...?";
		next;
		emotion e_sob;
		mes "[Memo]";
		mes "I might soil all the liquid if it";
		mes "is going on like this.";
		close;
	}
}

// NPC - Lero
//============================================================

dew_fild01,114,275,4	script	Lero#dew_drink	536,{
	if(dewata_oldman == 2) {
		if (checkquest(5045) >= 0) {
			mes "[Lero]";
			mes "Hey, I've been waiting for you.";
			mes "I didn't know that Poby's injury";
			mes "would make my life so difficult.";
			next;
			set .@dailylero,rand(1,3);
			if (.@dailylero == 1) changequest 5045,5046;
			else if (.@dailylero == 2) changequest 5045,5048;
			else if (.@dailylero == 3) changequest 5045,5050;
			mes "[Lero]";
			mes "I'm ashamed to ask you this, but";
			if (checkquest(5048) >= 0)
				mes "could you bring ^0000FF30 pieces of oil palm nuts^000000?";
			else if (checkquest(5046) >= 0)
				mes "could you bring ^0000FF20 pieces of oil palm nuts^000000?";
			else if (checkquest(5050) >= 0)
				mes "could you bring ^0000FF40 pieces of oil palm nuts^000000?";
			next;
		lerowait:
			if (checkquest(5046) >= 0 && countitem(6402) > 19) {
				callsub lerocount,20;
				changequest 5046,5047;
				close;
			} else if (checkquest(5048) >= 0 && countitem(6402) > 29) {
				callsub lerocount,30;
				changequest 5048,5049;
				close;
			} else if (checkquest(5050) >= 0 && countitem(6402) > 39) {
				callsub lerocount,40;
				changequest 5050,5051;
				close; }	
			mes "[Lero]";
			mes "Once you bring the oil palm nuts,";
			mes "Mr. Memo will exchange them with oil.";
			close; }
		else if (checkquest(5046) >= 0 || checkquest(5048) >= 0 || checkquest(5050) >= 0) goto lerowait;
		else if (checkquest(5047) >= 0 || checkquest(5049) >= 0 || checkquest(5051) >= 0) {
			mes "[Lero]";
			mes "As I told you before, it is heavier";
			mes "than you might think, so be careful";
			mes "when carrying this.";
			close; }
		mes "[Lero]";
		mes "What happened? I didn't get a memo";
		mes "from Mr. Memo someone was coming.";
		close; }
	if (checkquest(5035) >= 0) {
		emotion e_an;
		mes "[Lero]";
		mes "Oh no! I have so many orders and";
		mes "I'm running out of ingredients.";
		mes "Not yet? What's going on, Poby?";
		mes "Where did he go?";
		next;
		emotion e_ag;
		select("Excuse me, but are you Lero?");
		mes "[Lero]";
		mes "When Poby gets back here, I'm";
		mes "gonna give him a beating he'll never forget!";
		next;
		mes "- Lero seems pretty mad at someone";
		mes "and ignores you -";
		next;
		mes "[Lero]";
		mes "Oops. Who are you?";
		next;
		select("Memo sent me here.");
		mes "[Lero]";
		mes "Ah, right! I forgot about Memo";
		mes "because the workers who gather";
		mes "nuts have not come yet. Sorry.";
		next;
		mes "[Lero]";
		mes "To make fresh palm oils, I need";
		mes "fresh Palm Oil Fruit. Then I'll be";
		mes "able able to get more from its";
		mes "fresh fruit.";
		next;
		mes "[Lero]";
		mes "Between you and me, Mr.Memo is so";
		mes "fussy that he will not use any";
		mes "unfresh oil.";
		next;
		mes "[Lero]";
		mes "To make fresh oil, he always sends";
		mes "the workers to the palm tree forest,";
		mes "but... the guys sent at dawn have";
		mes "not come back yet.";
		next;
		mes "[Lero]";
		mes "First, I thought that he was lazy";
		mes "and it made me very uneasy.";
		mes "Can you find the workers in palm forest?";
		next;
		select("Yes, I will find them.");
		mes "[Lero]";
		mes "Thank you so much.";
		mes "Find Poby.";
		next;
		mes "[Lero]";
		mes "Poby might in ^0000FFPalm Forest^000000.";
		mes "The crop is best at the southern part of the forest.";
		changequest 5035,5036;
		close;
	} else if (checkquest(5036) >= 0) {
		emotion e_what;
		mes "[Lero]";
		mes "Did you find Poby?";
		next;
		mes "[Lero]";
		mes "... ... ...";
		next;
		mes "[Lero]";
		mes "Oh, you haven't visited the east";
		mes "of ^0000FFPalm Forest^000000 yet. I'm pretty";
		mes "worried...";
		close;
	} else if (checkquest(5037) >= 0) {
		emotion e_what;
		mes "[Lero]";
		mes "You're back... and... Poby...";
		mes "How is Poby?";
		next;
		select("Pobu...");
		mes "[Lero]";
		mes "Ah! I didn't know that. I always";
		mes "tell Poby '^0000FFKemarau setahun rusak sehari.'^000000";
		next;
		mes "[Lero]";
		mes "He climbed the tree without any";
		mes "safety equipment, so he might've";
		mes "fallen down and gotten injured.";
		next;
		mes "[Lero]";
		mes "Hmm... Sorry I couln't get the";
		mes "Palm Oil right now.";
		next;
		mes "[Lero]";
		mes "Will you deliver the message to";
		mes "Mr. Memo that it is impossible";
		mes "to get the oil due do to a";
		mes "lack of ingredients?";
		mes "No artisans can create anything";
		mes "without ingredients.";
		next;
		select("Why don't I get the ingredients?");
		mes "[Lero]";
		mes "Ah, that can be a good way, but it";
		mes "will be hard to gather nuts as a starter.";
		next;
		mes "[Lero]";
		mes "Hmm!!!";
		mes "I have a good idea.";
		next;
		mes "[Lero]";
		mes "You can ask Poby about the best";
		mes "method of gathering nuts where you";
		mes "met him in forest. He should be";
		mes "able to teach you the technique.";
		changequest 5037,5038;
		next;
		mes "[Lero]";
		mes "Although he is lazy and rather";
		mes "careless, he is the best worker.";
		close;
	} else if (checkquest(5038) >= 0) {
		mes "[Lero]";
		mes "You can ask Poby about the best";
		mes "method of gathering nuts where you";
		mes "met him in forest. He should be";
		mes "able to tell you the technique.";
		next;
		mes "[Lero]";
		mes "Although he is lazy and rather";
		mes "careless, he is the best worker.";
		close;
	} else if (checkquest(5039) >= 0) {
		if(countitem(6402) > 59) {
			mes "[Lero]";
			mes "One two three four,....";
			next;
			mes "[Lero]";
			mes "60 pieces of nuts, exactly. I will";
			mes "press the oil right now.";
			next;
			emotion e_sry;
			mes "[Lero]";
			mes "It takes sometime, so go back to";
			mes "Mr. Memo and tell him the";
			mes "situation. Alse tell him that I'm";
			mes "sorry for the delay.";
			delitem 6402,60;
			changequest 5039,5040;
			close; }
		mes "[Lero]";
		mes "Did you gather the nuts already?";
		next;
		mes "[Lero]";
		mes "One, two....";
		next;
		mes "[Lero]";
		mes "This isn't the number I ordered from Poby.";
		next;
		mes "[Lero]";
		mes "It's going to be difficult if it is";
		mes "delayed more, so hurry up and bring me ^FF000060^000000 ^0000FFPalm Oil Fruit^000000.";
		close;
	} else if (checkquest(5040) >= 0) {
		mes "[Lero]";
		mes "It takes sometime, so go back to";
		mes "Mr. Memo and tell him the";
		mes "situation. Alse tell him that I'm";
		mes "sorry for the delay.";
		close;
	} else if (checkquest(5041) >= 0) {
		mes "[Lero]";
		mes "You've come at the right time.";
		mes "I just finished making the palm tree oil.";
		next;
		mes "[Lero]";
		mes "It is heavier than you might think,";
		mes "so be careful when carrying it.";
		next;
		emotion e_sry;
		mes "[Lero]";
		mes "Oh, tell Mr. Memo that I'm sorry";
		mes "for the late delivery, and explain";
		mes "that it wasn't my fault.";
		changequest 5041,5042;
		getitem 6401,30;
		close;
	} else if (checkquest(5042) >= 0) {
		mes "[Lero]";
		mes "It is heavier than you might think,";
		mes "so be careful when carrying it.";
		next;
		emotion e_sry;
		mes "[Lero]";
		mes "Oh, tell Mr. Memo that I'm sorry";
		mes "for the late delivery, and explain";
		mes "that it wasn't my fault.";
		close; }
	mes "[Lero]";
	mes "What's going on with Poby...?";
	mes "Why hasn't he come back...?";
	next;
	mes "- Seems like he is waitting for someone -";
	close;

lerocount:
	mes "[Lero]";
	mes "One, two, three, four....";
	next;
	mes "[Lero]";
	mes "Extracly "+getarg(0)+" pieces of oil palm";
	mes "nuts. Let you exchange them with oil right now.";
	next;
	mes "[Lero]";
	mes "As I told you before, it is";
	mes "heavier than you might think, so";
	mes "be careful when carrying this.";
	delitem 6402, getarg(0);
	getitem 6401, getarg(0)/2;
	return;
}

// NPC - Poby
//============================================================

dew_fild01,259,48,4	script	Poby#dew_drink	538,{

	if(dewata_oldman >= 2) {
		mes "[Poby]";
		mes "Oh? ^FF0000" + strcharinfo(0) +"^000000, we meet again. What's going on?";
		next;
		if(select("Why'd you come here?:I want to know how to get fruit.")==2) {
			mes "[Memo]";
			mes "It is easy for a beginner like";
			mes "you. All you have to do is";
			mes "shake or kick the tree.";
			next;
			mes "[Memo]";
			mes "It might be dangerous, so you";
			mes "must always wear a ^0000FFSafety Helmet^000000.";
			close; }
		mes "[Poby]";
		mes "I'm taking a walk because I think";
		mes "it will make my back ache less.";
		close; }
	if (checkquest(5036) >= 0) {
		emotion e_swt2;
		mes "[Poby]";
		mes "Ah~ backache..";
		next;
		select("Are you Poby?");
		mes "[Poby]";
		mes "Who are you?";
		next;
		mes "[Poby]";
		mes "I don't know you, but";
		mes "are you a fan of mine?";
		mes "I'm Poby, the best fruit";
		mes "hunter in the Jaty tribe.";
		next;
		emotion e_what;
		mes "[Poby]";
		mes "You're here for my autograph?";
		next;
		select("Lero made me come here.");
		mes "[Poby]";
		mes "Ah! Mr.Lero made you come here. I";
		mes "can't move because I hurt my back";
		mes "while climbing a tree.";
		next;
		emotion e_sob;
		mes "[Poby]";
		mes "!#@$*&!@$&!@$%!$#*&!@#$";
		next;
		mes "[Poby]";
		mes "And I've still never had a girlfriend...";
		next;
		emotion e_sob;
		mes "[Poby]";
		mes "!#@$*&!@$&!@$%!$#*&!@#$";
		next;
		mes "[Poby]";
		mes "Ah! Sorry. Tell Mr. Lero that I'll";
		mes "go back if I can find a way to move.";
		changequest 5036,5037;
		next;
		mes "[Poby]";
		mes "I can't move at all 'cuz of this backache...";
		close;
	} else if (checkquest(5037) >= 0) {
		mes "[Poby]";
		mes "Ah! Sorry. Tell Mr. Lero that I'll";
		mes "go back if I can find a way to move.";
		next;
		emotion e_swt2;
		mes "[Poby]";
		mes "I can't move at all 'cuz of this backache...";
		close;
	} else if (checkquest(5038) >= 0) {
		emotion e_swt2;
		mes "[Poby]";
		mes "Ah~ Backache..";
		next;
		mes "[Poby]";
		mes "Oh!! You're-- Let me guess...";
		next;
		emotion e_dots;
		mes "[Poby]";
		mes "... ... ... ...";
		next;
		mes "[Poby]";
		mes "...you're back! You plan to";
		mes "catch ^0000FFPalm Oil Fruit^000000 instead of me, right?";
		next;
		mes "[Poby]";
		mes "It is hard for beginners to catch";
		mes "the fruit like me. No, it's";
		mes "impossible.";
		next;
		mes "[Poby]";
		mes "Masters usually climb the tree to";
		mes "catch the fruit, but you're a";
		mes "beginner...";
		next;
		mes "[Poby]";
		mes "It's easiest for beginners";
		mes "to shake or kick the tree.";
		mes "It might be dangerous, so remember to wear a ^0000FFSafety Helmet^000000.";
		changequest 5038,5039;
		next;
		emotion e_gasp;
		mes "[Poby]";
		mes "Ok! Gather ^FF000060 ^0000FFPalm Oil Fruit^000000 and";
		mes "bring it to Mr. Lero.";
		close;
	} else if (checkquest(5039) >= 0) {
		if(countitem(6402) > 59) {
			mes "[Poby]";
			mes "You've got all the fruits.";
			mes "Bring them to Mr. Lero.";
			close; }
		mes "[Poby]";
		mes "It's easiest for beginners like";
		mes "you to shake or kick the tree.";
		next;
		mes "[Poby]";
		mes "It might be dangerous, so always";
		mes "wear a ^0000FFSafety Helmet^000000.";
		next;
		mes "[Poby]";
		mes "Gather ^FF000060 ^0000FFPalm Oil Fruit^000000 and";
		mes "bring it to Mr. Lero.";
		close;
	}
	emotion e_sob;
	mes "[Poby]";
	mes "Ah~ my freakin' back is killing me.";
	close;
}

// NPC - Tribal Chief Paiko
//============================================================

dew_in01,15,49,5	script	Tribal Chief Paiko#dew_	540,{
	set .@n$, "[Tribal Chief Paiko]";
	if(dewata_legend == 2) {
		mes .@n$;
		mes "I can see you are a traveler";
		mes "from another land.";
		mes "What brings you here?";
		next;
		if(select("I overheard the story by accident:I have nothing to say.")==2) {
			mes .@n$;
			mes "You are wasting your time here.";
			mes "There are many other attractions";
			mes "around our village.";
			close; }
		mes .@n$;	
		mes "What do you mean?";
		mes "You heard the story about the crown?";
		mes "You must have heard incorrectly.";
		mes "I have nothing to say to you";
		mes "regarding such things.";
		next;
		select("Kasyapa was talking about a crown...");
		mes .@n$;	
		mes "It seems that ^0000FFKasyapa^000000 has told you";
		mes "a tall tale, and I appreciate your";
		mes "concern about our affairs.";
		next;
		mes .@n$;
		mes "It's not something that a stranger";
		mes "like you could understand. Make";
		mes "like a tree, and get out of here.";
		set dewata_legend,3;
		close;
	} else if(dewata_legend == 3) {
		mes .@n$;
		mes "There are many other attractions around our village.";
		next;
		mes .@n$;
		mes "If it's about the crown, I want";
		mes "you to stop asking about it.";
		mes "Please leave.";
		close;
	} else if(dewata_legend == 4) {
		if (checkquest(9155) >= 0) {
			if(countitem(6405) > 14) {
				mes .@n$;
				mes "Oh! You've found all of them.";
				mes "Look! The feathers you have found";
				mes "are sparkling, aren't they?";
				mes "Alright, let me begin crafting";
				mes "the ^4AA02CJaty Crown^000000. I feel that";
				mes "I am ready.";
				next;
				specialeffect EF_MAPPILLAR3;
				mes "- Suddenly, a large noise begins";
				mes "to boom as you and ^0000FFPaiko^000000 are";
				mes "surrounded by warm and bright";
				mes "sparkling energy like a thousand";
				mes "tinkling fireflies. -";
				changequest 9155,9156;
				delitem 6405,15;
				close; }
			mes .@n$;
			mes "It seems that you have yet to find";
			mes "the materials to make the ^4AA02CJaty Crown^000000.";
			next;
			mes .@n$;
			mes "The symbol of the Jaty Tribe is";
			mes "also a famous mystical creature.";
			mes "Find ^FF000015 ^4AA02CCendrawasih Feathers^000000 and";
			mes "bring them to me.";
			close;
		} else if (checkquest(9156) >= 0) {
			mes .@n$;
			mes "With your help the ^4AA02CJaty Crown^000000 is";
			mes "coming along nicely.";
			mes "It will take some time until the";
			mes "task is finished, so please wait a little.";
			next;
			mes .@n$;
			mes "After the ^4AA02CJaty Crown^000000 is complete,";
			mes "there is a gift that I want to give";
			mes "to you.";
			next;
			mes .@n$;
			mes "Ah, you should go see ^0000FFSage";
			mes "Kasyapa^000000, who really wants to";
			mes "reward you with something.";
			changequest 9156,9157;
			close;
		} else if (checkquest(9157) >= 0) {
			mes .@n$;
			mes "Ah, you should go see ^0000FFSage";
			mes "Kasyapa^000000, who really wants to";
			mes "reward you with something.";
			close; }
		mes .@n$;
		mes "I've been waiting for you.";
		mes "According to ^0000FFSage Kasyapa^000000,";
		mes "you are willing to help us make";
		mes "a crown for our tribe.";
		next;
		select("Crown-a-what's it?");
		mes .@n$;
		mes "The tribe leader has the duty of";
		mes "making and protecting the ^4AA02CJaty";
		mes "Crown^000000 to uphold the tribe's pride";
		mes "and honor.";
		next;
		mes .@n$;
		mes "But ever since I became the tribe";
		mes "leader, there have been difficulties";
		mes "making it.";
		next;
		mes "[Tribale Chief Paiko]";
		mes "According to ^0000FFSage Kasyapa^000000, you can";
		mes "help us create a ^4AA02CJaty Crown^000000.";
		next;
		mes .@n$;
		mes "Do you think you can help?";
		mes "Your efforts will not go";
		mes "unrewarded.";
		next;
		if(select("I will help.:Sorry, I cannot help now.")==2) {
			mes .@n$;
			mes "That's really sad.";
			mes "If you ever change";
			mes "your mind, please come again.";
			mes "I will be waiting.";
			close; }
		mes .@n$;
		mes "Many thanks to you, stranger";
		mes "If Kasyapa trusts you, then I know";
		mes "that you can help us make a";
		mes "^4AA02CJaty Crown^000000.";
		mes "What you can do to";
		mes "help us is very simple.";
		next;
		mes .@n$;
		mes "The symbol of the Jaty Tribe is";
		mes "also a famous mystical creature.";
		mes "Find ^FF000015 ^4AA02CCendrawasih Feathers^000000 and";
		mes "bring them to me.";
		mes "Our faith is in you, stranger.";
		setquest 9155;
		close;
	} else if(dewata_legend == 5) {
		if (checkquest(9158) >= 0) {
		chiefrequest:
			mes .@n$;
			mes "It seems that you haven't";
			mes "delivered the ^4AA02CSatay^000000 yet.";
			if (checkquest(9158) >= 0) mes "Did you run into any problems?";
			else if (checkquest(9160) >= 0) mes "Is there something wrong?";
			else if (checkquest(9162) >= 0) mes "Anything happened?";
			else if (checkquest(9163) >= 0) mes "Anything go wrong?";
			next;
			switch( select("I ate them all.:Who do I deliver this to...?:Nothing.")) {
				case 1:
					if (checkquest(9158) >= 0 || checkquest(9160) >= 0) {
					mes .@n$;
					mes "Huh... so you couldn't resist";
					mes "yourself, eh?";
					mes "Don't blame yourself too much. It";
					mes "is difficult resist the ^4AA02CSatay^000000's";
					mes "addicting aroma."; }
					else if (checkquest(9162) >= 0 || checkquest(9164) >= 0) {
						mes .@n$;
						mes "I warned you not to give in";
						mes "to the sweet smells of the ^4AA02CSatay^000000."; }	
					next;
					mes .@n$;
					mes "Our tribe is short on food";
					mes "supplies so we can't give out more";
					mes "of our ^4AA02CSatay^000000. But there's a rumor";
					mes "that the restaurant owner in";
					mes "Dewata Island is making and";
					mes "selling their own ^4AA02CSatay^000000.";
					next;
					mes .@n$;
					mes "It is not as tasty as our tribe's";
					mes "recipe, but this is an urgent task.";
					mes "Just find and deliver it.";
					close;
				case 2:
					if (checkquest(9158) >= 0) {
						mes .@n$;
						mes "Our tribe warriors come to mind";
						mes "to deliver the food to share ^4AA02CSatay^000000";
						mes "with warriors in the village.";
					} else if (checkquest(9160) >= 0) {
						mes .@n$;
						mes "The second person to deliver the";
						mes "^4AA02CSatay^000000 to is someone who stays";
						mes "across the river.";
						next;
						mes .@n$;
						mes "That is the ^0000FFTribe Manager^000000.";
						mes "Please deliver it to him before it cools down.";
					} else if (checkquest(9162) >= 0) {
						mes .@n$;
						mes "The third person to deliver the";
						mes "^4AA02CSatay^000000 to is the ^0000FFGatekeeper";
						mes "of Krakatau Volcano^000000.";
						mes "Please deliver it to him before it cools down.";
					} else if (checkquest(9164) >= 0) {
						mes .@n$;
						mes "The last person to deliver the";
						mes "^4AA02CSatay^000000 to is the ^0000FFBorobudur";
						mes "Temple Manager^000000, who is in";
						mes "^C35817Dewata Island^000000.";
						mes "Please deliver it to him before it cools down.";
						close; }
					close;
				case 3:
					mes .@n$;
					mes "Alright! Deliver it right now!";
					close;
			}
		} else if (checkquest(9159) >= 0) {
			mes .@n$;
			mes "Ah, the next person whom I want";
			mes "the ^4AA02CSatay^000000 delivered to is someone";
			mes "who stays across from the river,";
			mes "the ^0000FFTribe Manager^000000.";
			next;
			mes .@n$;
			mes "To this end, I will give you 2";
			mes "more servings of ^4AA02CSatay^000000.";
			next;
			mes .@n$;
			mes "If you are attracted by the aroma";
			mes "of the ^4AA02CSatay^000000, you may eat one.";
			mes "But if you eat more you won't be";
			mes "able to share ^4AA02CSatay^000000 with our friends.";
			changequest 9159,9160;
			getitem 11533,2;
			close; }
		else if (checkquest(9160) >= 0) goto chiefrequest;
		else if (checkquest(9161) >= 0) {
			mes .@n$;
			mes "Oh, you delivered it already?";
			mes "The third person to deliver the";
			mes "^4AA02CSatay^000000 to is the ^0000FFGatekeeper of Krakatau Volcano^000000.";
			next;
			mes .@n$;
			mes "I'll give you 2 more servings";
			mes "of ^4AA02CSatay^000000 for this delivery.";
			next;
			mes .@n$;
			mes "And just like before, don't give";
			mes "in to the smell and try not to eat the ^4AA02CSatay^000000.";
			changequest 9161,9162;
			getitem 11533,2;
			close; }
		else if (checkquest(9162) >= 0) goto chiefrequest;
		else if (checkquest(9163) >= 0) {
			mes .@n$;
			mes "Oh, you delivered it!";
			mes "Last person to deliver ^4AA02CSatay^000000 to is";
			mes "the ^0000FFBorobudur Temple Manager^000000, who is";
			mes "on ^C35817Dewata Island^000000.";
			next;
			mes .@n$;
			mes "I will give you 2 more ^4AA02CSatay^000000.";
			next;
			mes .@n$;
			mes "And just like before, don't give";
			mes "in to the smell and try not to eat the ^4AA02CSatay^000000.";
			changequest 9163,9164;
			getitem 11533,2;
			close; }
		else if (checkquest(9164) >= 0) goto chiefrequest;
		else if (checkquest(9165) >= 0) {
			mes .@n$;
			mes "Oh, you delivered it!";
			mes "You've done good work.";
			mes "It has been a good time for";
			mes "all of us to share and enjoy";
			mes "this happy occasion together.";
			mes "Thank you.";
			next;
			mes .@n$;
			mes "While you were on the way back";
			mes "from delivering the ^4AA02CSatay^000000,";
			mes "the ^4AA02CJaty Crown^000000 has been made.";
			mes "Its ambience and radiance make it a";
			mes "truly flawless crown.";
			next;
			mes .@n$;
			mes "Also, you brought more than enough";
			mes "materials, so after making the ^4AA02CJaty";
			mes "Crown^000000 we were able to craft a";
			mes "similar one for you to keep.";
			next;
			mes .@n$;
			mes "It's not the same as the original,";
			mes "but it has its own specialty. It is";
			mes "my reward to thank you for what you";
			mes "have done.";
			next;
			mes .@n$;
			mes "Made with our tribe's secret";
			mes "marinade, try the ^4AA02CSatay^000000.";
			mes "It was made with all our heart";
			mes "especially for you, but don't";
			mes "forget to share it with friends.";
			next;
			mes .@n$;
			mes "You've done good work.";
			mes "Whatever you do in the future, I";
			mes "wish for you to have a life which";
			mes "is full of fortune and joy";
			mes "As Chief of the ^C35817Jaty Tribe^000000, I wish";
			mes "you the best of luck!!";
			set dewata_legend,6;
			erasequest 9165;
			getitem 11533,5;
			getitem 18520,1;
			close; }
		mes .@n$;
		mes "With your support I am not";
		mes "worried about creating the";
		mes "^4AA02CJaty Crown^000000. I really appreciate it.";
		next;
		mes .@n$;
		mes "A delightful day like today should";
		mes "be celebrated. Don't you think?";
		mes "So I prepared to sample the";
		mes "special food of our tribe, called ^4AA02CSatay^000000.";
		next;
		mes .@n$;
		mes "But, this ^4AA02CSatay^000000 is too tasty for";
		mes "just the two of us to share, so we";
		mes "would like to share it with people";
		mes "out in the village.";
		next;
		mes .@n$;
		mes "What do you think?";
		mes "In order to share news that";
		mes "the ^4AA02CJaty Crown^000000 is being";
		mes "sucessfully crafted, and to share";
		mes "the delicious ^4AA02CSatay^000000 with our";
		mes "friends, I need your help.";
		next;
		mes .@n$;
		mes "Are you up for a short delivery job?";
		next;
		if(select("Of course, I can help:Sorry, I am too busy to help.")==2) {
			mes .@n$;
			mes "I believed you would definitely help me...";
			mes "It's a little disappointing.";
			mes "If you ever change your mind";
			mes "come speak with me again.";
			close; }
		mes .@n$;
		mes "Oh!, I knew you'd help.";
		mes "Our tribe's warriors come to my";
		mes "mind before we share with anyone else.";
		mes "Please share ^4AA02CSatay^000000 with the";
		mes "warriors in the village.";
		next;
		mes .@n$;
		mes "For the moment I will give you 2 ^4AA02CSatay^000000.";
		next;
		mes .@n$;
		mes "You may be tempted by the aroma";
		mes "of our ^4AA02CSatay^000000, and you may eat one.";
		mes "But if you eat more than that you won't";
		mes "be able to share the ^4AA02CSatay^000000";
		mes "with our village friends.";
		setquest 9158;
		getitem 11533,2;
		close;
	} else if(dewata_legend == 6) {
		mes .@n$;
		mes "You've done good work.";
		mes "Whatever you do in the future, I";
		mes "wish for you to have a life which";
		mes "is full of fortune and joy.";
		mes "As Chief of the ^C35817Jaty Tribe^000000, I wish";
		mes "you the best of luck!!";
		close; }
	mes .@n$;
	mes "I am the leader of this ^0000FFPaiko^000000 tribe.";
	close;
}

// NPC - Sage Kasyapa
//============================================================

dew_in01,22,48,3	script	Sage Kasyapa#dew_	541,{

	if(dewata_legend == 2 || dewata_legend == 3) {
		mes "[Sage Kasyapa]";
		mes "Instead of talking to me, why";
		mes "don't you talk to our tribe's";
		mes "leader, ^0000FFChief Paiko^000000?";
		close;
	} else if(dewata_legend == 4) {
		if (checkquest(9155) >= 0) {
			mes "[Sage Kasyapa]";
			mes "I heard you could help making";
			mes "a crown for our tribe leader.";
			mes "You will certainly be a big";
			mes "help to us... I trust my";
			mes "own eyes and the";
			mes "sparking light...";
			next;
			mes "[Sage Kasyapa]";
			mes "The symbol of the Dayak Tribe";
			mes "and a famous mystical creature.";
			mes "Find ^FF000015 ^4AA02CCendrawasih Feathers^000000";
			mes "and bring them to ^0000FFChief Paiko^000000.";
			close;
		} else if (checkquest(9156) >= 0) {
			mes "[Sage Kasyapa]";
			mes "With the feathers that you have";
			mes "brought, creating a ^4AA02CJaty Crown^000000 is";
			mes "going much more smoothly.";
			mes "Go see ^0000FFChief Paiko^000000.";
			close;
		} else if (checkquest(9157) >= 0) {
			mes "[Sage Kasyapa]";
			mes "There is something";
			mes "I wish to give to you";
			mes "as a reward for your help.";
			mes "Please, it would honor us if you would take it.";
			next;
			specialeffect2 EF_PNEUMA;
			mes "[Sage Kasyapa]";
			mes "The reason I asked you to embark";
			mes "on this important mission is";
			mes "because of this feather.";
			mes "Handed down from generation to";
			mes "generation, the legendary origin of";
			mes "the crown is this feather...";
			next;
			mes "[Sage Kasyapa]";
			mes "I saw this feather begin to shine";
			mes "when you came here.";
			mes "I knew you were a person who";
			mes "would endeavour to help us.";
			mes "On behalf of my people,";
			mes "I give my thanks.";
			next;
			mes "[Sage Kasyapa]";
			mes "Also, the feather you received";
			mes "isn't just valuable on it's own,";
			mes "it also is an acknowledgment from our tribe.";
			next;
			mes "[Sage Kasyapa]";
			mes "Like ^C35817Krakatau Volcano^000000, when you";
			mes "venture into dangerous areas like";
			mes "that, if you display this feather,";
			mes "you can get help from the tribe.";
			mes "Anyway, I really thank you.";
			set dewata_legend,5;
			erasequest 9157;
			getitem 6406,1;
			close; }
		mes "[Sage Kasyapa]";
		mes "I've been waiting for you.";
		mes "Our tribe's leader has a favor";
		mes "to ask of you.";
		mes "Please talk to ^0000FFChief Paiko^000000.";
		close;
	} else if(dewata_legend >= 5) {
		mes "[Sage Kasyapa]";
		mes "Also, the feather you received";
		mes "isn't just valuable on it's own,";
		mes "it also is an acknowledgment from our tribe.";
		next;
		mes "[Sage Kasyapa]";
		mes "Like ^C35817Krakatau Volcano^000000, when you";
		mes "venture into dangerous areas like";
		mes "that, if you display this feather";
		mes "you can get help from the tribe.";
		mes "Anyway, I really thank you.";
		close; }
	mes "[Sage Kasyapa]";
	mes "Your earnest expression tells me";
	mes "that you have something to say";
	mes "you might as well tell me what it is.";
	next;
	if(select("I overheard talk about a crown...:Just looking for the gift shop.")==2) {
		emotion e_hmm,0,"Tribal Chief Paiko#dew_";
		mes .@n$;
		mes "Really?";
		mes "It looked as if your eyes";
		mes "wanted to say something.";
		close; }
	mes "[Sage Kasyapa]";
	mes "Oh, you heard about the crown, eh?";
	mes "Ah, this old man's got loose lips.";
	mes "We should have used a little more";
	mes "discretion...";
	next;
	select("Anything I can do to help?");
	mes "[Sage Kasyapa]";
	mes "I can see in your eyes";
	mes "that you are a trustworthy sort... but...";
	next;
	specialeffect EF_PNEUMA;
	mes "- There is a brief twinkling";
	mes "of light. All of a sudden ^0000FFKasyapa^000000";
	mes "seems taken aback. -";
	next;
	mes "[Sage Kasyapa]";
	mes "Ah, the feather......!";
	mes "Instead of talking to me, why don't";
	mes "you talk to our tribe's leader,";
	mes "^0000FFPaiko^000000?";
	set dewata_legend,2;
	close;
}

// NPC - Palm Tree
//============================================================

-	script	Palm Tree	-1,{

	if (checkquest(5039) >= 0 || checkquest(5046) >= 0 || checkquest(5048) >= 0 ||  checkquest(5050) >= 0) {
		if ((checkquest(5039) >= 0) && countitem(6402) > 59 || (checkquest(5046) >= 0 && countitem(6402) > 19) || (checkquest(5048) >= 0 && countitem(6402) > 29) || (checkquest(5050) >= 0 && countitem(6402) > 39)) {
			mes "- The palm tree denies your greedy hands. -";
			close; }
	mes "There's palm tree.";
	mes "You can kick or shake it.";
	mes "What do you want to do?";
	next;
	switch(select("Shake the tree:Kick the tree")) {
		case 1:
			specialeffect EF_HITLINE2;
			mes "You shake the palm tree.";
			next;
			mes "... ... ...";
			next;
			set .@palm_rand,rand(1,20);
			if (.@palm_rand > 0 && .@palm_rand < 5) {
				set .@pstone,rand(1,3);
				if (.@pstone == 1) {
					mes "As you shake the palm tree like a";
					mes "polaroid picture...";
					mes "a ^FF0000stone^000000 falls out.";
				} else if (.@pstone == 2) {
					mes "As you shake the palm tree";
					mes "enough to move its branchs...";
					mes "a ^FF0000Stone^000000 falls out.";
				} else if (.@pstone == 3) {
					mes "As you shake the palm tree like";
					mes "a crazed Alchemist...";
					mes "a ^FF0000Stone^000000 falls out."; }
				getitem 7049,1;
			} else if (.@palm_rand == 13 || .@palm_rand == 12) {
				if(getequipid(EQI_HEAD_TOP) == 5009) {
					mes "- Something smashes down on your";
					mes "head, right where that soft spot";
					mes "is, but it's ok, you're safe!";
					mes "'cuz you already equipped ^0000FFSafety Helmet^000000. -";
					close2;
					specialeffect EF_BASH;
					initnpctimer;
					disablenpc "Palm Tree#"+strnpcinfo(2);
					end; }	
				mes "As you shake the palm tree with";
				mes "wreckless abandon...";
				mes "something smashes down on your";
				mes "head, right where that soft spot";
				mes "is, $#*@! that's a one in a million shot.";
				close2;
				initnpctimer;
				disablenpc "Palm Tree#"+strnpcinfo(2);		
				warp "dew_fild01",371,211;
				percentheal -10,0;
				end;
			} else if (.@palm_rand >= 5 && .@palm_rand < 9) {
				set .@pleaf,rand(1,3);
				if (.@pleaf == 1) {
					mes "As you shake the palm tree like a";
					mes "salt shaker...";
					mes "a ^FF0000Great Leaf^000000 falls out.";
				} else if (.@pleaf == 2) {
					mes "As you shake the palm tree with";
					mes "furious violence...";
					mes "a ^FF0000Great Leaf^000000 falls out.";
				} else if (.@pleaf == 3) {
					mes "As you shake the palm tree";
					mes "enough to move its branchs...";
					mes "a ^FF0000Great Leaf^000000 falls out."; }
				getitem 7198,1;
			} else if (.@palm_rand >= 9 && .@palm_rand < 12) {
				set .@pfruit,rand(1,6);
				if (.@pfruit == 1) {
					mes "Once shaking a palm tree";
					mes "an ^0000FFOil Palm Fruit^000000 falls out.";
					mes "- Fell in a Hurly-Burly.. -";
					mes "- Fell in a Hurly-Burly.. -";
				} else if (.@pfruit == 2) {
					mes "As you shake the palm tree with";
					mes "all of your strength...";
					mes "tons of ^0000FFOil Palm Fruit^000000 crashes down from the tree.";
				} else if (.@pfruit == 3) {
					mes "As you shake the palm tree like";
					mes "a disobedient child...";
					mes "an ^0000FFOil Palm Fruit^000000 falls out.";
				} else if (.@pfruit == 4) {
					mes "As you shake the palm tree";
					mes "enough to move its branchs...";
					mes "an ^0000FFOil Palm Fruit^000000 falls out.";
				} else if (.@pfruit == 5) {
					mes "Once shaking a palm tree";
					mes "an ^0000FFOil Palm Fruit^000000 falls out.";
				} else if (.@pfruit == 6) {
					mes "As you shake the palm tree like";
					mes "a crazed Alchemist...";
					mes "an ^0000FFOil Palm Fruit^000000 falls out."; }
				getitem 6402,rand(1,5);
			} else if (.@palm_rand > 13 && .@palm_rand < 17) {
				set .@pworm,rand(1,3);
				if (.@pworm == 1){
					mes "As you shake the palm tree like";
					mes "a disobedient child...";
					mes "a ^FF0000Worm Peeling^000000 falls out";
				} else if (.@pworm == 2) {
					mes "As you shake the palm tree like";
					mes "a crazed Alchemist...";
					mes "a ^FF0000Worm Peeling^000000 falls out.";
				} else if (.@pworm == 3) {
					mes "As you shake the palm tree with";
					mes "all of your strength...";
					mes "tons of ^FF0000Worm Peeling^000000 crashes down from the tree."; }	
				getitem 955,1;
			} else if (.@palm_rand >= 17 && .@palm_rand <= 19) {
				set .@pnothing,rand(1,3);
				if (.@pnothing == 1) {
					mes "As you shake the palm tree like";
					mes "a crazed Alchemist...";
					mes "but nothing happens.";
				} else if (.@pnothing == 2) {
					mes "As you shake the palm tree";
					mes "with wreckless abandon...";
					mes "but nothing happens.";
				} else if (.@pnothing == 3) {
					mes "As you shake the palm tree";
					mes "enough to move its branchs...";
					mes "but nothing happens.";
				}
			}
			close2;
			specialeffect EF_BASH;
			initnpctimer;
			disablenpc "Palm Tree#"+strnpcinfo(2);
			end;
		case 2:
			specialeffect EF_BASH;
			mes "You kick the palm tree swiftly with";
			mes "all your might.";
			next;
			mes "... ... ...";
			next;
			set .@palm_rand,rand(1,20);
			if (.@palm_rand > 0 && .@palm_rand < 5) {
				set .@pstone,rand(1,3);
				if (.@pstone == 1) {
					mes "As you give the palm tree";
					mes "a big boot...";
					mes "a ^FF0000Stone^000000 falls out.";
				} else if (.@pstone == 2) {
					mes "As you give the palm tree";
					mes "a strong kick like a scorned";
					mes "woman...";
					mes "a ^FF0000stone^000000 falls out.";
				} else if (.@pstone == 3) {
					mes "As you give the palm tree";
					mes "a good'ole football punt...";
					mes "a ^FF0000stone^000000 falls out."; }
				getitem 7049,1;
			} else if (.@palm_rand == 13 || .@palm_rand == 12) {
				if(getequipid(EQI_HEAD_TOP) == 5009) {
					mes "- Something smashes down on your";
					mes "head, right where that soft spot";
					mes "is, but it's ok, you're safe!";
					mes "'cuz you already equipped ^0000FFSafety Helmet^000000. -";
					close2;
					specialeffect EF_BASH;
					initnpctimer;
					disablenpc "Palm Tree#"+strnpcinfo(2);
					end; }
				mes "As you shake the palm tree with";
				mes "wreckless abandon...";
				mes "something smashes down on your";
				mes "head, right where that soft spot";
				mes "is, $#*@! that's a one in a million shot.";
				close2;
				initnpctimer;
				disablenpc "Palm Tree#"+strnpcinfo(2);		
				warp "dew_fild01",371,211;
				percentheal -10,0;
				end;
			} else if (.@palm_rand >= 5 && .@palm_rand < 9) {
				set .@pleaf,rand(1,3);
				if (.@pleaf == 1) {
					mes "Once kicking a palm tree";
					mes "with all power";
					mes "a ^FF0000Great Leaf^000000 falls out.";
				} else if (.@pleaf == 2) {
					mes "As you give the palm tree";
					mes "a good'ole football punt...";
					mes "a ^FF0000Great Leaf^000000 falls out.";
				} else if (.@pleaf == 3) {
					mes "As you give the palm tree";
					mes "a quick kick to it's";
					mes "proverbial shin...";
					mes "a ^FF0000Great Leaf^000000 falls out."; }	
				getitem 7198,1;
			} else if (.@palm_rand >= 9 && .@palm_rand < 12) {
				set .@pfruit,rand(1,6);
				if (.@pfruit == 1) {
					mes "Once kicking a palm tree";
					mes "with all power...";
					mes "an ^0000FFOil Palm Tree^000000 falls out.";
					mes "- Fell in a Hurly-Burly.. -";
					mes "- Fell in a Hurly-Burly.. -";
				} else if (.@pfruit == 2) {
					mes "As you give the palm tree";
					mes "a quick kick to it's";
					mes "proverbial shin...";
					mes "an ^0000FFOil Palm Fruit^000000 falls out.";
				} else if (.@pfruit == 3) {
					mes "As you give the palm tree";
					mes "a good 'ole punt...";
					mes "tons of ^0000FFOil Palm Fruit^000000 crashs down";
					mes "from the tree.";
				} else if (.@pfruit == 4) {
					mes "As you give the palm tree";
					mes "a chuck norris kick...";
					mes "an ^0000FFOil Palm Fruit^000000 falls out.";	
				} else if (.@pfruit == 5) {
					mes "As you give the palm tree";
					mes "a strong dropkick...";
					mes "tons of ^0000FFOil Palm Fruit^000000 crashs down";
					mes "from the tree.";
				} else if (.@pfruit == 6) {
					mes "As you give the palm tree";
					mes "a good'ole football punt...";
					mes "an ^0000FFOil Palm Fruit^000000 falls out."; }	
				getitem 6402,rand(1,5);
			} else if (.@palm_rand > 13 && .@palm_rand < 17) {
				set .@pworm,rand(1,3);
				if (.@pworm == 1) {
					mes "As you give the palm tree";
					mes "a strong dropkick...";
					mes "a ^FF0000Worm Peeling^000000 falls out";
				} else if (.@pworm == 2) {
					mes "Once kicking a palm tree";
					mes "with all power...";
					mes "a ^FF0000Worm Peeling^000000 falls out.";
				} else if (.@pworm == 3) {
					mes "As you give the palm tree";
					mes "a chuck norris kick...";
					mes "tons of ^FF0000Worm Peeling^000000 crashes down from the tree."; }	
				getitem 955,1;
			} else if (.@palm_rand >= 17 && .@palm_rand <= 19) {
				set .@pnothing,rand(1,3);
				if (.@pnothing == 1) {
					mes "As you give the palm tree";
					mes "a good'ole roundhouse...";
					mes "but nothing happens.";
				} else if (.@pnothing == 2) {
					mes "As you give the palm tree";
					mes "a strong kick like a scormed";
					mes "woman...";
					mes "but nothing happens.";
				} else if (.@pnothing == 3) {
					mes "As you give the palm tree";
					mes "a thunderous kick...";
					mes "but nothing happens."; }
			}
			close2;
			specialeffect EF_BASH;
			initnpctimer;
			disablenpc "Palm Tree#"+strnpcinfo(2);
			end;
		}
	} else {
		mes "- There's a palm tree facing the cool wind. -";
		close; }
	end;

OnTimer60000:
	enablenpc "Palm Tree#"+strnpcinfo(2);
	stopnpctimer;
	end;
}
dew_fild01,209,201,0	duplicate(Palm Tree)	Palm Tree#drink01	844
dew_fild01,338,121,0	duplicate(Palm Tree)	Palm Tree#drink02	844
dew_fild01,247,62,0	duplicate(Palm Tree)	Palm Tree#drink03	844
dew_fild01,358,136,0	duplicate(Palm Tree)	Palm Tree#drink04	844
dew_fild01,276,73,0	duplicate(Palm Tree)	Palm Tree#drink05	844
dew_fild01,326,147,0	duplicate(Palm Tree)	Palm Tree#drink06	844
dew_fild01,278,63,0	duplicate(Palm Tree)	Palm Tree#drink07	844
dew_fild01,334,107,0	duplicate(Palm Tree)	Palm Tree#drink08	844
dew_fild01,301,88,0	duplicate(Palm Tree)	Palm Tree#drink09	844
dew_fild01,307,146,0	duplicate(Palm Tree)	Palm Tree#drink10	844
dew_fild01,314,72,0	duplicate(Palm Tree)	Palm Tree#drink11	844
dew_fild01,325,159,0	duplicate(Palm Tree)	Palm Tree#drink12	844
dew_fild01,320,68,0	duplicate(Palm Tree)	Palm Tree#drink13	844
dew_fild01,339,163,0	duplicate(Palm Tree)	Palm Tree#drink14	844
dew_fild01,345,88,0	duplicate(Palm Tree)	Palm Tree#drink15	844
dew_fild01,346,193,0	duplicate(Palm Tree)	Palm Tree#drink16	844
dew_fild01,344,71,0	duplicate(Palm Tree)	Palm Tree#drink17	844
dew_fild01,355,193,0	duplicate(Palm Tree)	Palm Tree#drink18	844
dew_fild01,358,93,0	duplicate(Palm Tree)	Palm Tree#drink19	844
dew_fild01,341,261,0	duplicate(Palm Tree)	Palm Tree#drink20	844
dew_fild01,70,196,0	duplicate(Palm Tree)	Palm Tree#drink21	844
dew_fild01,363,219,0	duplicate(Palm Tree)	Palm Tree#drink22	844
dew_fild01,289,302,0	duplicate(Palm Tree)	Palm Tree#drink23	844
dew_fild01,97,145,0	duplicate(Palm Tree)	Palm Tree#drink24	844
dew_fild01,299,107,0	duplicate(Palm Tree)	Palm Tree#drink25	844
dew_fild01,206,99,0	duplicate(Palm Tree)	Palm Tree#drink26	844
dew_fild01,355,113,0	duplicate(Palm Tree)	Palm Tree#drink27	844
dew_fild01,188,72,0	duplicate(Palm Tree)	Palm Tree#drink28	844
dew_fild01,278,136,0	duplicate(Palm Tree)	Palm Tree#drink29	844
dew_fild01,238,80,0	duplicate(Palm Tree)	Palm Tree#drink30	844
dew_fild01,258,128,0	duplicate(Palm Tree)	Palm Tree#drink31	844
dew_fild01,252,97,0	duplicate(Palm Tree)	Palm Tree#drink32	844
dew_fild01,240,125,0	duplicate(Palm Tree)	Palm Tree#drink33	844
dew_fild01,256,98,0	duplicate(Palm Tree)	Palm Tree#drink34	844
dew_fild01,225,117,0	duplicate(Palm Tree)	Palm Tree#drink35	844
dew_fild01,119,42,0	duplicate(Palm Tree)	Palm Tree#drink36	844
dew_fild01,219,121,0	duplicate(Palm Tree)	Palm Tree#drink37	844
dew_fild01,279,93,0	duplicate(Palm Tree)	Palm Tree#drink38	844
dew_fild01,209,137,0	duplicate(Palm Tree)	Palm Tree#drink39	844
dew_fild01,206,156,0	duplicate(Palm Tree)	Palm Tree#drink40	844

// NPC - Hideouts
//============================================================

dew_fild01,57,273,0	script	#hideout	45,1,1,{
	if(dewata_legend >= 1) {
		warp "dew_in01",16,34;
		end; }
	mes "- You hear a faint conversation going on inside -";
	next;
	mes "[Tribal Chief Paiko]";
	mes "Once again, I have failed to";
	mes "make the ^E66C2CJaty Crown^000000...";
	mes "I was sure that I could do it this time.";
	mes "Why won't it work?";
	next;
	mes "[Sage Kasyapa]";
	mes "The ^4AA02CJaty Crown^000000 has been known to";
	mes "have miraculous power since the";
	mes "time of the ancients.";
	mes "But it's been said that only those";
	mes "who've earned a tribal honor";
	mes "would be able to use it.";
	next;
	mes "[Tribal Chief Paiko]";
	mes "^0000FFKasyapa^000000!!";
	mes "Are you saying that even though I";
	mes "am the leader of our tribe, I have";
	mes "not yet received that honor?";
	next;
	mes "[Sage Kasyapa]";
	mes "Calm down, ^0000FFChief Paiko^000000...";
	mes "As the Great and Powerful Chief,";
	mes "you should be more than enough to qualify.";
	next;
	mes "[Sage Kasyapa]";
	mes "In my younger years I could have";
	mes "easily solved the problem, but this";
	mes "old man's mind cannot figure out";
	mes "what's missing.";
	next;
	mes "- The conversation trails off and";
	mes "you don't hear anymore. -";
	set dewata_legend,1;
	close;
}

dew_in01,16,31,0	script	#hidein	45,1,1,{
	if(dewata_legend != 3) {
		warp "dew_fild01",60,273;
		end; }
	mes "- Kasyapa and Chief Paiko begin";
	mes "talking as you are about to";
	mes "leave... -";
	next;
	mes "[Sage Kasyapa]";
	mes "I am unsure of what is missing, but";
	mes "that traveler could be a big help in";
	mes "creating the ^4AA02CJaty Crown^000000.";
	mes "Of this I am certain.";
	mes "The reason is...";
	next;
	mes "[Tribal Chief Paiko]";
	mes "What is the reason?";
	next;
	mes "[Sage Kasyapa]";
	mes "This ^E56717Cendrawasih Feather^000000 was owned";
	mes "by our first tribe leader when the";
	mes "crown was originally created.";
	mes "It was stored as a treasured";
	mes "heirloom of our tribe.";
	next;
	mes "[Sage Kasyapa]";
	mes "But when the traveler came near,";
	mes "this feather started to shine, and";
	mes "I kept thinking that this is not";
	mes "just a coincidence";
	mes "This person will be the key to";
	mes "assisting us to make the crown.";
	next;
	mes "[Tribal Chief Paiko]";
	mes "Could it happen for sure?";
	mes "If so, I will give everything";
	mes "to support them...";
	set dewata_legend,4;
	close;
}

// NPC - Mastersmith Gatti
//============================================================

dew_fild01,127,240,4	script	Gatti#weapon	813,{
	if (checkquest(5052) >= 0) {
		mes "[Gatti]";
		mes "Were you recognized by the natives?";
		next;
		mes "[Gatti]";
		mes "... ... ...";
		next;
		if (dewata_legend >= 5) {
			mes "[Gatti]";
			mes "Oh yes! Finally.";
			mes "You also possess a strong energy.";
			mes "Did you finally get the recognition from natives?";
			next;
			select("Yes.");
			mes "[Gatti]";
			mes "Oh! Just as I expected!";
			mes "I was so lucky to meet you.";
			mes "Everything is going so well.";
			next;
			mes "[Gatti]";
			mes "I know I have no right to ask";
			mes "you for this, but a meeting like";
			mes "this is destiny...";
			next;
			mes "[Gatti]";
			mes "- Gatti mumbles. -";
			next;
			mes "[Gatti]";
			mes "The weapon material that I so";
			mes "longed for is ^0000FFComodo Leather^000000.";
			mes "Please get me 100 of them.";
			next;
			mes "[Gatti]";
			mes "I'm so eager to make the weapon in";
			mes "the weapon blueprint.";
			next;
			mes "[Gatti]";
			mes "Please, before my passion fades out.";
			next;
			mes "[Gatti]";
			mes "Oh! And the Comodo Dragon is a very";
			mes "powerful monster, so please be careful.";
			changequest 5052,5053;
			close; }
		mes "[Gatti]";
		mes "Not yet, I guess. I'm asking around";
		mes "everywhere, but I couldn't find a";
		mes "way to get recognition from natives.";
		mes "I don't know when I can finish";
		mes "making this weapon.";
		next;
		mes "[Gatti]";
		mes "If you get recognition before";
		mes "me, please DON'T forget to visit";
		mes "me.";
		close;
	} else if (checkquest(5053) >= 0) {
		if (countitem(6403) > 99) {
			mes "[Gatti]";
			mes "By the looks of your walk, you must";
			mes "have brought me 100 Comodo Leather. Hand it over to me.";
			next;
			mes "- Gatti takes the Comodo Leather from you. -";
			erasequest 5053;
			set dewata_gatti,2;
			delitem 6403,100;
			close; }
		mes "[Gatti]";
		mes "Please be careful. The Comodo";
		mes "Dragon is very powerful monster.";
		mes "And don't forget to bring me 100";
		mes "Comodo Leather on your";
		mes "way back.";
		close; }	
	if (dewata_gatti == 0) {
		mes "[Gatti]";
		mes "Hey there, young man~ Are you from here?";
		next;
		select("No, I'm not.");
		mes "[Gatti]";
		mes "I'd like to ask you a question.";
		mes "Where is this place?";
		next;
		mes "- He seems to be asking for the";
		mes "Island name. -";
		next;
		input .@dewataname$;
		if (.@dewataname$ != "Dewata Island") {
			mes "[Gatti]";
			mes "Is that so... "+.@dewataname$+"? "+.@dewataname$+"... "+.@dewataname$+"...";
			mes ""+.@dewataname$+"...";
			next;
			mes "- The old man gave a deep sign of resignation and countinued speaking. -";
			next;
			mes "[Gatti]";
			mes "Damn... My plan is ruined. I";
			mes "invested all my fortunes to get";
			mes "there, but I failed. I can't do";
			mes "anything now, my boat has been";
			mes "wrecked.";
			next;
			mes "- The old man starts to cry. -";
			mes "- Feeling awkward, you quickly leave. -";
			close; }
		mes "[Gatti]";
		mes "This is Dewata Island? You're sure";
		mes "this is Dewata Island?";
		next;
		mes "[Gatti]";
		mes "Hahahahahahahahaha...!!!";
		next;
		mes "- The old man started to laugh";
		mes "like a crazy person after";
		mes "hearing the name of the island.";
		mes "You decide to ask a little bit later. -";
		set dewata_gatti,1;
		close;
	} else if (dewata_gatti == 1) {
		select("Well, sir...");
		mes "[Gatti]";
		mes "Cough... cough...";
		next;
		mes "[Gatti]";
		mes "Oh... Sorry~ Sorry. I was so happy";
		mes "that I finally arrived at Dewata";
		mes "Island.";
		next;
		mes "[Gatti]";
		mes "This is not a short story. Oh! I";
		mes "have to introduce myself first. I";
		mes "am Mastersmith Gatti, also an";
		mes "Adventurer.";
		next;
		mes "[Gatti]";
		mes "I found a mysterious weapon";
		mes "blueprint, but I don't remember";
		mes "exactly when I acquired it.";
		next;
		select("Weapon blueprint...?");
		mes "[Gatti]";
		mes "Yes! I traveled all around to find";
		mes "the materials for the weapon, but...";
		next;
		select("But what?");
		mes "[Gatti]";
		mes "I couldn't find the last material anywhere.";
		next;
		mes "[Gatti]";
		mes "It was about to give up, but there";
		mes "was some fine print on the";
		mes "blueprint saying that it could be";
		mes "found on Dewata Island.";
		next;
		mes "[Gatti]";
		mes "I don't know why somebody put such";
		mes "an important thing in fine print.";
		mes "Anyway, after reading that, I";
		mes "invested all my fortunes to find";
		mes "that Island.";
		next;
		select("Oh... Is that so?");
		mes "[Gatti]";
		mes "This island is strange. I arrived";
		mes "here a week ago, and everybody here";
		mes "has been avoiding me.";
		next;
		mes "[Gatti]";
		mes "Last week was so hard, but you";
		mes "saved me by telling me this is";
		mes "Dewata Island.";
		mes "Thank you for telling me, and";
		mes "thank you for passing here at";
		mes "just the right time.";
		next;
		select("Uh... No problem.");
		mes "[Gatti]";
		mes "Well... There was a little problem";
		mes "of my ship getting wrecked, but";
		mes "that's neither here nor there.";
		next;
		mes "[Gatti]";
		mes "Now that I found out this is";
		mes "Dewata Island, I should find";
		mes "the material for this great weapon.";
		next;
		mes "[Gatti]";
		mes "... ... ... ...";
		next;
		mes "[Gatti]";
		mes "Ah! The material that I am looking";
		mes "for is ^FF0000Comodo Leather^000000.";
		next;
		select("^FF0000Comodo Leather?^000000");
		mes "[Gatti]";
		mes "Yes. In the blueprint, it's";
		mes "written that only a few";
		mes "of the Dewata Natives are";
		mes "worthy enough to fight";
		mes "against the Comodo Dragon.";
		next;
		mes "[Gatti]";
		mes "In order to fight the Comodo";
		mes "Dragon, you have to get recognized";
		mes "by the natives. I assume it'll be";
		mes "hard to get the recognition.";
		next;
		select("Of course, it must be...");
		mes "[Gatti]";
		mes "Let me ask you a favor.";
		mes "If you get the recognition first,";
		mes "please don't forget to visit me.";
		setquest 5052;
		close;
	} else if (dewata_gatti == 2) {
		mes "[Gatti]";
		mes "Oh~ Look at this. How resilient.. So soft.";
		next;
		mes "[Gatti]";
		mes "Comodo Leather is the best material ever.";
		next;
		mes "[Gatti]";
		mes "Hmm... Like this?";
		next;
		mes "[Gatti]";
		mes "Or like this? Yes! This is the way!";
		next;
		mes "- Mastersmith Gatti enjoys";
		mes "processing the Leathers you've";
		mes "brought to make the weapon. -";
		mes "- You should wait a little while. -";
		set dewata_gatti,3;
		close;
	} else if (dewata_gatti == 3) {
		if (checkquest(5054) >= 0) {
			mes "[Gatti]";
			mes "You brought all the material already?";
			mes "You were also curious about the finished weapon? Haha.";
			next;
			mes "[Gatti]";
			mes ".... .... ....";
			next;
			if (countitem(6403)>99 && countitem(999)>19 && countitem(984)>9 && countitem(6404)) {
				mes "[Gatti]";
				mes "Great, we have enough. Wait a little.";
				next;
				specialeffect EF_REFINEOK;
				mes "[Gatti]";
				mes "I finished making the weapon. This";
				mes "is called ^FF0000Keris^000000, according to the blueprint.";
				next;
				mes "[Gatti]";
				mes "I keep finding new stuff when I";
				mes "lay my eyes on this blueprint.";
				next;
				mes "[Gatti]";
				mes "I've learned how to make the";
				mes "weapon, so ask me anytime if you need it.";
				set dewata_gatti,4;
				getitem 13067,1;
				delitem 6403,100;
				delitem 999,20;
				delitem 984,10;
				delitem 6404,1;
				erasequest 5054;
				close; }
			mes "[Gatti]";
			mes "Hmm... I need more of those.";
			mes "If my ship didn't get wrecked.";
			mes "I could made it on my own, but...";
			next;
			mes "- Gatti mumbles to himself. -";
			next;
			mes "[Gatti]";
			mes "100 Comodo Leather, 20 Steel,";
			mes "and 10 Oridecon are what I need.";
			next;
			mes "[Gatti]";
			mes "If you bring them all,";
			mes "I'll make the best weapon ever.";
			close; }
		select("Well... Gatti?");
		mes "[Gatti]";
		mes "Oh! Sorry, sorry! This leather is";
		mes "so interesting.";
		next;
		mes "[Gatti]";
		mes "I made a hilt out of the leather you brought me.";
		next;
		mes "[Gatti]";
		mes ".... .... .... ....";
		next;
		select("Hilt?");
		mes "[Gatti]";
		mes "You don't know what a hilt is?";
		mes "That's what you call the handle of a weapon.";
		next;
		mes "- Gatti shows a thing that looks like the handle of a weapon. -";
		next;
		mes "[Gatti]";
		mes "I tried making it like what's";
		mes "written in the blueprint, but";
		mes "I need more material.";
		next;
		select("Really?");
		mes "[Gatti]";
		mes ".... .... .... ....";
		next;
		mes "[Gatti]";
		mes "Yes... To be frank with you,";
		mes "I ruined a lot of them trying";
		mes "different things.";
		next;
		mes "[Gatti]";
		mes "I know this is alot to ask,";
		mes "but can you get me 100 more";
		mes "Comodo Leather, 20 Steel, and 10 Oridecon?";
		next;
		mes "[Gatti]";
		mes "I'll make you a best weapon ever.";
		next;
		mes "[Gatti]";
		mes "Oh! I almost forgot. Don't forget";
		mes "to bring the hilt that I just made you.";
		next;
		mes "[Gatti]";
		mes "A weapon must have a handle.";
		getitem 6404,1;
		setquest 5054;
		close;
	} else if (dewata_gatti >= 4) {
		mes "[Gatti]";
		mes "You're ^FF0000"+strcharinfo(0)+"^000000?";
		mes "So, how's the Keris that I made it for you?";
		next;
		switch(select("It's great!:I need another Keris.:Can I make it stronger?")) {
			case 1:
				mes "[Gatti]";
				mes "Yes, yes of course it's great.";
				mes "I made that weapon so it must be good.";
				close;
			case 2:
				if (countitem(6404) == 1) {
					if (countitem(6403)>69 && countitem(999)>19 && countitem(984)>9) {
						mes "[Gatti]";
						mes "You have all materials.";
						mes "Wait just a little.";
						next;
						specialeffect EF_REFINEOK;
						mes "[Gatti]";
						mes "Here is the Keris! Ask me anytime.";
						getitem 13067,1;
						delitem 6404,1;
						delitem 6403,70;
						delitem 999,20;
						delitem 984,10;
						close; }
					mes "[Gatti]";
					mes "You only have a Hilt. You'll need";
					mes "to bring me 10 Oridecon, 20 Steel,";
					mes "and 70 Comodo Leather.";
					next;
					mes "[Gatti]";
					mes "If you bring them, I'll make a";
					mes "brand new Keris.";
					close;
				} else if (countitem(6404) > 1) {
					mes "[Gatti]";
					mes "You already have 1 Hilt in your inventory. What do you need 1 more Hilt for?";
					close;
				} else if (countitem(6403)>49 && countitem(7201)) {
					mes "[Gatti]";
					mes "You bought the material for the";
					mes "Hilt. I'll make it right away.";
					next;
					mes "[Gatti]";
					mes "Put in here, and process it like this...";
					next;
					mes "[Gatti]";
					mes "Here you go. I can make a Keris if";
					mes "you bring me 10 Oridecon, 20 Steel,";
					mes "and 70 Comodo Leather.";
					getitem 6404,1;
					delitem 6403,50;
					delitem 7201,1;
					close; }
				mes "[Gatti]";
				mes "You want me to make one more";
				mes "Keris for you? In that case I";
				mes "need a Hilt, 50 Comodo Leather,";
				mes "and 1 Log. These are what I need to make a Hilt.";
				close;
			case 3:
				mes "[Gatti]";
				mes "So, you want to enchant your";
				mes "weapon? The weapon gets broken";
				mes "from time to time during the";
				mes "process, but it doesn't";
				mes "happen that often.";
				next;
				mes "[Gatti]";
				mes "In another case, the enchantment";
				mes "may be applied to an item which";
				mes "you didn't mean to enchant.";
				mes "So just bring ^5555ffONE Weapon^000000";
				mes "if you want the enchantment to be safe.";
				next;
				switch(select("Please enchant the weapon.","Things you need to know.","Maybe next time.")) {
					case 1:
						mes "[Gatti]";
						mes "^FFA500To enchant your Weapon^000000:";
						mes "- 100,000 Zeny";
						mes "- ^FF0000Weapon will lose refines and cards^000000.";
						next;
						if (countitem(13067) > 1) {
							mes "[Gatti]";
							mes "Please come back with just ONE equipment to be enchanted.";
							close; }
						mes "[Gatti]";
						mes "You want to enchant your";
						mes "^FF0000" + getitemname(13067) + "^000000?";
						mes "The cost of this work is ^0000FF100,000^000000 Zeny.";
						next;
						if(select("Do it, please!:May be next time..")==2) close;
						if (Zeny < 100000) {
							mes "[Gatti]";
							mes "I'd like to go ahead with this enchant attempt, but you're missing a few things.";
							mes "You sure that you have enough Zeny.";
							close; }
						delitem 13067,1;
						set Zeny, Zeny-100000;
						close2;
						specialeffect2 EF_REPAIRWEAPON;
						progressbar "FFFF00",3;
						set .@Enchant_3,rand(4760,4802);
						set .@Enchant_4,rand(4760,4802);
						set .@ERate, rand(100);
						if (.@ERate < 14) { // -- 14% Break chance
							mes "[Gatti]";
							mes "Wah! I am so sorry, but it failed.";
							mes "However, I am completely innocent.";
							mes "This is your luck, and it was destined by god, okay?";
							mes "Don't be so disappointed, and try next time.";
							next;
							mes "[Gatti]";
							mes "I wish you good luck next time!";
							close;
						} else {
							getitem2 13067,1,1,0,0,0,0,.@Enchant_3,.@Enchant_4;
							mes "[Gatti]";
							mes "Great, your weapon received the enchant.";
							mes "It looks pretty well done. Congratulations!";
							next;
							mes "[Gatti]";
							mes "See you again, adventurer!";
							close; }
					case 2:
						mes "[Gatti]";
						mes "If you want to do it, I'll";
						mes "have to tell you some cautionary";
						mes "things before enchanting the";
						mes "weapon.";
						next;
						mes "[Gatti]";
						mes "I need 1 weapon of level";
						mes "3 or 4, and maximum slot of 2.";
						mes "And 100,000 Zeny too.";
						mes "As you know, I don't have any";
						mes "money right now because my";
						mes "ship got wrecked.";
						next;
						mes "[Gatti]";
						mes "If you have a weapon that is";
						mes "refined or inserted with cards";
						mes "in your inventory which you";
						mes "don't want to enchant, it";
						mes "could get destroyed.";
						next;
						mes "[Gatti]";
						mes "Or its upgrades could get";
						mes "changed during the";
						mes "enchantment process.";
						next;
						mes "[Gatti]";
						mes "If you don't want that to";
						mes "happen, put the refined";
						mes "weapon elsewhere before the enchantment.";
						next;
						mes "[Gatti]";
						mes "Sometimes the enchantment";
						mes "fails. The weapon doesn't get";
						mes "destroyed every time you fail.";
						mes "However, you should know that";
						mes "the weapon gets destroyed from";
						mes "time to time.";
						close;
					case 3:
						mes "[Gatti]";
						mes "Whenever you want to enchant";
						mes "weapon, just bring me the";
						mes "weapon you want to enchant";
						mes "and 100,000 Zeny.";
						close;
				}
			}
		}
}
