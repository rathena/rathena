//===== rAthena Script =======================================
//= Terra Gloria - Illusion
//===== Description: =========================================
//= [Walkthrough Conversion]
//= Quest NPCs - Illusion series
//
//- Note: Probably missing some questinfo on Illusion of Vampire.
//===== Changelog: ===========================================
//= 1.0 Illusion of Moonlight initial release [crazyarashi]
//= 1.1 Script & function cleanup [Everade]
//= 1.2 Added Illusion of Vampire [Capuche]
//= 1.3 Added Illusion of Frozen [Capuche]
//= 1.4 Added Illusion of Turtle [Capuche]
//= 1.5 Added Illusion of Luanda [Capuche]
//= 1.6 Added Illusion of Underwater [Capuche]
//= 1.7 Added Illusion of Twins [Capuche]
//= 1.8 Added Illusion of Teddy Bear [Atemo]
//============================================================

//============================================================
//= Illusion of Moonlight
//============================================================
payon,164,229,5	script	Elder Sanyul#illusion_moonlight	1_F_ORIENT_04,{
	if (BaseLevel < 100) {
		mes "[ Sanyul ]";
		mes "Mm, I have a feeling something suspicious is about to happen.";
		mes "I wish you were stronger. Then, I would've been able to tell you about it.";
		next;
		mes "^4D4DFFYou must be Level 100 or above to perform this quest.^000000";
		close;
	}
	if (illusion_moonlight == 0) {
	OnStart:
		mes "[ Jagyeom ]";
		mes "This matter is out of our hands now.";
		mes "We can't let it keep happening like this.";
		next;
		mes "[ Sanyul ]";
		mes "Let's wait for ^0000FFMuyeon^000000 now.";
		mes "Her safety is more important than anything else.";
		next;
		select("Excuse me.");
		mes "[ Sanyul ]";
		mes "Hm? You're an adventurer.";
		mes "Did you happen to hear our conversation?";
		next;
		mes "[ Sanyul ]";
		mes "I see.";
		mes "Maybe it's faith that you overheard us.";
		next;
		mes "[ Sanyul ]";
		mes "There's a cave near the Archer Village in the back of Payon.";
		mes "It's a haunted cave, so we've been preforming rituals and exorcism there regularly.";
		next;
		mes "[ Sanyul ]";
		mes "But the Nine-tailed foxes spirits are more enraged than we thought.";
		mes "Every time someone tries to preform a ritual to the fox beads, they get nightmares.";
		npctalk "It's as if the spirits were antagonized by them.","Elder Jagyeom#illusion_moonlight",bc_self;
		next;
		mes "[ Sanyul ]";
		mes "And this time, she's completely lost her mind and entered the cave.";
		mes "That's why we're worried about her.";
		next;
		select("Is it about Muyeon?");
		npctalk "Maybe we should send someone else.","Elder Jagyeom#illusion_moonlight",bc_self;
		mes "[ Sanyul ]";
		mes "Yes. She's the Soul Linker who performs the ritual regularly.";
		mes "We've asked a soldier to find her.";
		mes "They must be near the cave by now.";
		next;
		mes "[ Jagyeom ]";
		mes "Could you go check up ^0000FFMuyeon^000000 for us?";
		next;
		npctalk "Yes. could you?","",bc_self;
		if (select("Sure, I will:Sorry, I'm afraid of ghost.") == 2) {
			mes "[ Sanyul ]";
			mes "Huh? We didn't say anything about ghost. Or did we?";
			close;
		}
		mes "[ Jagyeom ]";
		mes "I hope the soldier will find her before she goes deep inside the ruined village.";
		next;
		mes "[ Jagyeom ]";
		mes "Please go to the cave and see if Muyeon and the soldier are outside already.";
		mes "A young scholar followed the soldier, but she doesn't seem reliable at all.";
		next;
		mes "[ Jagyeom ]";
		mes "Talk to the scholar, maybe he could give you an information on the situation.";
		illusion_moonlight = 1;
		setquest 7776;
		close;
	}
	if (illusion_moonlight == 1) {
		mes "[ Jagyeom ]";
		mes "I hope the soldier will find her before she goes deep inside the ruined village.";
		next;
		mes "[ Jagyeom ]";
		mes "Please go to the cave and see if Muyeon and the soldier are outside already.";
		mes "A young scholar followed the soldier, but she doesn't seem reliable at all.";
		next;
		mes "[ Jagyeom ]";
		mes "Talk to the scholar, maybe he could give you an information on the situation.";
		close;
	}
	mes "[ Sanyul ]";
	mes "I hope everything will be okay.";
	mes "Huh? I was talking about the cave in the back.";
	mes "I'm worried about what's happening there.";
	close;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"BaseLevel >= 100 && illusion_moonlight < 1";
	end;
}

payon,167,229,3	script	Elder Jagyeom#illusion_moonlight	4_M_HUOLDARMY,{
	if (BaseLevel < 100) {
		mes "[ Jagyeom ]";
		mes "I hope everything will be okay.";
		mes "Seeing that you're an adventurer, I assume you're familiar with the ^0000FFPayon Cave^000000.";
		mes "Be careful, something bad is happening inside.";
		next;
		mes "^0000FFYou must be Level 100 or above to perform this quest.";
		close;
	}
	if (illusion_moonlight == 0) {
		doevent "Elder Sanyul#illusion_moonlight::OnStart";
		end;
	}
	if (illusion_moonlight == 1) {
		mes "[ Sanyul ]";
		mes "Please go to the cave's entrance in the Archer Village.";
		mes "Ask the young scholar there about Muyeon's whereabouts.";
		close;
	}
	mes "[ Jagyeom ]";
	mes "Maybe it's time we leave things to the younger generations.";
	mes "There is nothing we old folk could do.";
	close;
}

pay_arche,48,137,4	script	Young Scholar#ill_moon_arch	4_F_03,{
	if (illusion_moonlight == 0) {
		npctalk "Why aren't they coming out already...","",bc_self;
		end;
	}
	if (illusion_moonlight == 1) {
		npctalk "Why are they still not coming out...","",bc_self;
		mes "[ Young Scholar ]";
		mes "Ah, today must be my lucky day!";
		mes "An adventurer showed up, just when I needed one!";
		next;
		mes "[ Young Scholar ]";
		mes "Excuse me.";
		mes "I've heard adventurers do many things for others. Is that true?";
		next;
		select("It is, but I'm pretty busy for now.:Decline.");
		mes "[ Young Scholar ]";
		mes "...Oh, I see.";
		mes "You must be busy.";
		mes "I'm sorry I bothered you.";
		mes "By the way, what brings you here?";
		next;
		select("Have you seen someone named Muyeon?");
		mes "[ Young Scholar ]";
		mes "Muyeon? Do you mean Muyeon the Soul Linker?";
		mes "Well, technically, she's still an apprentice, but that's not important.";
		next;
		mes "[ Young Scholar ]";
		mes "I'm waiting for her right now.";
		mes "She ran into the cave, as if she was possessed by something.";
		next;
		mes "[ Young Scholar ]";
		mes "Junghee? I mean, a soldier followed her in, but neither of them came out yet.";
		mes "I was debating if I should go after them.";
		next;
		mes "[ Young Scholar ]";
		mes "I hope nothing bad happens to those two.";
		cloakoffnpcself( "Payon Soldier#ill_moon_arch" );
		cloakoffnpcself( "Muyeon#ill_moon_arch" );
		sleep2 750;
		npctalk "There they are! They look fine!","Young Scholar#ill_moon_arch",bc_self;
		sleep2 1500;
		npctalk "Ugh, I don't want to train anymore!","Muyeon#ill_moon_arch",bc_self;
		npctalk "...","Payon Soldier#ill_moon_arch",bc_self;
		next;
		mes "[ Muyeon ]";
		mes "Chunghae, what are you doing out here?";
		npctalk "I was worried about you..","",bc_self;
		next;
		mes "[ Muyeon ]";
		mes "You were worried about me, but this is as far you were willing to follow me?";
		mes "Forget it. No matter how miserable I am, I don't need your help!";
		sleep2 500;
		npctalk "Now, that's enough.","Payon Soldier#ill_moon_arch",bc_self;
		sleep2 500;
		npctalk "Th-this is unfair...","",bc_self;
		next;
		npctalk "Bye!","Muyeon#ill_moon_arch",bc_self;
		mes "[ Muyeon ]";
		mes "Ah, I'm not going to do this anymore. Tell that to the old geezers!";
		next;
		npctalk "Sigh. I'll go after her. Talk to the Elders, will you?","Payon Soldier#ill_moon_arch",bc_self;
		sleep2 1500;
		cloakonnpcself( "Payon Soldier#ill_moon_arch" );
		cloakonnpcself( "Muyeon#ill_moon_arch" );
		mes "[ Young Scholar ]";
		mes "That's....!";
		mes "She left without telling us what happened.";
		next;
		mes "[ Young Scholar ]";
		mes "Ah, Junghee!";
		mes "By the way adventurer, weren't you looking for Muyeon?";
		next;
		select("I guess I have to leave now.");
		mes "[ Young Scholar ]";
		mes "Muyeon must have gone to the ^0000CDDetached Payon Palace.^000000";
		mes "I'm going there do you want to come with me?";
		next;
		illusion_moonlight = 2;
		erasequest 7776;
		setquest 7777;
        if (select("Go with him.:Go separately.") == 2) {
			mes "[ Young Scholar ]";
			mes "Muyeon must have gone to the ^0000CDDetached Payon Palace.^000000";
			mes "Why don't you go talk to her?";
			mes "I'll talk to the Elders.";
			close;
        }
		mes "[ Young Scholar ]";
		mes "Then let's go to the ^0000CDDetached Payon Palace.^000000";
        close2;
        warp "payon",105,320;
        end;
	}
	if (illusion_moonlight == 2) {
		mes "[ Young Scholar ]";
		mes "Muyeon must have gone to the ^0000CDDetached Payon Palace.^000000";
		mes "Why don't you go talk to her?";
		mes "I'll talk to the Elders.";
		close;
	}
	if (illusion_moonlight < 6) {
		mes "[ Young Scholar ]";
		mes "Legend says a nine-tailed fox gained enlightment and became a sacred creature, and that Moonlight Flowers have descended from her.  I think it's a story worth looking into.";
		close;
	}
	mes "[ Young Scholar ]";
	mes "Let's go investigate the ruined village!";
	mes "Would you like to come with me?";
	next;
	if (select("Go with him.:Go separately.") == 2) {
		mes "[ Young Scholar ]";
		mes "I'll call Junghee, and we'll follow you soon.";
		close;
	}
	mes "[ Young Scholar ]";
	mes "Let's go!";
	close2;
	warp "pay_dun03",145,43;
	end;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 1";
	end;
}

pay_arche,44,133,7	duplicate(dummy_cloaked_npc)	Payon Soldier#ill_moon_arch	4_M_PAY_SOLDIER
pay_arche,46,135,5	duplicate(dummy_cloaked_npc)	Muyeon#ill_moon_arch	4_F_TAEKWON

payon_in03,33,95,3	script	Muyeon#ill_moon_pin	4_F_TAEKWON,{
	if (checkweight(25271,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "- You're carrying too many items to proceed with this quest. -";
		close;
	}
	if (illusion_moonlight < 2) {
		mes "[ Muyeon ]";
		mes "If you're looking for the teacher, she's in the other room.";
		close;
	}
	if (illusion_moonlight == 2) {
		.@elder$ = "Jagyeom#ill_moon_pin";
		.@scholar$ = "Young Scholar#ill_moon_pin";
		setpcblock PCBLOCK_ALL,true;
		npctalk "Whatever you say, I'm not doing it anymore.","",bc_self;
		sleep2 2500;
		npctalk "This is the third time I had nightmares. I can't take it anymore!","",bc_self;
		sleep2 1000;
		unittalk getcharid(3),"What nightmares?",bc_self;
		npctalk "What nightmares?",.@scholar$,bc_self;
		sleep2 2000;
		npctalk "Nightmares about about the foxes? Nine tails and Moonlight flowers?","",bc_self;
		sleep2 2000;
		npctalk "Those nightmares are just too horrifying. I don't want to experience it anymore.","",bc_self;
		sleep2 2000;
		npctalk "But we have no one else left to perform the ritual.",.@elder$,bc_self;
		sleep2 2000;
		npctalk "Everyone gave up after the first try. You did it three times.",.@elder$,bc_self;
		sleep2 2000;
		npctalk "Elder Jaegyom, nightmares weren't the only thing occurred to me this time.","",bc_self;
		sleep2 2000;
		npctalk "It was different from the other two times I performed the ritual.","",bc_self;
		sleep2 2000;
		npctalk "How different?",.@scholar$,bc_self;
		sleep2 2000;
		npctalk "...","",bc_self;
		sleep2 2000;
		npctalk "It felt as if the nightmares is happening in reality.","",bc_self;
		sleep2 2000;
		npctalk "What do you mean? You were only trying to give peace to the angered spirits of the nine tailed foxes.",.@elder$,bc_self;
		sleep2 2000;
		npctalk "What did you see in the cave?",.@elder$,bc_self;
		sleep2 2000;
		npctalk "I can't explain what I saw. You have to see it to believe it.","",bc_self;
		sleep2 2000;
		npctalk "We need someone strong to go in there, like that adventurer over there, should go in the cave.","",bc_self;
		illusion_moonlight = 3;
		completequest 7777;
		setquest 7778;
		setpcblock PCBLOCK_ALL,false;
		end;
	}
	if (illusion_moonlight == 3) {
		mes "[ Muyeon ]";
		mes "Okay, I'll tell you the story.";
		mes "The Payon Cave is used to be a part of a village that was buried under a landslide.";
		next;
		mes "[ Muyeon ]";
		mes "As you can guess many people were buried with it, and their spirits are hunting the cave.";
		next;
		mes "[ Muyeon ]";
		mes "Some of them were the nine-tailed foxes. The foxes anger is beyond normal.";
		mes "That's the reason we have been performing a ritual in regular basis.";
		next;
		mes "[ Muyeon ]";
		mes "But now the problem is,";
		mes "The foxes spirits are getting more resentful by time, and no one knows the reason why.";
		mes "Maybe the ritual is the reason they are angry, it's not working as we hoped it would.";
		next;
		mes "[ Muyeon ]";
		mes "And, every time I performed the ritual, I had nightmares about the resentful spirits and wailing nine-tailed foxes.";
		next;
		mes "[ Muyeon ]";
		mes "Soul Linkers communicates with the spirits for a living, Having nightmares is just occurs normally.";
		next;
		mes "[ Muyeon ]";
		mes "So when my first nightmare occurred, I thought it was under the same boat as the others.";
		mes "But now I know the difference, It also has nothing to do with my health.";
		next;
		mes "[ Muyeon ]";
		mes "Whatever it is the reason that agitates the spirits of the nine-tailed foxes.";
		mes "It drove me from sanity and sent me going to the ruined village.";
		next;
		mes "[ Muyeon ]";
		mes "And, I saw something.";
		mes "It's an image of another world, different from ours.";
		mes "We must shut that place down, so no one will be able to access it.";
		next;
		mes "[ Muyeon ]";
		mes "I have an uneasy feeling that a dreadful is going to take place.";
		mes "Or maybe it's already taking place..";
		next;
		mes "[ Muyeon ]";
		mes "The vague image I saw is indistinguishable from hell.";
		mes "I saw it after the last ritual that I did.";
		next;
		mes "[ Muyeon ]";
		mes "I beg of you, don't ask me to return doing that again.";
		mes "I'm not mentally strong enough to handle such nightmares.";
		next;
		mes "[ Muyeon ]";
		mes "Much less on what's taking place inside the cave.";
		next;
		mes "[ Muyeon ]";
		mes "If you want to go, you'll have to go alone and see it for yourself.";
		mes "I still carry the fox bead that I tried to purify. Let me know when you are ready.";
		illusion_moonlight = 4;
		completequest 7778;
		setquest 7779;
		close;
	}
	if (illusion_moonlight == 4) {
		mes "[ Muyeon ]";
		mes "Are you ready?";
		next;
		if (select("Yes.:Not yet.") == 2) {
			mes "[ Muyeon ]";
			mes "Let me know when you're ready.";
			close;
		}
		mes "[ Muyeon ]";
		mes "Okay, this fox bead is not completely purged yet.";
		mes "Place it in your hand.";
		next;
		mes "[ Muyeon ]";
		mes "Relax... and focus your mind on it ... open your mind to its energy.";
		close2;
		setpcblock PCBLOCK_ALL,true;
		npctalk "Wandering souls, listen and behold!","",bc_self;
		sleep2 250;
		specialeffect EF_PORTAL4;
		specialeffect EF_GROUNDSAMPLE;
		sleep2 1800;
		npctalk "Look at the other side of the Netherworld River.","",bc_self;
		sleep2 250;
		specialeffect EF_PORTAL5;
		specialeffect EF_QUAKEBODY2;
		for (.@i = 0; .@i < 4; .@i++) {
			cloakoffnpcself( "Nine Tail Spirit#ill_moon_" + .@i );
			specialeffect EF_REDBODY,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			specialeffect EF_QUAKEBODY2,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 250;
		}
		sleep2 1500;
		npctalk "Poor souls, cover your eyes and block your ears.","",bc_self;
		sleep2 150;
		specialeffect2 EF_DEVIL1;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_QUAKEBODY2,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		npctalk "Die!","Nine Tail Spirit#ill_moon_0",bc_self;
		sleep2 100;
		specialeffect2 EF_DEVIL6;
		sleep2 100;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_QUAKEBODY2,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		sleep2 150;
		npctalk "Die!","Nine Tail Spirit#ill_moon_1",bc_self;
		sleep2 1000;
		npctalk "Leave this realm.","",bc_self;
		sleep2 150;
		specialeffect2 EF_DEVIL10;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_QUAKEBODY2,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		npctalk "Die!","Nine Tail Spirit#ill_moon_2",bc_self;
		sleep2 150;
		specialeffect EF_BLUELINE;
		sleep2 150;
		npctalk "Die!","Nine Tail Spirit#ill_moon_3",bc_self;
		sleep2 700;
		npctalk "Unload your burden.","",bc_self;
		sleep2 150;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_MAP_GHOST,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		for (.@i = 0; .@i < 4; .@i++)
			npctalk "DIE!!!","Nine Tail Spirit#ill_moon_" + .@i,bc_self;
		sleep2 1200;
		specialeffect EF_BLUELINE;
		sleep2 500;
		specialeffect EF_SCREEN_QUAKE;
		sleep2 1200;
		npctalk "Fly to the other side of the river.","",bc_self;
		for (.@i = 0; .@i < 4; .@i++) {
			specialeffect EF_MADNESS_RED,AREA,"Nine Tail Spirit#ill_moon_" + .@i;
			sleep2 30;
		}
		for (.@i = 0; .@i < 4; .@i++) {
			npctalk "DIEEE!", "Nine Tail Spirit#ill_moon_" + .@i, bc_self;
			sleep2 50;
			specialeffect EF_SCREEN_QUAKE;
			sleep2 300;
		}
		sleep2 1000;
		for (.@i = 0; .@i < 4; .@i++) {
			npctalk "DIEEE!", "Nine Tail Spirit#ill_moon_" + .@i, bc_self;
			sleep2 100;
		}
		specialeffect2 EF_JUMPBODY1;
		sleep2 150;
		completequest 7779;
		setquest 7780;
		illusion_moonlight = 5;
		setpcblock PCBLOCK_ALL,false;
		warp "pay_dun03",145,43;
		end;
	}
	if (illusion_moonlight == 5) {
		mes "[ Muyeon ]";
		mes "Now you know what I've been through.";
		mes "If you want to look further into this, you'll have to visit the ruined village.";
		next;
		mes "[ Muyeon ]";
		mes "If you decide to do it, it'll make you one of us, very ecstatic. Probably because he is a fool.";
		close;
	}
	if (illusion_moonlight < 8) {
		mes "[ Muyeon ]";
		mes "If you're looking for the teacher, she's in the other room.";
		close;
	}
	if (illusion_moonlight == 8) {
		mes "[ Muyeon ]";
		mes "I see.";
		mes "So They've come true.";
		mes "You don't know why, do you?";
		next;
		mes "[ Muyeon ]";
		mes "Maybe it's because the walls between reality and dreams have collapsed.";
		mes "Otherwise, how could you go in and out of someone else's dream?";
		next;
		mes "[ Muyeon ]";
		mes "I know they're ^0000FFdreamt by the Moonlight Flowers.^000000";
		mes "I don't know how they've become reality. I doubt anyone knows, really.";
		next;
		mes "[ Muyeon ]";
		mes "As far as I remember, nothing like this has ever happened before. If we want to figure this out, we're on our own.";
		next;
		mes "[ Muyeon ]";
		mes "Well, I'll let Chunghae figure it out.";
		mes "Alright, then I'd better go get some rest.";
		next;
		mes "[ Muyeon ]";
		mes "Now that I know that those nightmares really originated from Moonlight Flowers, I feel better.";
		mes "I can sleep at last.";
		next;
		mes "[ Muyeon ]";
		mes "We won't need more rituals once we deal with the nightmares.";
		mes "Does this mean I'm free? Free at last!";
		mes "I don't even know how to thank you.";
		next;
		mes "[ Muyeon ]";
		mes "I've found this strange stones while I was there. It's not much,";
		mes "but maybe you can find an use for those?";
		mes "Thank you so much adventurer.";
		illusion_moonlight = 9;
		completequest 7788;
		getitem 25271,5;
		getexp 500000,500000;
		close;
	}
	mes "[ Muyeon ]";
	mes "Good luck investigating the phenomenon with Chunghae!";
	mes "Once the nightmares are gone, we won't need to perform the ritual anymore!";
	next;
	mes "[ Muyeon ]";
	mes "How can I be sure, you ask?";
	mes "I'm not sure. Heh heh.";
	mes "They might not go away completely.";
	mes "Who knows?";
	close;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 2";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 3";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 4";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 8";
	end;
}

payon_in03,30,96,5	script	Jagyeom#ill_moon_pin	4_M_HUOLDARMY,{
	if (illusion_moonlight == 2) {
		npctalk "Muyeon... If you can't do it, no one else can!","",bc_self;
		end;
	}
	if (illusion_moonlight == 3 || illusion_moonlight == 4) {
		npctalk "Let's listen for now.","",bc_self;
		end;
	}
	if (illusion_moonlight == 5 || illusion_moonlight == 8) {
		mes "[ Jagyeom ]";
		mes "We should grasp the situation first.";
		mes "It'll be great if you can help us, Adventurer.";
		close;
	}
	if (illusion_moonlight == 9) {
		mes "[ Jagyeom ]";
		mes "The Moonlight Flower are recreating the past in their nightmares.";
		mes "In a way, they're also victims.";
		next;
		mes "[ Jagyeom ]";
		mes "I'll make sure no villagers gets close to the collapsed walls of reality and dreams.";
		close;
	}
	mes "[ Jagyeom ]";
	mes "Please observe proper manners inside the palace.";
	close;
}

payon_in03,33,93,1	script	Young Scholar#ill_moon_pin	4_F_03,{
	if (illusion_moonlight < 2) {
		mes "[ Young Scholar ]";
		mes "Payon is home for sacred creatures since ancient times.";
		mes "A town isolated from the world by the mountains, the people of Payon way of thinking is different from the outside.";
		close;
	}
	if (illusion_moonlight == 2) {
		npctalk "Muyeon is really upset. We should ask her what happened.","",bc_self;
		end;
	}
	if (illusion_moonlight < 5) {
		npctalk "We should ask Muyeon what happened.";
		end;
	}
	if (illusion_moonlight == 5) {
		mes "[ Young Scholar ]";
		mes "This is terrible.";
		mes "I can't belive Muyeon had to deal with it on her own.";
		mes "Those foxes must be angrier than I thought.";
		next;
		mes "[ Young Scholar ]";
		mes "We need to look into this further. I'd better go to the ruined village.";
		close;
	}
	mes "[ Young Scholar ]";
	mes "I'm going to stay in the ruined village and investigate this phenomenon.";
	mes "But I'll need some form of protection. I'm going to take Junghee with me.";
	next;
	mes "[ Young Scholar ]";
	mes "It'd be great if you join us again. See you at the ruined village.";
	close;
}

payon_in03,30,96,5	duplicate(dummy_cloaked_npc)	Nine Tail Spirit#ill_moon_0	NINE_TAIL
payon_in03,35,96,3	duplicate(dummy_cloaked_npc)	Nine Tail Spirit#ill_moon_1	NINE_TAIL
payon_in03,30,93,7	duplicate(dummy_cloaked_npc)	Nine Tail Spirit#ill_moon_2	NINE_TAIL
payon_in03,35,93,1	duplicate(dummy_cloaked_npc)	Nine Tail Spirit#ill_moon_3	NINE_TAIL

pay_dun03,140,46,0	script	Shimmering Portal#ill_moon_in	4_ENERGY_BLUE,{
	if (illusion_moonlight < 5) {
		mes "- The air is brimming with strange energy. -";
		mes "It's giving me an anxiety feeling.";
		close;
	}
	if (illusion_moonlight == 5) {
		mes "There's a shimmering portal in the air.";
		next;
		cloakoffnpcself( "Young Scholar#ill_moon_pdun" );
		cloakoffnpcself( "Junghee#ill_moon_pdun" );
		npctalk "*Panting* You're here.","Young Scholar#ill_moon_pdun",bc_self;
		mes "[ Young Scholar ]";
		mes "I was alarmed when you suddenly disappeared.";
		mes "Do you think this is one of the nightmares that Muyeon...";
		next;
		select("I'll have to figure that out.");
		npctalk "Me? What if I don't want to?","Junghee#ill_moon_pdun",bc_self;
		mes "[ Young Scholar ]";
		mes "Then, do you mind if I tag along?";
		mes "You don't have to worry about me. Junghee can keep me safe.";
		next;
		npctalk "D-Don't touch anything!","Junghee#ill_moon_pdun",bc_self;
		mes "[ Young Scholar ]";
		mes "Then... should I touch this?";
		illusion_moonlight = 6;
		completequest 7780;
		setquest 7781;
		close2;
		setpcblock PCBLOCK_NPC, true;
		specialeffect EF_SPINMOVE,AREA,"Young Scholar#ill_moon_pdun";
		specialeffect EF_DQ9_CHARGE,AREA,"Young Scholar#ill_moon_pdun";
		sleep2 350;
		npctalk "Arghhhhh-!","",bc_self;
		cloakonnpcself( "Young Scholar#ill_moon_pdun" );
		sleep2 500;
		npctalk "Chunghae!","Junghee#ill_moon_pdun",bc_self;
		sleep2 2000;
		npctalk "That careless klutz!","Junghee#dun_dummy",bc_self;
		sleep2 500;
		specialeffect EF_SPINMOVE,AREA,"Junghee#ill_moon_pdun";
		specialeffect EF_DQ9_CHARGE,AREA,"Junghee#ill_moon_pdun";
		sleep2 350;
		setpcblock PCBLOCK_NPC, false;
		cloakonnpcself( "Junghee#ill_moon_pdun" );
		end;
	}
	mes "There is something on the other side of the shimmering portal.";
	mes "What should I do?";
	next;
	if (select("Enter the portal.:Quit.") == 2) {
		mes "Quit investigating.";
		close;
	}
	warp "pay_d03_i",140,44;
	end;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 5";
	end;
}

pay_dun03,143,45,4	duplicate(dummy_cloaked_npc)	Junghee#ill_moon_pdun	4_M_PAY_SOLDIER
pay_dun03,138,43,7	duplicate(dummy_cloaked_npc)	Young Scholar#ill_moon_pdun	4_F_03

pay_d03_i,140,46,0	script	Shimmering Portal#ill_moon_out	4_ENERGY_BLUE,{
	mes "I can go back to the ruined village.";
	mes "What should I do?";
	next;
	if (select("Exit.:Do not exit.") == 2)
		end;
	warp "pay_dun03",140,44;
	end;
}

pay_d03_i,149,45,4	script	Scholar Chunghae#ill_moon_ind	4_F_03,{
	if (illusion_moonlight < 6)
		end;
	if (illusion_moonlight == 6) {
		mes "[ Chunghae ]";
		mes "Look at this place!";
		mes "It looks exactly like the ruined village we were in a moments ago, and yet... it's different!";
		next;
		mes "[ Chunghae ]";
		mes "Also, there's something off about people and foxes here, and I saw a strange-looking mage among them.";
		mes "What if he's responsible for this incident.";
		next;
		mes "[ Chunghae ]";
		mes "These foxes, villagers, and angry spirits...";
		mes "They reminded me of the time when the village was buried under landslide.";
		next;
		mes "[ Chunghae ]";
		mes "We need to look around for more clues.";
		mes "You'll help, won't you?";
		next;
		mes "[ Chunghae ]";
		mes "Let me know when you're ready.";
		illusion_moonlight = 7;
		completequest 7781;
		close;
	}
	if (checkweight(25271,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "- You're carrying too many items to proceed with this quest. -";
		close;
	}
	switch (checkquest(7783,PLAYTIME)) {
		case -1:
			break;

		case 0:
		case 1:
			mes "[ Chunghae ]";
			mes "Now I know this is not the ruined village.";
			mes "Are we really inside a Moonlight Flower's nightmare?";
			next;
			mes "[ Chunghae ]";
			mes "That's what Muyeon said.";
			mes "Their nightmares are coming true.";
			next;
			mes "[ Chunghae ]";
			mes "This place is a worth of a serious study.";
			close;

		case 2:
			mes "[ Chunghae ]";
			mes "Let's begin our investigation for the day, shall we?";
			mes "Maybe it's because this is a dream, but nothing about it has changed.";
			erasequest 7783;
			next;
			mes "[ Chunghae ]";
			mes "Let me know when you're ready.";
			close;
	}
	switch (checkquest(7782,HUNTING)) {
		case -1:
			mes "[ Chunghae ]";
			mes "I've talked to the villagers,";
			mes "and many of them told me about some strange mage.";
			next;
			mes "[ Chunghae ]";
			mes "They said he casts powerful spells wherever he goes, and it was one of his spells that shook the ground and caused the fatal landslide. As a result, a lot of the villagers and foxes died.";
			next;
			mes "[ Chunghae ]";
			mes "I'm convinced that the mage is responsible for these rampant nightmares.";
			mes "Maybe the nightmares would stop materializing if we get rid of their cause.";
			next;
			mes "[ Chunghae ]";
			mes "Of course, I could be wrong.";
			mes "He could just be another character in the nightmares.";
			next;
			mes "[ Chunghae ]";
			mes "I want to know more than anything what tore the walls between reality and dreams.";
			mes "Maybe this is even happening in other places too?";
			next;
			mes "[ Chunghae ]";
			mes "Anyway, please take care of the ^0000FFWizard of the Truth^000000 in this place.";
			mes "It's time we deal with this quasi-reality.";
			next;
			mes "[ Chunghae ]";
			mes "He is pretty formidable. I wouldn't recommend ^0000FFfight him alone.^000000";
			next;
			if (select("Will do.:No, thanks.") == 2) {
				mes "[ Chunghae ]";
				mes "Err, then I'll have to investigate something else.";
				mes "But I won't resent you for this. I promise.";
				close;
			}
			mes "[ Chunghae ]";
			mes "Good luck.";
			mes "That wizard looks pretty strong.";
			mes "Please be careful.";
			setquest 7782;
			close;

		case 0:
		case 1:
			mes "[ Chunghae ]";
			mes "That ^0000CDenlightened mage^000000 looks dangerous.";
			mes "Please stop him.";
			close;

		case 2:
			mes "[ Chunghae ]";
			mes "You're as experienced as I've heard.";
			mes "Now, let's see how this affects the situation.";
			next;
			if (illusion_moonlight == 7) {
				mes "[ Chunghae ]";
				mes "Remember what Muyeon said?";
				mes "About the foxes' nightmares coming true, I mean.";
				next;
				mes "[ Chunghae ]";
				mes "I was thinking while looking around.";
				mes "I think it's possible we're inside a Moonlight Flower's dream.";
				next;
				mes "[ Chunghae ]";
				mes "I don't know how it has been connected to reality,";
				mes "but I'm certain of one thing:";
				next;
				mes "[ Chunghae ]";
				mes "The spirits of the Moonlight Flowers are still living in the past.";
				mes "Back when their village was buried..";
				next;
				mes "[ Chunghae ]";
				mes "They died such a horrible death that they're unable to move on to the Netherworld.";
				mes "And something has ignited their pent-up anger.";
				next;
				mes "[ Chunghae ]";
				mes "Here, there are truths that we cannot find anywhere else.";
				mes "I guess I'll be staying here until I find them all.";
				next;
				mes "[ Chunghae ]";
				mes "Please deliver the news to Muyeon in the Detached Payon Palace.";
				mes "Junghee and I will explore this place further.";
				illusion_moonlight = 8;
				setquest 7788;
				next;
			}
			mes "[ Chunghae ]";
			mes "I hope we can find an answer to this phenomenon.";
			erasequest 7782;
			setquest 7783;
			getitem 25271,1;
			getexp 300000,300000;
			close;
	}
	end;

OnInit:
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 6";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 7 && checkquest(7782,HUNTING) == -1";
	questinfo QTYPE_QUEST,QMARK_YELLOW,"illusion_moonlight == 7 && checkquest(7782,HUNTING) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"iillusion_moonlight > 7 && checkquest(7783,PLAYTIME) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"iillusion_moonlight > 7 && checkquest(7782,HUNTING) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"iillusion_moonlight > 7 && checkquest(7783,PLAYTIME) == -1 && checkquest(7782,HUNTING) == -1";
	end;
}

pay_d03_i,152,45,4	script	Soldier Junghee#ill_moon_ind	4_M_PAY_SOLDIER,{
	if (illusion_moonlight < 6)
		end;
	if (illusion_moonlight == 6) {
		mes "[ Junghee ]";
		mes "I knew coming in that I'd better stay close to Chunghae.";
		mes "I was right.";
		next;
		mes "[ Junghee ]";
		mes "I'm sensing really bad vibes from these foxes and ghosts.";
		mes "This is not good.";
		close;
	}
	if (checkweight(25271,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "- You're carrying too many items to proceed with this quest. -";
		close;
	}
	if (checkquest(7784,HUNTING) == 2) {
		mes "[ Junghee ]";
		mes "It doesn't matter if they're real or not. They're just as threatening.";
		mes "Good Job.";
		next;
		mes "[ Junghee ]";
		mes "Chunghae's almost done investigating this place. I'd better get ready to leave.";
		erasequest 7784;
		setquest 7785;
		getitem 25271,1;
		close;
	}
	if (checkquest(7786,HUNTING)  == 2) {
		mes "[ Junghee ]";
		mes "It doesn't matter if they're real or not.";
		mes "I can symphatize with the soldier.";
		next;
		mes "[ Junghee ]";
		mes "All he wanted to do was protect others, and he died without fulfilling that wish.";
		mes "Thank you for helping them rest.";
		erasequest 7786;
		setquest 7787;
		getitem 25271,1;
		close;
	}
	mes "[ Junghee ]";
	mes "There's another portal that looks just like the one we came through.";
	mes "I touched it, and it sent me back to the original ruined village.";
	next;
	switch( select( "About the angry Nine Tails.", "About the angry Soldiers." ) ) {
	case 1:
		switch( checkquest(7785,PLAYTIME) ) {
		case -1:
			if (checkquest(7784,HUNTING) == -1) {
				mes "[ Junghee ]";
				mes "Chunghae is having a problem investigating this place because of the angry foxes.";
				mes "I'll appreciate if you can take care of them.";
				break;
			}
			mes "[ Junghee ]";
			mes "Please hunt the ^0000FFAngry Nine Tails^000000 around this place.";
			mes "That'll ensure Chunghae's safety during his investigation.";
			close;
		case 0:
		case 1:
			mes "[ Junghee ]";
			mes "Chunghae said we're inside a Moonlight Flower's nightmare.";
			mes "They may not be real, but if they pose any threat to the living, then they must be taken care of.";
			next;
			mes "[ Junghee ]";
			mes "And that has nothing to do with the symphathy I feel for them.";
			mes "Now if you'll excuse me, Chunghae and I'll go investigate other places.";
			close;
		case 2:
			erasequest 7785;
			mes "[ Junghee ]";
			mes "Did you get some rest?";
			mes "Everything's just the same as when you left it, but I want to clear this place,";
			mes "so Chunghae can investigate it.";
			mes "Could you hunt some ^4d4dffAngry Nine Tails^000000?";
			break;
		}
		next;
		if (select( "Accept.", "Decline." ) == 2) {
			mes "[ Junghee ]";
			mes "Then Chunghae won't be able to fully investigate this place.";
			close;
		}
		mes "[ Junghee ]";
		mes "Thank you.";
		mes "I understand why those ^0000FFfoxes are angry^000000, but this has to be done.";
		setquest 7784;
		close;
	case 2:
		switch( checkquest(7787,PLAYTIME) ) {
		case -1:
			if (checkquest(7786,HUNTING) == -1) {
				mes "[ Junghee ]";
				mes "These soldiers tried to protect their villagers until the last moment,";
				mes "and got buried with them. No wonder they're so angry.";
				break;
			}
			mes "[ Junghee ]";
			mes "Please take care of the ^0000FFAngry Soldiers^000000 in this place.";
			mes "I mean... send them to Heaven.";
			close;
		case 0:
		case 1:
			mes "[ Junghee ]";
			mes "If we're really inside Moonlight Flower's nightmare, like Chunghae thinks,";
			mes "then the angry soldier over there must have been the guard of this village.";
			next;
			mes "[ Junghee ]";
			mes "It doesn't matter if this is real or not. Watching my ancestors suffer is difficult.";
			mes "I may end up wasting our time, but I want to try to help them rest.";
			close;
		case 2:
			erasequest 7787;
			mes "[ Junghee ]";
			mes "What can we do to get rid of these nightmares?";
			mes "I told you it's difficult for me to look at those soldiers without feeling pain.";
			break;
		}
		next;
		mes "[ Junghee ]";
		mes "Would you be so kind as to put them to rest for me?";
		next;
		if (select( "Accept.", "Decline." ) == 2) {
			mes "[ Junghee ]";
			mes "I really don't want to deal with them myself,";
			mes "but I guess I'll have to.";
			close;
		}
		mes "[ Junghee ]";
		mes "Thank you.";
		mes "I'll leave the ^0000FFAngry Soldiers^000000 to you.";
		mes "Please send them to heaven.";
		setquest 7786;
		close;
	}
	end;

OnInit:
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7785,PLAYTIME) == -1 && checkquest(7784,HUNTING) == -1";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7787,PLAYTIME) == -1 && checkquest(7786,HUNTING) == -1";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7785,PLAYTIME) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7787,PLAYTIME) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7784,HUNTING) == 2";
	questinfo QTYPE_DAILYQUEST,QMARK_YELLOW,"illusion_moonlight > 6 && checkquest(7786,HUNTING) == 2";
	end;
}

//= Illusion Moonlight Spawn
pay_d03_i,43,150,5	script	Villager#ill_moon_0	1_F_ORIENT_01,{
	mes "[ Villager ]";
	mes "Adventurer?";
	mes "Are you with the subjugation party?";
	mes "Why can't you just leave us alone?";
	next;
	mes "[ Villager ]";
	mes "We don't worship monsters.";
	mes "We're not enthralled by monsters!";
	next;
	mes "[ Villager ]";
	mes "Ah...";
	mes "The light... The magic... Please stop that magic...";
	close2;
	initnpctimer;
	disablenpc();
	specialeffect EF_QUAKEBODY2;
	npctalk "Ah... Ah... Aaahhh...";
	areamonster "pay_d03_i",42,149,44,151,"Resentful Sohee",3762,3;
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}

pay_d03_i,82,237,3	script	Villager#ilp17	1_F_ORIENT_01,5,5,{
	end;

OnTouch:
	specialeffect EF_QUAKEBODY2;
	npctalk "Ahhh... Ahhhhh!!";
	initnpctimer;
	disablenpc();
	areamonster "pay_d03_i",81,236,83,238,"Resentful Sohee",3762,3;
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}

pay_d03_i,254,206,3	script	Villager#ilp18	4_F_01,5,5,{
	end;

OnTouch:
	specialeffect EF_QUAKEBODY2;
	npctalk "Something is not right!";
	sleep2 2000;
	npctalk "Stop it... It's coming, agh!!";
	areamonster "pay_d03_i",252,204,255,208,"Resentful Munak",3760,3;
	disablenpc();
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}

pay_d03_i,81,136,3	script	Villager#ill_moon_3	1_M_ORIENT01,{
	mes "[ Villager ]";
	mes "Are you here to subjugate us?!";
	mes "We've done nothing wrong!";
	mes "Can't you tell from the sacred creatures!";
	next;
	mes "[ Villager ]";
	mes "Ah... The fox lady...";
	close2;
	initnpctimer;
	disablenpc();
	npctalk "H-help!! I don't want to die!";
	areamonster "pay_d03_i",79,136,81,138,"Resentful Bongun",3761,3;
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}

pay_d03_i,160,260,3	script	Villager#ill_moon_4	1_M_ORIENT01,{
	mes "[ Villager ]";
	mes "You...";
	mes "Who's that strange mage?";
	mes "Why do you...?";
	next;
	mes "[ Villager ]";
	mes "You! You're no better than them!";
	mes "What have we done to you?";
	close2;
	initnpctimer;
	disablenpc();
	npctalk "Arrgghh-!";
	areamonster "pay_d03_i",158,258,162,262,"Resentful Bongun",3761,3;
	end;

OnTimer60000:
	stopnpctimer;
	enablenpc();
	end;
}


//============================================================
//= Illusion of Vampire
//============================================================
gef_dun01,134,224,1	script	Mojo#ilgf	2_F_MAGICMASTER,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[Mojo]";
		mes "Are you sure you can carry all that stuff? Why don't you lighten your bag?";
		close;
	}
	if (ill_vampire == 0) {
		mes "[Mojo]";
		mes "Mm, you're an adventurer. What brings you to me? I'm sorry, I'm kind of busy. Could you talk to the priest over there instead?";
		close;
	}
	if (ill_vampire < 16) {
		mes "[Mojo]";
		mes "The notebook... I want to see the notebook... If you want to enter the notebook, then you should talk to Father Grimm. If you want, I can go with you.";
		close;
	}
	switch( checkquest(14680,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Mojo]";
		mes "Hello, Adventurer.";
		next;
		mes "[Mojo]";
		mes "Oh, I'm sorry, but I can't talk right now. I'm too busy examining the things you brought to me.";
		next;
		mes "[Mojo]";
		mes "Could you come back after dawn?";
		close;
	case 2:
		mes "[Mojo]";
		mes "Hello, Adventurer. How are you?";
		next;
		mes "[Mojo]";
		mes "Whew, I stayed up all night examining the Dried Yggdrasil Leaves and the Suspicious Pentacles. I wouldn't have to, if Father Grimm left me alone.";
		next;
		mes "[Mojo]";
		mes "Anyway they're so old and poorly preserved that they easily crumble to dust. I couldn't finish my research.";
		next;
		mes "[Mojo]";
		mes "So I'm thinking... Could you bring me some more today? I need ^0000cd10 Dried Yggdrasil Leaves and 10 Suspicious Pentacles^000000.";
		next;
		mes "[Mojo]";
		mes "Also, please hunt 5 zombies of each kind for that nagging priest.";
		next;
		mes "[Mojo]";
		mes "In the meantime I'll catch some Z's.";
		erasequest 14680;// Time to Research
		setquest 14679;// Send the Dead Back to Earth
		close;
	}
	switch( checkquest(14679,HUNTING) ) {
	case -1:
		mes "[Mojo]";
		mes "Adventurer, how did you feel when you touched the notebook? How do you think it works?";
		next;
		mes "[Mojo]";
		mes "I've got so many questions, but that mean priest wouldn't let me touch it.";
		next;
		mes "[Mojo]";
		mes "Adventurer, could you take me with you the next time you enter the notebook? I swear I'm not going to steal the notebook. I'm just really curious about it.";
		next;
		mes "[Grimm]";
		mes "I can hear you. Give up your obsession with it. That would be best for you.";
		next;
		mes "[Mojo]";
		mes "Who says I'm obsessed with it?";
		next;
		mes "[Mojo]";
		mes "Adventurer, please? Don't I look pitiful?";
		next;
		if (select( "What do you want to know the most?", "I don't want to get between you two." ) == 2) {
			mes "[" + strcharinfo(0) + "]";
			mes "Sorry, but I don't want to get between you two. You both have a point, and I can't side with either one of you.";
			next;
			mes "[Mojo]";
			mes "Hmpf, alright, but if you ever feel pity for me, then come back and help me. Promise?";
			close;
		}
		mes "[Mojo]";
		mes "About those walking corpses, of course!";
		next;
		mes "[Mojo]";
		mes "I really want to know what keeps them moving, what kind of experiments my predecessors did on them, and what kind of state they're in.";
		next;
		mes "[Mojo]";
		mes "Such experiments are prohibited now, and all the old records were destroyed.";
		next;
		mes "[Grimm]";
		mes "They were destroyed for good reason. So stop wondering about them.";
		next;
		mes "[Mojo]";
		mes "Oh, that's right! Adventurer, could you capture a zombie for me? Alive, that is.";
		npctalk "Wait, it can't be alive. It's already dead.", "", bc_self;
		next;
		mes "[Grimm]";
		mes "No. Don't even think about it. Mojo, you're so close to crossing the line.";
		next;
		mes "[Mojo]";
		mes "I wasn't asking you! Unless you're going to let me touch the notebook, stay out of my hair!";
		next;
		mes "[Grimm]";
		mes "You just asked this adventurer to capture a zombie alive.";
		next;
		mes "[Grimm]";
		mes "You're not thinking about what kind of danger it might pose when it arrives here. You just want it because you're curious about it.";
		next;
		mes "[Grimm]";
		mes "Did you forget why Brother Jojo wanted you to stay here and stay away from the notebook?";
		next;
		mes "[Mojo]";
		mes "So I'm asking this adventurer. You keep telling me don't do this, don't do that. Is there anything I can do without you saying no?";
		npctalk "You just want me to stand here, breathing. Is that it?", "", bc_self;
		sleep2 1000;
		npctalk "Sure, why not?", "Grimm#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "You can't bring anything from the world inside the book. If you do, I'll get rid of them.";
		next;
		mes "[Grimm]";
		mes "If you really want to experiment on those blasphemous creatures, then I suggest you talk with Brother Jojo and the others first.";
		next;
		mes "[Mojo]";
		mes "When are they coming back?";
		next;
		mes "[Grimm]";
		mes "Beats me.";
		npctalk "You should've become a politician. You would've been more successful at that.", "", bc_self;
		sleep2 500;
		npctalk "I'll take that as a compliment.", "Grimm#ilgf", bc_self;
		next;
		mes "[Mojo]";
		mes "Adventurer, I read in the notebook that the owner used some materials to experiment on zombies. I think they're Yggdrasil leaves and some drawings.";
		next;
		select("You mean dried Yggdrasil leaves and some pentacles.");
		mes "[Mojo]";
		mes "Yes. Could you at least procure them for me?";
		next;
		mes "[Mojo]";
		mes "Maybe I can use them to figure out the experiment she did and the force that reanimates the dead.";
		npctalk "Secretly from that priest, of course.", "", bc_self;
		sleep2 500;
		npctalk "I still can hear you.", "Grimm#ilgf", bc_self;
		sleep2 1000;
		npctalk "Stop eavesdropping on people.", "", bc_self;
		next;
		mes "[Grimm]";
		mes "Why are you obsessed with this? Do you really want to let these unholy creature loose on the continent? Do you not understand why the Tower has banned the experiments?";
		next;
		mes "[Mojo]";
		mes "Look, I'm not going to experiment on the zombies. I just want to take a look at the materials she used.";
		next;
		mes "[Mojo]";
		mes "And who knows? I might find out a way to exterminate these zombies at once.";
		npctalk "I may not look it, but I'm pretty smart.", "", bc_self;
		next;
		mes "[Mojo]";
		mes "You agreed that our enthusiasm for magic has contributed to the development of our country.";
		next;
		mes "[Grimm]";
		mes "...";
		npctalk "I'll take that as a yes.", "", bc_self;
		next;
		mes "[Mojo]";
		mes "I promise I'm not going to do anything dangerous. I'll just take a look at the materials.";
		next;
		mes "[Grimm]";
		mes "I'm going to watch you.";
		next;
		mes "[Mojo]";
		mes "Sure, be my guest.";
		npctalk "Ooh, I'm going to be studying with you breathing down my neck, how exciting!", "", bc_self;
		next;
		mes "[Grimm]";
		mes "And you will stop asking me for this notebook, yes?";
		next;
		mes "[Mojo]";
		mes "Huh? But that's... I'd love to take a look at it.";
		npctalk "Do you think you can?", "Grimm#ilgf", bc_self;
		sleep2 500;
		npctalk "Maybe one day, yes.", "", bc_self;
		sleep2 1000;
		npctalk "I swear to Odin that day will never come.", "Grimm#ilgf", bc_self;
		sleep2 1000;
		npctalk "Bah!", "", bc_self;
		next;
		select("So have you come to an agreement?");
		mes "[Mojo]";
		mes "Yes, we have. Please bring me some dried Yggdrasil leaves and pentacles. 10 for each sounds good.";
		next;
		mes "[Grimm]";
		mes "Are you sure that's enough?";
		next;
		mes "[Mojo]";
		mes "Mm, I'm not sure yet. Do you mind if I ask you for more later? Okay, then please bring me ^0000cd10 Dried Yggdrasil Leaves and 10 Suspicious Pentacles^000000.";
		next;
		mes "[Mojo]";
		mes "Oh, and while you're at it, could you hunt some zombies for that scowling priest as well? Just 5 of each kind. I don't want to burden you.";
		npctalk "You're already burdening him.", "Grimm#ilgf", bc_self;
		sleep2 500;
		npctalk "Yeah, but look at you, your face lit up when I offered.", "", bc_self;
		next;
		mes "[Mojo]";
		mes "Adventurer, thank you for doing this for us.";
		setquest 14679;// Send the Dead Back to Earth
		close;
	case 0:
	case 1:
		break;
	case 2:
		if (countitem(25266) < 10 || countitem(25267) < 10)
			break;
		mes "[Mojo]";
		mes "Adventurer, welcome back! I've been waiting for you for so long! Did you bring the things I asked? Come on, let me see them!";
		next;
		mes "[Mojo]";
		mes "Wow, these are so old and fragile, I'm afraid they might crumble in my hands.";
		next;
		mes "[Grimm]";
		mes "Are you happy now? They don't look any different from the ones you're using, though.";
		next;
		mes "[Mojo]";
		mes "You priests are the least curious kind I know. I asked for these because I wanted to compare them to the ones I have, and it takes a keen eye to catch minute differences.";
		next;
		mes "[Mojo]";
		mes "Adventurer, could you bring me some more tomorrow? I'm worried I might end up damaging all these you brought today. Even if I don't, I can always use more samples.";
		next;
		mes "[Mojo]";
		mes "Thank you so much. See you tomorrow!";
		delitem 25266,10;	// Dried_Yggdrasil_Leaf
		delitem 25267,10;	// SuspiciousMagicCircle
		erasequest 14679;	// Curious by Nature
		setquest 14680;		// Time to Research
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	mes "[Mojo]";
	mes "Adventurer, welcome back! I've been waiting for you for so long! Did you bring the things I asked? Come on, let me see them!";
	next;
	mes "[Mojo]";
	mes "Mm, this isn't enough. Please bring me ^0000cd10 Dried Yggdrasil Leaves and 10 Suspicious Pentacles^000000.";
	next;
	mes "[Mojo]";
	mes "Also, could you hunt 5 zombies of each kind for that scowling priest over there? Thanks!";
	close;

OnInit:
	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14680,PLAYTIME) == -1 && checkquest(14679,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14679,HUNTING) == 2 && countitem(25266) > 9 && countitem(25267) > 9") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14680,PLAYTIME) == 2") );
	end;
}
gef_dun01,133,221,1	duplicate(dummy_cloaked_npc)	Mojo#ilgf01	2_F_MAGICMASTER
gef_dun01,130,222,5	duplicate(dummy_cloaked_npc)	Mojo#ilgf02	2_F_MAGICMASTER
gef_dun01,130,224,5	duplicate(dummy_cloaked_npc)	Mojo#ilgf03	2_F_MAGICMASTER

gef_dun01,132,223,5	script	Grimm#ilgf	4_M_MINISTER,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[Grimm]";
		mes "Are you sure you can carry all that stuff? Why don't you lighten your bag?";
		close;
	}
	if (BaseLevel < 130) {
		mes "[Grimm]";
		mes "This place is too dangerous for you. Pleae come back when you're stronger.";
		close;
	}
	if (ill_vampire == 0) {
		mes "[Mojo]";
		mes "Just let me read it. I'll go bring them out afterward. Please?";
		npctalk "Please?", "Mojo#ilgf", bc_self;
		sleep2 500;
		cloakonnpcself( "Mojo#ilgf" );
		cloakoffnpcself( "Mojo#ilgf01" );
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf01");
		npctalk "Please?", "Mojo#ilgf01", bc_self;
		sleep2 500;
		cloakonnpcself( "Mojo#ilgf01" );
		cloakoffnpcself( "Mojo#ilgf02" );
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf02");
		npctalk "Please?", "Mojo#ilgf02", bc_self;
		sleep2 500;
		cloakonnpcself( "Mojo#ilgf02" );
		cloakoffnpcself( "Mojo#ilgf03" );
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf03");
		npctalk "Please?", "Mojo#ilgf03", bc_self;
		sleep2 500;
		cloakonnpcself( "Mojo#ilgf03" );
		cloakoffnpcself( "Mojo#ilgf" );
		npctalk "Please?", "Mojo#ilgf", bc_self;
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf");
		next;
		mes "[Grimm]";
		mes "Just leave me alone! I know you're going to run away with it if I give it to you.";
		npctalk "Bah!", "Mojo#ilgf", bc_self;
		next;
		mes "[Mojo]";
		mes "I swear I'll give it back to you. Just for one minute. How about thirty seconds? Ten seconds, then?";
		next;
		mes "[Grimm]";
		mes "No! I'm not even going to let you touch it!";
		next;
		mes "[Mojo]";
		mes "Come on, it's me, Mojo. Don't you trust me?";
		next;
		mes "[Grimm]";
		mes "No, I don't. I may trust Mojo, my sister in faith, but not Mojo, the mage.";
		next;
		mes "[Mojo]";
		mes "Oh, come on! You're a priest? You're supposed to have faith in everyone! Why are you treating me like a thief?";
		emotion ET_CRY, getnpcid(0, "Mojo#ilgf");
		npctalk "Boohoo! Oh, God! I'm being treated so unfairly!", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "I only have faith in Him, and He's telling me not to trust you.";
		npctalk "He's still whispering that to me.";
		next;
		mes "[Mojo]";
		mes "I'm not hearing anything!";
		next;
		mes "[Grimm]";
		mes "Of course not. Only His servants can hear him.";
		emotion ET_FRET, getnpcid(0, "Mojo#ilgf");
		npctalk "Wow, I smell lies and it's coming from your mouth.", "Mojo#ilgf", bc_self;
		sleep2 1000;
		npctalk "That's blasphemy!";
		next;
		select("Would you be so kind as to heal me?");
		emotion ET_SMILE;
		mes "[Grimm]";
		mes "Sure thing. Any time you want, " + ( Sex ? "Brother." : "Sister." );
		specialeffect2 EF_HEAL2;
		npctalk "He's such a hypocrite. I can never trust priests again, and it's his fault.", "Mojo#ilgf", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Thank you. I'm sorry, but I've heard you fighting, even from that far corner of this dungeon.";
		next;
		mes "[Grimm]";
		mes "You have? We must have been really loud. I suppose that wasn't very smart of us.";
		next;
		mes "[Mojo]";
		mes "Oh, this is great! Instead of fighting, why don't we ask this adventurer who is right?";
		next;
		mes "[Mojo]";
		mes "Adventurer, if you're not busy, would you hear us out?";
		npctalk "If you're busy, we'll understand.", "Mojo#ilgf", bc_self;
		next;
		if (select( "Let me hear it.", "I have to leave." ) == 2) {
			mes "[Grimm]";
			mes "I see. It's a shame that you can't seize on such a great opportunity.";
			next;
			mes "[Grimm]";
			mes "Please feel free to come back if you change your mind.";
			close;
		}
		mes "[" + strcharinfo(0) + "]";
		mes "Let me hear it.";
		next;
		mes "[Grimm]";
		mes "Okay, this is going to be a long story. Let me have some water first.";
		ill_vampire = 1;	// the variable must be updated here to use setquest to update questinfo
		setquest 14652;// Detailed Account 01
		close;
	}
	if (ill_vampire == 1) {
		mes "[Grimm]";
		mes "Adventurer, did you know these catacombs under Geffen once were quiet and filled with special energy instead of monsters?";
		next;
		mes "[Grimm]";
		mes "Back then, only a couple of monsters showed up once every decade or so.";
		next;
		select("What changed that?");
		emotion ET_OHNO;
		mes "[Grimm]";
		mes "*Glances at Mojo*";
		next;
		emotion ET_QUESTION, getnpcid(0, "Mojo#ilgf");
		mes "[Mojo]";
		mes "Why are you looking at me?";
		npctalk "I had nothing to do with it.", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "Some mages decided to erect an ivory tower of their own. They searched everywhere in the continent and settled on the ground above these catacombs.";
		next;
		mes "[Grimm]";
		mes "That was the beginning of the tragedy.";
		emotion ET_ANGER, getnpcid(0, "Mojo#ilgf");
		npctalk "Oh geez, here it goes again.", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "It's been said all mammals have curiosity that rivals their appetite, but mages... are the worst. ";
		npctalk "Enough with the lecturing. Get to the point already.", "Mojo#ilgf", bc_self;
		sleep2 500;
		npctalk "Everything has a cause and effect. How can you expect the adventurer to understand what this is about without knowing the cause?";
		next;
		mes "[Grimm]";
		mes "Anyway, these mages, after they built the Geffen Tower, took notice of the blasphemous creatures that sometimes appeared in the catacombs.";
		next;
		mes "[Grimm]";
		mes "They conducted various experiments to understand the special energy that reanimated the dead.";
		npctalk "They were just studying.", "Mojo#ilgf", bc_self;
		sleep2 500;
		npctalk "Just studying? They could've turned the entire continent into an unholy breeding ground!";
		next;
		mes "[Grimm]";
		mes "And as if that wasn't enough, those mages used their magic and replicated the reanimating process.";
		next;
		mes "[Grimm]";
		mes "That went horribly wrong. The special energy that surrounded the catacombs exploded, bringing back all the dead buried in them.";
		next;
		mes "[Grimm]";
		mes "Those arrogant mages crossed the line! They tried to play God!";
		next;
		emotion ET_ANGER, getnpcid(0, "Mojo#ilgf");
		mes "[Mojo]";
		mes "Hey, I'm one of them, and I'm not going to let you talk bad about my predecessors like that!";
		next;
		mes "[Grimm]";
		mes "How am I defaming them when I'm only telling the truth?";
		npctalk "It's not telling the truth when you're only telling it from your point of view!", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "What do you think, Adventurer? Would you trust someone so reckless with important tasks?";
		next;
		select("...No.");
		mes "[Mojo]";
		mes "But wait, Adventurer. You haven't heard my side of the story.";
		npctalk "You've got to listen to both sides before you judge!", "Mojo#ilgf", bc_self;
		next;
		mes "[Mojo]";
		mes "We understand the things that we want to study can be dangerous, so we try our best to be careful.";
		npctalk "Apparently, trying your best wasn't enough in this case.";
		sleep2 500;
		npctalk "Why are you saying that? I'm talking about my predecessors!", "Mojo#ilgf", bc_self;
		next;
		mes "[Mojo]";
		mes "My predecessors may have been too enthusiastic to study what's underneath their tower, but it was that enthusiasm that made Geffen grow into the city of magic that it is.";
		next;
		mes "[Mojo]";
		mes "Rune-Midgarts is flanked by Arunafeltz and Schwarzwald, the two strongest nations of the continent, and its magic power is what keeps them at bay.";
		next;
		mes "[Grimm]";
		mes "And that's the only reason that kept the Church from further pressing this matter,";
		next;
		mes "[Grimm]";
		mes "even though it doesn't change the fact that you woke the dead.";
		npctalk "Father Grimm, could you stop cutting in?", "Mojo#ilgf", bc_self;
		sleep2 500;
		npctalk "I can't. You're twisting the facts to make yourself look good.";
		next;
		mes "[Mojo]";
		mes "Curiosity is what fuels our life. It's the seed of development. Adventurer, would you hesitate to go to a new world because it's dangerous?";
		next;
		select("I wouldn't be an adventurer if I did.");
		mes "[Mojo]";
		mes "We mages are just like you adventurers in that sense. I knew you'd understand me.";
		emotion ET_OK, getnpcid(0, "Mojo#ilgf");
		next;
		mes "[Mojo]";
		mes "You heard that, Father Grimm. Now show me the notebook.";
		next;
		mes "[Grimm]";
		mes "No. Adventurer, you agreed with me that she's not trustworthy.";
		next;
		mes "[Mojo]";
		mes "You also agreed with me on the value of curiosity.";
		next;
		select("So, what is this about?");
		mes "[" + strcharinfo(0) + "]";
		mes "I've heard both of you, but neither of you told me what you were fighting for.";
		next;
		mes "[Grimm]";
		mes "Oh, I'm sorry. The Church of Rune-Midgarts periodically sends its priests out to these catacombs to maintain peace.";
		next;
		mes "[Grimm]";
		mes "I'm one of them, and I happened to pick up a ^0000cdnotebook^000000 just before you found us.";
		next;
		select("A notebook?");
		mes "[Grimm]";
		mes "Yes. It looks like it belongs to one of the Geffen Tower mages. It has ^0000cdBomi^000000 written on its cover, which I think is the name of its owner.";
		next;
		mes "[Mojo]";
		mes "But none of my guildsmen has such a name. I read the book, and she did sound like she was one of us. ^0000cdNot anymore^000000, though.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Not anymore?";
		next;
		emotion ET_OK, getnpcid(0, "Mojo#ilgf");
		mes "[Mojo]";
		mes "You're pretty sharp, Adventurer. That's right. I checked with my guild and found out there was someone named Bomi. She just disappeared one day, though.";
		npctalk "And that was a long, long time ago.", "Mojo#ilgf", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Do you think this notebook belongs to her? But why was it here?";
		next;
		mes "[Mojo]";
		mes "That was the same question we asked at first. That didn't matter anymore once we read what was written in the book.";
		next;
		mes "[Grimm]";
		mes "What's written in it is unsettling, but what's more serious is? You'll have to read it yourself. Just don't open the ^0000cdlast page^000000.";
		next;
		mes "[Mojo]";
		mes "So you're okay with this adventurer reading it, but not me.";
		npctalk "You know that's discrimination, right? You should be ashamed of yourself!", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "Please take a look.";
		erasequest 14652;// Detailed Account 01
		setquest 14653;// Detailed Account 02
		ill_vampire = 2;
		close;
	}
	if (ill_vampire == 2) {
		mes "I placed my hand on the book Father Grimm was holding. Suddenly I felt dizzy as the air around me shimmered. Carefully, I opened the notebook.";
		next;
		mes "[Daily Journal]";
		mes "I fainted in the middle of learning a new spell, again.";
		mes "My low stamina and insufficient mana are always the problem. I thought I could make up for my weak constitution with magic. Of course, even that required some minimal stamina, but I didn't have even that.";
		mes "I'm too tired...";
		next;
		mes "[Daily Journal]";
		mes "I saw Sophia drinking a mana potion. Maybe potions are the answer to my never-ending search for physical support. ";
		mes "I wonder if there are special potions that could improve me physically. Then, I could become stronger at last.";
		next;
		mes "[Daily Journal]";
		mes "All the potions I found didn't help improve my weak constitution. All they do is boost strength that's already there.";
		mes "Maybe I should try to formulate stamina and mana potions on my own.";
		next;
		mes "[Daily Journal]";
		mes "I learned about the catacombs under the Geffen Tower while I was in the library, reading about the tower's history.";
		mes "How are the dead reanimated? What kind of vital force keeps them moving?";
		mes "I need permission to enter the catacombs. I'm going to check them tomorrow.";
		next;
		mes "[Daily Journal]";
		mes "The dead don't talk. There's nothing I can find out from them.";
		mes "I've found traces of experiments everywhere. Some of my peers must have been here before I have.";
		mes "I'm especially tired today. I'm going to bed early tonight.";
		next;
		mes "[Daily Journal]";
		mes "The bats in the catacombs drink blood from the zombies, probably because there's nothing else to eat.";
		mes "Every day, I spend most of my energy keeping the bloodthirsty bats at bay. I'd get killed if I didn't stay near the exit.";
		mes "I'm tired.";
		next;
		mes "[Daily Journal]";
		mes "Today, I heard some strange noise in the catacombs. The zombies and bats were strangely quiet.";
		mes "Maybe I should explore deeper into the catacombs tomorrow, while the monsters hide from whatever that noise is.";
		next;
		mes "That was the last entry. I took my hand off the notebook. Father Grimm closed the notebook.";
		erasequest 14653;// Detailed Account 02
		setquest 14654;// Detailed Account 03
		ill_vampire = 3;
		close;
	}
	if (ill_vampire == 3) {
		mes "[" + strcharinfo(0) + "]";
		mes "This is notebook is both ^0000cda diary and research journal^000000.";
		next;
		mes "[Grimm]";
		mes "Indeed. It shows how its owner studied those blasphemous creatures to ^0000cdcreate stamina and mana enhancers^000000.";
		next;
		select("Interesting.");
		emotion ET_OK, getnpcid(0, "Mojo#ilgf");
		mes "[Mojo]";
		mes "Yes, it is. My guild would love to study this notebook. Most records from the same era have been lost.";
		npctalk "I'd love to read it myself as well.", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "The content of this notebook isn't what causes me alarm. Didn't you detect some ^0000cdstrange energy^000000 when you touch it?";
		next;
		mes "[Grimm]";
		mes "This book is sustained with its owner's spiritual energy, and it's pulling those who gaze upon it into ^0000cdthe world inside it^000000.";
		next;
		mes "[Mojo]";
		mes "And that's why I want to see the notebook so badly. I want to know how it contains a world inside it and why it was only discovered now.";
		npctalk "So please let me have it. I'll give it back to you after I figure that all out.", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "Mage, you stay out of this! This notebook is taking people to some place we don't know. And the gateway is in the last page.";
		npctalk "Oh, you don't even bother calling me by name anymore.", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "I scanned it for any malicious intent, but I didn't sense any. I think its owner just ^0000cdneeds help with some unfinished business^000000.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "So were you arguing about which one of you should go to that place?";
		next;
		mes "[Grimm]";
		mes "No. The other members of my group and two mages are already there. They just haven't returned.";
		npctalk "So I told you, I'll go bring them back. I'm stronger than I look. I can do this on my own.", "Mojo#ilgf", bc_self;
		sleep2 500;
		npctalk "No. I'd rather wait until they return.";
		next;
		select("How about I go?");
		mes "[Grimm]";
		mes "You? Well, you're more reliable than this sister here, but are you sure?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I want to repay you for healing me. Also, after listening to you both, I think it's better I go. Do you want me to go bring back your colleagues?";
		next;
		mes "[Grimm]";
		mes "No. I just want you to ^0000cdfind them^000000 and make sure they're okay. If they need help, please provide it to them. If they have a message for me, then please let me know.";
		npctalk "Take me with you!", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "I wish I could go with you, but my group needs me here.";
		npctalk "*Glances at Mojo*";
		sleep2 500;
		npctalk "Why are you staring at me?", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "I can't trust her with the notebook. If something happens to it, the people inside it might not be able to come back.";
		next;
		emotion ET_ANGER, getnpcid(0, "Mojo#ilgf");
		mes "[Mojo]";
		mes "This does it! Father Grimm, put that book down. Let's fight!";
		sleep2 500;
		npctalk "*Snort* Why would I do that? You're just going to run away with it.";
		next;
		mes "[Mojo]";
		mes "Then I'm going to go with the Adventurer!";
		next;
		mes "[Grimm]";
		mes "No. You're staying with me. Don't you dare touch the book.";
		next;
		emotion ET_CRY, getnpcid(0, "Mojo#ilgf");
		mes "[Mojo]";
		mes "Why are you doing this to me? What have I done to you?";
		next;
		mes "[Grimm]";
		mes "Brother Jojo asked me to never let you touch the book. Do you not remember that?";
		npctalk "He was really worried about you.";
		next;
		mes "[Mojo]";
		mes "No, I don't remember. When Sister Gem returns, I'm going to tell on you!";
		npctalk "Go ahead.";
		next;
		mes "[Grimm]";
		mes "Now, Adventurer. Let me know when you're ready.";
		erasequest 14654;// Detailed Account 03
		setquest 14655;// I'm Ready
		ill_vampire = 4;
		close;
	}
	if (ill_vampire < 15) {
		mes "[Grimm]";
		mes "Do you want to enter the notebook? Are you ready?";
		next;
		if (select( "Yes. Send me there.", "No." ) == 2) {
			mes "[Grimm]";
			mes "Not a problem. Just let me know when you are ready.";
			close;
		}
		mes "[Grimm]";
		mes "Then, let me open it.";
		next;
		mes "I placed my hand on the notebook, and Father Grimm opened it to the last page. Suddenly, my vision got blurry as I felt my body being transported to some place.";
		if (ill_vampire == 4) {
			erasequest 14655;// I'm Ready
			setquest 14656;// Finding Father Grimm's Colleagues
			ill_vampire = 5;
		}
		close2;
		warp "gef_d01_i",114,216;
		end;
	}
	if (ill_vampire == 15) {
		mes "[Grimm]";
		mes "Listen to me, or you can always go back to the Tower.";
		next;
		emotion ET_MERONG, getnpcid(0, "Mojo#ilgf");
		mes "[Mojo]";
		mes "No!";
		next;
		select("Are you two still fighting?");
		mes "[Mojo]";
		mes "Ah, there you are! How was that place?";
		next;
		mes "[Grimm]";
		mes "I'm glad you came back safely. Is everyone in there okay?";
		npctalk "Please tell us already. I'm dying to know!", "Mojo#ilgf", bc_self;
		next;
		mes "I relayed what happened in the notebook to Father Grimm and Mojo, and told them that the others decided to stay to keep an eye on the vampires.";
		next;
		emotion ET_SPARK, getnpcid(0, "Mojo#ilgf");
		mes "[Mojo]";
		mes "Wow, the same place in another plane of existence! I've never heard of this before! How does it work? This notebook has got to have something to do with it.";
		next;
		mes "[Mojo]";
		mes "And vampires who understand humans? My goodness!";
		next;
		mes "[Mojo]";
		mes "I can't stay here. Father Grimm, I have to go in there. Let me go, please!";
		npctalk "Let me have the notebook.", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "No. Never. Keep your hands to yourself.";
		npctalk "Argh! Why are you being so stubborn? I don't deserve this!", "Mojo#ilgf", bc_self;
		next;
		mes "[Grimm]";
		mes "Adventurer, thank you for venturing into that mysterious place for us. It'll be greatly appreciated if you visit my colleagues there and bring news from them to me sometimes.";
		next;
		mes "[Mojo]";
		mes "I can do that too, you know. You just have to give me a chance!";
		npctalk "Sister Mojo, please stay out of this.", "", bc_self;
		next;
		mes "[Grimm]";
		mes "Adventurer, thank you. Feel free to come to me if you want to ^0000cdenter the notebook again^000000.";
		completequest 14666;// Warden's Role
		getexp 2000000,2000000;
		ill_vampire = 16;
		getitem 25271,5;// Illusion Stone
		close;
	}
	if (ill_vampire == 16) {
		mes "[Grimm]";
		mes "Adventurer, do you want to enter the notebook?";
		next;
		if (select( "Yes.", "No." ) == 2) {
			mes "[Grimm]";
			mes "Not a problem. Just let me know when you are ready.";
			close;
		}
		mes "[Grimm]";
		mes "Good luck.";
		close2;
		warp "gef_d01_i",114,216;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_vampire == 0 && BaseLevel >= 130" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(14666) == 1" );
	end;
}

gef_d01_i,94,133,0	script	#illcon01	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	if (ill_vampire == 5) {
		if (strnpcinfo(0) == "#ilgf01")
			specialeffect2 EF_BIG_PORTAL;
	}
	else if (ill_vampire == 6) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Priest#ilgf01" );
		for ( .@i = 3; .@i < 10; ++.@i )
			cloakoffnpcself( "Marina#ilgf0" + .@i );
	}
	else if (ill_vampire == 7) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Undead#ilgf06" );
		cloakoffnpcself( "Wizard#ilgf06" );
		cloakoffnpcself( "Wizard#ilgf07" );

		cloakoffnpcself( "Wizard#ilgf08" );
		cloakoffnpcself( "Nameless Catacomb#ilgf01" );

		cloakoffnpcself( "Wizard#ilgf09" );
		cloakoffnpcself( "Wizard#ilgf10" );

		cloakoffnpcself( "Wizard#ilgf11" );

		cloakoffnpcself( "Wizard#ilgf12" );
		cloakoffnpcself( "Wizard#ilgf13" );
		cloakoffnpcself( "Nameless Catacomb#ilgf02" );

		cloakoffnpcself( "Wizard#ilgf14" );
		cloakoffnpcself( "Wizard#ilgf15" );
		cloakoffnpcself( "Nameless Catacomb#ilgf03" );

		cloakoffnpcself( "Wizard#ilgf16" );
		cloakoffnpcself( "Wizard#ilgf17" );

		cloakoffnpcself( "Wizard#ilgf18" );
		cloakoffnpcself( "Someone's Dream#ilgf18" );

		cloakoffnpcself( "Wizard#ilgf19" );
		cloakoffnpcself( "Wizard#ilgf20" );
		cloakoffnpcself( "Undead#ilgf05" );

		cloakoffnpcself( "Undead#ilgf02" );
		cloakoffnpcself( "Undead#ilgf03" );
		cloakoffnpcself( "Undead#ilgf04" );
		cloakoffnpcself( "Wizard#ilgf21" );
		cloakoffnpcself( "Wizard#ilgf22" );

		cloakoffnpcself( "Wizard#ilgf23" );
		cloakoffnpcself( "Fast Undead#ilgf01" );

		cloakoffnpcself( "Wizard#ilgf24" );
		cloakoffnpcself( "Shining Mushroom#ilgf01" );

		cloakoffnpcself( "Wizard#ilgf25" );
		cloakoffnpcself( "Wizard#ilgf26" );
		cloakoffnpcself( "Undead#ilgf01" );

		cloakoffnpcself( "Wizard#ilgf27" );
		cloakoffnpcself( "Wizard#ilgf28" );
	}
	else if (ill_vampire == 10) {
		cloakoffnpcself( "Dracula#ilgf02" );
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
	}
	else if (ill_vampire == 12 || ill_vampire == 13) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Gem#ilgf02" );
		cloakoffnpcself( "Marina#ilgf02" );
		cloakoffnpcself( "Antoine#ilgf02" );
		if (ill_vampire == 13) {
			cloakoffnpcself( "Dracula#ilgf03" );
			cloakoffnpcself( "King#ilgf02" );
			cloakoffnpcself( "Jojo#ilgf01" );
		}
	}
	if (ill_vampire > 13) {
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
		cloakoffnpcself( "Dracula#ilgf02" );
	}
	end;
}
gef_d01_i,114,216,0	duplicate(#illcon01)	#ilgf01	HIDDEN_WARP_NPC,3,0

gef_d01_i,81,135,0	duplicate(#illcon01)	#illcon02	HIDDEN_WARP_NPC,5,5
gef_d01_i,86,113,0	duplicate(#illcon01)	#illcon03	HIDDEN_WARP_NPC,5,5
gef_d01_i,95,121,0	duplicate(#illcon01)	#illcon04	HIDDEN_WARP_NPC,5,5
gef_d01_i,148,56,0	duplicate(#illcon01)	#illcon05	HIDDEN_WARP_NPC,5,5
gef_d01_i,188,97,0	duplicate(#illcon01)	#illcon06	HIDDEN_WARP_NPC,5,5
gef_d01_i,209,94,0	duplicate(#illcon01)	#illcon07	HIDDEN_WARP_NPC,5,5
gef_d01_i,205,117,0	duplicate(#illcon01)	#illcon08	HIDDEN_WARP_NPC,5,5
gef_d01_i,183,82,0	duplicate(#illcon01)	#illcon09	HIDDEN_WARP_NPC,5,5
gef_d01_i,197,80,0	duplicate(#illcon01)	#illcon10	HIDDEN_WARP_NPC,5,5
gef_d01_i,172,86,0	duplicate(#illcon01)	#illcon11	HIDDEN_WARP_NPC,5,5

gef_d01_i,112,228,5	script	Marina#ilgf01	4_F_MONK,{
	mes "[Marina]";
	mes "Do you want to leave?";
	next;
	if (select( "Yes.", "No." ) == 2) {
		mes "[Marina]";
		mes "I see. Just let me know when you want to leave.";
		close;
	}
	mes "[Marina]";
	mes "So, you're in a hurry to leave. Did something happen?";
	close2;
	warp "gef_dun01",133,219;
	end;
}

gef_d01_i,116,228,3	script	Antoine#ilgf01	4_GEFFEN_01,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[Antoine]";
		mes "Are you sure you can carry all that stuff? Why don't you lighten your bag?";
		close;
	}
	if (ill_vampire < 6) {
		mes "[Antoine]";
		mes "Sister Gem, please listen to me!";
		close;
	}
	if (ill_vampire == 6) {
		mes "[Antoine]";
		mes "I'm worried about those two. They should be fine, right?";
		close;
	}
	if (ill_vampire == 7) {
		mes "[Antoine]";
		mes "Have you found Jojo? Where is he? Jubilee has left to treat his wounds.";
		close;
	}
	if (ill_vampire < 16) {
		mes "[Antoine]";
		mes "This place has so many things I want to study, I don't know where to begin. Oh my, look at that Nightmare!";
		close;
	}
	switch( checkquest(14670,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Antoine]";
		mes "Adventurer, I don't want you to strain yourself. Why don't you go get some rest?";
		next;
		mes "[Antoine]";
		mes "Have a good night's sleep, and come back after dawn.";
		close;
	case 2:
		mes "[Antoine]";
		mes "Adventurer. Did you have good dreams last night? I had nightmares, probably from looking at those manes all day.";
		next;
		mes "[Antoine]";
		mes "But I'm not about to give up!";
		mes "Please bring me ^0000cd20 Wavy Manes^000000 as usual.";
		next;
		mes "[Antoine]";
		mes "Oh, and it'll be great if you also can get rid of ^0000cd10 Sweet Nightmares^000000. I want to know how that'll affect dreams. Thank you!";
		erasequest 14670;// Time for Dreaming
		setquest 14669;// Sweet Dreams
		close;
	}
	switch( checkquest(14669,HUNTING) ) {
	case -1:
		mes "[Antoine]";
		mes "Adventurer, can I talk to you for a second? I want your opinion on something.";
		next;
		if (select( "Sure thing.", "I'm kind of busy." ) == 2) {
			mes "[Antoine]";
			mes "Oh, are you? No problem. I can wait until you have some time for me.";
			close;
		}
		mes "[Antoine]";
		mes "You've seen those Nightmares and Drainliars, right? Did you notice how they look different from the kinds outside this place? Why do you think that is?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I don't know.";
		next;
		mes "[Antoine]";
		mes "Everything in this place is interesting. Especially those Sweet Nightmares. They're full of contradictions.";
		next;
		emotion ET_SPARK;
		mes "[Antoine]";
		mes "Have you taken a look at their wavy mane? Look at it long enough, and you'll see flashes of images, which I believe are from other people's dreams.";
		next;
		mes "[Antoine]";
		mes "Sweet Nightmares... Even their name is a contradiction. Maybe their mane is the source of all nightmares.";
		next;
		mes "[Antoine]";
		mes "Or it could just reflect the dreams of the dead.";
		next;
		mes "[Antoine]";
		mes "Those two ladies may not agree, but I don't have to stay here. I'm only staying because of ^0000cdSweet Nightmares^000000.";
		next;
		mes "[Antoine]";
		mes "I want to get rid of their manes and see if it affects our dreams.";
		next;
		mes "[Antoine]";
		mes "And I want to do that without having to leave my colleagues to fend for themselves. Do you know what I mean?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Do you want me to ^0000cdget their manes for you^000000?";
		next;
		mes "[Antoine]";
		mes "Yes, please! ^0000cd20^000000 should suffice!";
		next;
		mes "[Antoine]";
		mes "And while you're at it, please hunt ^0000cd10 Sweet Nightmares^000000 as well. I want to know how that affects dreams.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I'll do that.";
		next;
		emotion ET_THANKS;
		mes "[Antoine]";
		mes "Thank you. In return, I'll give you some stones I've picked up from this place.";
		next;
		mes "[Antoine]";
		mes "I don't know if they have any purpose, but they sure look beautiful and mysterious. Maybe someone outside this place can recognize its value.";
		next;
		mes "[Antoine]";
		mes "Anyway, thank you for doing this for me!";
		setquest 14669;// Sweet Dreams
		close;
	case 0:
	case 1:
		break;
	case 2:
		if (countitem(25270) < 20)
			break;
		mes "[Antoine]";
		mes "Adventurer, I've been waiting for you! Did you get what I asked?";
		next;
		mes "[Antoine]";
		mes "You brought all of them. I hope I can find something out from them.";
		next;
		mes "[Antoine]";
		mes "These are found only inside this place. Please bring them to me whenever you can. Dreams disappear when you wake up, you know.";
		next;
		mes "[Antoine]";
		mes "Thank you so much. You should get some rest now.";
		delitem 25270,20;// Wavy_Mane
		erasequest 14669;// Sweet Dreams
		setquest 14670;// Time for Dreaming
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	mes "[Antoine]";
	mes "Adventurer, I've been waiting for you! Did you get what I asked?";
	next;
	mes "[Antoine]";
	mes "Um, you haven't found it, I see.";
	next;
	mes "[Antoine]";
	mes "Please bring me ^0000cd20 Wavy Manes^000000 from ^0000cdSweet Nightmares^000000.";
	next;
	mes "[Antoine]";
	mes "Oh, and it'll be great if you also can get rid of ^0000cd10 Sweet Nightmares^000000. I want to know how that'll affect dreams. Thank you!";
	close;

OnInit:
	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14670,PLAYTIME) == -1 && checkquest(14669,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14669,HUNTING) == 2 && countitem(25270) > 19") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14670,PLAYTIME) == 2") );
	end;
}

gef_d01_i,113,230,5	script	Gem#ilgf01	1_F_PRIEST,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[Gem]";
		mes "Are you sure you can carry all that stuff? Why don't you lighten your bag?";
		close;
	}
	if (ill_vampire == 5) {
		mes "[Gem]";
		mes "Brother Antoine, you stay here. Sister Marina and I will go. Do either of you have a problem with that?";
		npctalk "Even if you do, I won't hear it.", "", bc_self;
		next;
		mes "[Marina]";
		mes "Brother Antoine and I will go. We're trained to fight. You are not.";
		npctalk "Plus, I'm fast on my feet.", "Marina#ilgf01", bc_self;
		next;
		mes "[Antoine]";
		mes "Marina, why don't you stay? Sister Gem and I will go. I think that'd be best, considering our abilities.";
		npctalk "One of us can search while the other covers for them.", "Antoine#ilgf01", bc_self;
		next;
		mes "[Gem]";
		mes "No. This place is overrun with unholy creatures. It's better if two servants of God look for them.";
		next;
		mes "[Antoine]";
		mes "What's that supposed to mean? Are you saying that I can't fight zombies because I'm not a servant of God?";
		next;
		mes "[Marina]";
		mes "How about two of us stay and one goes?";
		next;
		mes "[Gem]";
		mes "No. It has to be two, so they can look out for each other.";
		next;
		mes "[Antoine]";
		mes "What about the person left behind? They have no one to look out for them.";
		next;
		select("Excuse me. I came here on behalf of Father Grimm.");
		mes "[Marina]";
		mes "Did you come to help us?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "He's worried that you haven't come out. He asked me to help you if you need it. Did something happen?";
		next;
		mes "[Marina]";
		mes "We need to find some people.";
		next;
		mes "[Antoine]";
		mes "You can't just tell him that. Adventurer, you know what kind of place this is, don't you? We're in a hurry, so let me explain the situation to you quickly.";
		next;
		mes "[Antoine]";
		mes "This place is the spitting image of the Geffen catacombs, and it probably exists inside the notebook's owner's memory.";
		next;
		mes "[Antoine]";
		mes "We came here to find out how and why this place was created.";
		next;
		mes "[Antoine]";
		mes "We didn't find anything peculiar about this place. We want to leave, but a couple of us, ^0000cda priest and a wizard^000000 hasn't returned to join us.";
		next;
		mes "[Antoine]";
		mes "We've searched around, but the notebook's owner's memory of this place is rather hazy and inconsistent. Illusions of different wizards keep appearing, frequently and in masses.";
		next;
		mes "[Antoine]";
		mes "We thought it'd take forever to find them, so we decided to split up. We were discussing how we'd go about doing it when you showed up.";
		next;
		mes "[Antoine]";
		mes "I can't say how glad I am to have you here. Now that there are four of us, ^0000cdtwo of us can stay while the other two look^000000.";
		next;
		select("What do the missing members look like?");
		mes "[Gem]";
		mes "The missing priest is called ^0000cdJubilee^000000 and the wizard is ^0000cdJojo^000000. They're the typical priest and wizard. You won't miss them.";
		next;
		mes "[Marina]";
		mes "Adventurer, let's go!";
		next;
		mes "[Gem]";
		mes "Let me pray for you before you leave. Dear God, please watch over your children...";
		erasequest 14656;// Finding Father Grimm's Colleagues
		setquest 14657;// Jojo Is the Mage's Name
		setquest 14658;// Jubilee Is the Priest's Name
		npcskill "AL_INCAGI",10,0,0;
		npcskill "AL_BLESSING",10,0,0;
		ill_vampire = 6;
		.@char_id = getcharid(0);
		cloakoffnpcself( "Priest#ilgf01" );
		for ( .@i = 3; .@i < 10; ++.@i )
			cloakoffnpcself( "Marina#ilgf0" + .@i );
		close;
	}
	if (ill_vampire == 6) {
		.@char_id = getcharid(0);
		cloakoffnpcself( "Priest#ilgf01" );
		for ( .@i = 3; .@i < 10; ++.@i )
			cloakoffnpcself( "Marina#ilgf0" + .@i );
		mes "[Gem]";
		mes "I hope Brother Jubilee and Brother Jojo are safe.";
		next;
		mes "[Gem]";
		mes "If you have to leave, let Sister Marina know. She'll send you back to where you came from.";
		close;
	}
	if (ill_vampire == 7) {
		mes "[Gem]";
		mes "Brother Jubilee has left to treat his wounds, but Brother Jojo hasn't returned. I really hope he's safe.";
		next;
		mes "[Gem]";
		mes "If you have to leave, let Sister Marina know. She'll send you back to where you came from.";
		close;
	}
	if (ill_vampire < 14) {
		mes "[Gem]";
		mes "I really hope Brother Jojo is safe.";
		next;
		mes "[Gem]";
		mes "If you have to leave, let Sister Marina know. She'll send you back to where you came from.";
		close;
	}
	if (ill_vampire == 14) {
		mes "[Gem]";
		mes "Adventurer, are you leaving now?";
		next;
		select("Father Grimm must be getting anxious by now.");
		mes "[" + strcharinfo(0) + "]";
		mes "Yes. Now that I know you're safe, it's time I return to Father Grimm.";
		next;
		mes "[Gem]";
		mes "According to our assessment, what happens inside this place doesn't seem to ^0000cdaffect^000000 the outside world.";
		next;
		mes "[Gem]";
		mes "That's good, but someone still has to stay here to keep an eye on them. You understand us, right? Please let Brother Grimm know.";
		next;
		select("I was surprised.");
		mes "[" + strcharinfo(0) + "]";
		mes "You're from the Church. I didn't think you'd let those vampires live.";
		next;
		mes "[Marina]";
		mes "If we play by the rules, then we shouldn't allow them to live.";
		next;
		mes "[Gem]";
		mes "She's right. We shouldn't. But looking at them... I wasn't sure if they deserved to die.";
		next;
		mes "[Gem]";
		mes "It's something we need to think about.";
		next;
		emotion ET_STARE, getnpcid(0, "Marina#ilgf01");
		mes "[Marina]";
		mes "But if they make even the slightest mistake, we'll get rid of them!";
		next;
		emotion ET_OK, getnpcid(0, "Antoine#ilgf01");
		mes "[Antoine]";
		mes "If that happens, I'll let you take care of them by yourself.";
		next;
		mes "[Gem]";
		mes "Please tell Brother Grimm that we've decided to stay to keep an eye on them.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I will. Stay safe.";
		erasequest 14665;// Is the Fight Over?
		setquest 14666;// Warden's Role
		ill_vampire = 15;
		close2;
		warp "gef_dun01",133,219;
		end;
	}
	if (ill_vampire == 15) {
		mes "[Gem]";
		mes "Please tell Brother Grimm that we've decided to stay";
		next;
		mes "[Gem]";
		mes "If you want to leave, ask Sister Marina to let you out.";
		close;
	}
	switch( checkquest(14668,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Gem]";
		mes "Adventurer, not enough time has passed since you hunted last time. You need rest.";
		next;
		mes "[Gem]";
		mes "Please come back ^0000cdafter dawn^000000 tomorrow.";
		close;
	case 2:
		mes "[Gem]";
		mes "Adventurer, welcome back.";
		next;
		mes "[Gem]";
		mes "As usual, I'd like you to exterminate ^0000cdRestless Deads^000000. There are ^0000cdthree different kinds: Small, Fast, and Big. Please exterminate 10 each.^000000.";
		erasequest 14668;// Get Some Rest
		setquest 14667;// Send the Dead Back to Earth
		close;
	}
	switch( checkquest(14667,HUNTING) ) {
	case -1:
		mes "[Gem]";
		mes "Adventurer, are you busy?";
		next;
		mes "[Gem]";
		mes "Even if you are busy, please spare me a moment of your time.";
		next;
		if (select( "Sure, why not?", "But I'm too busy.") == 2) {
			mes "[Gem]";
			mes "Okay, then I'll wait until you have some time for me.";
			close;
		}
		mes "[Gem]";
		mes "As you know, we're here to keep an eye on them.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Yes.";
		next;
		mes "[Gem]";
		mes "Now, that's interfering with our original mission, which is to keep this place clear of the unholy.";
		next;
		mes "[Gem]";
		mes "We've been trying to do both, and it's hard to do that between just the three of us.";
		next;
		mes "[Gem]";
		mes "The dead belong in the ground. We are here to ^0000cdput the undead back to eternal sleep^000000.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "You mean you need help.";
		next;
		mes "[Gem]";
		mes "Yes, we do.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "What kinds of monsters do you want me to take care of?";
		next;
		mes "[Gem]";
		mes "Please exterminate ^0000cdRestless Dead^000000. There are ^0000cdthree different kinds: Small, Fast, and Big. Please exterminate 10 each.^000000.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Got it. I was thinking, now that I'm  here, I might as well help you while I can. I'm glad that I can. I'll be back.";
		setquest 14667;// Send the Dead Back to Earth
		close;
	case 0:
	case 1:
		mes "[Gem]";
		mes "Adventurer, did you take care of what I asked?";
		next;
		mes "[Gem]";
		mes "Or did you forget what I asked you to do?";
		next;
		mes "[Gem]";
		mes "Please exterminate ^0000cdRestless Deads^000000. There are ^0000cdthree different kinds: Small, Fast, and Big. Please exterminate 10 each.^000000.";
		next;
		mes "[Gem]";
		mes "All the dead must return to the earth.";
		close;
	case 2:
		mes "[Gem]";
		mes "Adventurer, you took care of them all. Thank you. They will also thank you from Heaven.";
		next;
		mes "[Gem]";
		mes "Why don't you go get some rest and come back after dawn?";
		erasequest 14667;// Send the Dead Back to Earth
		setquest 14668;// Get Some Rest
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	end;

OnInit:
	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(14656) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(14665) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14668,PLAYTIME) == -1 && checkquest(14667,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14667,HUNTING) == 2") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14668,PLAYTIME) == 2") );
	end;
}

// Jubilee Is the Priest's Name
gef_d01_i,93,178,5	script(CLOAKED)	Marina#ilgf03	4_F_MONK,5,5,{
	end;
OnTouch:
	if (ill_vampire == 6) {
		setpcblock PCBLOCK_NPC, true;
		.@num = atoi( replacestr( strnpcinfo(2), "ilgf0", "" ) );
		if (.@num == 3)
			npctalk "I'm sensing some faint energy in the east. Let's go.", "", bc_self;
		else if (.@num == 4)
			npctalk "Whoever is in the east, their energy is getting stronger. Let's hurry!", "", bc_self;
		else if (.@num == 5)
			npctalk "I'm sensing faint energy in the south. Let's hurry!", "", bc_self;
		else if (.@num == 6)
			npctalk "I'm sensing some faint energy in the east. Let's go.", "", bc_self;
		else if (.@num == 7)
			npctalk "Farther east! We're almost there!", "", bc_self;
		else if (.@num == 8)
			npctalk "Let's go north!", "", bc_self;
		else if (.@num == 9)
			npctalk "Let's go south!", "", bc_self;
		sleep2 1500;
		specialeffect EF_TELEPORTATION2;
		cloakonnpcself();
		setpcblock PCBLOCK_NPC, false;
	}
	end;
}
gef_d01_i,127,153,5	duplicate(Marina#ilgf03)	Marina#ilgf04	4_F_MONK,5,5
gef_d01_i,213,237,5	duplicate(Marina#ilgf03)	Marina#ilgf05	4_F_MONK,5,5
gef_d01_i,150,224,5	duplicate(Marina#ilgf03)	Marina#ilgf06	4_F_MONK,5,5
gef_d01_i,208,144,5	duplicate(Marina#ilgf03)	Marina#ilgf07	4_F_MONK,5,5
gef_d01_i,250,130,5	duplicate(Marina#ilgf03)	Marina#ilgf08	4_F_MONK,5,5
gef_d01_i,255,202,5	duplicate(Marina#ilgf03)	Marina#ilgf09	4_F_MONK,5,5



gef_d01_i,250,164,0	script	#ilgf06	HIDDEN_WARP_NPC,3,5,{
	end;
OnTouch:
	if (ill_vampire == 6)
		cloakoffnpcself( "Priest#ilgf01" );
	end;
}

gef_d01_i,254,162,1	duplicate(dummy_cloaked_npc)	Undead#ilgf08	ILL_ZOMBIE
gef_d01_i,252,160,1	duplicate(dummy_cloaked_npc)	Undead#ilgf09	ILL_ZOMBIE
gef_d01_i,253,165,3	duplicate(dummy_cloaked_npc)	Marina#ilgf10	4_F_MONK

gef_d01_i,250,164,5	script(CLOAKED)	Priest#ilgf01	4_M_MINISTER,5,5,{
	if (ill_vampire != 6)
		end;
	.@char_id = .@char_id;
	mes "[Priest]";
	mes "What do I do? I can't walk because of my leg. I can't teleport because I don't have enough energy left.";
	next;
	emotion ET_CRY;
	mes "[Priest]";
	mes "*Gasp* Am I going to die? Am I? I can't believe I'm going to die in a place like this!";
	sleep2 500;
	cloakoffnpcself( "Undead#ilgf08" );
	cloakoffnpcself( "Undead#ilgf09" );
	npctalk "Grr...", "Undead#ilgf08", bc_self;
	npctalk "Grrgghh...", "Undead#ilgf09", bc_self;
	next;
	mes "[Priest]";
	mes "YELP! Not again! Help!";
	next;
	select("Typical priest... Wait, is that him?");
	mes "[" + strcharinfo(0) + "]";
	mes "Could he be Father Jubilee?";
	mes "Marina, I think we've found him!";
	sleep2 500;
	cloakoffnpcself( "Marina#ilgf10" );
	specialeffect EF_TELEPORTATION2, AREA, "Marina#ilgf10";
	npctalk "What are you doing here?", "Marina#ilgf10", bc_self;
	next;
	mes "[Marina]";
	mes "Brother Jubilee?";
	next;
	mes "[Jubilee]";
	mes "Ah, Sister Marina! Help! You've got to help me if you don't want to feel guilt over my death later!";
	npctalk "Let's secure this place first.", "Marina#ilgf10", bc_self;
	sleep2 500;
	specialeffect EF_GLASSWALL2;
	sleep2 1000;
	npctalk "Adventurer?", "Marina#ilgf10", bc_self;
	sleep2 1000;
	unittalk getcharid(3), "" + strcharinfo(0) + " : Yes, I'm ready!", bc_self;
	next;
	mes "[Marina]";
	mes "The dead shall return to the earth!";
	npctalk "Turn Undead!", "Marina#ilgf10", bc_self;
	sleep2 1000;
	specialeffect EF_TURNUNDEAD, AREA, "Undead#ilgf08";
	specialeffect EF_TURNUNDEAD, AREA, "Undead#ilgf09";
	npctalk "RAWR!", "Undead#ilgf08", bc_self;
	npctalk "GRRRR!", "Undead#ilgf09", bc_self;
	sleep2 1000;
	specialeffect EF_DEVIL, AREA, "Undead#ilgf08";
	specialeffect EF_DEVIL, AREA, "Undead#ilgf09";
	cloakonnpcself( "Undead#ilgf08" );
	cloakonnpcself( "Undead#ilgf09" );
	next;
	npctalk "Brother, are you all right?", "Marina#ilgf10", bc_self;
	sleep2 1000;
	npctalk "Whew, I am now. Thank you.", "", bc_self;
	next;
	mes "[Marina]";
	mes "What happened? Where's Brother Jojo?";
	next;
	mes "[Jubilee]";
	mes "He and I were checking this place when we found some fluorescent mushrooms. Brother Jojo's eyes gleamed and...";
	npctalk "*Shakes her head* Wizards.", "Marina#ilgf10", bc_self;
	next;
	mes "[Jubilee]";
	mes "He touched one of the mushrooms, and it exploded.";
	npctalk "What? A mushroom exploded? And?", "Marina#ilgf10", bc_self;
	next;
	mes "[Jubilee]";
	mes "When I came back to my senses, he was gone and I couldn't move my leg.";
	next;
	mes "[Marina]";
	mes "Oh no, were you hit by the shrapnel?";
	next;
	mes "[Jubilee]";
	mes "Sister Marina, have you seen the mushrooms in this place? They're not like the mushrooms we know. They're miniature bombs that blow up when touched.";
	next;
	select("I'm glad they only grow here.");
	mes "[Marina]";
	mes "Brother Jubilee, do you think you can move?";
	next;
	mes "[Jubilee]";
	mes "If I could, I would've found my way back to you already.";
	next;
	select("I thought priests could heal themselves.");
	mes "[Marina]";
	mes "We take basic training to be servants of God, but what each one of us can do depends on our natural ability.";
	next;
	mes "[Jubilee]";
	mes "I specialize in singing. It's my purpose in life. I feel my greatest joy when I sing Odin's praises.";
	next;
	mes "[Marina]";
	mes "Don't be surprised. His singing voice really inspires courage and gives strength. He's here with us for a reason.";
	npctalk "I've been singing since I found out Brother Jojo was missing.", "", bc_self;
	sleep2 500;
	npctalk "You shouldn't have wasted your precious voice on these unholy creatures.", "Marina#ilgf10", bc_self;
	next;
	mes "[Marina]";
	mes "Adventurer, I'm going to take Brother Jubilee to Sister Gem. Could you take a look around this place? I'll be back as soon as I can.";
	next;
	mes "[Jubilee]";
	mes "Watch for illusions. The notebook's owner's memories manifest themselves sporadically around here.";
	next;
	mes "[Jubilee]";
	mes "Also, I've sensed an evil presence. Please be careful.";
	next;
	mes "[Marina]";
	mes "Let's go.";
	unittalk getcharid(3), "" + strcharinfo(0) + " : I'd better look for Jojo.", bc_self;
	specialeffect EF_TELEPORTATION2, AREA, "Marina#ilgf10";
	specialeffect EF_TELEPORTATION2;
	cloakonnpcself( "Marina#ilgf10" );
	cloakonnpcself( "Priest#ilgf01" );
	erasequest 14658;// Jubilee Is the Priest's Name
	ill_vampire = 7;

	for ( .@i = 3; .@i < 10; ++.@i )
		cloakonnpcself( "Marina#ilgf0" + .@i );

	cloakoffnpcself( "Undead#ilgf06" );
	cloakoffnpcself( "Wizard#ilgf06" );
	cloakoffnpcself( "Wizard#ilgf07" );

	cloakoffnpcself( "Wizard#ilgf08" );
	cloakoffnpcself( "Nameless Catacomb#ilgf01" );

	cloakoffnpcself( "Wizard#ilgf09" );
	cloakoffnpcself( "Wizard#ilgf10" );

	cloakoffnpcself( "Wizard#ilgf11" );

	cloakoffnpcself( "Wizard#ilgf12" );
	cloakoffnpcself( "Wizard#ilgf13" );
	cloakoffnpcself( "Nameless Catacomb#ilgf02" );

	cloakoffnpcself( "Wizard#ilgf14" );
	cloakoffnpcself( "Wizard#ilgf15" );
	cloakoffnpcself( "Nameless Catacomb#ilgf03" );

	cloakoffnpcself( "Wizard#ilgf16" );
	cloakoffnpcself( "Wizard#ilgf17" );

	cloakoffnpcself( "Wizard#ilgf18" );
	cloakoffnpcself( "Someone's Dream#ilgf18" );

	cloakoffnpcself( "Wizard#ilgf19" );
	cloakoffnpcself( "Wizard#ilgf20" );
	cloakoffnpcself( "Undead#ilgf05" );

	cloakoffnpcself( "Undead#ilgf02" );
	cloakoffnpcself( "Undead#ilgf03" );
	cloakoffnpcself( "Undead#ilgf04" );
	cloakoffnpcself( "Wizard#ilgf21" );
	cloakoffnpcself( "Wizard#ilgf22" );

	cloakoffnpcself( "Wizard#ilgf23" );
	cloakoffnpcself( "Fast Undead#ilgf01" );

	cloakoffnpcself( "Wizard#ilgf24" );
	cloakoffnpcself( "Shining Mushroom#ilgf01" );

	cloakoffnpcself( "Wizard#ilgf25" );
	cloakoffnpcself( "Wizard#ilgf26" );
	cloakoffnpcself( "Undead#ilgf01" );

	cloakoffnpcself( "Wizard#ilgf27" );
	cloakoffnpcself( "Wizard#ilgf28" );
	close;

OnTouch:
	if (ill_vampire == 6)
		npctalk "This is bad, really bad!", "", bc_self;
	end;
}

/*
// never enabled?
gef_d01_i,131,155,3	duplicate(dummy_npc)	Wizard#ilgf03	4_F_BOMI,5,5
gef_d01_i,129,154,7	duplicate(dummy_npc)	Wizard#ilgf04	4_GEFFEN_05
gef_d01_i,113,97,7	duplicate(dummy_npc)	Wizard#ilgf05	2_M_SAGE_B,5,5
gef_d01_i,116,96,1	duplicate(dummy_npc)	Undead#ilgf07	GHOUL
*/

gef_d01_i,49,113,3	script(CLOAKED)	Wizard#ilgf06	4_GEFFEN_01,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	specialeffect 1033, AREA, "Undead#ilgf06";
	cloakonnpcself( "Undead#ilgf06" );
	sleep2 1000;
	npctalk "Ah, it died!", "", bc_self;
	sleep2 1500;
	npctalk "Maybe Yggdrasil leaves kill the undead.", "Wizard#ilgf07", bc_self;
	sleep2 1500;
	npctalk "I think so. This means we can use them to take care of the undead.", "", bc_self;
	sleep2 1500;
	npctalk "You're a genius!", "Wizard#ilgf07", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf07";
	// specialeffect EF_GUARD2, AREA, "Undead#ilgf06";	// already hidden
	cloakonnpcself( "Wizard#ilgf06" );
	cloakonnpcself( "Wizard#ilgf07" );
	end;
}
gef_d01_i,46,112,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf07	4_M_ARUNA_NFM1
gef_d01_i,47,110,7	duplicate(dummy_cloaked_npc)	Undead#ilgf06	GHOUL


gef_d01_i,137,60,3	script(CLOAKED)	Wizard#ilgf08	1_M_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	specialeffect EF_TEMP_FAIL, AREA, "Nameless Catacomb#ilgf01";
	sleep2 1500;
	npctalk "Um, even this can't raise the dead. Then what brought those creatures back from the dead?", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf08";
	specialeffect EF_GUARD2, AREA, "Nameless Catacomb#ilgf01";
	cloakonnpcself( "Wizard#ilgf08" );
	cloakonnpcself( "Nameless Catacomb#ilgf01" );
	end;
}
gef_d01_i,136,58,5	duplicate(dummy_cloaked_npc)	Nameless Catacomb#ilgf01	4_SOIL


gef_d01_i,67,85,5	script(CLOAKED)	Wizard#ilgf09	4_M_JOB_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "Maybe I should crush and mix these gemstones together, and see if I can use the mixture to separate the souls of the undead from their bodies.", "", bc_self;
	sleep2 1500;
	npctalk "I don't think those zombies have souls.", "Wizard#ilgf10", bc_self;
	sleep2 1500;
	npctalk "Then what can explain their mobility? Every living thing that moves has a soul.", "", bc_self;
	sleep2 1500;
	npctalk "Muscle spasm?", "Wizard#ilgf10", bc_self;
	sleep2 1500;
	npctalk "No. It's clear their souls have returned to their dead bodies. If we can attach and detach our souls freely from our bodies, we can forever escape from physical pain!", "", bc_self;
	sleep2 1500;
	npctalk "But our bodies don't need souls for their survival. I still think those corpses are just?", "Wizard#ilgf10", bc_self;
	sleep2 1500;
	npctalk "Just stop talking, and take care of these.", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf10";
	cloakonnpcself( "Wizard#ilgf09" );
	cloakonnpcself( "Wizard#ilgf10" );
	end;
}
gef_d01_i,67,83,1	duplicate(dummy_cloaked_npc)	Wizard#ilgf10	4_GEFFEN_05


gef_d01_i,156,234,3	script(CLOAKED)	Wizard#ilgf11	4_M_SIT_NOVICE,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "Hello. Are you an adventurer? How old are you? Is this your first time in this place?", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This place is too dangerous for Novices like you. You'd better leave as soon as possible.", bc_self;
	sleep2 1500;
	npctalk "Do I look like a Novice? You're cute.", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : What's this?", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	cloakonnpcself( "Wizard#ilgf11" );
	end;
}


gef_d01_i,48,255,5	script(CLOAKED)	Wizard#ilgf12	1_M_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "This is the forty-eighth attempt. Now, let me sprinkle holy water.", "", bc_self;
	sleep2 1500;
	specialeffect EF_BASH3D5, AREA, "Nameless Catacomb#ilgf02";
	emotion ET_THINK, getnpcid(0, "Nameless Catacomb#ilgf02");
	sleep2 1500;
	npctalk "Nothing happened. I'll increase the amount of holy water for the forty-ninth attempt.", "", bc_self;
	sleep2 1500;
	npctalk "Wouldn't it be better if we let a priest handle this?", "Wizard#ilgf13", bc_self;
	sleep2 1500;
	npctalk "No. Priests will try to get rid of these. Just focus on recording this process.", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf13";
	specialeffect EF_GUARD2, AREA, "Nameless Catacomb#ilgf02";
	cloakonnpcself();
	cloakonnpcself( "Wizard#ilgf13" );
	cloakonnpcself( "Nameless Catacomb#ilgf02" );
	end;
}
gef_d01_i,50,257,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf13	2_F_MAGICMASTER
gef_d01_i,50,254,5	duplicate(dummy_cloaked_npc)	Nameless Catacomb#ilgf02	4_SOIL


gef_d01_i,112,267,3	script(CLOAKED)	Wizard#ilgf14	4_M_JOB_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "Rise!", "", bc_self;
	// specialeffect , AREA, "Nameless Catacomb#ilgf03";	// todo?
	sleep2 1500;
	npctalk "It doesn't work.", "", bc_self;
	sleep2 1500;
	npctalk "I told you, I used 457 amulets on them, and none of them worked. They're fueled by something else.", "Wizard#ilgf15", bc_self;
	sleep2 1500;
	npctalk "Like what?", "", bc_self;
	sleep2 1500;
	npctalk "I don't know.", "Wizard#ilgf15", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf15";
	specialeffect EF_GUARD2, AREA, "Nameless Catacomb#ilgf03";
	cloakonnpcself( "Wizard#ilgf14" );
	cloakonnpcself( "Wizard#ilgf15" );
	cloakonnpcself( "Nameless Catacomb#ilgf03" );
	end;
}
gef_d01_i,110,266,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf15	4_M_ARUNA_NFM1
gef_d01_i,111,264,5	duplicate(dummy_cloaked_npc)	Nameless Catacomb#ilgf03	4_SOIL


gef_d01_i,55,167,3	script(CLOAKED)	Wizard#ilgf16	4_M_ARUNA_NFM1,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "I miss my Happy. When we finally make this work, I want to bring back Happy first.", "", bc_self;
	sleep2 1500;
	npctalk "Don't. Look at them. They're not normal. Happy will probably chew on you instead of his chew toy.", "Wizard#ilgf17", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf16";
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf16";
	cloakonnpcself( "Wizard#ilgf16" );
	cloakonnpcself( "Wizard#ilgf17" );
	end;
}
gef_d01_i,53,166,7	duplicate(dummy_cloaked_npc)	Wizard#ilgf17	2_F_MAGICMASTER


gef_d01_i,236,235,1	script(CLOAKED)	Wizard#ilgf18	1_M_WIZARD,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "*Whine*", "Someone's Dream#ilgf18", bc_self;
	sleep2 1500;
	npctalk "Ah, I'm sorry! Aww, this is just too creepy. Just kill me already. I can't watch the dreams you show me anymore.", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf18";
	specialeffect EF_GUARD2, AREA, "Someone's Dream#ilgf18";
	cloakonnpcself( "Wizard#ilgf18" );
	cloakonnpcself( "Someone's Dream#ilgf18" );
	end;
}
gef_d01_i,233,237,5	duplicate(dummy_cloaked_npc)	Someone's Dream#ilgf18	NIGHTMARE


gef_d01_i,255,201,5	script(CLOAKED)	Wizard#ilgf19	4_GEFFEN_05,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	specialeffect EF_GLASSWALL2;
	specialeffect EF_GLASSWALL2, AREA, "Wizard#ilgf20";
	npctalk "Ah, what do we do? They're stronger than I thought.", "", bc_self;
	sleep2 1500;
	npctalk "When can we leave?", "Wizard#ilgf20", bc_self;
	sleep2 1500;
	npctalk "After they go away. They'll kill us if we move now.", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf20";
	specialeffect EF_GUARD2, AREA, "Undead#ilgf05";
	cloakonnpcself( "Wizard#ilgf19" );
	cloakonnpcself( "Wizard#ilgf20" );
	cloakonnpcself( "Undead#ilgf05" );
	end;
}
gef_d01_i,254,200,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf20	2_F_MAGICMASTER
gef_d01_i,256,198,1	duplicate(dummy_cloaked_npc)	Undead#ilgf05	GHOUL


gef_d01_i,204,146,1	script(CLOAKED)	Wizard#ilgf21	4_GEFFEN_05,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	emotion ET_HUK;
	npctalk "Hey, there are too many of them! I told you to lure just one, not this many!", "", bc_self;
	sleep2 1500;
	emotion ET_HELP, getnpcid(0, "Wizard#ilgf22");
	npctalk "I can't stop them from following me!", "Wizard#ilgf22", bc_self;
	sleep2 1500;
	npctalk "Get down!", "", bc_self;
	sleep2 1500;
	specialeffect EF_FIREPILLARBOMB, AREA, "Undead#ilgf02";
	specialeffect EF_FIREPILLARBOMB, AREA, "Undead#ilgf03";
	specialeffect EF_FIREPILLARBOMB, AREA, "Undead#ilgf04";
	sleep2 1500;
	cloakonnpcself( "Undead#ilgf02" );
	cloakonnpcself( "Undead#ilgf03" );
	cloakonnpcself( "Undead#ilgf04" );
	npctalk "Whew, thanks!", "Wizard#ilgf22", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf22";
	cloakonnpcself( "Wizard#ilgf21" );
	cloakonnpcself( "Wizard#ilgf22" );
	end;
}
gef_d01_i,202,149,5	duplicate(dummy_cloaked_npc)	Wizard#ilgf22	4_M_ARUNA_NFM1
gef_d01_i,202,152,5	duplicate(dummy_cloaked_npc)	Undead#ilgf02	GHOUL
gef_d01_i,200,151,5	duplicate(dummy_cloaked_npc)	Undead#ilgf03	ZOMBIE
gef_d01_i,204,151,3	duplicate(dummy_cloaked_npc)	Undead#ilgf04	GHOUL


gef_d01_i,257,110,1	script(CLOAKED)	Wizard#ilgf23	4_F_BOMI,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "Why is that one so fast? I might die before I have a chance to take a look at it.", "", bc_self;
	sleep2 1500;
	specialeffect EF_QUAGMIRE, AREA, "Fast Undead#ilgf01";
	sleep2 1500;
	npctalk "How can I catch it? I wish there was a way to take it to my lab...", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Fast Undead#ilgf01";
	cloakonnpcself( "Wizard#ilgf23" );
	cloakonnpcself( "Fast Undead#ilgf01" );
	end;
}
gef_d01_i,253,112,5	duplicate(dummy_cloaked_npc)	Fast Undead#ilgf01	GHOUL


gef_d01_i,230,76,3	script(CLOAKED)	Wizard#ilgf24	4_M_BIBI,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "I'd better be careful. I don't want to die because I was gathering some mushroom spores.", "", bc_self;
	sleep2 1500;
	specialeffect EF_HATED, AREA, "Shining Mushroom#ilgf01";
	sleep2 1500;
	npctalk "This should be enough to illuminate a room.", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Shining Mushroom#ilgf01";
	cloakonnpcself( "Wizard#ilgf24" );
	cloakonnpcself( "Shining Mushroom#ilgf01" );
	end;
}
gef_d01_i,228,75,3	duplicate(dummy_cloaked_npc)	Shining Mushroom#ilgf01	ILL_BLACK_MUSHROOM


gef_d01_i,93,34,1	script(CLOAKED)	Wizard#ilgf25	4_F_BOMI,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "Let's use a scroll and a Yggdrasil leaf at the same time this time. I'll activate the scroll from here. You use the leaf from there.", "", bc_self;
	sleep2 1500;
	npctalk "Okay.", "Wizard#ilgf26", bc_self;
	sleep2 1500;
	specialeffect EF_POISONHIT, AREA, "Undead#ilgf01";
	sleep2 1500;
	npctalk "Did we fail again?", "", bc_self;
	sleep2 1500;
	npctalk "Why wouldn't it turn into a human? If the dead can come back to life, then it should be able to turn into a human.", "Wizard#ilgf26", bc_self;
	sleep2 1500;
	npctalk "Let's calm down, and try something else.", "", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;
	specialeffect EF_GUARD2;
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf26";
	specialeffect EF_GUARD2, AREA, "Undead#ilgf01";
	cloakonnpcself( "Wizard#ilgf25" );
	cloakonnpcself( "Wizard#ilgf26" );
	cloakonnpcself( "Undead#ilgf01" );
	end;
}
gef_d01_i,94,37,3	duplicate(dummy_cloaked_npc)	Wizard#ilgf26	1_M_WIZARD
gef_d01_i,91,35,5	duplicate(dummy_cloaked_npc)	Undead#ilgf01	GHOUL

// gef_d01_i,101,124,3	duplicate(dummy_cloaked_npc)	Wizard#ilgf27	4_F_BOMI,5,5	// npc has official range. Effect ?
gef_d01_i,101,124,3	duplicate(dummy_cloaked_npc)	Wizard#ilgf27	4_F_BOMI
gef_d01_i,99,122,7	script(CLOAKED)	Wizard#ilgf28	4_F_BOMI,5,5,{
	end;
OnTouch:
	setpcblock PCBLOCK_NPC, true;
	npctalk "We can't experiment in a place like this. Why don't we capture one and bring it to our lab?", "Wizard#ilgf27", bc_self;
	sleep2 1500;
	npctalk "Don't you feel the energy in the air?", "Wizard#ilgf28", bc_self;
	sleep2 1500;
	npctalk "What are you saying?", "Wizard#ilgf27", bc_self;
	sleep2 1500;
	npctalk "Imagine what we can do with this power.", "Wizard#ilgf28", bc_self;
	sleep2 1500;
	npctalk "...Oh, you're right.", "Wizard#ilgf27", bc_self;
	sleep2 1500;
	unittalk getcharid(3), "" + strcharinfo(0) + " : This... It must be an old memory of the notebook's owner.", bc_self;
	sleep2 2500;
	setpcblock PCBLOCK_NPC, false;

	specialeffect EF_GUARD2, AREA, "Wizard#ilgf27";
	specialeffect EF_GUARD2, AREA, "Wizard#ilgf28";
	cloakonnpcself( "Wizard#ilgf27" );
	cloakonnpcself( "Wizard#ilgf28" );
	end;
}
// End of the "Wizard illusions"


gef_d01_i,80,139,5	duplicate(dummy_cloaked_npc)	Gem#ilgf02	1_F_PRIEST,5,5
gef_d01_i,86,133,1	duplicate(dummy_cloaked_npc)	Marina#ilgf02	4_F_MONK,5,5
gef_d01_i,85,139,3	duplicate(dummy_cloaked_npc)	Antoine#ilgf02	4_GEFFEN_01,5,5
gef_d01_i,84,135,3	duplicate(dummy_cloaked_npc)	Dracula#ilgf03	4_DRACULA,5,5
gef_d01_i,87,137,3	duplicate(dummy_cloaked_npc)	King#ilgf02	4_NFBAT,5,5
gef_d01_i,80,132,7	duplicate(dummy_cloaked_npc)	Jojo#ilgf01	4_M_JOB_WIZARD,5,5


gef_d01_i,81,135,5	script	Wizard#ilgf01	4_F_BOMI,5,5,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[Bomi]";
		mes "Are you sure you can carry all that stuff? Why don't you lighten your bag?";
		close;
	}
	.@player_name$ = strcharinfo(0);
	if (ill_vampire < 7) {
		mes "[Wizard]";
		mes "This one has a different color from Neon Mushrooms. Is it a new kind? I'd better pick it carefully...";
		close;
	}
	if (ill_vampire == 7) {
		mes "[Wizard]";
		mes "This one has a different color from Neon Mushrooms. Is it a new kind? I'd better pick it carefully...";
		next;
		mes "[" + .@player_name$ + "]";
		mes "^0000cdTypical wizard^000000... Could that be ^0000cdJojo^000000?";
		next;
		select("Jojo?");
		mes "[Wizard]";
		mes "...? Are you a human?";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Jojo? You're Jojo, right? Your colleagues are worried about you. Let's go back. You're not hurt, are you?";
		next;
		mes "[Wizard]";
		mes "No, I'm not Jojo.";
		next;
		mes "[Wizard]";
		mes "Do I look like a ^0000cdhuman^000000?";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Of course.";
		next;
		mes "[Wizard]";
		mes "...";
		next;
		emotion ET_HUK, playerattached();
		select("...Are you not a human?");
		mes "[Wizard]";
		mes "I'm... My name is ^0000cdBomi^000000. I'm sorry I'm not the person you're looking for.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Bomi? Wait, you're that Bomi?";
		next;
		mes "[Bomi]";
		mes "Do you know me?";
		next;
		select("I've picked up your notebook.");
		mes "[" + .@player_name$ + "]";
		mes "I didn't mean to be nosy. I had to know who it belonged to, so I could?";
		next;
		mes "[Bomi]";
		mes "I threw it away.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Why did you throw it away? Why are you staying here?";
		next;
		mes "[Bomi]";
		mes "Because I'm a monster. I belong here.";
		next;
		select("Why do you think you're a monster?");
		mes "[Bomi]";
		mes "Because I'm a vampire.";
		next;
		select("A vampire?!");
		mes "[" + .@player_name$ + "]";
		mes "What happened? You were a human.";
		next;
		mes "[Bomi]";
		mes "I got betrayed by my best friend.";
		unittalk getcharid(3), "" + .@player_name$ + " : ...You got betrayed?", bc_self;
		next;
		mes "[Bomi]";
		mes "Most people try to make the most out of life because they know they can't live forever.";
		next;
		mes "[Bomi]";
		mes "I was given a shorter time to live than most. Ever since I was born, I'd been told I'd never outlive my parents.";
		next;
		mes "[Bomi]";
		mes "People desire what they don't have. I desired ^0000cdstrength^000000 because I was too small and frail to live like others my age.";
		next;
		mes "[Bomi]";
		mes "I became a wizard because I thought magic could compensate for my physical weakness.";
		next;
		mes "[Bomi]";
		mes "I didn't realize a strong mind comes from a strong body, though...";
		next;
		mes "[Bomi]";
		mes "Magic was exhausting to both my mind and my body. I reached my limits more quickly than I thought. But I wasn't upset. I thought I could remedy that.";
		unittalk getcharid(3), "" + .@player_name$ + " : Oh. That's why you were studying the zombies in these catacombs.", bc_self;
		next;
		mes "[Bomi]";
		mes "Yes. Doing that, I felt more alive than ever. My burning desire for life made me who I was.";
		next;
		mes "[Bomi]";
		mes "Then, one day, while I was here, I met an ^0000cdentity^000000 who was not human.";
		next;
		mes "Bomi is gathering her thoughts. I should talk to her later.";
		erasequest 14657;// Jojo Is the Mage's Name
		setquest 14659;// Lost in Thought
		ill_vampire = 8;
		// note: the "old memories" npcs are not automatically cloakoff
		close;
	}
	if (ill_vampire == 8) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "Do you know what I found here?", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "" + .@player_name$ + " : Nightmares, mushrooms, zombies...", bc_self;
		sleep2 2000;
		npctalk "There's one more.", "", bc_self;
		sleep2 1000;
		unittalk getcharid(3), "" + .@player_name$ + " : Are you talking about Dracula? I've heard of him.", bc_self;
		sleep2 2500;
		npctalk "When I first met him, he was close to perishing. His vulnerability reminded me strongly of my own. ", "", bc_self;
		sleep2 2000;
		npctalk "That's why I fed him my blood and tended to his wounds, even though I knew I shouldn't.", "", bc_self;
		sleep2 2000;
		npctalk "Later, I met him again and we got close. He was my first real friend.", "", bc_self;
		sleep2 1500;
		cloakoffnpcself( "Dracula#ilgf01" );
		specialeffect EF_GUARD2, AREA, "Dracula#ilgf01";
		specialeffect EF_BLUELIGHTBODY, AREA, "Dracula#ilgf01";
		npctalk "Why did you save me?", "Dracula#ilgf01", bc_self;
		sleep2 2000;
		npctalk "It's hard to explain. Let's just say we humans like to save others.", "", bc_self;
		sleep2 2000;
		npctalk "That's not true. Others of your kind just want to kill me.", "Dracula#ilgf01", bc_self;
		sleep2 2000;
		npctalk "Not all of us are made the same.", "", bc_self;
		sleep2 1500;
		npctalk "How about I give you a gift in return for your favor? I know you want a strong body and longevity.", "Dracula#ilgf01", bc_self;
		sleep2 1500;
		npctalk "But how? Wait, are you offering...? No, thanks.", "", bc_self;
		sleep2 1500;
		npctalk "You want them so badly that you're risking your life by studying in a place like this.", "Dracula#ilgf01", bc_self;
		sleep2 1500;
		npctalk "I do, but I don't want to give up my humanity for them.", "", bc_self;
		sleep2 2000;
		npctalk "But you're afraid of dying. And your days are numbered.", "Dracula#ilgf01", bc_self;
		sleep2 1500;
		npctalk "My fear of death is what keeps me going. It's made me who I am.", "", bc_self;
		sleep2 2000;
		npctalk "Giving up my humanity for eternal life goes against my beliefs, all my hard work up till now, and everything I tried hard to protect.", "", bc_self;
		sleep2 2000;
		npctalk "Above all, I'll be giving up on myself, and I can't do that.", "", bc_self;
		sleep2 2000;
		npctalk "Even if you're turned, you'll still be you.", "Dracula#ilgf01", bc_self;
		sleep2 1500;
		npctalk "On the outside, maybe. But I will no longer fear death, and therefore have no desire to live.", "", bc_self;
		sleep2 2000;
		npctalk "It pains me to see you wither away, day by day.", "Dracula#ilgf01", bc_self;
		sleep2 2000;
		setpcblock PCBLOCK_NPC, false;

		npctalk "I can't say I understand your logic, but I'll respect your wishes.", "Dracula#ilgf01", bc_self;
		mes "[Bomi]";
		mes "So he ^0000cdpromised^000000. Then one day, some people came here looking for him, and they fought.";
		next;
		mes "[Bomi]";
		mes "And the next thing I knew, I was turned. Dracula broke his promise.";
		next;
		npctalk "How could you do this to me?!", "", bc_self;
		sleep2 1000;
		npctalk "I'm sorry.", "Dracula#ilgf01", bc_self;
		sleep2 1500;
		specialeffect EF_GUARD2, AREA, "Dracula#ilgf01";
		cloakonnpcself( "Dracula#ilgf01" );
		mes "[Bomi]";
		mes "I couldn't believe he turned me into a monster. I trusted him!";
		next;
		mes "[Bomi]";
		mes "People in the outside world must think I skipped town. How long has it been since I left?";
		next;
		mes "[Bomi]";
		mes "Sigh, maybe they all forgot about me, as if I never existed. That's what pains me the most.";
		next;
		mes "[Bomi]";
		mes "I try to ignore my reality, but this ever-present hunger and thirst keep reminding me what kind of terrible monster I am.";
		next;
		mes "[Bomi]";
		mes "If I go back to the outside world, I won't be able to stop myself from hurting people.";
		next;
		select("How did you sustain yourself so far?");
		mes "[Bomi]";
		mes "I studied ^0000cdpharmaceutical formulation^000000 to make up for my weak stamina with potions.";
		next;
		mes "[Bomi]";
		mes "I drink fake blood that I make with the ingredients I can find here. I may look ^0000cdhuman enough^000000, but I'm not. Not really.";
		next;
		mes "[Bomi]";
		mes "I'm sorry I bored you with my story.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Not at all.";
		next;
		mes "[Bomi]";
		mes "Adventurer, I don't want to impose on your kindness, but may I ask you a favor?";
		next;
		select("Sure, anything for you.");
		mes "[Bomi]";
		mes "You shouldn't say that. What if I ask for your blood?";
		emotion ET_SWEAT, playerattached();
		next;
		mes "[Bomi]";
		mes "I was joking. I'm in the middle of collecting the fake blood ingredients, but right now I want to examine this mushroom. I've never seen it before. I want to check it while it's still fresh.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "What kinds of ingredients do you need? I'll get them for you.";
		next;
		mes "[Bomi]";
		mes "Thank you. I need ^0000cd10 Sticky Bloods from Matte Drainliars and 10 Mushroom Saps from Neon Mushrooms^000000. Thank you for doing this for me.";
		erasequest 14659;// Lost in Thought
		setquest 14660;// Ingredients for Fake Blood
		ill_vampire = 9;
		close;
	}
	if (ill_vampire == 9) {
		mes "[" + .@player_name$ + "]";
		mes "Here, I brought the things you asked.";
		next;
		mes "[Bomi]";
		mes "Let's see...";
		next;
		if (countitem(25268) < 10 || countitem(25269) < 10) {
			mes "[Bomi]";
			mes "This isn't enough.";
			next;
			mes "[Bomi]";
			mes "Thank you. I need ^0000cd10 Sticky Bloods from Matte Drainliars and 10 Mushroom Saps from Neon Mushrooms^000000. Thank you for doing this for me.";
			close;
		}
		mes "[Bomi]";
		mes "Thank you.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "How's the mushroom?";
		next;
		mes "[Bomi]";
		mes "It turned out to be an ordinary, invaluable mushroom.";
		next;
		select("How do you make artificial blood?");
		mes "[Bomi]";
		mes "Matte Drainliars feed on the blood of the reanimated corpses in this place.";
		next;
		mes "[Bomi]";
		mes "Did you get it? But their blood is highly toxic. So I use these mushrooms to detoxify it.";
		next;
		mes "[Bomi]";
		mes "Like this!";
		specialeffect EF_PHARMACY_OK;
		next;
		mes "[Bomi]";
		mes "But even their sap cannot completely remove the toxins in the blood. And when I ingest too much toxins...";
		next;
		select("Maybe you should've chosen a different career path.");
		mes "[" + .@player_name$ + "]";
		mes "Like alchemist, for example.";
		next;
		mes "[Bomi]";
		mes "I didn't know I was talented at this. If I had ^0000cdenough time to live^000000, I would've had many different experiences. I might have chosen a different path.";
		next;
		mes "[Bomi]";
		mes "Oh, by the way, weren't you looking for someone? What did you say his name was? Juju?";
		next;
		select("Jojo.");
		mes "[Bomi]";
		mes "I haven't seen any other humans around here, but if I do, I'll let him know you're looking for him.";
		next;
		mes "[Bomi]";
		mes "I hope you'll find him soon. I'm not the only one here, you know. If you haven't found him, maybe he's?";
		next;
		mes "[Bomi]";
		mes "Never mind. Good luck finding him. Maybe you should check the catacombs in the south.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "Thank you. I'll see you.";
		next;
		mes "[Bomi]";
		mes "You'd better hurry.";
		cloakoffnpcself( "Dracula#ilgf02" );
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
		delitem 25268,10;// Sticky_Blood
		delitem 25269,10;// Mushroom_Sap
		erasequest 14660;// Ingredients for Fake Blood
		setquest 14661;// Jojo Is the Mage's Name 02
		ill_vampire = 10;
		close;
	}
	if (ill_vampire < 12) {
		cloakoffnpcself( "Dracula#ilgf02" );
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
		mes "[Bomi]";
		mes "I hope you'll find your friend soon. Why don't you check the catacombs in the south? He might be there.";
		close;
	}
	if (ill_vampire == 12) {
		viewpoint 2,85,131,1,0x00FF00;
		cloakoffnpcself( "Gem#ilgf02" );
		cloakoffnpcself( "Marina#ilgf02" );
		cloakoffnpcself( "Antoine#ilgf02" );

		mes "[Bomi]";
		mes "Stay away from me, and I won't hurt you.";
		next;
		mes "[Marina]";
		mes "One of us is missing. You hurt him, didn't you?";
		next;
		mes "[Bomi]";
		mes "I've never hurt anyone, and I won't start now.";
		next;
		mes "[Marina]";
		mes "Even if you won't, we're not going to let you go! Your existence in itself goes against His will!";
		next;
		mes "[Bomi]";
		mes "His will? God loves us all. Isn't that what you preach?";
		next;
		mes "[Marina]";
		mes "The dead belong in the ground, and you're one of them. What do you think you are?";
		next;
		mes "[Bomi]";
		mes "...But... But I really didn't hurt anyone.";
		next;
		mes "[Marina]";
		mes "That doesn't guarantee you won't in the future.";
		next;
		mes "[Gem]";
		mes "Wait, Sister Marina. Calm yourself.";
		next;
		mes "[Marina]";
		mes "Why aren't we getting rid of her already? The dead shall return to the earth! Brother Antoine!";
		npctalk "Sigh, Sister Marina is right.", "Antoine#ilgf02", bc_self;
		npctalk "Guillotine Fist!", "Marina#ilgf02", bc_self;
		sleep2 1000;
		cloakoffnpcself( "Dracula#ilgf03" );
		specialeffect EF_M01, AREA, "Dracula#ilgf03";
		specialeffect EF_BOTTOM_MAG, AREA, "Dracula#ilgf03";
		specialeffect EF_BEGINASURA, AREA, "Dracula#ilgf03";
		sleep2 1000;
		specialeffect EF_DRAGONFEAR, AREA, "Dracula#ilgf03";
		specialeffect EF_BLEEDING, AREA, "Dracula#ilgf03";
		specialeffect EF_COLDTHROW, AREA, "Dracula#ilgf03";
		specialeffect EF_TEIHIT1X, AREA, "Dracula#ilgf03";
		npctalk "Ugh!", "Dracula#ilgf03", bc_self;
		next;
		cloakoffnpcself( "King#ilgf02" );
		specialeffect EF_M01, AREA, "King#ilgf02";
		emotion ET_ANGER, getnpcid(0, "King#ilgf02");
		mes "[King]";
		mes "Argh, I can't believe you threw yourself in the middle of that! This is why I can't leave you alone!";
		next;
		mes "[Bomi]";
		mes "...Dracula? Why?";
		next;
		mes "[Marina]";
		mes "There's another vampire! No wonder why this place felt so off it's filled with vampires!";
		npctalk "Hey, you bat, the one over there! Are you also a vampire?", "Marina#ilgf02", bc_self;
		sleep2 1000;
		npctalk "Did the vampire call for help?", "Antoine#ilgf02", bc_self;
		next;
		emotion ET_FRET, getnpcid(0, "King#ilgf02");
		mes "[King]";
		mes "Human, did you just call me a bat? How dare you?";
		next;
		mes "[Gem]";
		mes "Wait, Sister Marina. I said, calm yourself.";
		next;
		mes "[Marina]";
		mes "We have to act now. We've already incapacitated one out of the three.";
		next;
		mes "[Gem]";
		mes "But one of them doesn't want to fight. She wants to talk.";
		next;
		mes "[King]";
		mes "Who wants to talk? Because I don't! I'm not going to go down without a fight!";
		specialeffect EF_TEIHIT1X, AREA, "King#ilgf02";
		specialeffect EF_SUI_EXPLOSION, AREA, "Marina#ilgf02";
		specialeffect EF_DARKBREATH, AREA, "Marina#ilgf02";
		next;
		mes "[Marina]";
		mes "Grr, let me go! Enough is enough!";
		next;
		cloakoffnpcself( "Jojo#ilgf01" );
		specialeffect EF_TELEPORTATION2, AREA, "Jojo#ilgf01";
		emotion ET_CONFUSE, getnpcid(0, "Jojo#ilgf01");
		mes "[Jojo]";
		mes "Oh geez, how do you move so fast?";
		next;
		mes "[Jojo]";
		mes "Everyone, calm the hell down!";
		next;
		mes "[Gem]";
		mes "Brother Jojo! You're safe!";
		next;
		mes "[Marina]";
		mes "Where were you? We couldn't find you, and we looked everywhere!";
		next;
		mes "[Antoine]";
		mes "It's true. His wounds are almost fully healed.";
		next;
		mes "[Dracula]";
		mes "Don't touch Bomi... She... I... We don't want to hurt anyone... She's taught me that...";
		npctalk "Hmpf, you should worry about yourself, you're dying!", "King#ilgf02", bc_self;
		next;
		mes "[Bomi]";
		mes "Dracula! Dracula! Let me heal you!";
		next;
		mes "[Marina]";
		mes "I'm not going to let you do that!";
		next;
		mes "[Gem]";
		mes "Leave them be. They saved Jojo.";
		next;
		mes "[Marina]";
		mes "But they could be using him as bait!";
		next;
		mes "[Gem]";
		mes "Even if they try to attack us, there are more of us than them.";
		npctalk "You're delusional if you think there's no strength in numbers.", "King#ilgf02", bc_self;
		next;
		mes "[Antoine]";
		mes "I agree with Sister Gem. Also, it's not an everyday opportunity that we can see vampires from this close.";
		next;
		mes "[Gem]";
		mes "You're Bomi, right? I read your notebook. What happened? What did these vampires do to you?";
		next;
		select("I can explain.");
		mes "I relayed Bomi and Dracula's story to Nun Gem and the others.";
		next;
		mes "[Gem]";
		mes "So you're saying they really are innocent.";
		next;
		mes "[Bomi]";
		mes "Dracula, hang on. Drink this.";
		next;
		mes "[Marina]";
		mes "Whose blood is that? You can't let him drink that!";
		next;
		mes "[Bomi]";
		mes "It's not real blood! He needs it! Can't you see he's dying?";
		next;
		mes "[Marina]";
		mes "You're dead already!";
		next;
		mes "[King]";
		mes "Gosh, you're so stubborn. Feed him. I'll keep them at bay.";
		npctalk "Let me help.", "Jojo#ilgf01", bc_self;
		sleep2 500;
		npctalk "You may feed him.", "Gem#ilgf02", bc_self;
		next;
		mes "[Marina]";
		mes "You're letting her feed him, that vampire? Sister Gem, have you forgotten your duty as our leader?";
		next;
		mes "[Jojo]";
		mes "Marina, I don't care who they are. They saved me and asked for nothing in return.";
		next;
		mes "[Jojo]";
		mes "I didn't understand why vampires would help humans, but now I know. Dracula learned from Bomi how to be more human.";
		next;
		mes "[Jojo]";
		mes "He said he wanted to understand humans, so he could better understand her. And I think he's achieved his goal.";
		next;
		mes "[Jojo]";
		mes "He helped me and expected nothing in return. Such a random act of kindness is a human trait, isn't it?";
		next;
		mes "[Jojo]";
		mes "And you shouldn't help someone because of who they are. Marina, are you really going to let him die because he's not one of us?";
		next;
		mes "[Marina]";
		mes "That only applies to us humans. They're vampires!";
		next;
		mes "[King]";
		mes "Now I understand why Dracula was so distrustful of you humans. I thought he was being too picky.";
		next;
		mes "[King]";
		mes "Hey, you monk, over there. What do you think makes you human? What do you think makes a vampire a vampire? What if there's a vampire that's never hurt anyone in their life?";
		next;
		mes "[Marina]";
		mes "I'll get rid of them.";
		next;
		mes "[King]";
		mes "What if there's a human who did nothing but hurt others. What would you do about them?";
		next;
		mes "[Marina]";
		mes "I'll let justice decide their fate.";
		next;
		mes "[King]";
		mes "When I hunt, I treated all humans equally because I'm a vampire. That's my rule.";
		next;
		mes "[King]";
		mes "Their rule is to help anyone who needs help regardless of who they are. Simple, isn't it?";
		next;
		mes "[Marina]";
		mes "...";
		next;
		mes "[Dracula]";
		mes "Mm... Bomi?";
		npctalk "Dracula, how are you feeling?", "King#ilgf02", bc_self;
		sleep2 500;
		npctalk "Whew, he's out of the woods now.", "Jojo#ilgf01", bc_self;
		next;
		mes "[Dracula]";
		mes "Did you... save me? I thought you wanted me to die.";
		next;
		mes "[Bomi]";
		mes "No, and now I understand why you made that decision. You couldn't just let me die, could you?";
		next;
		mes "[Bomi]";
		mes "Because I couldn't do it, either.";
		next;
		mes "[Dracula]";
		mes "...";
		npctalk "What are you guys doing?", "King#ilgf02", bc_self;
		sleep2 500;
		npctalk "Leave them alone. They're reconciling with each other.", "Jojo#ilgf01", bc_self;
		next;
		mes "[Gem]";
		mes "Brothers. Sisters. We need to talk.";
		erasequest 14663;// Bloody Fight
		setquest 14664;// Deep Misunderstanding
		ill_vampire = 13;
		close;
	}
	if (ill_vampire == 13) {
		mes "[Bomi]";
		mes "Thank you, and I'm sorry.";
		next;
		mes "[Dracula]";
		mes "I'm sorry I broke my promise. But even if I could go back in time, I would do it again.";
		next;
		mes "[Bomi]";
		mes "I understand now why you did that.";
		next;
		mes "[Jojo]";
		mes "Did you guys make up? Dracula, the worst is over. You just need to rest and regain your energy.";
		next;
		mes "[Dracula]";
		mes "Thank you.";
		next;
		mes "[King]";
		mes "*Snort* You can't beat mushrooms, but you can save vampires.";
		npctalk "They weren't mushrooms, they were zombies!", "Jojo#ilgf01", bc_self;
		sleep2 500;
		npctalk "Mushrooms and zombies. Same difference to me.", "King#ilgf02", bc_self;
		next;
		emotion ET_GO, getnpcid(0, "King#ilgf02");
		mes "[King]";
		mes "Drac, let's go. I know you're not hurting anymore. We should really go back to our castle this time.";
		next;
		mes "[Dracula]";
		mes "I'm going to stay.";
		next;
		mes "[King]";
		mes "What? No! You've made up with her. It's time to leave!";
		next;
		mes "[Gem]";
		mes "Please hear me out.";
		npctalk "What more do you have to say?", "King#ilgf02", bc_self;
		sleep2 500;
		npctalk "Just listen, will you?", "Jojo#ilgf01", bc_self;
		next;
		mes "[Gem]";
		mes "We know you haven't hurt anyone, and you want to keep it that way. And we appreciate you saved Brother Jojo.";
		npctalk "And?", "King#ilgf02", bc_self;
		sleep2 500;
		npctalk "Just hush!", "Jojo#ilgf01", bc_self;
		next;
		mes "[Gem]";
		mes "But that doesn't change the fact that your existence in itself defies our god's will. We can't leave you alone.";
		next;
		emotion ET_ANGER, getnpcid(0, "King#ilgf02");
		mes "[King]";
		mes "Drac, they won't leave us alone. Let's just get rid of them!";
		npctalk "No!", "", bc_self;
		npctalk "No!", "Dracula#ilgf03", bc_self;
		next;
		mes "[Marina]";
		mes "Sister Gem, this is just a waste of time. They're going to kill us the first chance they get. Let's get rid of of them before they do!";
		next;
		mes "[Antoine]";
		mes "Sisters, let me talk. Your tendency to jump to conclusions is not helping this situation.";
		next;
		mes "[Antoine]";
		mes "We understand you don't want to hurt anyone.";
		next;
		mes "[Antoine]";
		mes "But you're dangerous to others, whether you like it or not.";
		next;
		emotion ET_FRET, getnpcid(0, "King#ilgf02");
		mes "[King]";
		mes "Why are you looking at me? I didn't do anything!";
		next;
		mes "[Antoine]";
		mes "Now that we know you exist, we can't ignore you. I can, but these people here can't. Their church won't allow it.";
		npctalk "So what's your point?", "King#ilgf02", bc_self;
		next;
		mes "[Antoine]";
		mes "We're not going to make any decision. Instead, we'll ^0000cdstay here with you^000000.";
		next;
		emotion ET_ANGER, getnpcid(0, "King#ilgf02");
		mes "[King]";
		mes "So you can keep an eye on us. Drac, I can't take this anymore!";
		specialeffect EF_PORTAL4, AREA, "King#ilgf02";
		cloakoffnpcself( "King#ilgf02" );
		specialeffect EF_M01, AREA, "King#ilgf02";
		sleep2 1000;
		npctalk "I'm going to kill them all!", "King#ilgf02", bc_self;
		sleep2 1000;
		npctalk "Okay.", "", bc_self;
		next;
		emotion ET_FRET, getnpcid(0, "King#ilgf02");
		mes "[King]";
		mes "What? Drac! Stop acting like a human! We're proud, dignified vampires!";
		next;
		mes "[Dracula]";
		mes "Let's go back. I'm tired. I want to sleep.";
		npctalk "Let me go with you. I want to stay with you until you fully recover.", "Jojo#ilgf01", bc_self;
		next;
		emotion ET_ANGER, getnpcid(0, "King#ilgf02");
		specialeffect EF_PORTAL4, AREA, "King#ilgf02";
		cloakoffnpcself( "King#ilgf02" );
		specialeffect EF_M01, AREA, "King#ilgf02";
		mes "[King]";
		mes "I'm not happy with this arrangement, Drac. I'm going back to our castle once you get better, got it?";
		next;
		mes "[Gem]";
		mes "So we've come to an agreement. We'll leave now.";
		specialeffect EF_TELEPORTATION2, AREA, "Gem#ilgf02";
		sleep2 500;
		cloakonnpcself( "Gem#ilgf02" );
		next;
		mes "[Marina]";
		mes "You! I'm watching you! Better keep your coffin lid shut tight while you sleep!";
		specialeffect EF_TELEPORTATION2, AREA, "Marina#ilgf02";
		sleep2 500;
		cloakonnpcself( "Marina#ilgf02" );
		next;
		npctalk "What? Hey, you stop right there!", "King#ilgf02", bc_self;
		mes "[Antoine]";
		mes "I should leave too. Excuse me.";
		specialeffect EF_TELEPORTATION2, AREA, "Antoine#ilgf02";
		sleep2 500;
		cloakonnpcself( "Antoine#ilgf02" );
		next;
		mes "[King]";
		mes "Argh! I don't ever want to see them again! Let's go!";
		specialeffect EF_M01, AREA, "King#ilgf02";
		sleep2 500;
		cloakonnpcself( "King#ilgf02" );
		next;
		mes "[Jojo]";
		mes "Let's go.";
		next;
		mes "[Dracula]";
		mes "Bomi, I'll see you when I get better.";
		next;
		mes "[Jojo]";
		mes "Okay, go.";
		specialeffect EF_TELEPORTATION2, AREA, "Jojo#ilgf01";
		specialeffect EF_M01, AREA, "Dracula#ilgf03";
		sleep2 500;
		cloakonnpcself( "Jojo#ilgf01" );
		cloakonnpcself( "Dracula#ilgf03" );
		next;
		select("Finally, they all left. That was close.");
		mes "[Bomi]";
		mes "Thank you, Adventurer. Everything went well, and no one got hurt because of you.";
		next;
		select("You asked me if you looked like a human. Remember?");
		mes "[Bomi]";
		mes "I do.";
		next;
		select("What do you think defines a human?");
		mes "[" + .@player_name$ + "]";
		mes "I didn't know you when you were a human, but I don't think you were different from who you are now. You're still trying to protect what's important to you.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "I think you're more human than anyone else I know. You also taught a vampire humanity.";
		next;
		mes "[Bomi]";
		mes "...Thank you. I never imagined someone would say such kind words to me one day, but I've longed to hear them.";
		next;
		mes "[Bomi]";
		mes "I couldn't get over the fact that I became a monster, but now I know better. I may not be a human anymore, but I'm still me.";
		next;
		mes "[Bomi]";
		mes "Thank you.";
		next;
		mes "[" + .@player_name$ + "]";
		mes "I should go. It's time I report back.";
		next;
		mes "[Bomi]";
		mes "Okay. Travel safely. And thank you for your help.";
		erasequest 14664;// Deep Misunderstanding
		setquest 14665;// Is the Fight Over?
		ill_vampire = 14;
		close;
	}
	if (ill_vampire == 14 || ill_vampire == 15) {
		mes "[Bomi]";
		mes "Didn't you say you have to report back? Go to the exit. I smelled your friends there.";
		close;
	}
	switch( checkquest(14674,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
			mes "[Bomi]";
			mes "Adventurer, thank you for trying to help me, but I don't want you to strain yourself. Why don't you rest for now?";
			next;
			mes "[Bomi]";
			mes "You can come back after dawn.";
			close;
		}
		mes "[Bomi]";
		mes "I'm away right now. Please come back after dawn.";
		close;
	case 2:
		if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
			mes "[Bomi]";
			mes "Adventurer, welcome back. Could you help me today as usual?";
			.@npc_name$ = "Bomi";
		}
		else {
			mes "[" + .@player_name$ + "]";
			mes "Bomi is away. She has left a note.";
			.@npc_name$ = "Bomi's Note";
		}
		next;
		mes "[" + .@npc_name$ + "]";
		mes "I need ^0000cd10 Sticky Bloods from Matte Drainliars and 10 Mushroom Saps from Neon Mushrooms^000000. You can get them if you hunt at least ^0000cd5 Matte Drainliars and 5 Neon Mushrooms^000000.";
		next;
		mes "[" + .@npc_name$ + "]";
		mes "Thank you for your help.";
		erasequest 14674;// Time to Digest
		setquest 14671;// Unreliable Fake Blood
		close;
	}
	switch( checkquest(14671,HUNTING) ) {
	case -1:
		//if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") > 0) {// unknown text
		mes "[Bomi]";
		mes "Adventurer, did you report already? Do you have something else to do here?";
		next;
		mes "[Bomi]";
		mes "If you're not busy, could you help me with something?";
		next;
		if (select( "Sure thing.", "I'm kind of busy at the moment.") == 2) {
			mes "[Bomi]";
			mes "Oh, are you? I'm sorry. Maybe you could come back later? no, never mind.";
			close;
		}
		mes "[Bomi]";
		mes "As you know, I live on that fake blood that I make with the ingredients I find around here. I'm thinking I'll make some more for Dracula as well.";
		next;
		mes "[Bomi]";
		mes "But since this fake blood is not pure, drinking it regularly causes your body to accumulate toxins, which drive you insane until they are completely purged from your system.";
		next;
		mes "[Bomi]";
		mes "But maybe that only happens to me. I'm a new vampire, and I'm weak. Dracula has lived for a long time, and he's anything but weak. ";
		setquest 14671;// Unreliable Fake Blood
		next;
		mes "[Bomi]";
		mes "Anyway, I need ^0000cd10 Sticky Bloods from Matte Drainliars and 10 Mushroom Saps from Neon Mushrooms^000000.";
		next;
		mes "[Bomi]";
		mes "You can find them if you hunt at least ^0000cd5 Matte Drainliars and 5 Neon Mushrooms^000000.";
		close;
	case 0:
	case 1:
		if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") > 0) {
			mes "[" + .@player_name$ + "]";
			mes "Bomi is away. I'll just leave these here.";
			next;
			mes "[" + .@player_name$ + "]";
			mes "I think I forgot something.";
			close;
		}
		mes "[Bomi]";
		mes "Adventurer, did you forget what I asked? I need ^0000cd10 Sticky Bloods from Matte Drainliars and 10 Mushroom Saps from Neon Mushrooms^000000. Thank you.";
		close;
	case 2:
		if (countitem(25268) < 10 || countitem(25269) < 10) {
			if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") > 0) {
				mes "[" + .@player_name$ + "]";
				mes "Bomi is away. I'll just leave these here.";
				next;
				mes "[" + .@player_name$ + "]";
				mes "I think I forgot something.";
				close;
			}
			mes "[Bomi]";
			mes "Adventurer, did you forget what I asked? I need ^0000cd10 Sticky Bloods from Matte Drainliars and 10 Mushroom Saps from Neon Mushrooms^000000. Thank you.";
			close;
		}
		if (mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") > 0) {
			mes "[" + .@player_name$ + "]";
			mes "Bomi is away. I'll just leave these here.";
			delitem 25268,10;// Sticky_Blood
			delitem 25269,10;// Mushroom_Sap
			erasequest 14671;// Unreliable Fake Blood
			setquest 14674;// Time to Digest
			getexp 500000,500000;
			getitem 25271,1;// Illusion Stone
			close;
		}
		mes "[Bomi]";
		mes "Adventurer, thank you for bringing these to me.";
		delitem 25268,10;// Sticky_Blood
		delitem 25269,10;// Mushroom_Sap
		erasequest 14671;// Unreliable Fake Blood
		setquest 14674;// Time to Digest
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		if (mobcount("gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead") < 1 && mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
			if (.bomi_count < 30)
				.bomi_count++;
		}
		next;
		if (.bomi_count == 29) {
			mes "[Bomi]";
			mes "By the way, I told you about the dangers of this fake blood. Remember? It leaves toxins in my system.";
			next;
			mes "[Bomi]";
			mes "Right now, there are so many toxins in my body that I can feel like I'm turning into a monster.";
			next;
			mes "[Bomi]";
			mes "I can't wait it out like I used to.";
			mes "Not when there are people to worry about.";
			next;
			mes "[Bomi]";
			mes "When I turn into a monster, I want you to stop me from hurting them. Please, help me.";
			next;
			mes "[Bomi]";
			mes "Then please come back after dawn.";
			close;
		}
		if (.bomi_count == 30) {
			mes "[Bomi]";
			mes "I ran out of the ingredients I had.";
			next;
			mes "[Bomi]";
			mes "If I mix them like this and drink...";
			specialeffect EF_PHARMACY_OK;
			next;
			disablenpc( "Wizard#ilgf01" );
			specialeffect EF_DEVIL;
			mes "[Bomi]";
			mes "Oh, no! There is too many toxins in my body. It's getting dangerous!";
			if (mobcount("gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead") < 1 && mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
				.bomi_count = 0;
				donpcevent "ill_vampire_spawn_bomi::OnStart";
			}
			close;
		}
		mes "[Bomi]";
		mes "If I drink this toxic blood about thirty times, I might turn? oh, never mind.";
		next;
		mes "[Bomi]";
		mes "Then please come back after dawn.";
		close;
	}
	end;

OnTouch:
	if (ill_vampire == 7) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "This one has a different color from Neon Mushrooms. Is it a new kind? I'd better pick it carefully...", "", bc_self;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Typical wizard... Wait, could that be Jojo??", bc_self;
	}
	else if (ill_vampire == 12 || ill_vampire == 13) {
		cloakoffnpcself( "Gem#ilgf02" );
		cloakoffnpcself( "Marina#ilgf02" );
		cloakoffnpcself( "Antoine#ilgf02" );
		if (ill_vampire == 13) {
			cloakoffnpcself( "Dracula#ilgf03" );
			cloakoffnpcself( "King#ilgf02" );
			cloakoffnpcself( "Jojo#ilgf01" );
		}
	}
	end;

OnInit:
	// todo: missing questinfo ?

	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14674,PLAYTIME) == -1 && checkquest(14671,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14671,HUNTING) == 2 && countitem(25268) > 9 && countitem(25269) > 9") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14674,PLAYTIME) == 2") );

	if (strnpcinfo(0) == "Wizard#ilgf001")
		disablenpc();
	end;
}
gef_d01_i,81,135,3	duplicate(Wizard#ilgf01)	Wizard#ilgf001	4_NFCOFFIN,5,5

gef_d01_i,82,132,3	duplicate(dummy_npc)	Mushroom#ilgf01	ILL_BLACK_MUSHROOM
gef_d01_i,86,133,1	duplicate(dummy_cloaked_npc)	Dracula#ilgf01	4_DRACULA


// Boss spawn
gef_d01_i,1,1,5	script	ill_vampire_spawn_bomi	-1,{
	end;
OnStart:
	sleep 1000;
	mapannounce "gef_d01_i", "Oh, no...	I can feel the toxins spreading through my body...!", bc_map, 0xFF0000;
	if (mobcount("gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead") < 1 && mobcount("gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead") < 1) {
		monster "gef_d01_i",84,135,"Berserk Bomi",3756,1,"ill_vampire_spawn_bomi::OnMobDead";
	}
	end;
OnMobDead:
	enablenpc( "Wizard#ilgf001" );
	disablenpc( "Dracula#ilgf02" );
	mapannounce "gef_d01_i", "Bomi is falling into a long, deep sleep.", bc_map, 0x00ff00;
	mapannounce "gef_d01_i", "Angry Dracula: Who dares hurt my Bomi?!", bc_map, 0x00ff00;
	sleep 1000;
	if (rand(2) == 1)
		mapannounce "gef_d01_i", "Angry Dracula: Leave Bomi alone! Fight me instead!", bc_map, 0xFF0000;
	else
		mapannounce "gef_d01_i", "Angry Dracula: Bomi needs rest. I'll deal with you!", bc_map, 0xFF0000;
	killmonster "gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead";
	killmonster "gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead";
	monster "gef_d01_i",0,0,"Angry Dracula",3757,1,"ill_vampire_spawn_dracula::OnMobDead";
	end;
}

gef_d01_i,1,1,5	script	ill_vampire_spawn_dracula	-1,{
	end;
OnMobDead:
	killmonster "gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead";
	killmonster "gef_d01_i", "ill_vampire_spawn_dracula::OnMobDead";
	mapannounce "gef_d01_i", "Angry Dracula: It's about time for Bomi to wake up. Humans, don't forget your promise!", bc_map, 0x00ff00;
	sleep 2000;
	mapannounce "gef_d01_i", "Bomi is stirring from her long, deep sleep.", bc_map, 0x00ff00;
	if (mobcount("gef_d01_i", "ill_vampire_spawn_bomi::OnMobDead") < 1) {
		disablenpc( "Wizard#ilgf001" );
		enablenpc( "Wizard#ilgf01" );
        enablenpc "Dracula#ilgf02";
	}
	end;
}

gef_d01_i,185,97,5	script	King#ilgf01	4_NFBAT,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[King]";
		mes "Hey, why are you carrying so much? Go lighten your bag first.";
		close;
	}
	if (ill_vampire < 11) {
		mes "[King]";
		mes "What, do you have business with me? If not, shoo!";
		close;
	}
	if (ill_vampire == 11) {
		mes "[King]";
		mes "I smell ^0000cdblood^000000! Human blood!";
		next;
		mes "[Jojo]";
		mes "You can't be smelling me. I'm not bleeding anymore. I already healed!";
		next;
		mes "[King]";
		mes "No. It's from somewhere else, and I'm smelling more than one human. ...A ^0000cdfight^000000! A fight broke out somewhere! Blood! Let's go!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "A fight? ...No. What if the people from the Church found Bomi?";
		next;
		mes "[Dracula]";
		mes "What people from the Church?";
		next;
		emotion ET_GO;
		mes "[King]";
		mes "*Sniff* This way! The smell is coming from this way!";
		erasequest 14662;// You're Scaring Me
		setquest 14663;// Bloody Fight
		ill_vampire = 12;
		close2;
		viewpoint 1,85,131,1,0x00FF00;
		end;
	}
	if (ill_vampire == 12 || ill_vampire == 13) {
		mes "[King]";
		mes "*Sniff* This way! The smell is coming from this way!";
		close2;
		viewpoint 1,85,131,1,0x00FF00;
		end;
	}
	if (ill_vampire == 14 || ill_vampire == 15) {
		mes "[King]";
		mes "Why are you looking at me like that? Dracula needs more rest. Do not disturb him.";
		close;
	}
	// if (ill_vampire == 16) {
	switch( checkquest(14676,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Jojo]";
		mes "Adventurer, you're back already.";
		next;
		mes "[King]";
		mes "Yes, why did you come back so quickly? I don't want to be disturbed right now. Come back later.";
		close;
	case 2:
		mes "[King]";
		mes "The adventurer is here!";
		next;
		mes "[Jojo]";
		mes "The adventurer is here!";
		next;
		select("Why are you so excited to see me?");
		mes "[King]";
		mes "You'll take care of those Matte Drainliars like you did the last time, right? They're too loud.";
		next;
		mes "[Jojo]";
		mes "And you'll get some ^0000cdShort Bat Hairs^000000 too, right? I need a lot more than what you brought last time.";
		next;
		mes "[King]";
		mes "^0000cd10 Matte Drainliars^000000!";
		next;
		mes "[Jojo]";
		mes "Thank you in advance!";
		erasequest 14676;// Break Time
		setquest 14675;// Noisy Neighbors
		close;
	}
	switch( checkquest(14675,HUNTING) ) {
	case -1:
		mes "[Jojo]";
		mes "Ah, Adventurer. Good to see you again! Dracula is doing better, though he sleeps all day.";
		next;
		mes "[King]";
		mes "He's fully recovered, but he still doesn't want to leave. I don't know why he's so infatuated with that turned human.";
		next;
		mes "[Jojo]";
		mes "Oh, do you mean Bomi? I thought she was a vampire like Dracula.";
		next;
		mes "[King]";
		mes "Not all vampires are the same. We're different from her. By the way, why are you still here? Dracula doesn't need you anymore.";
		next;
		mes "[Jojo]";
		mes "Well, there are things around here that I want to study, and...";
		next;
		mes "[King]";
		mes "Do you have a death wish? Haven't you noticed how hungry and ferocious these bats are? They latch onto anything that moves, these creeps! Take care of them for me, will you?";
		next;
		if (select( "They're annoying.", "Um, I'm kind of busy.") == 2) {
			mes "[King]";
			mes "Oh, are you? Then go. Go away.";
			next;
			mes "[Jojo]";
			mes "King, you don't have to be so mean.";
			next;
			mes "[King]";
			mes "He was mean to me first! And he said he's busy. That's why I said go. Go!";
			close;
		}
		mes "[Jojo]";
		mes "Well, they don't bother me as long as I stay close to Dracula and King.";
		next;
		mes "[King]";
		mes "But they drink zombie blood! Yuk! I'll never drink dead blood, no matter how hungry I am. That's disgraceful!";
		next;
		mes "[Jojo]";
		mes "So you're hating your own kind.";
		npctalk "What? You, human.", "", bc_self;
		sleep2 1000;
		npctalk "Yes...?", "Wizard#ilgf02", bc_self;
		sleep2 1000;
		npctalk "Am I a bat?", "", bc_self;
		sleep2 1000;
		npctalk "...No.", "Wizard#ilgf02", bc_self;
		next;
		mes "[King]";
		mes "In case you have forgotten, do you know how you're still standing there, breathing?";
		next;
		mes "[Jojo]";
		mes "...How?";
		next;
		mes "[King]";
		mes "Because I let you. And I'm letting you breathe not because you're worth living, but because I'm too lazy to kill you.";
		next;
		emotion ET_SWEAT, getnpcid(0, "Wizard#ilgf02");
		mes "[Jojo]";
		mes "...Oh. Thank you for everything. Um, I think it's time I should rejoin my group.";
		next;
		mes "[King]";
		mes "I'm still talking to you. You're not afraid of me because I'm in bat form, are you? You humans are so stupid, you can't get past what you see.";
		npctalk "No, no, that's not true.", "Wizard#ilgf02", bc_self;
		next;
		mes "[Jojo]";
		mes "I agree that these bats are disgraceful, shameless, and disgusting animals.";
		next;
		mes "[King]";
		mes "Did you just call me a disgusting animal?";
		next;
		mes "[Jojo]";
		mes "No, no. Not you. I'm talking about Matte Drainliars.";
		npctalk "Good, because you don't want to make me angry.", "", bc_self;
		sleep2 1000;
		npctalk "It seems you already identify yourself as a bat.", "Wizard#ilgf02", bc_self;
		sleep2 1000;
		npctalk "What?", "", bc_self;
		next;
		select("I have a question for you, King.");
		mes "[King]";
		mes "What is it?";
		next;
		select("Why are you in bat form?");
		mes "[Jojo]";
		mes "Yes. If you hate them so much, then why don't you go back to your original form?";
		next;
		mes "[King]";
		mes "That's because this form is more efficient. I don't have to drink a lot to get full, I'm inconspicuous, and people, like that numskull over there, let their guard down around me.";
		next;
		mes "[Jojo]";
		mes "I'm not a numskull. I wouldn't have become a wizard if I was. And don't forget, I saved Dracula!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "But why a bat? There are other small animals.";
		next;
		mes "[King]";
		mes "Because bats are stealthy, and they can fly. Oh, speaking of which, did you know the short hair of Matte Drainliars is used for making cloaking capes?";
		next;
		select("Huh? No, I've never heard that.");
		mes "[Jojo]";
		mes "Cloaking capes? Thieves and their ilk must love those.";
		next;
		mes "[King]";
		mes "I can't believe how simple-minded you are.";
		next;
		mes "[Jojo]";
		mes "Erm, how can I get the hair? By hunting Matte Drainliars?";
		next;
		mes "[King]";
		mes "Why, do you want to quit magic and turn to thievery?";
		next;
		mes "[Jojo]";
		mes "No. But it's always been my dream to conquer all the dungeons on the continent and become the greatest mage.";
		next;
		mes "[King]";
		mes "...That's a big dream, an impossible dream. Well, anyone can dream big.";
		npctalk "Argh, come on!", "Wizard#ilgf02", bc_self;
		sleep2 1000;
		npctalk "Come on, what?", "", bc_self;
		next;
		mes "[Jojo]";
		mes "Even if it's not for my dream, a cloaking cape will come in handy in various situations.";
		next;
		mes "[King]";
		mes "I didn't know there was an aspiring thief among us. Huh.";
		next;
		mes "[Jojo]";
		mes "I said that's not what I want. Adventurer, are you busy?";
		next;
		mes "[King]";
		mes "What, you're going to ask him? Do it yourself!";
		next;
		mes "[Jojo]";
		mes "I have other things to do.";
		next;
		mes "[King]";
		mes "Like what? Eating, sleeping, and pooping?";
		next;
		mes "[Jojo]";
		mes "Oh, come on! You know I've been busy studying things!";
		next;
		mes "[King]";
		mes "You mean, studying me and Dracula.";
		next;
		mes "[Jojo]";
		mes "...How did you...?";
		next;
		mes "[King]";
		mes "I've known that from the beginning. Your face is so transparent, you can't hide anything. I just didn't say anything because I found it funny that you nervously kept glancing at us.";
		next;
		mes "[Jojo]";
		mes "...Oh. Then can I ask you questions?";
		npctalk "No.", "", bc_self;
		sleep2 1000;
		npctalk "Why not?!", "Wizard#ilgf02", bc_self;
		next;
		mes "[King]";
		mes "Adventurer, are you going to get the bat hair for him? Good, that means you'll take care of those Matte Drainliars. Their flapping their wings keep me awake at night.";
		next;
		mes "[Jojo]";
		mes "Why can't you do it yourself? All you have to do is just flick your finger.";
		next;
		mes "[King]";
		mes "I can flick my finger at you if you want.";
		next;
		mes "[Jojo]";
		mes "Adventurer, please bring me the bat hair. King, I mean, Mr. King, how much bat hair do I need?";
		next;
		mes "[King]";
		mes "That depends on what kind of cape you want. Just know that it's tough to make stuff with hair.";
		next;
		mes "[Jojo]";
		mes "Um, okay, then please bring me ^0000cd20 Short Bat Hairs^000000 for starters.";
		next;
		mes "[King]";
		mes "While you're at it, hunt the ^0000cdMatte Drainliars^000000 around us. There are at least ^0000cd10^000000.";
		next;
		mes "[Jojo]";
		mes "Happy hunting, Adventurer!";
		setquest 14675;// Noisy Neighbors
		npctalk "Ah, Adventurer! Wait!", "Wizard#ilgf02", bc_self;
		close;
	case 0:
	case 1:
		break;
	case 2:
		if (countitem(25263) < 20)
			break;
		mes "[King]";
		mes "You came back quickly. I hope you didn't forget anything.";
		next;
		mes "[King]";
		mes "Wizard! The adventurer has brought the hair.";
		next;
		mes "[Jojo]";
		mes "What am I supposed to do now?";
		next;
		mes "[King]";
		mes "That's for you to figure out. I'm not a cape maker, am I? But I know you would need more than that.";
		next;
		mes "[Jojo]";
		mes "Um... Adventurer?";
		next;
		mes "[King]";
		mes "He just came back from hunting. You should let him rest, at least for the rest of the day.";
		next;
		mes "[King]";
		mes "Adventurer, come back tomorrow and hunt more Matte Drainliars for me, will you? It's so quiet without them.";
		next;
		mes "[Jojo]";
		mes "Th-then see you tomorrow, Adventurer...";
		delitem 25263,20;// Short_Bat_Fur
		erasequest 14675;// Noisy Neighbors
		setquest 14676;// Break Time
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	mes "[King]";
	mes "You came back quickly. I hope you didn't forget anything.";
	next;
	mes "[King]";
	mes "Look what we've got here. Did you forget what I asked? I told you to ^0000cdhunt 10 Matte Drainliars and bring 20 Short Bat Hairs^000000.";
	next;
	mes "[King]";
	mes "Go get it done.";
	close;

OnInit:
	cloakonnpc();

	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14676,PLAYTIME) == -1 && checkquest(14675,HUNTING) == -1") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14675,HUNTING) == 2 && countitem(25263) > 19") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14676,PLAYTIME) == 2") );
	end;
}

gef_d01_i,191,96,3	script	Wizard#ilgf02	4_M_JOB_WIZARD,5,5,{
	if (checkweight(501,1) == 0 || (MaxWeight - Weight) < 1000) {
		mes "[Jojo]";
		mes "Are you sure you can carry all that stuff? Why don't you lighten your bag?";
		close;
	}
	if (ill_vampire < 10) {
		mes "[Jojo]";
		mes "Aww, my wounds are fully healed, but I'm still in pain.";
		close;
	}
	if (ill_vampire == 10) {
		mes "[Jojo]";
		mes "How's Mojo doing? Heh, she's so curious, I feel sorry for Brother Grimm for having to deal with her.";
		next;
		mes "[Jojo]";
		mes "I can't leave here just yet. There are still many things in this place I want to know about.";
		close;
	}
	if (ill_vampire == 11) {
		mes "[Jojo]";
		mes "King has smelled blood. Even though that's how he found me when I was bleeding to death, it still scares me that he can do that.";
		close;
	}
	if (ill_vampire == 12 || ill_vampire == 13) {
		mes "[Jojo]";
		mes "A fight has broken out somewhere over there. Don't you want to go check?";
		close2;
		viewpoint 1,85,131,1,0x00FF00;
		end;
	}
	if (ill_vampire == 14 || ill_vampire == 15) {
		mes "[Jojo]";
		mes "I'm going to stay here for a while. It'll take for a while before Dracula fully regains his energy, and personally, there are many things that I want to know about these people.";
		next;
		mes "[Jojo]";
		mes "Please let Nun Gem and Mojo know.";
		close;
	}
	// if (ill_vampire == 16) {
	switch( checkquest(14678,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Jojo]";
		mes "Adventurer, see this luminous glow over here? It's from the shining spores you brought to me.";
		next;
		mes "[Jojo]";
		mes "I feel as if I traveled back in time, studying by this dim light.";
		next;
		mes "[Jojo]";
		mes "I still have enough light left in these shining spores. Please come back after dawn.";
		close;
	case 2:
		mes "[Jojo]";
		mes "Adventurer! You are the light of my life!";
		next;
		mes "[King]";
		mes "You're scaring him.";
		next;
		mes "[Jojo]";
		mes "Could you get me shining spores again today?";
		next;
		mes "[Jojo]";
		mes "Please bring me ^0000cd10 Shining Spores^000000 from Neon Mushrooms and ^0000cd10 Clusters of Nightmares^000000 from Sweet Nightmares. Thank you.";
		erasequest 14678;// Time to Study
		setquest 14677;// Studying in Dim Light
		close;
	}
	switch( isbegin_quest(14677) ) {
	case 0:
		mes "[Jojo]";
		mes "Adventurer, wait!";
		next;
		mes "[King]";
		mes "You misspelled that.";
		next;
		mes "[Jojo]";
		mes "Where? Oh, I did it again.";
		next;
		mes "[King]";
		mes "Tsk, tsk. I don't know how you've become a wizard when you can't even spell correctly.";
		next;
		mes "[Jojo]";
		mes "This is only because it's too dark to see. And stop peeking at what I'm doing!";
		next;
		mes "[King]";
		mes "It's not like you're writing something important.";
		next;
		select("You two get along as well as I remember.");
		mes "[King]";
		mes "What are you doing here? Don't you have things to do?";
		next;
		if (select( "Jojo wanted to see me.", "Actually, I'm busy.") == 2) {
			mes "[Jojo]";
			mes "Are you? I was going to ask you a favor, but I can wait.";
			next;
			mes "[King]";
			mes "Then you'd better go attend to your business.";
			close;
		}
		mes "[King]";
		mes "Why?";
		next;
		mes "[Jojo]";
		mes "Since we're underground, it's too dark for me to write and read. I have a lot of information that I want to catalog, but I keep misspelling words because I can't see them clearly.";
		next;
		mes "[King]";
		mes "You should be able to do that with your eyes closed. You're a wizard. Didn't you learn how to summon light? But of course, if you use magic in front of me, I'll burn you to ashes.";
		npctalk "I... I'm still a wizard!", "Wizard#ilgf02", bc_self;
		sleep2 500;
		npctalk "What? I can't hear you.", "King#ilgf01", bc_self;
		next;
		mes "[Jojo]";
		mes "I completed my guild's official wizard training program. I'm strong enough to have a contest with you!";
		next;
		mes "[King]";
		mes "Oh, really? Good for you!";
		next;
		mes "[King]";
		mes "Be honest, though. Did you really study hard? Did you attend every class, study all night, and practice hard? You'd better tell me the truth.";
		next;
		mes "[King]";
		mes "Can you honestly say that you tried to push past your limits?";
		next;
		mes "[Jojo]";
		mes "...";
		next;
		mes "[King]";
		mes "No, you didn't. That's why you had your butt handed to you by those mushrooms.";
		next;
		mes "[Jojo]";
		mes "I said they were zombies, not mushrooms!";
		next;
		mes "[King]";
		mes "Zombies and mushrooms. Same difference to me.";
		next;
		mes "[King]";
		mes "You're not good enough to earn your keep. I can't believe your guild actually invested in you.";
		npctalk "I've been earning my keep just fine.", "", bc_self;
		sleep2 500;
		npctalk "Yeah, right.", "King#ilgf01", bc_self;
		next;
		mes "[Jojo]";
		mes "Then what about you? I know you can transform. But what else can you do?";
		npctalk "Do you really want me to show you? Right now?", "King#ilgf01", bc_self;
		sleep2 1000;
		npctalk "...No.", "", bc_self;
		next;
		mes "[King]";
		mes "Maybe you keep questioning me because you can't trust me. How about I teach you to be the greatest mage among humans? Would you trust me, then?";
		next;
		mes "[Jojo]";
		mes "Erm, you want to teach me?";
		next;
		mes "[King]";
		mes "Sure.";
		next;
		mes "[Jojo]";
		mes "Why?";
		next;
		mes "[King]";
		mes "I've studied a lot. Why do you think I have?";
		next;
		mes "[Jojo]";
		mes "To become smarter?";
		next;
		mes "[King]";
		mes "No. Because I was bored to death!";
		next;
		mes "[Jojo]";
		mes "You have all the time in the world. I'm envious of that.";
		next;
		mes "[King]";
		mes "If you don't want me to teach you, that's fine by me.";
		next;
		mes "[Jojo]";
		mes "No, no! I'd love to! But, erm, you're not going to ask for my blood in return, are you?";
		next;
		mes "[King]";
		mes "*Snort* If I drink anything because I'm hungry, I wouldn't be any better than those Matte Drainliars now, would I?";
		npctalk "Did you just compare me to zombies?", "", bc_self;
		sleep2 500;
		npctalk "So you're not as stupid as I thought.", "King#ilgf01", bc_self;
		next;
		select("Jojo?");
		mes "[Jojo]";
		mes "Oh, I'm sorry, I didn't mean to keep you standing there. Could you get me some spores from Neon Mushrooms? I need some light to see what I'm writing.";
		npctalk "Why those?", "King#ilgf01", bc_self;
		next;
		mes "[Jojo]";
		mes "Oh, you know how those spores glow. I want to use them to illuminate this place.";
		next;
		mes "[King]";
		mes "Well, then go get them yourself. Don't dump things on this adventurer.";
		next;
		mes "[Jojo]";
		mes "Oh, well... I'm... Neon Mushrooms are... You know.";
		npctalk "You said you were attacked by zombies.", "King#ilgf01", bc_self;
		sleep2 500;
		npctalk "I was.", "", bc_self;
		next;
		mes "[King]";
		mes "Where are you going to put the spores, anyway?";
		next;
		mes "[Jojo]";
		mes "I have an empty bottle? oh, I forgot I lost my bag when I was attacked.";
		next;
		mes "[Jojo]";
		mes "Adventurer, could you get me some Clusters of Nightmares as well? I can mix them with the spores to make a paste and apply it on the wall.";
		next;
		mes "[King]";
		mes "What? That's so tacky.";
		next;
		mes "[Jojo]";
		mes "But effective nonetheless. You didn't know you could use them like that, did you?";
		next;
		mes "[King]";
		mes "Because I didn't need to.";
		next;
		mes "[Jojo]";
		mes "Then, Adventurer, please bring me ^0000cd10 Shining Spores^000000 from Neon Mushrooms and ^0000cd10 Clusters of Nightmares^000000 from Sweet Nightmares.";
		setquest 14677;// Studying in Dim Light
		close;
	case 1:
	case 2:
		mes "[Jojo]";
		mes "Adventurer, welcome back!";
		next;
		if (countitem(25264) < 10 || countitem(25265) < 10)	{
			mes "[King]";
			mes "I can tell that's not enough, just by looking at it.";
			next;
			mes "[Jojo]";
			mes "Oh, you're right. You must have forgotten what I asked.";
			next;
			mes "[Jojo]";
			mes "Please bring me ^0000cd10 Shining Spores^000000 from Neon Mushrooms and ^0000cd10 Clusters of Nightmares^000000 from Sweet Nightmares. Thank you.";
			close;
		}
		mes "[King]";
		mes "I can tell he brought everything you asked. Come on, make a paste and apply it to the wall already.";
		next;
		mes "[Jojo]";
		mes "Adventurer, thank you for helping me study. These glowing spores don't last long. Could you come back tomorrow and get me more of them?";
		delitem 25264,10;// NightmareOfLump
		delitem 25265,10;// Shining_Spore
		erasequest 14677;// Studying in Dim Light
		setquest 14678;// Time to Study
		getexp 500000,500000;
		getitem 25271,1;// Illusion Stone
		close;
	}
	end;

OnTouch:
	if (ill_vampire == 16 && isbegin_quest(14677) == 0)
		npctalk "Ah, Adventurer! Wait!", "Wizard#ilgf02", bc_self;
	if (ill_vampire > 13) {
		cloakoffnpcself( "King#ilgf01" );
		cloakoffnpcself( "Wizard#ilgf02" );
		cloakoffnpcself( "Dracula#ilgf02" );
	}
	end;

OnInit:
	cloakonnpc();

	.@main_completed$ = "isbegin_quest(14666) == 2";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14678,PLAYTIME) == -1 && isbegin_quest(14677) == 0") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && isbegin_quest(14677) == 1 && countitem(25264) > 9 && countitem(25265) > 9") );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, (.@main_completed$ + " && checkquest(14678,PLAYTIME) == 2") );
	end;
}

gef_d01_i,189,98,3	script(CLOAKED)	Dracula#ilgf02	4_DRACULA,{
	if (ill_vampire < 10) {
		mes "[Dracula]";
		mes "What brings you? I suggest you stay away out of this place.";
		close;
	}
	if (ill_vampire == 10) {
		setpcblock PCBLOCK_NPC, true;
		npctalk "Let's drink from this one.", "King#ilgf01", bc_self;
		sleep2 1500;
		emotion ET_SWEAT, getnpcid(0, "Wizard#ilgf02");
		npctalk "Oh, no. That's?", "Wizard#ilgf02", bc_self;
		sleep2 1500;
		npctalk "King, I told you, we are not drinking from people anymore. And that's not a polite thing to say. I apologize on his behalf.", "", bc_self;
		sleep2 2000;
		npctalk "I-it's okay.", "Wizard#ilgf02", bc_self;
		sleep2 1500;
		npctalk "Humans die eventually. Is it so bad to die a little bit earlier? Come on, let's have a drink. This one doesn't smell good, though.", "King#ilgf01", bc_self;
		sleep2 2000;
		npctalk "Do you mind if I get rid of that bat?", "Wizard#ilgf02", bc_self;
		sleep2 1500;
		npctalk "No one hurts anyone in front of me.", "", bc_self;
		emotion ET_FRET, getnpcid(0, "King#ilgf01");
		npctalk "Human, are you blind? I'm not a bat.", "King#ilgf01", bc_self;
		sleep2 1500;
		npctalk "Then what are you?", "Wizard#ilgf02", bc_self;
		specialeffect EF_PORTAL4, AREA, "King#ilgf01";
		specialeffect EF_M01, AREA, "King#ilgf01";
		cloakoffnpcself( "King#ilgf01" );
		sleep2 1500;
		npctalk "Now, what do I look like?", "King#ilgf01", bc_self;
		sleep2 1500;
		emotion ET_HUK, getnpcid(0, "Wizard#ilgf02");
		npctalk "*Gasp* What the hell are you?!", "Wizard#ilgf02", bc_self;
		sleep2 1500;
		npctalk "Why, is this too scary? Then how about this?", "King#ilgf01", bc_self;
		specialeffect EF_PORTAL4, AREA, "King#ilgf01";
		specialeffect EF_M01, AREA, "King#ilgf01";
		cloakoffnpcself( "King#ilgf01" );
		sleep2 1500;
		emotion ET_CRY, getnpcid(0, "Wizard#ilgf02");
		npctalk "Y-y-you're me? D-d-d-doppelganger! A-am I going to die?!", "Wizard#ilgf02", bc_self;
		sleep2 1500;
		npctalk "You're afraid of yourself. Why?", "King#ilgf01", bc_self;
		sleep2 2000;
		npctalk "You love yourself so much that you don't accept anyone that doesn't look like you. But when you see someone that looks exactly like you, you can't tolerate it. Why?", "King#ilgf01", bc_self;
		sleep2 2000;
		npctalk "Seeing other humans and seeing a clone of myself are two different things!", "Wizard#ilgf02", bc_self;
		sleep2 1500;
		npctalk "King, that's enough. Stop torturing him.", "", bc_self;
		sleep2 2000;
		emotion ET_OHNO, getnpcid(0, "King#ilgf01");
		npctalk "Tsk, tsk. You're too softhearted when it comes to humans.", "King#ilgf01", bc_self;
		specialeffect EF_PORTAL4, AREA, "King#ilgf01";
		specialeffect EF_M01, AREA, "King#ilgf01";
		cloakoffnpcself( "King#ilgf01" );
		sleep2 1000;
		npctalk "Um... I can move fine now. Can I go?", "Wizard#ilgf02", bc_self;
		sleep2 500;
		npctalk "Yes, you can leave.", "", bc_self;
		npctalk "No!", "King#ilgf01", bc_self;
		sleep2 500;
		npctalk "Why not?", "", bc_self;
		sleep2 1500;
		npctalk "He's a human, and humans move in groups. He's going to bring his friends to attack us. Did you forget that already?", "King#ilgf01", bc_self;
		sleep2 2000;
		npctalk "No, I'm not going to do that. I never forget favors. You've saved me. I promise I won't hurt you. Please believe me.", "Wizard#ilgf02", bc_self;
		sleep2 2000;
		npctalk "Humans can't be trusted, ever.", "King#ilgf01", bc_self;
		sleep2 2000;
		npctalk "I agree that he might bring his friends, but not all humans are untrustworthy.", "", bc_self;
		npctalk "Whose side are you on? Me or him?", "King#ilgf01", bc_self;
		setpcblock PCBLOCK_NPC, false;

		mes "[" + strcharinfo(0) + "]";
		mes "Typical wizard... Wait, could that be Jojo??";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Typical wizard... Wait, could that be Jojo??", bc_self;
		next;
		select("Jojo? Are you Jojo?");
		mes "[Jojo]";
		mes "Wh-who are you?";
		npctalk "See, I told you! One of his friends already showed up! This is why I don't trust humans!", "King#ilgf01", bc_self;
		npctalk "A human?", "", bc_self;
		next;
		mes "[Jojo]";
		mes "No, no! He's not my friend! I've never seen him before in my life, I swear!";
		next;
		mes "[King]";
		mes "He could be sent by your friends. Human, answer me!";
		next;
		select("Jojo's colleagues are looking for him.");
		mes "[Stranger]";
		mes "I see. We found him injured and unconscious, so we took him here and treated him. He's well enough to leave now.";
		npctalk "No! They're going to put us in danger!", "King#ilgf01", bc_self;
		next;
		select("You saved Jojo.");
		mes "[" + strcharinfo(0) + "]";
		mes "Let me thank you on behalf of his colleagues. May I ask your name?";
		next;
		mes "[King]";
		mes "You're here, and yet you don't know who he is. He's Dracula. Didn't you come to challenge him to a battle?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Dracula? You mean the Dracula?";
		next;
		mes "[Dracula]";
		mes "You have a familiar smell about you, Adventurer. I've yearned for this smell for a long time.";
		npctalk "Are you saying he smells delicious? Can I drink from him?", "King#ilgf01", bc_self;
		next;
		mes "[Dracula]";
		mes "I mean he smells like a friend, Little One.";
		npctalk "What friend? I thought I was the only friend you had.", "King#ilgf01", bc_self;
		next;
		select("I met Bomi before I came here.");
		mes "[Dracula]";
		mes "...I see. How is she?";
		npctalk "What? Bomi?", "King#ilgf01", bc_self;
		npctalk "You mean the owner of the notebook?", "Wizard#ilgf02", bc_self;
		sleep2 500;
		npctalk "Did she tell you anything about... me?", "", bc_self;
		next;
		mes "[King]";
		mes "Wow, so you've been hanging around here all this time because of that ungrateful girl. Is that it?";
		npctalk "She's not ungrateful. She never wanted what I gave her.", "", bc_self;
		next;
		mes "[Jojo]";
		mes "What did you give her?";
		next;
		mes "[King]";
		mes "Eternal life.";
		next;
		mes "[Jojo]";
		mes "Eternal life...!";
		next;
		mes "[King]";
		mes "That's the normal reaction from humans! She's ungrateful!";
		npctalk "Why, do you want it? I can give it to you.", "King#ilgf01", bc_self;
		next;
		select("She said Dracula betrayed her.");
		emotion ET_FRET, getnpcid(0, "King#ilgf01");
		mes "[King]";
		mes "Betrayed her? Hah? Where is she? He should've just let her die!";
		next;
		mes "[Dracula]";
		mes "She still hasn't forgiven me. But I did what I had to do.";
		next;
		select("There must be some misunderstanding.");
		mes "[Dracula]";
		mes "I needed humans to survive. I hid among them and hunted them whenever I needed.";
		next;
		mes "[Dracula]";
		mes "One day, people from the Church found me. They were bent on killing me in the name of justice.";
		npctalk "They were persistent.", "King#ilgf01", bc_self;
		next;
		mes "[Dracula]";
		mes "I was gravely injured by them, and somehow I ended up in this place full of death and mysterious energy.";
		next;
		mes "[Dracula]";
		mes "I thought I was going to die here, but then Lady Luck finally turned her gaze upon me.";
		npctalk "Somebody please shut him up. I hate this story.", "King#ilgf01", bc_self;
		next;
		mes "[Dracula]";
		mes "Bomi saved me. She fed me her blood, so I could regain my strength. I'm not a living being, but that day, she gave me new life.";
		next;
		mes "[Jojo]";
		mes "Why didn't you leave afterward?";
		next;
		mes "[Dracula]";
		mes "Even though Bomi was a strong woman, her body was failing her. It pained me to see her waste away day by day. I offered her eternal life, and she rejected it.";
		next;
		mes "[Dracula]";
		mes "I stayed because I wanted to be there for her when she died as a human.";
		next;
		mes "[Dracula]";
		mes "For the first time in my long existence, I really thought about humans, and what made them who they were. They also have this impulse to help others, expecting nothing in return.";
		next;
		mes "[Dracula]";
		mes "I'd learned about them through Bomi. What I'd learned didn't make sense, and I didn't really understand it.";
		next;
		mes "[Dracula]";
		mes "But it was different from what I previously thought of humans. I was starting to understand them.";
		npctalk "Why? What good would understanding them do you?", "King#ilgf01", bc_self;
		next;
		mes "[Jojo]";
		mes "Then why did you turn her against her wish?";
		next;
		mes "[Dracula]";
		mes "There was an accident. The people who almost killed me found me again.";
		npctalk "The people from the Church?", "Wizard#ilgf02", bc_self;
		next;
		mes "[Dracula]";
		mes "Bad luck follows me wherever I go. Bomi even made me a lucky charm, but it didn't work.";
		next;
		mes "[Dracula]";
		mes "By then, I'd fully regained my strength, and those humans weren't a match for me. But Bomi... she didn't want anyone to get hurt.";
		next;
		mes "[Dracula]";
		mes "Long story short, she got caught in the crossfire. She was dying and I panicked.";
		next;
		mes "[Dracula]";
		mes "I wasn't ready to let her go. Before I had time to think about what I was doing, I turned her. ";
		next;
		mes "[Jojo]";
		mes "You did it because you didn't want to lose her. I would've done the same in that situation.";
		npctalk "Why?", "King#ilgf01", bc_self;
		sleep2 1000;
		npctalk "That's what people do, to protect those they love.", "Wizard#ilgf02", bc_self;
		next;
		mes "[King]";
		mes "But that stubborn girl refuses to acknowledge that!";
		next;
		mes "[King]";
		mes "I don't understand her logic. How could she possibly want to die as a human than live as a vampire? How could she think the gift of eternal life is a betrayal?";
		next;
		mes "[Jojo]";
		mes "I think I know. People tend to take things for granted. If I could live forever, I think I'd lose all my motivation. I mean, you have nothing but time.";
		next;
		mes "[Jojo]";
		mes "I think you guys need to talk it out with each other. Have you tried to talk to her?";
		next;
		mes "[Dracula]";
		mes "When she was brought back to life, she was so shocked and angry that she wouldn't listen to me.";
		next;
		mes "[Dracula]";
		mes "I did what I did to save her, and I understand she resents me for it.";
		npctalk "You need to stop hanging with humans. You sound like one of them now.", "King#ilgf01", bc_self;
		next;
		mes "[King]";
		mes "Dracula, what's that human to you? Why do you insist on staying in a place like this";
		npctalk "when she won't even talk to you?", "King#ilgf01", bc_self;
		next;
		mes "[Dracula]";
		mes "I'm not?";
		next;
		emotion ET_SURPRISE, getnpcid(0, "King#ilgf01");
		mes "[King]";
		mes "Everyone, hush. I smell something.";
		erasequest 14661;// Jojo Is the Mage's Name 02
		setquest 14662;// You're Scaring Me
		ill_vampire = 11;
		close;
	}
	if (ill_vampire == 11) {
		mes "[Dracula]";
		mes "King? What is it?";
		close;
	}
	if (ill_vampire == 12 || ill_vampire == 13) {
		mes "[Dracula]";
		mes "A fight? Oh no, we'd better hurry!";
		close2;
		viewpoint 1,85,131,1,0x00FF00;
		end;
	}
	if (ill_vampire == 14 || ill_vampire == 15) {
		mes "[Dracula]";
		mes "I've decided to wait for her. I could use some rest, anyway.";
		close;
	}
	mes "[Dracula]";
	mes "The bat blood she drinks sometimes causes her to go out of her mind. She calms down after a while, but if the people from the Church see her in that vulnerable state, they will try to kill her.";
	close;
}


//============================================================
//= Illusion of Frozen
//============================================================
// boss summoning - 1 day of delay for now
ice_d03_i,126,126,3	script	Orb of Seal#frozen1	CLEAR_NPC,{
	if (.ill_frozen_boss_timer >= gettimetick(2)) {
		mes "This orb needs more time to gather enough energy before it'll work.";
		close;
	}
	.@i = atoi( charat(strnpcinfo(2), 6) );
	.timer[.@i] = 30;
	initnpctimer;	// the effect continue after boss spawn
	if (.timer[1] > 0 && .timer[2] > 0 && .timer[3] > 0 && .timer[4] > 0) {
		.ill_frozen_boss_timer = gettimetick(2) + 86400;// respawn timer (seems to be one day)
		donpcevent "bosseff#frozen::OnEvent";
	}
	end;
OnTimer1000:
	.@i = atoi( charat(strnpcinfo(2), 6) );
	.timer[.@i]--;
	if (.timer[.@i] < 1)
		stopnpctimer;
	else {
		initnpctimer;
		specialeffect EF_DETOXICATION;
	}
	end;
}
ice_d03_i,172,126,3	duplicate(Orb of Seal#frozen1)	Orb of Seal#frozen2	CLEAR_NPC
ice_d03_i,172,173,3	duplicate(Orb of Seal#frozen1)	Orb of Seal#frozen3	CLEAR_NPC
ice_d03_i,127,172,3	duplicate(Orb of Seal#frozen1)	Orb of Seal#frozen4	CLEAR_NPC

ice_d03_i,149,112,0	script	bosseff#frozen	HIDDEN_WARP_NPC,{
	end;
OnEvent:
	initnpctimer;
	end;
OnTimer1000:
	mapannounce "ice_d03_i", "All the energy that was sealed inside the cave has been released, awakening Ktullanux.", bc_map, 0xFFFF00;
	end;
OnTimer3000:
	stopnpctimer;
	mapannounce "ice_d03_i", "Ktullanux: Who dares call me a lizard? I'll freeze you all!", bc_map, 0xFFFF00;
	specialeffect EF_PORTAL;
	if (mobcount("ice_d03_i", "bosseff#frozen::OnBossDead") < 1)
		monster "ice_d03_i",149,112,"Awakened Ktullanux",3796,1, "bosseff#frozen::OnBossDead";	// ILL_KTULLANUX
	end;
OnBossDead:
	mapannounce "ice_d03_i", "Ktullanux: I'll... be... back...", bc_map;
	end;
}


// main quest and daily quests
ice_dun02,150,11,1	script	#tofrozen	4_PURPLE_WARP,2,2,{
	end;
OnTouch:
	if (BaseLevel < 120) {
		mes "^4d4dffYou must be level 120 or higher to enter this area.^000000";
		close;
	}
	warp "ice_d03_i",149,24;
	end;
}

ice_d03_i,149,19,1	script	#fromfrozen	4_PURPLE_WARP,2,2,{
	end;
OnTouch:
	warp "ice_dun02",150,17;
	end;
}

ice_d03_i,149,24,0	script	dream#frozen	HIDDEN_WARP_NPC,1,1,{
	end;
OnTouch:
	if (isbegin_quest(15116) == 0) {
		mes "^ff0000I feel dazed, as if I'm dreaming.^000000";
		close;
	}
	end;
}

ice_d03_i,152,43,0	script	cine1#frozen	HIDDEN_WARP_NPC,13,13,{
	end;
OnTouch:
	if (checkquest(15115,PLAYTIME) == 2) {
		illusion_frozen = 0;	// reset the variable for daily quests
		erasequest 15115;// Vrid and Zeith
	}
	.@char_id = getcharid(0);
	if (illusion_frozen < 3) {
		cloakoffnpcself( "Zeith#frozen01" );
		cloakoffnpcself( "Vrid#frozen01" );
		end;
	}
	if (illusion_frozen == 3) {
		cloakoffnpcself( "Vrid#frozen01" );
		if (checkquest(15112,HUNTING) == 2)
			cloakoffnpcself( "Zeith#frozen02" );
		end;
	}
	if (illusion_frozen == 4) {
		cloakoffnpcself( "Zeith#frozen02" );
		if (checkquest(15113,HUNTING) == 2)
			cloakoffnpcself( "Vrid#frozen02" );
		end;
	}
	end;
}

ice_d03_i,155,43,3	script(CLOAKED)	Zeith#frozen01	4_M_FROZEN_GC,{
	if (checkweight(1201,1) == 0 || (MaxWeight - Weight) < 2000) {
		mes "I'm carrying too many types of items. I should lighten my bag first.";
		close;
	}
	if (BaseLevel < 110) {
		mes "- You must be Level 110 or above to perform this quest.";
		close;
	}
	.@quest_15116 = isbegin_quest(15116);

	if (illusion_frozen == 0) {
		if (.@quest_15116 == 2) {
			mes "^ff0000...? I released them from the ice earlier. Why are they frozen again?^000000";
			next;
		}
		mes "[^0000ffZeith^000000]";
		mes "Sigh, this is all because of you, idiot.";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "But he really looked pitiful!";
		mes "I was only trying to help him.";
		mes "Who knew he'd freeze us in ice?";
		mes "I'm the victim here, you know.";
		next;
		mes "[^0000ffZeith^000000]";
		mes "I don't know why you thought he looked pitiful, but that's not important.";
		mes "We have to think about how to break out of this ice. *Groan*";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "I can't even move a finger because of the ice around me.";
		mes "Yeah, we really need help.";
		mes "Is there anyone who can help? oh! Hey, you!";
		next;
		select("- Are you calling me?");
		mes "[^ff0000Vrid^000000]";
		mes "Yes, who else? As you can see, we happened to get ourselves trapped in ice. It's a long story. I'll tell you all about it if you let us out.";
		next;
		select("- How can I let you out?");
		mes "[^ff0000Vrid^000000]";
		mes "That's a good question. Zeith, answer him.";
		next;
		mes "[^0000ffZeith^000000]";
		mes "...Stop dumping things on me!";
		mes "I think we'll have to use fire.";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Fire?";
		mes "But I hate being hot, and fire could burn us to death.";
		next;
		mes "[^0000ffZeith^000000]";
		mes "But we need it to melt the ice around us. We'll be okay... I think.";
		mes "So, mm... Our new friend...";
		next;
		mes "[^0000ffZeith^000000]";
		mes "I'm sorry, but could you find some dry twigs from heaps of dry soil in this cave? We won't need more than 10.";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Argh, you're going to burn us to death!";
		setquest 15110;// Fighting Ice with Fire
		illusion_frozen = 1;
		if (.@quest_15116 == 2) {
			next;
			mes "^ff0000They're having the same conversation they had before. Also, I don't think they remember me.^000000";
			next;
			mes "^ff0000I already know fire won't work, but I'm just going to go along with their request.^000000";
		}
		close;
	}
	if (illusion_frozen == 1) {
		if (countitem(25309) < 10) {
			mes "[^0000ffZeith^000000]";
			mes "We need 10 Dry Twigs. Check the heaps of dry soil inside this cave.";
			close;
		}
		.@pc_name$ = strcharinfo(0);
		delitem 25309,10;	// Dry_Branch
		erasequest 15110;// Fighting Ice with Fire
		setarray .@list[0],
			15111,	// Hunt Furious Ice Titans
			15117,	// Hunt Furious Gazetis
			15118,	// Hunt Furious Snowiers
			15119;	// Hunt Hard Icicles
		.@quest_id = .@list[ rand(getarraysize(.@list)) ];
		setquest .@quest_id;
		illusion_frozen = 2;
		mes "[^0000ffZeith^000000]";
		mes "You brought all those dry twigs. Oh, we haven't introduced ourselves yet. have we?";
		mes "I'm Zeith, and this is?";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Ugh, you're going to burn us to death.";
		next;
		mes "[^0000ffZeith^000000]";
		mes "Sigh. This is Vrid.";
		mes "What's your name?";
		next;
		if (.@quest_15116 == 2) {
			mes "^ff0000They asked my name again, as if they didn't remember me. Something weird is going on, but I told them my name again, anyway.^000000";
			next;
		}
		select("-" + .@pc_name$ + ".");
		mes "[^0000ffZeith^000000]";
		mes "" + .@pc_name$ + ". That's a nice name.";
		mes "For now, let's light the twigs and try to melt the ice. Why don't you try to melt the ice around my friend first?";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Grr, why are you so evil?";
		mes "No, don't! I'd rather die!";
		next;
		mes "[^0000ffZeith^000000]";
		mes "...Sigh. Alright, I'll do it.";
		mes "Could you light the twigs and place them around me?";
		mes "But let me remind you,";
		mes "try not to place them too close to me.";
		next;
		mes "^ff0000I lit the dry twigs and placed them around him. Some time has passed, but the ice doesn't look like it's melting.^000000";
		next;
		mes "[^0000ffZeith^000000]";
		mes "Maybe this ice is magical.";
		mes "It's not melting.";
		mes "Vrid, you haven't said anything. Come on, think of something!";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Tsk, tsk. You guys are so simpleminded, thinking fire would melt ice like this. It's not working, is it? We need to think outside of the box. Let's try to beat the ice with ice!";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "We can use the cold energy from the monsters in this place to break the ice, I think.";
		next;
		mes "[^0000ffZeith^000000]";
		if (.@quest_15116 == 2)
			mes "...That's just outlandish.";
		else
			mes "...That's ridiculous.";
		mes "How are we going to use their cold energy, anyway?";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Just listen.";
		switch(.@quest_id) {
		case 15111:
			mes "Vrid's Report: Furious Ice Titans!";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "According to my investigation, Furious Ice Titans are as tiny as specks of dust in the air.";
			mes "They just look big because of the icicles growing on their bodies.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "Imagine how uncomfortable and cold they must be!";
			mes "" + .@pc_name$ + "";
			mes "I want you to liberate them from the icicles growing on their bodies.";
			break;
		case 15117:
			mes "Vrid's Report: Furious Gazetis!";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "According to my investigation, Gazetis were ice giants. They were so curious about this cave that they stuck their heads into it and had their necks shattered. Now they're roaming about the cave, looking for their bodies.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "Aren't they creepy? Every time I look at them, they look like they're mouthing, ";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "" + .@pc_name$ + "";
			mes "Please help them, so they don't have to look for their bodies anymore.";
			break;
		case 15118:
			mes "Vrid's Report: Furious Snowiers!";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "According to my investigation, Furious Snowiers were gentle creatures who loved to say hi to people.";
			mes "They became bitter after being ignored too many times. Now, they pretend to be friendly,";
			mes "but once they get close enough, they attack people. My heart goes out to them...";
			next;
			mes "^ff0000Zeith stared at Vrid with incredulity in his eyes.^000000";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "" + .@pc_name$ + "";
			mes "Please teach them not to act so sneaky.";
			break;
		case 15119:
			mes "Vrid's Report: Hard Icicles!";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "According to my investigation, these icicles have gone through a lot.";
			next;
			select("- Like what?");
			mes "[^ff0000Vrid^000000]";
			mes "Well, first of all, they were... Mm... Uh...";
			next;
			mes "^ff0000Vrid grimaced, sighed, and scratched his head. He then said...^000000";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "Well, icicles are icicles. It's not like they have a life story, do they?";
			next;
			mes "[^0000ffZeith^000000]";
			mes "Finally, you say something that makes sense.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "Berome";
			mes "Maybe you should help them create their own story.";
			next;
			mes "[^0000ffZeith^000000]";
			mes "...Or not.";
			break;
		}
		next;
		mes "[^ff0000Vrid^000000]";
		mes "While you're at it, you'll absorb the cold energy released from them. Come back and hug us, and maybe the cold energy in you will crack the ice we're trapped in. Doesn't that sound plausible?";
		next;
		mes "[^0000ffZeith^000000]";
		mes "No. Not at all.";
		mes "Everything you say sounds far-fetched to me.";
		next;
		mes "[^0000ffZeith^000000]";
		mes "But... Sigh, I can't think of a better solution.";
		switch(.@quest_id) {
		case 15111:
			mes "We'll try your suggestion. Adventurer, could you hunt 10 Furious Ice Titans and come back?";
			break;
		case 15117:
			mes "We'll try your suggestion. Adventurer, could you hunt 10 Furious Gazetis and come back?";
			break;
		case 15118:
			mes "We'll try your suggestion. Adventurer, could you hunt 10 Furious Snowiers and come back?";
			break;
		case 15119:
			mes "We'll try your suggestion. Adventurer, could you hunt 10 Hard Icicles and come back?";
			break;
		}
		next;
		mes "[^ff0000Vrid^000000]";
		mes "No, don't hunt them! You have to help them!";
		next;
		mes "[^0000ffZeith^000000]";
		mes "Sigh, whatever. Please help them.";
		close;
	}
	if (illusion_frozen == 2) {
		if (isbegin_quest(15111))	// Hunt Furious Ice Titans
			.@quest_id = 15111;
		else if (isbegin_quest(15117))	// Hunt Furious Gazetis
			.@quest_id = 15117;
		else if (isbegin_quest(15118))	// Hunt Furious Snowiers
			.@quest_id = 15118;
		else if (isbegin_quest(15119))	// Hunt Hard Icicles
			.@quest_id = 15119;
		else
			end;

		if (checkquest(.@quest_id,HUNTING) != 2) {
			switch (.@quest_id) {
			case 15111:
				mes "[^0000ffZeith^000000]";
				mes "Please come back after hunting 10 Furious Ice Titans inside the cave.";
				close;
			case 15117:
				mes "[^0000ffZeith^000000]";
				mes "Please come back after hunting 10 Furious Gazetis inside the cave.";
				close;
			case 15118:
				mes "[^0000ffZeith^000000]";
				mes "Please come back after hunting 10 Furious Snowiers inside the cave.";
				close;
			case 15119:
				mes "[^0000ffZeith^000000]";
				mes "Please come back after hunting 10 Hard Icicles inside the cave.";
				close;
			}
		}
		mes "[^ff0000Vrid^000000]";
		mes "See, I told you!";
		mes "This adventurer is now radiating a massive amount of cold energy!";
		next;
		mes "[^0000ffZeith^000000]";
		mes "...Isn't this guy just really cold?";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Now, come hug us? no, hug me first. Then, light will flash as the ice around me cracks, you know, like in those fairy tales!";
		next;
		mes "^ff0000I hugged Vrid as he asked.^000000";
		mes "";
		mes "^ff0000Light flashed!^000000";
		mes "^ff0000No, wait. That was just the ice reflecting ambient light.^000000";
		mes "^ff0000Nothing happened.^000000";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "*Chattering his teeth* C-c-c-c-cold. Get off me! You're too cold!";
		next;
		mes "[^0000ffZeith^000000]";
		mes "I knew that was an idiotic idea! I shouldn't have listened to your stupid story! I shouldn't have followed you into this cave!";
		next;
		if (.@quest_15116 == 2)
			.@menu$ = "I already know what the story is. I should just... skip it.";
		.@s = select( "- What stupid story?", .@menu$ );
		mes "[^ff0000Vrid^000000]";
		mes "It's not stupid!";
		mes "It's the truth!";
		if (.@s == 1) {
			mes "Vrid's Report:";
			mes "Secret of the Ice Cave!";
			next;
			mes "[^0000ffZeith^000000]";
			mes "Sigh...";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "According to my investigation, this cave used to be a subterranean kingdom, and it was entirely made of gold, like El Dorado!";
			next;
			mes "^ff0000Zeith rolled his eyes, but Vrid ignored him and continued.^000000";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "The king was worried about the growing number of thieves, when a young warrior came in and drove all the invaders away. The king was overjoyed and gave the warrior his daughter's hand in marriage.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "But it turned out his son-in-law was also a thief. He ended up running away with the kingdom's most valuable treasure.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "The furious king froze the cave and summoned formidable monsters in it, so no one would ever dare invade his kingdom again. Tragic, isn't it??";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "Of course, I didn't come here for the treasures. We happened to be in the area, and I just wanted to check the place out.";
			next;
			mes "[^0000ffZeith^000000]";
			mes "That isn't what you told me the first time. I never believed that stupid story, anyway. I followed you in because I was curious. I totally regret it now.";
		}
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Hah hah, now there's only one thing left to try. That is...";
		next;
		mes "[^0000ffZeith^000000]";
		mes "No more stupid ideas, please!";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Sometimes the direct approach is best. Let's try to hit the ice until it breaks. Try Zeith's first, please.";
		next;
		mes "[^0000ffZeith^000000]";
		mes "So we're resorting to brute force. You want me to go first? Coward! Sigh... Please be gentle? no, hit me with your best shot!";
		erasequest .@quest_id;
		setquest 15112;	// Direct Approach
		illusion_frozen = 3;
		cloakonnpcself( "Zeith#frozen01" );
		if (mobcount("ice_d03_i", "Zeith#frozen02::OnZeithDead") < 1)
			monster "ice_d03_i",155,42,"Zeith",3798,1, "Zeith#frozen02::OnZeithDead";	// ILL_FROZEN_GC
		close;
	}
	end;
}

ice_d03_i,155,43,3	script(CLOAKED)	Zeith#frozen02	4_M_GUILLOTINE,{
	if (illusion_frozen == 3) {
		if (checkquest(15112,HUNTING) == 2) {
			mes "[^0000ffZeith^000000]";
			mes "...I can't believe it worked.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "It worked because I'm a genius! You should be thanking me, Zeith!";
			next;
			mes "[^0000ffZeith^000000]";
			mes "*Snort*";
			mes "Let's see how long you can gloat.";
			mes "" + strcharinfo(0) + "";
			mes "Let's leave him alone here";
			mes "and get out!";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "What? Hey, wait! Wait! Come on, Zeith! I thought we were better friends than that!";
			next;
			mes "[^0000ffZeith^000000]";
			mes "...Sigh. You're lucky I'm too kind to just leave you here.";
			mes "I'm still too stiff to move. Would you take care of him, too??";
			erasequest 15112;	// Direct Approach
			setquest 15113;		// Direct Approach
			illusion_frozen = 4;
			cloakonnpcself( "Vrid#frozen01" );
			if (mobcount("ice_d03_i", "Vrid#frozen02::OnVridDead") < 1)
				monster "ice_d03_i",150,42,"Vrid",3797,1, "Vrid#frozen02::OnVridDead";	// ILL_FROZEN_KN
			close;
		}
		end;
	}
	if (illusion_frozen == 4) {
		if (checkquest(15113,HUNTING) != 2) {
			mes "[^0000ffZeith^000000]";
			mes "Now, we need to help Vrid. Please get him out of the ice.";
			if (mobcount("ice_d03_i", "Vrid#frozen02::OnVridDead") < 1)
				monster "ice_d03_i",150,42,"Vrid",3797,1, "Vrid#frozen02::OnVridDead";	// ILL_FROZEN_KN
			close;
		}
		cloakoffnpcself( "Vrid#frozen02" );
		mes "[^ff0000Vrid^000000]";
		mes "Whew, thanks!";
		mes "You're pretty good.";
		mes "Thank you," + strcharinfo(0) + "!";
		next;
		mes "[^0000ffZeith^000000]";
		mes "Let's get out of here.";
		mes "I don't want to be frozen again!";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Wait. We're warriors? we can't leave without making our enemy pay for what he did to us!";
		next;
		mes "[^0000ffZeith^000000]";
		mes "Revenge?";
		mes "Do you want to get frozen again?";
		next;
		select("- What revenge? How did you get frozen, anyway?");
		mes "[^0000ffZeith^000000]";
		mes "Sigh... This knucklehead touched something he shouldn't.";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Come on, I was only trying to help!";
		next;
		mes "[^0000ffZeith^000000]";
		mes "Helping who? To me, that monster didn't look like it needed help!";
		next;
		mes "[^ff0000Vrid^000000]";
		mes "Listen.";
		mes "Vrid's Report: The Strange Lizard!";
		next;
		mes "[^ff0000Vrid^000000]";
		if (isbegin_quest(15116) == 2)
			.@r = rand(3);
		switch(.@r) {
		case 0:// it seems likely to be the default text when 15116 uncompleted
			mes "Like I told you earlier, when this cave was a kingdom, the king had a pet lizard. When the king froze the cave in a fit of rage, this lizard was also turned into a terrifying ice monster.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "Now, he's roaming about the cave, yearning for his owner's love. Isn't that so tragic? I was only trying to give him the love he wanted, and he punished me for it!";
			break;
		case 1:
			mes "Like I told you earlier, when this cave was a kingdom, the king had a pet lizard. One day, this lizard wandered outside of the kingdom to see the outside world, but ended up getting lost. The king was so angry at the lizard that he cursed him.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "That cursed lizard roams about this cave, still wanting to go outside. Isn't that tragic? I was only trying to free him, and in return, he froze me in a block of ice!";
			break;
		case 2:
			mes "His real name was? what was his name?? Ktulla-something. Someone once told me the lizard has been hired by the archpriests of Rachel to keep watch over a boy who is sealed inside this cave.";
			next;
			mes "[^ff0000Vrid^000000]";
			mes "But that story was so unrealistic and boring that it's not worth remembering. A lizard is just a lizard, right?";
			next;
			mes "[^0000ffZeith^000000]";
			mes "If you ask me, that sounds the most plausible of all your stories I've heard.";
			break;
		}
		next;
		mes "[^0000ffZeith^000000]";
		mes "Where do you get all this? And why do your stories keep changing every time?";
		next;
		mes "[^0000ffZeith^000000]";
		mes "Sigh, anyway, that lizard does exist inside this cave. If you want to see it, then press down on all 4 Orbs of Seal in the center of the cave within 30 seconds. That'll make it come out of hiding.";
		next;
		mes "[^0000ffZeith^000000]";
		mes "But that lizard is really strong. I suggest you fight it in a group.";
		next;
		mes "[^0000ffZeith^000000]";
		mes "I'm glad we've met you,";
		mes "" + strcharinfo(0) + ".";
		mes "I hope we'll meet again.";
		next;
		if (isbegin_quest(15116) == 0) {
			mes "^ff0000They started to fade away as they bid me goodbye. Soon there was nothing left of them, as if they never existed at all. Was this all just a dream or something?^000000";
			setquest 15116;// Clear the Illusion of the Frozen
			completequest 15116;
			illusion_frozen = 5;
		}
		else {
			mes "^ff0000They started to fade away as they bid me goodbye. It seems this cave is stuck in an endless time loop.^000000";
			next;
			mes "^ff0000But the events that take place inside it aren't always the same. Is it possible that spacetime inside this cave is still warping? Will I also be affected by that?^000000";
		}
		erasequest 15113;// Direct Approach
		setquest 15115;// Vrid and Zeith
		getexp 1200000,1200000;
		getitem 25271,3;	// IllusionStone
		cloakonnpcself( "Vrid#frozen02" );
		cloakonnpcself( "Zeith#frozen02" );
		close;
	}
	end;

OnZeithDead:
	if (illusion_frozen == 3) {
		cloakonnpcself();
		specialeffect EF_ICECRASH;
	}
	end;
}

ice_d03_i,150,43,5	script(CLOAKED)	Vrid#frozen01	4_M_FROZEN_KN,{
	if (illusion_frozen == 3) {
		if (checkquest(15112,HUNTING) == 2) {
			cloakoffnpcself( "Zeith#frozen02" );
			mes "[^ff0000Vrid^000000]";
			mes "It really worked! Hey, Zeith! Are you alright?";
			close;
		}
		mes "[^ff0000Vrid^000000]";
		mes "See if you can break the ice around him. If it works, then please break me out of the ice, too.";
		if (mobcount("ice_d03_i", "Zeith#frozen02::OnZeithDead") < 1)
			monster "ice_d03_i",155,42,"Zeith",3798,1, "Zeith#frozen02::OnZeithDead";	// ILL_FROZEN_GC
		close;
	}
	end;
}

ice_d03_i,150,43,5	script(CLOAKED)	Vrid#frozen02	4_M_KNIGHT_BLACK,{
	end;
OnVridDead:
	if (illusion_frozen == 4) {
		cloakonnpcself();
		specialeffect EF_ICECRASH;
	}
	end;
}

ice_d03_i,137,38,3	script	Heap of Dry Soil#frozen1	4_SOIL,{
	if (illusion_frozen == 1) {
		if (checkweight(1201,1) == 0 || (MaxWeight - Weight) < 2000) {
			mes "I'm carrying too many types of items. I should lighten my bag first.";
			close;
		}
		if (countitem(25309) >= 10) {
			mes "I have all the twigs I need. I should go back to Zeith and Vrid.";
			close;
		}
		mes "I checked the mound of dirt to look for twigs.";
		next;
		progressbar "00000000",5;
		disablenpc();
		initnpctimer;
		if (rand(100) < 10)
			mes "There's nothing inside this mound of dirt.";
		else {
			getitem 25309,1;
			mes "I've found 1 ^006400Dry Twig^000000.";
		}
		close;
	}
	end;

OnTimer30000:
	stopnpctimer;
	enablenpc();
	end;
}
ice_d03_i,111,45,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen2	4_SOIL
ice_d03_i,65,70,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen3	4_SOIL
ice_d03_i,86,87,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen4	4_SOIL
ice_d03_i,70,113,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen5	4_SOIL
ice_d03_i,46,206,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen6	4_SOIL
ice_d03_i,64,231,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen7	4_SOIL
ice_d03_i,84,208,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen8	4_SOIL
ice_d03_i,100,246,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen9	4_SOIL
ice_d03_i,196,246,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen10	4_SOIL
ice_d03_i,238,231,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen11	4_SOIL
ice_d03_i,252,206,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen12	4_SOIL
ice_d03_i,238,64,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen13	4_SOIL
ice_d03_i,186,44,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen14	4_SOIL
ice_d03_i,160,48,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen15	4_SOIL
ice_d03_i,126,73,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen16	4_SOIL
ice_d03_i,70,184,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen17	4_SOIL
ice_d03_i,214,208,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen18	4_SOIL
ice_d03_i,228,184,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen19	4_SOIL
ice_d03_i,230,111,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen20	4_SOIL
ice_d03_i,219,90,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen21	4_SOIL
ice_d03_i,171,72,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen22	4_SOIL
ice_d03_i,112,111,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen23	4_SOIL
ice_d03_i,112,188,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen24	4_SOIL
ice_d03_i,186,188,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen25	4_SOIL
ice_d03_i,189,112,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen26	4_SOIL
ice_d03_i,150,104,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen27	4_SOIL
ice_d03_i,110,150,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen28	4_SOIL
ice_d03_i,150,187,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen29	4_SOIL
ice_d03_i,187,149,3	duplicate(Heap of Dry Soil#frozen1)	Heap of Dry Soil#frozen30	4_SOIL


//============================================================
//= Illusion of Turtle
//============================================================

// Entrance - starter
alberta,211,28,5	script	Knight Aylvar#illtur	4_M_YOUNGKNIGHT,{
	.@account_id = getcharid(3);
	.@player_name$ = strcharinfo(0);

	disable_items;
	if (ill_turtle == 0) {
		npctalk "Aylvar : I need your help. Please, quickly!", "", bc_self;
		mes "[Knight Aylvar]";
		mes "Um.. Are you an adventurer?? I have a favor to ask you...";
		next;
		if (BaseLevel < 150) {
			mes "[Knight Aylvar]";
			mes "...Oh, you need more experience. Excuse me.";
			mes "It's a high risk job.";
			next;
			mes " - ^0000CDLevel 150 and over can do this quest.^000000 - ";
			close;
		}
		if (select( "What's going on?", "I'm very busy." ) == 2) {
			npctalk "Aylvar : Leiphen, my friend... Please be safe.", "", bc_self;
			mes "[Knight Aylvar]";
			mes "Sorry to bother you.";
			mes "God bless you.";
			close;
		}
		npctalk "Aylvar : Adventurer? Ah. It's you, " + .@player_name$ + ".", "", bc_self;
		mes "[Knight Aylvar]";
		mes "Sorry for the sudden request.";
		mes "I am from the Alberta Guard of the 1st Knights Division, Knight Aylvar.";
		next;
		mes "[Knight Aylvar]";
		mes "Under the command of the Knights, I am on a mission to search for Alberta's 2nd Knights Division, who had disappeared in Turtle Island.";
		mes "However, after meeting a violent storm, I arrived at a Turtle Island, but it didn't seem like the normal Turtle Island.";
		emotion ET_QUESTION, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : What does it mean? It didn't seem like the normal Turtle Island?", bc_self;
		sleep2 1500;
		npctalk "Aylvar : It's hard to explain, it's clearly a Turtle Island, but I got goose bumps.", "", bc_self;
		next;
		mes "[Knight Aylvar]";
		mes "I was in danger, but someone helped me out.";
		next;
		mes "[Knight Aylvar]";
		mes "As I woke up, I felt the sea breeze from Alberta's harbor... In my hands, two pieces of this turtle shell.";
		npctalk "Aylvar : I'm not sure how, but I knew that I barely escaped with my life.", "", bc_self;
		next;
		mes "[Knight Aylvar]";
		mes "Here is only one piece I have right now.";
		mes "My friend might have the other one. No, I mean he must still have.";
		next;
		if (select( "Is your friend in trouble?", "It's unbelievable." ) == 2) {
			emotion ET_PROFUSELY_SWAT;
			mes "[Knight Aylvar]";
			mes "I understand. Even for me, I am bewildered, but please hear me out. I think my friend is in danger";
		}
		else {
			emotion ET_PROFUSELY_SWAT;
			mes "[Knight Aylvar]";
			mes "Yes, it's about my friend. Sorry for such a long story, just a little more, hear me out.";
		}
		next;
		npctalk "Leiphen: I'm Leiphen, a professor of archeology at Juno.", "", bc_self;
		mes "[Knight Aylvar]";
		mes "I show these pieces to my friend, ^0000CDLeiphen^000000.";
		mes "He shows big interest. ^0000CDHe said that it was made from the shell of a turtle living only on Turtle Island.";
		next;
		mes "[Knight Aylvar]";
		mes "After I handed the pieces to him....";
		mes "My friend Leiphen who was looking at the pieces suddenly disappeared.";
		npctalk "Aylvar : I saw it with my own eyes. It was right here.", "", bc_self;
		next;
		mes "[Knight Aylvar]";
		mes "It happened ^FF0000half a day ago^000000.";
		mes "In the meantime, I contacted Juno University and went to Turtle Island, but I haven't achieved any results... I was hoping I could find a clue so I figure out where Leiphen disappeared to.";
		next;
		mes "[Knight Aylvar]";
		mes "" + .@player_name$ + ", please help us. Can you help me find my friend?";
		mes "This piece might be a clue. Please take a look.";
		next;
		select("Please tell me your friend looks like.");
		mes "[Knight Aylvar]";
		mes "^0000CDHe wears glasses^000000 and has blue short hair. ^0000CDHis face is just like a scholar^000000 so you should be able to recognize him.";
		next;
		if (select( "Show me the piece. Let me take a look.", "Sorry but I'm busy." ) == 2) {
			npctalk "Aylvar : Leiphen, my friend... Please be safe.", "", bc_self;
			mes "[Knight Aylvar]";
			mes "Sorry to bother you.";
			mes "God bless you.";
			close;
		}
		if (checkweight(25315,1) == 0) {
			mes " - ^424242EStopped handing the piece over.^000000 - ";
			next;
			mes "[Knight Aylvar]";
			mes "I am sorry, " + .@player_name$ + ". You already have too much stuff. I figure it's difficult to find my friend right now.";
			next;
			mes "[Knight Aylvar]";
			mes "Can you clear up your inventory a little bit? I will be right here waiting for you.";
			close;
		}
		mes " - ^424242I grabbed the piece handed over by the knight. A small leaf is carved on the turtle shell. It's a bulky piece, but somehow feels warm.^000000 - ";
		next;
		mes " - ^424242I was looking at the piece for a while, but suddenly something seemed to appear in my head. Suddenly a gust blows and my vision gets darker.^000000 - ";
		next;
		emotion ET_KEK;
		npctalk "Aylvar : Ugh, it's the same wind like before. " + .@player_name$ + ", are you ok?", "", bc_self;
		mes " - ^424242EAylvar's voice is getting smaller and I felt dizzy. It's starting to smell like wet clay....^000000 - ";
		ill_turtle = 1;
		setquest 16096;	// To the unknown tortoise island
		close2;
		getitem 25315,1;	// Piece_Of_Shell
		warp "tur_d03_i",132,187;
		end;
	}
	if (ill_turtle < 11) {
		mes "[Knight Aylvar]";
		mes "" + .@player_name$ + "! Oh, you are ok! I am... worried. After Leiphen, " + .@player_name$ + ", you also disappeared, I was really concerned.";
		sleep2 500;
		if (ill_turtle > 5) {
			unittalk .@account_id, "" + .@player_name$ + " : It's ok, Archeologist Leiphen's location seems to be where I went.", bc_self;
			sleep2 1000;
			npctalk "Aylvar : Really? Oh. Leiphen...!", "", bc_self;
		}
		else {
			unittalk .@account_id, "" + .@player_name$ + " : I am ok. I found Archeologist Leiphen.", bc_self;
			sleep2 1000;
			npctalk "Aylvar : Really? Good! Leiphen...!", "", bc_self;
		}
		next;
		mes "[Knight Aylvar]";
		mes "Are you going back to find Leiphen again?";
		npctalk "Aylvar : Is there a way for me to go there?", "", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : I think it's hard for you to go there.", bc_self;
		next;
		if (select( "Let me go there again.", "I will go there later." ) == 2) {
			mes "[Knight Aylvar]";
			mes "Please save Leiphen.";
			mes "If I can go there, I will save him myself.";
			close;
		}
		mes "[Knight Aylvar]";
		mes "Thank you. Thank you so much.";
		mes "Please save Leiphen.";
		next;
		mes " - ^424242As the girl who was there told me, I squeezed the piece of the turtle shell, I felt the wind blowing my hair again.^000000 - ";
		next;
		npctalk "Aylvar : " + .@player_name$ + ", please be careful!", "", bc_self;
		mes " - ^424242Before my eyes were completely dark, my cheeks felt the cooler air from the cave....^000000 -";
		close2;
		warp "tur_d03_i",132,187;
		end;
	}
	if (ill_turtle == 11) {
		mes "[Knight Aylvar]";
		mes "Hi " + .@player_name$ + ". I have heard every story from Leiphen.";
		mes "I am worried because he went there again. He said he would come back after finds out the secret of that place.";
		next;
		mes "[Knight Aylvar]";
		mes "Not only Leiphen but also a kid named Narin... who you also helped. You are a great adventurer.";
		mes "Are you going there again?";
		next;
		if (select( "Yes. I am going there.", "Not right now." ) == 2) {
			emotion ET_SURPRISE;
			mes "[Knight Aylvar]";
			mes "Oh, since you are going there again, please make sure Leiphen is ok as well.";
			ill_turtle = 12;
			setquest 16114;	// Talk with Aylvar
			completequest 16114;	// Talk with Aylvar
			close;
		}
		mes "[Knight Aylvar]";
		mes "Please come back again, " + .@player_name$ + ".";
		mes "On the way, please make sure Leiphen is doing good.";
		ill_turtle = 12;
		setquest 16114;	// Talk with Aylvar
		completequest 16114;	// Talk with Aylvar
		close2;
		warp "tur_d03_i",132,187;
		end;
	}
	npctalk "Aylvar : He is a guy where research is more important than himself, so I want to stay closer to him.", "", bc_self;
	mes "[Knight Aylvar]";
	mes "Glad to see you again. I have reported the information to the Knights Division and now my job is to support Leiphen's research.";
	mes "Are you going there again?";
	next;
	if (select( "Yes. I am going there.", "Not right now." ) == 2) {
		mes "[Knight Aylvar]";
		mes "When I heard his story, I wanted to go there too... but I can't do as he explained. I am so sad.";
		close;
	}
	mes "[Knight Aylvar]";
	mes "Please come back again, " + .@player_name$ + ".";
	mes "If you find Leiphen, please make sure he is eating.";
	close2;
	emotion ET_KEK;
	warp "tur_d03_i",132,187;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 0 && BaseLevel > 149" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 11" );
	end;
}


tur_d03_i,217,73,0	warp	illtur03_04	 2,2,tur_d04_i,99,186
tur_d04_i,99,191,0	warp	illtur04_03	 2,2,tur_d03_i,217,82

tur_d03_i,132,194,3	script	Portal#illtur02	4_ENERGY_RED,{
	if (ill_turtle < 11) {
		mes " - ^424242Beyond the door, it appears black, and nothing seems to exist. A reddish glow is floating in front of the black sky. A nervous looking girl appears.^000000 - ";
		next;
		npctalk "Girl : The piece will help you. Hold tight.", "Girl#illtur01", bc_self;
		mes "[Girl]";
		mes "...It is this place.";
		mes "Hopeless, desperate, and poisonous.";
		next;
		mes " - ^424242It's a puzzling response, but it might help. As the girl told me, I held onto the turtle shell.^000000 - ";
		next;
		if (select( "Back to Alberta.", "Stay here." ) == 2) {
			unittalk getcharid(3), "" + strcharinfo(0) + " : I have something to do here.", bc_self;
			mes "[Girl]";
			mes "......Not going to back?";
			close;
		}
		npctalk "Girl : Yes. Just... Go.", "Girl#illtur01", bc_self;
		mes " - ^424242The smell of salty wind lifted the hem of my clothing. You can hear the waves of Alberta Harbor and the sound of seagulls....^000000 - ";
		close2;
		warp "alberta",219,31;
		end;
	}
	if (isbegin_quest(16115) == 0) {
		mes " - ^424242This red light is invisible to Narin. It just seems to disappear.^000000 - ";
		next;
		mes " - ^424242If I don't come back, she will forget. Just right before I walk into the light, Narin's voice echoed from behind me.^000000 - ";
		next;
		mes "[Narin]";
		mes "I will remember... Come back. Please. Bro...!";
		next;
		if (select( "Nod and go to Alberta.", "Nod and turn." ) == 2) {
			mes " - ^424242Turning around with a small smile, Narin, holding her hands, was surprised and glanced over.^000000 - ";
			next;
			mes "[Narin]";
			mes "Ah? Not going back?";
			next;
			unittalk getcharid(3), "" + strcharinfo(0) + " : Seems like you still need me. Did you call me? I didn't hear clearly, can you tell me again?", bc_self;
			mes "[Narin]";
			mes "Hey!";
			setquest 16115;	// Talk with girl
			completequest 16115;	// Talk with girl
			close;
		}
		mes " - ^424242I nodded and recalled the bulky piece I had now kept by my heart. The sea breeze from the harbor blows by my ears...^000000 - ";
		setquest 16115;	// Talk with girl
		completequest 16115;	// Talk with girl
		close2;
		warp "alberta",219,31;
		end;
	}
	mes " - ^424242Now I stand in front of the familiar light. Lightly waved my hand to Narin, she closed her eyes and held both hands together.^000000 - ";
	next;
	mes " - ^424242With empty hands, I think of the bulky but warm piece left in my heart.^000000 - ";
	next;
	if (select( "Go back to Alberta.", "Stay here." ) == 2) {
		mes " - ^424242Turning around with a small smile, Narin, holding her hands, was surprised and glanced over.^000000 - ";
		next;
		mes "[Narin]";
		mes "Ah? Not going back?";
		next;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Seems like you still need me. Did you call me? I didn't hear clearly, can you tell me again?", bc_self;
		mes "[Narin]";
		mes "Hay!";
		close;
	}
	mes " - ^424242I will come back again. I put my hands together on my chest.^000000 - ";
	next;
	mes " - ^424242The consciousness became far away, and the salty, slightly fishy smell of Alberta Harbor tickled my nose.^000000 - ";
	close2;
	warp "alberta",219,31;
	end;
}

tur_d03_i,139,186,3	script	Girl#illtur01	4_F_NARIN,{
	if (checkweight(1201,1) == 0) {
		mes "[Girl]";
		mes "What are you doing with such a heavy bag? Clear some out.";
		close;
	}
	if (ill_turtle == 0)
		end;

	.@account_id = getcharid(3);
	.@player_name$ = strcharinfo(0);

	if (ill_turtle == 1) {
		mes "[Girl]";
		mes "Again... Stranger.";
		mes "And you brought that again.";
		npctalk "Girl : That piece.", "", bc_self;
		next;
		emotion ET_PROFUSELY_SWAT, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : Who are you? This piece did something? Where am I? How did I get here?", bc_self;
		mes "[Girl]";
		mes "You have a lot of questions, but no need to know.";
		next;
		npctalk "Girl : You don't need to know. You shouldn't be here. There are things you shouldn't know.", "", bc_self;
		mes "[Girl]";
		mes "But ^0000CDthere is someone here like you^000000. One who shouldn't be here.";
		mes "Go back with ^0000CDa scholar who has blue hair^000000. Do you know him?";
		next;
		select( "I am here to find him.", "Do you know Archeologist Leiphen?" );
		mes "[Girl]";
		mes "Good. I don't know his name and where he is, but I can guess.";
		mes "^0000CDThere are two locations^000000. Go find and take him. And do not come back.";
		next;
		switch( select( "Ok, but I have some questions.", "How can I believe you?", "Let me know the way to go back." ) ) {
		case 1:
			unittalk .@account_id, "" + .@player_name$ + " : Who are you? How do you know him? Where am I?", bc_self;
			mes "[Girl]";
			mes "You will be gone for good. No need to know.";
			next;
			specialeffect EF_DETECT3;
			sleep2 1000;
			specialeffect2 EF_DETECT3;
			specialeffect2 EF_CIRCLEPOWER8;
			sleep2 500;
			unittalk .@account_id, "" + .@player_name$ + " : Uh, what was that??", bc_self;
			mes "[Girl]";
			mes "A spell that will protect you for a moment.";
			mes "It will follow you around. Curiosity killed the cat. Don't look into something that is unclear. Don't look back, or talk behind someone's back.";
			next;
			mes "[Girl]";
			mes "^FF0000Don't be alarmed that you may breathe strangely.^000000";
			unittalk .@account_id, "" + .@player_name$ + " : What do you mean?", bc_self;
			ill_turtle = 2;
			erasequest 16096;	// To the unknown tortoise island
			setquest 16097;	// Stranger on Turtle Island 1
			setquest 16098;	// Stranger on Turtle Island 2
			setquest 16099;	// Stranger on Turtle Island 3
			close;
		case 2:
			emotion ET_THINK;
			mes "[Girl]";
			mes "I don't know. I don't know where you came from, how could I know?";
			next;
			mes "[Girl]";
			mes "However, there, the empty door... might have something, you might know about.";
			next;
			mes " - ^424242The girl glanced toward the back of where she was standing. Looking closely, it seems that something reddish is floating in front of the black hole. Let's go and look.^000000 - ";
			close;
		case 3:
			emotion ET_THINK;
			mes "[Girl]";
			mes "......";
			next;
			mes "[Girl]";
			mes "Go back. It's dangerous here.";
			next;
			mes " - ^424242The girl said briefly and stopped talking. She looks sad....^000000 - ";
			close;
		}
	}
	if (ill_turtle < 8) {
		mes "[Girl]";
		mes "...You, still alive?";
		next;
		mes "[Girl]";
		mes "Before you get in danger, get the person you were looking for and leave.";
		close;
	}
	if (ill_turtle == 8) {
		mes "[Girl]";
		mes "You are safe. Both of you.";
		mes "...Sorry for the danger.";
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : It's ok, Professor.", bc_self;
		sleep2 2000;
		cloakoffnpcself( "Archeologist Leiphen#illtur01" );
		emotion ET_SWEAT, getnpcid(0,"Archeologist Leiphen#illtur01");
		npctalk "Archeologist Leiphen : ......Oh, I thought I was going to die.", "Archeologist Leiphen#illtur01", bc_self;
		next;
		mes "[Girl]";
		mes "Then, go back. To the place you came.";
		mes "And forget everything.";
		next;
		npctalk "Archeologist Leiphen : How can I forget this place!?", "Archeologist Leiphen#illtur01", bc_self;
		mes "[Archeologist Leiphen]";
		mes "Huh? What do you mean? I will come back again.";
		mes "Until I find out all of the secrets here.";
		next;
		mes "[Girl]";
		mes "Why do you ignore my warnings? Arrogant.";
		emotion ET_HNG, getnpcid(0,"Archeologist Leiphen#illtur01");
		npctalk "Archeologist Leiphen : I am a professor of archeology.", "Archeologist Leiphen#illtur01", bc_self;
		mes "You may be a professor but that does not give you the right to walk around here.";
		next;
		mes "[Archeologist Leiphen]";
		mes "......Do you know something?";
		mes "Please tell me. Where am I? What just happened here?";
		npctalk "Girl : You don't need to know, you are going to leave anyway...", "", bc_self;
		next;
		if (select( "Stop saying that.", "You are the arrogant one." ) == 2) {
			mes "[Girl]";
			mes "Stop? I didn't say anything wrong. You are going to leave and forget everything soon. You will never come back.... right?";
		}
		else {
			npctalk "Girl : What are you saying? I am the arrogant one?", "", bc_self;
			mes "[Girl]";
			mes "......Fine. Arrogant or not. Think freely. I don't care anyway.";
		}
		next;
		mes "[Girl]";
		mes "I said before.... but no one has returned. I am not expecting anyone to.";
		npctalk "Girl : If you don't expect, there's nothing to be disappoint about.", "", bc_self;
		next;
		emotion ET_QUESTION, .@account_id;
		sleep2 1000;
		emotion ET_THINK, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : You mean, you want us to return home.", bc_self;
		mes "[Girl]";
		mes "......No one comes back. It's better to not come here. It's full of danger.";
		next;
		emotion ET_SURPRISE, getnpcid(0,"Archeologist Leiphen#illtur01");
		mes "[Archeologist Leiphen]";
		mes "You want that, but still someone is going to come back here.";
		sleep2 1000;
		emotion ET_ANGER;
		npctalk "Girl : ......Think what you want.", "", bc_self;
		next;
		mes "[Girl]";
		mes "Whew.........";
		next;
		mes "[Girl]";
		mes "Ok. Fine. Let me tell you. Promise me you will go back after listening. It's not like I want to talk a lot.";
		next;
		npctalk "Girl : I'm just telling you because you're so persistent.", "", bc_self;
		mes "[Girl]";
		mes "...Give me a sec. I need time to think clearly. It's been a long time not talking....";
		next;
		npctalk "Archeologist Leiphen : Then let me look around here for a while.", "Archeologist Leiphen#illtur01", bc_self;
		sleep2 1000;
		cloakonnpcself( "Archeologist Leiphen#illtur01" );
		emotion ET_OHNO, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : Even though it's so dangerous, you can't resist curiosity... Be careful anyway.", bc_self;
		mes "[Girl]";
		mes "I'll talk to you again after a while.";
		ill_turtle = 9;
		erasequest 16104;	// A long-forgotten story
		setquest 16116;	// Continuous story
		close;
	}
	if (ill_turtle == 9) {
		setpcblock PCBLOCK_NPC, true;
		cloakoffnpcself( "Archeologist Leiphen#illtur01" );
		sleep2 500;
		setpcblock PCBLOCK_NPC, false;

		npctalk "Archeologist Leiphen : Ugh, monster!", "Archeologist Leiphen#illtur01", bc_self;
		unittalk .@account_id, "" + .@player_name$ + " : Ugh! You are not a kid. It's dangerous here. Stop wandering around!", bc_self;
		mes "[Narin]";
		mes "Thank you for waiting...";
		mes "It would be better to start introducing myself. I am Narin. ^0000CDOld Ghost.^000000";
		next;
		npctalk "Archeologist Leiphen : O..Old GGhost?", "Archeologist Leiphen#illtur01", bc_self;
		unittalk .@account_id, "" + .@player_name$ + " : ......", bc_self;
		mes "[Narin]";
		mes "You look like you have been through a lot of things before. I can see you are able to talk normally.";
		mes "Ordinary people like a professor can't even see us.";
		next;
		mes "[Narin]";
		mes "All the residents here are spirits bound by the burden of resentment. When you're dead, obsessed with something you desperately want, and you'll always do the same thing without realizing it..";
		npctalk "Narin : I'm lucky, so sometimes I can get out, but eventually I go back and repeat.", "", bc_self;
		next;
		mes "[Narin]";
		mes "We hate life. Those who are not bound by the burden of resentment, those who breathe strangely. We want to hear your last breath.";
		mes "But unless you realize us, we cannot realize you either. It's a good thing.";
		next;
		mes "[Narin]";
		mes "It doesn't last long. The longer you stay here, the more you notice each other. Gradually.";
		mes "And suddenly you guys realize. That's strange. ...Then, it's over.";
		next;
		mes "[Narin]";
		mes "The professor got my stuff, so I could recognize it right away. Normally I wouldn't have known.";
		npctalk "Archeologist Leiphen : Narin's stuff...?", "Archeologist Leiphen#illtur01", bc_self;
		sleep2 1000;
		npctalk "Narin : Yes, turtle shell, my sculpture.", "", bc_self;
		next;
		mes "[Archeologist Leiphen]";
		mes "Oh, I knew it...!!";
		mes "It was you who saved Aylvar. Thank you for helping my friend!";
		next;
		npctalk "Narin : I did it for me. No need to say thanks.", "", bc_self;
		mes "[Narin]";
		mes "I wanted to do it.  My obsession is...";
		mes "^0000CDU I don't want anyone get die here. I want to save all life.^000000......";
		mes "It was just that.";
		next;
		emotion ET_ANGER;
		mes "[Narin]";
		mes "Oh... really, it's such a silly story. It's hard to keep talking.";
		mes "Just leave me alone for a while? Sorry for taking so long.";
		next;
		mes "[Archeologist Leiphen]";
		mes "It's ok. I'll leave you for a moment. " + .@player_name$ + ", let's go together.";
		emotion ET_OK, .@account_id;
		ill_turtle = 10;
		erasequest 16116;	// Continuous story
		setquest 16117;	// Continuous story 2
		close2;
		cloakonnpcself( "Archeologist Leiphen#illtur01" );
		end;
	}
	if (ill_turtle == 10) {
		mes "[Narin]";
		mes "Thank you for waiting. I'm good now. Let me finish.";
		next;
		cloakoffnpcself( "Archeologist Leiphen#illtur01" );
		emotion ET_DELIGHT, getnpcid(0,"Archeologist Leiphen#illtur01");
		npctalk "Archeologist Leiphen : I'm ready. There are a lot of interesting things around here.", "Archeologist Leiphen#illtur01", bc_self;
		mes "[Narin]";
		mes "It's not the first time, someone is here. It's a rare event. When I first saw someone, I remembered what I wanted.";
		next;
		mes "[Narin]";
		mes "The man was deathly afraid, but he was alive and left this place.";
		mes "After that... I could stay a little longer.";
		next;
		mes "[Narin]";
		mes "It's been a while, I haven't lost my mind. I was not swept away by resentment and neither reason nor emotion was lost.";
		next;
		mes "[Narin]";
		mes "So I want to save all life. Those who have flowed in and even those trapped by the burden forever.";
		mes "I realized that all those I saved went back to where they came from.";
		npctalk "Narin : And I am alone knowing and feeling who I am, what I am doing.", "", bc_self;
		next;
		mes "[Narin]";
		mes "It's... it's hard. Even I envy those trapped by this burden. But... I couldn't turn it off. The people who are in danger.";
		mes "....";
		mes "But I don't want to hope. If you hope... you can be betrayed.";
		npctalk "Narin : ......This is the end of my story. Now give me the pieces and you two will be going back..", "", bc_self;
		next;
		mes "[Narin]";
		mes "Oh, I almost forgot. Let me cast my spell on you again. It's weak, so it will not last long.";
		mes "Just get out before it's over.";
		specialeffect EF_DETECT3;
		sleep2 1000;
		specialeffect2 EF_DETECT3;
		specialeffect EF_DETECT3, AREA, "Archeologist Leiphen#illtur01";
		specialeffect2 EF_CIRCLEPOWER8;
		specialeffect EF_CIRCLEPOWER8, AREA, "Archeologist Leiphen#illtur01";
		next;
		if (select( "It's been hard on you being alone.", "I am not going back." ) == 2) {
			mes "[Narin]";
			mes "......I didn't tell you the long story to hear that...";
			mes "Please don't care about me....";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : Please, we do care. I will be glad when I get back again. I will be sad if you are cold when I come here again.", bc_self;
			mes "[Archeologist Leiphen]";
			mes "" + .@player_name$ + ", it turns out that you speak very well.";
		}
		else {
			mes "[Narin]";
			mes "What are you talking about?! I said go back after you listen to my whole story...!";
			mes "I don't want to worry anymore!";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : Please, we do care. Archeologist Leiphen and myself will meet your expectations.", bc_self;
			mes "[Archeologist Leiphen]";
			mes "Yes. That's what I wanted to say.";
		}
		next;
		mes "[Narin]";
		mes "What do you mean...?";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : We will come back. Do not feel alone.", bc_self;
		mes "[Archeologist Leiphen]";
		mes "Let us help other souls here like you, Narin, resolve themselves.";
		next;
		mes "[Narin]";
		mes "Oh really...";
		emotion ET_THINK;
		mes "......No, it was a coincidence. They are, not like me.";
		next;
		mes "[Archeologist Leiphen]";
		mes "We will see. Right?";
		unittalk .@account_id, "" + .@player_name$ + " : Of course. And if it doesn't work, we'll come back to try again and again.", bc_self;
		next;
		npctalk "Narin : No, don't. It is very dangerous here. Do not try to come back.", "", bc_self;
		mes "[Narin]";
		mes "It's ok. I will forget both of you. All the souls here are made like that.";
		mes "I might remember a little longer. But I forget eventually.";
		next;
		emotion ET_SURPRISE, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : But you still remember the turtle shell pieces. You can remember again.", bc_self;
		next;
		mes "[Archeologist Leiphen]";
		mes "We can guess one fact. All the lost memories are in the subconscious mind of Narin.";
		unittalk .@account_id, "" + .@player_name$ + " : You said you want to save all life. If you haven't given up on that wish, you can surely remember it.", bc_self;
		next;
		unittalk .@account_id, "" + .@player_name$ + " : If you forget us, we will remind you. As much as you forget.", bc_self;
		sleep2 2000;
		unittalk .@account_id, "" + .@player_name$ + " : I'll help you when you feel lonely. You won't have to forget everything.", bc_self;
		mes "[Archeologist Leiphen]";
		mes "I will come back. For research and for you, Narin.";
		next;
		mes "[Narin]";
		mes "Really... Really? Are you going to come back here and find me?";
		next;
		mes "[Narin]";
		mes "I don't need to be ... alone...?";
		next;
		select( "I won't leave you alone.", "Don't worry.", "I promise.", "I will come back." );	// note: the selection doesn't change the dialog
		mes "[Narin]";
		mes ".........";
		next;
		mes "[Narin]";
		mes "......Thanks...";
		next;
		mes "[Narin]";
		mes "Thanks... Really...";
		next;
		delitem 25315, countitem(25315);	// Piece_Of_Shell
		specialeffect2 EF_CIRCLEPOWER2;
		specialeffect EF_CIRCLEPOWER2, AREA, "Archeologist Leiphen#illtur01";
		sleep2 500;
		emotion ET_SURPRISE, getnpcid(0,"Archeologist Leiphen#illtur01");
		mes "[Archeologist Leiphen]";
		mes "Hu? Huh? It's just gone. The " + getitemname(25315) + ".";
		mes "Suddenly from my hands... like it melted away.";
		next;
		mes "[Narin]";
		mes "It has my wishes. Now... It doesn't need to exist.";
		npctalk "Archeologist Leiphen : What does that mean?", "Archeologist Leiphen#illtur01", bc_self;
		next;
		emotion ET_ANGER;
		mes "[Narin]";
		mes "...I, I don't know the specifics reason... Just that it might be that way.";
		next;
		mes "[Narin]";
		mes "...Oh, right. Here... I give this to you. Here, you too professor.";
		unittalk .@account_id, "" + .@player_name$ + " : What's this?", bc_self;
		npctalk "Archeologist Leiphen : It... It's an " + getitemname(25271) + "!", "Archeologist Leiphen#illtur01", bc_self;
		next;
		npctalk "Narin : ...Is it? In fact, I had it because it was pretty.", "", bc_self;
		mes "[Narin]";
		mes "It's a sign of promise. I will try to remember the two of you. So come... come and find me.";
		mes "Tomorrow, and the day after tomorrow... I'll be waiting... Brother and professor.";
		next;
		mes "[Narin]";
		mes "And the others... you said you would help them. I'll show you how. How you can help...";
		next;
		mes "[Narin]";
		mes "^0000CDListen to what they want. Brother, even if you look very trivial, do something they'll be pleased by.^000000";
		mes "Please... Maybe one day...";
		next;
		select("Don't worry. I will.");
		mes "[Narin]";
		mes ":)...";
		next;
		mes "[Narin]";
		mes "I, I was able to stay alone so far, because I could meet you two again someday?";
		emotion ET_OK;
		mes "I will... remember... Please... come back.";
		next;
		mes "[Archeologist Leiphen]";
		mes "I will be here until I find all of the secrets.";
		mes "Don't worry. " + .@player_name$ + " and myself will not forget about you Narin.";
		unittalk .@account_id, "" + .@player_name$ + " : We must remember.", bc_self;
		ill_turtle = 11;
		erasequest 16117;	// Continuous story 2
		setquest 16105;	// A short break, and a promise
		getitem 25271,5;	// IllusionStone
		getexp 2880000,1920000;
		close2;
		npctalk "Archeologist Leiphen : Okay, see you again!", "Archeologist Leiphen#illtur01", bc_self;
		cloakonnpcself( "Archeologist Leiphen#illtur01" );
		end;
	}
	switch( checkquest(16105,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Narin]";
		mes "I asked you to come back... but you must leave today. It's dangerous to be here any longer.";
		mes "There is a limit to the protection spell.";
		next;
		mes "[Narin]";
		mes "The day is over and you two stay together. I'll give you a new spell.";
		mes "If I forget again... Please I will try to remember...";
		close;
	case 2:
		erasequest 16105;	// A short break, and a promise
		break;
	}
	switch( checkquest(16108,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Narin]";
		mes "Brother... Are you still here? The spell will be gone after a day, please come back after dawn.";
		next;
		mes "[Narin]";
		mes "Even if I forget you brother, don't go away...please.";
		close;
	case 2:
		erasequest 16108;	// A memory that should not be forgotten - Cooldown
		break;
	}
	switch( isbegin_quest(16106) ) {
	case 0:
		mes "[Narin]";
		mes "Again... Stranger.";
		mes "Go back. It's dangerous...";
		next;
		mes " - ^424242She can't remember, but even if she doesn't remember, she's different from the other ghosts.^000000 -";
		next;
		mes "[Narin]";
		mes "......Why are you mumbling like that?";
		mes "Go back. You do not belong here.";
		next;
		if (select( "What does was she want...", "Go back now." ) == 2) {
			mes " - ^424242Let's go back now. It looks like nothing has happened to the professor, yet. I will come back later.^000000 -";
			next;
			mes "[Narin]";
			mes "Go back, stranger. And never be back.";
			close;
		}
		mes " - ^424242...She wants me to leave with Archeologist Leiphen. Then she will remember...";
		mes "The professor will just come back. Let's find him.^000000 -";
		setquest 16106;	// A memory that should not be forgotten 1
		close;
	case 1:
		mes "[Narin]";
		mes "Go back. ...you not should be here.";
		next;
		mes " - ^424242...She wants me to leave with Archeologist Leiphen. Then she will remember...";
		mes "The professor will just come back. Let's find him.^000000 -";
		close;
	case 2:
		cloakoffnpcself( "Archeologist Leiphen#illtur01" );
		mes "[Archeologist Leiphen]";
		mes "I came here again. Well, everyday.";
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : I am here too. Are you doing well?", bc_self;
		next;
		mes "[Narin]";
		mes "......";
		next;
		mes "[Narin]";
		mes "............";
		next;
		mes "[Narin]";
		mes ".................";
		next;
		mes "[Narin]";
		mes "................Aww..";
		unittalk .@account_id, "" + .@player_name$ + " : Hey? What's going on?", bc_self;
		next;
		emotion ET_SWEAT;
		mes "[Narin]";
		mes "......Again ...I forgot again.....";
		unittalk .@account_id, "" + .@player_name$ + " : It's ok. We are here again.", bc_self;
		next;
		npctalk "Narin : I was waiting as long as I can remember...", "", bc_self;
		mes "[Narin]";
		mes "Thank you... Um, let me cast a spell on you. You will go to the others as well today?";
		next;
		mes "[Narin]";
		mes "Hope you two will be safe...";
		specialeffect EF_DETECT3;
		sleep2 500;
		specialeffect2 EF_DETECT3;
		specialeffect EF_DETECT3, AREA, "Archeologist Leiphen#illtur01";
		specialeffect2 EF_CIRCLEPOWER8;
		specialeffect EF_CIRCLEPOWER8, AREA, "Archeologist Leiphen#illtur01";
		next;
		mes "[Narin]";
		mes "And here, a sign of promise. Professor and brother. I'm glad you came.";
		mes "I will be waiting for tomorrow.";
		npctalk "Archeologist Leiphen : See you tomorrow, Narin. and you.", "Archeologist Leiphen#illtur01", bc_self;
		erasequest 16106;	// A memory that should not be forgotten 1
		erasequest 16107;	// A memory that should not be forgotten 2
		setquest 16108;	// A memory that should not be forgotten - Cooldown
		getitem 25271,1;	// IllusionStone
		getexp 1200000,1000000;
		close2;
		cloakonnpcself( "Archeologist Leiphen#illtur01" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 8" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 9" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 10" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16108,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && isbegin_quest(16106) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && isbegin_quest(16106) == 0 && checkquest(16105,PLAYTIME) == -1 && checkquest(16108,PLAYTIME) == -1" );
	end;
}

tur_d03_i,136,187,5	duplicate(dummy_cloaked_npc)	Archeologist Leiphen#illtur01	2_M_ALCHE


tur_d03_i,80,180,1	script	Impatient Man#illtur	4_M_URGENT_MAN,{
	if (ill_turtle == 2) {
		.@account_id = getcharid(3);
		.@player_name$ = strcharinfo(0);

		mes "[Impatient Man]";
		mes "I lost her. I lost her. My baby. My pretty baby. Where are you? My baby. What's her name? My daughter. Daughter? My baby.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Hey, hello?", bc_self;
		mes " - ^424242As she told me, there are others... but he doesn't look like Archeologist Leiphen.^000000 - ";
		next;
		mes "[Impatient Man]";
		mes "Who was it? My baby, where are you? My daughter? My.... daughter? Ha, hahaha. I lost her. I lost her";
		next;
		npctalk "My baby is gone... My baby. My lovely baby.", "", bc_self;
		unittalk .@account_id, "" + .@player_name$ + " : Did he lose his baby...?", bc_self;
		select( "Are you looking for your baby?", "Do you want my help?" );
		npctalk "My baby, I lost her. I lost my baby. Where are you?", "", bc_self;
		mes "[Impatient Man]";
		mes "No. ^FF0000You can't^000000.";
		next;
		npctalk "My baby? Baby? I lost, lost, my daughter... baby. Where... where?", "", bc_self;
		unittalk .@account_id, "" + .@player_name$ + " : ...Excuse me?", bc_self;
		mes "[Impatient Man]";
		mes "No. ^FF0000No.^000000 Can't find her.";
		next;
		mes "[Impatient Man]";
		mes "No ^FF0000it can't be. My daughter.^000000 Baby... Baby? No. Ha, ha^FF0000haha. No. Ha, ha.^000000 My ^FF0000pretty baby,^000000, baby. My ^FF0000 pretty baby. No.^000000 No.";
		ill_turtle = 3;
		erasequest 16097;	// Stranger on Turtle Island 1
		questinfo_refresh();
		next;
		unittalk .@account_id, "" + .@player_name$ + " : He's...a strange man.", bc_self;
		mes " - ^424242Hard to communicate with...^000000 - ";
		mes " - ^424242Let me check the other point. Let's go...^000000 - ";
		close;
	}
	if (ill_turtle == 3) {
		mes "[Impatient Man]";
		mes "^FF0000No, my daughter. My ^000000pretty baby. No. Lost, ^FF0000lost her^000000. Lost. Boohoo... My ^FF0000pretty...baby.. Can't ^000000find, ^FF0000can't^000000 find, can't... ^FF0000find^000000......";
		if (!.talk)
			donpcevent "Impatient Man#illtur::OnTalk";
		close;
	}
	mes "[Impatient Man]";
	mes "I lost her. I lost her. My baby. My pretty baby. Where are you? My baby. What's her name? My daughter. Daughter? My baby.";
	next;
	mes "[Impatient Man]";
	mes "Who was it? My baby... who?";
	if (!.talk)
		donpcevent "Impatient Man#illtur::OnTalk";
	close;

OnTalk:
	.talk = 1;
	switch( rand(2) ) {
	case 0:
		npctalk "I can't... find. My baby. Gone. My... lovely daughter.";
		sleep 3000;
		npctalk "I can't find. Gone... My daughter, my... daughter? My? baby...";
		break;
	case 1:
		npctalk "My baby, I lost her. I lost my baby. Where are you?";
		sleep 3000;
		npctalk "My baby? Baby? I lost, lost, my daughter... baby. Where... where?";
		break;
	}
	.talk = 0;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 2" );
	end;
}


tur_d03_i,235,187,7	script	Susceptible Soldier#	4_M_KEEN_SOLDIER,{
	if (ill_turtle == 3) {
		.@account_id = getcharid(3);
		.@player_name$ = strcharinfo(0);

		mes "[Susceptible Soldier]";
		mes "Murmur.... ^FF0000Munch^000000, munch. ^FF0000Murmur^000000...";
		mes "The damn^BDBDBDuh..^000000 Mon..^BDBDBDDmonster^000000...";
		next;
		mes "[Susceptible Soldier]";
		mes "It's all ... mine. ^BDBDBDIt all^000000 can ^BDBDBDbe^000000 mine...";
		mes "My...my precious ^BDBDBDtreasure^000000... ^FF0000Murmur^000000...";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Hum... Hey, hello?", bc_self;
		mes " - ^424242There is someone. He seems to be muttering something but I can't hear clearly. He doesn't look like Archeologist Leiphen^000000 - ";
		next;
		mes " - ^424242Biting nails and the fingertips are messed up.....^000000 - ";
		next;
		npctalk "My treasure, if the " + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + " was gone... All, Munch... Muunch....", "Susceptible Soldier#", bc_self;
		mes "[Susceptible Soldier]";
		mes "Munch, Munch... Murmur... My ^BDBDBDtreasure^000000... My ^BDBDBDprecious^000000 treasure... It's ^BDBDBDall^000000 mine...";
		next;
		select( "Have you seen this person?", "Are... are you ok?" );
		specialeffect EF_SCREEN_QUAKE;
		mes "[Susceptible Soldier]";
		mes "^BDBDBDA^000000 human? A ^BDBDBDhuuu^000000man? There would ^BDBDBDbe no such thing^000000!!!!!";
		mes "Damn ^BDBDBDyou^000000! Don't ^BDBDBDlook^000000 at me ^BDBDBDlike^000000 that... ^BDBDBDDon't^000000 look!";
		next;
		npctalk "Munch... Muunch, treasure... My treasure... Munch... Muunch...", "Susceptible Soldier#", bc_self;
		sleep2 1500;
		unittalk .@account_id, "" + .@player_name$ + " : Ugh, it'll be difficult to stay much longer. Need to avoid.", bc_self;
		mes "[Susceptible Soldier]";
		mes "Damn ^BDBDBDit^000000... ^BDBDBDDamn^000000 it...";
		mes "Munch, murmur... ^FF0000Munch^000000, munch...";
		ill_turtle = 4;
		erasequest 16098;	// Stranger on Turtle Island 2
		questinfo_refresh();
		next;
		mes " - ^424242There is the other point. Let's go...^000000 - ";
		close;
	}
	if (ill_turtle == 4) {
		mes "[Susceptible Soldier]";
		mes "Munch, murmur... ^FF0000Munch^000000, munch. ^FF0000Munch^000000...";
		mes "The damn^BDBDBDuh^000000 mon..^BDBDBDDmonster^000000...";
		next;
		mes "[Susceptible Soldier]";
		mes "It's all mine. ^BDBDBDCould be^000000 all^ BDBDBDmine^000000...";
		mes "My... my treasure. ^BDBDBDAll^000000 of...my... ^FF0000munch, munch^000000...";
		if (!.talk)
			donpcevent "Susceptible Soldier#::OnTalk";
		close;
	}
	if (ill_turtle > 10) {
		if (checkweight(1201,1) == 0) {
			mes "[Susceptible Soldier]";
			mes "What are you doing with such a heavy bag? Clear some space.";
			close;
		}
		if (!.talk)
			donpcevent "Susceptible Soldier#::OnTalk";

		switch( checkquest(16105,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Susceptible Soldier]";
			mes "It's..^BDBDBDit^000000 was... alive. ^BDBDBDIt's^000000 alive... Damn! ^BDBDBDAlive,^000000 alive?! I am!!! I am^BDBDBDdead^000000, dead!!";
			mes "I can't forgive ^BDBDBDyou^000000!!! I will^BDBDBDfind^000000 and ^BDBDBDkill^000000 you all!! ^FF0000munch^000000... munch...";
			next;
			mes " - ^424242Still a good idea to not get close. Let's wait for a day. After dawn, come back again.^000000 - ";
			close;
		case 2:
			erasequest 16105;	// A short break, and a promise
			break;
		}

		switch( checkquest(16110,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Susceptible Soldier]";
			mes "Ha... Ha ^BDBDBDuh^000000, my ^BDBDBDtreasure^000000... My treasure...";
			mes "Finally ^BDBDBDI^000000 got ^BDBDBDit^000000... Finally ^BDBDBDI^000000 got...";
			next;
			mes "[Susceptible Soldier]";
			mes "Who ^BDBDBDare^000000 you!? Why ^BDBDBDare^000000 you here!";
			mes "Don't look at my ^BDBDBDtreasure^000000! ^BDBDBDI^000000 won't let you!!!!! Munch, ^FF0000munch^000000, munch...";
			next;
			mes " - ^424242He seems ok. ..Ok? Just leave him be. Come back after dawn.^000000 -";
			close;
		case 2:
			erasequest 16110;	// Vain Desire - Cooldown
			break;
		}

		.@quest_16109 = checkquest(16109,HUNTING);
		if (.@quest_16109 == -1)
			.@state = -1;
		else if (.@quest_16109 == 2 && countitem(25316) > 4)
			.@state = 2;

		switch( .@state ) {
		case -1:
			break;
		case 0:
		case 1:
			specialeffect EF_SCREEN_QUAKE;
			mes "[Susceptible Soldier]";
			mes "^FF0000I need more!!!!!!!!!!^000000";
			next;
			mes "[Susceptible Soldier]";
			mes "^FF0000My treasure... My revenge...";
			mes "Not enough!!!^000000";
			next;
			mes " - ^424242Did I forget something? ^0000CD" + getitemname(25316) + " 5 pieces ^424242and ^0000CDkill 10 " + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + ".^000000 -";
			close;
		case 2:
			mes "[Susceptible Soldier]";
			mes "Did you get payback? To the ^BDBDBDterrible^000000 monsters?";
			mes "And my treasure... ^FF0000Munch^000000, munch... You brought ^BDBDBDmy^000000 treasure?";
			next;
			specialeffect EF_SCREEN_QUAKE;
			mes "[Susceptible Soldier]";
			mes "^FF0000Give me^000000! My treasure!";
			next;
			mes "[Susceptible Soldier]";
			mes "Ha... Haha... Haha^BDBDBDha^000000ha...... Haha^BDBDBDha^000000hahaha......";
			mes "It's shiny... shiny... It's pretty, so pretty.";
			next;
			mes "[Susceptible Soldier]";
			mes "Take this. I don't need it.";
			mes "I have my treasure ^BDBDBDnow^000000... It's shiny... Pretty.";
			next;
			mes " - ^424242As exchange, I took the " + getitemname(25271) + ". How could he have become obsessed with such worthless garbage without seeing anything really valuable?^000000 -";
			next;
			mes " - ^424242Well, it might be just the idea of a living person that the " + getitemname(25271) + " is precious.^000000 -";
			delitem 25316,5;	// Shabby_Metal_Chip
			erasequest 16109;	// Vain Desire
			setquest 16110;	// Vain Desire - Cooldown
			getitem 25271,1;	// IllusionStone
			getexp 1200000,1000000;
			close;
		}
		mes "[Susceptible Soldier]";
		mes "Munch, murmur... ^FF0000munch^000000, munch. ^FF0000Munch^000000...";
		mes "The damn^BDBDBDuh^000000.. mon..^BDBDBDDmonster^000000...";
		next;
		mes "[Susceptible Soldier]";
		mes "It's all mine. ^BDBDBDCould be^000000 all^BDBDBDmine^000000...";
		mes "My... my treasure. ^BDBDBDAll^000000 of... my... ^FF0000munch, munch^000000...";
		next;
		select( "What treasure?", "What monster?" );	// note: the selection doesn't change the dialog
		mes "[Susceptible Soldier]";
		mes "The damn^BDBDBDuh^000000.. mon.. ^FF0000" + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + " monster^000000...";
		mes "They took ^BDBDBDmy^000000 treasure^BDBDBDD.... My!! treasure^000000...!!";
		next;
		mes "[Susceptible Soldier]";
		mes "Munch, murmur... ^FF0000munch^000000, munch.";
		mes "Munch, ^FF0000munch^000000... Murmur...";
		next;
		if (select( "Let me search.", "Okay." ) == 2) {
			mes "[Susceptible Soldier]";
			mes "Yes... It's mine.. ^BDBDBDuh^000000... My ^BDBDBDtreasure^000000...";
			mes "I couldn't get ^BDBDBDit^000000... The damn ^BDBDBDmon^000000.. monsters...";
			mes "Munch, ^FF0000munch munch munch^000000...";
			close;
		}
		mes "[Susceptible Soldier]";
		mes "You? Are ^BDBDBDyou^000000 going?";
		mes "Go, ^BDBDBDgo^000000 get it! My ^BDBDBDtreasure^000000! You can take it from them! My ^BDBDBDtreasure^000000!";
		next;
		mes "[Susceptible Soldier]";
		mes "And payback to " + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + ". ^FF0000Revenge^000000... Munch munch... My ^BDBDBDrevenge^000000.. Please...";
		mes "Get rid of 10... monsters! Munch, ^FF0000munch munch^000000... Get ^BDBDBDrid^000000 of them!!!";
		next;
		mes " - ^424242Narin said, I can get some ^0000CD" + getitemname(25316) + "^424242 from here. It would be enough for him. ^0000CDLet me prepare^424242 5 pieces.^000000 - ";
		mes " - ^0000CDI need to get rid of the ^42424210 " + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + " monsters.^000000 - ";
		setquest 16109;	// Vain Desire
		close;
	}
	mes "[An susceptible soldier]";
	mes "Murmur.... ^FF0000Munch^000000, munch. ^FF0000Murmur^000000...";
	mes "The damn ^BDBDBDuh^000000.. mon..^BDBDBDmonster^000000...";
	next;
	mes "[Susceptible Soldier]";
	mes "It's all... mine. ^BDBDBDIt all^000000 can ^BDBDBDbe^000000 mine...";
	mes "My... my precious ^BDBDBDtreasure^000000... ^FF0000Murmur^000000...";
	if (!.talk)
		donpcevent "Susceptible Soldier#::OnTalk";
	close;

OnTalk:
	.talk = 1;
	switch( rand(3) ) {
	case 0:
		npctalk "Munch... Muunch... Munch... Muunch...";
		sleep 3000;
		npctalk "My, treasure... Munch, can't forgive...";
		break;
	case 1:
		npctalk "My treasure, if the " + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + " was gone... All, Munch... Muunch....";
		sleep 3000;
		npctalk "Munch... Muunch, Treasure... My treasure... Munch... Muunch...";
		break;
	case 2:
		npctalk "Revenge... Revenge... Munch... Muunch... Munch... Muunch...";
		sleep 3000;
		npctalk "I will get payback... on... " + getmonsterinfo("ILL_ASSULTER", MOB_NAME) + "... They took my treasure!";
		break;
	}
	.talk = 0;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 3" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16110,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == -1 && checkquest(16110,PLAYTIME) == -1 && checkquest(16109,HUNTING) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16109,HUNTING) == 2 && countitem(25316) > 4" );
	end;
}


tur_d04_i,96,112,1	script	Fragile Woman#illtur	4_F_SLOPPY_WOMAN,{
	disable_items;

	.@char_id = getcharid(0);
	.@account_id = getcharid(3);
	.@player_name$ = strcharinfo(0);

	if (ill_turtle == 4) {
		mes " - ^424242Oops. It's not Archeologist Leiphen for sure.^000000 -";
		next;
		mes "[Fragile Woman]";
		mes "I'm hungry. Help me. I'm so hungry.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : I'm glad that I found someone who can speak.", bc_self;
		select( "How can I help you?", "Let me help you.", "Please help me." );
		npctalk "I'm starving to death. If I don't eat something, I will die.", "", bc_self;
		sleep2 3000;
		npctalk "I'm hungry. Please help me. Please...", "", bc_self;
		mes "[Fragile Woman]";
		mes "I haven't had a meal today, yesterday, and the day before yesterday.";
		mes "I'm going to die. Please help me... Please.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : I'll help. Let me share some food. Are there any animals I can hunt around?", bc_self;
		mes "[Fragile Woman]";
		mes "I'm going to die. Starving.";
		mes "I'm hungry. I'm starving.";
		next;
		select( "So what do you want...", "Please talk clearly!" );
		npctalk "I can eat anthing now. Please give me something.", "", bc_self;
		mes "[Fragile Woman]";
		mes "I haven't had a meal today. I was starving all day yesterday. My child was starving too. My husband was also starving.";
		mes "I'm going to die. We are all going die.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Haha... I can't communicate... I want to go home.", bc_self;
		mes " - ^424242She told me the other place, ^0000CDthe other^000000 point. Is ^0000CDTurtle Palace^424242 nearby?^000000 -";
		ill_turtle = 5;
		erasequest 16099;	// Stranger on Turtle Island 3
		setquest 16100;	// Stranger on Turtle Island 4
		close;
	}
	if (ill_turtle == 7) {
		setpcblock PCBLOCK_NPC, true;
		cloakoffnpcself( "Archeologist Leiphen#illtur03" );
		npctalk "Archeologist Leiphen : Is this the place? I've been here a few times...", "Archeologist Leiphen#illtur03", bc_self;
		sleep2 1000;
		setpcblock PCBLOCK_NPC, false;
		unittalk .@account_id, "" + .@player_name$ + " : Yes. Just right here. Hello, are you ok?", bc_self;

		mes "[Fragile Woman]";
		mes "I'm hungry. I've been starving for a long time... I'm going to die. Please, please help me.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Well, this is the woman here, Professor Leiphen.", bc_self;
		mes "[Archeologist Leiphen]";
		mes "......um.. Hey?";
		next;
		npctalk "I'm hungry. Please help me. I'm hungry.", "", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : I thought it would be difficult to communicate... Let's go to the other people?", bc_self;
		mes "[Archeologist Leiphen]";
		mes "......";
		next;
		mes "[Archeologist Leiphen]";
		mes "Who are you talking to now?";
		mes "Nobody is here except the two of us.";
		npctalk "I'm going to die. Die. Die.", "", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : ......", bc_self;
		next;
		npctalk "Ah-ha, I found.", "", bc_self;
		cloakonnpcself( "Fragile Woman#illtur" );
		specialeffect EF_SCREEN_QUAKE, AREA, "Rancorous Ghost#illtur01";
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur01";
		cloakoffnpcself( "Rancorous Ghost#illtur01" );
		mes "[Archeologist Leiphen]";
		mes "What... is... that... sound...";
		next;
		specialeffect EF_SCREEN_QUAKE, AREA, "Rancorous Ghost#illtur02";
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur02";
		cloakoffnpcself( "Rancorous Ghost#illtur02" );
		sleep2 800;
		npctalk "I found.", "Rancorous Ghost#illtur03", bc_self;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur03";
		cloakoffnpcself( "Rancorous Ghost#illtur03" );
		sleep2 800;
		npctalk "Breathing!", "Rancorous Ghost#illtur04", bc_self;
		specialeffect EF_SCREEN_QUAKE, AREA, "Rancorous Ghost#illtur04";
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur04";
		cloakoffnpcself( "Rancorous Ghost#illtur04" );
		sleep2 800;
		npctalk "Found alive.", "Rancorous Ghost#illtur05", bc_self;
		cloakoffnpcself( "Rancorous Ghost#illtur05" );
		sleep2 800;
		npctalk "Catch!", "Rancorous Ghost#illtur06", bc_self;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur06";
		cloakoffnpcself( "Rancorous Ghost#illtur06" );
		sleep2 800;
		npctalk "Kill!", "Rancorous Ghost#illtur07", bc_self;
		specialeffect EF_SCREEN_QUAKE, AREA, "Rancorous Ghost#illtur07";
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur07";
		cloakoffnpcself( "Rancorous Ghost#illtur07" );
		sleep2 800;
		npctalk "Make into pieces!", "Rancorous Ghost#illtur01", bc_self;
		mes "[Archeologist Leiphen]";
		mes "Aargh! What is this!";
		next;
		cloakoffnpcself( "Girl#illtur02" );
		unittalk .@account_id, "" + .@player_name$ + " : Look out, it's dangerous!", bc_self;
		mes "[Girl]";
		mes "Put this in your mouth. Shh, quietly!";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Hey, you are the girl from before? What is it, a turtle shell?", bc_self;
		mes "[Girl]";
		mes "Don't breathe. You too.";
		next;
		npctalk "Archeologist Leiphen : Is there another one?", "Archeologist Leiphen#illtur03", bc_self;
		sleep2 1000;
		npctalk "Girl : Don't breathe! Don't talk!", "Girl#illtur02", bc_self;
		sleep2 1000;
		npctalk "Archeologist Leiphen : H...", "Archeologist Leiphen#illtur03", bc_self;
		specialeffect EF_CLOAKING, AREA, "Archeologist Leiphen#illtur03";
		sleep2 1000;
		npctalk "Where are they?", "Rancorous Ghost#illtur02", bc_self;
		npctalk "They just vanished.", "Rancorous Ghost#illtur04", bc_self;
		npctalk "They are gone.", "Rancorous Ghost#illtur06", bc_self;
		npctalk "How could it be?", "Rancorous Ghost#illtur01", bc_self;
		npctalk "Who did it?", "Rancorous Ghost#illtur05", bc_self;
		sleep2 1000;
		npctalk "Disappeared!", "Rancorous Ghost#illtur03", bc_self;
		npctalk "Gone. Completely gone!", "Rancorous Ghost#illtur07", bc_self;
		npctalk "I saw living things?", "Rancorous Ghost#illtur05", bc_self;
		npctalk "I will find them!", "Rancorous Ghost#illtur04", bc_self;
		npctalk "Should have killed!", "Rancorous Ghost#illtur06", bc_self;
		mes "[Girl]";
		mes "Now I can't see both of you... But don't go. I'm speaking in a quiet voice.";
		next;
		npctalk "Girl : ......Are you here?", "Girl#illtur02", bc_self;
		mes "[Girl]";
		mes "You are here, right?";
		mes "I'm saying this once, so listen carefully.";
		next;
		mes "[Girl]";
		mes "You won't be caught if you bite on that and hold your breath.";
		mes "Just get out of here, quickly. Go back to where we met.";
		next;
		mes "[Girl]";
		mes "The place where you met me for the first time... Remember? I'll be waiting.";
		next;
		npctalk "Gone. The living people.", "Rancorous Ghost#illtur05", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur03";
		cloakonnpcself( "Rancorous Ghost#illtur03" );
		npctalk "No, my baby...", "Rancorous Ghost#illtur03", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur07";
		cloakonnpcself( "Rancorous Ghost#illtur07" );
		npctalk "All here are dead.", "Rancorous Ghost#illtur07", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur04";
		cloakonnpcself( "Rancorous Ghost#illtur04" );
		npctalk "My treasure...", "Rancorous Ghost#illtur04", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur05";
		cloakonnpcself( "Rancorous Ghost#illtur05" );
		npctalk "Let's go back.", "Girl#illtur02", bc_self;
		sleep2 1000;
		cloakonnpcself( "Girl#illtur02" );
		npctalk "I'm hungry... Hungry.", "Rancorous Ghost#illtur02", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur02";
		cloakonnpcself( "Rancorous Ghost#illtur02" );
		cloakoffnpcself( "Fragile Woman#illtur" );
		npctalk "As always.", "Rancorous Ghost#illtur01", bc_self;
		sleep2 1000;
		specialeffect EF_DANCE1, AREA, "Rancorous Ghost#illtur01";
		cloakonnpcself( "Rancorous Ghost#illtur01" );
		npctalk "It's all dead...", "Rancorous Ghost#illtur06", bc_self;
		sleep2 1000;
		cloakonnpcself( "Rancorous Ghost#illtur06" );
		sleep2 3000;
		unittalk .@account_id, "" + .@player_name$ + " : We don't have a choice, just believe her. Let's go upward!", bc_self;
		mes "[Archeologist Leiphen]";
		mes "Let's gooo!";
		next;
		mes " - ^424242Archeologist Leiphen held his breath and nodded.^000000 - ";
		ill_turtle = 8;
		erasequest 16103;	// The Secret of Strangers
		setquest 16104;	// A long-forgotten story
		close2;
		cloakonnpcself( "Archeologist Leiphen#illtur03" );
		end;
	}
	if (ill_turtle > 10) {
		switch( checkquest(16105,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Fragile Woman]";
			mes "I'm hungry... Hungry. I'm going to die.";
			next;
			mes "[Fragile Woman]";
			mes "I can eat anything in front of me. From head to toe...";
			next;
			mes " - ^424242I should be closer. After dawn, maybe calmer.";
			close2;
			npctalk "I'm hungry. Please help me. I'm hungry.", "", bc_self;
			end;
		case 2:
			erasequest 16105;	// A short break, and a promise
			break;
		}
		switch( checkquest(16113,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Fragile Woman]";
			mes "Meat... Easily digestible meat. Hungry. Hungry. Too good. Meat...";
			mes "I'm hungry. Want more. Yummy. Too tasty.";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : Looking at the happiness she gets with " + getitemname(7564) + ".... I feel sorry.", bc_self;
			mes " - ^424242Still... satisfied. Let's come back after dawn.^000000 -";
			close;
		case 2:
			erasequest 16113;	// Endless Hunger - Cooldown
			break;
		}

		.@quest_16111 = checkquest(16111,HUNTING);
		.@quest_16112 = checkquest(16112,HUNTING);
		if (.@quest_16111 == -1 || .@quest_16112 == -1)
			.@state = -1;
		else if (.@quest_16111 == 2 && .@quest_16112 == 2 && countitem(7564) > 9)
			.@state = 2;

		switch( .@state ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Fragile Woman]";
			mes "Please hunt turtles. ^0000CD" + getmonsterinfo("ILL_PERMETER", MOB_NAME) + ", " + getmonsterinfo("ILL_SOLIDER", MOB_NAME) + ", " + getmonsterinfo("ILL_FREEZER", MOB_NAME) + ", " + getmonsterinfo("ILL_HEATER", MOB_NAME) + ". 10 monsters each.^000000";
			next;
			npctalk "I'm going to die. Die. Die.", "", bc_self;
			mes "[Fragile Woman]";
			mes "Give me. ^0000CDThe " + getitemname(7564) + ". 10 pieces.^000000";
			mes "It's ok. I need " + getitemname(7564) + ", or I will just die. Starving and suffering.";
			close;
		case 2:
			if (checkweight(1201,1) == 0) {
				mes "[Fragile Woman]";
				mes "What are you doing with such a heavy bag? Clear it out some.";
				close;
			}
			setpcblock PCBLOCK_NPC, true;
			npctalk "I'm hungry. Please help me. I'm hungry.", "", bc_self;
			sleep2 500;
			setpcblock PCBLOCK_NPC, false;
			unittalk .@account_id, "" + .@player_name$ + " : I came back. I finished the hunting.", bc_self;

			mes "[Fragile Woman]";
			mes "Ah..ah.. The nice smell of meat.";
			mes "It smells delicious. It looks so delicious. Please give it to me. Hungry. Hurry.";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : ...It smells rotten...", bc_self;
			mes "[Fragile Woman]";
			mes "Delicious. It's so delicious. Happy. It's really good.";
			next;
			npctalk "Woman : chomp chomp, munch....", "", bc_self;
			mes " - ^424242......she is holding it with her bare hands and eating..^000000 -";
			next;
			mes "[Fragile Woman]";
			mes "Ahah, I'm full. I'm not die now. I'm full.";
			mes "Here, I give you this. Can't eat though..";
			next;
			npctalk "I'm going to die. Die. Die.", "", bc_self;
			sleep2 500;
			unittalk .@account_id, "" + .@player_name$ + " : ... " + getitemname(25271) + "?", bc_self;
			mes "[Fragile Woman]";
			mes "I ate everything. Sorry. That's the only thing I can give you.";
			delitem 7564,10;	// Rotten_Meat
			erasequest 16111;	// Endless Hunger 1
			erasequest 16112;	// Endless Hunger 2
			setquest 16113;	// Endless Hunger - Cooldown
			getitem 25271,1;	// IllusionStone
			getexp 1200000,1000000;
			close;
		}
		mes "[Fragile Woman]";
		mes "I'm hungry. Help me. Please. Hungry.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : How.. can I help you?", bc_self;
		mes "[Fragile Woman]";
		mes "...Help me? Really? You won't let me die?";
		next;
		mes "[Fragile Woman]";
		mes "Then please hunt turtles. ^0000CD" + getmonsterinfo("ILL_PERMETER", MOB_NAME) + ", " + getmonsterinfo("ILL_SOLIDER", MOB_NAME) + ", " + getmonsterinfo("ILL_FREEZER", MOB_NAME) + ", " + getmonsterinfo("ILL_HEATER", MOB_NAME) + ". 10 monsters each.^000000";
		mes "Please take the meat. " + getitemname(7564) + ". 10pieces.";
		next;
		npctalk "I'm hungry. Please help me. I'm hungry.", "", bc_self;
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : It's all rotten meat.", bc_self;
		mes "[Fragile Woman]";
		mes "It's ok. Or I will die. Starving...";
		mes "Take the meat. ^0000CDThe " + getitemname(7564) + ". 10 pieces.^000000";
		next;
		mes " - ^424242Archeologist Leiphen couldn't eat... But according to Narin, she will be happy. I can only get the " + getitemname(7564) + " in here.^000000 -";
		next;
		npctalk "I'm going to die. Die. Die.", "", bc_self;
		if (select( "I will take it.", "I can't help you now." ) == 2) {
			mes "[Fragile Woman]";
			mes "I'm going to die. Starve to death.";
			next;
			mes "[Fragile Woman]";
			mes "^FF0000I can eat anything. Really anything. I can eat.. chomp chomp.^000000";
			close;
		}
		mes "[Fragile Woman]";
		mes "Thank you. Meat, I will die if I can't eat.";
		mes "I can now live some more.";
		unittalk .@account_id, "" + .@player_name$ + " : ......", bc_self;
		setquest 16111;	// Endless Hunger 1
		setquest 16112;	// Endless Hunger 2
		close;
	}
	mes "[Fragile Woman]";
	mes "Hungry. I'm so hungry I can't move..";
	mes "Please... please have mercy. I've been starving for too long...";
	if (!.talk)
		donpcevent "Fragile Woman#illtur::OnTalk";
	close;

OnTalk:
	.talk = 1;
	switch( rand(2) ) {
	case 0:
		npctalk "I'm hungry. Please help me. I'm hungry.";
		sleep 3000;
		npctalk "I can eat anthing now. Please give me something.";
		break;
	case 1:
		npctalk "I will starve to death. If I don't eat something, I will die.";
		sleep 3000;
		npctalk "I'm hungry. Please help me. Please...";
		break;
	}
	.talk = 0;
	end;

OnInit:
	// cloakonnpc();
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 4" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 7" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16111,HUNTING) == 2 && checkquest(16112,HUNTING) == 2 && countitem(7564) > 9" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16113,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle > 10 && checkquest(16105,PLAYTIME) == -1 && checkquest(16113,PLAYTIME) == -1 && isbegin_quest(16111) == 0" );
	end;
}

tur_d04_i,100,112,3	duplicate(dummy_cloaked_npc)	Girl#illtur02	4_F_NARIN
tur_d04_i,101,110,3	duplicate(dummy_cloaked_npc)	Archeologist Leiphen#illtur03	2_M_ALCHE
tur_d04_i,96,112,5	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur02	4_F_NFDEADMGCIAN
tur_d04_i,94,108,7	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur03	4_M_NFDEADSWDMAN
tur_d04_i,91,111,5	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur04	4_F_NFDEADMGCIAN
tur_d04_i,97,104,7	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur05	4_F_NFDEADMGCIAN
tur_d04_i,107,109,3	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur06	4_F_NFDEADMGCIAN
tur_d04_i,104,112,3	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur07	4_M_NFDEADSWDMAN
tur_d04_i,102,102,1	duplicate(dummy_cloaked_npc)	Rancorous Ghost#illtur01	4_M_NFDEADSWDMAN


tur_d04_i,26,167,0	script	#illtur01	HIDDEN_WARP_NPC,15,15,{
	end;
OnTouch:
	if (ill_turtle == 5 || ill_turtle == 6 || ill_turtle > 10)
		cloakoffnpcself( "Archeologist Leiphen#illtur02" );
	end;
}

tur_d04_i,26,167,5	script	Archeologist Leiphen#illtur02	2_M_ALCHE,{
	.@account_id = getcharid(3);
	.@player_name$ = strcharinfo(0);

	if (ill_turtle == 5) {
		unittalk .@account_id, "" + .@player_name$ + " : Dr. Leiphen! You are Archeologist Leiphen, right?", bc_self;
		mes " - ^424242The guy...? I finally found him.^000000 -";
		next;
		emotion ET_SURPRISE, .@account_id;
		mes "[Archeologist Leiphen]";
		mes "Oh my god... Human, a human? A real human?";
		mes "Oh thank God! Thank you. I thought I was going to die here!";
		npctalk "Archeologist Leiphen : How did you know it was me?", "", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : Aylvar sent me to look for you. I'm adventurer " + .@player_name$ + ".", bc_self;
		next;
		mes "[Archeologist Leiphen]";
		mes "huu... without Aylvar and " + .@player_name$ + " I would have died.";
		mes "^FF0000I couldn't sleep^000000 and eat for several days. I was wandering around.";
		next;
		sleep2 1000;
		emotion ET_QUESTION, .@account_id;
		unittalk .@account_id, "" + .@player_name$ + " : I heard you were missing for half a day...", bc_self;
		mes " - ^424242Several days? It's weird.^000000 -";
		next;
		npctalk "Archeologist Leiphen : This Turtle Island is, not the Turtle Island we know.", "", bc_self;
		mes "[Archeologist Leiphen]";
		mes "Anyway, have you heard from Aylvar? I was hesitant when I heard.";
		mes "...Aylvar was right about this place.";
		next;
		mes "[Archeologist Leiphen]";
		mes "There are a lot of things I'd like to research, but it's better to go back for now.";
		mes "I'm exhausted and don't have some tools to make proper reasoning. It's better to prepare and come back.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Come back here?", bc_self;
		mes "[Archeologist Leiphen]";
		mes "Of course I have to come back. It's a place where I can discover all new facts about the history of Turtle Island.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : ...You are an implacable scholar after all.", bc_self;
		emotion ET_HNG;
		mes "[Archeologist Leiphen]";
		mes "I'll take that as a compliment.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Well, then you are going back for now? Let me guide you out...", bc_self;
		sleep2 1000;
		npctalk "Archeologist Leiphen : Stomach growling...", "", bc_self;
		emotion ET_SWEAT;
		mes "[Archeologist Leiphen]";
		mes "hum...";
		mes "I'm sorry but I'm hungry... I can't move right now.";
		mes "If you are okay, can you hunt some monsters around?";
		next;
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : You want me to hunt?", bc_self;
		sleep2 1000;
		npctalk "Archeologist Leiphen : After a long research expedition, I was able to have a few meals at the survey site..", "", bc_self;
		mes "[Archeologist Leiphen]";
		mes "The essence is a turtle, so I can eat but I couldn't hunt alone, so I starved all this time....";
		mes "The monsters here are much stronger than the monsters on the Turtle Island we know. Please?";
		next;
		if (select( "What kind of monster do you want?", "I think it's better to just go." ) == 1) {
			mes "[Archeologist Leiphen]";
			mes "...I'm sorry, can't move.";
			mes "Can you carry me out?";
			unittalk .@account_id, "" + .@player_name$ + " : ....How many monsters do you need me to hunt?", bc_self;
		}
		else {
			mes "[Archeologist Leiphen]";
			mes "Well, if the monster hunting is too cumbersome... you can carry me out..";
			unittalk .@account_id, "" + .@player_name$ + " : I will hunt the monster.", bc_self;
		}
		emotion ET_FRET, .@account_id;
		next;
		mes "[Archeologist Leiphen]";
		mes "Thank you for accepting. Well, I think it's better to think of these monsters as different ones from Turtle Island.";
		next;
		mes "[Archeologist Leiphen]";
		mes "^0000CD" + getmonsterinfo("ILL_PERMETER", MOB_NAME) + ", " + getmonsterinfo("ILL_SOLIDER", MOB_NAME) + ", " + getmonsterinfo("ILL_FREEZER", MOB_NAME) + ", " + getmonsterinfo("ILL_HEATER", MOB_NAME) + ". ^0000CD10 monsters each.^000000 Please.";
		mes "And ^0000CDthe meat^000000, ^0000CD10 pieces^000000 please.";
		next;
		mes "[Archeologist Leiphen]";
		mes "In the meantime, I will make a fire.";
		mes "Phew... I'm struggling all of a sudden. I'm an archaeologist, not a hero of an adventure story.";
		ill_turtle = 6;
		erasequest 16100;	// Stranger on Turtle Island 4
		setquest 16101;	// Emergency food procurement 1
		setquest 16102;	// Emergency food procurement 2
		close;
	}
	if (ill_turtle == 6) {
		if (checkquest(16101,HUNTING) != 2 || checkquest(16102,HUNTING) != 2 || countitem(7564) < 10) {
			npctalk "Archeologist Leiphen : Oh, you came back. I was waiting.", "", bc_self;
			unittalk .@account_id, "" + .@player_name$ + " : ...It's too bad. Leiphen, the flesh of the hunted monster is all rotten..", bc_self;
			mes "[Archeologist Leiphen]";
			mes "Oops... The fire didn't go well. I can't burn books or tools.";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : No matter how much I hunt all I got is rotten meat.", bc_self;
			mes "[Archeologist Leiphen]";
			mes "No way... All of it?";
			mes "^0000CD" + getmonsterinfo("ILL_PERMETER", MOB_NAME) + ", " + getmonsterinfo("ILL_SOLIDER", MOB_NAME) + ", " + getmonsterinfo("ILL_FREEZER", MOB_NAME) + ", " + getmonsterinfo("ILL_HEATER", MOB_NAME) + ", ^000000ALL?";
			next;
			mes "[Archeologist Leiphen]";
			mes "...Well, let me take ^0000CDthe " + getitemname(7564) + " ^00000010 pieces, ^0000CDlet me try first^000000 please.";
			mes "I can't move without chewing and swallowing something...";
			npctalk "Archeologist Leiphen : Or you can carry me out...", "", bc_self;
			sleep2 1500;
			unittalk .@account_id, "" + .@player_name$ + " : Let me go hunt more.", bc_self;
			close;
		}
		npctalk "Archeologist Leiphen : Oh, you came back, " + .@player_name$ + ".", "", bc_self;
		mes "[Archeologist Leiphen]";
		mes "Too bad. There was nothing to burn... So I can't make a fire.";
		next;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : I hunted the monsters by the type but all I got was rotten. I brought only " + getitemname(7564) + ".", bc_self;
		mes "[Archeologist Leiphen]";
		mes "That's really weird. You hunt living monsters, but somehow it only gives rotten meat?";
		mes "I can't cook the rotten meat, but I can try to eat!";
		sleep2 1500;
		npctalk "Archeologist Leiphen : Chewing on... Yuck... ??!", "", bc_self;
		sleep2 2000;
		unittalk .@account_id, "" + .@player_name$ + " : Oops, are you ok?", bc_self;
		next;
		emotion ET_CRY;
		mes "[Archeologist Leiphen]";
		mes "Ugh... I can't eat. Sorry... You tried for nothing...";
		next;
		mes "[Archeologist Leiphen]";
		mes "There is no one around here except me and you, right? I've been around here for days ^FF0000but I haven't seen anyone^000000.";
		mes "If there are others, I can ask for their help.";
		next;
		unittalk .@account_id, "" + .@player_name$ + " : Umm, I saw some people here.", bc_self;
		sleep2 500;
		emotion ET_HUK;
		npctalk "Archeologist Leiphen : Really? Some people?", "", bc_self;
		mes "[Archeologist Leiphen]";
		mes "Did you see people? Oh, you should have told me earlier. Where did you see them? Let's go and talk now!";
		mes "I want to ask them something!";
		next;
		sleep2 500;
		unittalk .@account_id, "" + .@player_name$ + " : You said you want me to carry you out...?", bc_self;
		sleep2 1000;
		unittalk .@account_id, "" + .@player_name$ + " : But, there are some weird people. I'm not sure we can talk...", bc_self;
		mes "[Archeologist Leiphen]";
		mes "I'm ok now! Let's go!";
		next;
		mes "[Archeologist Leiphen]";
		mes "Even if we can't talk, I can still figure something out by looking at people's lifestyle.";
		mes "Okay, let's go! Please show me the way! To the nearest place!";
		next;
		emotion ET_SCRATCH, .@account_id;
		mes " - ^424242I didn't mean that about the talking part, but let's go anyway.";
		mes "To the nearest place... ^FF0000Let's go to the hungry ^424242woman.^000000 -";
		delitem 7564,10;	// Rotten_Meat
		ill_turtle = 7;
		erasequest 16101;	// Emergency food procurement 1
		erasequest 16102;	// Emergency food procurement 2
		setquest 16103;	// The Secret of Strangers
		close;
	}
	if (ill_turtle == 7) {
		npctalk "Archeologist Leiphen : You said the nearest place is somewhere here? I'm all good. Show me the way!", "", bc_self;
		end;
	}
	if (ill_turtle > 10) {
		switch( isbegin_quest(16106) ) {
		case 0:
			npctalk "Archeologist Leiphen : If " + .@player_name$ + " can sooth the entangled spirits, I'd like to talk with them someday. About this place...", "", bc_self;
			end;
		case 1:
			npctalk "Archeologist Leiphen : Hello, " + .@player_name$ + ".", "", bc_self;
			mes "[Archeologist Leiphen]";
			mes "You are here again today.";
			next;
			unittalk .@account_id, "" + .@player_name$ + " : You are always here.", bc_self;
			mes "[Archeologist Leiphen]";
			mes "As I told you, I'm not going to leave until I found the secret of this place.";
			mes "Are you here to go to Narin?";
			next;
			npctalk "Archeologist Leiphen : Well, eating and sleeping were solved in Alberta. I got a decent accommodation.", "", bc_self;
			sleep2 1000;
			unittalk .@account_id, "" + .@player_name$ + " : Don't you have a class?", bc_self;
			mes "[Archeologist Leiphen]";
			mes "Uh, I didn't tell you. I'm taking a sabbatical year.";
			next;
			emotion ET_SWEAT, .@account_id;
			emotion ET_DELIGHT, .@account_id;
			unittalk .@account_id, "" + .@player_name$ + " : Okay... Let's go together?", bc_self;
			mes "[Archeologist Leiphen]";
			mes "Let's go!";
			completequest 16106;	// A memory that should not be forgotten 1
			setquest 16107;	// A memory that should not be forgotten 2
			close;
		case 2:
			npctalk "Archeologist Leiphen : Are you going to the Turtle Island to meet Narin? Let's hurry!", "", bc_self;
			end;
		}
		end;
	}
	end;

OnInit:
	cloakonnpc();

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 5" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_turtle == 6 && checkquest(16101,HUNTING) == 2 && checkquest(16102,HUNTING) == 2 && countitem(7564) > 9" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(16106) == 1" );
	end;
}


// Others npcs
tur_d03_i,147,170,7	script	#illturg11	CLEAR_NPC,{
	mes " - ^424242I think I saw something.^000000 -";
	close;
}
tur_d03_i,137,170,0	script	#illturgg11	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch:
	.@num = atoi( replacestr( strnpcinfo(2), "illturgg", "" ) );
	if (.talk[.@num])
		end;
	.talk[.@num] = 1;
	switch(.@num) {
	case 11:
		setnpcdisplay( "#illturg11", 4_M_NFDEADSWDMAN );
		npctalk "Where am I? Where is everybody?", "#illturg11";
		sleep 1000;
		npctalk "I'm thirsty... Thirsty.", "#illturg11";
		sleep 1000;
		setnpcdisplay( "#illturg11", CLEAR_NPC );
		break;
	case 12:
		setnpcdisplay( "#illturg12", 4_M_NFDEADSWDMAN );
		npctalk "Liar, liar.", "#illturg12";
		sleep 1000;
		npctalk "You said you'd come back?", "#illturg12";
		sleep 1000;
		setnpcdisplay( "#illturg12", CLEAR_NPC );
		break;
	case 13:
		setnpcdisplay( "#illturg13", 4_F_NFDEADMGCIAN );
		npctalk "Ahha, Ahahaha, haha...", "#illturg13";
		sleep 1000;
		npctalk "Ahha... ha... boohoo...", "#illturg13";
		sleep 1000;
		setnpcdisplay( "#illturg13", CLEAR_NPC );
		break;
	case 21:
		setnpcdisplay( "#illturg21", 4_F_NFDEADMGCIAN );
		npctalk "Where am I? Where is my boss??", "#illturg21";
		sleep 1000;
		npctalk "Who is there? Who is there?", "#illturg21";
		sleep 1000;
		setnpcdisplay( "#illturg21", CLEAR_NPC );
		break;
	case 22:
		setnpcdisplay( "#illturg22", 4_M_NFDEADSWDMAN );
		npctalk "Ha-ah...ah, too cold.. I want to go back...", "#illturg22";
		sleep 1000;
		npctalk "Anyone here? Anyone...?", "#illturg22";
		sleep 1000;
		setnpcdisplay( "#illturg22", CLEAR_NPC );
		break;
	case 23:
		setnpcdisplay( "#illturg23", 4_M_NFDEADSWDMAN );
		sleep2 1000;
		npctalk "Ahahahahahahahahahahahahahahahaha", "#illturg23", bc_self;
		setnpcdisplay( "#illturg23", CLEAR_NPC );
		break;
	case 24:
		setnpcdisplay( "#illturg24", 4_M_NFDEADSWDMAN );
		npctalk "Did you wait? Did you wait for me?", "#illturg24", bc_self;
		sleep2 1000;
		npctalk "It's late, it's already too late.", "#illturg24", bc_self;
		setnpcdisplay( "#illturg24", CLEAR_NPC );
		break;
	}
	sleep 4000;
	.talk[.@num] = 0;
	end;
}

tur_d03_i,142,229,1	script	#illturg12	CLEAR_NPC,{
	mes " - ^424242It seems to be getting a little cold.^000000 -";
	close;
}
tur_d03_i,146,223,0	duplicate(#illturgg11)	#illturgg12	HIDDEN_WARP_NPC,5,5

tur_d03_i,214,105,7	script	#illturg13	CLEAR_NPC,{
	mes " - ^424242I feel strange...^000000 -";
	close;
}
tur_d03_i,207,104,0	duplicate(#illturgg11)	#illturgg13	HIDDEN_WARP_NPC,5,5

tur_d04_i,99,153,7	script	#illturg21	CLEAR_NPC,{
	mes " - ^424242...?^000000 -";
	close;
}
tur_d04_i,99,160,0	duplicate(#illturgg11)	#illturgg21	HIDDEN_WARP_NPC,3,3

tur_d04_i,37,137,7	script	#illturg22	CLEAR_NPC,{
	mes " - ^424242I feel weird, but nothing is here...^000000 -";
	close;
}
tur_d04_i,45,137,0	duplicate(#illturgg11)	#illturgg22	HIDDEN_WARP_NPC,3,3

tur_d04_i,76,35,7	script	#illturg23	CLEAR_NPC,{
	mes " - ^424242I'm in a bad mood...^000000 -";
	close;
}
tur_d04_i,69,31,0	duplicate(#illturgg11)	#illturgg23	HIDDEN_WARP_NPC,3,3

tur_d04_i,135,133,1	script	#illturg24	CLEAR_NPC,{
	mes " - ^424242I heard something.^000000 -";
	close;
}
tur_d04_i,137,126,0	duplicate(#illturgg11)	#illturgg24	HIDDEN_WARP_NPC,3,3



//============================================================
//= Illusion of Luanda
//============================================================
// Warps
beach_dun2,248,254,4	script	#IL_Luanda	4_ENERGY_BLUE,{
	mes "This is a totem that glows softly in blue.";
	next;
	if (select( "Touch it", "Leave it" ) == 2)
		end;
	if (BaseLevel < 160) {
		mes "- You cannot enter the area because your level is too low.";
		close;
	}
	warp "com_d02_i",249,243;
	end;
}

com_d02_i,254,243,0	warp2	IL_Luanda#Luanda	1,1,beach_dun2,249,243


// Reward npc
com_d02_i,241,255,4	script	Defense Manager Luanda#Lu	4_M_THAIONGBAK,{
	if (BaseLevel < 160)	// shouldn't happen
		end;
	if (checkweight(1201,3) == 0) {
		mes "- You cannot proceed because you have too many items. -";
		close;
	}
	if (ill_luanda == 0) {
		emotion ET_QUESTION;
		mes "[Luanda]";
		mes "Who are you?";
		next;
		mes "[Luanda]";
		mes "Ah! Ah! Ah!";
		mes "I've heard that they hire adventurers because they don't have enough hands to defend the village. I guess that's you?";
		next;
		mes "[Luanda]";
		mes "By the way, haven't I seen you somewhere? Your face looks strangely familiar.";
		next;
		mes "[Luanda]";
		mes "Oops, I'm not in a position to compare similar faces... We're twins. Ha ha ha";
		next;
		mes "[Luanda]";
		mes "Should I say hello? Nice to meet you. I'm Luanda, the defense manager of this cave.";
		next;
		mes "[Luanda]";
		mes "For simple quests, we have prepared a request board, so you can find them and report them to me.";
		next;
		mes "[Luanda]";
		mes "The quest itself doesn't have to be difficult, as you just have to go around the cave and deal with the monsters or bring the byproducts of the monsters.";
		next;
		mes "[Luanda]";
		mes "Since you've been hired by the village, I'd like you to work hard and lighten the burden a bit. It's really hard these days. Please.";
		next;
		ill_luanda = 1;
		emotion ET_KIK;
		mes "[Luanda]";
		mes "Then have a good time. Adventurer.";
		close;
	}
	if (ill_luanda == 2) {	// first time (walk near any shadow npc)
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about the strange shimmering you had witnessed.";
		next;
		emotion ET_SCRATCH;
		mes "[Luanda]";
		mes "A strange shimmer? As you said, it's a really strange phenomenon.";
		next;
		mes "[Luanda]";
		mes "I've lived in the village for a long time, but it seems like a phenomenon I've never heard of. I'm guessing, but I think it's just started happening recently.";
		next;
		mes "[Luanda]";
		mes "I don't live alone in the village, and if someone had seen it, it would have been rumored, but hearing it for the first time would make my guess clear.";
		next;
		mes "[Luanda]";
		mes "It could be dangerous, so if you find it, why don't you avoid it? There's no need to take a risk.";
		next;
		ill_luanda = 3;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 5) {	// MONDAY vortex 153/33
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about three young men you met and talked to.";
		next;
		emotion ET_SURPRISE;
		mes "[Luanda]";
		mes "Uh.. huh?! You saw me and young men who look like like my brothers.";
		next;
		mes "[Luanda]";
		mes "It seems like it happened a long time ago. Unlike Mao, I don't have a very good memory.";
		next;
		mes "[Luanda]";
		mes "I vaguely remember it. I did warn a stranger I met before I went hunting with my brothers.";
		next;
		mes "[Luanda]";
		mes "It's not uncommon to see strangers in town, so my memory is hazy, but I remember it.";
		next;
		mes "[Luanda]";
		mes "It's interesting. If what you're saying is true, doesn't that mean you've been talking to me in the past?";
		next;
		mes "[Luanda]";
		mes "Ah! Come to think of it, do you remember the first time we met? Didn't I say I was used to being an adventurer?";
		next;
		mes "[Luanda]";
		mes "As expected, I don't think it was a bad feeling. I really can't believe it. An adventurer who met me in the past...";
		next;
		mes "[Luanda]";
		mes "That sounds like something similar could happen in the future, right?";
		next;
		emotion ET_SORRY;
		mes "[Luanda]";
		mes "I apologize. Deep down, I felt that it was annoying for adventurers to talk to me. Now, I'll ask you first.";
		next;
		mes "[Luanda]";
		mes "If you ever go through something similar, please let me know. I'm begging you.";
		next;
		ill_luanda = 6;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 7) {// TUESDAY vortex 118/100
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told him about Karoo and Asudem.";
		next;
		emotion ET_SMILE;
		mes "[Luanda]";
		mes "Puhahaha I think you came to see the place where Hyung-nim and sister-in-law are dating.";
		next;
		emotion ET_SMILE;
		mes "[Luanda]";
		mes "Oh my gosh.. that place is where my brother and sister-in-law often went on dates.";
		next;
		mes "[Luanda]";
		mes "My brother might think it's a secret place only he knows, but it's a place everyone in the village knows.";
		next;
		mes "[Luanda]";
		mes "It's quite a popular spot among village lovers. It's quiet and a good place for a date.";
		next;
		mes "[Luanda]";
		mes "Recently, I haven't had much to laugh about because of various things, but thanks to you, I laughed out loud. I look forward to the next story.";
		next;
		ill_luanda = 8;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 9) {// WEDNESDAY vortex 193/267
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about who was painting murals in the cave.";
		next;
		mes "[Luanda]";
		mes "Have you ever met me when I was painting the mural? I don't remember, but...";
		next;
		mes "[Luanda]";
		mes "I think I can tell you why I painted the mural.";
		next;
		mes "[Luanda]";
		mes "It's not much of a secret, but each of my brothers has a mysterious ability.";
		next;
		mes "[Luanda]";
		mes "In the case of Karoo-hyung, he has the ability to see accurately even from a distance..";
		next;
		mes "[Luanda]";
		mes "Maknae Maru has an excellent memory that never forgets what she has seen and the ability to read her opponent's mind..";
		next;
		mes "[Luanda]";
		mes "I'm not always correct, but I can see into the future. Ah! I have more abilities than that.";
		next;
		mes "[Luanda]";
		mes "I can see people's good and evil energy. In the case of adventurers...";
		next;
		mes "[Luanda]";
		mes "I can feel the good energy that can't be touched. That's why I feel more bitter.";
		next;
		mes "[Luanda]";
		mes "Coming back to the original story, the reason I'm painting the mural is because one day I dreamed of a village burning down.";
		next;
		mes "[Luanda]";
		mes "Many monsters have come to town and people are crying out in pain because of it...";
		next;
		mes "[Luanda]";
		mes "After the hellish dream, I saw myself recording the day's events on a mural in a cave.";
		next;
		mes "[Luanda]";
		mes "Haha, don't worry too much. The dream hasn't happened yet.";
		next;
		mes "[Luanda]";
		mes "Do you know? If I paint the mural in advance, will the future I saw in my dream change?";
		next;
		mes "[Luanda]";
		mes "An adventurer I haven't seen in my dreams is helping us, so I'm sure we can change it.";
		next;
		ill_luanda = 10;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 11) {// THURSDAY vortex 228/91
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about Mao, who was training alone.";
		next;
		mes "[Luanda]";
		mes "Mao guy... you've been thinking about a lot of things.";
		next;
		mes "[Luanda]";
		mes "Brother Karu lives separately from his sister-in-law, and we still live together, but I don't think he cared too much about his sister.";
		next;
		mes "[Luanda]";
		mes "It's said that I lost my mind after having a painful dream, but somehow my anxiety...";
		next;
		mes "[Luanda]";
		mes "Looks like he's been infested with Mao. Maybe because of his abilities, he's often swayed by other people's emotions...";
		next;
		mes "[Luanda]";
		mes "He... training to become stronger... even if he doesn't become stronger... he's still enough...";
		next;
		emotion ET_THANKS;
		mes "[Luanda]";
		mes "Thank you. Thanks to you, I found out about Mao's troubles.";
		next;
		ill_luanda = 12;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 13) {// FRIDAY vortex 208/130
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about someone who was taking something from the cave.";
		next;
		mes "[Luanda]";
		mes "You saw that too. I think we've talked about it before. In my dream, I saw monsters coming into town.";
		next;
		mes "[Luanda]";
		mes "And in preparation for that time, the village warriors evacuated the elderly and weak to this place, and they stored supplies here and there in the cave.";
		next;
		mes "[Luanda]";
		mes "These are literally emergency items. It would be perfect if they were not used, but...";
		next;
		mes "[Luanda]";
		mes "You don't know how the world works. If you find something, just ignore it.";
		next;
		ill_luanda = 14;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 15) {// (re)MONDAY vortex 153/33
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about the story of meeting the villagers and the village chief.";
		next;
		mes "[Luanda]";
		mes "You really came to see what happened a while ago. It wasn't as much damage as you saw in your dream, but it was a lot of damage.";
		next;
		mes "[Luanda]";
		mes "When I think of that day, my heart hurts. All of a sudden, when my brothers were away...";
		next;
		mes "[Luanda]";
		mes "Still, the village chief, the best elder in the village, seems to have suffered less damage because he was calm. Thanks for the story.";
		next;
		ill_luanda = 16;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 17) {// SATURDAY vortex 42/215
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about the story of meeting the brothers who ran somewhere in a hurry.";
		next;
		mes "[Luanda]";
		mes "You must have seen the day my brothers and I came back from hunting. There was a big disaster in the village and it was the next day.";
		next;
		mes "[Luanda]";
		mes "Kuh.. If me and my brothers hadn't emptied the village... the people wouldn't have been taken by the monsters...";
		next;
		mes "[Luanda]";
		mes "If so... my sister-in-law also...";
		next;
		select( "It's not your fault." );
		mes "[Luanda]";
		mes "I know. It's not because of me and my brothers.. but.. that day.. we.. .. .. it's just a pity";
		next;
		select( "You'd better calm down first." );
		mes "[Luanda]";
		mes "You've shown me, adventurer, something I wouldn't have seen. I'm just here to tell you what I remember...";
		next;
		ill_luanda = 18;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 19) {// (re)THURSDAY vortex 228/91
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about the story of seeing Karu and Asudem.";
		next;
		mes "[Luanda]";
		mes "... ... ...";
		next;
		mes "[Luanda]";
		mes "Ka.. Karu hyungnim.. hyungnim";
		mes "That's the reason why you shut yourself up in the west cave.";
		next;
		mes "[Luanda]";
		mes "I feel resentful of myself for not being able to help with the village defense.";
		next;
		mes "[Luanda]";
		mes "Your heart... I can't even imagine your sister-in-law's... whoo... your sorrow...";
		next;
		mes "[Luanda]";
		mes "When the situation here is sorted out, I will look for my older brother. He must be alone in pain and sorrow.";
		next;
		mes "[Luanda]";
		mes "My heart hurts like this too, but if you know the youngest who struggles because of his abilities... I'll have to prepare. Thank you, adventurer.";
		next;
		ill_luanda = 20;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (ill_luanda == 21) {	// SUNDAY vortex 263/72
		mes "[Luanda]";
		mes "What's up, adventurer?";
		next;
		mes "Told Luanda about stories of unknown people.";
		next;
		mes "[Luanda]";
		mes "It sounds like a conversation between a Wootan or Megalith monster targeting the village.";
		next;
		mes "[Luanda]";
		mes "Follow a strong leader? Recently, I felt that the movements of these guys are disturbingly orderly...";
		next;
		mes "[Luanda]";
		mes "It seems that a monster has appeared to lead them.";
		next;
		mes "[Luanda]";
		mes "It's embarrassing. Even now, all we can do is block it.";
		next;
		mes "[Luanda]";
		mes "This is not the time to be sad. We need to build more defenses and take other measures.";
		next;
		mes "[Luanda]";
		mes "A strong leader is also a problem... but a power that has been handed down as a legend? This is a story I've never heard of before.";
		next;
		mes "[Luanda]";
		mes "I'm guessing this is the reason why the monsters are attacking the village, but I'll have to tell the chief and investigate.";
		next;
		emotion ET_THANKS;
		mes "[Luanda]";
		mes "The story you just told me was really helpful. Thank you, adventurer.";
		next;
		ill_luanda = 22;
		getexp 1120000,650000;
		erasequest 5847;
		mes "Reported to Luanda and gained experience.";
		close;
	}
	if (isbegin_quest(5848) == 1 && countitem(25638) > 2) {
		delitem 25638,3;	// Token_Of_Bigstone
		erasequest 5848;
		setquest 5849;
		.@amount = 1;
	}
	if (isbegin_quest(5850) == 1 && countitem(25633) > 2) {
		delitem 25633,3;	// Token_Of_Wootan
		erasequest 5850;
		setquest 5851;
		.@amount += 1;
	}
	if (checkquest(5852,HUNTING) == 2) {
		erasequest 5852;
		setquest 5853;
		.@amount += 1;
	}
	if (checkquest(5854,HUNTING) == 2) {
		erasequest 5854;
		setquest 5855;
		.@amount += 1;
	}
	if (.@amount > 0) {
		getitem 25271, .@amount;	// IllusionStone
		getexp (4300000 * .@amount), (2800000 * .@amount);
		emotion ET_THANKS;
		mes "[Luanda]";
		if (.@amount > 1)
			mes "It's a situation where even one request is regrettable, but " + .@amount + "... really.";
		else
			mes "Each and every request is precious. Thank you again and again.";
		mes "You worked hard.";
		close;
	}
	mes "[Luanda]";
	mes "What's up, adventurer?";
	next;
	switch( select( "Is there no request here?", "What is this cave?", "Why are monsters invading?" ) ) {
	case 1:
		mes "[Luanda]";
		mes "For quests that are recruiting in town, there is a separate request board.";
		next;
		mes "[Luanda]";
		mes "Ah! Watch your mind. The location is in the middle of the battlefield, so I installed it in the corner for safety reasons.";
		next;
		mes "[Luanda]";
		mes "There are cases where you cannot complete a request on the bulletin board right away, but there is no specific time limit, so don't be in a hurry.";
		close;
	case 2:
		mes "[Luanda]";
		mes "Adventurer, you are really curious about everything.";
		next;
		mes "[Luanda]";
		mes "The Luanda Caves are strategically the only way out north of town.";
		next;
		mes "[Luanda]";
		mes "That's why we're defending against monster attacks here.";
		next;
		select( "Luanda Cave? Luanda?" );
		mes "[Luanda]";
		mes "Ah! Did you notice? Yes, my name is Luanda too. The village elders say...";
		next;
		mes "[Luanda]";
		mes "The triplets are said to have been named Karu, Luanda, and Mao after the village caves.";
		next;
		mes "[Luanda]";
		mes "My neighborhood friends teased me a bit when I was young, but I don't have any complaints about the name.";
		next;
		mes "[Luanda]";
		mes "I heard they were named after the guardians of the village. I'm rather proud of them.";
		close;
	case 3:
		mes "[Luanda]";
		mes "It's very puzzling to us too. If we knew why, we'd have put everything away.";
		next;
		mes "[Luanda]";
		mes "This isn't a town with plenty of food, and I don't think there's any particular reason for monsters to target it.";
		next;
		mes "[Luanda]";
		mes "But what can we do? We're just living here, and the monsters keep coming, so we have to live while blocking them.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(5847) == 1" );
	end;
}


// Shadow npcs and main quest related
com_d02_i,1,1,1	script	com_d02_i_init_shadow_npc	-1,{
	end;
OnInit:
OnHour00:	// updated every 3h at a fixed time
OnHour03:
OnHour06:
OnHour09:
OnHour12:
OnHour15:
OnHour18:
OnHour21:
	setarray .@num[1],1,2,3,4,5,6,7;
	.@today = gettime(DT_DAYOFWEEK);
	.@today = (.@today == 0 ? 7 : .@today);	// SUNDAY - 0
	deletearray .@num[.@today],1;
	deletearray .@num[ rand(1,6) ],1;	// note: should the previous enabled vortex be taken into account?

	for ( .@i = 1; .@i < 6; ++.@i )
		disablenpc "Shimmer#Lu0" + .@num[.@i];
	end;
}

// MONDAY
com_d02_i,153,33,1	script	Shimmer#Lu01	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "It's a bizarre shimmer that you're likely to be sucked into.";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "It seems like a phenomenon that can't be ignored. I'll have to talk to Luanda, the head of defense.";
		close;
	}
	if (ill_luanda == 3) {
		cloakoffnpcself( "First Young#LuE01" );
		cloakoffnpcself( "Second Young#LuE01" );
		cloakoffnpcself( "Third Young#LuE01" );
		end;
	}
	if (ill_luanda == 4) {
		cloakoffnpcself( "Second Young#LuE01" );
		end;
	}
	if (ill_luanda == 14) {
		cloakoffnpcself( "Chief#LuE06" );
		cloakoffnpcself( "Villager#LuE061" );
		cloakoffnpcself( "Villager#LuE062" );
		cloakoffnpcself( "Villager#LuE063" );
		end;
	}
	end;
}

com_d02_i,152,40,6	script(CLOAKED)	Second Young#LuE01	4_M_THAIONGBAK,{
	if (ill_luanda == 3) {
		npctalk "Brother? Are you ready? Are you leaving soon? Time is running out.", "", bc_self;
		mes "[Second Young]";
		mes "Brother? Are you ready? Are you leaving soon? Time is running out.";
		next;
		npctalk "Yes. As the second said, we'd better start quickly. I don't feel very good.", "First Young#LuE01", bc_self;
		mes "[First Young]";
		mes "Yes. As the second said, it's better to start quickly. I don't feel very good..";
		next;
		npctalk "Hahaha, it's only one day. What's the big deal? Huh?!", "Third Young#LuE01", bc_self;
		mes "[Third Young]";
		mes "Hahaha, it's only one day. What's the big deal? Huh?!";
		next;
		npctalk "Brothers, there's someone over there. A stranger?", "Third Young#LuE01", bc_self;
		mes "[Third Young]";
		mes "Brothers, there is someone over there. A stranger?";
		next;
		npctalk "Looks like a stranger? If I remember correctly, I haven't seen that face in the neighborhood.", "Third Young#LuE01", bc_self;
		mes "[Third Young]";
		mes "Looks like a stranger? If I remember correctly, I haven't seen that face in the neighborhood.";
		next;
		npctalk "If it's the youngest's memory, that's it. It's odd to be a stranger at this age.", "First Young#LuE01", bc_self;
		mes "[First Young]";
		mes "If it's the youngest's memory, that's it. It's odd to be a stranger at this age.";
		next;
		npctalk "Brother, I don't think you're dangerous. This isn't the time. Brother, let's go first.", "", bc_self;
		mes "[Second Young]";
		mes "Brother, I don't think you're dangerous. This isn't the time. Brother, let's go first.";
		next;
		npctalk "I'll catch up soon.", "", bc_self;
		mes "[Second Young]";
		mes "I'll catch up soon.";
		next;
		npctalk "Looking at the expression on the second's face, I see that the stranger has something to say? Youngest, let's go first.", "First Young#LuE01", bc_self;
		mes "[First Young]";
		mes "Looking at the second expression, you can see that the stranger has something to say? Youngest, let's go first.";
		next;
		npctalk "Take care. Don't be late...", "First Young#LuE01", bc_self;
		mes "[First Young]";
		mes "Take care. Don't be late...";
		next;
		cloakonnpcself( "First Young#LuE01" );
		sleep2 500;
		cloakonnpcself( "Third Young#LuE01" );
		npctalk "Yes bro.", "", bc_self;
		mes "[Second Young]";
		mes "Yes, bro.";
		next;
		npctalk "Hey stranger, look at me for a second.", "", bc_self;
		mes "[Second Young]";
		mes "Hey stranger, look at me for a second.";
		ill_luanda = 4;
		close;
	}
	if (ill_luanda == 4) {
		npctalk "You? Can't you feel anything but good vibes? What the hell are you doing?", "", bc_self;
		mes "[Second Young]";
		mes "You? Can't you feel anything but good vibes? What the hell are you doing?";
		next;
		select( "What are you talking about?" );
		npctalk "I can see it. Hmm... you can't see it though.", "", bc_self;
		mes "[Second Young]";
		mes "I can see it. Hmm.. you can't see it though.";
		next;
		npctalk "I'm telling you that I feel good vibes from you. Leave this place right now.", "", bc_self;
		mes "[Second Young]";
		mes "I'm telling you because I feel good vibes from you. Leave this place right now.";
		next;
		npctalk "A lot of monsters will come to this town soon. Don't die in vain and leave this place.", "", bc_self;
		mes "[Second Young]";
		mes "A lot of monsters will come to this town soon. Don't die in vain and leave this place.";
		next;
		cloakonnpcself();
		ill_luanda = 5;
		setquest 5847;
		mes "The young man finished what he was saying and disappeared. He must have followed his brothers who went before him. What the hell is he doing?";
		next;
		mes "Should I ask Mr. Luanda about what happened?";
		close;
	}
	end;
}

com_d02_i,154,41,4	duplicate(dummy_cloaked_npc)	First Young#LuE01	4_M_THAIONGBAK
com_d02_i,156,39,4	duplicate(dummy_cloaked_npc)	Third Young#LuE01	4_M_THAIONGBAK


// TUESDAY
com_d02_i,118,100,1	script	Shimmer#Lu02	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "It's a bizarre shimmer that you're likely to be sucked into.";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "It seems like a phenomenon that can't be ignored. I'll have to talk to Luanda, the head of defense.";
		close;
	}
	if (ill_luanda == 6) {
		cloakoffnpcself( "Karu#LuE02" );
		cloakoffnpcself( "Asudem#LuE02" );
		end;
	}
	if (ill_luanda == 18) {
		cloakoffnpcself( "Karu#LuE08" );
		cloakoffnpcself( "Asudem#LuE08" );
		end;
	}
	end;
}

com_d02_i,121,95,4	script(CLOAKED)	Karu#LuE02	4_M_THAIONGBAK,{
	if (ill_luanda == 6) {
		npctalk "Karu.. How was the hunt today?", "Asudem#LuE02", bc_self;
		mes "[Asudem]";
		mes "Karu.. how was the hunt today?";
		next;
		npctalk "Hahaha Asudem... No honey. Don't you trust my skills? I caught plenty this time as usual.", "", bc_self;
		mes "[Karu]";
		mes "Hahaha Asudem... No honey. Don't you trust my skills? I caught plenty this time as usual.";
		next;
		npctalk "Phi~ braggart, Master Mao has already told me everything.", "Asudem#LuE02", bc_self;
		mes "[Asudem]";
		mes "Phi~ braggart, Master Mao has already told me everything.";
		next;
		npctalk "I heard that only Master Luanda and Master Mao were running around this time? You lay on top of a tree and just shouted...", "Asudem#LuE02", bc_self;
		mes "[Asudem]";
		mes "I heard that only Master Luanda and Master Mao were running around this time? You lay on top of a tree and just shouted...";
		next;
		npctalk "Wow... these guys are real...", "", bc_self;
		mes "[Karu]";
		mes "Wow...these guys are real...";
		next;
		npctalk "Honey? Who's there?", "Asudem#LuE02", bc_self;
		mes "[Asudem]";
		mes "Honey? Who's there?";
		next;
		npctalk "Who's coming all the way to this eerie place? Huh?! Really... It was a good date.", "", bc_self;
		mes "[Karu]";
		mes "Who's coming all the way to this eerie place? Huh?! Really... It was a good date.";
		next;
		npctalk "Honey, let's go, I think today's date is over. Hey, let's do some errands~ We'll get out of here...", "", bc_self;
		mes "[Karu]";
		mes "Honey, let's go, I think today's date is over. Hey, let's go do some errands~ We'll get out of here...";
		next;
		cloakonnpcself();
		cloakonnpcself( "Asudem#LuE02" );
		ill_luanda = 7;
		setquest 5847;
		mes "It looks like I interrupted the couple's date. I need to tell Luanda what happened.";
		close;
	}
	end;
}

com_d02_i,120,95,6	duplicate(dummy_cloaked_npc)	Asudem#LuE02	4_F_01


// WEDNESDAY
com_d02_i,193,267,1	script	Shimmer#Lu03	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "It's a bizarre shimmer that you're likely to be sucked into.";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "It seems like a phenomenon that can't be ignored. I'll have to talk to Luanda, the head of defense.";
		close;
	}
	if (ill_luanda == 8) {
		cloakoffnpcself( "Young#LuE03" );
		end;
	}
	end;
}

com_d02_i,191,271,8	script(CLOAKED)	Young#LuE03	4_M_THAIONGBAK,{
	if (ill_luanda == 8) {
		npctalk "Uhm... It's a bit of a mess... but this is a great mural for my skills.", "", bc_self;
		mes "[Young Man]";
		mes "Uhm... It's a bit of a mess... but this is a great mural for my skills.";
		next;
		npctalk "I draw what I see in my dreams, but... will the things I see really happen?", "", bc_self;
		mes "[Young Man]";
		mes "I draw what I see in my dreams, but... will the things I see really happen?";
		next;
		npctalk "It would be nice if it was just a dream...", "", bc_self;
		mes "[Young Man]";
		mes "It would be nice if it was just a dream...";
		next;
		npctalk "First, let's do what I can. Huh? You?", "", bc_self;
		mes "[Young Man]";
		mes "First, let's do what I can. Huh? You?";
		next;
		select( "Do you remember me?" );
		npctalk "Ah! You? The stranger I saw last time!! Are you still here? I'm sure I'll...", "", bc_self;
		mes "[Young Man]";
		mes "Ah! You? The stranger I saw last time!! Are you still here? I'm sure I'll...";
		next;
		cloakonnpcself();
		ill_luanda = 9;
		setquest 5847;
		mes "The young man has disappeared. Didn't you say that this young man was Mr. Luanda? I should tell Luanda what I've been through.";
		close;
	}
	end;
}


// THURSDAY
com_d02_i,228,91,1	script	Shimmer#Lu04	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "It's a bizarre shimmer that you're likely to be sucked into.";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "It seems like a phenomenon that can't be ignored. I'll have to talk to Luanda, the head of defense.";
		close;
	}
	if (ill_luanda == 10) {
		cloakoffnpcself( "Young#LuE04" );
		end;
	}
	end;
}

com_d02_i,228,95,4	script(CLOAKED)	Young#LuE04	4_M_THAIONGBAK,{
	if (ill_luanda == 10) {
		npctalk "Oh, why am I so weak? Unlike my older brothers, my abilities are not particularly useful in battle.", "", bc_self;
		mes "[Young Man]";
		mes "Oh, why am I so weak? Unlike my older brothers, my abilities are not particularly useful in battle.";
		next;
		npctalk "Huh?! You're the stranger Luanda took an interest in on his way out hunting?", "", bc_self;
		mes "[Young Man]";
		mes "Huh?! You're the stranger Luanda took an interest in on the way out hunting?";
		next;
		npctalk "Should I say aloud since I met you? My name is Mao. I'm the younger brother of Luanda, whom you met the other day.", "", bc_self;
		mes "[Young Man]";
		mes "Should I say aloud since I met you? My name is Mao. I'm the younger brother of Luanda, whom you met the other day.";
		next;
		select( "I..." );
		npctalk "Hahaha Nice to meet you. I don't know if you noticed, but my siblings are triplets.", "", bc_self;
		mes "[Young Man]";
		mes "Hahaha Nice to meet you. I don't know if you noticed, but my siblings are triplets.";
		next;
		npctalk "My brothers were abandoned in the village as babies. The villagers picked them up and raised them.", "", bc_self;
		mes "[Young Man]";
		mes "My brothers were abandoned in the village as babies. The villagers picked them up and raised them.";
		next;
		npctalk "They also named them Karu, Luanda, and Mao after the caves around town.", "", bc_self;
		mes "[Young Man]";
		mes "They also named them Karu, Luanda, and Mao after the caves around town.";
		next;
		npctalk "They said it was the name of the guardian spirits that guarded the old village.", "", bc_self;
		mes "[Young Man]";
		mes "They said it was the name of the guardian spirits that guarded the old village.";
		next;
		npctalk "Huh? Why am I telling you this?", "", bc_self;
		mes "[Young Man]";
		mes "Huh? Why am I telling you this?";
		next;
		npctalk "I think I lost my mind because the practice didn't go well.", "", bc_self;
		mes "[Young Man]";
		mes "I think I lost my mind because the practice didn't go well.";
		next;
		npctalk "I'm still training... in vain?! You can't believe someone else's...", "", bc_self;
		mes "[Young Man]";
		mes "I'm still practicing.. in vain?! You can't believe someone else's...";
		next;
		cloakonnpcself();
		ill_luanda = 11;
		setquest 5847;
		mes "Karu has disappeared. I need to tell Luanda about what happened.";
		close;
	}
	end;
}

// FRIDAY
com_d02_i,208,130,1	script	Shimmer#Lu05	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "It's a bizarre shimmer that you're likely to be sucked into.";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "It seems like a phenomenon that can't be ignored. I'll have to talk to Luanda, the head of defense.";
		close;
	}
	if (ill_luanda == 12) {
		cloakoffnpcself( "Young#LuE05" );
		end;
	}
	end;
}

com_d02_i,210,134,6	script(CLOAKED)	Young#LuE05	4_M_THAIONGBAK,{
	if (ill_luanda == 12) {
		npctalk "I think drinking water is good enough...", "", bc_self;
		mes "[Young Man]";
		mes "I think drinking water is good enough...";
		next;
		npctalk "It would be most perfect not to have to use these things...", "", bc_self;
		mes "[Young Man]";
		mes "It would be most perfect not to have to use these things..";
		next;
		npctalk "Huh?! It's you again? Don't you think we see each other quite often? The other day someone was talking...", "", bc_self;
		mes "[Young Man]";
		mes "Huh?! It's you again? Don't you think we see each other quite often? The other day someone was talking...";
		next;
		npctalk "Just disappeared... the words...", "", bc_self;
		mes "[Young Man]";
		mes "Just disappeared... the words...";
		next;
		cloakonnpcself();
		ill_luanda = 13;
		setquest 5847;
		mes "The young man has disappeared again. I need to tell Mr. Luanda.";
		close;
	}
	end;
}


// (re)MONDAY
com_d02_i,157,28,4	script(CLOAKED)	Chief#LuE06	4_M_JPNOJI2,{
	if (ill_luanda == 14) {
		npctalk "Aagh!! It's an attack. Monsters are coming from all sides.", "Villager#LuE061", bc_self;
		mes "[Chief]";
		mes "Aagh!! It's an attack. Monsters are coming from all sides.";
		next;
		npctalk "Cheap... where are the twins? They should be there...", "Villager#LuE062", bc_self;
		mes "[Chief]";
		mes "Cheap... where are the twins? They should be there...";
		next;
		npctalk "Did the twins find out and leave? Be patient.. They'll be back soon..", "", bc_self;
		mes "[Chief]";
		mes "Did the twins find out and leave? Be patient.. They'll be back soon..";
		next;
		npctalk "Chief, what about the villagers captured by the monsters? They already...", "Villager#LuE063", bc_self;
		mes "[Chief]";
		mes "Chief, what about the villagers captured by the monsters? They already...";
		next;
		npctalk "Don't talk negatively. Everyone's alive. Cancer isn't alive...", "", bc_self;
		mes "[Chief]";
		mes "Don't talk negatively. Everyone's alive. Cancer is not alive...";
		next;
		npctalk "Ha.. But Chief..", "Villager#LuE063", bc_self;
		mes "[Chief]";
		mes "Ha.. but Chief..";
		next;
		npctalk "Huh.. What should I do... As Luanda advised, we have to escape to this place...", "", bc_self;
		mes "[Chief]";
		mes "Huh.. What should I do.. As Luanda advised, we have to escape to this place...";
		next;
		npctalk "Huh? You haven't seen it? Did you get caught up in your travels? Tsk tsk, you're out of luck..", "", bc_self;
		mes "[Chief]";
		mes "Huh? You haven't seen it? Did you get caught up in your travels? Tsk tsk, you're out of luck..";
		next;
		npctalk "We're in no position to take care of anyone right now, so take care of yourself..", "", bc_self;
		mes "[Chief]";
		mes "We're in no position to take care of anyone right now, so take care of yourself..";
		next;
		cloakonnpcself();
		cloakonnpcself( "Villager#LuE061" );
		cloakonnpcself( "Villager#LuE062" );
		cloakonnpcself( "Villager#LuE063" );
		ill_luanda = 15;
		setquest 5847;
		mes "The Chief who is worried about me has disappeared. I have to tell Mr. Luanda what I've been through.";
		close;
	}
	end;
}

com_d02_i,155,29,6	duplicate(dummy_cloaked_npc)	Villager#LuE061	4_M_ALCHE_A
com_d02_i,153,28,6	duplicate(dummy_cloaked_npc)	Villager#LuE062	4_M_03
com_d02_i,154,26,6	duplicate(dummy_cloaked_npc)	Villager#LuE063	4_M_02


// SATURDAY
com_d02_i,42,215,1	script	Shimmer#Lu06	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "It's a bizarre shimmer that you're likely to be sucked into.";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "It seems like a phenomenon that can't be ignored. I'll have to talk to Luanda, the head of defense.";
		close;
	}
	if (ill_luanda == 16) {
		cloakoffnpcself( "First Young#LuE07" );
		cloakoffnpcself( "Second Young#LuE07" );
		cloakoffnpcself( "Third Young#LuE07" );
		end;
	}
	end;
}

com_d02_i,43,219,4	script(CLOAKED)	Third Young#LuE07	4_M_THAIONGBAK,{
	if (ill_luanda == 16) {
		npctalk "Brothers, it looks like the hunt went well this time.", "", bc_self;
		mes "[Third Young]";
		mes "Brothers, it looks like the hunt went well this time.";
		next;
		npctalk "Something was a bit sinister, but I think this time it will be quite profitable, youngest.", "First Young#LuE07", bc_self;
		mes "[First Young]";
		mes "Something was a bit sinister, but I think it will be quite profitable this time, youngest.";
		next;
		npctalk "Huh? Brother, over there.. I've seen him before.", "", bc_self;
		mes "[Third Young]";
		mes "Huh? Brother, over there.. I've seen him before.";
		next;
		npctalk "Yeah, I guess so? That's a face I can remember too.", "First Young#LuE07", bc_self;
		mes "[First Young]";
		mes "Yeah, I guess so? That's a face I remember too.";
		next;
		npctalk "I heard that the stern-faced second warned you, but what a fearless outsider you are.", "The First Young#LuE07", bc_self;
		mes "[First Young]";
		mes "I heard that the stern-faced second warned you, but what a fearless outsider you are.";
		next;
		npctalk "Brother.. I'm all the same..", "", bc_self;
		mes "[Third Young]";
		mes "Brother.. I'm all the same..";
		next;
		npctalk "Brother! It's a big deal. Ma.. The smell of blood comes from the village.", "Second Young#LuE07", bc_self;
		mes "[Second Young]";
		mes "Brother! It's a big deal. Ma.. The smell of blood is coming from the village.";
		next;
		npctalk "What? Smell of blood? Smell of blood from the village side? No way? It's not time to pay attention to strangers. Let's go quickly.", "First Young#LuE07", bc_self;
		mes "[First Young]";
		mes "What? Smell of blood? Smell of blood from the village side? No way? It's not time to pay attention to strangers. Let's go quickly.";
		next;
		cloakonnpcself( "First Young#LuE07" );
		cloakonnpcself( "Second Young#LuE07" );
		cloakonnpcself();
		ill_luanda = 17;
		setquest 5847;
		mes "The brothers disappeared quickly. I have to tell Luanda what happened.";
		close;
	}
	end;
}

com_d02_i,39,219,6	duplicate(dummy_cloaked_npc)	First Young#LuE07	4_M_THAIONGBAK
com_d02_i,41,220,4	duplicate(dummy_cloaked_npc)	Second Young#LuE07	4_M_THAIONGBAK


// (re)TUESDAY
com_d02_i,116,94,6	script(CLOAKED)	Karu#LuE08	4_M_THAIONGBAK,{
	if (ill_luanda == 18) {
		npctalk "Ahh! Asudem, why? Why? My... how did I find you...", "", bc_self;
		mes "[Karu]";
		mes "Aww! Asudem, why? Why? My... how did I find you...";
		next;
		npctalk "Ka.. Karu..", "Asudem#LuE08", bc_self;
		mes "[Asudem]";
		mes "Ka.. Karu..";
		next;
		npctalk "Hey, hey, hey, Asudem... honey...", "", bc_self;
		mes "[Karu]";
		mes "Hey, hey, hey, Asudem.. honey..";
		next;
		npctalk "Karu, don't be too sad.. You found me like this..", "Asudem#LuE08", bc_self;
		mes "[Asudem]";
		mes "Karu, don't be too sad.. You found me like this..";
		next;
		npctalk "I... I'm... glad...", "Asudem#LuE08", bc_self;
		mes "[Asudem]";
		mes "I... I'm... glad...";
		next;
		npctalk "This.. it's not about dying.. their curse.. on you..", "", bc_self;
		mes "[Karu]";
		mes "This.. it's not about dying.. their curse.. on you..";
		next;
		npctalk "All.. you no longer..", "", bc_self;
		mes "[Karu]";
		mes "All.. you no longer..";
		next;
		npctalk "Ah.. Karu.. My husband.. Sa..", "Asudem#LuE08", bc_self;
		mes "[Asudem]";
		mes "Ah.. Karu.. My husband.. Sa..";
		next;
		specialeffect EF_MAGICROD, AREA, "Asudem#LuE08";
		sleep2 1000;
		specialeffect EF_MAGICROD, AREA, "Asudem#LuE08";
		sleep2 1000;
		specialeffect EF_MENTALBREAK, AREA, "Asudem#LuE08";
		sleep2 1000;
		specialeffect EF_POISONSMOKE2, AREA, "Asudem#LuE08";
		cloakonnpcself( "Asudem#LuE08" );
		cloakoffnpcself( "Medusa#LuE08" );
		sleep2 1000;
		specialeffect EF_TELEPORTATION, AREA, "Medusa#LuE08";
		cloakonnpcself( "Medusa#LuE08" );
		npctalk "Asudem!!!!!!!!!!!!!!!", "", bc_self;
		mes "[karoo]";
		mes "Asudem!!!!!!!!!!!!!!!";
		next;
		cloakonnpcself();
		ill_luanda = 19;
		setquest 5847;
		mes "I witnessed a sad event. I must tell Luanda about my experience.";
		close;
	}
	end;
}

com_d02_i,117,94,4	duplicate(dummy_cloaked_npc)	Asudem#LuE08	4_F_01
com_d02_i,117,94,4	duplicate(dummy_cloaked_npc)	Medusa#LuE08	MEDUSA


// SUNDAY
com_d02_i,263,72,1	script	Shimmer#Lu07	1_SHADOW_NPC,7,7,{
	specialeffect EF_M07;
	end;
OnTouch:
	if (ill_luanda == 1) {	// first time (any 1_SHADOW_NPC trigger it)
		mes "It's a bizarre shimmer that you're likely to be sucked into.";
		next;
		ill_luanda = 2;
		setquest 5847;
		mes "It seems like a phenomenon that can't be ignored. I'll have to talk to Luanda, the head of defense.";
		close;
	}
	if (ill_luanda == 20) {
		cloakoffnpcself( "Silhouette#LuE091" );
		cloakoffnpcself( "Silhouette#LuE092" );
		end;
	}
	end;
}

com_d02_i,268,75,4	script(CLOAKED)	Silhouette#LuE091	4_GHOST_STAND,{
	if (ill_luanda == 20) {
		npctalk "We must drive out all the humans and take over the land.", "", bc_self;
		mes "[???]";
		mes "We must drive out all the humans and take over the land.";
		next;
		npctalk "Hehehe Other times, I'd say it's crazy, but if we follow a strong leader...", "Silhouette#LuE092", bc_self;
		mes "[???]";
		mes "Hehehe Other times, I'd say it's crazy, but if we follow a strong leader...";
		next;
		npctalk "That's not crazy kkkk.", "", bc_self;
		mes "[???]";
		mes "That's not crazy kkkk.";
		next;
		npctalk "Once we claim the land, the legendary power will be ours too.", "Silhouette#LuE092", bc_self;
		mes "[???]";
		mes "Once we claim the land, the legendary power will be ours too.";
		next;
		npctalk "Sniff... I can smell the humans. It's not time to run into them yet. Let's go.", "", bc_self;
		mes "[???]";
		mes "Sniff.. I can smell the humans. It's not time to run into them yet. Let's go.";
		next;
		npctalk "Hehehehe I hope that day will come soon...", "Silhouette#LuE092", bc_self;
		mes "[???]";
		mes "Hehehe I hope that day will come soon..";
		next;
		cloakonnpcself();
		cloakonnpcself( "Silhouette#LuE092" );
		ill_luanda = 21;
		setquest 5847;
		mes "What about the beings I just talked to? I need to tell Luanda about my experience.";
		close;
	}
	end;
}

com_d02_i,266,76,6	duplicate(dummy_cloaked_npc)	Silhouette#LuE092	4_GHOST_STAND


// Daily quests
com_d02_i,238,266,4	script	Request Board#Lu	4_BOARD3,{
	if (checkweight(1201,3) == 0) {
		mes "- You cannot proceed because you have too many items. -";
		close;
	}
	if (ill_luanda == 0) {
		mes "It's a bulletin board with things requested by the village written on it, but it doesn't seem to be the case now.";
		close;
	}

	.@quest_menu$[0] = callsub( S_MenuGather, 5848,5849, "Evidence of eradication of Megaliths" );
	.@quest_menu$[1] = callsub( S_MenuGather, 5850,5851, "Evidence of eradication of Wootan" );
	.@quest_menu$[2] = callsub( S_MenuHunt, 5852,5853, "Operation to eradicate Megaliths" );
	.@quest_menu$[3] = callsub( S_MenuHunt, 5854,5855, "Operation to eradicate Wootan" );

	.@playtime_5849 = checkquest(5849,PLAYTIME);
	.@playtime_5851 = checkquest(5851,PLAYTIME);
	.@playtime_5853 = checkquest(5853,PLAYTIME);
	.@playtime_5855 = checkquest(5855,PLAYTIME);

	// menu to take all quests at once
	if (.@playtime_5849 > 0 || .@playtime_5851 > 0 || .@playtime_5853 > 0 || .@playtime_5855 > 0) {	// at least one of the quests is in cooldown
		.@quest_menu$[4] = "^777777[Waiting] Receive all quests^000000";
		.@all_quests = 0;
	}
	else if (isbegin_quest(5848) > 0 || isbegin_quest(5850) > 0 || isbegin_quest(5852) > 0 || isbegin_quest(5854) > 0) {	// at least one of the quests is in progress
		.@quest_menu$[4] = "^777777[Progress] Receive all quests^000000";
		.@all_quests = 1;
	}
	else {	// can take all quests
		.@quest_menu$[4] = "[Daily] Accept all quests";
		.@all_quests = 2;
	}

	switch( select( .@quest_menu$[0], .@quest_menu$[1], .@quest_menu$[2], .@quest_menu$[3], .@quest_menu$[4] ) ) {
	case 1:
		switch( .@playtime_5849 ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "This quest can be done again tomorrow.";
			close;
		case 2:
			break;
		}
		switch( isbegin_quest(5848) ) {
		case 0:
			mes "The village is having a lot of trouble with the Megaliths. I will reward you if you bring me 3 " + getitemname(25638) + " as proof of defeating the Megaliths.";
			mes "  ";
			mes "Chief";
			next;
			if (select( "Accept request", "Do not accept" ) == 2)
				end;
			setquest 5848;
			open_quest_ui(5848);
			mes "Your request has been received. Please report to ^FF0000Defense Manager Luanda^000000.";
			close;
		case 1:
		case 2:
			// note: the amount of item is not checked
			mes "^FF0000Evidence of eradication of Megaliths^000000";
			mes "Your request is in progress.";
			mes "You can cancel. However, if you cancel, the progress made so far will be lost. Are you sure you want to cancel?";
			next;
			if (select( "Do not cancel", "Cancel" ) == 1)
				end;
			erasequest 5848;
			mes "The request has been cancelled.";
			close;
		}
		end;
	case 2:
		switch( .@playtime_5851 ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "This quest can be done again tomorrow.";
			close;
		case 2:
			break;
		}
		switch( isbegin_quest(5850) ) {
		case 0:
			mes "Wootan tribes are causing a lot of trouble in the village. I will reward you if you bring 3 " + getitemname(25633) + " as proof that you have defeated them.";
			mes "  ";
			mes "Chief";
			next;
			if (select( "Accept request", "Do not accept" ) == 2)
				end;
			setquest 5850;
			open_quest_ui(5850);
			mes "Your request has been received. Please report to ^FF0000Defense Manager Luanda^000000.";
			close;
		case 1:
		case 2:
			// note: the amount of item is not checked
			mes "^FF0000Evidence of extermination of Wootan^000000";
			mes "Your request is in progress.";
			mes "You can cancel. However, if you cancel, the progress made so far will be lost. Are you sure you want to cancel?";
			next;
			if (select( "Do not cancel", "Cancel" ) == 1)
				end;
			erasequest 5850;
			mes "The request has been cancelled.";
			close;
		}
		end;
	case 3:
		switch( .@playtime_5853 ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "This quest can be done again tomorrow.";
			close;
		case 2:
			break;
		}
		switch( checkquest(5852,HUNTING) ) {
		case -1:
			mes "We've planned to subdue the megaliths. Anyone who can catch 5 " + getmonsterinfo("ILL_TRI_JOINT",MOB_NAME) + ", " + getmonsterinfo("ILL_STALACTIC_GOLEM",MOB_NAME) + ", and " + getmonsterinfo("ILL_MEGALITH",MOB_NAME) + ", please apply.";
			mes "  ";
			mes "Chief";
			next;
			if (select( "Accept request", "Do not accept" ) == 2)
				end;
			setquest 5852;
			open_quest_ui(5852);
			mes "Your request has been received. Please report to ^FF0000Defense Manager Luanda^000000.";
			close;
		case 0:
		case 1:
			mes "^FF0000 Megalith extermination^000000";
			mes "Your request is in progress.";
			mes "You can cancel. However, if you cancel, the progress made so far will be lost. Are you sure you want to cancel?";
			next;
			if (select( "Do not cancel", "Cancel" ) == 1)
				end;
			erasequest 5852;
			mes "The request has been cancelled.";
			close;
		case 2:
			mes "You can receive the reward for this quest from Defense Manager Luanda.";
			close;
		}
		end;
	case 4:
		switch( .@playtime_5855 ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "This quest can be done again tomorrow.";
			close;
		case 2:
			break;
		}
		switch( checkquest(5854,HUNTING) ) {
		case -1:
			mes "We have planned to subdue the Wutan tribe. Anyone who can catch 5 " + getmonsterinfo("ILL_STONE_SHOOTER",MOB_NAME) + ", " + getmonsterinfo("ILL_WOOTAN_SHOOTER",MOB_NAME) + ", and " + getmonsterinfo("ILL_WOOTAN_FIGHTER",MOB_NAME) + ", please apply.";
			mes "  ";
			mes "Chief";
			next;
			if (select( "Accept request", "Do not accept" ) == 2)
				end;
			setquest 5854;
			open_quest_ui(5854);
			mes "Your request has been received. Please report to ^FF0000Defense Manager Luanda^000000.";
			close;
		case 0:
		case 1:
			mes "^FF0000Evidence of eradication of megaliths^000000";
			mes "Your request is in progress.";
			mes "You can cancel. However, if you cancel, the progress made so far will be lost. Are you sure you want to cancel?";
			next;
			if (select( "Do not cancel", "Cancel" ) == 1)
				end;
			erasequest 5854;
			mes "The request has been cancelled.";
			close;
		case 2:
			mes "You can receive the reward for this quest from Defense Manager Luanda.";
			close;
		}
		end;
	case 5:
		switch( .@all_quests ) {
		case 0:	// at least one of the quests is in cooldown
			mes "There is a quest whose cooldown has not passed.";
			close;
		case 1:	// at least one of the quests is in progress
			mes "Some quests are in progress.";
			close;
		case 2:	// can take all quests
			mes "Are you sure you want to receive all quests on the Quest Board?";
			next;
			if (select( "Accept", "Do not accept" ) == 2)
				end;
			setquest 5848;
			setquest 5850;
			setquest 5852;
			setquest 5854;
			mes "All quests on the quest board have been received.";
			close;
		}
		end;
	}
	end;

S_MenuGather:
	.@string$ = getarg(2);

	switch( checkquest(getarg(1),PLAYTIME) ) {
	case -1:
		switch( isbegin_quest(getarg(0)) ) {
		case 0:
			.@menu$ = "[Daily] " + .@string$;
			break;
		case 1:
		case 2:
			// note: the amount of item is not checked
			.@menu$ = "^777777[Progress] " + .@string$ + "^000000";
			break;
		}
		break;
	case 0:
	case 1:
		.@menu$ = "^777777[Waiting]" + .@string$ + "^000000";
		break;
	case 2:
		erasequest getarg(1);
		.@menu$ = "[Daily]" + .@string$;
		break;
	}
	return .@menu$;

S_MenuHunt:
	.@string$ = getarg(2);

	switch( checkquest(getarg(1),PLAYTIME) ) {
	case -1:
		switch( checkquest(getarg(0),HUNTING) ) {
		case -1:
			.@menu$ = "[Daily] " + .@string$;
			break;
		case 0:
		case 1:
			.@menu$ = "^777777[Progress] " + .@string$ + "^000000";
			break;
		case 2:
			.@menu$ = "^777777[Reward] " + .@string$ + "^000000";
			break;
		}
		break;
	case 0:
	case 1:
		.@menu$ = "^777777[Waiting] " + .@string$ + "^000000";
		break;
	case 2:
		erasequest getarg(1);
		.@menu$ = "[Daily] " + .@string$;
		break;
	}
	return .@menu$;
}


//============================================================
//= Illusion of Underwater
//============================================================
// prt_in,157,66,4	script	Jerrymon#jerry	1_M_01,{
prt_elib,57,18,4	script	Jerrymon#jerry	1_M_01,{
	if (ill_underwater == 0) {
		mes "[Jerrymon]";
		mes "Um... Uhm...";
		next;
		mes "[Jerrymon]";
		mes "Oh, what a surprise!!";
		next;
		mes "[Jerrymon]";
		mes "What's up? I'm busy right now, so I'll talk to you later.";
		close;
	}
	if (ill_underwater == 1) {
		mes "[Jerrymon]";
		mes "Um... Uhm...";
		next;
		mes "[Jerrymon]";
		mes "Oh, what a surprise!!";
		next;
		mes "[Jerrymon]";
		mes "What's up? I'm a bit busy right now...";
		next;
		mes "[Jerrymon]";
		mes "Ah, you're the one introduced by Raket. I've been waiting for you.";
		mes "Can you show me your fishing rod?";
		next;
		mes "- Jerrymon began to examine the rod closely. -";
		next;
		mes ".";
		next;
		mes "..";
		next;
		mes "...";
		next;
		mes "....";
		next;
		mes ".....";
		next;
		mes "[Jerrymon]";
		mes "Yes, that's right... this substance is just that... to discover it again like this...";
		next;
		select( "What material are you talking about?" );
		mes "[Jerrymon]";
		mes "Adventurer, do you know where the deepest part of the sea is?";
		next;
		select( "Well...??" );
		mes "[Jerrymon]";
		mes "It is a place called the ^4d4dffTrench^000000. To put it simply, you can think of it as a deep cliff in the sea.";
		next;
		mes "[Jerrymon]";
		mes "It is known that there are hundreds of different types of trenches in the world's oceans.";
		next;
		mes "[Jerrymon]";
		mes "The widest and deepest known trench is the ^4d4dffBahia Trench^000000 near Izlude.";
		next;
		mes "[Jerrymon]";
		mes "There are rare life forms at the bottom of the trench, and marine scientists like myself have shown great interest and have been exploring them.";
		next;
		mes "[Jerrymon]";
		mes "Though shallow trenches can be explored to some extent.";
		next;
		mes "[Jerrymon]";
		mes "But in the case of the Bahia Trench, scientists have calculated that scientifically, no life can exist because it is so incredibly deep.";
		next;
		mes "[Jerrymon]";
		mes "I recently found out that there is life in the Bahia Trench.";
		next;
		select( "How do you know that??" );
		mes "[Jerrymon]";
		mes "You can tell by the stone that contains my magic.";
		next;
		select( "A stone with magical power?" );
		mes "[Jerrymon]";
		mes "Yes, I'm a mage-turned-oceanographer. I learned magic for oceanography.";
		next;
		mes "[Jerrymon]";
		mes "Enchant a large boulder and make it fall to the floor where the trench exists.";
		next;
		mes "[Jerrymon]";
		mes "The magic on the dropped stone is connected to me, so by measuring the distance, I can get a little idea of how deep it is and what's going on near the stone.";
		next;
		mes "[Jerrymon]";
		mes "To tell you what I found out...";
		next;
		mes "[Jerrymon]";
		mes "The composition of normal sea water and deep sea water is almost the same. But the only difference is the deep sea of Bahia Trench.";
		next;
		mes "[Jerrymon]";
		mes "Should I say it's like water and oil? There's a section where they never mix.";
		next;
		mes "[Jerrymon]";
		mes "A strong boundary was formed where they meet each other, and it felt as if the deep seawater in that section was desperately blocking the seawater coming down from above.";
		next;
		mes "[Jerrymon]";
		mes "The water pressure is also much lower than that of normal seawater, so it is assumed that it has a favorable environment for life.";
		next;
		mes "[Jerrymon]";
		mes "We call it ^4d4dffdeep seawater^000000";
		next;
		select( "Is this gloss related to what you said?" );
		mes "[Jerrymon]";
		mes "Yes! That's right!!";
		mes "We only identified the existence of Abyssal Seawater deep in the Bahia Trench, and it was very difficult to obtain samples. This fishing rod has a lot of Abyssal Seawater on it...";
		next;
		mes "[Jerrymon]";
		mes "Could you leave this fishing rod with me? I think I can figure something out if I extract this sea water and turn it into essence.";
		next;
		mes "[Jerrymon]";
		mes "Oh, and I heard that the fishing rod was found today. Can I ask you to check if there is another floating substance in the nearby sea?";
		next;
		if (select( "Okay, I'll be back.", "I'm a bit busy right now..." ) == 2) {
			mes "[Jerrymon]";
			mes "Please come back to me when you're done!";
			close;
		}
		mes "[Jerrymon]";
		mes "Yes, thanks! I'll be waiting for you!!";
		close2;
		if (countitem(25898) > 0)
			delitem 25898,1;	// Siroods_Fish_Rod
		ill_underwater = 2;
		erasequest 3407;
		end;
	}
	if (ill_underwater == 2) {
		mes "[Jerrymon]";
		mes "I'm sorry to bother you, but please. I'll be waiting for you here.";
		close;
	}
	if (ill_underwater == 3) {
		if (countitem(25899) < 1) {
			mes "[Jerrymon]";
			mes "I'm sorry to bother you, but please. I'll be waiting for you here.";
			close;
		}
		mes "[Jerrymon]";
		mes "Ah, welcome, adventurer!";
		next;
		mes "[Jerrymon]";
		mes "The investigation is going smoothly~";
		mes "Hey, could you take a look at this?";
		next;
		mes "[Jerrymon]";
		mes "See those two little water bottles here?";
		next;
		mes "[Jerrymon]";
		mes "One side is normal seawater, and the other side is seawater mixed with seawater from the abyss buried in fishing rods. I'll try mixing these two.";
		next;
		mes " - Jerrymon poured both waters into one bottle and began to shake them together. - ";
		next;
		mes "[Jerrymon]";
		mes "Now, look. As I said before, they don't mix at all, do they?";
		next;
		mes "[Jerrymon]";
		mes "This... this!!";
		next;
		mes "[Jerrymon]";
		mes "If you shake it like crazy!!";
		next;
		mes "[Jerrymon]";
		mes "<FONT COLOR = E68F8F><FONT SIZE = 16><B>Wow!!!!!!</FONT></FONT></B>";
		next;
		mes "[Jerrymon]";
		mes "<FONT COLOR = E68F8F><FONT SIZE = 16><B>Uwachachaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa!!!!!!</FONT></FONT></B>";
		next;
		mes "[Jerrymon]";
		mes "<FONT COLOR = E68F8F><FONT SIZE = 16><B>Ahhhhhhh!!!!!!</FONT></FONT></B>";
		next;
		mes "[Jerrymon]";
		mes "Ahhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh...";
		next;
		select( "Oh, I'm going to catch someone, is it okay?" );
		mes "[Jerrymon]";
		mes "Keep... Whoa... Whoa... OK now.";
		next;
		mes "- Looking into the bottle Jerrymon is holding, I can clearly see the shape of the vortex. - ";
		next;
		mes "[Jerrymon]";
		mes "Now, do you see this whirlpool!! This is the passage that connects to the bottom of the Bahia Trench!";
		next;
		select( "??? Isn't that just a whirlpool created by shaking it?" );
		mes "[Jerrymon]";
		mes "No. This is the stone that contains my magical power. Let's look at it.";
		next;
		mes " - Jerrymon put a glowing stone into the bottle. The glowing stone was sucked into the whirlpool inside the bottle and disappeared without a trace! - ";
		next;
		select( "No, how could it be?" );
		mes "[Jerrymon]";
		mes "Did I ever tell you that the stone that contains my magic can measure the distance to me?";
		next;
		mes "[Jerrymon]";
		mes "It feels the same as the last time I threw a pebble into the Bahia Trench..";
		mes "If you follow this whirlpool, you may be able to find the owner of the fishing rod.";
		next;
		mes "[Jerrymon]";
		mes "The problem is... the amount of essence on a fishing rod can't make a whirlpool large enough for a person to fit in.";
		next;
		select( "Is this amount okay?" );
		mes "- Showed the ^4d4dff" + getitemname(25899) + "^000000 received from Gein to Jerrymon. - ";
		next;
		mes "[Jerrymon]";
		mes "Oh, just in case, I actually found it!";
		next;
		mes "[Jerrymon]";
		mes "With this amount, I think I can create a vortex of fissures that normal people can enter. You can pass it to me.";
		next;
		mes "[Jerrymon]";
		mes "The place is too small to do this much here, so let's do it in Izlude. In order to get help from your friends.";
		mes "Then see you in Izlude!!";
		close2;
		delitem 25899,1;	// E_Abyss1
		ill_underwater = 4;
		erasequest 3408;
		setquest 3409;
		end;
	}
	if (ill_underwater == 4) {
		mes "[Jerrymon]";
		mes "Then let's meet in Izlude!!";
		close;
	}
	mes "[Jerrymon]";
	mes "I'm sorry to bother you, but please. I'll be waiting for you here.";
	close;

OnInit:
	// note: no questinfo for 3407
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3408) == 1" );
	end;
}


izlude,126,53,0	script	Sirood#SRD1	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (ill_underwater > 3)
		cloakoffnpcself( "Jerrymon#jerry2" );
	if (ill_underwater > 6)
		cloakoffnpcself( "Sirood#SRD2" );
	end;
}
izlude,132,54,0	duplicate(Sirood#SRD1)	Jerrymon#jerry1	HIDDEN_WARP_NPC,4,4

izlude,126,53,4	script	Sirood#SRD2	1_M_04,{
	mes "[Sirood]";
	mes "Thank you very much, adventurer.";
	next;
	mes "[Sirood]";
	mes "I thought I'd never come back...";
	close;
}

izlude,129,49,4	script	Soup#Soup	1_M_02,{
	if (ill_underwater < 5) {
		mes "[Soup]";
		mes "Hello, my name is Soup, a friend of Sirood who is missing.";
		next;
		mes "[Soup]";
		mes "The four of us, Sirood, Raket, Gein, and I often enjoyed fishing.";
		next;
		mes "[Soup]";
		mes "That windy day... I had been feeling very guilty for not stopping Sirood from going fishing.";
		next;
		mes "[Soup]";
		mes "When I heard that Sirood's fishing pole was found, I jumped out.";
		next;
		mes "[Soup]";
		mes "You must have a clue about something?";
		close;
	}
	if (ill_underwater < 7) {
		mes "[Soup]";
		mes "I did my best.";
		next;
		mes "[Soup]";
		mes "Should Sirood come back safely?";
		close;
	}
	mes "[Soup]";
	mes "Sirood is back with us.";
	next;
	mes "[Soup]";
	mes "Thanks to you, adventurer. Thank you very much.";
	close;
}

izlude,135,51,4	script	Raket#Raket	1_F_MERCHANT_01,{
	if (ill_underwater < 5) {
		mes "[Raket]";
		mes "It's been exactly 3 months since Sirood went missing.";
		next;
		mes "[Raket]";
		mes "Sirood's fishing rod was found.";
		next;
		mes "[Raket]";
		mes "I felt that way.";
		next;
		select( "What do you think?" );
		mes "[Raket]";
		mes "Why is this only discovered now, isn't this a message from someone?";
		next;
		select( "Looking at it, it doesn't make sense." );
		mes "[Raket]";
		mes "Ha... It's just my delusion. I especially miss that child today.";
		close;
	}
	if (ill_underwater < 7) {
		mes "[Raket]";
		mes "Heh heh... It's so hard to use all your strength...";
		next;
		mes "[Raket]";
		mes "But for Sirood's sake...";
		close;
	}
	mes "[Raket]";
	mes "Thank you so much!!";
	next;
	mes "[Raket]";
	mes "Now you can fish with Sirood again.";
	next;
	mes "[Raket]";
	mes "I'm so glad...";
	close;
}

izlude,132,49,5	script	Gein#Gein	4W_M_01,{
	if (checkweight(1201,3) == 0) {
		mes "You have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (BaseLevel < 140) {
		mes "[Gein]";
		mes "Haha... why did this only get discovered now??";
		mes "It's impossible, this is...";
		next;
		mes "- I feel serious anguish from this person. Let's come back after I've become level 140. -";
		close;
	}
	if (ill_underwater == 0) {
		mes "[Gein]";
		mes "Haha...why did this only get discovered now??";
		mes "It's impossible, this is...";
		next;
		select( "Do you have any concerns?" );
		mes "[Gein]";
		mes "Oh, hello...";
		next;
		mes "- He is very fidgety with a fishing pole in his hand. It doesn't look like he's out fishing. - ";
		next;
		mes "[Gein]";
		mes "This fishing rod belongs to my friend <FONT COLOR = 4D4DFF><FONT SIZE = 16><B>Sirood</FONT></FONT></B> who went missing three months ago. I found something!!!";
		next;
		select( "Disappeared?" );
		mes "[Gein]";
		mes "Yes... Sirood is a fishing fanatic and came here to fish whenever he had a chance.";
		next;
		mes "[Gein]";
		mes "Influenced by Sirood, we also fell in love with fishing, and the four of us often had a good time.";
		next;
		mes "[Gein]";
		mes "Sirood's passion for fishing was to the point that he invited us to go fishing even in the rain and wind.";
		next;
		mes "[Gein]";
		mes "The day Sirood went missing was exactly the same rainy and windy day. I put on my raincoat and went to go fishing.";
		next;
		mes "[Gein]";
		mes "We were invited to go out together, but they all declined.";
		next;
		mes "[Gein]";
		mes "Sirood went fishing alone and we haven't seen him since...";
		next;
		mes "[Gein]";
		mes "I should have stopped you from leaving...";
		next;
		mes "- Gein started talking again after wiping away tears for a moment. -";
		next;
		mes "[Gein]";
		mes "The news of Sirood's disappearance immediately spread throughout Izlude and a large-scale search was conducted with a lot of time and manpower invested, but the search ended without finding any clues.";
		next;
		mes "[Gein]";
		mes "After that, we got together and ran everywhere to find Sirood, but there was no result, and we were about to give up.";
		next;
		mes "[Gein]";
		mes "But just now!!";
		next;
		mes "[Gein]";
		mes "After 3 months!!!";
		next;
		mes "[Gein]";
		mes "Sirood's fishing pole has risen above sea level. His item was nowhere to be found during the search!";
		next;
		select( "Now, calm down... Are you sure it's Sirood's fishing rod?" );
		mes "[Gein]";
		mes "Yes, I'm sure! It's the fishing rod I've always seen.";
		next;
		mes "[Gein]";
		mes "This fishing rod was made by Sirood himself, so it is the only one. You can see the initials on the handle here, S.R.D!!";
		next;
		select( "Oh, then why now..." );
		mes "[Gein]";
		mes "I'm so surprised and shocked right now that I don't know what to do.";
		next;
		mes "- But looking closely at the fishing rod, I feel something different. This wooden fishing rod has been submerged in water for 3 months, but it still looks the same, and I can see a bit of shiny gloss... -";
		next;
		select( "Isn't this fishing rod a bit strange over there?" );
		mes "[Gein]";
		mes "Strange, what is it?";
		next;
		mes "[Gein]";
		mes "Uh...";
		next;
		mes "[Gein]";
		mes "Uh.....??";
		next;
		mes "[Gein]";
		mes "It's been submerged in water for 3 months... but it hasn't corroded at all. It's completely fine??";
		next;
		mes "[Gein]";
		mes "Hmm... And it seems to have a subtle glow... It seems like the fishing rod is coated?";
		next;
		mes "-The person who seemed to be Gein's friend who was listening to the story opened his mouth. -";
		next;
		mes "[Raket]";
		mes "Where is it, I want to see it!! What's wrong??";
		next;
		mes "[Gein]";
		mes "This fishing rod... It was submerged in the water for 3 months, but it was found in its original form, or worse, in a state of disrepair.";
		next;
		mes "[Raket]";
		mes "Ugh...";
		next;
		mes "[Raket]";
		mes "Um...";
		next;
		mes "- Raket looked intently at his fishing pole, then answered Gein. -";
		next;
		mes "[Raket]";
		mes "I'm not sure either?";
		next;
		mes "[Gein]";
		mes "Certainly!! I don't know, but would you?";
		next;
		mes "[Raket]";
		mes "Ummm... but I know someone who might know a little about this rod.";
		next;
		mes "[Gein]";
		mes "Who??";
		next;
		select( "Who?" );
		mes "[Raket]";
		mes "His name is <FONT COLOR = 4D4DFF><FONT SIZE = 16><B>Jerrymon</FONT></FONT></B>, a marine scientist. I've met my father a few times. I know you are in the East Library of Prontera.";
		next;
		mes "[Gein]";
		mes "Ah, ah... then... hey adventurer!! I'm sorry for the first meeting, but can I ask you a favor?? We can't get out of here in Izlude...";
		next;
		mes "[Gein]";
		mes "Please go see Jerrymon and show him this fishing rod...even if it's trivial...I hope he has some information..";
		next;
		if (select( "Okay. Let's go.", "Sorry. I'm a bit busy right now..." ) == 2) {
			mes "[Gein]";
			mes "No... are you sure?";
			next;
			mes "[Gein]";
			mes "Are you turning around after hearing about this heartbreaking story and mysterious clue...";
			close;
		}
		mes "[Gein]";
		mes "Ugh... Thanks!";
		next;
		mes "[Gein]";
		mes "^4d4dffJerrymon^000000 should still be at the <NAVI>[East Library]<INFO>prontera,192,264,</INFO></NAVI> in Prontera.";
		next;
		mes "[Gein]";
		mes "Now, I'll give you the fishing rod, a keepsake from Sirood. Thank you...";
		next;
		mes "[Raket]";
		mes "What??? It's a keepsake!! You don't even know if Sirood is alive or dead!!";
		next;
		mes "[Gein]";
		mes "Uhhh... yes I made a mistake, this is the fishing rod Sirood left behind. Please take good care of it.";
		next;
		mes "[Raket]";
		mes "I'll tell Jerrymon about the contents in advance through my father!";
		next;
		mes "[Gein & Raket & Soup]";
		mes "Thank you!!!";
		close2;
		getitem 25898,1;	// Siroods_Fish_Rod
		ill_underwater = 1;
		setquest 3407;
		end;
	}
	if (ill_underwater == 1) {
		mes "[Gein]";
		mes "You can go to Prontera's <NAVI>[East Library]<INFO>prontera,192,264,</INFO></NAVI> as Raket told you.";
		next;
		mes "[Gein]";
		mes "Take care of yourself!! I hope there is even the smallest clue...";
		close;
	}
	if (ill_underwater == 2) {
		mes "[Gein]";
		mes "Ah, you're here!!!";
		next;
		mes "[Gein]";
		mes "Do you have any information about Sirood?";
		next;
		mes "- I relayed what I heard from Jerrymon. -";
		next;
		mes "[Gein]";
		mes "Ah... I see, I've never heard of a trench before.";
		next;
		mes "[Gein]";
		mes "I can't believe there's such a big and deep trench near Izlude...";
		next;
		mes "[Gein]";
		mes "Oh, by the way, is there anything else you need for coming back here?";
		next;
		select( "I was wondering if there was anything else found besides the fishing rod." );
		mes "[Gein]";
		mes "Oh right!!";
		next;
		mes "[Gein]";
		mes "It's a chunk scooped up with a landing net near where the fishing rod was found.";
		next;
		mes " - This lump is what Jerrymon said.";
		mes "^4d4dffIt must be the essence of the abyss^000000. - ";
		next;
		mes "[Gein]";
		mes "Something shiny and has the same feeling of Sirood's fishing rod, so I secured it for now.";
		mes "Could this nugget help?";
		next;
		select( "Thanks, that would be a great help." );
		mes "[Gein]";
		mes "Are you going back to Jerrymon? Please be careful.";
		close2;
		getitem 25899,1;	// E_Abyss1
		ill_underwater = 3;
		setquest 3408;
		end;
	}
	if (ill_underwater == 3) {
		mes "[Gein]";
		mes "I hope Sirood will appear in front of us intact, just as the fishing rod appeared intact...";
		next;
		mes "[Gein]";
		mes "Please let me know if you have any new information!";
		close;
	}
	if (ill_underwater < 7) {
		mes "[Gein]";
		mes "Heh...heh...Hello adventurer, heh...heh... I'm so tired I can't move...";
		close;
	}
	mes "[Gein]";
	mes "Thank you, adventurer.";
	next;
	mes "[Gein]";
	mes "To be able to meet Sirood again is like a dream.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_underwater == 0" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "ill_underwater == 2" );
	end;
}

izlude,132,54,4	script(CLOAKED)	Jerrymon#jerry2	1_M_01,{
	if (ill_underwater < 4)
		end;
	if (ill_underwater == 4) {
		mes "[Jerrymon]";
		mes "Ah you're here!!";
		next;
		mes "[Jerrymon]";
		mes "We are fully prepared while the adventurers are coming.";
		next;
		mes "- Gein gasps to say hello to his two friends. - ";
		next;
		mes "[Gein]";
		mes "Ha ha ha ha ha ha ha ha ha ha ha ha ha ha ha... ah, welcome adventurer.";
		next;
		mes "[Gein]";
		mes "I'm not sure what the principle is, but I stirred it diligently as Jerrymon-sama told me to!!";
		next;
		mes "[Raket & Soup]";
		mes "Hee... hee... hee... ah... hello.";
		next;
		mes "[Jerrymon]";
		specialeffect EF_MAP_MAGICZONE3;
		mes "Okay, shall we begin?";
		next;
		mes "[Jerrymon]";
		mes "The whirlpool will be created soon.";
		next;
		mes "[Jerrymon]";
		mes "Hold my hand when I give you a signal!!";
		next;
		select( "No, wait. Are you leaving right now?" );
		mes "[Jerrymon]";
		mes "Yes, yes, go ahead and don't think about it! Just trust me~~!!";
		next;
		mes "[Jerrymon]";
		mes "Okay now. Take my hand!";
		next;
		specialeffect EF_CASTSPIN2, AREA;
		mes "[Jerrymon]";
		mes "Wow! It spins round and round~~!!";
		close2;
		ill_underwater = 5;
		erasequest 3409;
		specialeffect EF_CASTSPIN2, AREA;
		warp "iz_d04_i",130,227;
		end;
	}
	mes "[Jerrymon]";
	mes "Hello!!";
	next;
	mes "[Jerrymon]";
	mes "Thanks to you, Adventurer, I am having a fun and exciting time every day.";
	next;
	mes "[Jerrymon]";
	mes "Would you like to go to the deep sea again? I will follow you!!";
	next;
	if (select( "Please", "I'll go next time" ) == 2) {
		mes "[Jerrymon]";
		mes "Yeah... Then I'll be waiting for you.";
		close;
	}
	mes "[Jerrymon]";
	specialeffect EF_MAP_MAGICZONE3;
	mes "Good.";
	next;
	specialeffect EF_CASTSPIN2;
	mes "[Jerrymon]";
	mes "Come on! Let's go~~!! Yay!!";
	close2;
	specialeffect EF_CASTSPIN2, AREA;
	warp "iz_d04_i",130,227;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(3409) == 1" );
	end;
}


iz_d04_i,127,228,4	script	Jerrymon#jerry3	1_M_01,{
	if (checkweight(1201,3) == 0) {
		mes "You have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (ill_underwater < 5)
		end;
	if (ill_underwater == 5) {
		switch( checkquest(3411,HUNTING) ) {
		case -1:
			mes "[Jerrymon]";
			mes "Wow... this purple sea... it's fantastic!!!";
			next;
			mes "[Jerrymon]";
			mes "It's so amazing that we can breathe without gills, there's no sea pressure, and even marine life that I've never seen before...!!!";
			next;
			mes "[Jerrymon]";
			mes "There's more than one or two things to look into, I'll be busy.";
			mes "Wow... so exciting!!! I think this is the most thrilling moment in my 14 years as an oceanographer!";
			next;
			mes "[Jerrymon]";
			mes "Lululala~~~";
			next;
			select( "Oh hey, I'm here to find Sirood..." );
			mes "[Jerrymon]";
			mes "Ah, ah... that, right? That should take precedence.";
			next;
			mes "[Jerrymon]";
			mes "In order to bring Sirood back ashore, we need an additional ^4d4dff" + getitemname(25899) + "^000000. The question is how to get it...";
			next;
			mes "[Jerrymon]";
			mes "I've been watching the deep sea creatures here, and I've seen some of them glow with the essence of the abyss.";
			mes "And they seem to threaten us sometimes.";
			next;
			mes "[Jerrymon]";
			mes "In that sense, could you handle some of the deep sea creatures? Maybe we can get ^4d4dff" + getitemname(25899) + "^000000 from them.";
			next;
			mes "[Jerrymon]";
			mes "Please take out 10 each of ^4d4dff" + getmonsterinfo("ILL_SROPHO", MOB_NAME) + "^000000, ^4d4dff" + getmonsterinfo("ILL_DEVIACE", MOB_NAME) + "^000000, and ^4d4dff" + getmonsterinfo("ILL_MARSE", MOB_NAME) + "^000000.";
			next;
			if (select( "Okay", "I'll do it next time" ) == 2) {
				mes "[Jerrymon]";
				mes "Yes yes~ I'll be waiting for you here!";
				close;
			}
			mes "[Jerrymon]";
			mes "Yes yes~ I'll be waiting for you here!";
			close2;
			setquest 3411;
			end;
		case 0:
		case 1:
			mes "[Jerrymon]";
			mes "Please take out 10 each of ^4d4dff" + getmonsterinfo("ILL_SROPHO", MOB_NAME) + "^000000, ^4d4dff" + getmonsterinfo("ILL_DEVIACE", MOB_NAME) + "^000000, and ^4d4dff" + getmonsterinfo("ILL_MARSE", MOB_NAME) + "^000000.";
			next;
			mes "[Jerrymon]";
			mes "I'll be waiting for you here.";
			close;
		case 2:
			mes "[Jerrymon]";
			mes "Thank you for your hard work, you also brought ^4d4dff" + getitemname(25899) + "^000000!! As expected, my prediction was correct.";
			next;
			mes "[Jerrymon]";
			mes "It looks like we only need about 10 ^4d4dff" + getitemname(25899) + "^000000 to send Sirood back ashore.";
			next;
			mes "[Jerrymon]";
			mes "If you collect them, I'll create a whirlpool for you.";
			next;
			mes "[Jerrymon]";
			mes "Oh, and this is a stone I found while researching. I've been keeping it because it looks like something that could be used by adventurers, so please take it.";
			next;
			mes "[Jerrymon]";
			mes "Then be careful!";
			close2;
			getitem 25271,2;	// IllusionStone
			ill_underwater = 6;
			erasequest 3411;
			setquest 3412;
			getexp 4441860,3109150;
			end;
		}
		end;
	}
	if (ill_underwater == 6) {
		if (countitem(25899) < 10) {
			mes "[Jerrymon]";
			mes "Please bring ^4d4dff10 " + getitemname(25899) + "^000000.";
			next;
			mes "[Jerrymon]";
			mes "I'd like to save it myself, but as you can see I'm weak, heck.";
			close;
		}
		mes "[Jerrymon]";
		mes "Thank you for your hard work!! You brought 10 ^4d4dff" + getitemname(25899) + "^000000.";
		next;
		mes "[Jerrymon]";
		mes "Would you like to go ashore now?";
		next;
		if (select( "Go ashore", "Not going up now" ) == 2) {
			mes "[Jerrymon]";
			mes "Talk to me when you're ready to go ashore!";
			close;
		}
		mes "[Jerrymon]";
		mes "I found this again while waiting for adventurer. Please accept it!!";
		next;
		mes "[Jerrymon]";
		mes "Okay, let's condense this...";
		next;
		mes "[Jerrymon]";
		mes "Huh...!!";
		next;
		mes "[Jerrymon]";
		mes "Now, Adventurer and Sirood!! Can you help me?? Ehhh!!!!";
		next;
		mes "- A huge whirlpool was created in front of Jerrymon! -";
		specialeffect EF_MAP_MAGICZONE3;
		next;
		mes "[Jerrymon]";
		mes "Then I'll cross first!!! Follow me carefully!";
		specialeffect EF_CASTSPIN2;
		close2;
		delitem 25899,10;	// E_Abyss1
		ill_underwater = 7;
		erasequest 3412;
		if (isbegin_quest(3410) == 1)
			erasequest 3410;
		getitem 25271,2;	// IllusionStone
		getexp 4441860,3109150;
		warp "izlude",128,54;
		end;
	}

	// daily
	if ((checkquest(3414,PLAYTIME) == 0 || checkquest(3414,PLAYTIME) == 1) && (checkquest(3416,PLAYTIME) == 0 || checkquest(3416,PLAYTIME) == 1)) {
		mes "[Jerrymon]";
		mes "I have everything I need for today's survey, thank you!!";
		next;
		mes "[Jerrymon]";
		mes "Looks like you've finished your business. Would you like to move to Izlude?";
		next;
		if (select( "Move", "Do not move" ) == 2) {
			mes "[Jerrymon]";
			mes "Please let me know if you need any help!";
			close;
		}
		specialeffect EF_MAP_MAGICZONE3;
		mes "[Jerrymon]";
		mes "Okay, huh!";
		next;
		mes "[Jerrymon]";
		mes "I'm going to cross~~ Ah!!";
		specialeffect EF_CASTSPIN2;
		close2;
		warp "izlude",128,54;
		end;
	}
	mes "[Jerrymon]";
	mes "Hello, research is going well.";
	next;
	mes "[Jerrymon]";
	mes "If we do well, we might be able to make the vortex linking here and Izlude last forever!";
	next;
	mes "[Jerrymon]";
	mes "So, can you help me a bit more?";
	next;
	mes "[Jerrymon]";
	mes "I need more ^4d4dff" + getitemname(25899) + "^000000, and I'd like you to take care of the ^4d4dffDeep Sea Creatures^000000 that get in the way of my research.";
	next;
	switch( select( "Okay", "I'll do it next time", "I want to go back to Izlude" ) ) {
	case 1:
		mes "[Jerrymon]";
		mes "Thanks!! Can you do something for me?";
		next;

		switch( checkquest(3414,PLAYTIME) ) {
		case -1:
			switch( isbegin_quest(3413) ) {
			case 0:
				.@menu$[0] = "Collect " + getitemname(25899) + "";
				break;
			case 1:
				if (countitem(25899) < 10)
					.@menu$[0] = "Collecting " + getitemname(25899) + " - In Progress";
				else
					.@menu$[0] = "Collect " + getitemname(25899) + " - Done";
				break;
			case 2:
				end;
			}
			break;
		case 0:
		case 1:
			.@menu$[0] = "^999999" + getitemname(25899) + " Collection - Pending^000000";
			break;
		case 2:
			.@menu$[0] = "Collect " + getitemname(25899) + "";
			break;
		}

		switch( checkquest(3416,PLAYTIME) ) {
		case -1:
			switch( checkquest(3415,HUNTING) ) {
			case -1:
				.@menu$[1] = "Kill Deep Sea Creatures";
				break;
			case 0:
			case 1:
				.@menu$[1] = "Kill sea creatures - In Progress";
				break;
			case 2:
				.@menu$[1] = "Kill Deep Sea Creatures - Done";
				break;
			}
			break;
		case 0:
		case 1:
			.@menu$[1] = "^999999Deep Sea Creatures Killed - Pending^000000";
			break;
		case 2:
			.@menu$[1] = "Kill Deep Sea Creatures";
			break;
		}

		switch( select( .@menu$[0], .@menu$[1], "Next time." ) ) {
		case 1:
			switch( checkquest(3414,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				end;	// todo
			case 2:
				erasequest 3414;
				break;
			}
			switch( isbegin_quest(3413) ) {
			case 0:
				mes "[Jerrymon]";
				mes "^4d4dff" + getitemname(25899) + "^000000 can be obtained from all the deep sea creatures here.";
				mes "I need 10 right now.";
				next;
				mes "[Jerrymon]";
				mes "Then take care of yourself~~!!";
				close2;
				setquest 3413;
				end;
			case 1:
				if (countitem(25899) < 10) {
					mes "[Jerrymon]";
					mes "I need 10 ^4d4dff" + getitemname(25899) + "^000000.";
					next;
					mes "[Jerrymon]";
					mes "Come back to me when you've collected all the essences!";
					close;
				}
				mes "[Jerrymon]";
				mes "You've collected all the " + getitemname(25899) + "!!";
				next;
				mes "[Jerrymon]";
				mes "Thank you, I'll put it to good use in my research.";
				close2;
				delitem 25899,10;	// E_Abyss1
				getexp 4441860,3109150;
				erasequest 3413;
				setquest 3414;
				getitem 25271,1;	// IllusionStone
				end;
			case 2:
				end;
			}
			end;
		case 2:
			switch( checkquest(3416,PLAYTIME) ) {
			case -1:
				break;
			case 0:
			case 1:
				end;	// todo
			case 2:
				erasequest 3416;
				break;
			}
			switch( checkquest(3415,HUNTING) ) {
			case -1:
				mes "[Jerrymon]";
				mes "Please kill 10 each of ^4d4dff" + getmonsterinfo("ILL_SROPHO", MOB_NAME) + "^000000, ^4d4dff" + getmonsterinfo("ILL_DEVIACE", MOB_NAME) + "^000000 and ^4d4dff" + getmonsterinfo("ILL_MARSE", MOB_NAME) + "^000000 that roam around here.";
				next;
				mes "[Jerrymon]";
				mes "Then take care of yourself~~!!";
				close2;
				setquest 3415;
				end;
			case 0:
			case 1:
				mes "[Jerrymon]";
				mes "Please kill 10 each of ^4d4dff" + getmonsterinfo("ILL_SROPHO", MOB_NAME) + "^000000, ^4d4dff" + getmonsterinfo("ILL_DEVIACE", MOB_NAME) + "^000000, and ^4d4dff" + getmonsterinfo("ILL_MARSE", MOB_NAME) + "^000000.";
				close;
			case 2:
				mes "[Jerrymon]";
				mes "You've finished dealing with all the deep sea creatures, thank you for your hard work.";
				next;
				mes "[Jerrymon]";
				mes "I'll get back to you if I need help. Thanks!!";
				close2;
				getitem 25271,1;	// IllusionStone
				getexp 4441860,3109150;
				erasequest 3415;
				setquest 3416;
				end;
			}
			end;
		case 3:
			mes "[Jerrymon]";
			mes "The only person I can ask for is you...";
			next;
			mes "[Jerrymon]";
			mes "Feel free to tell me if you change your mind!!";
			close;
		}
		end;
	case 2:
		mes "[Jerrymon]";
		mes "I'll be staying here for a while, so let me know if you change your mind!!";
		close;
	case 3:
		specialeffect EF_MAP_MAGICZONE3;
		mes "[Jerrymon]";
		mes "Okay, huh!";
		next;
		mes "[Jerrymon]";
		mes "I'm going to cross~~ Ah!!";
		specialeffect EF_CASTSPIN2;
		close2;
		warp "izlude",128,54;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_underwater == 5 && checkquest(3411,HUNTING) == -1" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "ill_underwater == 5 && checkquest(3411,HUNTING) == 2" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(3412) == 1 && countitem(25899) >= 10" );

	// daily
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ill_underwater == 7 && checkquest(3414,PLAYTIME) == -1 && isbegin_quest(3413) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(3413) == 1 && countitem(25899) >= 10" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3414,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "ill_underwater == 7 && checkquest(3416,PLAYTIME) == -1 && checkquest(3415,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3415,HUNTING) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3416,PLAYTIME) == 2" );
	end;
}


iz_d04_i,134,223,4	script	Jane#Jane01	1_F_01,{
	if (ill_underwater < 6) {
		mes "[???]";
		mes "Hello.";
		next;
		select( "Are you Sirood?" );
		mes "[Jane]";
		mes "No, my name is Jane.";
		next;
		mes "[Jane]";
		mes "Sirood...?";
		mes "I think I've heard that name somewhere...";
		close;
	}
	mes "[Jane]";
	mes "Hello, it looks like you've been here a while...";
	next;
	mes "[Jane]";
	mes "How do you like it? Isn't this a pretty charming place too?";
	next;
	mes "[Jane]";
	mes "I should go back to my hometown...";
	close;
}

iz_d04_i,142,216,4	script	Sunrin#Sun01	4_F_03,{
	if (ill_underwater < 6) {
		mes "[???]";
		mes "You said you were looking for someone named Sirood?";
		next;
		mes "[Sunrin]";
		mes "My name is Sunrin.";
		next;
		mes "[Sunrin]";
		mes "Sirood... ah, I think I know who it is.";
		next;
		mes "[Sunrin]";
		mes "Go all the way to the left, and you'll find him.";
		next;
		mes "[Sunrin]";
		mes "Then have a nice day today!!";
		close;
	}
	mes "[Sunrin]";
	mes "All the people here are immigrants and settlers.";
	next;
	mes "[Sunrin]";
	mes "As you can see, there are traces of civilization in these depths, but everyone here was an outsider.";
	next;
	mes "[Sunrin]";
	mes "You'll get used to it soon.";
	next;
	mes "[Sunrin]";
	mes "Sea monsters do attack from time to time, but that's about it...";
	close;
}

iz_d04_i,125,226,0	script	Sirood#SRD3	HIDDEN_WARP_NPC,4,4,{
	end;
OnTouch:
	if (ill_underwater < 7 && isbegin_quest(3410) == 0)
		cloakoffnpcself( "Sirood#SRD4" );
	end;
}

iz_d04_i,125,226,5	script(CLOAKED)	Sirood#SRD4	1_M_04,{
	if (ill_underwater != 5 && ill_underwater != 6)
		end;
	switch( isbegin_quest(3410) ) {
	case 0:
		mes "[Sirood]";
		mes "Hello, Adventurer.";
		next;
		mes " - Sirood greeted me as if he had been waiting. -";
		next;
		mes "[Sirood]";
		mes "It looks like the message I sent reached Izlude, I'm so glad...";
		next;
		mes "[Sirood]";
		mes "About 3 months ago... I went fishing on a rainy and windy day.";
		next;
		mes "[Sirood]";
		mes "After I caught my first fish, I tripped and fell into the water while trying to get it out with a fishing pole.";
		next;
		mes "[Sirood]";
		mes "I was trying to swim as hard as I could to get out, but I felt something pulling me in with great force.";
		next;
		mes "[Sirood]";
		mes "What, it looked like a whirlpool... I thought I was going to die... and when I woke up, I found this place.";
		next;
		mes "[Sirood]";
		mes "I don't know why I can't breathe or why I don't feel hungry even if I don't eat.";
		next;
		mes "[Sirood]";
		mes "And observing the surroundings here, I could see small vortices forming occasionally.";
		next;
		mes "[Sirood]";
		mes "I had a hunch that it was the same kind of whirlpool I was swept into.";
		next;
		mes "[Sirood]";
		mes "The duration of the vortex is very short. It took me 2 months just to put my fishing rod with my name on it into the vortex.";
		next;
		mes "[Sirood]";
		mes "Waiting for someone to discover...";
		next;
		mes "[Sirood]";
		mes "Are you sure you came to me with that fishing rod as a clue?";
		next;
		select( "That's right" );
		mes "[Sirood]";
		mes "Ah, that's a relief... I'd appreciate it if you could take me with you when you return ashore.";
		next;
		mes "- I think we should talk to Jerrymon about the work to send Sirood ashore. - ";
		close2;
		setquest 3410;
		end;
	case 1:
		mes "[Sirood]";
		mes "Adventurer, please take me with you when you return ashore.";
		close;
	case 2:
		end;
	}
	end;
}

iz_d04_i,146,226,4	script	Nick#Nick01	2_M_SAGE_B,{
	mes "[Nick]";
	mes "How is it? Is it worth living here?";
	next;
	mes "[Nick]";
	mes "It's deeper here than anywhere else, and it's amazing to be able to breathe freely.";
	mes "I'm not sure how that works.";
	close;
}


// Floor 2
iz_d04_i,129,232,5	script	Gatekeeper#guard1	4_M_KY_SOLD,{
	if (BaseLevel < 180) {
		mes "[Gatekeeper]";
		mes "Your strength isn't enough to cross to the lower levels.";
		//close;	// close is used on official
		next;
		mes "[Gatekeeper]";
		mes "Please come back after you are at least level 180.";
		close;
	}
	mes "[Gatekeeper]";
	mes "If you go downstairs, you will run into some pretty vicious fish. Would that be alright?";
	next;
	if (select( "Sure", "I'll come next time" ) == 2) {
		mes "[Gatekeeper]";
		mes "Please talk to me again when you are ready to cross.";
		close;
	}
	mes "[Gatekeeper]";
	mes "Then be careful.";
	close2;
	warp "iz_d05_i",141,186;
	end;
}

iz_d05_i,141,188,5	script	Guardian#guard2	4_M_KY_SOLD,{
	mes "[Gatekeeper]";
	mes "Hello, would you like to go upstairs again?";
	next;
	if (select( "Yes", "No" ) == 2) {
		mes "[Gatekeeper]";
		mes "Please talk to me again when you are ready to cross.";
		close;
	}
	mes "[Gatekeeper]";
	mes "Then be careful.";
	close2;
	warp "iz_d04_i",129,227;
	end;
}

iz_d05_i,138,186,5	script	Kena#Kena	4_M_02,{
	if (checkweight(1201,3) == 0) {
		mes "You have too many items.";
		mes "Please clean up your items and try again.";
		close;
	}
	if (BaseLevel < 180)
		end;
	if (ill_underwater < 5)
		end;
	if ((checkquest(3418,PLAYTIME) == 0 || checkquest(3418,PLAYTIME) == 1) && (checkquest(3420,PLAYTIME) == 0 || checkquest(3420,PLAYTIME) == 1)) {
		mes "[Kena]";
		mes "Thank you for your hard work. Take a good rest today and visit us tomorrow.";
		close;
	}
	mes "[Kena]";
	mes "Hello, Adventurer.";
	next;
	mes "[Kena]";
	mes "I heard that there are many dangerous deep-sea creatures in the lower layer, but when I came here, they were more dangerous than I thought.";
	next;
	mes "[Kena]";
	mes "Not too long ago, there was a lot of uproar when a creature from the lower layer came up to the upper layer.";
	next;
	mes "[Kena]";
	mes "The population of deep sea creatures is increasing. Adventurer, may I ask for your help?";
	next;
	if (select( "Yes", "No" ) == 2) {
		mes "[Kena]";
		mes "Oops...";
		next;
		mes "[Kena]";
		mes "It would be dangerous if left unattended...";
		close;
	}
	mes "[Kena]";
	mes "Thank you, I'd appreciate it if you could help me defeat the deep sea creatures or fishmen.";
	next;
	mes "[Kena]";
	mes "What would you like to do?";
	next;
	.@menu$[0] = callsub( S_Quest, "Kill Deep Sea Creatures", 3418,3417 );
	.@menu$[1] = callsub( S_Quest, "Destroy the Deep Sea Fishmen", 3420,3419 );

	switch( select( .@menu$[0], .@menu$[1], "Next time." ) ) {
	case 1:
		switch( checkquest(3418,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Kena]";
			mes "I think this is enough for today, please come back tomorrow.";
			close;
		case 2:
			erasequest 3418;
			break;
		}
		switch( checkquest(3417,HUNTING) ) {
		case -1:
			mes "[Kena]";
			mes "Please kill 10 each of ^4d4dff" + getmonsterinfo("ILL_SWORD_FISH", MOB_NAME) + "^000000, ^4d4dff" + getmonsterinfo("ILL_PHEN", MOB_NAME) + "^000000, and ^4d4dff" + getmonsterinfo("ILL_KING_DRAMOH", MOB_NAME) + "^000000.";
			next;
			mes "[Kena]";
			mes "These monsters are quite ferocious, so be very careful.";
			next;
			mes "[Kena]";
			mes "Thank you.";
			close2;
			setquest 3417;
			end;
		case 0:
		case 1:
			mes "[Kena]";
			mes "^4d4dff" + getmonsterinfo("ILL_SWORD_FISH", MOB_NAME) + "^000000, ^4d4dff" + getmonsterinfo("ILL_PHEN", MOB_NAME) + "^000000, and ^4d4dff" + getmonsterinfo("ILL_KING_DRAMOH", MOB_NAME) + "^000000.";
			next;
			mes "[Kena]";
			mes "Please kill 10 of each.";
			close;
		case 2:
			mes "[Kena]";
			mes "They've all been eliminated, thank you for your hard work.";
			next;
			mes "[Kena]";
			mes "If you have time, please come back tomorrow. I'll be waiting for you.";
			close2;
			getitem 25271,1;	// IllusionStone
			getexp 20107500,14075250;
			erasequest 3417;
			setquest 3418;
			end;
		}
		end;
	case 2:
		switch( checkquest(3420,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Kena]";
			mes "I think this is enough for today, please come back tomorrow.";
			close;
		case 2:
			erasequest 3420;
			break;
		}
		switch( checkquest(3419,HUNTING) ) {
		case -1:
			mes "[Kena]";
			mes "Please take out 15 ^4d4dff" + getmonsterinfo("ILL_SEDORA", MOB_NAME) + "^000000 and ^4d4dff" + getmonsterinfo("ILL_STROUF", MOB_NAME) + "^000000 each.";
			next;
			mes "[Kena]";
			mes "They are quite annoying, so be careful.";
			close2;
			setquest 3419;
			end;
		case 0:
		case 1:
			mes "[Kena]";
			mes "Please take out 15 ^4d4dff" + getmonsterinfo("ILL_SEDORA", MOB_NAME) + "^000000 and ^4d4dff" + getmonsterinfo("ILL_STROUF", MOB_NAME) + "^000000 each.";
			close;
		case 2:
			mes "[Kena]";
			mes "They've all been eliminated, thank you for your hard work.";
			next;
			mes "[Kena]";
			mes "Please drop by tomorrow when the time is right. I'll be waiting for you.";
			close2;
			getitem 25271,1;	// IllusionStone
			getexp 20107500,14075250;
			setquest 3420;
			erasequest 3419;
			end;
		}
		end;
	case 3:
		mes "[Kena]";
		mes "Oops...";
		next;
		mes "[Kena]";
		mes "It would be dangerous if left unattended...";
		close;
	}
	end;

S_Quest:
	switch( checkquest(getarg(1),PLAYTIME) ) {
	case -1:
		switch( checkquest(getarg(2),HUNTING) ) {
		case -1:
			.@string$ = getarg(0);
			break;
		case 0:
		case 1:
			.@string$ = getarg(0) + " - In Progress";
			break;
		case 2:
			.@string$ = getarg(0) + " - Done";
			break;
		}
		break;
	case 0:
	case 1:
		.@string$ = "^999999" + getarg(0) + " - Pending^000000";
		break;
	case 2:
		.@string$ = getarg(0);
		break;
	}
	return .@string$;

OnInit:
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3418,PLAYTIME) == -1 && checkquest(3417,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3417,HUNTING) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3418,PLAYTIME) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3420,PLAYTIME) == -1 && checkquest(3419,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3419,HUNTING) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "checkquest(3420,PLAYTIME) == 2" );
	end;
}


//============================================================
//= Illusion of Twins
//============================================================
// anthell02,172,189,5	script	Yolanda#1F	ASSASSIN,{
anthell02,172,189,5	script	Yolanda#1F	HIDDEN_NPC,{
	if (checkweight(1201,3) == 0) {
		mes "- You cannot proceed with the quest because you have too many items. -";
		close;
	}
	if (BaseLevel < 160) {
		mes "[Yolanda]";
		mes "We can't be like this...";
		next;
		mes "[Mirko]";
		mes "But until an adventurer strong enough to get there...";
		next;
		mes "== This is a level 160 or higher quest ==";
		close;
	}
	if (ill_anthell == 0) {
		emotion ET_PROFUSELY_SWEAT;
		mes "[Yolanda]";
		mes "Are you really in?";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[Mirko]";
		mes "That's right. A lot of people said they saw it.";
		mes "Since he said he was a ranger who injured his left arm, it can't be that he's the only friend he's ever seen.";
		next;
		mes "[Yolanda]";
		mes "What should I do? If I get hurt like that, let alone search...";
		next;
		mes "[Mirko]";
		mes "Oh, wait!";
		mes "There adventurer, wait a minute!";
		next;
		select( "Me?" );
		mes "[Mirko]";
		mes "Have you been here in a while?";
		mes "That's great. Here, we recently found a way to go deeper.";
		next;
		emotion ET_PROFUSELY_SWEAT;
		ill_anthell = 1;
		setquest 8719;
		mes "[Yolanda]";
		mes "Hey, what if I tell you that! And it's not my research, it's yours!";
		next;
		select( "Speak and sleep..." );
		mes "[" + strcharinfo(0) + "]";
		mes "You're saying that to strangers?";
		next;
		mes "[Yolanda]";
		mes "That's right! Adventurer,";
		mes "sorry, wait a minute.";
		npctalk "Yolanda: What the hell do you know how to do yourself?", "", bc_self;
		npctalk "Mirko: Hey, then should I go or the adventurer who just showed up?", "Mirko#1F", bc_self;
		close;
	}
	if (ill_anthell == 1) {
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[Mirko]";
		mes "What's up, I need to hire more people now.";
		mes "It's not even a ruin, so how about going wild?";
		next;
		emotion ET_PROFUSELY_SWEAT;
		mes "[Yolanda]";
		mes "Let's stop making mistakes all the time and leaving it to me to do the follow-up.";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[Mirko]";
		mes "An adventurer is waiting for you.";
		mes "Let's chat later, huh?";
		mes "Okay, so adventurer.";
		mes "Your name is " + strcharinfo(0) + "?";
		next;
		mes "[Mirko]";
		mes "Yes, " + strcharinfo(0) + ".";
		mes "I'll get to the point.";
		next;
		mes "[Mirko]";
		mes "I'm Mirko, that's Yolanda";
		mes "And then one of the rangers, slightly injured, went into that newly discovered anthill I was talking about earlier. I think...";
		mes "My goal right now is not exploration, I want you to rescue the Ranger and his friends.";
		next;
		mes "[Mirko]";
		mes "Ranger's name is Briashen...";
		mes "The colleague Briashen spoke of was Khahris,";
		mes "According to Briashen, he looks like a twin to her.";
		next;
		ill_anthell = 2;
		erasequest 8719;
		setquest 8720;
		mes "[Mirko]";
		mes "Once you find either one";
		mes "I want you to bring me out.";
		mes "A corpse is fine, please.";
		mes "Call me back when you're ready";
		close;
	}
	if (ill_anthell == 2) {
		mes "[Yolanda]";
		mes "What's wrong...";
		close;
	}
	if (ill_anthell == 3) {
		mes "[Yolanda]";
		mes "If only I had been a little stronger...";
		close;
	}
	if (ill_anthell == 4) {
		mes "[Yolanda]";
		mes "Have you seen Briashen?";
		mes "You're alive? I'm glad... why didn't you bring me out?";
		mes "Ah...";
		mes "...";
		next;
		mes "[Yolanda]";
		mes "Try talking to Mirko again.";
		mes "I think you're thinking the same thing as me.";
		close;
	}
	if (ill_anthell == 5 || ill_anthell == 6) {
		mes "[Yolanda]";
		mes "It would be nice if we could go too...";
		mes "Take care of Briashen.";
		close;
	}
	if (ill_anthell == 7) {
		mes "[Yolanda]";
		mes "What a surprise!";
		mes "Where did it come from?!";
		next;
		select( "It bounced" );
		mes "[Yolanda]";
		mes "What?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "There were three people who looked like Khahris...";
		next;
		mes "== Explained everything to Mirko and Yolanda. ==";
		next;
		mes "[Mirko]";
		mes "All three disappeared in the middle of a conversation.";
		mes "Besides, the last person you met was... Vitata?";
		next;
		mes "[Yolanda]";
		mes "Maybe... maybe..";
		mes "Couldn't all three be the Khahris instead of the one who looked like him?";
		next;
		mes "[Mirko]";
		mes "What?";
		mes "If " + strcharinfo(0) + " was alone there, it could have been hallucinations too, right?";
		next;
		mes "[Yolanda]";
		mes "I heard Briaschen did that. Ants didn't attack me when I was with Khahris.";
		next;
		mes "[Mirko]";
		mes "But at the end Maya...";
		next;
		mes "[Yolanda]";
		mes "If that was the case?";
		next;
		mes "[Yolanda]";
		mes "This is a hypothesis.";
		mes "Khahris... was with Vitata, so the other ants obviously wouldn't touch it.";
		mes "Aren't ants colonies?";
		next;
		mes "[Yolanda]";
		mes "But Maya is the ruler of dungeons.";
		next;
		mes "[Mirko]";
		mes "Um...";
		next;
		mes "[Yolanda]";
		mes "If you can harm yourself...";
		next;
		mes "[Mirko]";
		mes "I might be able to touch it.";
		next;
		mes "[Yolanda]";
		mes "Vitata's behavior is a threat to her status...";
		next;
		mes "[Mirko]";
		mes "!!";
		mes "So what's really dangerous right now...";
		next;
		mes "[Mirko]";
		mes "" + strcharinfo(0) + ", now that's hypothetical, but now Briashen is really dangerous!";
		next;
		if (select( "Okay, I'll be back", "I need some time to get ready" ) == 2) {
			mes "[Mirko]";
			mes "It's urgent, so I'll ask you quickly!";
			close;
		}
		mes "[Mirko]";
		mes "Please!";
		close2;
		warp "ant_d02_i",172,185;
		ill_anthell = 8;
		erasequest 8728;
		setquest 8729;
		open_quest_ui(8729);
		end;
	}
	if (ill_anthell == 8) {
		mes "[Yolanda]";
		mes "Please, " + strcharinfo(0) + "...";
		close;
	}
	if (ill_anthell == 9) {
		mes "[Yolanda]";
		mes "...";
		close;
	}
	mes "[Yolanda]";
	mes "I'll be doing this research for a while.";
	mes "It's not much. I'll do the money later.";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 12;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 9;
	setunitdata .@npc_id, UNPC_HEADTOP, 1501;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_anthell == 0" );	// note: some dialogs are similiar to the sage npc but only this questinfo is displayed for this npc
	end;
}

anthell02,177,190,3	script	Mirko#1F	4_M_SAGE_A,{
	if (checkweight(1201,3) == 0) {
		mes "- You cannot proceed with the quest because you have too many items. -";
		close;
	}
	if (BaseLevel < 160) {
		mes "[Mirko]";
		mes "Have you seen Briashen yet?";
		next;
		mes "[Yolanda]";
		mes "Not yet.";
		mes "...I need to see what's there, too.";
		next;
		mes "== This is a level 160 or higher quest ==";
		close;
	}
	if (ill_anthell == 0) {
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Yolanda#1F");
		mes "[Yolanda]";
		mes "Are you really in?";
		next;
		emotion ET_PROFUSELY_SWEAT;
		mes "[Mirko]";
		mes "That's right. A lot of people said they saw it.";
		mes "Since he said he was a ranger who injured his left arm, it can't be that he's the only friend he's ever seen.";
		next;
		mes "[Yolanda]";
		mes "What should I do? If I get hurt like that, let alone search...";
		next;
		mes "[Mirko]";
		mes "Oh, wait!";
		mes "There adventurer, wait a minute!";
		next;
		select( "Me?" );
		mes "[Mirko]";
		mes "Have you been here in a while?";
		mes "That's great. Here, we recently found a way to go deeper.";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Yolanda#1F");
		ill_anthell = 1;
		setquest 8719;
		mes "[Yolanda]";
		mes "Hey, what if I tell you that! And it's not my research, it's yours!";
		next;
		select( "Speak and sleep..." );
		mes "[" + strcharinfo(0) + "]";
		mes "You're saying that to strangers?";
		next;
		mes "[Yolanda]";
		mes "That's right! Adventurer man,";
		mes "Sorry, wait a minute.";
		npctalk "Yolanda: What the hell do you know how to do yourself?", "Yolanda#1F", bc_self;
		npctalk "Mirko: Hey, then should I go or the adventurer who just showed up?", "Mirko#1F", bc_self;
		close;
	}
	if (ill_anthell == 1) {
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[Mirko]";
		mes "What's up, I need to hire more people now.";
		mes "It's not even a ruin, so how about going wild?";
		next;
		emotion ET_PROFUSELY_SWEAT;
		mes "[Yolanda]";
		mes "Let's stop making mistakes all the time and leaving it to me to do the follow-up.";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0,"Mirko#1F");
		mes "[Mirko]";
		mes "Adventurer is waiting for you";
		mes "Let's chat later, huh?";
		mes "Okay, so adventurer man.";
		mes "What's your name? " + strcharinfo(0) + "?";
		next;
		mes "[Mirko]";
		mes "Yes, " + strcharinfo(0) + ".";
		mes "I'll get to the point.";
		next;
		mes "[Mirko]";
		mes "I'm Mirko, that's Yolanda";
		mes "And then one of the rangers, slightly injured, went into that newly discovered anthill I was talking about earlier. I think ...";
		mes "My goal right now is not exploration, I want you to rescue the Ranger and his friends.";
		next;
		mes "[Mirko]";
		mes "Ranger's name is Briashen...";
		mes "The colleague Briashen spoke of was Khahris,";
		mes "According to Briashen, he looks like a twin to her.";
		next;
		ill_anthell = 2;
		erasequest 8719;
		setquest 8720;
		mes "[Mirko]";
		mes "Once you find either one";
		mes "I want you to bring me out.";
		mes "A corpse is fine, please.";
		mes "Call me back when you're ready";
		close;
	}
	if (ill_anthell == 2) {
		mes "[Mirko]";
		mes "Find Briashen and his companions.";
		mes "If you find either one, I hope you bring them out.";
		mes "A corpse is fine, please.";
		mes "Are you ready?";
		next;
		if (select( "Okay", "Later" ) == 2) {
			mes "[Mirko]";
			mes "Sorry for the sudden request.";
			mes "Anyway, the investigation hasn't been completed yet, so we're nervous...";
			mes "Tell me when you're ready.";
			close;
		}
		mes "[Mirko]";
		mes "Yeah. ...This is how it happened... It was by accident. I accidentally broke the wall...";
		mes "A force so strong that even we can feel it! Voila!";
		mes "You can feel it beyond the wall.";
		next;
		mes "[Mirko]";
		mes "What can I do? As an adventurer, if this place isn't a historical site and there are no traces of people... I'll have to look for it!";
		mes "So... I pulled my hair out and looked into it.";
		next;
		select( "You're brave" );
		mes "[Yolanda]";
		mes "Yeah... This bastard was really brave back then.";
		mes "I'm glad you didn't die.";
		next;
		mes "[Mirko]";
		mes "It's okay because I'm alive!";
		mes "Anyway, this is the second floor, and the road to the first floor is over there, isn't it?";
		mes "But... that's not the way!";
		next;
		mes "[Mirko]";
		mes "But something was different, the atmosphere.";
		mes "It feels like you're walking in a hazy... dream?";
		next;
		mes "[Yolanda]";
		mes "I feel like I have written the Asura Kingdom of Defeat.";
		next;
		mes "[Mirko]";
		mes "Hey, most people don't understand when you explain it like that!";
		next;
		select( "I got it roughly" );
		mes "[Yolanda]";
		mes "Whoops.";
		next;
		mes "[Mirko]";
		mes "Am I dull...?";
		mes "Anyway, even though it's strangely dark, it's like being here and not here... perception is peeling off from the body...";
		mes "So...";
		next;
		mes "[Yolanda]";
		mes "Mild confusion.";
		mes "Don't worry, it's nothing serious, I think I'm looking at something stupid.";
		mes "I'm fine with guesses. Everyone's shape is different.";
		next;
		mes "[Yolanda]";
		mes "You can tell it's empty when you get out on the road, but you can't tell while you're inside.";
		mes "In other words, even if I'm mistaken, I didn't go back to the first floor.";
		next;
		mes "[Mirko]";
		mes "Yeah! Even though it was the same road, I felt like I crossed the line somewhere.";
		mes "And also, the ants were super powerful!";
		next;
		mes "[Mirko]";
		mes "How did you come back alive, it's a shame... Fortunately, the ants there didn't seem to come over here.";
		mes "After that, I was going to stop the geological exploration of this side for a while and organize a new expedition.";
		next;
		mes "[Yolanda]";
		mes "Briashen, the strongest among us, went on a patrol, but it seems that the adventurers who will come around here are not at the level to form an expedition.";
		mes "So either we went alone or he went alone... One day he saw someone there who looked just like him.";
		next;
		mes "[Yolanda]";
		mes "As I said before, some people may see falsehoods, but...";
		mes "When it comes out, you know it's nonsense? But since Briashen came out and said that...";
		mes "I think it was real. We've never seen it.";
		next;
		mes "[Yolanda]";
		mes "After that, we waited outside because the exploration results were good for going alone,";
		mes "He came back with a serious injury the other day, and his colleague is still there.";
		mes "You're being chased by ants.";
		next;
		mes "[Yolanda]";
		mes "But after being hurt like this... He said he needed to rest for a while, but he must have gone into that anthill on his own.";
		mes "That is, life and death...";
		next;
		mes "[Mirko]";
		mes "I can't guess.";
		mes "We can't get in there on our own. No one can do that now.";
		mes "Adventurer friend, save Briashen.";
		mes "Please.";
		ill_anthell = 3;
		erasequest 8720;
		setquest 8721;
		next;
		mes "[Mirko]";
		mes "Okay, this way...";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 3) {
		mes "[Mirko]";
		mes "Are you going to find Briashen again?";
		next;
		if (select( "Yes", "Later" ) == 2) {
			mes "[Mirko]";
			mes "Sorry for the sudden request.";
			mes "Anyway, the investigation hasn't been completed yet, so we're nervous...";
			close;
		}
		mes "[Mirko]";
		mes "Okay, this way...";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 4) {
		mes "[Mirko]";
		mes "You saw Briashen?";
		mes "Are you alive??";
		mes "Thank God...";
		next;
		mes "[Yolanda]";
		mes "But why didn't you come with me?";
		next;
		mes "== Briefly explained what Briashen said. ==";
		next;
		mes "[Mirko]";
		mes "...I can't help it.";
		mes "I don't know if I can pull it out again... No, if it was like that in the first place, I wouldn't have asked you, adventurer.";
		next;
		mes "[Mirko]";
		mes "Then, as Briashen asked, would you like to go downstairs to help him?";
		ill_anthell = 5;
		erasequest 8722;
		setquest 8723;
		next;
		if (select( "Yes", "Later" ) == 2) {
			mes "[Mirko]";
			mes "I can't help it";
			mes "It would be nice if we went together, but...";
			close;
		}
		mes "[Mirko]";
		mes "Okay...";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 5 || ill_anthell == 6) {
		mes "[Mirko]";
		mes "As Briashen asked, would you like to go downstairs to help him?";
		next;
		if (select( "Yes", "Later" ) == 2) {
			mes "[Mirko]";
			mes "I can't help it";
			mes "It would be nice if we went together, but...";
			close;
		}
		mes "[Mirko]";
		mes "Okay...";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 7) {
		mes "[Yolanda]";
		mes "What a surprise!";
		mes "Where did it come from?!";
		next;
		select( "It bounced" );
		mes "[Yolanda]";
		mes "what?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "There were three people who looked like Khahris...";
		next;
		mes "== Explained everything to Mirko and Yolanda. ==";
		next;
		mes "[Mirko]";
		mes "All three disappeared in the middle of a conversation.";
		mes "Besides, the last person you met was... Vitata?";
		next;
		mes "[Yolanda]";
		mes "Maybe... maybe";
		mes "Couldn't all three be the Khahris instead of the one who looked like him?";
		next;
		mes "[Mirko]";
		mes "what?";
		mes "If you saw " + strcharinfo(0) + " alone, it could have been an illusion, right?";
		next;
		mes "[Yolanda]";
		mes "I heard Briaschen did that. Ants didn't attack me when I was with Khahris.";
		next;
		mes "[Mirko]";
		mes "But at the end Maya...";
		next;
		mes "[Yolanda]";
		mes "If that was the case?";
		next;
		mes "[Yolanda]";
		mes "This is a hypothesis.";
		mes "Khahris... was with Vitata, so the other ants obviously wouldn't touch it.";
		mes "Aren't ants colonies?";
		next;
		mes "[Yolanda]";
		mes "But Maya is the ruler of dungeons.";
		next;
		mes "[Mirko]";
		mes "Um...";
		next;
		mes "[Yolanda]";
		mes "If you can harm yourself...";
		next;
		mes "[Mirko]";
		mes "I might be able to touch it.";
		next;
		mes "[Yolanda]";
		mes "Vitata's behavior is a threat to her status...";
		next;
		mes "[Mirko]";
		mes "!!";
		mes "So what's really dangerous right now...";
		next;
		mes "[Mirko]";
		mes "" + strcharinfo(0) + ", now that's hypothetical, but now Briashen is really dangerous!";
		next;
		if (select( "Okay, I'll be back", "I need some time to get ready" ) == 2) {
			mes "[Mirko]";
			mes "It's urgent, so I'll ask you quickly!";
			close;
		}
		mes "[Mirko]";
		mes "Please!";
		close2;
		warp "ant_d02_i",172,185;
		ill_anthell = 8;
		erasequest 8728;
		setquest 8729;
		open_quest_ui(8729);
		end;
	}
	if (ill_anthell == 8) {
		mes "[Mirko]";
		mes "" + strcharinfo(0) + ", that's just a hypothesis, but now Briashen is really dangerous!";
		next;
		if (select( "Okay, I'll be back", "I need some time to get ready" ) == 2) {
			mes "[Mirko]";
			mes "It's urgent, so I'll ask you quickly!";
			close;
		}
		mes "[Mirko]";
		mes "Please!";
		close2;
		warp "ant_d02_i",172,185;
		end;
	}
	if (ill_anthell == 9) {
		mes "[Mirko]";
		mes "...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		next;
		mes "[Briashen]";
		mes "I'm fine now";
		mes "Tell me";
		npctalk "I'm a bit sane now.", "Briashen#ant2", bc_self;
		npctalk "Thank God...", "Yolanda#1F", bc_self;
		next;
		mes "[Mirko]";
		mes "...";
		mes "It's just a guess.";
		mes "Isn't Briashen having a longer hallucination than the other adventurers, rather than the illusion adventuring with Briashen?";
		next;
		mes "[Mirko]";
		mes "Like Gona over there.";
		npctalk "I can't stand it, so I keep coming in and out. What the hell did you see?", "", bc_self;
		npctalk "Oh, don't remind me!", "Gona#ant2", bc_self;
		next;
		mes "[Mirko]";
		mes "A closeness so strong that you can't come back because you're possessed...";
		mes "I heard you look just like me?";
		next;
		mes "[Briashen]";
		mes "I don't remember.";
		next;
		mes "[Mirko]";
		mes "what?";
		next;
		mes "[Briashen]";
		mes "I can't remember what Khahris looked like...";
		next;
		mes "[Gona]";
		mes "That's the worst thing I've ever seen.";
		next;
		mes "[Mirko]";
		mes "There, " + strcharinfo(0) + ".";
		mes "How was it? Was it difficult to bring you out?";
		next;
		select( "I saw it too" );
		mes "[Mirko]";
		mes "Ah... Come to think of it.";
		mes "You said you saw fakes the last time you went in?";
		next;
		mes "[Mirko]";
		mes "Did you see the real thing this time?";
		mes "So what did it look like?";
		mes "Is that what Briashen said?";
		next;
		mes "== The Khahris that Briashen was looking at, only looked like an ant. ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		next;
		mes "[Yolanda]";
		mes "Was it a different face?";
		next;
		select( "She looks just like Briashen" );
		mes "[" + strcharinfo(0) + "]";
		mes "Looks exactly like Briashen";
		mes "It looked real. I almost fooled myself.";
		mes "They were like twins";
		next;
		mes "[Briashen]";
		mes "Really?";
		next;
		mes "[Mirko]";
		mes "Looks like I really can't remember now.";
		mes "It's weird to the left and right, over there.";
		mes "May I continue exploring?";
		next;
		mes "[Gona]";
		mes "Don't worry about that.";
		mes "Adventurer's flair... Whoops!";
		next;
		mes "[Mirko]";
		mes "Hey, you really should get some rest...";
		next;
		mes "[Briashen]";
		mes "..." + strcharinfo(0) + ".";
		mes "Thank you for saving me";
		next;
		mes "[Briashen]";
		mes "I'm not going to go in there anymore...";
		mes "About Khahris you told me about, I won't forget.";
		npctalk "Huh? Then how do I investigate over there?", "", bc_self;
		npctalk "Take Gona with you.", "Briashen#ant2", bc_self;
		npctalk "I don't like Mirko. I won't go.", "Gona#ant2", bc_self;
		next;
		mes "[Briashen]";
		mes "Khahris...";
		mes "Thank you for remembering";
		npctalk "Hey, adventurer! Then accept the request! Okay?", "", bc_self;
		ill_anthell = 10;
		completequest 8730;
		getexp 5260084,2000000;
		getexp 2104033,600000;
		getitem 25271,5;	// IllusionStone
		close;
	}
	mes "[Mirko]";
	mes "Would you like to go to the Garden of Perception?";
	mes "Or do you have a request to take on?";
	next;
	switch( select( "Enter the Garden of Awareness", "Geology Survey", "Source of Power", "Same thing", "Shared Memory", "Cancel" ) ) {
	case 1:
		mes "[Mirko]";
		mes "Be careful.";
		close2;
		warp "ant_d02_i",172,185;
		end;
	case 2:
		switch( checkquest(8732,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Mirko]";
			mes "It's fine today. I'll take care of it tomorrow.";
			close;
		case 2:
			erasequest 8732;
			break;
		}
		if (isbegin_quest(8731) == 0) {
			mes "[Mirko]";
			mes "Occasionally if you defeat " + getmonsterinfo("ILL_GIEARTH", MOB_NAME) + "";
			mes "you can get ^0000FF" + getitemname(1000504) + "^000000, can you collect about 20 of them?";
			next;
			if (select( "Accept", "Quit" ) == 2) {
				mes "[Mirko]";
				mes "I can't";
				mes "Today, I have no choice but to commission other adventurers.";
				close;
			}
			mes "[Mirko]";
			mes "Okay, wait.";
			setquest 8731;
			close;
		}
		if (countitem(1000504) < 20) {
			mes "[Mirko]";
			mes "Hunt " + getmonsterinfo("ILL_GIEARTH", MOB_NAME) + " from the Garden of Perception";
			mes "and collect 20 ^0000FF" + getitemname(1000504) + "^000000.";
			close;
		}
		delitem 1000504,20;	// Dry_Sand
		erasequest 8731;
		setquest 8732;
		mes "[Mirko]";
		mes "Good job!";
		mes "Then I'll take care of you tomorrow too.";
		getitem 25271,1;	// IllusionStone
		getexp 3181074,2404545;
		getexp 954322,721363;
		close;
	case 3:
		switch( checkquest(8734,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Mirko]";
			mes "It's fine today. I'll take care of it tomorrow.";
			close;
		case 2:
			erasequest 8734;
			break;
		}
		if (isbegin_quest(8733) == 0) {
			mes "[Mirko]";
			mes "Sometimes if you defeat " + getmonsterinfo("ILL_ANDRE", MOB_NAME) + " or " + getmonsterinfo("ILL_DENIRO", MOB_NAME) + " who haunt the Garden of Perception";
			mes "you can get ^0000FF" + getitemname(1000505) + "^000000, can you collect about 20 of them?";
			next;
			if (select( "Accept", "Quit" ) == 2) {
				mes "[Mirko]";
				mes "I can't";
				mes "I have no choice but to ask other adventurers for work today.";
				close;
			}
			mes "[Mirko]";
			mes "Okay, wait.";
			setquest 8733;
			close;
		}
		if (countitem(1000505) < 20) {
			mes "[Mirko]";
			mes "Hunt " + getmonsterinfo("ILL_ANDRE", MOB_NAME) + " and " + getmonsterinfo("ILL_DENIRO", MOB_NAME) + " from the Garden of Perception";
			mes "and collect 20 ^0000FF" + getitemname(1000505) + "^000000.";
			close;
		}
		delitem 1000505,20;	// Opaque_Liquid
		erasequest 8733;
		setquest 8734;
		mes "[Mirko]";
		mes "Good job!";
		mes "Then I'll ask you again tomorrow.";
		getitem 25271,1;	// IllusionStone
		getexp 3151005,2395672;
		getexp 945301,718701;
		close;
	case 4:
		switch( checkquest(8736,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Mirko]";
			mes "It's fine today. I'll take care of it tomorrow.";
			close;
		case 2:
			erasequest 8736;
			break;
		}
		switch( checkquest(8735,HUNTING) ) {
		case -1:
			mes "[Mirko]";
			mes "As you know, memory and perception are distorted in there. You seem to be fine, but";
			mes "it seems to be alleviated just by the reduction of the monsters.";
			next;
			mes "[Mirko]";
			mes "Can you kill ^0000FF10 " + getmonsterinfo("ILL_VITATA", MOB_NAME) + "^000000,";
			mes "^0000FF10 " + getmonsterinfo("ILL_SOLDIER_ANDR", MOB_NAME) + "^000000,";
			mes "^0000FF10 " + getmonsterinfo("ILL_PIERE", MOB_NAME) + "^000000";
			mes "and come back?";
			next;
			if (select( "Accept", "Quit" ) == 2) {
				mes "[Mirko]";
				mes "I can't";
				mes "Today, I have no choice but to commission other adventurers.";
				close;
			}
			mes "[Mirko]";
			mes "Okay, wait.";
			setquest 8735;
			close;
		case 0:
		case 1:
			mes "[Mirko]";
			mes "Can you kill ^0000FF10 " + getmonsterinfo("ILL_VITATA", MOB_NAME) + "^000000,";
			mes "^0000FF10 " + getmonsterinfo("ILL_SOLDIER_ANDR", MOB_NAME) + "^000000,";
			mes "^0000FF10 " + getmonsterinfo("ILL_PIERE", MOB_NAME) + "^000000";
			mes "and come back?";
			close;
		case 2:
			mes "[Mirko]";
			mes "Oh, another adventurer just went over there. I heard that the dizziness has lessened.";
			mes "Human curiosity is unavoidable. Me too.";
			mes "Then again, I'll take care of you tomorrow.";
			erasequest 8735;
			setquest 8736;
			getitem 25271,1;	// IllusionStone
			getexp 6483984,4821986;
			getexp 1945195,1446595;
			close;
		}
		end;
	case 5:
		switch( checkquest(8738,PLAYTIME) ) {
		case -1:
			break;
		case 0:
		case 1:
			mes "[Mirko]";
			mes "It's fine today. I'll take care of it tomorrow.";
			close;
		case 2:
			erasequest 8738;
			break;
		}
		if (isbegin_quest(8737) == 0) {
			mes "[Mirko]";
			mes "I picked up an unknown shell the other day. It seems that all the monsters in the Garden of Perception, like ants, have them.";
			mes "Can you collect about 20 ^0000FF" + getitemname(1000506) + "^000000?";
			next;
			if (select( "Accept", "Quit" ) == 2) {
				mes "[Mirko]";
				mes "I can't";
				mes "Today, I have no choice but to commission other adventurers.";
				close;
			}
			mes "[Mirko]";
			mes "Okay, wait.";
			setquest 8737;
			close;
		}
		if (countitem(1000506) < 20) {
			mes "[Mirko]";
			mes "Hunt the monsters from the Garden of Perception";
			mes "and collect 20 ^0000FF" + getitemname(1000506) + "^000000.";
			close;
		}
		delitem 1000506,20;	// Shell_Of_Cognition
		erasequest 8737;
		setquest 8738;
		mes "[Mirko]";
		mes "Good job!";
		mes "Then I'll take care of you tomorrow too.";
		getitem 25271,1;	// IllusionStone
		getexp 3113916,2347020;
		getexp 934174,704106;
		close;
	case 6:
		end;
	}
	end;

OnInit:
	// main quest
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_anthell == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8719) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8720) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8722) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8728) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8730) == 1" );

	// daily
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8730) == 2 && isbegin_quest(8731) == 1 && countitem(1000504) >= 20" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8730) == 2 && isbegin_quest(8733) == 1 && countitem(1000505) >= 20" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8730) == 2 && isbegin_quest(8737) == 1 && countitem(1000506) >= 20" );
	questinfo( QTYPE_QUEST2, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8735,HUNTING) == 2" );

	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8732,PLAYTIME) == -1 && isbegin_quest(8731) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8732,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8734,PLAYTIME) == -1 && isbegin_quest(8733) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8734,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8736,PLAYTIME) == -1 && checkquest(8735,HUNTING) == -1" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8736,PLAYTIME) == 2" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8738,PLAYTIME) == -1 && isbegin_quest(8737) == 0" );
	questinfo( QTYPE_DAILYQUEST, QMARK_YELLOW, "isbegin_quest(8730) == 2 && checkquest(8738,PLAYTIME) == 2" );
	end;
}

anthell02,170,185,0	script	#il_ant002	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell >= 5)
		cloakoffnpcself( "Gona#ant2" );
	if (ill_anthell >= 8)
		cloakoffnpcself( "Julio#ant2" );
	if (ill_anthell >= 9)
		cloakoffnpcself( "Briashen#ant2" );
	end;
}
anthell02,168,171,0	duplicate(#il_ant002)	#il_ant003	HIDDEN_WARP_NPC,3,3

// anthell02,177,181,3	script	Gona#ant2	MINSTREL,{
anthell02,177,181,3	script(CLOAKED)	Gona#ant2	HIDDEN_NPC,{
	if (ill_anthell < 5)
		end;
	if (ill_anthell == 5) {
		mes "[Gona]";
		mes "What the hell is going on in there?";
		npctalk "Mirko: Don't go if you're going to be that angry...", "Mirko#1F", bc_self;
		close;
	}
	if (ill_anthell == 6) {
		mes "[Gona]";
		mes "Oops...";
		close;
	}
	if (ill_anthell == 7) {
		mes "[Gona]";
		mes "Really, that's... not a sane place to go";
		mes "You go in and out easily.";
		close;
	}
	if (ill_anthell == 8) {
		mes "[Gona]";
		mes "Oops...";
		close;
	}
	if (ill_anthell == 9) {
		mes "[Gona]";
		mes "I almost got in trouble...";
		close;
	}
	mes "[Gona]";
	mes "CI....";
	mes "What is it? But that Mirko guy is good at organizing things. He's a good client.";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4068;
	setunitdata .@npc_id, UNPC_SEX, SEX_MALE;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 5;
	end;
}

// anthell02,174,177,5	script	Julio#ant2	SURA,{
anthell02,174,177,5	script(CLOAKED)	Julio#ant2	HIDDEN_NPC,{
	mes "[Julio]";
	mes "Don't talk to me...";
	mes "Don't even pat me on the back...";
	mes "I want you to go over there...";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4070;
	setunitdata .@npc_id, UNPC_SEX, SEX_MALE;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 12;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 3;
	setunitdata .@npc_id, UNPC_HEADMIDDLE, 65;
	end;
}

// anthell02,167,186,6	script	Briashen#ant2	RANGER,{
anthell02,167,186,6	script(CLOAKED)	Briashen#ant2	HIDDEN_NPC,{
	mes "[Briashen]";
	mes "...";
	mes "Thanks...";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;
	end;
}


// unknown effect
// ant_d02_i,170,185,0	script	#il_ant001	HIDDEN_WARP_NPC,3,3
// ant_d02_i,173,94,0	script	#il_tw9	HIDDEN_WARP_NPC,5,5

// ant_d02_i,177,181,5	script	Gona#iltw	MINSTREL,{
ant_d02_i,177,181,5	script	Gona#iltw	HIDDEN_NPC,{
	mes "[Gona]";
	mes "Something's weird here";
	mes "... no, isn't that weird?";
	mes "How are you? Are you weird?";
	mes "Oh, I want to go home...";
	mes "Where is your house?";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4068;
	setunitdata .@npc_id, UNPC_SEX, SEX_MALE;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 5;
	end;
}

// ant_d02_i,171,179,3	script	Mick#iltw	WARLOCK,{
ant_d02_i,171,179,3	script	Mick#iltw	HIDDEN_NPC,{
	if (ill_anthell < 3)
		end;
	if (ill_anthell == 3 || ill_anthell == 5 || ill_anthell == 8) {
		mes "[Mick]";
		mes "Am I... a person?";
		mes "Could it be an ant?";
		mes "isn't it?";
		mes "Is it a person?";
		close;
	}
	if (ill_anthell == 4 || ill_anthell == 6) {
		mes "[Mick]";
		mes "It's strange. In my head, I know I'm a human, but when I see an ant passing by there, I wonder if I'm an ant";
		mes "What happened?";
		close;
	}
	mes "[Mick]";
	mes "Are you... a human?";
	close;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4055;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 28;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 2;
	end;
}

ant_d02_i,170,190,0	warp2	antd02i_anthell02	1,1,anthell02,172,185



ant_d02_i,44,258,0	script	#il_tw1	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 3 || ill_anthell == 5 || ill_anthell == 6)
		cloakoffnpcself( "Briashen#part1" );
	if (ill_anthell == 6) {
		cloakoffnpcself( "Rwella#part2" );
		cloakoffnpcself( "Khahris#part3" );
	}
	end;
}
// Note: unknown effect, but let's use it
ant_d02_i,65,246,0	duplicate(#il_tw1)	#ep18w02_1	HIDDEN_WARP_NPC,3,3

// ant_d02_i,44,258,6	script	Briashen#part1	RANGER,{
ant_d02_i,44,258,6	script(CLOAKED)	Briashen#part1	HIDDEN_NPC,{
	if (ill_anthell < 3)
		end;
	if (ill_anthell == 3) {
		mes "[Ranger looking fine]";
		mes "Uh, hello";
		mes "Didn't you see the injured ranger?";
		next;
		mes "[Ranger looking fine]";
		mes "Are you looking for Khahris too?";
		next;
		if (select( "That's not the requested name", "Right" ) == 2) {
			mes "[Ranger looking fine]";
			mes "Yeah? Thanks.";
			mes "Where the heck are you...";
			mes "I can't even scream.";
			close;
		}
		mes "[" + strcharinfo(0) + "]";
		mes "A man named Briashen...";
		next;
		mes "[Ranger looking fine]";
		mes "What?";
		next;
		mes "[Ranger looking fine]";
		mes "I'm not hurt!";
		mes "Who is it?";
		next;
		select( "Mirko and Yolanda" );
		mes "[" + strcharinfo(0) + "]";
		mes "Mirko and Yolanda asked to bring Briashen out after she went in alone injured.";
		next;
		mes "[Briashen]";
		mes "You're right that I'm Briashen, but were you hurt? When?";
		next;
		mes "== I don't think you're lying. ==";
		mes "== It looks normal on the outside, but could it be the effect of cognitive impairment that I have heard about? ==";
		next;
		mes "[Briashen]";
		mes "That's weird. As you can see I'm fine. I'm looking for my friend who broke up here";
		mes "His name is Khahris... he looks exactly like me";
		next;
		mes "[Briashen]";
		mes "You can't go back until you find him";
		mes "Tell Mirko that. Then see you later";
		ill_anthell = 4;
		erasequest 8721;
		setquest 8722;
		close2;
		cloakonnpcself();
		end;
	}
	if (ill_anthell == 4) {
		cloakonnpcself();
		mes "[Briashen]";
		mes "Have you gone yet?";
		mes "It's dangerous here. I'll find Khahris and go back soon.";
		mes "Then see you later";
		close;
	}
	if (ill_anthell == 5) {
		mes "[Briashen]";
		mes "Oh, I see you again";
		mes "Have you met Mirko?";
		mes "What did you say?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "He said he wanted to help you.";
		next;
		mes "[Briashen]";
		mes "Ah~ You look pretty strong. Thank goodness.";
		mes "Still, Mirko was too weak to come in here to search, so it was pointless to worry about.";
		next;
		select( "I don't think you said anything", "That's why you were hired" );	// note: the selection doesn't change the dialog
		mes "[Briashen]";
		mes "By the way, there are times when people have circumstances.";
		mes "I'm in a hurry right now! Khahris might be in danger.";
		next;
		mes "[Briashen]";
		mes "Did you hear that?";
		mes "That's why Mirko asked me to help too.";
		next;
		select( "Maybe..." );
		mes "[Briashen]";
		mes "Are you sure what?";
		next;
		select( "A man named Khahris, is that real?" );
		mes "[" + strcharinfo(0) + "]";
		mes "A man named Khahris, is he real?";
		next;
		mes "[Briashen]";
		mes "Are you asking the same question?";
		mes "Seriously. We met here a few times, together with ants...";
		mes "...got it?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "?";
		next;
		mes "[Briashen]";
		mes "Anyway, we met here. We were amazed at how much alike we are.";
		mes "But a few days ago...";
		mes "When we were together, a large Maya suddenly appeared.";
		next;
		mes "[Briashen]";
		mes "I'm seriously hurt...";
		mes "How are you?";
		mes "Who was hurt then?";
		next;
		mes "[Briashen]";
		mes "Am I hurt?";
		next;
		mes "== This time, as Mirko said, Briaschen has a bad complexion. ==";
		mes "== The bleeding should have stopped, but excessive movement will open the wound. ==";
		next;
		mes "== But it's not the posture of someone who's been hurt somewhere. ==";
		mes "== Perception and reality are twisted and overworked. ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "It's dangerous at this rate. You're sick, and you need to get out of here.";
		next;
		mes "[Briashen]";
		mes "No, no. It's not me, it's Khahris";
		mes "Khahris will be waiting for me... I have to go find it.";
		next;
		mes "[Briashen]";
		mes "Khahris...";
		next;
		mes "== Briashen sat down. ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Let's go outside too.";
		next;
		mes "[Briashen]";
		mes "No. I've never seen an ant here... except when I'm with Mirko.";
		mes "With Khahris... not once except for the last time Maya showed up.";
		mes "Let's hunt together...";
		next;
		mes "[Briashen]";
		mes "What did Khahris... do with me?";
		next;
		mes "[Briashen]";
		mes "Save that friend.";
		mes "As long as Maya doesn't come, I'm fine.";
		ill_anthell = 6;
		erasequest 8723;
		setquest 8724;
		cloakoffnpcself( "Rwella#part2" );
		cloakoffnpcself( "Khahris#part3" );
		cloakoffnpcself( "Khahris#part4" );
		next;
		mes "== Briashen, who was searching for memories, was confused. ==";
		mes "== I need to explore the dungeon first. ==";
		close;
	}
	if (ill_anthell == 6) {
		mes "[Briashen]";
		mes "Save that friend.";
		mes "As long as Maya doesn't come, I'm fine...";
		close;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	// The parameters are gender, hair color, hair style, accessory 1-3 and robe
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8721) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8723) == 1" );
	end;
}


ant_d02_i,86,189,0	script	#il_tw2	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 6 && isbegin_quest(8725) == 0)
		cloakoffnpcself( "Rwella#part2" );
	end;
}

// ant_d02_i,86,189,2	script	Rwella#part2	RANGER,{
ant_d02_i,86,189,2	script(CLOAKED)	Rwella#part2	HIDDEN_NPC,{
	if (ill_anthell == 6 && isbegin_quest(8725) == 0) {
		mes "[Rwella]";
		mes "What? What's your name?";
		mes "Shouldn't you say that yourself first?";
		mes "Ah... yes. " + strcharinfo(0) + ".";
		mes "I'm Rwella";
		next;
		mes "[Rwella]";
		mes "Didn't you see someone named Briashen around here?";
		next;
		mes "== The name of the person Briashen is looking for is... ==";
		next;
		mes "[Rwella]";
		mes "Why are you standing there blankly?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Do you know the name Khahris?";
		next;
		mes "[Rwella]";
		mes "No, I don't know";
		mes "That's kind of rude, answer my question too. Have you seen Briashen?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "The name Briashen was looking for was Khahris...";
		next;
		mes "[Rwella]";
		mes "...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "?";
		next;
		mes "== Waited for a while, but Rwella didn't respond. ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Rwella?";
		next;
		mes "[Rwella]";
		mes "I don't think that's my name.";
		next;
		mes "[Rwella]";
		mes "But... I don't think it's Khahris either.";
		mes "I think you'll find out when you meet Briashen.";
		mes "Where's Briashen?";
		next;
		mes "[Rwella]";
		mes "Briashen...";
		setquest 8725;
		if (isbegin_quest(8725) != 1 || isbegin_quest(8726) != 1 || isbegin_quest(8727) != 1) {
			specialeffect EF_DEFENDER;
			cloakonnpcself();
		}
		else {
			ill_anthell = 7;
			erasequest 8724;
			erasequest 8725;
			erasequest 8726;
			erasequest 8727;
			setquest 8728;
			cloakonnpcself();
			cloakoffnpcself( "Rwella#part5" );
			specialeffect EF_DEFENDER, AREA, "Rwella#part5";
			mes "...I... I...!";
			mes "I...";
			mes "I thought...";
			close2;
			warp "anthell02",172,185;
			end;
		}
		next;
		mes "...";
		next;
		mes "== Welcome...? ==";
		next;
		mes "== Where is the real Khahris? ==";
		close;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8724) == 1 && isbegin_quest(8725) == 0" );
	end;
}

ant_d02_i,86,189,2	duplicate(dummy_cloaked_npc)	Rwella#part5	ILL_VITATA

ant_d02_i,258,42,0	script	#il_tw3	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 6 && isbegin_quest(8726) == 0)
		cloakoffnpcself( "Khahris#part3" );
	end;
}

// ant_d02_i,258,42,2	script	Khahris#part3	RANGER,{
ant_d02_i,258,42,2	script(CLOAKED)	Khahris#part3	HIDDEN_NPC,{
	if (ill_anthell == 6 && isbegin_quest(8726) == 0) {
		mes "[Khahris]";
		mes "What? What's your name?";
		mes "Shouldn't you say that yourself first?";
		mes "Ah... yes." + strcharinfo(0) + ".";
		mes "I am Khahris.";
		next;
		mes "[Khahris]";
		mes "Didn't you see a ranger named Briashen around here?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I see. I'm looking for you...";
		next;
		mes "[Khahris]";
		mes "Oh, thank God! Where are you?";
		mes "I came back here to look for him... but he was attacked by Maya and he was taken away.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "??";
		next;
		mes "[Khahris]";
		mes "What's wrong? Is Briashen all right?";
		next;
		mes "== According to Bryashen, it was Khahris who was taken by Maya. ==";
		mes "== Was it actually backwards? ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Yes. I'm fine...";
		next;
		mes "== But according to Mirko, Mirko has never met Khahris. ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Do you know Mirko?";
		next;
		mes "[Khahris]";
		mes "Okay, that's my employer. I'm sorry I did something.";
		next;
		select( "Who are you?" );
		mes "[Khahris]";
		mes "What do you mean by that?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Mirko said she never met you.";
		next;
		mes "== I waited for a while, but there is no response from the self-proclaimed Khahris. ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Khahris?";
		next;
		mes "[Khahris]";
		mes "Am I... Khahris?";
		next;
		mes "[Khahris]";
		mes "I think you'll find out when you meet Briashen.";
		mes "Where's Briashen?";
		next;
		mes "[Khahris]";
		mes "Briashen...";
		setquest 8726;
		if (isbegin_quest(8725) != 1 || isbegin_quest(8726) != 1 || isbegin_quest(8727) != 1) {
			specialeffect EF_DEFENDER;
			cloakonnpcself();
		}
		else {
			ill_anthell = 7;
			erasequest 8724;
			erasequest 8725;
			erasequest 8726;
			erasequest 8727;
			setquest 8728;
			cloakonnpcself();
			cloakoffnpcself( "Khahris#part6" );
			specialeffect EF_DEFENDER, AREA, "Khahris#part6";
			mes "...I... I...!";
			mes "I...";
			mes "I thought...";
			close2;
			warp "anthell02",172,185;
			end;
		}
		next;
		mes "...";
		next;
		mes "== Welcome...? ==";
		next;
		mes "== Where is the real Khahris? ==";
		close;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8724) == 1 && isbegin_quest(8726) == 0" );
	end;
}
ant_d02_i,258,42,2	duplicate(dummy_cloaked_npc)	Khahris#part6	ILL_VITATA


ant_d02_i,259,147,0	script	#il_tw4	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 6 && isbegin_quest(8727) == 0)
		cloakoffnpcself( "Khahris#part4" );
	end;
}

// ant_d02_i,259,147,7	script	Khahris#part4	GUNSLINGER,{
ant_d02_i,259,147,7	script(CLOAKED)	Khahris#part4	HIDDEN_NPC,{
	if (ill_anthell == 6 && isbegin_quest(8727) == 0) {
		mes "[Khahris]";
		mes "What? What's your name?";
		mes "Shouldn't you say that yourself first?";
		mes "Ah... yes. " + strcharinfo(0) + ".";
		mes "I am Khahris.";
		next;
		mes "== By the way, the Khahris that Briashen was looking for is not a gunslinger. ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Khahris...";
		next;
		mes "[Khahris]";
		mes "Yeah. I suddenly ran into a place like this and asked what your name was. You have a very strong heart. What is it?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "...No, I was asked to find Khahris.";
		next;
		mes "[Khahris]";
		mes "What? To whom? Maybe Briashen?";
		mes "Is Briashen all right?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Yes. I'm fine...";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		next;
		select( "Who are you?" );
		mes "[Khahris]";
		mes "Huh? What are you talking about, I'm Khahris the adventurer. I told you before.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Briashen asked me to find someone who looked just like her and was a ranger.";
		mes "And why are you doing this here without coming out if you're safe?";
		next;
		mes "== I waited for an answer for a while, but there is no response from the self-proclaimed Khahris. ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Khahris?";
		next;
		mes "[Khahris]";
		mes "Am I... Khahris?";
		next;
		mes "[Khahris]";
		mes "I think you'll find out when you meet Briashen.";
		mes "Where's Briashen?";
		next;
		mes "== Khahris gripped his forearm with great force. ==";
		mes "== It hurts enough to scream! ==";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Evil! It hurts!";
		next;
		mes "[Khahris]";
		mes "Take me to Briashen's!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Leave this!";
		next;
		mes "[Khahris]";
		mes "Who am I, Briashen...?";
		mes "Who am I...?";
		setquest 8727;
		if (isbegin_quest(8725) != 1 || isbegin_quest(8726) != 1 || isbegin_quest(8727) != 1) {
			specialeffect EF_DEFENDER;
			cloakonnpcself();
		}
		else {
			ill_anthell = 7;
			erasequest 8724;
			erasequest 8725;
			erasequest 8726;
			erasequest 8727;
			setquest 8728;
			cloakonnpcself();
			cloakoffnpcself( "Khahris#part7" );
			specialeffect EF_DEFENDER, AREA, "Khahris#part7";
			mes "...I... I...!";
			mes "I...";
			mes "I thought...";
			close2;
			warp "anthell02",172,185;
			end;
		}
		next;
		mes "...";
		next;
		mes "== Welcome...? ==";
		next;
		mes "== Where is the real Khahris? ==";
		close;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 24;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 3;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8724) == 1 && isbegin_quest(8727) == 0" );
	end;
}
ant_d02_i,259,147,7	duplicate(dummy_cloaked_npc)	Khahris#part7	ILL_VITATA



ant_d02_i,130,73,0	script	#il_tw5	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_anthell == 8) {
		cloakoffnpcself( "Briashen#part8" );
		cloakoffnpcself( "Vitata#part9" );
		end;
	}
	end;
}

// ant_d02_i,130,73,2	script	Briashen#part8	RANGER,{
ant_d02_i,130,73,2	script(CLOAKED)	Briashen#part8	HIDDEN_NPC,{
	if (ill_anthell == 8) {
		mes "[" + strcharinfo(0) + "]";
		mes "!";
		unittalk getcharid(3), "" + strcharinfo(0) + " : !", bc_self;
		next;
		select( "Is that Briashen real?" );
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		unittalk getcharid(3), "" + strcharinfo(0) + " : ...", bc_self;
		next;
		select( "That Vitata is Khahris" );
		mes "[" + strcharinfo(0) + "]";
		mes "...";
		unittalk getcharid(3), "" + strcharinfo(0) + " : ...", bc_self;
		next;
		select( "How can I know that" );
		mes "[" + strcharinfo(0) + "]";
		mes "Khahris!";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Khahris!", bc_self;
		next;
		mes "== Vitata turned this way. ==";
		next;
		mes "[Briashen]";
		mes "...";
		next;
		mes "[Briashen]";
		mes "" + strcharinfo(0) + ".";
		mes "I can't remember what Khahris looked like...";
		next;
		// specialeffect 1313;	// unsupported effect id?
		mes "[" + strcharinfo(0) + "]";
		mes "Briashen, that's dangerous!";
		next;
		mes "[Briashen]";
		mes "Ugh!";
		cloakonnpcself( "Vitata#part9" );
		cloakoffnpcself( "Quiet Maya#part10" );
		cloakoffnpcself( "Vitata#part11" );
		specialeffect EF_FREEZE, AREA, "Quiet Maya#part10";
		// specialeffect 1314, AREA, "Vitata#part11";	// unsupported effect id?
		next;
		mes "[Briashen]";
		mes "Khahris...!?";
		next;
		mes "[Khahris]";
		mes "..., ...";
		npctalk "Briashen. I'm sorry. I don't think we can go on adventures together anymore.", "Vitata#part11", bc_self;
		next;
		mes "[Briashen]";
		mes "What?? No!";
		mes "Khahris!!";
		next;
		mes "== The words of Khahris can be heard from afar as if under water... ==";
		next;
		mes "[Khahris]";
		mes "......, ....";
		npctalk "I can't go out anyway. Don't be sad. I wish I could be a part of your heart. It was fun.", "Vitata#part11", bc_self;
		next;
		mes "[Briashen]";
		mes "Khahris?";
		next;
		mes "[Khahris]";
		mes "...., ...";
		npctalk "Adventurer. I'm just part of the perception error built in when Briaschen came in here.", "Vitata#part11", bc_self;
		next;
		mes "[Briashen]";
		mes "What are you talking about?";
		next;
		mes "[Khahris]";
		mes "..., .....";
		npctalk "I would have disappeared anyway if Briashen didn't come, but thank you for coming to find me.", "Vitata#part11", bc_self;
		next;
		mes "[Khahris]";
		mes "...., .., ...";
		next;
		mes "== I can't hear Khahris anymore. ==";
		mes "== Maya is moving her antennae to hear a story. ==";
		next;
		mes "[Briashen]";
		mes "Khahris!";
		next;
		specialeffect EF_CLOUD4, AREA, "Vitata#part11";
		cloakonnpcself( "Vitata#part11" );
		cloakonnpcself( "Quiet Maya#part10" );
		mes "== Maya and Khahris melted into darkness and disappeared. ==";
		ill_anthell = 9;
		erasequest 8729;
		setquest 8730;
		close2;
		warp "anthell02",172,185;
		end;
	}
	end;

OnInit:
	.@npc_id = getnpcid(0);
	setunitdata .@npc_id, UNPC_CLASS, 4056;
	setunitdata .@npc_id, UNPC_CLOTHCOLOR, 1;
	setunitdata .@npc_id, UNPC_HAIRSTYLE, 13;
	setunitdata .@npc_id, UNPC_HAIRCOLOR, 7;
	setunitdata .@npc_id, UNPC_HEADTOP, 1523;

	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(8729) == 1" );
	end;
}

ant_d02_i,125,73,6	script(CLOAKED)	Vitata#part9	ILL_VITATA,{
	npctalk "...", "", bc_self;
	end;
}

ant_d02_i,128,73,6	duplicate(dummy_cloaked_npc)	Quiet Maya#part10	ILL_MAYA
ant_d02_i,129,73,2	duplicate(dummy_cloaked_npc)	Vitata#part11	ILL_VITATA


//============================================================
//= Illusion of Teddy Bear
//============================================================

ein_d02_i,161,189,3	script	Exit#IBTin	4_ENERGY_BLUE,{
	warp "ein_dun01",189,80;
	end;
}

einbroch,149,242,5	script	Coughing young man#ITB	4_M_NFMAN,3,3,{
	if (BaseLevel < 150) {
		mes "[Coughing young man]";
		mes "The time has passed...";
		mes "Why haven't you come back yet...";
		mes "Cough Cough!!";
		next;
		mes "^ff0000 You can start this quest from level 150.^000000";
		close;
	}
	if (ill_teddy == 0) {
		mes "[Coughing young man]";
		mes "The time has passed...";
		mes "Why haven't you come back yet...";
		mes "Cough Cough!!";
		next;
		mes "[Coughing young man]";
		mes "Cough...cough...cough...";
		mes "Ha ha ha... did something happen?";
		mes "If I don't go and check it myself...";
		mes "Cough cough";
		mes "Cough...lucky...";
		next;
		mes "-plop-";
		next;
		if (select( "Help him", "Ignore" ) == 2) {
			mes "[Coughing young man]";
			mes "...cough...";
			mes "Cough cough... cough";
			close;
		}
		mes "[Coughing young man]";
		mes "...cough...";
		mes "Thank you.";
		mes "Cough cough... cough";
		next;
		select( "You'd better take a break" );
		mes "[Coughing young man]";
		mes "Cough...";
		mes "That's true, but... Cough... My friend who went to the mine for work hasn't come back yet... Cough.";
		next;
		mes "[Coughing young man]";
		mes "A few days ago, as soon as work was over... he left... he said he would come back...";
		mes "He hasn't come back...cough...yet.";
		next;
		mes "[Coughing young man]";
		mes "Cough...cough cough...cough";
		mes "I've talked to the guards, but...cough...cough...they didn't take it seriously...";
		next;
		mes "[Coughing young man]";
		mes "^ff0000Steven^000000 is not that kind of guy...Cough cough";
		mes "If he hasn't contacted me yet, something must have happened.";
		next;
		mes "[Coughing young man]";
		mes "It seemed like he was going to ^ff0000the first floor of the mine in Einbech^000000.";
		mes "If you look around, maybe you'll find a clue...even if it's just a small thing?";
		ill_teddy = 1;
		setquest 11556;
		close;
	}
	if (ill_teddy == 1) {
		mes "[Coughing young man]";
		mes "A few days ago, as soon as work was over... he left... he said he would come back...";
		mes "He hasn't come back...cough...yet.";
		next;
		mes "[Coughing young man]";
		mes "Cough...cough cough...cough";
		mes "I've talked to the guards, but...cough...cough...they didn't take it seriously...";
		next;
		mes "[Coughing young man]";
		mes "^ff0000Steven^000000 is not that kind of guy...Cough cough";
		mes "If he hasn't contacted me yet, something must have happened.";
		next;
		mes "[Coughing young man]";
		mes "It seemed like he was going to ^ff0000the first floor of the mine in Einbech^000000.";
		mes "If you look around, maybe you'll find a clue...even if it's just a small thing?";
		close;
	}
	if (ill_teddy < 5) {
		mes "[Coughing young man]";
		mes "Ah! Cough Cough!";
		mes "You're back!";
		mes "Steven is...cough";
		mes "Did you find him?";
		close;
	}
	if (ill_teddy == 5) {
		mes "[Acid]";
		mes "Ah! Cough Cough!";
		mes "You're back!";
		mes "Steven is...cough";
		mes "Did you find him?";
		next;
		select( "Pass the money" );
		mes "[Acid]";
		mes "....";
		mes "As expected...cough cough...what happened?";
		next;
		mes "[Acid]";
		mes "There's no way they just sent money like this when nothing happened.";
		next;
		mes "[Acid]";
		mes "I ..cough..must go myself...cough..cough..";
		mes "Maybe it doesn't help much, but...cough";
		mes "My dearest friend...cough..may be in danger, but I can't stay still!...cluck";
		next;
		mes "[Acid]";
		mes "Cough cough..Adventurer..Cough..Take me with you!";
		mes "Please!";
		ill_teddy = 6;
		erasequest 11560;
		setquest 11561;
		close;
	}
	if (ill_teddy == 6) {
		mes "[Acid]";
		mes "I ..cough..must go myself...cough..cough..";
		mes "Maybe it doesn't help much, but...cough";
		mes "My dearest friend...cough..may be in danger, but I can't stay still!...cluck";
		next;
		mes "[Acid]";
		mes "Cough cough..Adventurer..Cough..Take me with you!";
		mes "Please!";
		close;
	}
	mes "[Acid]";
	mes "I've been in the mines for most of these days, so my cough seems to be getting better.";
	mes "My body has become healthy!";
	mes "The air here is worse than the mine... Cough";
	close;

OnTouch:
	if (BaseLevel >= 150 && ill_teddy == 0)
		npctalk "Coughing young man: Cough Cough!!", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 150 && ill_teddy == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11560) == 1" );
	end;
}

ein_dun01,198,79,3	script	Teddy Bear#ITB10	4_NASARIAN,{
	if (ill_teddy == 1) {
		mes "[Teddy Bear in line]";
		mes "Stand in line!";
		next;
		select( "Why are you standing here?" );
		mes "[Teddy Bear in line]";
		mes "What?";
		mes "Do you think I'd give such advanced information to a stranger I am seeing for the first time?";
		next;
		mes "[Teddy Bear in line]";
		mes "If you're that curious, stand behind me and wait for your turn!";
		next;
		mes "[Teddy Bear in line]";
		mes "Information isn't something you get for free.";
		mes "All the time and effort...";
		next;
		mes "[???????????]";
		mes "AAAAAAAAAA!!!!";
		mes "Let go!!!!";
		mes "You furry bastards!!!!";
		next;
		mes "- A man's scream is heard from the front of the line. Let's check the situation at the front. -";
		ill_teddy = 2;
		erasequest 11556;
		setquest 11557;
		close;
	}
	if (ill_teddy == 2) {
		mes "[Teddy Bear in line]";
		mes "Have you heard something strange?";
		next;
		mes "- A man's scream is heard from the front of the line. Let's check the situation at the front. -";
		close;
	}
	mes "[Teddy Bear in line]";
	mes "Stand in line!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11556) == 1" );
	end;
}

ein_dun01,189,84,7	script	Bear#3	4_NASARIAN,{
	mes "[Teddy Bear in line]";
	mes "Hey there!!! Don't cut in line!!!";
	close;
}

ein_dun01,189,82,7	duplicate(dummy_npc)	Bear#4	4_NASARIAN
ein_dun01,190,80,7	duplicate(dummy_npc)	Bear#5	4_NASARIAN
ein_dun01,191,80,5	duplicate(dummy_npc)	Bear#6	4_NASARIAN

ein_dun01,195,80,5	script	Resident#8	4_M_EINMAN2,{
	mes "[Resident]";
	mes "One day, everyone started queuing up here, so I stood here too.";
	mes "What's in front?";
	mes "Well? I'm just here because I'm curious...";
	close;
}

ein_dun01,196,80,1	script	Bear#9	4_NASARIAN,{
	mes "[Teddy Bear in line]";
	mes "Everyone stands in line for days waiting for their turn.";
	close;
}

ein_dun01,189,85,7	script	Teddy Bear#IBT1	4_NASARIAN,{
	if (ill_teddy < 2) {
		mes "[Teddy Bear in line]";
		mes "Whoops, it's my turn to go in soon.";
		close;
	}
	if (ill_teddy == 2) {
		mes "[Teddy Bear in line]";
		mes "Whh..what happened?";
		mes "I heard a scream when the man in front of me just entered.";
		next;
		select( "About the man." );
		mes "[Teddy Bear in line]";
		mes "What?";
		mes "I didn't even have time to look at that!";
		next;
		mes "[Teddy Bear in line]";
		mes "Flaw... Hehe... .";
		mes "I've been waiting in line for days, but suddenly I'm not interested anymore...";
		next;
		mes "[Teddy Bear in line]";
		mes "If you're really curious, I'll give you my position. Why don't you go in and check it out?";
		next;
		mes "[Teddy Bear in line]";
		mes "I...it's not because I'm scared!";
		mes "I just... I guess what is inside is boring for me now.";
		mes "Because I've lost interest?!";
		ill_teddy = 3;
		erasequest 11557;
		setquest 11558;
		close;
	}
	if (ill_teddy == 3) {
		mes "[Teddy Bear in line]";
		mes "Flaw... Hehe... .";
		mes "I've been waiting in line for days, but suddenly I'm not interested anymore...";
		next;
		mes "[Teddy Bear in line]";
		mes "If you're really curious, I'll give you my position. Why don't you go in and check it out?";
		next;
		mes "[Teddy Bear in line]";
		mes "I...it's not because I'm scared!";
		mes "I just... I guess what is inside is boring for me now.";
		mes "Because I've lost interest?!";
		close;
	}
	mes "[Teddy Bear in line]";
	mes "What?";
	mes "The guy in front has already ran away!";
	mes "Don't get confused!";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11557) == 1" );
	end;
}

ein_dun01,189,87,3	script	An entrance somewhere#IBTin	4_ENERGY_BLUE,{
	if (ill_teddy < 3) {
		mes "- Can't get in yet -";
		close;
	}
	warp "ein_d02_i",168,197;
	end;
}


ein_d02_i,170,193,5	script	Steven#IBT	4W_M_02,3,3,{
	if (checkweight(1201,3) == 0) {
		mes "- Wait a moment!!";
		mes "- You have too many items. -";
		mes "- You can't receive this. -";
		mes "- Lighten your weight and -";
		mes "- try again. -";
		close;
	}
	if (ill_teddy < 3)
		end;
	if (ill_teddy == 3) {
		mes "[Steven]";
		mes "Can't you let me go?!";
		mes "Let me go!";
		mes "This sucks!!!!";
		npctalk "Steven: Can't you let me go?!", "", bc_self;
		cloakoffnpcself( "White Teddy Bear#IBT" );
		cloakoffnpcself( "Teddy Bear#IBT" );
		next;
		mes "[Teddy Bear]";
		mes "Oops!";
		mes "Caught, I got caught!";
		mes "Let's run!!!!";
		npctalk "White Teddy Bear: Caught, I got caught!", "White Teddy Bear#IBT", bc_self;
		npctalk "Teddy Bear: Let's Run!!!!", "Teddy Bear#IBT", bc_self;
		ill_teddy = 4;
		erasequest 11558;
		setquest 11559;
		close2;
		cloakonnpcself( "White Teddy Bear#IBT" );
		cloakonnpcself( "Teddy Bear#IBT" );
		end;
	}
	if (ill_teddy == 4) {
		mes "[Steven]";
		mes "What...";
		mes "That's...";
		next;
		mes "[Steven]";
		mes "Hey!";
		mes "You there!";
		mes "Did you see that too?";
		mes "The Teddy Bear just...";
		next;
		select( "Tell him about the coughing young man." );
		mes "[Steven]";
		mes "Huh? The coughing young man in Einbroch asked you to find me?";
		mes "Is it Acid...";
		next;
		mes "[Steven]";
		mes "I told him I'd come back right away, but what the hell was the rumor about? There were a lot of people and monsters waiting in line.";
		next;
		mes "[Steven]";
		mes "So how was Acid?";
		mes "He couldn't sleep well because his cough got so bad.";
		next;
		mes "[Steven]";
		mes "I have to go back and send him to the hospital, but...";
		mes "If I'm not mistaken, that's...";
		next;
		mes "[Steven]";
		mes "Ugh...things got messy...";
		next;
		mes "[Steven]";
		mes "Hey.";
		mes "Do me a favor.";
		mes "He has to go to the hospital today and won't have enough money.";
		next;
		mes "[Steven]";
		mes "I think I need to do some work here.";
		mes "You go back and tell him that I'm all right.";
		mes "Give him this money too.";
		next;
		mes "[Steven]";
		mes "Please.";
		mes "When I go back... I don't have anything, but I'll give you something in return.";
		npctalk "Steven: Please.", "", bc_self;
		ill_teddy = 5;
		erasequest 11559;
		setquest 11560;
		close;
	}
	if (ill_teddy == 5) {
		mes "[Steven]";
		mes "Hey.";
		mes "Do me a favor.";
		mes "He has to go to the hospital today and won't have enough money.";
		next;
		mes "[Steven]";
		mes "I think I need to do some work here.";
		mes "You go back and tell him that I'm all right.";
		mes "Give him this money too.";
		next;
		mes "[Steven]";
		mes "Please.";
		mes "When I go back... I don't have anything, but I'll give you something in return.";
		npctalk "Steven: Please.", "", bc_self;
		close;
	}
	if (ill_teddy == 6) {
		mes "[Steven]";
		mes "Oh you are here?";
		mes "Did he go to the hospital?";
		next;
		mes "[Acid]";
		mes "Steven!";
		mes "Why make people so worried...";
		cloakoffnpcself( "Acid#IBT_inN01" );
		next;
		mes "[Steven]";
		mes "No... why are you here?";
		mes "Go to the hospital!";
		next;
		mes "[Acid]";
		mes "Do I have a hospital or a shop now?!";
		next;
		mes "[Steven]";
		mes "Ugh...";
		mes "Okay...okay!";
		mes "Be quiet for now!";
		mes "Can you hear something strange coming from the north?";
		npctalk "Steven: Ugh... nagging...", "", bc_self;
		ill_teddy = 7;
		erasequest 11561;
		setquest 11562;
		close2;
		cloakonnpcself( "Acid#IBT_inN01" );
		end;
	}
	if (ill_teddy == 7) {
		mes "[Steven]";
		mes "Ugh...";
		mes "Okay!";
		mes "Be quiet for now!";
		mes "Can you hear something strange coming from the north?";
		npctalk "Steven: Ugh... nagging...", "", bc_self;
		close;
	}
	if (ill_teddy == 8) {
		if (checkquest(11563,HUNTING) != 2 || checkquest(11564,HUNTING) != 2) {
			mes "[Steven]";
			mes "Too many of them.";
			mes "This is too dangerous.";
			mes "Let's clear things up and talk again.";
			close;
		}
		mes "[Steven]";
		mes "Whoa...";
		mes "Did you send them out?";
		next;
		mes "[Acid]";
		mes "Aren't those just Teddy Bears?";
		mes "Invading... they called themselves Nazarians, right?";
		cloakoffnpcself( "Acid#IBT_inN01" );
		next;
		mes "[Steven]";
		mes "What the hell is going on...";
		mes "I'm out of my mind...";
		next;
		select( "About Teddy Bear" );
		mes "[Acid]";
		mes "Steven brought it because he said he was looking for something salty to eat at home.";
		next;
		mes "[Acid]";
		mes "The pay is so good compared to the job, and the delivery place is also a mine, so it was a bit suspicious...";
		next;
		mes "[Acid]";
		mes "I've been told that idiot is excited.";
		next;
		mes "[Steven]";
		mes "What an idiot!";
		mes "Thanks to you, I get hospital bills and your cough...";
		mes "Oh... Come to think of it, you don't cough anymore, do you?";
		npctalk "Steven: What an idiot!", "", bc_self;
		next;
		mes "[Acid]";
		mes "Uh... is that so?";
		mes "Come to think of it, I feel like I can breathe easier!";
		next;
		mes "[Steven]";
		mes "No matter how many times I went to the hospital, there was no improvement...";
		mes "Maybe it was just the bad air!";
		npctalk "Steven: Air worse than in the mine...", "", bc_self;
		next;
		mes "[Acid]";
		mes "No, that's not important right now...";
		mes "The doll we made is alive and moving!";
		mes "They even tried to kidnap you!";
		next;
		mes "[Steven]";
		mes "Kidnapped... Come to think of it, I helped a man who was being chased by a terrific Teddy Bear on the way back.";
		next;
		mes "[Steven]";
		mes "...I'm not the only one brought here, am I?";
		mes "I guess I'll have to stay here and watch the situation.";
		mes "Acid! You can go back to the village for now.";
		next;
		mes "[Steven]";
		mes "Thank you for helping me too.";
		mes "I can't give you much, but I'll give you the rare ore I found earlier.";
		mes "It might come in handy somewhere!";
		ill_teddy = 9;
		erasequest 11563;
		erasequest 11564;
		getitem 25271,5; // IllusionStone
		getexp 3500000,2500000;
		close2;
		cloakonnpcself( "Acid#IBT_inN01" );
		end;
	}

	// daily
	switch( checkquest(11566,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Steven]";
		mes "Get some rest";
		mes "If you overdo it, you'll only ruin your health.";
		close;
	case 2:
		erasequest 11566;
		break;
	}
	switch( checkquest(11565,HUNTING) ) {
	case -1:
		mes "[Steven]";
		mes "Ugh...";
		mes "Where do these guys keep popping up?";
		next;
		mes "[Steven]";
		mes "If you're familiar with combat, puppeteers who aren't familiar with combat won't find it easy to get out of here.";
		next;
		mes "[Steven]";
		mes "For now, I'm also taking care of it, but I'm not good enough alone.";
		mes "If you're not busy right now, help me defeat " + getmonsterinfo("ILL_PITMAN", MOB_NAME) + ", " + getmonsterinfo("ILL_MINERAL", MOB_NAME) + ", and " + getmonsterinfo("ILL_OBSIDIAN", MOB_NAME) + ".";
		mes "I think I'll be able to breathe a little more if I catch 10 of them.";
		next;
		if (select( "Accept", "Quit" ) == 2) {
			mes "[Steven]";
			mes "Okay...";
			close;
		}
		mes "[Steven]";
		mes "Then please help me defeat";
		mes "10 " + getmonsterinfo("ILL_PITMAN", MOB_NAME) + ", " + getmonsterinfo("ILL_MINERAL", MOB_NAME) + ", and " + getmonsterinfo("ILL_OBSIDIAN", MOB_NAME) + "!";
		setquest 11565;
		close;
	case 0:
	case 1:
		mes "[Steven]";
		mes "How are you?";
		mes "How are things going with " + getmonsterinfo("ILL_PITMAN", MOB_NAME) + ", " + getmonsterinfo("ILL_MINERAL", MOB_NAME) + ", and " + getmonsterinfo("ILL_OBSIDIAN", MOB_NAME) + "?";
		close;
	case 2:
		mes "[Steven]";
		mes "Whoa...";
		mes "Good job!";
		mes "Are you feeling a little safer now?";
		erasequest 11565;
		setquest 11566;
		getitem 25271,1; // IllusionStone
		getexp 1000000,900000;
		close;
	}
	end;

OnTouch:
	if (ill_teddy == 3) {
		mes "[Steven]";
		mes "Can't you let me go?!";
		mes "Let me go!";
		mes "This sucks!!!!";
		npctalk "Steven: Can't you let me go?!", "", bc_self;
		cloakoffnpcself( "White Teddy Bear#IBT" );
		cloakoffnpcself( "Teddy Bear#IBT" );
		next;
		mes "[Teddy Bear]";
		mes "Oops!";
		mes "Caught, I got caught!";
		mes "Let's run!!!!";
		npctalk "White Teddy Bear: Caught, I got caught!", "White Teddy Bear#IBT", bc_self;
		npctalk "Teddy Bear: Let's Run!!!!", "Teddy Bear#IBT", bc_self;
		ill_teddy = 4;
		erasequest 11558;
		setquest 11559;
		close2;
		cloakonnpcself( "White Teddy Bear#IBT" );
		cloakonnpcself( "Teddy Bear#IBT" );
		end;
	}
	end;

OnInit:
	// main quest
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11558) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11559) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11561) == 1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11563,HUNTING) == 2 && checkquest(11564,HUNTING) == 2" );

	// daily
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_teddy == 9 && checkquest(11565,HUNTING) == -1 && checkquest(11566,PLAYTIME) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11565,HUNTING) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11566,PLAYTIME) == 2" );
	end;
}

ein_d02_i,135,229,1	duplicate(dummy_cloaked_npc)	Acid#IBT_inN	4_M_NFMAN
ein_d02_i,169,193,5	duplicate(dummy_cloaked_npc)	White Teddy Bear#IBT	4_TEDDY_BEAR_W
ein_d02_i,171,193,3	duplicate(dummy_cloaked_npc)	Teddy Bear#IBT	4_NASARIAN
ein_d02_i,172,192,1	duplicate(dummy_cloaked_npc)	Acid#IBT_inN01	4_M_NFMAN

ein_d02_i,132,233,0	script	#ITBSuspicious place	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (ill_teddy == 7) {
		mes "[??????]";
		mes "Um hahahahahahahahaha!!!!";
		mes "Listen, people!";
		mes "Finally the day has come when we will rise again!";
		cloakoffnpcself( "??????#IBT_inB01" );
		cloakoffnpcself( "??????#IBT_inB02_1" );
		cloakoffnpcself( "??????#IBT_inB03" );
		cloakoffnpcself( "??????#IBT_inB04" );
		cloakoffnpcself( "??????#IBT_inB05" );
		cloakoffnpcself( "??????#IBT_inB06" );
		cloakoffnpcself( "??????#IBT_inB07" );
		cloakoffnpcself( "??????#IBT_inB08" );
		cloakoffnpcself( "??????#IBT_inB09" );
		cloakoffnpcself( "??????#IBT_inB10" );
		cloakoffnpcself( "??????#IBT_inB11" );
		cloakoffnpcself( "??????#IBT_inB12" );
		cloakoffnpcself( "??????#IBT_inB13" );
		cloakoffnpcself( "??????#IBT_inB15" );
		cloakoffnpcself( "??????#IBT_inB16" );
		cloakoffnpcself( "??????#IBT_inB17" );
		cloakoffnpcself( "??????#IBT_inB18" );
		cloakoffnpcself( "??????#IBT_inB19" );
		cloakoffnpcself( "??????#IBT_inB20" );
		cloakoffnpcself( "??????#IBT_inB21" );
		cloakoffnpcself( "??????#IBT_inB22" );
		npctalk "?????? : Mmmhahahahahahahahahaha!!!!", "??????#IBT_inB01", bc_self;
		next;
		mes "[??????]";
		mes "Forget the shameful past of being trapped in the dark and damp ground.";
		npctalk "?????? : Forget the shameful past of being trapped in the dark and damp ground.", "????????#IBT_inB01", bc_self;
		next;
		mes "[??????]";
		mes "This land!!!";
		npctalk "?????? : This land!!!", "????????#IBT_inB01", bc_self;
		sleep2 500;
		mes "This world!!!!";
		npctalk "?????? : This world!!!!", "??????#IBT_inB01", bc_self;
		sleep2 500;
		mes "Until the day they are at our feet, us Nazarians!!!!";
		npctalk "?????? : Until the day they are at our feet, us Nazarians!!!!", "??????#IBT_inB01", bc_self;
		sleep2 500;
		mes "Will not stop the invasion!";
		npctalk "?????? : Will not stop the invasion!", "??????#IBT_inB01", bc_self;
		next;
		mes "[Nazarians]";
		mes "Okay! A new body has arrived!";
		mes "We will plant our holy core into the body that is only an empty shell!";
		next;
		mes "[??????]";
		mes "Drivius! Come on get it!!!";
		next;
		mes "[Drivius]";
		mes "Yes!!! His Majesty is here!!!";
		next;
		mes "[Emperor of Nazarians]";
		mes "Ha ha... look!";
		mes "This bright and beautiful figure...";
		next;
		mes "[Emperor of Nazarians]";
		mes "People!!!";
		mes "Welcome!";
		mes "Brave newly born soldiers!!!!";
		cloakonnpcself( "??????#IBT_inB02_1" );
		cloakoffnpcself( "??????#IBT_inB02_2" );
		npctalk "?????? : ...oh...ahah...", "??????#IBT_inB01", bc_self;
		next;
		mes "[Nazarians]";
		mes "Waaaaaaaa!!!!";
		mes "Long live the Emperor!!!!";
		next;
		mes "[Nazarians]";
		mes "Hooray!!! Hooray!!!";
		next;
		mes "[Nazarians]";
		mes "Look at those dashing soldiers over there!!!";
		mes "Awesome!!!!";
		next;
		mes "[Emperor of Nazarians]";
		mes "The world will bow before the mighty power of the Nazarians!!!!!";
		next;
		mes "[Nazarians]";
		mes "Waaaaaaaa!!!!";
		mes "Long live the Emperor!!!!";
		mes "Hooray!!! Hooray!!!";
		cloakoffnpcself( "Steven#IBT_inN" );
		cloakoffnpcself( "Acid#IBT_inN" );
		next;
		mes "[Steven]";
		mes "Wait what's that?";
		mes "Isn't that the doll we made?";
		next;
		mes "[Acid]";
		mes "I guess so?";
		next;
		mes "[Steven]";
		mes "It does not only look like that, it is the one we made!";
		next;
		mes "[Steven]";
		mes "It's the one who made a mess because you sewed wrong?? Yes!";
		next;
		mes "[Acid]";
		mes "What a mess...";
		mes "That one has its own cuteness point?";
		next;
		mes "[Steven]";
		mes "...cute horns...";
		next;
		mes "[Emperor of Nazarians]";
		mes "Hmm...";
		mes "Oops...";
		next;
		mes "[Emperor of Nazarians]";
		mes "It looks like a rat has lurked into the sacred assembly.";
		next;
		mes "[Emperor of Nazarians]";
		mes "Warriors of Nazarians!!!!";
		mes "Punish the intruder!!!";
		next;
		mes "[Nazarians]";
		mes "From our name!";
		mes "We'll do it!";
		next;
		mes "[Nazarians]";
		mes "Waaaaaaa!!!";
		mes "Punish them!";
		mes "It's an intruder!!!";
		next;
		mes "[Steven]";
		mes "Oops!";
		mes "Looks like we got caught?!";
		next;
		mes "[Steven]";
		mes "Hey!";
		mes "There are many enemies, so let's scatter and run away!";
		next;
		mes "[Steven]";
		mes "Take care of those chasing us appropriately.";
		mes "Then see you near the exit in a minute!";
		ill_teddy = 8;
		erasequest 11562;
		setquest 11563;
		setquest 11564;
		close2;
		cloakonnpcself( "Steven#IBT_inN" );
		cloakonnpcself( "Acid#IBT_inN" );
		cloakonnpcself( "??????#IBT_inB01" );
		cloakonnpcself( "??????#IBT_inB02_2" );
		cloakonnpcself( "??????#IBT_inB03" );
		cloakonnpcself( "??????#IBT_inB04" );
		cloakonnpcself( "??????#IBT_inB05" );
		cloakonnpcself( "??????#IBT_inB06" );
		cloakonnpcself( "??????#IBT_inB07" );
		cloakonnpcself( "??????#IBT_inB08" );
		cloakonnpcself( "??????#IBT_inB09" );
		cloakonnpcself( "??????#IBT_inB10" );
		cloakonnpcself( "??????#IBT_inB11" );
		cloakonnpcself( "??????#IBT_inB12" );
		cloakonnpcself( "??????#IBT_inB13" );
		cloakonnpcself( "??????#IBT_inB15" );
		cloakonnpcself( "??????#IBT_inB16" );
		cloakonnpcself( "??????#IBT_inB17" );
		cloakonnpcself( "??????#IBT_inB18" );
		cloakonnpcself( "??????#IBT_inB19" );
		cloakonnpcself( "??????#IBT_inB20" );
		cloakonnpcself( "??????#IBT_inB21" );
		cloakonnpcself( "??????#IBT_inB22" );
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(11562) == 1" );
	end;
}

ein_d02_i,142,244,3	duplicate(dummy_cloaked_npc)	??????#IBT_inB01	4_NASARIAN_EM
ein_d02_i,141,244,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB02_1	4_TEDDY_BEAR_B_L
ein_d02_i,141,244,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB02_2	4_TEDDY_BEAR_B
ein_d02_i,140,244,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB03	4_TEDDY_BEAR_W
ein_d02_i,141,240,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB04	4_NASARIAN
ein_d02_i,139,240,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB05	4_TEDDY_BEAR_W
ein_d02_i,140,238,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB06	4_NASARIAN
ein_d02_i,136,240,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB07	4_TEDDY_BEAR_W
ein_d02_i,133,240,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB08	4_TEDDY_BEAR_B
ein_d02_i,142,237,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB09	4_NASARIAN
ein_d02_i,140,236,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB10	4_TEDDY_BEAR_W
ein_d02_i,142,243,1	duplicate(dummy_cloaked_npc)	??????#IBT_inB11	4_NASARIAN
ein_d02_i,144,242,3	duplicate(dummy_cloaked_npc)	??????#IBT_inB12	4_NASARIAN
ein_d02_i,144,240,1	duplicate(dummy_cloaked_npc)	??????#IBT_inB13	4_NASARIAN
ein_d02_i,141,246,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB14	4_TEDDY_BEAR_W
ein_d02_i,141,237,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB15	4_NASARIAN
ein_d02_i,141,242,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB16	4_TEDDY_BEAR_B
ein_d02_i,137,240,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB17	4_NASARIAN
ein_d02_i,136,238,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB18	4_NASARIAN
ein_d02_i,138,238,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB19	4_NASARIAN
ein_d02_i,141,241,7	duplicate(dummy_cloaked_npc)	??????#IBT_inB20	4_TEDDY_BEAR_B
ein_d02_i,145,241,1	duplicate(dummy_cloaked_npc)	??????#IBT_inB21	4_NASARIAN
ein_d02_i,140,243,5	duplicate(dummy_cloaked_npc)	??????#IBT_inB22	4_NASARIAN
ein_d02_i,133,233,7	duplicate(dummy_cloaked_npc)	Steven#IBT_inN	4W_M_02

ein_d02_i,168,206,5	script	Gloomy Teddy Bear#ITB	4_TEDDY_BEAR_B_L,{
	if (checkweight(1201,3) == 0) {
		mes "- Wait a moment!!";
		mes "- You have too many items. -";
		mes "- You can't receive this. -";
		mes "- Lighten your weight and -";
		mes "- try again. -";
		close;
	}
	if (ill_teddy < 9) {
		mes "[Gloomy Teddy Bear]";
		mes "Ah...";
		mes "Is this a dream or reality...";
		mes "Am I dead... or am I alive...";
		next;
		mes "[Gloomy Teddy Bear]";
		mes "We're... not supposed to come back...";
		mes "I have to go back...";
		close;
	}
	switch( checkquest(11569,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Gloomy Teddy Bear]";
		mes "Whoops...don't rush me like that...";
		close;
	case 2:
		erasequest 11569;
		break;
	}
	switch( checkquest(11567,HUNTING) ) {
	case -1:
		mes "[Gloomy Teddy Bear]";
		mes "Ah...";
		mes "Is this a dream or reality...";
		mes "Am I dead... or am I alive...";
		next;
		mes "[Gloomy Teddy Bear]";
		mes "We're... not supposed to come back...";
		mes "I have to go back...";
		next;
		mes "[Gloomy Teddy Bear]";
		mes "Hey... don't just stand there, help me...";
		mes "Me... the Nazarians...";
		next;
		mes "[Gloomy Teddy Bear]";
		mes "^ff0000Kill 10 " + getmonsterinfo("ILL_TEDDY_BEAR_R", MOB_NAME) + ", " + getmonsterinfo("ILL_TEDDY_BEAR_Y", MOB_NAME) + ", " + getmonsterinfo("ILL_TEDDY_BEAR_G", MOB_NAME) + ", " + getmonsterinfo("ILL_TEDDY_BEAR_B", MOB_NAME) + ", and " + getmonsterinfo("ILL_TEDDY_BEAR_W", MOB_NAME) + "^000000 and return them to the depths... to rest...";
		next;
		if (select( "Accept", "Quit" ) == 2) {
			mes "[Gloomy Teddy Bear]";
			mes "...Ah...";
			close;
		}
		mes "[Gloomy Teddy Bear]";
		mes "I want to end this... infernal nightmare...";
		mes "Come on...";
		setquest 11567;
		setquest 11568;
		close;
	case 0:
	case 1:
		mes "[Gloomy Teddy Bear]";
		mes "Ah... When will the peaceful rest...";
		mes "...is the request yet...";
		close;
	case 2:
		switch( checkquest(11568,HUNTING) ) {
		case -1:
			end;
		case 0:
		case 1:
			mes "[Gloomy Teddy Bear]";
			mes "Ah... When will the peaceful rest...";
			mes "...is the request yet...";
			close;
		case 2:
			mes "[Gloomy Teddy Bear]";
			mes "Why is it still... not going away...";
			mes "This horrible nightmare...";
			erasequest 11567;
			erasequest 11568;
			setquest 11569;
			getitem 25271,1; // IllusionStone
			getexp 1300000,1000000;
			close;
		}
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_teddy == 9 && checkquest(11569,PLAYTIME) == -1 && checkquest(11567,HUNTING) == -1 && checkquest(11568,HUNTING) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11569,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11567,HUNTING) == 2 && checkquest(11568,HUNTING) == 2" );
	end;
}


ein_d02_i,191,192,3	script	Porcelain Doll Craftsman#ITB	4_F_HUWOMAN,{
	if (checkweight(1201,3) == 0) {
		mes "- Wait a moment!!";
		mes "- You have too many items. -";
		mes "- You can't receive this. -";
		mes "- Lighten your weight and -";
		mes "- try again. -";
		close;
	}
	if (ill_teddy < 9) {
		mes "[Porcelain Doll Craftsman]";
		mes "Kyaaaaaa!!!!!";
		mes "You were surprised!";
		close;
	}
	switch( checkquest(11571,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "[Porcelain Doll Craftsman]";
		mes "Adventurer, welcome back.";
		mes "Thanks to you, I have been able to continue my studies in the deep parts of the mine.";
		mes "Please come back again at dawn.";
		close;
	case 2:
		erasequest 11571;
		break;
	}
	switch( checkquest(11570,HUNTING) ) {
	case -1:
		mes "[Porcelain Doll Craftsman]";
		mes "Kyaaaaaa!!!!!";
		mes "You were surprised!";
		next;
		mes "[Porcelain Doll Craftsman]";
		mes "Have you ever seen a huge ^ff0000" + getmonsterinfo("ILL_TEDDY_BEAR_S", MOB_NAME) + "^000000 nearby?";
		mes "I barely made it to the entrance, but when I try to leave, he shows up and has been hiding here for days.";
		next;
		if (select( "Help", "Quit" ) == 2) {
			mes "[Porcelain Doll Craftsman]";
			mes "Sob!";
			mes "It's over!!!";
			mes "I'm stuck here forever!";
			close;
		}
		mes "[Porcelain Doll Craftsman]";
		mes "Alive!!!";
		mes "Did you see that?";
		mes "It's a huge ^ff0000" + getmonsterinfo("ILL_TEDDY_BEAR_S", MOB_NAME) + "^000000.";
		mes "You must kill it!";
		setquest 11570;
		close;
	case 0:
	case 1:
		mes "[Porcelain Doll Craftsman]";
		mes "How are you?";
		mes "Have you killed ^ff0000" + getmonsterinfo("ILL_TEDDY_BEAR_S", MOB_NAME) + "^000000?";
		close;
	case 2:
		// unknown text
		erasequest 11570;
		setquest 11571;
		getitem 25271,1; // IllusionStone
		getexp 1500000,1100000;
		end;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "ill_teddy == 9 && checkquest(11571,PLAYTIME) == -1 && checkquest(11570,HUNTING) == -1" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11571,PLAYTIME) == 2" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(11570,HUNTING) == 2" );
	end;
}

ein_d02_i,169,244,1	script	White Bear#ITBz01	4_TEDDY_BEAR_W,3,3,{
	end;
OnTouch:
	npctalk "White Teddy Bear: Ah... dear Charlotte... to be in a place like this...", "", bc_self;
	end;
}

ein_d02_i,169,244,1	script	Sirumsireum Teddy Bear#ITBz02	4_TEDDY_BEAR_B_L,{
	npctalk "Teddy Bear: What have you done to me...", "", bc_self;
	end;
}
