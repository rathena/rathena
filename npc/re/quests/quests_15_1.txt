//===== rAthena Script =======================================
//= Phantasmagorika Quests (episodes 15.1).
//===== Description: =========================================
//= [Official Conversion]
//--- Quests list:
//- Phantasmagorika Main Quest
//- Wandering Bard Quest
//- Police Quests
//- 'New Power Source'
//- 'To Phantasmagorika!'
//- 'Looking for the Traces' (part 2 of 'To Phantasmagorika!')
//===== Changelogs: ==========================================
//= 1.0 Initial release [Capuche]
//= 1.1 Fixed NPC names [zackdreaver]
//= 2.0 Updated using Aegis files [Capuche]
//============================================================

prontera,121,77,3	script	Phantasmagorika Spokesperson#prt::spokesperson	4_F_ZONDAGIRL,4,4,{
	mes "[Spokesperson]";
	mes "Good day.";
	mes "Rekenber is recruiting adventurers for an excavation project that takes place in Phantasmagorika, the newly discovered ruins in Juperos.";
	next;
	mes "[Spokesperson]";
	mes "If you're interested, just come as you are.";
	mes "Everything you need for the excavation will be provided by Rekenber.";
	next;
	mes "[Spokesperson]";
	mes "Join us for adventure at the newly discovered ruins in Juperos,";
	mes "an ancient city whose scientific knowledge has fueled the development of modern civilization.";
	next;
	mes "[Spokesperson]";
	mes "If you'd like to join, then form an excavation team and fill out your application.";
	next;
	switch( select( "Excavation team? Application?", "Phantasmagorika?", "Bye." ) ) {
	case 1:
		mes "[Spokesperson]";
		mes "We're recruiting teams of excavators for the research of Phantasmagorika, the newly discovered ruins.";
		mes "This project requires expertise in various fields, so we've decided to recruit";
		mes "teams of excavators instead of individuals.";
		next;
		mes "[Spokesperson]";
		mes "You can register for the excavation project,";
		mes "and help us however you can.";
		mes "Registered excavators receive special benefits and commodities";
		next;
		mes "[Spokesperson]";
		mes "in exchange for information that they discover in the ruins. We'll use the information to research the ruins.";
		mes "Even if you fail to find useful information, we'll reward you just for your participation.";
		next;
		mes "[Spokesperson]";
		mes "If you want to join the project, please go submit your application to the Eden Group.";
		close;
	case 2:
		mes "[Spokesperson]";
		mes "An ancient site was just discovered in Juperos.";
		mes "It was hidden at the end of a long tunnel.";
		next;
		mes "[Spokesperson]";
		mes "Rekenber has named the site ^4d4dffPhantasmagorika^000000";
		mes "and commenced an excavation.";
		next;
		mes "[Spokesperson]";
		mes "We're hoping to find more advanced mado gears and a higher level of scientific knowledge than what was ever discovered in the Juperos region.";
		close;
	case 3:
		mes "[Spokesperson]";
		mes "Rekenber is looking for talented adventurers for the excavation of Phantasmagorika.";
		mes "Feel free to join us anytime!";
		mes "We need you!";
		close;
	}
	end;

OnTouch_:
	.@npc$ = strnpcinfo(2);
	if (getd( "." + .@npc$ ) == 1)
		end;
	setd "." + .@npc$, 1;
	sleep 3000;
	npctalk "Spokesperson: Recruiting adventurers for the excavation of Phantasmagorika.";
	sleep 17000;
	setd "." + .@npc$, 0;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 140 && isbegin_quest(7610) == 0" );
	end;
}
morocc,208,287,3	duplicate(spokesperson)	Phantasmagorika Spokesperson#moc	4_F_ZONDAGIRL,4,4
payon,174,113,3	duplicate(spokesperson)	Phantasmagorika Spokesperson#pay	4_F_ZONDAGIRL,4,4
geffen,135,64,3	duplicate(spokesperson)	Phantasmagorika Spokesperson#gef	4_F_ZONDAGIRL,4,4
alberta,119,65,3	duplicate(spokesperson)	Phantasmagorika Spokesperson#alb	4_F_ZONDAGIRL,4,2

moc_para01,31,14,0	script	#atnevt01	HIDDEN_WARP_NPC,1,1,{
	end;
OnTouch:
	if (countitem(6219) < 1 && countitem(22508) < 1)	// Para_Team_Mark, Para_Team_Mark_
		end;
	if (ep15_1_atnad == 0 && BaseLevel > 139) {
		cutin "laime_evenor01.bmp",2;
		mes "[Secretary Lime Evenor]";
		mes "Welcome back,";
		mes "" + strcharinfo(0) + ". I don't know how we can survive without you.";
		next;
		mes "[Secretary Lime Evenor]";
		mes "Have you heard?";
		mes "An ancient site was just discovered in Juperos.";
		mes "Rekenber is recruiting adventurers for the excavation of the place,";
		next;
		mes "[Secretary Lime Evenor]";
		mes "and we've decided to join it.";
		mes "The Captain wants to see you about that.";
		next;
		select("I didn't know you had a captain.");
		cutin "laime_evenor02.bmp",2;
		mes "[Secretary Lime Evenor]";
		mes "What, did you think I was running this gig alone?";
		mes "The Mistre--I mean, the Captain is rarely excited about anything, and this is one of those rare occasions. You should meet her.";
		next;
		cutin "laime_evenor01.bmp",2;
		mes "[Secretary Lime Evenor]";
		mes "Her office is to the far left on the second floor.";
		ep15_1_atnad = 1;
		setquest 7607;	// Eden Group Leader
		close3;
	}
	end;
}

moc_para01,38,175,5	script	Secretary Lime Evenor#evtat01	4_F_EDEN_OFFICER,{
	if (checkweight(1301,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	mes "[Secretary Lime Evenor]";
	if (countitem(6219) < 1 && countitem(22508) < 1) {
		cutin "laime_evenor01.bmp",2;
		mes "You need to Join the Eden Group first.";
		close3;
	}
	if (BaseLevel < 140) {
		cutin "laime_evenor01.bmp",2;
		mes "I also come up here sometimes to attend some business.";
		mes "Actually the central room is mine.";
		close3;
	}
	switch(ep15_1_atnad) {
	case 0:
		cutin "laime_evenor01.bmp",2;
		mes "Welcome back,";
		mes "" + strcharinfo(0) + ". I don't know how we can survive without you.";
		next;
		mes "[Secretary Lime Evenor]";
		mes "Have you heard?";
		mes "An ancient site was just discovered in Juperos.";
		mes "Rekenber is recruiting adventurers for the excavation of the place,";
		next;
		mes "[Secretary Lime Evenor]";
		mes "and we've decided to join it.";
		mes "The Captain wants to see you about that.";
		next;
		select("I didn't know you had a captain.");
		cutin "laime_evenor02.bmp",2;
		mes "[Secretary Lime Evenor]";
		mes "What, did you think I was running this gig alone?";
		mes "The Mistre--I mean, the Captain is rarely excited about anything, and this is one of those rare occasions. You should meet her.";
		next;
		cutin "laime_evenor01.bmp",2;
		mes "[Secretary Lime Evenor]";
		mes "Her office is to the far left on the second floor.";
		ep15_1_atnad = 1;
		setquest 7607;// Eden Group Leader
		close3;
	case 1:
	case 2:
		cutin "laime_evenor03.bmp",2;
		mes "The Captain is waiting for you.";
		mes "Her office is to the far left from here.";
		mes "I'll see you again later.";
		close3;
	case 3:
		cutin "laime_evenor03.bmp",2;
		mes "It seems everything went smoothly with the Captain.";
		mes "Let's move to the central room, shall we?";
		mes "We have a guest waiting";
		mes "to talk us about something.";
		close3;
	case 4:
		cutin "laime_evenor01.bmp",2;
		mes "I'll be here rooting for you.";
		mes "Don't worry about support.";
		mes "I'll see that you get everything you need.";
		close3;
	default:
		cutin "laime_evenor01.bmp",2;
		mes "The excavation seems to be going well so far.";
		mes "The item Dr. Atnad was interested in is also on Rekenber's radar; it should be appraised highly.";
		next;
		mes "[Secretary Lime Evenor]";
		mes "Thank you for helping the doctors focus on their work.";
		mes "Keep up the good work.";
		close3;
	}

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 140 && isbegin_quest(7607) == 0 && ep15_1_atnad < 3" );
	end;
}

moc_para01,174,165,3	script	Lime Evenor#atnd02	4_F_EDEN_OFFICER,{
	if (checkweight(1301,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	mes "[Lime]";
	switch(ep15_1_atnad) {
	case 0:
		cutin "laime_evenor01.bmp",2;
		mes "This room is for employees only.";
		mes "If you need a place to rest, please use the next room.";
		break;
	case 1:
	case 2:
		cutin "laime_evenor01.bmp",2;
		mes "The Captain is in the next room.";
		mes "It's to the left.";
		mes "Please talk to the Captain first.";
		break;
	case 3:
		cutin "laime_evenor01.bmp",2;
		mes "" + strcharinfo(0) + ". Please come this way.";
		mes "Let me introduce you to";
		mes "Archaeologist Aures of the Atnad Excavation Team.";
		next;
		mes "[Lime]";
		mes "Dr. Aures, this is " + strcharinfo(0) + ", who will assist you in Phantasmagorika.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Nice to meet you. My name is Aures.";
		mes "Every member of my team is old and feeble. We really can use some young blood like you.";
		mes "Welcome to the team.";
		next;
		cutin "laime_evenor01.bmp",2;
		mes "[Lime]";
		mes "It seems everything went smoothly with the Captain.";
		mes "Your job is simple:";
		mes "just help Dr. Aures and his Atnad Excavation Team.";
		next;
		mes "[Lime]";
		mes "I expect you'll spend most of your time running errands";
		mes "and doing things that require physical stamina since all the members of the team are past their prime.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "That's right. All of us retired a long time ago.";
		mes "This excavation will probably be the last excavation we do before we die.";
		next;
		mes "[Aures]";
		mes "If Lime didn't help us, we would have changed our minds at the entrance to that place.";
		next;
		cutin "laime_evenor01.bmp",2;
		mes "[Lime]";
		mes "Please don't say that.";
		mes "You're the most experienced archaeologists I've met.";
		mes "By the way, how's Dr. Atnad?";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Atnad? Don't get me started.";
		mes "He's as stubborn as his daughter, if not more.";
		mes "She liquidated her inheritance and left when she couldn't hear from her father.";
		next;
		mes "[Aures]";
		mes "He didn't keep touch with his family for years. When he found out his house was sold,";
		mes "he lashed out and went off the grid,";
		mes "and he's still angry at her.";
		next;
		cutin "laime_evenor01.bmp",2;
		mes "[Lime]";
		mes "And we're stuck in the middle of their mind game.";
		next;
		switch( select( "Who are they?", "Cut to the chase, please." ) ) {
		case 1:
			cutin "verus_aures.bmp",0;
			mes "[Aures]";
			mes "Let me tell you. When Lime came to us,";
			mes "we all wondered why a famous company like Eden Group would support a ragtag bunch of old men like us.";
			mes "Then we found out they're father and daughter.";
			next;
			select("Father and daughter? Who?");
			cutin "laime_evenor03.bmp",2;
			mes "[Lime]";
			mes "Oh, didn't the Captain tell you?";
			mes "Her father is the leader of the Atnad Excavation Team.";
			next;
			mes "[Lime]";
			mes "When I first suggested we should join the project,";
			mes "she wanted to support the Atnad Excavation Team.";
			mes "At first I was thinking more along the lines of merging the team.";
			next;
			mes "[Lime]";
			mes "Rekenber takes care of the financial aspects of the project, while we handle the manpower.";
			mes "Then I realized the leader of the team is the father of my boss's.";
			next;
			cutin "laime_evenor04.bmp",2;
			mes "[Lime]";
			mes "I want to support the team to the best of my ability,";
			mes "but their rocky relationship is getting in the way.";
			next;
			cutin "verus_aures.bmp",0;
			mes "[Aures]";
			mes "Ian, I mean the old Atnad, welcomed your proposal with open arms.";
			mes "Then he hit the roof when he realized your captain was his daughter.";
			next;
			mes "[Aures]";
			mes "I don't understand the hangup.";
			mes "I mean she's his daughter, for the goodness's sake.";
			mes "I think you should mediate between the two.";
			next;
			cutin "laime_evenor01.bmp",2;
			mes "[Lime]";
			mes "I hope this collaboration will be a chance for them to reconcile with each other.";
			mes "Well, we should move to the site now.";
			break;
		case 2:
			cutin "laime_evenor03.bmp",2;
			mes "[Lime]";
			mes "Indeed. Before we go, let's talk about what we can expect at the site.";
			break;
		}
		next;
		cutin "laime_evenor03.bmp",2;
		mes "[Lime]";
		mes "Aures, Luke will come with you.";
		mes "" + strcharinfo(0) + ", you can go to Phantasmagorika whenever you're ready.";
		next;
		mes "[Lime]";
		mes "It's accessible through Juperos,";
		mes "so move to Juno first, then get to the entrance to Juperos from there.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Rekenber has been promoting this project across the continent,";
		mes "and has succeeded in bringing in more people than you can imagine.";
		mes "Just look for a big crowd, and you won't miss the place. See you when you get there.";
		next;
		cutin "laime_evenor01.bmp",2;
		mes "[Lime]";
		mes "Everything should be easy enough for you,";
		mes "though you'll have to register with Rekenber for the excavation.";
		mes "You can register as an individual excavator, but I'd prefer if you do it as a member of the Atnad Excavation Team instead.";
		next;
		mes "[Lime]";
		mes "Once your registration goes through, you can start working for the Atnad Excavation Team,";
		mes "and everything else will take care of itself.";
		mes "Thank you for doing this.";
		ep15_1_atnad = 4;
		completequest 7608;// Atnad Excavation Team 1
		setquest 7609;// Atnad Excavation Team 2
		break;
	case 4:
		cutin "laime_evenor01.bmp",2;
		mes "The excavation site is connected to Juperos,";
		mes "so you should move to Juperos first.";
		mes "The excavation project has been promoted widely, so you won't have a problem finding the representative.";
		break;
	default:
		cutin "laime_evenor02.bmp", 2;
		mes "How's the situation at the excavation site?";
		mes "Sigh, why can't Ian just forgive his daughter?";
		break;
	}
	close3;
}

moc_para01,172,164,5	script	Archaeologist Aures#atnd02	4_M_OLDSCHOLAR,{
	if (ep15_1_atnad < 4) {
		cutin "laime_evenor01.bmp",2;
		mes "[Lime]";
		mes "I'm sorry, but he's our guest.";
		mes "And this office is for Eden Group employees only.";
		mes "The dormitory is the next room.";;
	}
	else if (ep15_1_atnad == 4) {
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "I'll see you again at the excavation site, yeah?";
		mes "The Eden Group has hired an escort for me, so I'll be traveling with him.";
		mes "See you at the site.";
	}
	else {
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Oh, you came.";
		mes "I came here often.";
		mes "I feel sorry for Luke, for he has to travel so often because of me.";
		next;
		mes "[Aures]";
		mes "It's great to have a place where I can come anytime I want. It's been years since I had a place I could call home.";
		mes "Hah hah hah!";
		mes "I'll see you at the excavation site.";
	}
	close3;
}

moc_para01,178,167,3	script	Luke Lapez#atnd03	4_M_EDEN_GUARDER,{
	mes "[Luke]";
	if (ep15_1_atnad < 4) {
		cutin "looke_rapez02.bmp",0;
		mes "Hey, Lime.";
		mes "We have a guest.";
		mes "...";
	}
	else if (ep15_1_atnad == 4) {
		cutin "looke_rapez02.bmp",0;
		mes "...";
		mes "I've got nothing to say to you.";
	}
	else {
		cutin "looke_rapez04.bmp",0;
		mes "Hmm...";
	}
	close3;
}

ver_eju,114,40,4	script	Manager Michelle#atnd05	4_M_LGTGUARD,{
	if (checkweight(1301,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	mes "[Manager Michelle]";
	if (ep15_1_atnad < 4) {
		mes "Wait. Which excavation team are you from?";
		mes "...You're independent.";
		mes "Did you register independently? Do you have a referral?";
		next;
		mes "[Manager Michelle]";
		mes "I didn't think so.";
		mes "I'm sorry, but you have to have a referral or belong to an excavation team.";
		mes "All sorts of people came looking for a job at the excavation site.";
		next;
		mes "[Manager Michelle]";
		mes "Oh, yes. The ^4d4dffEden Group^000000 is the easiest place to get a referral.";
		mes "If you're qualified, then the Group will recommend you to us for the excavation project.";
		next;
		mes "[Manager Michelle]";
		mes "Now, please step back for your safety.";
		close;
	}
	if (ep15_1_atnad == 4) {
		if (checkquest(7611,HUNTING) == -1) {
			mes "Wait.";
			mes "Are you a participant of the Phantasmagorika excavation project?";
			next;
			select("Yes.");
			mes "[Manager Michelle]";
			mes "Let me check the roster.";
			mes "Your name is... " + strcharinfo(0) + ". Ah, there you are.";
			mes "You're from the Eden Group, all right.";
			next;
			mes "[Manager Michelle]";
			mes "The excavation site is at the other end of this tunnel.";
			mes "Once you're in, you're required to formally register yourself at the Central Command Center.";
			next;
			mes "[Manager Michelle]";
			mes "Oh, and do me a favor.";
			mes "Monsters from Juperos Ruins have migrated into the tunnel,";
			mes "and they're getting out of hand.";
			next;
			mes "[Manager Michelle]";
			mes "Could you help us take care of them? Including the ones around here.";
			mes "I'll write a letter of recommendation for you, so you can claim your rewards at the Central Command Center.";
			setquest 7611;// Passage Cleaning
			close;
		}
		mes "Just clear the tunnel of monsters,";
		mes "and report to the Central Command Center.";
		mes "Thank you for your help.";
		close;
	}
	if (isbegin_quest(7610) == 0) {
		mes "[Manager Michelle]";
		mes "Are you looking for a new job?";
		mes "If you prefer physical labor,";
		mes "you can always exterminate monsters for me.";
		close;
	}
	switch( checkquest(7612,PLAYTIME) ) {
	case -1:
		switch( checkquest(7611,HUNTING) ) {
		case -1:
			mes "Can you help me again?";
			mes "You know, exterminate monsters in the tunnel and around this area.";
			mes "This time, you can just report back to me instead of making a trip to the Central Command Center.";
			mes "Thank you for your help.";
			setquest 7611;// Passage Cleaning
			close;
		case 0:
		case 1:
			mes "Just get rid of some in the tunnel and around here.";
			mes "I'm glad you like the job.";
			next;
			mes "[Manager Michelle]";
			mes "When you're done, you can report back to me,";
			mes "or go to Louis at the Central Command Center.";
			mes "Thank you for your help.";
			close;
		case 2:
			mes "Oh, good job wiping out monsters.";
			mes "Our soldiers will be grateful for your help.";
			mes "Please take this small token of appreciation.";
			mes "I hope it'll be useful for you.";
			erasequest 7611;// Passage Cleaning
			setquest 7612;// Passage Cleaning - Down
			getexp 1500000,1000000;
			close;
		}
	case 0:
	case 1:
		mes "Thank you for clearing the tunnel of monsters.";
		mes "I'll appreciate it if you can keep doing it.";
		close;
	case 2:
		mes "Are you looking for a new job?";
		mes "If you prefer physical labor,";
		mes "you can always exterminate monsters for me.";
		erasequest 7612;// Passage Cleaning - Down
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(7611) == 0 && ep15_1_atnad == 4" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(7612) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(7611,HUNTING) == 2" );
	end;
}

verus04,182,168,5	script	Receptionist Nara#atnd06	4_F_HUWOMAN,{
	mes "[Nara]";
	if (ep15_1_atnad < 4) {
		mes "Hello.";
		mes "Thank you for using the Phantasmagorika excavation reception desk.";
		mes "Do you have a referral? Or are you a member of an excavation team?";
		next;
		mes "[Nara]";
		mes "Oh, neither.";
		mes "I'm sorry, but I can't let you register.";
		mes "We do need excavators, but we have standards.";
		next;
		switch( select( "I want to register now.", "I'll come back later." ) ) {
		case 1:
			if (BaseLevel > 139) {
				mes "[Nara]";
				mes "Either you have a referral, or you have to be a member of an excavation team.";
				mes "I'm sorry.";
				mes "Hm...";
				next;
				mes "[Nara]";
				mes "If you don't know a place to get a referral or an excavation team,";
				mes "you can always join the ^4d4dffEden Group^000000.";
				next;
				mes "[Nara]";
				mes "If you've worked for the Group before, then you won't have a problem getting its referral.";
				close;
			}
			mes "[Nara]";
			mes "Hm...";
			mes "I'm sorry, but my hands are tied.";
			mes "This place is too dangerous for you at this moment.";
			next;
			mes "[Nara]";
			mes "Please come back when you become more experienced.";
			mes "You must be at least Level 140 to register with us.";
			mes "This is necessary, or we'll just have a ragtag bunch of novices for the excavators.";
			mes "Sorry.";
			close;
		case 2:
			mes "[Nara]";
			mes "Come back with an official excavation team, or bring a referral.";
			close;
		}
	}
	if (ep15_1_atnad == 4) {
		mes "Hello.";
		mes "Thank you for using the Phantasmagorika excavation reception desk.";
		mes "Do you have a referral? Or are you a member of an excavation team?";
		next;
		select("I'm from the Eden Group.");
		mes "[Nara]";
		mes "From the Eden Group, got it.";
		mes "May I have your name? " + strcharinfo(0) + "...";
		mes "Ah, there you are.";
		next;
		mes "[Nara]";
		mes "You're a member of a separate excavation team.";
		mes "Which excavation team do you belong?";
		next;
		input .@string$;
		mes "[Nara]";
		if (.@string$ != "Atnad" && .@string$ != "Atnad Excavation" && .@string$ != "Atnad Excavation Team") {
			mes "..." + .@string$ + "...?";
			mes "Are you sure that's correct?";
			mes "Because I can't find that name on the list.";
			next;
			mes "[Nara]";
			mes "Please check again.";
			close;
		}
		mes "Atnad... Atnad...";
		mes "Oh, I've found it.";
		mes "With you " + strcharinfo(0) + ", the team barely passed the minimum member requirement.";
		mes "Oh, we don't discriminate against small groups. Don't worry.";
		next;
		mes "[Nara]";
		mes "While following the command of your excavation team leader,";
		mes "you can also take on tasks available at the Central Command Center.";
		next;
		mes "[Nara]";
		mes "We'll inform you in case of special events.";
		mes "If you're wounded or exhausted, you can always use healers on standby at the Command Center.";
		next;
		mes "[Nara]";
		mes "Rekenber provides you with everything you need while working at the excavation site.";
		mes "In return, we expect you to focus on uncovering secrets buried within Phantasmagorika.";
		mes "Good luck with your excavation.";
		erasequest 7609;// Atnad Excavation Team 2
		setquest 7610;// Registered Excavator
		completequest 7610;// Registered Excavator
		ep15_1_atnad = 5;
		getexp 300000,300000;
		close;
	}
	if (ep15_1_atnad == 5) {
		mes "Now you have unlimited access to this area.";
		mes "Feel free to let us know if you experience problems excavating or exploring.";
		next;
		mes "[Nara]";
		mes "Your registration has been processed. If you need help or instructions, please talk to Commander Louis.";
		mes "He'll also have some monster subjugation tasks available for you.";
		next;
		mes "[Nara]";
		mes "Good luck!";
		close;
	}
	mes "How are you today?";
	mes "Keep up the good work.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(7610) == 0 && BaseLevel >= 140" );
	end;
}

verus04,179,165,5	script	Commander Louis#atnd07	4_M_LGTGUARD,{
	if (checkweight(1301,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	mes "[Louis]";
	if (ep15_1_atnad < 5) {
		mes "Register yourself as an official excavator, or you'll be escorted off the premises.";
		mes "You can register at the Reception Desk.";
		close;
	}
	mes "You're in the Atnad Excavation Team.";
	mes "How may I help you?";
	next;
	switch( select( "Report excavation results.", "About cleaning the tunnel.", "About monster subjugation.", "Nothing." ) ) {
	case 1:
		mes "[Louis]";
		if (ep15_1_atnad == 12) {
			if (isbegin_quest(7617) != 1 || countitem(6748) < 1) {
				mes "Do you want to report results?";
				mes "...There must be a seal of the head of the Atnad Archaeological Mission on the report!";
				next;
				mes "[Louis]";
				mes "Information like this will basically be made into a file.";
				mes "Sorry to trouble you.";
				mes "The content of the Atnad archaeological group Pick it up. must be very interesting, we are looking forward to it!";
				close;
			}
			mes "Ah, the excavation results of your team.";
			mes "I can see your team has been focusing on the Core.";
			next;
			mes "[Louis]";
			mes "The Chairman has taken a special interest in your team.";
			mes "Keep up the good work, and you'll hear from him.";
			next;
			mes "[Louis]";
			mes "Thank you for your hard work today.";
			mes "See you tomorrow.";
			next;
			mes "[Louis]";
			mes "Oh, wait.";
			mes "Your team is on the radio.";
			mes "Let me put you on the line.";
			next;
			mes "[Ian Atnad's Voice]";
			mes "*Crackle* Hey... *Crackle* rookie...";
			mes "*Crackle* What's wrong... with this...";
			mes "*Crackle* I can't hear...";
			mes "Rookie... *Crackle* Get your butt over here... *Crackle*";
			mes "Hmpf! *Beep*";
			next;
			mes "[Louis]";
			mes "I'm sorry, the signals aren't usually so bad.";
			mes "I guess the doctor is looking for you.";
			mes "You should go.";
			delitem 6748,1;// Excavator_Repoet
			erasequest 7617;// Turning In Excavation Report
			setquest 7623;// Atnad's Summon
			ep15_1_atnad = 13;
			getexp 300000,300000;
			close;
		}
		if (ep15_1_atnad == 13) {
			mes "It was a brief investigation, yet your team has accomplished so much.";
			next;
			mes "[Louis]";
			mes "While other scholars and excavators were only able to make superficial observations,";
			mes "your team made some technical discoveries.";
			next;
			mes "[Louis]";
			mes "I'll report this to the Chairman, and see that your team will receive special benefits.";
			mes "I'll look forward to your next report.";
			close;
		}
		if (isbegin_quest(7618) == 1) {
			mes "The upper management is interested in";
			mes "hearing more about your findings.";
			mes "I hope you'll continue to surprise us.";
			close;
		}
		if (isbegin_quest(7617) != 1 || countitem(6748) < 1) {
			mes "Are you here to report your daily results?";
			mes "Please bring me a report with your leader's signature on it.";
			next;
			mes "[Louis]";
			mes "It's always safe to leave a record.";
			mes "Bring your report as soon as it's ready.";
			mes "It always excites me to read your report.";
			close;
		}
		mes "Ah, the excavation results of your team.";
		mes "I can see your team has been focusing on the Core.";
		next;
		mes "[Louis]";
		mes "The Chairman has taken a special interest in your team.";
		mes "Keep up the good work, and you'll hear from him.";
		next;
		mes "[Louis]";
		mes "Thank you for your hard work today.";
		mes "See you tomorrow.";
		delitem 6748,1;// Excavator_Repoet
		erasequest 7617;// Turning In Excavation Report
		setquest 7618;// Reporting the Results - Down
		getexp 300000,300000;
		close;
	case 2:
		mes "[Louis]";
		switch( checkquest(7612,PLAYTIME) ) {
		case -1:
			switch( checkquest(7611,HUNTING) ) {
			case -1:
				mes "Ah, you came at the right time.";
				mes "Monsters are growing more numerous in the tunnel and the ruins.";
				mes "The mercenaries have requested reinforcements.";
				next;
				if (select( "I'll go.", "Decline." ) == 2) {
					mes "[Louis]";
					mes "Of course, your priority is the excavation.";
					mes "I'll look for someone else.";
					close;
				}
				mes "[Louis]";
				mes "Good.";
				mes "Thank you in advance.";
				mes "When you're done, you can report the results to Manager Michell in the eastern ruins.";
				mes "Happy hunting.";
				setquest 7611;// Passage Cleaning
				close;
			case 0:
			case 1:
				mes "Thank you.";
				mes "Move through the tunnel and get rid of monsters in there.";
				mes "When you're done, please report the results to Manager Michell in the eastern ruins.";
				close;
			case 2:
				mes "Did you take care of monsters in the tunnel and the ruins?";
				mes "Our mercenaries will be happy.";
				mes "They've been demanding reinforcements for a while now. Hah hah!";
				next;
				mes "[Louis]";
				mes "Thank you for your hard work.";
				mes "Please go rest, so that you can get back on the excavation task.";
				erasequest 7611;// Passage Cleaning
				setquest 7612;// Passage Cleaning - Down
				getexp 1500000,1000000;
				close;
			}
		case 0:
		case 1:
			mes "Our mercenaries can take care of monsters in the tunnel and the ruins.";
			mes "But thank you for your concern for the safety of the site.";
			close;
		case 2:
			erasequest 7612;// Passage Cleaning - Down
			mes "Are you concerned about monsters in the tunnel and the ruins?";
			mes "If you're fully rested, then I can put you on the subjugation task.";
			next;
			mes "[Louis]";
			mes "If you're planning to go outside, you might as well take the task, killing two birds with one stone.";
			mes "And you can report the results to Manager Michell in the eastern ruins.";
			close;
		}
	case 3:
		mes "[Louis]";
		switch( checkquest(7614,PLAYTIME) ) {
		case -1:
			switch( checkquest(7613,HUNTING) ) {
			case -1:
				mes "Ah, you came at the right time.";
				mes "Threatening machines have appeared at the Plaza.";
				mes "The workers have requested a combat unit.";
				next;
				if (select( "I'll go.", "Decline." ) == 2) {
					mes "[Louis]";
					mes "Of course, your priority is the excavation.";
					mes "I'll look for someone else.";
					close;
				}
				mes "[Louis]";
				mes "Good.";
				mes "Thank you in advance.";
				mes "Please be careful!";
				setquest 7613;// Eliminating Risks
				close;
			case 0:
			case 1:
				mes "Thank you.";
				mes "The Plaza is where most of the excavation work is being done.";
				mes "It'll be great if you can find something from machines you destroy.";
				close;
			case 2:
				mes "Things seems to have settled.";
				mes "The workers will resume their work soon.";
				mes "They're not fighters, so they're usually passive in times like this.";
				next;
				mes "[Louis]";
				mes "Thank you for your hard work.";
				mes "Our workers will be grateful to you for keeping them safe.";
				erasequest 7613;// Eliminating Risks
				setquest 7614;// Eliminating Risks - Down
				getexp 1500000,1000000;
				close;
			}
		case 0:
		case 1:
			mes "I have other volunteers to take care of monsters at the Plaza, the main excavation point.";
			mes "You should rest.";
			close;
		case 2:
			erasequest 7614;// Eliminating Risks - Down
			mes "Are you concerned about the machines at the main excavation point?";
			mes "It's true that some of them are hypersensitive and aggressive,";
			mes "and I agree they are threatening to our work.";
			next;
			mes "[Louis]";
			mes "If you can take care of them, then I can officially put you on the task,";
			mes "so you'll be rewarded accordingly. Rekenber never takes your service for granted.";
			close;
		}
	case 4:
		mes "[Louis]";
		mes "Is that so?";
		mes "Let me know if you notice anything peculiar.";
		close;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(7610) == 2 && isbegin_quest(7611) == 0 && isbegin_quest(7612) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(7613) == 0 && isbegin_quest(7614) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "checkquest(7613,HUNTING) == 2 && isbegin_quest(7614) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(7618) == 0 && isbegin_quest(7617) == 1" );
	end;
}

verus04,176,161,5	script	Healer Miyo#atnd08	4_F_ACOLYTE,{
	mes "[Miyo]";
	mes "Please come in.";
	mes "Where do you hurt?";
	next;
	.@s = select( "HP/SP full recovery 5,000 z", "HP/SP half recovery 2,000 z" );
	if (isbegin_quest(7610) > 0)
		setarray .@cost[1],4500,1800;
	else
		setarray .@cost[1],5000,2000;
	if (Zeny < .@cost[.@s]) {
		mes "[Miyo]";
		mes "...Look at you and you";
		mes "can't pay for the treatment fee?";
		close;
	}
	Zeny = Zeny - .@cost[.@s];
	npcskill "AL_HEAL",(10/.@s),(99/.@s),(99/.@s);
	percentheal (100 / .@s), (100 / .@s);
	mes "[Miyo]";
	mes "Oh, you're exhausted.";
	mes "Let me restore " + ( .@s == 1 ? "your full" : "some of your" ) + " energy.";
	mes "I'm offering a 10% discount to the official excavators.";
	mes "Smile, and you'll feel better.";
	close;
}

verus04,141,193,5	script	Archaeologist Aures#atnd09	4_M_OLDSCHOLAR,{
	if (checkweight(1301,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	switch(ep15_1_atnad) {
	case 0:
	case 1:
	case 2:
	case 3:
		mes "The old archaeologist has his back toward you, working on something.";
		mes "You shouldn't disturb him.";
		close;
	case 4:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Ah, welcome.";
		mes "I've been waiting for you.";
		mes "First things first: you should go register with the Central Command Center.";
		next;
		mes "[Aures]";
		mes "Your name is already on the list. Just go check in with the center.";
		mes "Or you won't have full access to this area.";
		next;
		mes "[Aures]";
		mes "Come back when you're done. I'll introduce you to the other members.";
		mes "Go on.";
		close3;
	case 5:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Ah, you're back.";
		mes "Say hello to our leader, Ian Atnad.";
		next;
		cutin "verus_ian03.bmp",2;
		mes "[Ian Atnad]";
		mes "...Rookie.";
		mes "I don't have time for rookies. Send them back!";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "You're doing it again.";
		mes "We're old now. We need help!";
		mes "Stop being so stubborn.";
		next;
		cutin "verus_ian03.bmp",2;
		mes "[Ian Atnad]";
		mes "...Hey, rookie.";
		mes "Did my daughter send you to spy on me?";
		mes "Tell me!";
		next;
		if (select( "I came to help.", "I don't know what you're talking about." ) == 2) {
			cutin "verus_ian02.bmp",2;
			mes "[Ian Atnad]";
			mes "Hm? Don't you know who my daughter is?";
			mes "Well, we should leave it that way.";
			next;
		}
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "That means you know who my daughter is.";
		mes "Do you really think you can work with me?";
		mes "Knowing who I am?";
		next;
		mes "[Ian Atnad]";
		mes "Well, fine.";
		mes "Let's get to work.";
		mes "I want to know if you can follow my orders.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Ian, you're helpless.";
		mes "Well, welcome to the team, young adventurer.";
		mes "Some of the things we're planning are physically challenging, not to mention dangerous.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "Enough. Rookie, come over here.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "I'm sorry.";
		mes "You'd better go.";
		mes "Don't let him get on your nerves.";
		ep15_1_atnad = 6;
		close3;
	case 6:
	case 7:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Thank you for your patience with Ian.";
		mes "He wasn't always like that.";
		mes "He's doing it on purpose.";
		close3;
	case 8:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "If you're done with him, I can use your help.";
		mes "We have one more member in the team.";
		next;
		mes "[Aures]";
		mes "He went to the Plaza to investigate the remains.";
		mes "He's a young fellow named ^4d4dffLloyd^000000.";
		mes "I sent Luke with him to keep him safe,";
		next;
		mes "[Aures]";
		mes "but I want to know how much progress Lloyd has made with his investigation.";
		mes "Could you go check up on him?";
		mes "Thank you.";
		completequest 7619;// Assisting the Excavation Team
		setquest 7620;// Young Blood?
		ep15_1_atnad = 9;
		close3;
	case 9:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Lloyd must be somewhere in the Verus Central Plaza.";
		mes "Look for Luke. He should be near Lloyd.";
		next;
		mes "[Aures]";
		mes "He's the only young member aside from you.";
		mes "The rest of the members of our team are as old as me, and couldn't make the trip.";
		next;
		mes "[Aures]";
		mes "Please take good care of";
		mes "Lloyd.";
		close3;
	case 10:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "How's Lloyd doing?";
		mes "Ah, so you're helping him.";
		next;
		mes "[Aures]";
		mes "Thank you";
		mes "for your hard work.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "They're here to work for us.";
		mes "Stop thanking them.";
		mes "They're spoiled as it is.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Sigh, would you stop?";
		mes "*Shaking his head*";
		close3;
	case 11:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Ah, you're back.";
		mes "How's Lloyd doing?";
		mes "He wants to camp there.";
		mes "Wouldn't it be too dangerous? I guess Luke can keep him safe.";
		next;
		mes "[Aures]";
		mes "Please come this way.";
		mes "I wrote a report while waiting for you.";
		mes "I want you to take it to Commander Louis at the Central Command Center.";
		next;
		mes "[Aures]";
		mes "This may be a simple errand,";
		mes "but it gives you an opportunity to get acquainted with the Commander.";
		next;
		mes "[Aures]";
		mes "We're old, so we don't care about fame. You're different.";
		mes "Winning favor with Rekenber";
		mes "can go a long way.";
		erasequest 7622;// Good News!
		setquest 7617;// Turning In Excavation Report
		ep15_1_atnad = 12;
		getitem 6748,1;// Excavator_Repoet
		close3;
	case 12:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Please take that report to Commander Louis.";
		mes "Writing a report every day is a chore, but an important chore nonetheless.";
		next;
		mes "[Aures]";
		mes "I've noticed Louis has been watching us. I hope that's a good sign.";
		close3;
	case 13:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Did you deliver the report?";
		mes "Good.";
		mes "You can take a break now.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "No, you can't!";
		mes "You've got work to do!";
		mes "Come over here, now!";
		close3;
	case 14:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "I don't understand him sometimes.";
		mes "I feel sorry for you.";
		mes "I wish I could help.";
		next;
		mes "[Aures]";
		mes "Maybe the other youngsters can give you better advice.";
		mes "^4d4dffWhy don't you consult Lloyd or Luke?^000000";
		next;
		mes "[Aures]";
		mes "Sigh, he's as stubborn as a mule.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "I heard that.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Then stop it";
		mes "and stop harassing them.";
		mes "The Eden Group won't be happy if it knows about this.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "The Eden Group? *Snort* Who cares?";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "You're helpless.";
		mes "I'm really, really sorry about him.";
		mes "You really should talk to those two.";
		close3;
	case 15:
	case 16:
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "So you've found some clues, eh?";
		mes "Hm, even I'm excited.";
		close3;
	default:
		switch( checkquest(7618,PLAYTIME) ) {
		case -1:
			if (isbegin_quest(7617) == 1) {
				cutin "verus_aures.bmp",0;
				mes "[Aures]";
				mes "Please take that report to Commander Louis.";
				mes "Writing a report every day is a chore, but an important chore nonetheless.";
				next;
				mes "[Aures]";
				mes "I've noticed Louis has been watching us. I hope that's a good sign.";
				close3;
			}
			if ((checkquest(7616,PLAYTIME) == 0 || checkquest(7616,PLAYTIME) == 1) && (checkquest(7629,PLAYTIME) == 0 || checkquest(7629,PLAYTIME) == 1)) {
				cutin "verus_aures.bmp",0;
				mes "[Aures]";
				mes "You came back at the right time.";
				mes "I've made some progress with my research with the Power Control Devices you brought.";
				next;
				mes "[Aures]";
				mes "I just finished writing a report about it";
				mes "along with the energy source that Lloyd is studying.";
				next;
				mes "[Aures]";
				mes "Here's the report.";
				mes "Please ^4d4dffbring it to Louis";
				mes "at the Command Center^000000.";
				setquest 7617;// Turning In Excavation Report
				getitem 6748,1;// Excavator_Repoet
				close3;
			}
			cutin "verus_aures.bmp",0;
			mes "[Aures]";
			mes "Ian is working on Power Control Devices.";
			mes "Lloyd is working on the power supply for the devices.";
			next;
			mes "[Aures]";
			mes "Well, that leaves me with the menial task of organizing documents.";
			mes "Could you help those two?";
			next;
			mes "[Aures]";
			mes "The quicker we gather research materials, the quicker we can report.";
			close3;
		case 0:
		case 1:
			cutin "verus_aures.bmp",0;
			mes "[Aures]";
			mes "Did you deliver the report?";
			mes "It may be a simple errand,";
			mes "but it gives you an opportunity to get acquainted with the Commander.";
			next;
			mes "[Aures]";
			mes "We're old, so we don't care about fame. You're different.";
			mes "Winning favor with Rekenber can go a long way.";
			next;
			mes "[Aures]";
			mes "So let's have you submit reports from now on.";
			close3;
		case 2:
			erasequest 7618;// Reporting the Results - Down
			mes "[Aures]";
			mes "It's time we write another report.";
			mes "I'll do it after I'm done studying Power Control Devices.";
			close3;
		}
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(7619) == 0" );
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(7617) == 0 && isbegin_quest(7618) == 0 && (checkquest(7616,PLAYTIME) == 0 || checkquest(7616,PLAYTIME) == 1) && (checkquest(7629,PLAYTIME) == 0 || checkquest(7629,PLAYTIME) == 1)" );
	end;
}

verus04,144,193,3	script	Ian Atnad#ep152	4_M_IAN,{
	if (checkweight(1301,3) == 0) {
		mes "- Cannot progress quest because you have too many items in your possession. -";
		close;
	}
	mes "[Ian Atnad]";
	switch(ep15_1_atnad) {
	case 0:
	case 1:
	case 2:
	case 3:
	case 4:
		cutin "verus_ian01.bmp",2;
		mes "... that's distracting.";
		close3;
	case 5:
		cutin "verus_ian01.bmp",2;
		mes "What have you been loafing around for?";
		mes "Who the hell is this?";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Ian, why are you like this?";
		mes "This young adventurer was dispatched here from the Eden Group.";
		mes "He is here to help us.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "..Hm... Rookie.";
		mes "I do not need such favors, send them back!";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "I see he is acting like this again..";
		mes "Do you think a bunch of old men can do this task easily?";
		mes "Stop being so stubborn for a change.";
		next;
		cutin "verus_ian03.bmp",2;
		mes "[Ian Atnad]";
		mes "..Hey, Rookie.";
		mes "Are you here to monitor me on my daughter's orders?";
		mes "Is that it?";
		next;
		if (select( "Just here to help.", "That is news to me." ) == 2) {
			cutin "verus_ian02.bmp",2;
			mes "[Ian Atnad]";
			mes "Hum? You did not hear about my daughter?";
			mes "Then I don't need to bring up such idle talk.";
		}
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "...so you know about my relationship with my daughter?";
		mes "So are you trying to stay silent and just do your work?";
		mes "You are trying not to involve yourself?";
		next;
		mes "[Ian Atnad]";
		mes "Good.";
		mes "Then I will order you to do something you really need right away.";
		mes "Let's see how well you can follow my instructions.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "This fellow.. He is like this to the end.";
		mes "Anyway, since we are here, I am at your service as well.";
		mes "I'm afraid the work we want to do is a bit dangerous.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "Stop talking nonsense and come here, Rookie.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Sorry for this.";
		mes "Let's us go first.";
		mes "I have your back.";
		ep15_1_atnad = 6;
		close3;
	case 6:
		cutin "verus_ian01.bmp",2;
		mes "So, you said you will help us with our work?";
		mes "Then let's see how well you do.";
		mes "There is a plaza if you leave this area and go further inside.";
		next;
		mes "[Ian Atnad]";
		mes "There will be machines from a highly advanced civilization.";
		mes "There is an essential device to make the machines run.";
		next;
		mes "[Ian Atnad]";
		mes "For now, there is something temporarily called the ^4d4dffOperation Control Device^000000 because it is still under investigation.";
		mes "Investigate the machine and collect 20 of the Operation Control Devices.";
		next;
		mes "[Ian Atnad]";
		mes "I will see how well you work.";
		setquest 7615;// Core Collection
		ep15_1_atnad = 7;
		close3;
	case 7:
		if (countitem(6749) < 20) {// Power_Control_Device
			cutin "verus_ian01.bmp",2;
			mes "20 Power Control Devices.";
			mes "Should be no problem for one who is recommended by that supposedly great person, should it?";
			mes "Hm.";
			close3;
		}
		cutin "verus_ian02.bmp",2;
		mes ".. Hm..";
		mes "Don't get smug because of this!";
		mes "We will use that for research.";
		mes "Hand over everything you have.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Haha.. This guy is stiff as always.";
		mes "Is it that hard to say one word of thanks for a job well done?";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "Away with you!";
		mes "Why do you keep interfering.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "It is one of the few joys this old man has, so what can you do.";
		mes "I will thank you instead.";
		mes "Anyway, thanks for your trouble.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "You will probably focus on this kind of work in the future.";
		mes "We wanted to study these operation devices butwe didn't know how terrifying those machines were.";
		next;
		mes "[Aures]";
		mes "I will write the report soon so I will ask for you help then as well.";
		delitem 6749, countitem(6749);// Power_Control_Device
		erasequest 7615;// Core Collection
		setquest 7619;// Assisting the Excavation Team
		getexp 750000,500000;
		ep15_1_atnad = 8;
		next;
		cutin "verus_ian03.bmp",2;
		mes "[Ian Atnad]";
		mes "You two are getting along well.";
		mes "Go away!";
		close3;
	case 8:
		cutin "verus_ian01.bmp",2;
		mes "...I still don't trust you.";
		mes "There's a thing called a contract so I'd like it you just quietly keep working.";
		next;
		mes "[Ian Atnad]";
		mes "You're expecting a word of thanks to come out of me...";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Hey. Leave that stubborn fellow and come here for a minute!";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "...... huh.. what are you doing? Go!";
		close3;
	case 9:
	case 10:
	case 11:
	case 12:
		cutin "verus_ian01.bmp",2;
		mes "....you..";
		mes "Why don't you go find something to work on instead of playing around?";
		next;
		mes "[Ian Atnad]";
		mes "I am saying this once more,";
		mes "I don't think you are here just to help us.";
		mes "I am sure Arquien is up to something.";
		next;
		mes "[Ian Atnad]";
		mes ".....hm.";
		mes "Quickly come back to me after you are done with what you are doing.";
		close3;
	case 13:
		cutin "verus_ian01.bmp",2;
		mes "Are you coming back from sending the report?";
		mes "Good timing.";
		mes "Bring me something to snack on.";
		next;
		mes "[Ian Atnad]";
		mes "Not the rations supplies here.. what is that?";
		mes "Find some delicacy to stimulate my appetite since it's hot and stuffy.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Hey buddy. What kind of delicacy are you looking for here?";
		mes "Just take what Louis brought.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "Ah, you stay out of this.";
		mes "This is for the rookie to handle by themself.";
		mes "Find me a ^4d4dffdelicacy that is simple to eat yet juicy and refreshing and has a neat finish^000000!";
		next;
		mes "[Ian Atnad]";
		mes "If you find what I want then I will listen to one wish of yours.";
		mes "Are you not here in hopes of getting something?";
		next;
		cutin "",255;
		mes "In order to ask Ian Atnad about the ^4d4dffLast Exploration^000000";
		mes "it seems a ^4d4dffdelicacy that is simple to eat yet juicy and refreshing and has a neat finish^000000 has to be found.";
		erasequest 7623;// Atnad's Summon
		setquest 7624;// In Search of a Delicacy
		ep15_1_atnad = 14;
		close;
	case 14:
	case 15:
		cutin "verus_ian03.bmp",2;
		mes "Are you going to make me repeat myself?";
		mes "Find me a ^4d4dffdelicacy that is simple to eat yet juicy and refreshing and has a neat finish^000000";
		mes "and I will grant you what you want.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "If it's hard for you find it with that dimwitted head of yours then try to ask others at least!";
		mes "Something that will suit my taste.";
		close3;
	case 16:
		cutin "verus_ian01.bmp",2;
		if (countitem(11519) < 1) {// Beef_Toast
			mes "..Hm.";
			mes "Giving up?";
			mes "Are you really?";
			mes "I didn't see you as someone who would give up so easily..?";
			next;
			mes "[Ian Atnad]";
			mes "If what I requested is that difficult I will take it back.";
			mes "However, you must leave this excavation team.";
			next;
			cutin "",255;
			mes "I must find the lost Beef Toast somewhere.";
			close;
		}
		mes "Hm.. is this it?";
		mes "......Can I indeed eat this conveniently during work without separate silverware.";
		mes "..Smells of freshly cooked meat.";
		next;
		mes "Ian wipes his hands and slowly starts to eat the Beef Toast.";
		next;
		cutin "verus_ian03.bmp",2;
		mes "[Ian Atnad]";
		mes "Um...";
		mes ".....!";
		mes "This... this flavor!";
		mes "Packed with the juiciness of finely ground beef!";
		mes "I can taste the flavor of direct fire..!";
		next;
		cutin "verus_ian02.bmp",2;
		mes "[Ian Atnad]";
		mes "Exotic fruit and vegetables reel in the subtle greasiness of the oil!";
		mes "...!";
		next;
		select("Try the leaves that are wrapped around the outside.");
		cutin "verus_ian04.bmp",2;
		mes "[Ian Atnad]";
		mes "Indeed.. this can be consumed as well.";
		mes "Rich juiciness and fresh salad.. sweet fruit..";
		mes "A fresh finishing flavor to wrap all of it up..!";
		next;
		mes "[Ian Atnad]";
		mes "...Kid..";
		mes "Not bad.";
		mes "You have satisfied all the conditions I have laid out.";
		next;
		mes "[Ian Atnad]";
		mes "I have no choice.";
		mes "Alright. I predicted there was something you wanted.";
		mes "A promise is a promise. What do you want from me?";
		next;
		select("To know about the Last Exploration");
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "... so that was it.";
		mes "I see....";
		mes "To talk about that..give me some time to think.";
		mes "....";
		next;
		mes "[Ian Atnad]";
		mes "I need time to organize it as well.";
		mes ".......";
		mes "Come back later.";
		mes "Please.";
		delitem 11519,1;// Beef_Toast
		erasequest 7626;// Delicacy for Him
		setquest 7627;// Last Exploration
		ep15_1_atnad = 17;
		close3;
	case 17:
	case 18:
	case 19:
		cutin "verus_ian01.bmp",2;
		mes "Have you arrived?";
		mes "Have you adjusted to the excavation site?";
		mes "So what is it this time.";
		next;
		switch( select( "About the excavation project", "Converse", "Cancel" ) ) {
		case 1:
			callsub S_Daily;
			close3;
		case 2:
			cutin "verus_ian04.bmp",2;
			mes "[Ian Atnad]";
			if (ep15_1_atnad == 17) {
				mes "It's good that you're here.";
				mes "The access permit for the Laboratories and Research facilities dropped apparently.";
				mes "So we plan to expand the investigation area..";
				next;
				select("What about the Last Exploration!");
				cutin "verus_ian01.bmp",2;
				mes "[Ian Atnad]";
				mes "..the Last Exploration, it wasn't much.";
				mes "The exploration site was Juperos.";
				mes "There were various goals but..";
				next;
				mes "[Ian Atnad]";
				mes "I know well that it was a major turning point for my life.";
				mes "I feel like there is fog in my head.";
				mes "And I think I will find another turning point here.";
				next;
				mes "[Ian Atnad]";
				mes "It is just a feeling though.";
				mes "I don't think the place I've been looking for and this place are related.";
				next;
				mes "[Ian Atnad]";
				mes "So won't you help me for the time being?";
				mes "....";
				next;
				select("I have no choice.");
				mes "[Ian Atnad]";
				mes "Yes, this is the last task.";
				mes "Arquien has to know, too.";
				mes "We will start soon so come back when you're ready.";
				ep15_1_atnad = 18;
				close3;
			}
			if (ep15_1_atnad == 18) {
				cutin "verus_ian01.bmp",2;
				mes "The position of our excavation team has improved quite a bit due to your actions.";
				mes "Thanks to you we received permission to explore closed areas.";
				next;
				mes "[Ian Atnad]";
				mes "So we are trying to expand the investigating area.";
				mes "But it seems there was a reason it was shut down.";
				next;
				mes "[Ian Atnad]";
				mes "It seems there are a lot of machines in that area that react sensitively to organisms.";
				mes "Furthermore there was a veil of peculiar energy..";
				next;
				mes "[Ian Atnad]";
				mes "Check out the Research facilities area first.";
				mes "Let me know if there is anything peculiar.";
				erasequest 7627;// Last Exploration
				setquest 7641;// Access Permitted
				setquest 7642;// Explore Research facilities
				ep15_1_atnad = 19;
				ep15_2_permit = 1;
				close3;
			}
			cutin "verus_ian01.bmp",2;
			mes "They say the Research facilities area is connected to the road going up from the right side of the plaza.";
			mes "Well, if you get up there the corporate bastards will be there restricting access.";
			next;
			mes "[Ian Atnad]";
			mes "If you find something worth risking danger for come back right away and tell me!";
			close3;
		case 3:
			cutin "verus_ian01.bmp",2;
			mes "[Ian Atnad]";
			mes "Let's look around as well instead of just working.";
			mes "These kind of opportunities are rare.";
			close3;
		}
	case 20:
		cutin "verus_ian01.bmp",2;
		mes "You're finally here.";
		mes "So, did you get any results?";
		next;
		if (countitem(6757) < 1) {	// todo missing text
			close3;
		}
		cutin "verus_ian02.bmp",2;
		mes "[Ian Atnad]";
		mes "Hm...? Wh..what. What is that in your hand?!";
		mes "How...can this be.";
		mes "I didn't imagine I would see this here...?";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Huh? What is it?";
		mes "It looks like your eyes are going to pop out.";
		mes "Let me share in the surprise.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "This..this is.";
		mes "Is a Memory Record.. Didn't you talk about this to me once?";
		next;
		mes "[Ian Atnad]";
		mes "My great-grandparents had something that looked like this...";
		mes "It is a type of recording medium that records voices and sounds.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Ooh... Is it magic?";
		mes "I know a bit of picture magic that can preserve images seen by the eye..";
		mes "Is it something similar?";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "No. This is not an application of magic.";
		mes "This is purely a product of science. I've seen my great-grandparents use this to listen to songs or record voices.";
		next;
		mes "[Ian Atnad]";
		mes "In my youth I thought it was merely a toy-like invention of my great-grandparents....";
		mes "Now I wonder why they did not announce that technology.";
		next;
		mes "[Ian Atnad]";
		mes "It is a memory when I was very young but it looks just like this.";
		mes "..can we know the contents of the Memory Record with that.";
		next;
		cutin "verus_ian02.bmp",2;
		mes "[Ian Atnad]";
		mes "I need that! I see!";
		mes "That..";
		mes "...Ah....";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Hey, there. Are you okay?";
		mes "Isn't the device that can decipher it in your house?";
		next;
		mes "[Aures]";
		mes "You.. ah...";
		mes "I see. Ahahahahaha..";
		mes "This guy. You don't know where your house is?";
		mes "Ahahahahaha!";
		next;
		cutin "verus_ian03.bmp",2;
		mes "[Ian Atnad]";
		mes ".... Didn't you say Arquien disposed of the house..?";
		mes "We can easily figure it out if only we had the record player.";
		next;
		select("..What? Why are you looking at me?");
		mes "[Ian Atnad]";
		mes "You're that child's informant!";
		mes "So go there and bring back the ^4d4dffrecord player^000000.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "I see. The one who can easily talk to her right now is you.";
		mes "If it's okay we would like to ask you to do so.";
		erasequest 7643;// Mysterious Piece
		setquest 7644;// Record Player
		ep15_1_atnad = 21;
		close3;
	case 21:
		cutin "verus_ian01.bmp",2;
		mes "Find that child Arquien, and bring back the record player.";
		mes "She must give me at least that much.";
		close3;
	case 22:
	case 23:
	case 24:
	case 25:
		cutin "verus_ian03.bmp",2;
		mes "I cannot tell what that child is up to.";
		mes "If she has a problem with me tell her to come and say it to me directly!";
		next;
		mes "[Ian Atnad]";
		mes "...Why in the world is she not going to give it!";
		mes "Then are you going to go and listen to it every time?";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "Well, that's not bad either.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "Yeah, not bad.";
		mes "Not!";
		mes "Anyway.. Since it turned out like this you make sure to bring it. Okay?";
		close3;
	case 26:
		cutin "verus_ian01.bmp",2;
		mes "Did you see some results this time?";
		next;
		select("Tell him the contents of the Memory Record.");
		cutin "verus_ian02.bmp",2;
		mes "[Ian Atnad]";
		mes "...Any chance you misheard it?";
		mes "Why is Atnad mentioned there?";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "You never know.";
		mes "Since you had the record thing in your house, could it be you are a descendant of this city?";
		next;
		cutin "verus_ian02.bmp",2;
		mes "[Ian Atnad]";
		mes "I am... a descendant of this city..Verus?";
		mes "Then why has this place been uncovered now?";
		mes "Shouldn't we have known of this place much sooner?";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "No no. It was strange.";
		mes "That's why Juperos.. That's why Juperos wasn't unfamiliar to me so I latched on.";
		next;
		mes "[Ian Atnad]";
		mes "If my ancestors are of this city.. why did they keep it a secret?";
		next;
		select("That we don't know.");
		mes "[Ian Atnad]";
		mes "Yes.. yes. Of course we do not know.";
		mes "It seems we will have to find more of those Memory Records to know more.";
		next;
		mes "[Ian Atnad]";
		mes "I am sorry, but.. you went to the Research facilities, right?";
		mes "Do you know of the enormous underground facility discovered near the laboratories?";
		next;
		mes "[Ian Atnad]";
		mes "First time hearing of it?";
		mes ".. It seems things like Memory Records are being found in that underground facility as well.";
		next;
		mes "[Ian Atnad]";
		mes "Let's take the initiative before the others start to get interested.";
		mes "The others can't decipher the messages anyway.";
		next;
		cutin "verus_ian03.bmp",2;
		mes "[Ian Atnad]";
		mes "And, if we gather enough Memory Records.....";
		mes "Go to Arquien and find out the... ugh... contents.";
		mes "Do you understand?";
		erasequest 7647;// Report Memory Record
		setquest 7648;// Memory Records of the Laboratories
		ep15_1_atnad = 27;
		close3;
	case 27:
		cutin "verus_ian01.bmp",2;
		mes "You will find the restricted area if you go to the connected path North-west of the plaza area.";
		mes "We have an excavation permit so you can enter.";
		next;
		mes "[Ian Atnad]";
		mes "But I hear there are strange robots that are acting aggressively so be careful.";
		next;
		mes "[Ian Atnad]";
		mes "Come back after you find the entry path to the underground facility there.";
		mes "Remember ^4d4dffcollecting Memory Records from the laboratories is the goal^000000.";
		next;
		mes "[Ian Atnad]";
		mes "At least five? We need five to decipher it right?";
		mes "Collect them and go to Arquien.";
		close3;
	case 28:
	case 29:
		cutin "verus_ian03.bmp",2;
		mes "This time too!";
		mes "Why.. why is that child acting like this!";
		next;
		cutin "verus_ian02.bmp",2;
		mes "[Ian Atnad]";
		mes "What? She wants to participate in this project too?";
		mes "She will regularly decipher the Memory Records and send the results..?";
		next;
		mes "[Ian Atnad]";
		mes "...Why is she doing this. And so suddenly..?";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "It seems she's become aware of something as well.";
		mes "Is this not a good thing?";
		mes "Father and daughter can get along and figure out their ancestors' past.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "...Is it?. Is there no other way?";
		mes "Anyway, you go and see the results.";
		mes "You have to check if Arquien is doing it correctly.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "We need somebody to collect the Memory Records as well?";
		mes "Ahahahahaha";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "Well, that's not untrue...";
		mes "Anyway go along.";
		close3;
	case 30:
		if (ep15_2_permit == 6) {
			cutin "verus_ian01.bmp",2;
			mes "Have you arrived?";
			mes "In fact I have been waiting.";
			next;
			select("Is there something wrong?");
			mes "[Ian Atnad]";
			mes "Something wrong? Something is wrong.";
			mes "Something is very wrong.";
			next;
			cutin "ep15_tatio01.bmp",0;
			mes "[Rekenber Chief Secretary]";
			mes "Hello?";
			mes "I am the Chief Secretary of Rekenber's Secretariat, W.H.";
			mes "I have been waiting.";
			next;
			select("Chairman Rekenber's secretary?");
			mes "[Rekenber Chief Secretary]";
			mes "That is right.";
			mes "I serve Chairman Rekenber.";
			next;
			cutin "verus_ian02.bmp",2;
			mes "[Ian Atnad]";
			mes "So, what's the mighty Chairman's secretary doing in a place like this?";
			mes "I thought there were reports on the excavation being separately sent?";
			next;
			cutin "ep15_tatio01.bmp",0;
			mes "[Rekenber Chief Secretary]";
			mes "The chairman wants to meet all of you.";
			mes "Come and visit the headquarters in Rihrtarzen anytime.";
			next;
			mes "[Rekenber Chief Secretary]";
			mes "It would be better if you could visit as soon as possible..";
			mes "We request the Memory Record content be left undisclosed for the time being.";
			next;
			cutin "verus_ian03.bmp",2;
			mes "[Ian Atnad]";
			mes "Why is that?";
			mes "Why should we do that?";
			next;
			cutin "ep15_tatio01.bmp",0;
			mes "[Rekenber Chief Secretary]";
			mes "Hm.. I think I know what you are going to say but...";
			mes "Let's just say the time is not right yet.";
			next;
			mes "[Rekenber Chief Secretary]";
			mes "We invited you to discuss the details of that issue as well.";
			mes "So it would better to visit soon, would it not?";
			mes "We will be waiting.";
			next;
			cutin "verus_aures.bmp",0;
			mes "[Aures]";
			mes "What..is.. going on here..";
			mes "Hey Ian, did you get on the wrong side of the corporation?";
			next;
			cutin "verus_ian01.bmp",2;
			mes "[Ian Atnad]";
			mes "I don't know!";
			mes "We should go anyway since they told us to.";
			mes "Hey you.";
			next;
			select("Me?");
			mes "[Ian Atnad]";
			mes "Yes. You.";
			mes "They say you have to accompany us.";
			mes "Let's meet at the Rekenber Corporation Headquarters.";
			mes "It's better to take care of things like this at once.";
			ep15_1_atnad = 31;
			close3;
		}
		cutin "verus_ian01.bmp",2;
		mes "I will leave deciphering the Memory Records up to you and Arquien for the time being.";
		mes "Since you say you won't ask about the Last Exploration any more..";
		mes "What is it today?";
		next;
		if (select( "About the excavation project", "About the Memory Records" ) == 1) {
			callsub S_Daily;
			close3;
		}
		mes "[Ian Atnad]";
		if (isbegin_quest(7649) != 1) {
			cutin "verus_ian01.bmp",2;
			mes "If I think about it this kind of structure isn't bad either.";
			mes "The content recorded in the Memory Records is what is important.";
			next;
			mes "[Ian Atnad]";
			mes "Since I am getting results without moving a finger..";
			mes "......Good.. I will think positively. Yeah.";
			close3;
		}
		cutin "verus_ian01.bmp",2;
		mes "I cannot figure out what Arquien is thinking.";
		mes "It would be so much better for me to bring back the Record player.";
		next;
		cutin "verus_ian02.bmp",2;
		mes "[Ian Atnad]";
		mes "What? She wants to participate in this project too?";
		mes "She will regularly decipher the Memory Records and send the results..?";
		next;
		mes "[Ian Atnad]";
		mes "It's odd she's like this now when she used to hate even dreaming of working.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "It seems she's become aware of something as well.";
		mes "Is this not a good thing?";
		mes "Father and daughter can get along and figure out their ancestors' past.";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "...Is that so? Is there no other way?";
		mes "Anyway, it seems we need your help.";
		mes "You have to check if Arquien is doing it correctly.";
		next;
		cutin "verus_aures.bmp",0;
		mes "[Aures]";
		mes "We need somebody to collect the Memory Records as well?";
		mes "Ahahahahaha";
		next;
		cutin "verus_ian01.bmp",2;
		mes "[Ian Atnad]";
		mes "Well, that's not untrue...";
		mes "^4d4dffWork with Arquien for the time being.^000000";
		erasequest 7649;// Report Memory Record Content
		close3;
	case 31:
	case 32:
	case 33:
		cutin "verus_ian01.bmp",2;
		mes "What are you doing? Hurry up.";
		mes "^4d4dffRekenber Headquarters is in Lighthalzen^000000.";
		mes "You go on ahead. Let's meet there.";
		close3;
	default:
		cutin "verus_ian01.bmp",2;
		mes "You can never know what will happen.";
		mes "I guess I should be happy with exclusive rights to the Memory Records.";
		mes "What is it today?";
		next;
		select("About the excavation project");
		callsub S_Daily;
		close3;
	}
	end;

S_Daily:
	mes "[Ian Atnad]";
	mes "The excavation project?";
	mes ".. do you mean the Power Control Device?";
	next;
	mes "[Ian Atnad]";
	switch( checkquest(7616,PLAYTIME) ) {// Core Collection - Down
	case -1:
		if (isbegin_quest(7615) == 0) {// Core Collection
			cutin "verus_ian01.bmp",2;
			mes "Are you talking about today's work?";
			mes "It may be obvious but it is to look for Power Control Devices.";
			mes "...";
			mes "..You don't have to do it if you don't want to.";
			next;
			if (select( "I will look for Power Control Devices.", "It is too hard." ) == 1) {
				mes "[Ian Atnad]";
				mes "You? You definitely said you will find them yourself?";
				mes "I have no reason to reject this offer.";
				mes "Since you said you will do it yourself.";
				next;
				mes "[Ian Atnad]";
				mes "Collect 20 Power Control Devices this time as well.";
				mes "If we can unravel the secret of Power Control Devices...";
				mes "We should be able to fix the broken ones and use them ourselves, right?";
				mes "It will be fun.";
				next;
				mes "[Ian Atnad]";
				mes "... And.. I feel like I've seen it.. feels like I will know it.";
				mes "Like I will remember. If I research and research until it is stuck in my brain I am sure something will come of it.";
				setquest 7615;// Core Collection
				return;
			}
			mes "[Ian Atnad]";
			mes "If you aren't here to work then go away.";
			mes "You're distracting me.";
			return;
		}
		if (countitem(6749) < 20) {// Power_Control_Device
			mes "It's always the same.";
			mes "It's ^4d4dff20 Power Control Devices^000000.";
			mes "Since we're already here, I want to do this right so try not to mess up.";
			return;
		}
		mes "You got it right again.";
		mes "....";
		mes "What are you looking at?";
		mes "Drop what you brought and leave.";
		next;
		mes "[Ian Atnad]";
		mes "......This time I will use it well without breaking it.";
		mes "Let's slowly get into restoration as well.";
		delitem 6749, countitem(6749);// Power_Control_Device
		erasequest 7615;// Core Collection
		setquest 7616;// Core Collection - Down
		getexp 1500000,1000000;
		return;
	case 0:
	case 1:
		mes "We are researching it now.";
		mes "It's possible we will render it useless from the experiments.";
		mes "Anyway I am busy now so leave me alone.";
		return;
	case 2:
		erasequest 7616;// Core Collection - Down
		mes "The Power Control Devices we recovered in the past are all broken.";
		mes "They couldn't withstand all the experiments.";
		mes "Just like the ones now.";
		next;
		cutin "verus_ian04.bmp",2;
		mes "[Ian Atnad]";
		mes "Arquien is like that too.";
		mes "......Because she couldn't withstand it... ..";
		mes "...Hoo..";
		return;
	}
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "!isbegin_quest(7616) && ep15_1_atnad > 16" );
	end;
}

//- Wandering Bard Quest
verus03,129,21,5	script	Wandering Bard#ep15	1_M_BARD,{
function checkstatusquest;

	if (BaseLevel < 99) {
		mes "[Wandering Bard]";
		mes "This is very dangerous,";
		mes "It is best to leave here,";
		mes "The front is about to face";
		mes "the danger of extreme death.";
		close;
	}
	mes "[Wandering Bard]";
	if (isbegin_quest(4295) == 2) {// Wandering Bard
		mes "I've told you";
		mes "everything I wanted to tell you.";
		mes "I hope we'll meet again someplace else.";
		next;
		mes "[Wandering Bard]";
		mes "Until then,";
		mes "stay safe.";
		mes "I'm leaving for someplace else";
		mes "in search of new stories to tell.";
		mes "You'll be on your way, I'll be on my.";
		close;
	}

	switch( checkquest(4296,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		mes "I don't have a story to tell you at this moment.";
		mes "I'm trying to rest my mind.";
		mes "Why don't you go";
		mes "rest for a while?";
		close;
	case 2:
		erasequest 4296;
		break;
	}

	setarray .@quest_id[0],
		4297,	// Bard's Story: Some Corporation
		4298,	// Bard's Story: The President
		4299,	// Bard's Story: a Scholar in Juno
		4300,	// Bard's Story: a Mad Scientist
		4301,	// Bard's Story: Hugel
		4302;	// Bard's Story: Odin Temple
	.@size_quest_id = getarraysize(.@quest_id);

	for ( .@i = 0; .@i < .@size_quest_id; .@i++ ) {
		switch( isbegin_quest(.@quest_id[.@i]) ) {
		case 0:
			.@quest_undone[.@size_undone] = .@quest_id[.@i];
			.@size_undone++;
			continue;
		case 1:
			break;
		case 2:
			.@total += 2;
			continue;
		}
		break;
	}

	if (.@i < .@size_quest_id) {
		mes "Adventurer,";
		mes "what story";
		mes "did you bring me?";
		next;
		if (checkstatusquest(.@quest_id[.@i]) == 0) {
			mes "^ff0000You have not yet met the requirements to complete the quest.^000000";
			next;
			if (select( "Return the quest.", "End conversation." ) == 2) {
				mes "[Wandering Bard]";
				mes "Please be safe.";
				close;
			}
			mes "[Wandering Bard]";
			mes "Maybe you're not ready";
			mes "for that task just yet.";
			next;
			mes "[Wandering Bard]";
			mes "Come back later,";
			mes "and I'll have a new story ready for you.";
			mes "Bye for now.";
			erasequest .@quest_id[.@i];
			if (.@quest_id[.@i] == 4297)	// actually this quest is the only one to give a delay
				setquest 4296;// Take a Break
			close;
		}
		mes "- Tell your story. -";
		next;
		mes "[Wandering Bard]";
		switch( .@quest_id[.@i] ) {
		case 4297:
			mes "Maybe there's";
			mes "more to it than that,";
			mes "but we wouldn't know";
			mes "because it's too late.";
			next;
			mes "[Wandering Bard]";
			mes "Your story dampens my mood,";
			mes "and I wasn't in a good mood to begin with.";
			mes "Well, at least I'm glad to see you back in one piece.";
			break;
		case 4298:
			mes "Schwarzwald seems to be";
			mes "split into";
			mes "various political factions.";
			mes "Political intrigues don't mean much";
			mes "to wandering artists like me.";
			next;
			mes "[Wandering Bard]";
			mes "I'm proud of you, though:";
			mes "you've become acquainted with the president";
			mes "and carried out a secret mission for him.";
			mes "And I'm also glad to see you back in one piece.";
			break;
		case 4299:
			mes "Scholars are such a strange kind.";
			mes "I can't fathom what joy they'd feel";
			mes "in studying such a thing.";
			next;
			mes "[Wandering Bard]";
			mes "Of course, to some people";
			mes "my search for new stories";
			mes "sounds meaningless.";
			mes "I don't care, so long as I have";
			mes "curious adventurers like you with whom to pass the time.";
			next;
			mes "[Wandering Bard]";
			mes "Welcome back.";
			mes "I really enjoyed this story of yours.";
			break;
		case 4300:
			mes "Only the gods know";
			mes "who's right";
			mes "and who's wrong.";
			mes "I believe that applies to those scientists as well.";
			next;
			mes "[Wandering Bard]";
			mes "If you ask me,";
			mes "I can't say which side is right or wrong.";
			mes "Can you?";
			next;
			mes "[Wandering Bard]";
			mes "Welcome back.";
			mes "I really enjoyed this story of yours.";
			break;
		case 4301:
			mes "The advancement of technology doesn't always mean";
			mes "the destruction of the old.";
			mes "Technology cannot advance by itself.";
			mes "Neither can medical science";
			mes "and life research.";
			next;
			mes "[Wandering Bard]";
			mes "Um,";
			mes "at least that's what I've heard.";
			mes "...Just forget I said that.";
			next;
			mes "[Wandering Bard]";
			mes "The general populace";
			mes "only likes to hear about happy endings,";
			mes "so let's focus on";
			mes "the positive aspects of the story,";
			next;
			mes "[Wandering Bard]";
			mes "Welcome back.";
			mes "instead of";
			mes "the dark,";
			mes "depressing ones.";
			break;
		case 4302:
			mes "I'm not sure if the same thing";
			mes "won't happen";
			mes "in this excavation site";
			mes "because even I can sense a dangerous shadow looming over it.";
			next;
			mes "[Wandering Bard]";
			mes "And about the last person you've met,";
			mes "um...";
			next;
			mes "[Wandering Bard]";
			mes "Never mind. I shouldn't even have said that.";
			next;
			mes "[Wandering Bard]";
			mes "We can only watch";
			mes "the factions conspire against each other";
			mes "and hope for";
			mes "the best.";
			mes "As a bard, my duty is simply to spread the word to the public.";
			next;
			mes "[Wandering Bard]";
			mes "I'm glad to see you back in one piece.";
			mes "And thank you";
			mes "for such a valuable story.";
			break;
		}
		next;
		mes "[Wandering Bard]";
		if (.@total == 10) {
			mes "Sigh, I hate to say this,";
			mes "but this will have to be the last time";
			mes "we share stories with each other.";
			mes "Thank you for telling me all those interesting tales.";
			next;
			mes "[Wandering Bard]";
			mes "Please take this.";
			mes "I hope";
			mes "it'll be useful for you.";
			mes "I hope we'll meet again someplace else.";
			completequest .@quest_id[.@i];
			setquest 4295;// Wandering Bard
			completequest 4295;
			getitem 12263,5;// Comp_Battle_Manual
			next;
			mes "[Wandering Bard]";
			mes "I have to leave";
			mes "in search of new stories.";
			mes "You'll be on your way, I'll be on my.";
			mes "Be safe.";
			close;
		}
		completequest .@quest_id[.@i];
		setquest 4296;// Take a Break
		mes "Please give me some time.";
		mes "I want to make a new song";
		mes "based on the story you've just told me.";
		next;
		mes "[Wandering Bard]";
		mes "You should rest and regroup in the meantime.";
		close;
	}
	.@r = rand(.@size_undone);
	setquest .@quest_undone[.@r];
	mes "Listen to my story.";
	next;
	mes "[Wandering Bard]";
	switch( .@quest_undone[.@r] ) {
	case 4297:
		mes "In the Republic of Schwarzwald,";
		mes "where science prevails over magic,";
		mes "a giant corporation of men";
		next;
		mes "[Wandering Bard]";
		mes "is rumored to conduct research";
		mes "whose purpose is noble and questionable at the same time.";
		mes "Do you know";
		mes "what's going on behind the closed doors of the corporation?";
		next;
		mes "[Wandering Bard]";
		mes "You should";
		mes "look further into what that corporation is doing.";
		mes "Please be careful.";
		close;
	case 4298:
		mes "Do you know the president of";
		mes "the Republic of Schwarzwald?";
		mes "Usually, commoners like you and me";
		mes "could never dream of meeting such a prominent figure,";
		next;
		mes "[Wandering Bard]";
		mes "but rumor has it you can";
		mes "if you can find his contact in Lighthalzen.";
		mes "Not only can you meet the president,";
		mes "but you can unlock some new adventure.";
		next;
		mes "[Wandering Bard]";
		mes "Look for his contact,";
		mes "and everything else will take care of itself.";
		mes "Who knows?";
		mes "The adventure of your life might await you.";
		close;
	case 4299:
		mes "I wonder where all these researchers";
		mes "have come from.";
		mes "They must be";
		mes "from all over the globe,";
		mes "seeking the thrills of discovering the unknown.";
		next;
		mes "[Wandering Bard]";
		mes "I think the most daring kind of people are";
		mes "scholars and researchers,";
		mes "like those at the Juno Library...";
		next;
		mes "[Wandering Bard]";
		mes "Oh, speaking of the Juno Library,";
		mes "I know there's a scholar";
		mes "who does the same kind of research,";
		mes "you know,";
		mes "looking at odd-looking things all day.";
		next;
		mes "[Wandering Bard]";
		mes "You should";
		mes "talk to that scholar.";
		mes "He may open your eyes to a whole new world.";
		close;
	case 4300:
		mes "Are these people";
		mes "helping each other?";
		next;
		mes "[Wandering Bard]";
		mes "Rumor has it there's a mad scientist";
		mes "in Juno, and a group of people are";
		mes "trying to thwart his dangerous research.";
		next;
		mes "[Wandering Bard]";
		mes "I'd say the statement is biased.";
		mes "Maybe the scientist is sound,";
		mes "and those people are dangerous.";
		mes "Who knows? I would steer clear of both of them, though, if I were you.";
		close;
	case 4301:
		mes "Scholars. Where do they draw the line at their research?";
		mes "Drifters like you and me";
		mes "have no care for the world, and I'm glad for that.";
		next;
		mes "[Wandering Bard]";
		mes "In Hugel, there's a scholar";
		mes "who's rumored to be obsessed with a dangerous experiment.";
		mes "I want you to go find out";
		mes "what it is he's after:";
		mes "happiness or hollow ambition.";
		close;
	case 4302:
		mes "I've seen the same scenery";
		mes "a long time ago,";
		mes "when Odin Temple";
		mes "was first discovered.";
		next;
		mes "[Wandering Bard]";
		mes "Oh, that reminds me";
		mes "of the story about";
		mes "the two--no, three people related to Odin Temple.";
		next;
		mes "[Wandering Bard]";
		mes "I wonder if Hugel still has the signboard";
		mes "to recruit excavators.";
		mes "Would you go check it out?";
		mes "I want to hear the story behind those excavators when you get back.";
		close;
	}
	end;

function checkstatusquest {
	switch( getarg(0) ) {
	case 4297:
		if (lhz_curse >= 31)// Cursed Spirit Quest
			return true;
		break;
	case 4298:
		if (lhz_boss >= 43)// President Quest
			return true;
		break;
	case 4299:
		if (yuno_hist >= 10)// Juperos Ruins History Quest
			return true;
		break;
	case 4300:
		if (metto_q >= 9)// Metto Quest
			return true;
		break;
	case 4301:
		if (hg_bio >= 9)// Biological Weapon Quest
			return true;
		break;
	case 4302:
		if (hg_odin >= 60)// Odin Temple Excavation Quest
			return true;
		break;
	}
	return false;
}
}

//- Police Quests
verus04,133,212,4	script	Police Chief Kesler#EP15_1	2_M_SWORDMASTER,{
	if (checkweight(1301,1) == 0) {
		mes "- You are carrying too many items to continue. -";
		close;
	}
	.@playtime_5318 = checkquest(5318,PLAYTIME);	// Come Back Tomorrow
	.@quest_5309 = isbegin_quest(5309);				// Police Chief's Request
	if (.@playtime_5318 == 2) {
		erasequest 5318;
		mes "[Police Chief Kesler]";
		mes "Nice to meet you. I'm Kesler, chief of the Phantasmagorika Police.";
		emotion ET_DELIGHT;
	}
	else {
		mes "[Police Chief Kesler]";
		mes "Welcome to the Phantasmagorika Police.";
		emotion ET_PROFUSELY_SWEAT;
	}
	next;
	if (countitem(6753) < 1)// Sign_Of_Destruction
		.@menu$[0] = "What should I beware while in Phantasmagorika";
	else
		.@menu$[1] = "I brought Doom Tokens.";
	switch( select( "The Phantasmagorika Police?", "Is there anything I can do to help?", .@menu$[0], .@menu$[1], "Nothing." ) ) {
	case 1:
		emotion ET_SCRATCH;
		mes "[Police Chief Kesler]";
		mes "Oh, do you want to know about us at the ^4E9867Phantasmagorika Police^000000? Why, thank you. Not many people are interested in what we do.";
		next;
		mes "[Police Chief Kesler]";
		mes "You may wonder why such a fresh site needs a policing unit. Well, there's a valid reason.";
		next;
		select("What's that?");
		mes "[Police Chief Kesler]";
		mes "Have you heard of the ^F8081EDoom Prayers^000000?";
		next;
		emotion ET_FRET;
		mes "[Police Chief Kesler]";
		mes "They're a cult group propagating the end of the world. They vandalize in the name of their god.";
		next;
		mes "[Police Chief Kesler]";
		mes "It's only recent that they appeared in Phantasmagorika, but they've done so much damage already that scholars and mercenaries have organized this policing unit.";
		next;
		mes "[Police Chief Kesler]";
		mes "The ^F8081EDoom Prayers^000000 are mainly sighted around the ^82ABE9Verus Central Plaza^000000. If you encounter them, feel free to teach them a lesson or two.";
		next;
		emotion ET_SMILE;
		mes "[Police Chief Kesler]";
		mes "Hah hah, we're short-staffed.";
		close;
	case 2:
		if (isbegin_quest(5309) == 0) {
			mes "[Police Chief Kesler]";
			if (BaseLevel < 140) {
				mes "I understand your enthusiasm, but you should focus on your training for now.";
				next;
				emotion ET_SORRY;
				mes "[Police Chief Kesler]";
				mes "Phantasmagorika is more dangerous than you think.";
				close;
			}
			if (.@playtime_5318 == 0 || .@playtime_5318 == 1) {
				mes "Thank you for offering to help, but we can manage on our own.";
				close;
			}
			if (isbegin_quest(5304) == 0) {
				emotion ET_HUK;
				mes "I'm sorry, what did you say?";
				next;
				select("Is there anything I can do to help?");
			}
			mes "[Police Chief Kesler]";
			mes "Wow, you're the first person to ever offer help. We're spread thin, dealing with the Doom Prayers and everything else at the same time.";
			next;
			mes "[Police Chief Kesler]";
			mes "I haven't had time to hear about the work-related difficulties trat the members of my unit may be experiencing.";
			next;
			mes "[Police Chief Kesler]";
			mes "Could you make a tour around Phantasmagorika and talk to the police officers?";
			next;
			if (select( "Sure.", "Maybe later." ) == 2) {
				emotion ET_CRY;
				mes "[Police Chief Kesler]";
				mes "Oh, I thought you wanted to help.";
				close;
			}
			setquest 5309;// Police Chief's Request
			mes "[Police Chief Kesler]";
			mes "Thank you.";
			close;
		}
		if (isbegin_quest(5310) == 0 || isbegin_quest(5311) == 0 || isbegin_quest(5312) == 0 || isbegin_quest(5313) == 0) {
			emotion ET_QUESTION;
			mes "You haven't met with all the members.";
			next;
			mes "[Police Chief Kesler]";
			mes "Please come back when you have.";
			close;
		}
		mes "You've met with all my members. Thank you.";
		next;
		mes "[Police Chief Kesler]";
		mes "I'm glad none of them--Salgran, Gerev, Seiden, and Piffs--are having problems.";
		next;
		mes "[Police Chief Kesler]";
		mes "Please take this small token of my appreciation.";
		next;
		for ( .@quest_id = 5309; .@quest_id <= 5313; .@quest_id++ )
			erasequest .@quest_id;
		for ( .@quest_id = 5314; .@quest_id <= 5317; .@quest_id++ ) {
			if (isbegin_quest(.@quest_id) == 2) {
				erasequest .@quest_id;
				.@success++;
			}
		}
		setquest 5318;// Come Back Tomorrow
		getexp 200000 + (200000 * .@success),0;
		mes "[Police Chief Kesler]";
		mes "If you are not busy tomorrow, could you come back and help me again?";
		close;
	case 3:
		emotion ET_HUK;
		mes "[Police Chief Kesler]";
		mes "Oh, is this your first time in Phantasmagorika?";
		next;
		mes "[Police Chief Kesler]";
		mes "This site was only recently discovered, and therefore fairly safe. I can't think of anything you should be worried about...";
		next;
		emotion ET_HUK;
		mes "[Police Chief Kesler]";
		mes "Oh, strike that--there's one thing.";
		next;
		mes "[Police Chief Kesler]";
		mes "This ^82ABE9Verus Excavation Site^000000 is safe, but if you're planning to move to the ^82ABE9Verus Central Plaza^000000, then make sure you're prepared for the worst.";
		next;
		mes "[Police Chief Kesler]";
		mes "By the way the excavation of this site just has begun, and everything in it must be kept in place until the excavation is over.";
		next;
		emotion ET_FRET;
		mes "[Police Chief Kesler]";
		mes "But those Doom Payers are making it impossible. Bah! %$#@#$#@";
		next;
		mes "[Police Chief Kesler]";
		mes "I'm going bald, worrying over them so much. I didn't have much hair to begin with.";
		next;
		mes "[Police Chief Kesler]";
		mes "...";
		next;
		mes "[Police Chief Kesler]";
		mes "Um, didn't mean to rant about my hair.";
		next;
		emotion ET_OK;
		mes "[Police Chief Kesler]";
		mes "Just be careful not to break anything that has been discovered in this site.";
		close;
	case 4:
		if (isbegin_quest(5304) == 2) {
			mes "[Police Chief Kesler]";
			mes "Oh, didn't you bring some Doom Tokens a while ago?";
			next;
			mes "[Police Chief Kesler]";
			mes "I guess you haven't left? You must like being here. So do I. Hah hah hah!";
			while(1) {
				next;
				switch( select( "What can I get in exchange for Doom", "Give Doom Tokens.", "Nothing." ) ) {
				case 1:
					mes "[Police Chief Kesler]";
					mes "I remember telling you this when you first brought Doom Tokens, but all right, I don't mind telling you again.";
					next;
					mes "[Police Chief Kesler]";
					mes "Doom Tokens are exchangeable with Packing Envelope that is often found in the excavation site.";
					next;
					mes "[Police Chief Kesler]";
					mes "Scholars have found out the envelop activates various effects when opened.";
					next;
					mes "[Police Chief Kesler]";
					mes "The duration of the effects is short, but it's still better than nothing.";
					continue;
				case 2:
					.@amount = countitem(6753);// Sign_Of_Destruction
					.@r = (.@amount > 2) ? .@amount : (.@amount - 2);
					.@reward_amount = rand(.@r, .@amount);
					delitem 6753, .@amount;
					getitem 22611, .@reward_amount;// Packed_Envelope
					mes "[Police Chief Kesler]";
					mes "You've brought " + .@amount + " Doom Tokens. I can give you " + .@reward_amount + " Packing Envelopes.";
					next;
					mes "[Police Chief Kesler]";
					mes "Thank you, and keep up the good work.";
					close;
				case 3:
					emotion ET_SCRATCH;
					mes "[Police Chief Kesler]";
					mes "Um, didn't you say you had Doom Tokens?";
					close;
				}
			}
		}
		emotion ET_HUK;
		mes "[Police Chief Kesler]";
		mes "Oh, the Doom Prayers carry this ^F8081EDoom Token^000000.";
		next;
		mes "[Police Chief Kesler]";
		mes "Where did you find this?";
		next;
		select("Tell him where you found it.");
		emotion ET_THANKS;
		mes "[Police Chief Kesler]";
		mes "Thank you so much for helping us to maintain public peace.";
		next;
		mes "[Police Chief Kesler]";
		mes "You deserve a reward, but I can't think of anything good.";
		next;
		mes "[Police Chief Kesler]";
		mes "Hm...";
		next;
		emotion ET_SURPRISE;
		mes "[Police Chief Kesler]";
		mes "Oh, I've got an idea! Bring me ^F8081EDoom Tokens^000000, and I'll exchange them with ^4E9867Packing Envelope^000000.";
		next;
		select("Packing Envelope?");
		mes "[Police Chief Kesler]";
		mes "It's an envelope often discovered in the excavation site.";
		next;
		mes "[Police Chief Kesler]";
		mes "Scholars have found out the envelope activates various effects when opened.";
		next;
		mes "[Police Chief Kesler]";
		mes "Would you like to exchange your Doom Tokens with Packing Envelope now? Or you can do it later.";
		next;
		if (select( "Exchange now.", "Do it later." ) == 2) {
			mes "[Police Chief Kesler]";
			mes "Sure, no problem. It's not like Doom Tokens have an expiration date.";
		}
		else {
			.@amount = countitem(6753);// Sign_Of_Destruction
			delitem 6753, .@amount;
			getitem 22611, .@amount;// Packing_Envelope
			mes "[Police Chief Kesler]";
			mes "In exchange for your " + .@amount + " Doom Tokens, I've given you " + .@amount + " Packing Envelopes.";
		}
		setquest 5304;// Police Chief Kesler
		completequest 5304;
		next;
		mes "[Police Chief Kesler]";
		mes "Thank you for your continue support in the subjugation of the Doom Prayers.";
		close;
	case 5:
		emotion ET_STARE_ABOUT;
		mes "[Police Chief Kesler]";
		mes "This is the first thing I tell every new visitor: if you see the ^F8081EDoom Prayers^000000, don't hesitate to report to the nearest police station.";
		close;
	default:
		mes "[Police Chief Kesler]";
		mes "An error has occurred. If it is the same after retrying, please take a screenshot and ask for the operation.";
		close;
	}
}

verus03,36,113,4	script	Police Officer Salgran#EP15	2_M_THIEFMASTER,{
	if (checkweight(1301,1) == 0) {
		mes "- You are carrying too many items to continue. -";
		close;
	}
	.@quest_5305 = isbegin_quest(5305);// Police Officer Salgran
	.@quest_5309 = isbegin_quest(5309);// Police Chief's Request
	.@quest_5310 = isbegin_quest(5310);// Salgran's Problem
	.@quest_5314 = isbegin_quest(5314);// Salgran's Request
	.@quest_5315 = isbegin_quest(5315);// Gerev's Request
	.@quest_5316 = isbegin_quest(5316);// Seiden's Request
	.@quest_5317 = isbegin_quest(5317);// Piffs's Request
	.@playtime_5318 = checkquest(5318,PLAYTIME);

	if (.@quest_5309 != 1) {
		if (isbegin_quest(5305) == 0) {
			specialeffect EF_SLEEPATTACK;
			mes "[Police Officer Salgran]";
			mes "Zzz... Zzz...";
			next;
			emotion ET_PROFUSELY_SWEAT;
			mes "[Police Officer Salgran]";
			mes "Ch-Chief, I'm sorry!";
			next;
			mes "He's talking in his sleep.";
			close;
		}
		mes "[Police Officer Salgran]";
		mes "Is it right? Is there nothing here, are you nothing?";
		close;
	}
	if (.@quest_5315 == 1 || .@quest_5316 == 1 || .@quest_5317 == 1) {
		if (isbegin_quest(5305) == 0) {
			specialeffect EF_SLEEPATTACK;
			mes "[Police Officer Salgran]";
			mes "Zzz... Zzz...";
			next;
			emotion ET_PROFUSELY_SWEAT;
			mes "[Police Officer Salgran]";
			mes "Ch-Chief, I'm sorry!";
			next;
			mes "He's talking in his sleep.";
			close;
		}
		if (isbegin_quest(5310) == 0) {
			mes "[Police Officer Salgran]";
			mes "You're working a different sector at this moment. Come back when you're done there.";
			close;
		}
		mes "[Police Officer Salgran]";
		mes "Are you helping on other things in other areas?...";
		close;
	}
	if (.@quest_5310 != 0) {
		mes "[Police Officer Salgran]";
		mes "Haven't you reported to the Captain yet? I told you everything's fine in my sector.";
		close;
	}
	switch(.@quest_5314) {
	case 0:
		if (.@quest_5305 == 0) {
			specialeffect EF_SLEEPATTACK;
			select("Excuse me.");
			emotion ET_HUK;
			mes "[Police Officer Salgran]";
			mes "Ch-Chief Kesler! I-I wasn't dozing off!";
			next;
			emotion ET_THINK;
			mes "[Police Officer Salgran]";
			mes "...";
			next;
			mes "[Police Officer Salgran]";
			mes "Whew, you're not the Chief. Who are you?";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Your chief in the middle of Phantasmagorika sent me.";
			next;
			emotion ET_SEXY;
			mes "[Police Officer Salgran]";
			mes "Thank goodness, he didn't come himself. He must be busy, eh? Welcome. Could you help me out with something?";
			next;
			if (select( "Help.", "Maybe next time." ) == 2) {
				emotion ET_OHNO;
				setquest 5305;// Police Officer Salgran
				completequest 5305;// Police Officer Salgran
				setquest 5310;// Salgran's Problem
				mes "[Police Officer Salgran]";
				mes "You must be busy. All right, then tell the Chief that everything's good in my sector.";
				close;
			}
			mes "[Police Officer Salgran]";
			mes "Thanks! I've been saddled with some tiresome duties, and I could use your help.";
			next;
			mes "[Police Officer Salgran]";
			mes "You know the Doom Prayers are in our midst, don't you?";
			next;
			mes "[Police Officer Salgran]";
			mes "They've been leaving illegal promotional leaflets all over the place, and whatever paper they used, it sticks to the ground like gum.";
			next;
			mes "[Police Officer Salgran]";
			mes "I need to get rid of the leaflets before they permanently glue themselves.";
			next;
			mes "[Police Officer Salgran]";
			mes "Could you get rid of them if you see them in the site? They're giving me a headache.";
			next;
			if (select( "OK", "Maybe next time." ) == 2) {
				emotion ET_OHNO;
				setquest 5305;// Police Officer Salgran
				completequest 5305;// Police Officer Salgran
				setquest 5310;// Salgran's Problem
				mes "[Police Officer Salgran]";
				mes "You must be busy. All right, then tell the Chief that everything's good in my sector.";
				close;
			}
			setquest 5314;
			mes "[Police Officer Salgran]";
			mes "Thank you. Come back when you get rid of 10 Illegal Leaflets.";
			close;
		}
		emotion ET_WRAP;
		mes "[Police Officer Salgran]";
		mes "Welcome back. Did the Chief send you again?";
		next;
		emotion ET_QUESTION;
		mes "[Police Officer Salgran]";
		mes "Great, can you help me again to get rid of those illegal leaflets?";
		next;
		if (select( "Help.", "Maybe next time." ) == 1) {
			setquest 5314;
			mes "[Police Officer Salgran]";
			mes "Thank you. Come back when you get rid of 10 Illegal Leaflets.";
			close;
		}
		setquest 5310;// Salgran's Problem
		mes "[Police Officer Salgran]";
		mes "You must be busy. All right, then tell the Chief that everything's good in my sector.";
		close;
	case 1:
		mes "[Police Officer Salgran]";
		mes "Wow, I thought you left a minute ago, and you're already back. Did you get rid of the Illegal Leaflets?";
		next;
		switch( select( "I did.", "Where can I find them?", "Can I not do this?", "Never mind." ) ) {
		case 1:
			mes "[Police Officer Salgran]";
			if (checkquest(5314,HUNTING) == 2) {
				mes "Oh, good job! The Chief never forgets a favor. He might reward you more handsomely depending on his mood.";
				completequest 5314;
				if (isbegin_quest(5305) == 0) {
					setquest 5305;
					completequest 5305;
				}
				setquest 5310;
				close;
			}
			emotion ET_OHNO;
			mes "Hmpf, of course no one can be so quick. I asked you to get rid of at least 10 Illegal Leaflets.";
			close;
		case 2:
			emotion ET_HUK;
			mes "[Police Officer Salgran]";
			mes "They're everywhere in Phantasmagorika. You can't not see them.";
			next;
			emotion ET_SCRATCH;
			mes "[Police Officer Salgran]";
			mes "Do you have some sort of vision problem? There's no way you can miss them.";
			close;
		case 3:
			erasequest 5314;
			if (isbegin_quest(5305) == 0) {
				setquest 5305;
				completequest 5305;
			}
			setquest 5310;
			mes "[Police Officer Salgran]";
			mes "I want to say no, but I can't force you. Just go tell the Chief that everything's good in my sector.";
			close;
		case 4:
			emotion ET_SCRATCH;
			mes "[Police Officer Salgran]";
			mes "You're silly.";
			close;
		}
	case 2:
		end;
	}
	mes "[Police Officer Salgran]";
	mes "Haven't you reported to the Captain yet? I told you everything's fine in my sector.";
	close;
}

verus03,116,36,6	script	Police Officer Gerev#EP15_1D	4_M_ALCHE_A,{
	if (checkweight(1301,1) == 0) {
		mes "- You are carrying too many items to continue. -";
		close;
	}
	.@quest_5306 = isbegin_quest(5306);// Police Officer Gerev
	.@quest_5309 = isbegin_quest(5309);// Police Chief's Request
	.@quest_5311 = isbegin_quest(5311);// Gerev's Problem
	.@quest_5314 = isbegin_quest(5314);// Salgran's Request
	.@quest_5315 = isbegin_quest(5315);// Gerev's Request
	.@quest_5316 = isbegin_quest(5316);// Seiden's Request
	.@quest_5317 = isbegin_quest(5317);// Piffs's Request
	.@playtime_5318 = checkquest(5318,PLAYTIME);

	mes "[Police Officer Gerev]";
	if (.@quest_5309 != 1) {
		if (isbegin_quest(5306) == 0) {
			emotion ET_OTL;
			mes "Ugh, I can feel the stress building up inside... Argh, this place is giving me an ulcer!";
			next;
			mes "He's pulling his hair in agony.";
			close;
		}
		emotion ET_DELIGHT;
		mes "I feel much better now. Please tell Chief Kesler that everything's good in my sector.";
		close;
	}
	if (.@quest_5314 == 1 || .@quest_5316 == 1 || .@quest_5317 == 1) {
		if (isbegin_quest(5306) == 0) {
			emotion ET_OTL;
			mes "Ugh, I can feel the stress building up inside... Argh, this place is giving me an ulcer!";
			next;
			mes "He's pulling his hair in agony.";
			close;
		}
		if (isbegin_quest(5311) == 0) {
			emotion ET_PROFUSELY_SWEAT;
			mes "Ugh, I'm having stomach cramps. Come back when you're done with your current assignment.";
			close;
		}
		mes "[Police Officer Gerev]";
		mes "Are you helping in other areas? It's amazing... I just ask for no pressure...";
		close;
	}
	if (.@quest_5311 != 0) {
		emotion ET_DELIGHT;
		mes "I feel much better now. Please tell Chief Kesler that everything's good in my sector.";
		close;
	}
	switch(.@quest_5315) {
	case 0:
		if (.@quest_5306 == 0) {
			emotion ET_CONFUSE;
			mes "Argh, where's my pen? I had it when I left the station. Did those robots steal it from me?";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Check behind your ear.";
			next;
			emotion ET_HUK;
			mes "[Police Officer Gerev]";
			mes "Err? I don't remember putting it there.";
			next;
			emotion ET_QUESTION;
			mes "[Police Officer Gerev]";
			mes "Oops, sorry. How may I help you?";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Your chief in the middle of Phantasmagorika sent me.";
			next;
			emotion ET_FRET;
			mes "[Police Officer Gerev]";
			mes "Ah, Chief Kesler sent you. If I didn't know him, I'd have thought he was too busy to come see me. I bet I'm busier than him, though.";
			next;
			if (select( "I can help.", "Sorry I can't be of help." ) == 2) {
				if (isbegin_quest(5306) == 0) {
					setquest 5306;
					completequest 5306;
				}
				setquest 5311;// Gerev's Problem
				mes "[Police Officer Gerev]";
				mes "You're willing to help the Chief, but not me. Why not because I'm not a chief?";
				next;
				emotion ET_STARE;
				mes "[Police Officer Gerev]";
				mes "*Snort* Just go tell Chief Kesler everything's quiet in my sector.";
				close;
			}
			emotion ET_BIGTHROB;
			mes "[Police Officer Gerev]";
			mes "Are you sure? Because I really hate to be disappointed.";
			next;
			mes "[Police Officer Gerev]";
			mes "As you know, the Doom Prayers are among us. Grr, just thinking about them makes me grind me teeth.";
			next;
			mes "[Police Officer Gerev]";
			mes "Yesterday I walked over one of their traps and sprained my ankle,";
			next;
			mes "[Police Officer Gerev]";
			mes "on top of everything else that's happened to me.";
			next;
			mes "[Police Officer Gerev]";
			mes "Sigh, could you disarm their traps?";
			next;
			if (select( "Sure thing.", "Maybe next time." ) == 2) {
				emotion ET_FRET;
				if (isbegin_quest(5306) == 0) {
					setquest 5306;
					completequest 5306;
				}
				setquest 5311;
				mes "[Police Officer Gerev]";
				mes "*Snort* I knew it. Just go tell Chief Kesler everything's quiet in my sector.";
				close;
			}
			setquest 5315;
			mes "[Police Officer Gerev]";
			mes "Thank you. Please disarm 10 traps installed in Phantasmagorika.";
			next;
			mes "[Police Officer Gerev]";
			mes "I appreciate it if you can get rid of those in my vicinity first.";
			close;
		}
		mes "Hello again. Did the Chief send you?";
		next;
		mes "[Police Officer Gerev]";
		mes "If you're not busy, could you disarm the Doom Prayers' traps scattered across Phantasmagorika?";
		next;
		if (select( "Sure.", "Maybe next time." ) == 1) {
			setquest 5315;
			ep15_1_mang = 0;
			mes "[Police Officer Gerev]";
			mes "Thank you. Please disarm 10 traps installed in Phantasmagorika.";
			close;
		}
		emotion ET_SCRATCH;
		setquest 5311;
		mes "[Police Officer Gerev]";
		mes "You're just as busy, eh? No worries. I have other adventurers helping me. Please tell Chief Kesler everything's good in my sector.";
		close;
	case 1:
		emotion ET_HUK;
		mes "Wow, did you already disarm all the traps?";
		next;
		switch( select( "I did!", "Where are the traps?", "I have a more pressing matter at hand.", "Never mind." ) ) {
		case 1:
			if (ep15_1_mang >= 10) {
				completequest 5315;// Gerev's Request
				if (isbegin_quest(5306) == 0) {
					setquest 5306;
					completequest 5306;
				}
				setquest 5311;// Gerev's Problem
				ep15_1_mang = 0;
				mes "[Police Officer Gerev]";
				mes "Thank you. I feel much better, knowing there are fewer traps around me. Please tell Chief Kesler that everything's well in my sector.";
				close;
			}
			emotion ET_OTL;
			mes "[Police Officer Gerev]";
			mes "I'm already on the verge of a breakdown. You don't have to push.";
			next;
			mes "[Police Officer Gerev]";
			mes "You haven't finished disarming 10 traps. I can see one in front of me. Why don't you start with that?";
			close;
		case 2:
			emotion ET_STARE;
			mes "[Police Officer Gerev]";
			mes "Oh no, haven't you seen any trap at all?";
			next;
			mes "[Police Officer Gerev]";
			mes "Look for ??? written on the ground. That's the Doom Prayers' signature.";
			next;
			mes "[Police Officer Gerev]";
			mes "I can see one right in front of me. Ugh, my stomach...";
			next;
			mes "[Police Officer Gerev]";
			mes "I must be stressed out again. I feel my stomach tightening...";
			close;
		case 3:
			erasequest 5315;// Gerev's Request
			ep15_1_mang = 0;
			if (isbegin_quest(5306) == 0) {
				setquest 5306;
				completequest 5306;
			}
			setquest 5311;
			close;
		case 4:
			emotion ET_OTL;
			mes "[Police Officer Gerev]";
			mes "...W-what? Ugh... M-my stomach...";
			close;
		}
	case 2:
		end;
	}
}

verus03,81,241,6	script	Police Officer Seiden#EP15_1	4_M_ORIENT02,{
	if (checkweight(1301,1) == 0) {
		mes "- You are carrying too many items to continue. -";
		close;
	}
	.@quest_5307 = isbegin_quest(5307);// Police Officer Seiden
	.@quest_5309 = isbegin_quest(5309);// Police Chief's Request
	.@quest_5312 = isbegin_quest(5312);// Seiden's Problem
	.@quest_5314 = isbegin_quest(5314);// Salgran's Request
	.@quest_5315 = isbegin_quest(5315);// Gerev's Request
	.@quest_5316 = isbegin_quest(5316);// Seiden's Request
	.@quest_5317 = isbegin_quest(5317);// Piffs's Request
	.@playtime_5318 = checkquest(5318,PLAYTIME);

	if (.@quest_5309 != 1) {
		if (isbegin_quest(5307) == 0) {
			mes "[Police Officer Seiden]";
			mes "*Chuckle* I know who you are, but I don't want to talk to you.";
			next;
			mes "He's creepy.";
			close;
		}
		emotion ET_KIK;
		mes "[Police Officer Seiden]";
		mes "*Chuckle* Be careful not to incur anyone's wrath.";
		close;
	}
	if (.@quest_5314 == 1 || .@quest_5315 == 1 || .@quest_5317 == 1) {
		if (isbegin_quest(5307) == 0) {
			mes "[Police Officer Seiden]";
			mes "*Chuckle* I know who you are, but I don't want to talk to you.";
			next;
			mes "He's creepy.";
			close;
		}
		if (isbegin_quest(5312) == 0) {
			emotion ET_KIK;
			mes "[Police Officer Seiden]";
			mes "*Chuckle*...One heart can't be used, otherwise it will be annoying.*Chuckle*...";
			close;
		}
		emotion ET_KIK;
		mes "[Police Officer Seiden]";
		mes "*Chuckle* Try one thing at a time, or Phantasmagorika's curse will be upon you.";
		close;
	}
	if (.@quest_5312 != 0) {
		emotion ET_KIK;
		mes "[Police Officer Seiden]";
		mes "*Chuckle* Be careful not to incur anyone's wrath.";
		close;
	}
	switch(.@quest_5316) {
	case 0:
		if (.@quest_5307 == 0) {
			emotion ET_KIK;
			mes "[Police Officer Seiden]";
			mes "*Chuckle* The Chief sent you. I know because I've been waiting.";
			next;
			emotion ET_SURPRISE, playerattached();
			mes "[" + strcharinfo(0) + "]";
			mes "?!";
			next;
			mes "[Police Officer Seiden]";
			mes "Don't ask me how--I have my sources. Let's cut to the chase.";
			next;
			mes "[Police Officer Seiden]";
			mes "I could use your help, if you're willing and not busy.";
			next;
			if (select( "Sure.", "Not now." ) == 2) {
				emotion ET_SCRATCH;
				if (isbegin_quest(5307) == 0) {
					setquest 5307;
					completequest 5307;
				}
				setquest 5312;// Seiden's Problem
				mes "[Police Officer Seiden]";
				mes "I don't understand. My friend swore this never failed on people, hm... Oh well, tell Chief Kesler everything's good on my end.";
				close;
			}
			emotion ET_KIK;
			mes "[Police Officer Seiden]";
			mes "*Chuckle* I knew it. Ah, just forget I said that.";
			next;
			mes "[Police Officer Seiden]";
			mes "I'm having a bit of difficulty doing my job.";
			next;
			mes "[Police Officer Seiden]";
			mes "The Doom Prayers throw stones at us, and I'm worried they might hurt innocent people.";
			next;
			mes "[Police Officer Seiden]";
			mes "Could you pick up the stones you see in Phantasmagorika? 10 stones should suffice for now. Keep doing that and we'll get to all of them one day.";
			next;
			if (select( "I'll be back.", "Maybe next time." ) == 2) {
				emotion ET_SCRATCH;
				if (isbegin_quest(5307) == 0) {
					setquest 5307;
					completequest 5307;
				}
				setquest 5312;// Seiden's Problem
				mes "[Police Officer Seiden]";
				mes "I don't understand. My friend swore this never failed on people, hm... Oh well, tell Chief Kesler everything's good on my end.";
				close;
			}
			emotion ET_KIK;
			setquest 5316;
			ep15_1_mang = 0;
			mes "[Police Officer Seiden]";
			mes "*Chuckles* Pebbles don't count. Please bring 10 stones big enough to fit your hand.";
			close;
		}
		emotion ET_KIK;
		mes "[Police Officer Seiden]";
		mes "*Chuckle* I thought it's about time.";
		next;
		mes "[Police Officer Seiden]";
		mes "*Chuckle* Please clear Phantasmagorika of stones, just like the last time.";
		next;
		if (select( "Sure.", "Maybe next time." ) == 1) {
			setquest 5316;
			ep15_1_mang = 0;
			mes "[Police Officer Seiden]";
			mes "Pebbles don't count. Please bring 10 stones big enough to fit your hand.";
			close;
		}
		setquest 5312;
		mes "[Police Officer Seiden]";
		mes "You're still busy, huh? No worries. Just tell Chief Kesler that everything's quiet in my sector.";
		close;
	case 1:
		emotion ET_KIK;
		mes "[Police Officer Seiden]";
		mes "*Chuckle* Did you pick up all the stones?";
		next;
		switch( select( "I did.", "Where are they?", "I don't have time for them.", "Never mind." ) ) {
		case 1:
			emotion ET_KIK;
			mes "[Police Officer Seiden]";
			if (ep15_1_mang < 10) {
				if (countitem(7049) < 10)
					mes "*Chuckle* Where are they? Pick them up, or the spirits of the victims will haunt you forever.";
				else
					mes "*Chuckle* Look around--there are stones everywhere. Where did you find this stone, then?";
				close;
			}
			if (countitem(7049) < 10) {
				mes "*Chuckle* Where are the stones? Please bring them to me.";
				close;
			}
			delitem 7049,10;// Stone
			ep15_1_mang = 0;
			completequest 5316;
			if (isbegin_quest(5307) == 0) {
				setquest 5307;
				completequest 5307;
			}
			setquest 5312;
			mes "[Police Officer Seiden]";
			mes "*Chuckle* Thank you. The spirits of the victims are appeased for now.";
			close;
		case 2:
			emotion ET_KIK;
			mes "[Police Officer Seiden]";
			mes "*Chuckle* Stones are everywhere.";
			next;
			mes "[Police Officer Seiden]";
			mes "Search the ground. *Chuckle* Do I really have to tell you that?";
			close;
		case 3:
			emotion ET_KIK;
			erasequest 5316;
			ep15_1_mang = 0;
			if (isbegin_quest(5307) == 0) {
				setquest 5307;
				completequest 5307;
			}
			setquest 5312;
			mes "[Police Officer Seiden]";
			mes "*Chuckle* Please leave your stones somewhere away from traffic. Beware the spirits of the victims!";
			close;
		case 4:
			emotion ET_KIK;
			mes "[Police Officer Seiden]";
			mes "*Chuckle* Got it. Keep up the good work.";
			close;
		}
	case 2:
		end;
	}
}

verus03,127,36,4	script	???#EP15_1D_01	4_CRACK,{
	if (checkweight(1301,1) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	.@quest_5315 = isbegin_quest(5315);// Gerev's Request
	.@quest_5316 = isbegin_quest(5316);// Seiden's Request
	if (.@quest_5315 == 1 || .@quest_5316 == 1) {
		if (.@quest_5315 == 1) {
			if (ep15_1_mang >= 10) {
				mes "You disarmed all the traps you had to.";
				close;
			}
			emotion ET_SURPRISE;
			mes "The ??? on the ground looks suspicious. What do you want to do?";
			next;
			if (select( "Examine.", "Leave it." ) == 2) {
				mes "You've decided not to touch the suspicious object.";
				close;
			}
			progressbar "00ff00",2;
			if (rand(2))
				mes "You've decided it's nothing.";
			else {
				mes "You disarmed all the traps of the Doom Prayers.";
				ep15_1_mang++;
			}
		}
		else {
			if (ep15_1_mang > 9) {
				mes "You picked up 10 large stones. Take them to the police officer.";
				close;
			}
			mes "You found a stone half-buried in the ground. Do you want to pick it up?";
			next;
			if (select( "Pick it up.", "Leave it." ) == 2) {
				mes "You've decided to leave the pebble.";
				close;
			}
			if (rand(2))
				mes "This pebble is too small to inflict serious damage when thrown.";
			else {
				mes "You picked up a dangerously large stone.";
				getitem 7049,1;
				ep15_1_mang++;
			}
		}
		close2;
		initnpctimer;
		disablenpc();
	}
	end;

OnTimer30000:
OnTimer60000:
OnTimer90000:
OnTimer120000:
	if (rand(1,2) != 1)
		end;
OnTimer150000:
	enablenpc();
	stopnpctimer;
	end;
}
verus03,119,17,4	duplicate(???#EP15_1D_01)	???#EP15_1D_02	4_CRACK
verus03,163,33,4	duplicate(???#EP15_1D_01)	???#EP15_1D_03	4_CRACK
verus03,207,47,4	duplicate(???#EP15_1D_01)	???#EP15_1D_04	4_CRACK
verus03,225,245,4	duplicate(???#EP15_1D_01)	???#EP15_1D_05	4_CRACK
verus03,169,181,4	duplicate(???#EP15_1D_01)	???#EP15_1D_06	4_CRACK
verus03,122,139,4	duplicate(???#EP15_1D_01)	???#EP15_1D_07	4_CRACK
verus03,80,230,4	duplicate(???#EP15_1D_01)	???#EP15_1D_08	4_CRACK
verus03,42,105,4	duplicate(???#EP15_1D_01)	???#EP15_1D_09	4_CRACK
verus03,99,235,4	duplicate(???#EP15_1D_01)	???#EP15_1D_10	4_CRACK
verus03,81,207,4	duplicate(???#EP15_1D_01)	???#EP15_1D_11	4_CRACK
verus03,226,243,4	duplicate(???#EP15_1D_01)	???#EP15_1D_12	4_CRACK
verus03,148,144,4	duplicate(???#EP15_1D_01)	???#EP15_1D_13	4_CRACK
verus03,74,44,4	duplicate(???#EP15_1D_01)	???#EP15_1D_14	4_CRACK
verus03,20,54,4	duplicate(???#EP15_1D_01)	???#EP15_1D_15	4_CRACK
verus03,74,212,4	duplicate(???#EP15_1D_01)	???#EP15_1D_16	4_CRACK
verus03,42,47,4	duplicate(???#EP15_1D_01)	???#EP15_1D_17	4_CRACK
verus03,80,195,4	duplicate(???#EP15_1D_01)	???#EP15_1D_18	4_CRACK
verus03,134,72,4	duplicate(???#EP15_1D_01)	???#EP15_1D_19	4_CRACK
verus03,45,45,4	duplicate(???#EP15_1D_01)	???#EP15_1D_20	4_CRACK
verus03,115,235,4	duplicate(???#EP15_1D_01)	???#EP15_1D_21	4_CRACK
verus03,76,194,4	duplicate(???#EP15_1D_01)	???#EP15_1D_22	4_CRACK
verus03,166,32,4	duplicate(???#EP15_1D_01)	???#EP15_1D_23	4_CRACK
verus03,121,42,4	duplicate(???#EP15_1D_01)	???#EP15_1D_24	4_CRACK
verus03,141,36,4	duplicate(???#EP15_1D_01)	???#EP15_1D_25	4_CRACK

verus04,202,258,4	script	Police Officer Piffs#EP15_1	4_M_SAGE_C,{
	if (checkweight(1301,1) == 0) {
		mes "- You are carrying too many items to continue. -";
		close;
	}
	.@quest_5308 = isbegin_quest(5308);// Police Officer Piffs
	.@quest_5309 = isbegin_quest(5309);// Police Chief's Request
	.@quest_5313 = isbegin_quest(5313);// Piffs's Problem
	.@quest_5314 = isbegin_quest(5314);// Salgran's Request
	.@quest_5315 = isbegin_quest(5315);// Gerev's Request
	.@quest_5316 = isbegin_quest(5316);// Seiden's Request
	.@quest_5317 = isbegin_quest(5317);// Piffs's Request
	.@playtime_5318 = checkquest(5318,PLAYTIME);

	mes "[Police Officer Piffs]";
	if (.@quest_5309 != 1) {
		if (isbegin_quest(5308) == 0) {
			emotion ET_HUNGRY;
			mes "*Yum Yum*";
			mes "Um, this meat is delicious!";
			next;
			mes "He's chewing on meat.";
			close;
		}
		mes "[Police Officer Piffs]";
		mes "Don't you worry. I'll keep this area safe.";
		close;
	}
	if (.@quest_5314 == 1 || .@quest_5315 == 1 || .@quest_5316 == 1) {
		if (isbegin_quest(5308) == 0) {
			emotion ET_HUNGRY;
			mes "*Yum Yum*";
			mes "Um, this meat is delicious!";
			next;
			mes "He's chewing on meat.";
			close;
		}
		if (isbegin_quest(5313) == 0) {
			mes "[Police Officer Piffs]";
			mes "Are you also helping other areas? Then come help me when you aren't busy!";
			close;
		}
		emotion ET_BEST;
		mes "Geez, are you working multiple sectors at the same time? You're superhuman.";
		close;
	}
	if (.@quest_5313 != 0) {
		emotion ET_BEST;
		mes "Rest assured, I am here.";
		close;
	}
	switch(.@quest_5317) {
	case 0:
		if (.@quest_5308 == 0) {
			emotion ET_HUNGRY;
			mes "*Yum Yum* Delish!";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Excuse me.";
			next;
			emotion ET_HUK;
			mes "[Police Officer Piffs]";
			mes "Oops.";
			mes "My apologies; I shouldn't have been snacking in public.";
			next;
			mes "[Police Officer Piffs]";
			mes "Hello. My name is Piffs, and I'm a Sage. I came to study Phantasmagorika.";
			next;
			mes "[Police Officer Piffs]";
			mes "Did the Chief send you? This is great.";
			next;
			emotion ET_QUESTION;
			mes "[Police Officer Piffs]";
			mes "I'm running short on some supplies, but I can't leave my post unattended. Can you help me?";
			next;
			if (select("Sure thing.", "Not now.") == 2) {
				if (isbegin_quest(5308) == 0) {
					setquest 5308;// Police Officer Piffs
					completequest 5308;
				}
				setquest 5313;// Piffs's Problem
				mes "[Police Officer Piffs]";
				mes "I understand. If you change your mind, though, come back to me.";
				close;
			}
			mes "[Police Officer Piffs]";
			mes "Hah hah hah, thank you.";
			next;
			mes "[Police Officer Piffs]";
			mes "This area is fairly safe, but my colleagues stationed at the Plaza are prone to injury caused by the Doom Prayers.";
			next;
			mes "[Police Officer Piffs]";
			mes "I need to gather herbs for them, but like I said I can't leave my post unattended.";
			next;
			mes "[Police Officer Piffs]";
			mes "I know where some good herbs grow in this place. Could you gather them for me?";
		}
		else {
			mes "Hah hah! Hello again. Did the Chief send you?";
			next;
			mes "[Police Officer Piffs]";
			mes "If you're not busy, I'd like to ask you to gather some more herbs. Is that okay?";
		}
		next;
		if (select( "Sure.", "Maybe next time." ) == 1) {
			setquest 5317;// Piffs's Request
			mes "[Police Officer Piffs]";
			mes "Thank you. Look around thickets, and you'll see some herbs. I won't need more than 10.";
			close;
		}
		if (isbegin_quest(5308) == 0) {
			setquest 5308;// Police Officer Piffs
			completequest 5308;
		}
		setquest 5313;// Piffs's Problem
		mes "[Police Officer Piffs]";
		mes "I understand. If you change your mind, though, come back to me.";
		close;
	case 1:
		emotion ET_QUESTION;
		mes "Welcome back. Did you find all the herbs?";
		next;
		switch( select( "There you go.", "Where can I find them?", "I have a more pressing matter at hand.", "Never mind." ) ) {
		case 1:
			mes "[Police Officer Piffs]";
			if (ep15_1_mang > 9 && countitem(6754) > 9) {
				delitem 6754,10;// Collected_Medicinal_Herbs
				ep15_1_mang = 0;
				completequest 5317;
				setquest 5313;
				if (isbegin_quest(5308) == 0) {
					setquest 5308;
					completequest 5308;
				}
				mes "Thank you for helping me stock up on herbs.";
				next;
				mes "[Police Officer Piffs]";
				mes "This herb smells good. I think it'll make good garnish for meat... *Ahem* I'm not saying I want to eat it.";
			}
			else {
				mes "Where are the herbs you said you gathered?";
				next;
				mes "[Police Officer Piffs]";
				mes "No, I don't eat herbs. I just want to keep them in stock for my colleagues.";
			}
			close;
		case 2:
			mes "[Police Officer Piffs]";
			mes "Where can you find herbs?";
			next;
			mes "[Police Officer Piffs]";
			mes "Look around thickets, and you'll see some herbs.";
			close;
		case 3:
			changequest 5317,5313;
			if (isbegin_quest(5308) == 0) {
				setquest 5308;
				completequest 5308;
			}
			ep15_1_mang = 0;
			if (countitem(6754)) {
				delitem 6754, countitem(6754);// Collected_Medicinal_Herbs
				mes "[Police Officer Piffs]";
				mes "I have taken away the herbs of your Gather the herb. So far, you have to leave first in a hurry!";
				close;
			}
			mes "[Police Officer Piffs]";
			mes "You can leave now. I'll send word to the Chief.";
			close;
		case 4:
			mes "[Police Officer Piffs]";
			mes "Don't forget I need 10 herbs.";
			close;
		}
	case 2:
		end;
	}
}

verus04,187,219,4	script	Thicket#EP15_1D_01	4_CREEPER,{
	if (checkweight(1301,1) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	if (isbegin_quest(5317) == 1) {// Piffs's Request
		if (ep15_1_mang > 9) {
			mes "This kind of thicket grows everywhere in Phantasmagorika.";
			close;
		}
		mes "This thicket looks like it's hiding some herbs. What do you want to do?";
		next;
		if (select( "Gather the herb.", "Leave it." ) == 2) {
			mes "You've decided to forget about it.";
			close;
		}
		progressbar "00ff00",2;
		if (rand(2))
			mes "No herbs were found in the thicket.";
		else {
			ep15_1_mang++;
			getitem 6754,1;// Collected_Herb
			mes "Gathered the herb.";
		}
		close2;
		disablenpc();
		initnpctimer;
	}
	end;

OnTimer60000:
OnTimer120000:
OnTimer180000:
OnTimer240000:
	if (rand(1,2) != 1)
		end;
OnTimer300000:
	enablenpc();
	stopnpctimer;
	end;
}
verus04,167,206,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_02	4_CREEPER
verus04,198,198,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_03	4_CREEPER
verus04,143,205,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_04	4_CREEPER
verus04,125,265,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_05	4_CREEPER
verus04,92,203,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_06	4_CREEPER
verus04,97,204,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_07	4_CREEPER
verus04,85,189,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_08	4_CREEPER
verus04,64,191,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_09	4_CREEPER
verus04,55,185,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_10	4_CREEPER
verus04,42,185,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_11	4_CREEPER
verus04,29,189,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_12	4_CREEPER
verus04,40,223,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_13	4_CREEPER
verus04,32,240,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_14	4_CREEPER
verus04,27,243,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_15	4_CREEPER
verus04,34,248,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_16	4_CREEPER
verus04,52,251,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_17	4_CREEPER
verus04,72,247,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_18	4_CREEPER
verus04,75,243,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_19	4_CREEPER
verus04,81,252,4	duplicate(Thicket#EP15_1D_01)	Thicket#EP15_1D_20	4_CREEPER

//- New Power Source
verus03,107,177,3	script	Luke Lapez#atnd09	4_M_EDEN_GUARDER,{
	if (checkweight(1301,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	mes "[Luke]";
	if (ep15_1_atnad < 14) {
		cutin "looke_rapez04.bmp",0;
		mes "Don't worry about him.";
		mes "He knows what he's doing.";
		close3;
	}
	if (ep15_1_atnad == 14) {
		cutin "looke_rapez02.bmp",0;
		mes "...?";
		mes "Interesting.";
		mes "He wants something ready to eat, juicy, refreshing, and clean-tasting?";
		next;
		cutin "looke_rapez03.bmp",0;
		mes "[Luke]";
		mes "Well, I've got an idea. Bring me some ingredients, and I'll cook something for you.";
		mes "I'm pretty sure it'll fit the bill.";
		next;
		mes "[Luke]";
		mes "The problem is";
		mes "the ingredients are difficult to find.";
		mes "I've learned this recipe while traveling across dimensions.";
		next;
		cutin "looke_rapez04.bmp",0;
		mes "[Luke]";
		mes "Well, it'll be you who has to find the ingredients:";
		mes "2 Meats, 1 Mora Mandarin, and 1 Banana. Can you get them?";
		next;
		cutin "looke_rapez02.bmp",0;
		mes "[Luke]";
		mes "Some of the fruits grow near the ^4d4dffMisty Forest Labyrinth^000000.";
		mes "You'll have to look hard for them.";
		erasequest 7624;// In Search of a Delicacy
		setquest 7625;// Count On Me
		ep15_1_atnad = 15;
		close3;
	}
	if (ep15_1_atnad == 15) {
		if (countitem(517) < 2 || countitem(11520) < 1 || countitem(513) < 1) {
			cutin "looke_rapez04.bmp",0;
			mes "Did you forget the ingredients?";
			mes "2 Meats, 1 Mora Mandarin, and 1 Banana.";
			next;
			mes "[Luke]";
			mes "Some of the fruits grow near the ^4d4dffMisty Forest Labyrinth^000000.";
			mes "...";
			close3;
		}
		cutin "looke_rapez02.bmp",0;
		mes "This should suffice.";
		mes "I haven't cooked it in a while, but the recipe is in my head.";
		next;
		mes "[Luke]";
		mes "Done.";
		mes "This food should fit all the conditions you told me.";
		next;
		cutin "",255;
		mes "Luke gave you Mora's specialty food, Beef Toast.";
		mes "It perfectly fits everything Ian said he wanted.";
		delitem 517,2;	// Meat
		delitem 11520,1;// Mora_Mandarin
		delitem 513,1;	// Banana
		getitem 11519,1;// Beef_Toast
		erasequest 7625;// Count On Me
		setquest 7626;// Delicacy for Him
		ep15_1_atnad = 16;
		close;
	}
	if (ep15_1_atnad == 16) {
		cutin "looke_rapez01.bmp",0;
		mes "*Chuckle*";
		mes "If you need more, it'll be easier to buy it from the Mora Village.";
		mes "Do whatever it takes to win favor with that old man.";
		next;
		mes "[Luke]";
		mes "Or you won't find the answer the Captain wanted.";
		mes "Good luck.";
		close3;
	}
	cutin "looke_rapez03.bmp",0;
	mes "This place is boring, just like everywhere else.";
	mes "Aren't there stronger monsters?";
	next;
	cutin "",255;
	mes "[Lloyd]";
	mes "Don't say that.";
	mes "You'll jinx us.";
	mes "I'm a brave Cat, but my claws can't even scratch those.";
	next;
	cutin "looke_rapez01.bmp",0;
	mes "[Luke]";
	mes "Alright, alright.";
	mes "But don't worry.";
	mes "I'm not stupid.";
	mes "I'll never put my charges in danger.";
	close3;
}

verus03,103,177,5	script	Machinist Lloyd#atnd09	4_M_BOSSCAT,{
	if (checkweight(1301,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	mes "[Lloyd]";
	if (ep15_1_atnad < 9) {
		mes "You're";
		mes "looking down your nose at me because I'm a Cat.";
		mes "Tsk, tsk.";
		mes "You Humans are so superficial.";
		next;
		mes "[Lloyd]";
		mes "Just keep your distance and mind your own business.";
		mes "You and I will be fine so long as you don't steal my hard work.";
		close;
	}
	if (ep15_1_atnad == 9) {
		mes "You're looking down your nose at me because I'm a Cat.";
		next;
		select("Are you Lloyd?");
		mes "[Lloyd]";
		mes "Yeah. What's up?";
		mes "Huh? Aures sent you?";
		mes "To check up on my progress?";
		next;
		mes "[Lloyd]";
		mes "Oh, I'm in trouble.";
		mes "I must live up to his expectations,";
		mes "but my research has been stagnant.";
		next;
		mes "[Lloyd]";
		mes "Hey, could you help";
		mes "me with something?";
		next;
		switch( select( "Sure.", "What is a Cat doing here?", "No." ) ) {
		case 1:
			break;
		case 2:
			mes "[Lloyd]";
			mes "Unlike many from Malangdo Island, I've always been interested in new technologies and cultures.";
			mes "I worked at companies, and I've learned alchemy.";
			next;
			mes "[Lloyd]";
			mes "I came to Verus City when I heard the news of its discovery. I was told that I must be in an excavation team to be in the city.";
			next;
			mes "[Lloyd]";
			mes "Aures helped me to get in.";
			mes "I'm also a member of the Atnad Excavation Team.";
			next;
			break;
		case 3:
			cutin "looke_rapez04.bmp",0;
			mes "[Luke]";
			mes "Sorry to interrupt,";
			mes "but you're from the Eden Group to help the excavation team.";
			next;
			mes "[Luke]";
			mes "Your job is to help Lloyd.";
			mes "You can't say no.";
			next;
			cutin "",255;
			mes "[Lloyd]";
			mes "He's right!";
			mes "You're obligated to help me with my research!";
			next;
			break;
		}
		mes "[Lloyd]";
		mes "Let's cut to the chase.";
		mes "Hey, Human help.";
		mes "Get 10 empty glass bottles,";
		mes "and collect condensed energy found around the remnants of robots.";
		next;
		mes "[Lloyd]";
		mes "This place is littered with broken robots and machines.";
		mes "Clouds of physical energy are discovered near them.";
		next;
		mes "[Lloyd]";
		mes "Just bring empty bottles close to the energy, and it'll enter the bottles.";
		mes "Bring me 10 bottles.";
		next;
		mes "[Lloyd]";
		mes "I'll be waiting.";
		erasequest 7620;// Young Blood?
		setquest 7621;// Bottling the Energy
		ep15_1_atnad = 10;
		close;
	}
	if (ep15_1_atnad == 10) {
		if (countitem(6756) < 10) {// Condensed_Energy
			mes "This place is littered with broken robots and machines.";
			mes "Clouds of physical energy are discovered near them.";
			next;
			mes "[Lloyd]";
			mes "Just bring empty bottles close to the energy, and it'll enter the bottles.";
			mes "Bring me 10 bottles.";
			next;
			mes "[Lloyd]";
			mes "You must be dumber than you look if you have to ask twice.";
			close;
		}
		mes "Oh, this is enough.";
		mes "You're good.";
		mes "My estimation of you went up a notch.";
		next;
		mes "[Lloyd]";
		mes "You've made my job easier.";
		mes "Finally, I can be useful to Aures.";
		mes "If I find the cause of the condensation of energy and its possible applications, maybe";
		next;
		mes "[Lloyd]";
		mes "Ian and I can reactivate the robots in this place.";
		mes "That's what we've wanted all along.";
		next;
		mes "[Lloyd]";
		mes "Tell Aures I'm making progress.";
		mes "Good job, Human.";
		mes "I'll look forward to using your service again.";
		delitem 6756,10;// Condensed_Energy
		erasequest 7621;// Bottling the Energy
		setquest 7622;// Good News!
		ep15_1_atnad = 11;
		close;
	}
	if (ep15_1_atnad > 10 && ep15_1_atnad < 17) {
		mes "Soon I'll need your service on a daily basis.";
		mes "Don't fret and take one for the team.";
		close;
	}
	switch( checkquest(7629,PLAYTIME) ) {
	case -1:
		if (isbegin_quest(7628) == 0) {
			mes "You know the drill: collect condensed energy.";
			mes "You'll do that for me, won't you?";
			next;
			if (select( "Sure.","Decline." ) == 2) {
				mes "[Lloyd]";
				mes "Why, do you have something else to do?";
				mes "All right then,";
				mes "I'll ask Luke to take me around.";
				next;
				cutin "looke_rapez01.bmp",0;
				mes "[Luke]";
				mes "I thought you'd never ask!";
				mes "I've been itching for some action.";
				close3;
			}
			mes "[Lloyd]";
			mes "All you have to do is collect energy that naturally gathers around the remnants of robots and machines.";
			mes "I need 10 bottles every day.";
			setquest 7628;// New Power Source
			close;
		}
		if (countitem(6756) < 10) {
			mes "All you have to do is collect energy that naturally gathers around the remnants of robots and machines.";
			mes "I need 10 bottles every day.";
			close;
		}
		mes "I think I like you!";
		mes "Not as much as Aures and Luke, though.";
		mes "All right, I'll make good use of this energy.";
		next;
		mes "[Lloyd]";
		mes "Come back tomorrow.";
		mes "Well, you might as well come back every day at this time.";
		mes "You can't say no.";
		mes "I need you.";
		delitem 6756,10;// Cohesive_Energy
		changequest 7628,7629;// Tomorrow for Tomorrow's Energy
		getexp 150000,1000000;
		close;
	case 0:
	case 1:
		mes "I'm analyzing the collected energy.";
		mes "...";
		next;
		mes "[Lloyd]";
		mes "Are you dense?";
		mes "That means I want to be left alone!";
		close;
	case 2:
		erasequest 7629;
		mes "Hm, maybe I need to find a special storage method.";
		mes "The energy dissipates so easily.";
		next;
		mes "[Lloyd]";
		mes "I'll need more bottles of the energy.";
		mes "How are you?";
		mes "Are you ready to take one for the team?";
		close;
	}
}
verus03,127,145,0	script	Machine Remnant#atnd01	4_ENERGY_RED,3,3,{
	if (checkweight(1301,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest. -";
		close;
	}
	if (isbegin_quest(7621) != 1 && isbegin_quest(7628) != 1) {
		mes "You don't have to collect more energy at this moment.";
		close;
	}
	if (countitem(6756) > 9)// Condensed_Energy
		mes "You have enough ^4d4dffCondensed Energy^000000.";
	else if (countitem(713) < 1)
		mes "^4d4dffEmpty Bottle^000000 is required to collect Condensed Energy.";
	else {
		mes "A thick cloud of energy is visible between the broken pieces of metal.";
		mes "Bring an empty bottle close to the waving edges of the cloud to collect the energy.";
		next;
		progressbar "00ff00",3;
		delitem 713,1;// Empty Bottle
		getitem 6756,1;// Condensed_Energy
		mes "Collected Condensed Energy!";
		initnpctimer;
		disablenpc();
	}
	close;

OnTimer30000:
	stopnpctimer;
	enablenpc();
	end;

OnTouch_:
	if (isbegin_quest(7621) == 1 || isbegin_quest(7628) == 1)
		specialeffect EF_LEVEL99_4;
	end;
}
verus03,84,152,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd02	4_ENERGY_RED,3,3
verus03,104,181,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd03	4_ENERGY_RED,3,3
verus03,204,202,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd04	4_ENERGY_RED,3,3
verus03,219,199,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd05	4_ENERGY_RED,3,3
verus03,260,194,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd06	4_ENERGY_RED,3,3
verus03,198,181,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd07	4_ENERGY_RED,3,3
verus03,207,115,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd08	4_ENERGY_RED,3,3
verus03,54,78,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd09	4_ENERGY_RED,3,3
verus03,24,74,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd10	4_ENERGY_RED,3,3
verus03,41,121,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd11	4_ENERGY_RED,3,3
verus03,62,120,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd12	4_ENERGY_RED,3,3
verus03,44,195,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd13	4_ENERGY_RED,3,3
verus03,124,61,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd14	4_ENERGY_RED,3,3
verus03,168,229,3	duplicate(Machine Remnant#atnd01)	Machine Remnant#atnd15	4_ENERGY_RED,3,3

ver_eju,116,43,5	script	Rekenber Mercenary#atd01	4_GEFFEN_09,{
	switch( rand(0,2) ) {
		case 0: npctalk "They don't stop coming."; end;
		case 1: npctalk "Please be careful."; end;
		case 2: npctalk "..."; end;
	}
}

ver_eju,125,40,1	script	Rekenber Mercenary#atd02	4_GEFFEN_03,{
	switch( rand(0,2) ) {
		case 0: npctalk "Where are reinforcements?"; end;
		case 1: npctalk "Ugh, I really need a break."; end;
		case 2: npctalk "Grr, these abominations!"; end;
	}
}

ver_eju,117,35,7	script	Rekenber Mercenary#atd03	4_GEFFEN_08,{
	switch( rand(0,2) ) {
		case 0: npctalk "This is boring."; end;
		case 1: npctalk "If you're an excavator, move through the tunnel."; end;
		case 2: npctalk "You'd better watch out."; end;
	}
}

ver_eju,15,151,3	script	Rekenber Guard#atd04	4_M_LGTGUARD,{
	mes "[Rekenber Guard]";
	mes "Are you heading for Phantasmagorika?";
	mes "It may be difficult to find. Let me give you some directions.";
	next;
	mes "[Rekenber Guard]";
	mes "Follow the road all the way up, and then head southwest.";
	mes "Let me mark the location on your mini-map.";
	viewpoint 1,113,36,0,0x4DFF00;
	next;
	mes "[Rekenber Guard]";
	mes "This place is fraught with formidable monsters, just like the other parts of the old Juperos.";
	mes "Be safe in your travels.";
	close;
}

juperos_01,48,243,5	script	Rekenber Guard#atd05	4_M_LGTGUARD,{
	mes "[Rekenber Guard]";
	mes "Are you heading for Phantasmagorika?";
	mes "It may be difficult to find. Let me give you some directions.";
	next;
	mes "[Rekenber Guard]";
	mes "Go straight east, then follow the road south. You'll see a giant status at a corner.";
	mes "Let me mark the location on your mini-map.";
	viewpoint 1,242,87,0,0x4DFF00;
	next;
	mes "[Rekenber Guard]";
	mes "Who knew there's a hidden place behind a statue? It was pure luck that we found it.";
	mes "The road to the place is dangerous. Please have safe travel.";
	close;
}

juperos_01,242,91,3	script	Rekenber Guard#atd06	4_M_LGTGUARD,{
	mes "[Rekenber Guard]";
	mes "Are you a participant of the Phantasmagorika project?";
	mes "This is the entrance to the newly discovered ruins in the east.";
	next;
	mes "[Rekenber Guard]";
	mes "There's a guide on the other side of the entrance to guide you to the excavation site.";
	mes "Please get in before some monsters pounce on you.";
	next;
	mes "[Rekenber Guard]";
	mes "Oh, the other side of the entrance is teeming with aggressive robots.";
	mes "You'd better brace yourself.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 140 && isbegin_quest(7610) == 0" );
	end;
}

yuno_fild07,211,179,5	script	Excavator Guide#atd07	4_M_LGTGUARD,{
	mes "[Excavator Guide]";
	mes "Are you a participant of the Phantasmagorika project?";
	mes "As you know, you're at the entrance to Juperos.";
	next;
	mes "[Excavator Guide]";
	mes "I'm here to guide you to the excavation site connected to the inside of Juperos.";
	next;
	mes "[Excavator Guide]";
	mes "There are more guides spread across the inside,";
	mes "so you can find them easily in case you get lost.";
	next;
	mes "[Excavator Guide]";
	mes "Thank you for your contribution to the development of mankind. Good luck.";
	close;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "BaseLevel >= 140 && isbegin_quest(7610) == 0" );
	end;
}

verus04,194,165,5	script	Rekenber Guard#ver01	4_M_LGTGUARD,{
	mes "[Rekenber Guard]";
	mes "Are you a member of the Excavation Group?";
	mes "Our chairman has personally ordered us to see to your safety so that you can focus on your excavation work.";
	close;
}
verus04,203,171,3	script	Rekenber Guard#ver02	4_M_LGTGUARD,{
	mes "[Rekenber Guard]";
	mes "We're here to support your excavation of Verus City.";
	mes "Let us know if you experience any problems.";
	close;
}
verus04,171,267,3	script	Rekenber Guard#ver03	4_M_LGTGUARD2,{
	mes "[Rekenber Guard]";
	if (Sex == SEX_MALE)
		mes "I hate using portable johns, but my bladder can't seem to hold very much. What about you?";
	else
		mes "Ack! Shoo! Don't come close! I'm saving myself for my future bride!";
	close;
}
verus04,218,217,5	script	Geologist#ver04	4_M_HUGRANFA,{
	mes "[Geologist]";
	mes "Hm, the building was crushed by the stone wall.";
	mes "The rest is almost pulverized to dust.";
	next;
	mes "[Assistant]";
	mes "Yes, Professor.";
	next;
	mes "[Geologist]";
	mes "The terrain on which the village stands was formed in a different period, compared to this stone wall. At least that's my initial assessment.";
	next;
	mes "[Assistant]";
	mes "Yes, Professor.";
	next;
	mes "[Geologist]";
	mes "The underground village doesn't seem to be artificial, though I can't imagine how it can be formed naturally. What do you think?";
	next;
	mes "[Assistant]";
	mes "Yes, Professor.";
	next;
	mes "[Geologist]";
	mes "...Are you even listening to me?";
	next;
	mes "[Assistant]";
	mes "Yes, Professor.";
	next;
	mes "[Geologist]";
	mes "Sigh.";
	mes "Let's go have lunch.";
	next;
	mes "[Assistant]";
	mes "Yes, Professor!";
	close;
}
verus04,217,216,5	duplicate(Geologist#ver04)	Student#ver05	4_M_HUMAN_01

verus04,50,193,3	script	Scholar#ver06	4_M_HUMERCHANT,{
	mes "[Scholar]";
	mes "Schwarzwald may be the most scientifically advanced among the three states of Midgard, but it still doesn't hold a candle to this place.";
	next;
	mes "[Scholar]";
	mes "The same goes for Juperos. If the scientific knowledge of this place passed down to Schwarzwald, it could have been much more powerful.";
	next;
	mes "[Scholar]";
	mes "Of course, that's based on my theory that the residents of this place were also Schwarzwaldians.";
	close;
}
verus04,127,243,3	script	Pierrot#ver07	4_M_PIERROT,{
	mes "[Pierrot]";
	mes "I feel like I'm going insane, stuck in this confined space.";
	mes "Hey, how about I read your fortune for the day with my juggling balls?";
	next;
	if (select( "Sure.", "No, thanks." ) == 2)
		close;
	mes "[Pierrot]";
	mes "Good, choose a color you like.";
	mes "The color you choose will tell me your fortune.";
	next;
	.@s = select( "Red", "Blue", "Yellow", "Green" );
	mes "[Pierrot]";
	mes "Dum, dum, dum! Your fortune for the day!";
	mes "Let's me get the fortune paper inside the ball...";
	next;
	mes "[Pierrot]";
	mes "Today is...";
	next;
	mes "[Pierrot]";
	switch(.@s) {
	case 1:
		mes "The same boring day, like yesterday and the day before.";
		mes "Only positive thinking will get you out of this funk. Smile and be nice to others, and maybe Lady Luck will brighten your day.";
		break;
	case 2:
		mes "Ack, you shouldn't have gotten out of bed. Wherever you go, trouble follows.";
		mes "I strongly recommend you stay at the Shelter for the day. Sleep off bad luck.";
		break;
	case 3:
		mes "Not a bad day, but you'll have to work to enjoy some good luck.";
		mes "Go to the Excavation Site and dig up some dirt. You may find some treasure.";
		break;
	case 4:
		mes "The luckiest day of your life! Wherever you go, you'll find wealth and friends.";
		mes "Maybe you'll find some historic artifacts buried in this place. That'll be awesome, huh?";
		break;
	}
	next;
	mes "[Pierrot]";
	mes "Do you like my reading? Or do you hate it?";
	mes "Your future is pliable--you can shape it however you want.";
	mes "Don't get too excited or depressed. Just stay focused on your goal.";
	next;
	mes "[Pierrot]";
	mes "All right, come back if you want another reading.";
	close;
}

verus04,180,209,3	script	Excavator#tre01	4_M_HUMAN_01,{
	mes "[Excavator]";
	mes "The owner of this house must have been an important figure in Verus City.";
	mes "Piles of official documents are discovered in this room.";
	next;
	mes "[Excavator]";
	mes "Most of the documents contain petty civil complaints, like water problems and neighbor disputes.";
	mes "All the documents, however, contain the initials, OX. I don't know if they're of a name or an abbreviation of some sort.";
	close;
}
verus04,202,181,3	script	#tre02	CLEAR_NPC,{
	mes "- The building entrance shows distinctive wear and tear, indicating abuse by a steady stream of traffic. YHT and DO NOT YELL are written on the door. -";
	close;
}
// tre03 ?
verus04,121,188,3	script	Excavator#tre04	4_M_HUMAN_01,{
	mes "[Excavator]";
	mes "This building is fully furnished, yet there is no sign of habitation.";
	mes "Maybe the owner lived somewhere else, like in a summer house or something.";
	close;
}
verus04,119,177,3	script	#tre05	CLEAR_NPC,{
	mes "- ZERT... is written on the door. The rest of the writing looks like it was scratched off with a stone.-";
	close;
}
verus04,85,145,3	script	#tre06	CLEAR_NPC,{
	mes "- +1 is written on the door. What could it mean? -";
	close;
}
verus04,83,131,3	script	Excavator#tre07	4_M_HUMAN_01,{
	mes "[Excavator]";
	mes "The owner of this house must have been a dancer. Her wardrobe is full of glittery stage clothes.";
	mes "Judging by their size, she must have been very tall for a woman. I wonder how she looked like.";
	close;
}
verus04,71,118,3	script	#tre08	CLEAR_NPC,{
	mes "- KDY is written on the door. Sooty streaks that spread outward from the inside to the entrance indicate frequent explosions. -";
	close;
}
verus04,71,131,3	script	#tre09	CLEAR_NPC,{
	mes "- KJH is written on the door. The entrance wall is dotted with tiny squares of paper containing time and numbers. -";
	close;
}
verus04,71,145,3	script	#tre10	CLEAR_NPC,{
	mes "- PKY is written on the door. Empty liquor bottles are littered around the house. -";
	close;
}
verus04,39,123,3	script	#tre11	CLEAR_NPC,{
	mes "- DGDG'S BOARD is written on the door. What does that mean? -";
	close;
}
verus04,17,145,3	script	#tre12	CLEAR_NPC,{
	mes "- THE SUNS is written on the door. -";
	close;
}
verus04,16,166,5	script	Excavator#tre13	4_M_HUMAN_01,{
	mes "[Excavator]";
	mes "*Cough Cough* The owner of this house was a hoarder.";
	mes "Lots of books. Lots of cat furballs. Lots of Assassin pictures. *Cough Cough*";
	close;
}
verus04,118,159,5	script	Excavator#tre14	4_M_HUMAN_01,{
	mes "[Excavator]";
	mes "This house is full of red mushrooms. Are they edible? Why are they only found inside this house? Was the owner farming them?";
	close;
}
verus04,123,143,3	script	#tre15	CLEAR_NPC,{
	mes "- MARES is written on the door, along with various drawings that seem to symbolize pirates. -";
	close;
}
verus04,72,168,3	script	#tre16	CLEAR_NPC,{
	mes "- LMH is written on the door, along with a flurry of hearts drawn on an edge. -";
	close;
}
verus04,91,168,3	script	#tre17	CLEAR_NPC,{
	mes "- MISA is written on the door. Various toy weapons are littered around the building. -";
	close;
}
verus04,50,197,3	script	Excavator#tre18	4_M_HUMAN_01,{
	mes "[Excavator]";
	mes "...";
	next;
	mes "[Excavator]";
	mes "Various pictures are found in this house, all of them featuring the owner with different men.";
	mes "I find that curious.";
	close;
}
verus04,34,197,3	script	#tre19	CLEAR_NPC,{
	mes "- ELTOHC is written on the door. In the center of the door is a W drawn in a circle. It could have been the owner's favorite letter. -";
	close;
}
verus04,17,245,3	script	#tre20	CLEAR_NPC,{
	mes "- LEONA'S BIRD HEAVEN is written on the door. Unsurprisingly, bird feathers are littered around the house. -";
	close;
}
verus04,13,262,3	script	#tre21	CLEAR_NPC,{
	mes "- KURAT is written on the door. The building wall is littered with hand-drawn skulls. -";
	close;
}
verus04,28,262,3	script	#tre22	CLEAR_NPC,{
	mes "- KSY is written on the door. A poster with The Performance of the Century! boldly printed across it is hung on the entrance wall. -";
	close;
}
verus04,54,256,3	script	#tre23	CLEAR_NPC,{
	mes "- BIBIC & MORZIP'S LOVE HOUSE is written on the door. A couple must have lived in this house. -";
	close;
}
verus04,31,236,3	script	Excavator#tre24	4_M_HUMAN_01,{
	mes "[Excavator]";
	mes "The owner of this house must have been a collector of some sort. There are many pictures of women in strange-looking dresses.";
	next;
	mes "[Excavator]";
	mes "Did you see the SKM drawn on the door? That reminds me of the other house with hearts drawn on its door.";
	mes "I hope it's not one of those childish customs. You know, to mark someone as theirs.";
	close;
}
verus04,62,230,3	script	#tre25	CLEAR_NPC,{
	mes "- HDY is written on the door. -";
	close;
}
verus04,80,230,3	script	#tre26	CLEAR_NPC,{
	mes "- BRAN is written on the door. Rows of empty bottles are standing on a side of the house. -";
	close;
}
verus04,79,265,3	script	#tre27	CLEAR_NPC,{
	mes "- KYH is written on the door. This building is in better condition than the rest in the neighborhood.-";
	close;
}
verus04,96,267,3	script	#tre28	CLEAR_NPC,{
	mes "- YAOB is written on the door, along with drawings of round, furry animals. -";
	close;
}
verus04,133,267,3	script	Excavator#tre29	4_M_HUMAN_01,{
	mes "[Excavator]";
	mes "This house is suspected to belong to a couple named SSUL and SINYC.";
	mes "The house is filled with incredible things. Everything in it is just gorgeous.";
	close;
}
verus04,152,267,3	script	#tre30	CLEAR_NPC,{
	mes "- LMS is written on the door, along with Composition Specialist on an edge. -";
	close;
}
verus04,168,267,3	script	#tre30_	CLEAR_NPC,{
	mes "- KJK is written on the door. -";
	close;
}
verus04,190,265,3	script	#tre31	CLEAR_NPC,{
	mes "- LJH is written on the door. The building wall is covered with numerous grocery store stickers. -";
	close;
}
verus04,172,234,3	script	#tre32	CLEAR_NPC,{
	mes "- YG is written on the door. A large picture of a smiling baby is visible through a window. -";
	close;
}
verus04,204,235,3	script	#tre33	CLEAR_NPC,{
	mes "- CHJ is written on the door. -";
	close;
}

verus04,91,252,5	script	Archaeologist#tevt01	4_M_6THPRIN1,10,10,{
	mes "[Archaeologist]";
	mes "Sometimes, we gather around to talk.";
	mes "Sharing information is a part of the job.";
	close;

OnTouch_:
	if (.ontalk == 1)
		end;
	.ontalk = 1;
	sleep 3000;
	npctalk "I suspect this Verus City serves a special purpose.", "Archaeologist#tevt01";
	sleep 5000;
	npctalk "How did you know this place is called Verus?", "New Excavator#tevt03";
	sleep 5000;
	npctalk "Oh, the name was found written on various milestones and walls at the Plaza.", "Civilization Researcher#tevt04";
	sleep 5000;
	npctalk "Verus City, Verus Town, Verus Plaza...", "Civilization Researcher#tevt04";
	sleep 5000;
	npctalk "There are two districts that remain unaccessible.", "Civilization Researcher#tevt04";
	sleep 5000;
	npctalk "Oh, those two that require permission. You know a lot.", "New Excavator#tevt03";
	sleep 5000;
	npctalk "I've just figured that out from on a map I've found in a house in the Town.", "Historian#tevt02";
	sleep 5000;
	npctalk "This place consists of four districts, and only the Town and the Plaza are explorable at this point.", "Archaeologist#tevt01";
	sleep 5000;
	npctalk "We'd better work harder, or our exploration might become limited to this very area.", "Archaeologist#tevt01";
	sleep 5000;
	npctalk "If it really was a planned city, then what was the plan?", "New Excavator#tevt03";
	sleep 5000;
	npctalk "Einbech is built purely for mining purposes. This city probably served a special purpose like that.", "Scientist#tevt05";
	sleep 5000;
	npctalk "It must have something to do with technological research and experimentation.", "Scientist#tevt05";
	sleep 5000;
	npctalk "I've deduced it from journals and diaries found in the Town.", "Historian#tevt02";
	sleep 5000;
	npctalk "Most of these journals and diaries belonged to scholars and scientists.", "Historian#tevt02";
	sleep 5000;
	npctalk "The point is this ancient civilization had some really advanced science.", "Civilization Researcher#tevt04";
	sleep 5000;
	npctalk "It may not be ancient at all. It could be something unfathomable.", "Civilization Researcher#tevt04";
	sleep 5000;
	npctalk "We're here to solve the mystery for a better future for mankind!", "New Excavator#tevt03";
	sleep 5000;
	npctalk "*Snort* In the end Rekenber takes all.", "Scientist#tevt05";
	sleep 5000;
	npctalk "But the core discoveries and the excavation efforts are shared by all the organizations involved.", "New Excavator#tevt03";
	sleep 5000;
	npctalk "What we can do is just do what we can do best in the moment.", "Civilization Researcher#tevt04";
	sleep 5000;
	npctalk "But I can't help but think Rekenber has a hidden agenda. I'm not trying to be unappreciative, but...", "Historian#tevt02";
	sleep 5000;
	npctalk "Let's focus on the present for now.", "Historian#tevt02";
	sleep 5000;
	npctalk "Why don't we share all the information we find except for our individual research subjects?", "Archaeologist#tevt01";
	sleep 5000;
	npctalk "I agree.", "Civilization Researcher#tevt04";
	sleep 1000;
	npctalk "All right.", "Scientist#tevt05";
	sleep 5000;
	npctalk "Um, do you know what's for lunch today?", "Scientist#tevt05";
	sleep 3000;
	npctalk "Um...", "Archaeologist#tevt01";
	sleep 5000;
	npctalk "Some frozen food. I'm just going to eat the bread I saved yesterday.", "Civilization Researcher#tevt04";
	sleep 5000;
	npctalk "Sigh, Rekenber can be stingy if it wants to.", "Historian#tevt02";
	sleep 5000;
	npctalk "Why? What's wrong with frozen food?", "New Excavator#tevt03";
	sleep 5000;
	npctalk "Here, try mine.", "Historian#tevt02";
	sleep 5000;
	npctalk "You can take mine, too.", "Archaeologist#tevt01";
	sleep 5000;
	npctalk "Or mine.", "Scientist#tevt05";
	sleep 3000;
	npctalk "...", "New Excavator#tevt03";
	sleep 5000;
	npctalk "Um, aren't you guys hungry?", "New Excavator#tevt03";
	sleep 5000;
	sleep 5000;
	npctalk "Is it possible it's frozen because it tastes bad otherwise?", "New Excavator#tevt03";
	sleep 35000;
	.ontalk = 0;
	end;
}

verus04,89,251,5	script	Historian#tevt02	4_TOWER_07,{
	mes "[Historian]";
	mes "What's the hardest thing about my job?";
	mes "When I'm forced to eat a terrible lunch provided by my sponsor.";
	next;
	mes "[Historian]";
	mes "In fact, it's been that way since I arrived in Verus City.";
	mes "Today was not an exception.";
	close;
}

verus04,91,248,7	script	New Excavator#tevt03	4_TOWER_04,{
	mes "[New Excavator]";
	mes "I have a lot to learn, and I'm a fast learner.";
	mes "For now, I'm doing mostly physical tasks.";
	next;
	mes "[New Excavator]";
	mes "I'm given free food, a place to sleep, and money. What else can I ask for?";
	close;
}

verus04,94,251,3	script	Civilization Researcher#tevt04	4_TOWER_16,{
	mes "[Civilization Researcher]";
	mes "I thought this was a part of Juperos.";
	mes "I'm now reconsidering that theory.";
	next;
	mes "[Civilization Researcher]";
	mes "Verus is similar to Juperos, yet different.";
	mes "Everything about it is more refined and sophisticated somehow.";
	close;
}

verus04,94,248,1	script	Scientist#tevt05	4_M_SAGE_C,{
	mes "[Scientist]";
	mes "This city's level of mechanical engineering is astonishing.";
	mes "There's no trace of magic.";
	next;
	mes "[Scientist]";
	mes "But I'm concerned:";
	mes "rapid development and sudden introduction of advanced technology could do more harm than good.";
	close;
}

verus04,116,220,0	script	#ep15_1elb	PORTAL,{
	mes "^FF0000- Caution -";
	mes "- For your safety, -";
	mes "- avoid running -";
	mes "- or jumping -";
	mes "- while inside. -^000000";
	close;
}

verus04,153,193,8	script	Merchant#ep15_1el10	4_F_CAPEGIRL,{
	mes "[Merchant]";
	mes "Ho ho ho!";
	mes "I came first, so I took the best spot!";
	close;
}

verus04,155,197,5	script	Adventurer ?#ep15_1el11	4_M_LGTPOOR,{
	mes "[Adventurer ?]";
	mes "*Stomach rumbles*";
	mes "Aww, I'm hungry...";
	next;
	mes "[Adventurer]";
	mes "But I have no money to buy food...";
	close;
}

verus04,150,193,3	script	Adventurer#ep15_1el12	4_M_DIEMAN,{
	mes "[Jean Baljean]";
	mes "Ugh, I was struck 19 times for a piece of bread.";
	close;
}

verus04,102,246,3	script	Adventurer#ep15_1el13	4_M_RACHMAN2,{
	mes "[Adventurer]";
	mes "Mushrooms growing out of rocks.";
	mes "How resilient!";
	close;
}

verus04,16,157,3	script	Adventurer#ep15_1el14	4_M_MIDDLE1,{
	mes "[Adventurer]";
	mes "Argh!";
	mes "So many paths are blocked!";
	close;
}

// missing #ep15_1el15 - 18
verus04,104,120,3	script	Cow#ep15_1el19	4_BULL,{
	mes "[Cow]";
	mes "*Moo*";
	close;
}

verus04,111,215,5	script	Adventurer#ep15_1el20	4_F_SHABBY,{
	mes "[Adventurer]";
	mes "Heh. *Drool*";
	mes "This place is incredible!";
	close;
}

verus04,111,211,3	script	Adventurer#ep15_1el21	4_F_KHGIRL,{
	mes "[Adventurer]";
	mes "This site is amazing.";
	mes "No wonder why Rekenber called dibs on it.";
	close;
}

verus04,113,235,5	script	Adventurer#ep15_1el22	4_M_PECOKNIGHT,{
	mes "[Adventurer]";
	mes "I want to find something awesome!";
	close;
}

verus04,124,220,8	script	Adventurer#ep15_1el23	4_M_HUMERCHANT,{
	mes "[Adventurer]";
	mes "The coming era will be yours.";
	close;
}

verus04,135,213,4	script	Sign#EP15_1DCenter	4_BOARD3,{
	mes "[Warning]";
	mes "Attention visitors of Phantasmagorika,";
	next;
	mes "[Warning]";
	mes "a cult group called the Doom Prayers has been frequently sighted in this area.";
	next;
	mes "[Warning]";
	mes "If you're a victim or a witness to the group's harassment, please report to the Phantasmagorika Police.";
	mes "- Phantasmagorika Police Chief -";
	close;
}
verus04,204,260,4	duplicate(Sign#EP15_1DCenter)	Sign#EP15_1DNorth	4_BOARD3
verus03,83,241,4	duplicate(Sign#EP15_1DCenter)	Sign#EP15_1DSouth	4_BOARD3
verus03,38,114,4	duplicate(Sign#EP15_1DCenter)	Sign#EP15_1DEast	4_BOARD3
verus03,116,39,4	duplicate(Sign#EP15_1DCenter)	Sign#EP15_1DWest	4_BOARD3


verus04,96,195,5	script	Adventurer Cat#ep15_1el18	4_CAT_REST,{
	mes "[Adventurer Cat]";
	mes "I must investi... ga... te...";
	mes "Zzz... Zzz...";
	close;
}
verus04,96,194,5	script	Adventurer Cat#ep15_1el17	4_CAT_REST,{
	mes "[Adventurer Cat]";
	mes "*Purr*";
	mes "*Meow*";
	close;
}
verus04,96,193,5	script	Adventurer Cat#ep15_1el16	4_CAT_REST,{
	mes "[Adventurer Cat]";
	mes "For some reason, I can't stand up.";
	mes "*Meow*";
	close;
}
verus04,96,192,5	script	Adventurer Cat#ep15_1el15	4_CAT_REST,{
	mes "[Adventurer Cat]";
	mes "I've got a good spot.";
	mes "*Purr*";
	close;
}

yuno_fild07,218,154,3	script	Adventurer#ep15_1el01	4_M_ARUNA_NFM1,{
	mes "[Adventurer]";
	mes "Ah!";
	mes "I want to see!";
	mes "Why can't I go in?!";
	close;
}
yuno_fild07,218,159,5	script	Adventurer#ep15_1el02	4_M_KHBOY,{
	mes "[Adventurer]";
	mes "All right!";
	mes "This time, I'm going to write a report on a field trip to Phantasmagorika.";
	next;
	mes "[Adventurer]";
	mes "Professor Jones will be so impressed he'll give me A+. *Chuckle*";
	close;
}
yuno_fild07,221,157,3	script	Adventurer#ep15_1el03	4_M_CHN8GUEK,{
	mes "[Adventurer]";
	mes "Toh!";
	mes "Sound mind, sound body!";
	close;
}
yuno_fild07,221,155,8	script	Adventurer#ep15_1el04	4_M_ALCHE_B,{
	mes "[Adventurer]";
	mes "I'd better pack enough potions for the trip to Phantasmagorika.";
	close;
}
yuno_fild07,217,155,5	script	Adventurer#ep15_1el05	4_F_ROGUE,{
	mes "[Adventurer]";
	mes "I'm impressed by Rekenber's support.";
	mes "Um...";
	close;
}
yuno_fild07,225,166,3	script	Merchant#ep15_1el06	4_CAT_DOWN,{
	mes "[Merchant]";
	mes "Ooooh!";
	mes "I've found a perfect spot for my business!";
	close;
}
yuno_fild07,225,144,1	script	Adventurer#ep15_1el07	1_M_ORIENT01,{
	mes "[Adventurer]";
	mes "Elevator? The scientific advancement of Schwarzwald is astonishing!";
	close;
}
yuno_fild07,217,149,3	script	Adventurer#ep15_1el08	4_F_JOB_BLACKSMITH,{
	mes "[Adventurer]";
	mes "An ancient civilization. Doesn't that sound incredible?";
	mes "I feel like I can hear ancient machines moving with loud clanking noises.";
	next;
	mes "[Adventurer]";
	mes "*Dreamy eyes*";
	mes "*Gaping mouth*";
	close;
}
yuno_fild07,224,152,3	script	Adventurer#ep15_1el09	4_M_SITDOWN,{
	mes "[Adventurer]";
	mes "Geez, this place is already crammed!";
	mes "Just looking at these people makes me tired.";
	close;
}

// ep15_1_elbs - To Phantasmagorika!
yuno_fild07,216,157,5	script	Guide Elisha#ep15_1bs2	4_F_ZONDAGIRL,{
	mes "[Elisha]";
	mes "It was working fine just a moment ago.";
	mes "I'm sorry.";
	mes "I'll have to call in a technician. Please use the stairs instead.";
	next;
	mes "[Elisha]";
	mes "^0000FFPhantasmagorika is past the tunnel to the south from the southeast gate outside Juperos Ruins.^000000";
	next;
	mes "[Elisha]";
	mes "There are elevator doors near the fountain in the center of the place. Could you check what happened to the elevator?";
	close;
OnInit:
	disablenpc "Guide Elisha#ep15_1bs2";
	end;
}

/* Illogical
verus04,1,1,5	script	Halo#ep15_1_elyo	4_M_DIEMAN,{
	end;
OnEnable:
	enablenpc "Halo#ep15_1_elyo";
	donpcevent "Fallen Man#ep15_1_elyo::OnDisable";
	end;
OnInit:
	disablenpc "Halo#ep15_1_elyo";
	end;
}
*/

verus04,115,221,5	script	Fallen Man#ep15_1_elyo	4_M_DIEMAN,{
	if (checkweight(1119,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest -";
		close;
	}
	.@name$ = strcharinfo(0);
	mes "- Someone died! -";
	next;
	mes "- Unfortunately, the person who died stuck in the elevator door, and the elevator that opened and closed constantly stuck to him.. -";
	next;
	mes "[" + .@name$ + "]";
	mes "Are you ok?";
	next;
	mes "[Fallen Man]";
	mes "......";
	next;
	mes "[" + .@name$ + "]";
	mes "Can you hear me?";
	next;
	mes "[Fallen Man]";
	mes "...Leave me alone...";
	next;
	mes "[" + .@name$ + "]";
	mes "What?";
	next;
	mes "[Fallen Man]";
	mes "I am fine, let me go..";
	next;
	mes "[" + .@name$ + "]";
	mes "But you don't look like it's nothing...";
	mes "Wait here,";
	mes "I will help you.";
	next;
	mes "[Fallen Man]";
	mes "Just telling you that I dont... Hey! My waist!!!";
	next;
	mes "[" + .@name$ + "]";
	mes "......";
	next;
	mes "[" + .@name$ + "]";
	mes "I will help you find a doctor!";
	next;
	mes "[Fallen Man]";
	mes "Excuse me, thank you.";
	next;
	.@time = checkquest(11377,PLAYTIME);
	if (.@time > 1)
		erasequest 11377;
	if (checkweight(1119,3) == 0) {
		mes "- You are carrying too many items to proceed with the quest -";
		close;
	}
	if (.@time == 1)
		mes "later, the boys lying on the stretcher were embarrassed and suddenly grabbed my hand..";
	else {
		mes "Later, the boy lying on the stretcher looked embarrassed and suddenly put a small fruit in my hand..";
		if (isbegin_quest(11377) == 0)
			setquest 11377;
		if (isbegin_quest(11376) == 0)
			getitem 522,1;// Fruit_Of_Mastela
		else {
			erasequest 11376;
			getitem 522,2;// Fruit_Of_Mastela
		}
	}
	// donpcevent "Halo#ep15_1_elyo::OnEnable";
	donpcevent "Fallen Man#ep15_1_elyo::OnDisable";
	close;

OnDisable:
	disablenpc "Fallen Man#ep15_1_elyo";
	disablenpc "Guide Elisha#ep15_1bs2";

 	enablenpc "Guide Elisha#ep15_1bs";
	enablenpc "Guide Scarlet#ep15_1bs";
	enablenpc "Du#ep15_1elb";
	enablenpc "Mark#ep15_1elb";
	enablenpc "Tamarin#ep15_1elb";
	enablenpc "Alph#ep15_1elb";
	enablenpc "Maggi#ep15_1elb";
	// disablenpc "Halo#ep15_1_elyo";
	stopnpctimer;
	end;
OnEnable:
	enablenpc "Fallen Man#ep15_1_elyo";
	enablenpc "Guide Elisha#ep15_1bs2";

	disablenpc "Guide Elisha#ep15_1bs";
	disablenpc "Guide Scarlet#ep15_1bs";
	disablenpc "Du#ep15_1elb";
	disablenpc "Mark#ep15_1elb";
	disablenpc "Tamarin#ep15_1elb";
	disablenpc "Alph#ep15_1elb";
	disablenpc "Maggi#ep15_1elb";
	initnpctimer;
	end;
OnTimer3600000:
	donpcevent "Fallen Man#ep15_1_elyo::OnDisable";
	stopnpctimer;
	end;
OnInit:
	disablenpc "Fallen Man#ep15_1_elyo";
	end;
}

yuno_fild07,216,157,5	script	Guide Elisha#ep15_1bs	4_F_ZONDAGIRL,{
	if (isbegin_quest(11376) > 0) {
		mes "[Elisha]";
		mes "Weird!! How can the elevator suddenly move again?";
		mes "maybe the following people have something to do?";
		erasequest 11376;
		close;
	}
	.@name$ = strcharinfo(0);
	if (checkquest(11377,PLAYTIME) > 1)
		erasequest 11377;
	if (ep15_1_atnad < 4) {
		mes "[Elisha]";
		mes "My company Rekenber is in partnership with the Eden Group";
		mes "for the ^0000FFPhantasmagorika excavation project^000000.";
		next;
		mes "[Elisha]";
		mes "The newly discovered legacy of the ancients: Phantasmagorika!";
		mes "Contact the ^0000FFEden Group^000000 to join its Phantasmagorika excavation project!";
		close;
	}
	mes "[Elisha]";
	mes "Good day.";
	mes "Please say your name, so I can check your registration.";
	emotion ET_THROB;
	next;
	switch( select( "Say your name.", "Ask about the registration.", "End conversation." ) ) {
	case 1:
		mes "[Elisha]";
		switch(ep15_1_elb) {
		case 0:
		case 1:
			mes "Um, let's see...";
			mes "I'm sorry, but you're not on the list. Could you check your registration status?";
			emotion ET_PROFUSELY_SWEAT;
			close;
		case 2:
			mes "You're back already.";
			emotion ET_THROB;
			next;
			mes "[Elisha]";
			mes "Let's see...";
			mes "Ah, I've found your name.";
			mes "Would you like to ^0000FFmove to Phantasmagorika^000000 now?";
			next;
			if (select( "No.", "Yes." ) == 1) {
				mes "[Elisha]";
				mes "Have a good day.";
				emotion ET_THROB;
				close;
			}
			mes "[Elisha]";
			mes "Let me send you to Phantasmagorika.";
			next;
			mes "[Elisha]";
			mes "For your safety, please avoid running or jumping while inside.";
			next;
			mes "[Elisha]";
			mes "Ready?";
			mes "Have a safe exploration!";
			emotion ET_THROB;
			next;
			mes "^FF0000- BEEP-! -";
			mes "- Service temporarily unavailable. -^000000";
			emotion ET_HUK, playerattached();
			next;
			mes "[Elisha]";
			mes "Um?";
			mes "Could you hold on a moment?";
			emotion ET_PROFUSELY_SWEAT;
			next;
			mes "^FF0000- BEEP-! -";
			mes "- Service temporarily unavailable. -^000000";
			emotion ET_HUK, playerattached();
			next;
			mes "[Elisha]";
			mes "Um...";
			mes "What's wrong with it?";
			mes "Please give me a moment.";
			emotion ET_PROFUSELY_SWEAT;
			next;
			mes "^FF0000- BEEP-! -";
			mes "- Service temporarily unavailable. -^000000";
			emotion ET_HUK, playerattached();
			next;
			mes "[Elisha]";
			mes "Uh-oh.";
			mes "Is it out of order?";
			mes "It can't be!";
			emotion ET_HUK;
			next;
			mes "^FF0000- BEEP-! -";
			mes "- Service temporarily unavailable. -^000000";
			emotion ET_HUK, playerattached();
			next;
			mes "[Elisha]";
			mes "I'm sorry, " + .@name$ + ".";
			mes "I know you're registered for the service, but it's out of order at this moment.";
			mes "I'm sorry for this inconvenience.";
			emotion ET_PROFUSELY_SWEAT;
			emotion ET_HUK, playerattached();
			next;
			mes "[Elisha]";
			mes "It was working fine just a moment ago.";
			mes "I'm sorry.";
			mes "I'll have to call in a technician. Please use the stairs instead.";
			next;
			mes "[Elisha]";
			mes "^0000FFPhantasmagorika is past the tunnel to the south from the southeast gate outside Juperos Ruins.^000000";
			next;
			mes "[Elisha]";
			mes "There are elevator doors near the fountain in the center of the place. Could you check what happened to the elevator?";
			mes "I'm so sorry for all this.";
			emotion ET_CRY;
			ep15_1_elb = 3;
			completequest 11364;
			setquest 11365;
			close;
		case 3:
			mes "It was working fine just a moment ago.";
			mes "I'm sorry.";
			mes "I'll have to call in a technician. Please use the stairs instead.";
			next;
			mes "[Elisha]";
			mes "^0000FFPhantasmagorika is past the tunnel to the south from the southeast gate outside Juperos Ruins.^000000";
			next;
			mes "[Elisha]";
			mes "There are elevator doors near the fountain in the center of the place. Could you check what happened to the elevator?";
			mes "I'm so sorry for all this.";
			emotion ET_CRY;
			close;
		case 4:
			mes "I'm sorry.";
			mes "The elevator is currently out of order.";
			close;
		default:
			break;
		}
		if (checkquest(11377,PLAYTIME) > 1)
			erasequest 11377;
		if (checkquest(11377,PLAYTIME) == -1) {
			if (rand(1,100) == 77) {
				mes "God! How come again!!!";
				mes "This bad elevator is always broken! Everyday!!!";
				setquest 11376;
				donpcevent "Fallen Man#ep15_1_elyo::OnEnable";
				close;
			}
		}
		mes "Let's see...";
		mes "A... B... C... D... E... F... Ah, there it is!";
		emotion ET_PROFUSELY_SWEAT;
		next;
		mes "[Elisha]";
		mes "" + .@name$ + ", your registration has been confirmed.";
		mes "Would you like to move to Phantasmagorika?";
		emotion ET_THROB;
		next;
		if (select( "No", "Yes" ) == 1) {
			mes "[Elisha]";
			mes "Have a good day.";
			close;
		}
		mes "[Elisha]";
		mes "Let me send you to Phantasmagorika.";
		next;
		mes "[Elisha]";
		mes "For your safety, please avoid running or jumping while inside.";
		next;
		mes "[Elisha]";
		mes "Ready?";
		mes "Have a safe exploration!";
		close2;
		warp "verus04",122,217;
		end;
	case 2:
		mes "[Elisha]";
		mes "*Clears her throat*";
		mes "This facility is provided by ^0000FFRekenber^000000";
		next;
		mes "[Elisha]";
		mes "to ^0000FFthe members of the Eden Group^000000 for their safe transportation to ^0000FFPhantasmagorika^000000.";
		next;
		mes "[Elisha]";
		mes "To use this facility, you must be ^0000FFa member of the Eden Group who is registered for the Phantasmagorika excavation project^000000.";
		next;
		mes "[Elisha]";
		mes "You can register for the use of the facility at ^0000FFRekenber Corporation Headquarters^000000, so long as you're a registered excavator of the Eden Group.";
		if (ep15_1_elb > 1)
			close;
		next;
		if (select( "End conversation.", "Ask for directions." ) == 1) {
			mes "[Elisha]";
			mes "My company Rekenber is in partnership with the Eden Group";
			mes "for the ^0000FFPhantasmagorika excavation project^000000.";
			next;
			mes "[Elisha]";
			mes "The newly discovered legacy of the ancients: Phantasmagorika!";
			mes "Contact the ^0000FFEden Group^000000 to join its Phantasmagorika excavation project!";
			close;
		}
		mes "[Elisha]";
		mes "To register for the use of the facility, please visit ^0000FFRekenber Corporation Headquarters in Lighthalzen and talk to Leitner at the information desk to the west from the main entrance on the first floor^000000.";
		next;
		mes "[Elisha]";
		mes "The whole registration process may sound cumbersome, but using the elevator is worth the trouble.";
		if (ep15_1_elb == 0) {
			ep15_1_elb = 1;
			setquest 11363;// To Phantasmagorika!
		}
		close;
	case 3:
		mes "[Elisha]";
		mes "My company Rekenber is in partnership with the Eden Group";
		mes "for the ^0000FFPhantasmagorika excavation project^000000.";
		next;
		mes "[Elisha]";
		mes "The newly discovered legacy of the ancients: Phantasmagorika!";
		mes "Contact the ^0000FFEden Group^000000 to join its Phantasmagorika excavation project!";
		close;
	}
	end;
OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "!isbegin_quest(11363)" );
	end;
}

lhz_in01,75,209,3	script	Leitner#ep15_1bs	4_LGTSCIENCE,{
	mes "[Leitner]";
	switch(ep15_1_elb) {
	case 0:
		mes "Heya!";
		mes "What brings you here, sweetheart?";
		mes "If you're looking for a shoulder to cry on, I'm here.";
		emotion ET_CHUP;
		close;
	case 1:
		mes "Heya!";
		mes "What brings you here, sweetheart?";
		mes "If you're looking for a shoulder to cry on, I'm here.";
		emotion ET_CHUP;
		next;
		select("Ask about the registration process.");
		mes "[Leitner]";
		mes "Oh.";
		mes "I should have known.";
		mes "You mean the elevator to Phantasmagorika, eh?";
		emotion ET_THINK;
		next;
		mes "[Leitner]";
		mes "When I first got this job, the elevator was private and I did diddly-squat.";
		next;
		mes "[Leitner]";
		mes "Then, the management opened it to the public and my life went straight to hell.";
		next;
		mes "[Leitner]";
		mes "Ah, why me?!";
		mes "Goodbye, peaceful days!";
		mes "I'm so busy that I barely have time for the ladies.";
		emotion ET_HELP;
		next;
		mes "[Leitner]";
		mes "Anyway, let's get you registered. I want to get back to my break.";
		mes "Err... Write down your name here, and put your fingerprint next to it.";
		mes "Done. Easy, huh?";
		next;
		mes "[Leitner]";
		mes "I know, I know; why the extra step when the elevator is open to the public?";
		next;
		mes "^0000FF- BEEP-! -";
		mes "- The following users -";
		mes "- have been registered. -^000000";
		next;
		mes "[Leitner]";
		mes "Alright,";
		mes "you're good to go.";
		mes "Now you can use the elevator.";
		ep15_1_elb = 2;
		completequest 11363;// To Phantasmagorika!
		setquest 11364;
		close;
	case 2:
		mes "I know, I know; why the extra step when the elevator is open to the public?";
		next;
		mes "[Leitner]";
		mes "Now you can use the elevator.";
		close;
	default:
		mes "The elevator breaks almost every day, probably from carrying too many people.";
		mes "Ah, I need rest. Sigh.";
		emotion ET_HELP;
		close;
	}
}

verus04,119,220,3	script	Guide Scarlet#ep15_1bs	4_M_TELEPORTER,{
	if (isbegin_quest(11376) > 0) {
		mes "[Scarlet]";
		mes "Hey! That has been solved!";
		mes "Hey... sorry, I shouldn't laugh, but it's really funny... oh...";
		erasequest 11376;
		close;
	}
	.@name$ = strcharinfo(0);
	mes "[Scarlet]";
	switch(ep15_1_elb) {
	case 0:
	case 1:
	case 2:
		mes "*Clears her throat*";
		mes "This facility is provided by ^0000FFRekenber^000000";
		next;
		mes "[Scarlet]";
		mes "to ^0000FFthe members of the Eden Group^000000 for their safe transportation to ^0000FFPhantasmagorika^000000.";
		next;
		mes "[Scarlet]";
		mes "To use this facility, you must be ^0000FFa member of the Eden Group who is registered for the Phantasmagorika excavation project^000000.";
		next;
		mes "[Scarlet]";
		mes "You can register for the use of the facility at ^0000FFRekenber Corporation Headquarters^000000, so long as you're a registered excavator of the Eden Group.";
		next;
		mes "[Scarlet]";
		mes "Once you are registered, please double-check your registration status before using the facility.";
		close;
	case 3:
		mes "What did you do in the elevator?";
		emotion ET_FRET;
		next;
		mes "[Scarlet]";
		mes "I told you not to run or jump inside the elevator!";
		next;
		mes "[Scarlet]";
		mes "I can't believe you crushed the doors!";
		next;
		mes "[Mark]";
		mes "It's my fault.";
		mes "I should have kept a tight rein on him.";
		emotion ET_PROFUSELY_SWEAT, getnpcid(0, "Mark#ep15_1elb");
		cutin "bu_mark3.bmp",0;
		next;
		mes "[Du]";
		mes "How do you expect me to trust myself to such a shoddy machine?";
		emotion ET_HUK, getnpcid(0, "Du#ep15_1elb");
		cutin "bu_du3.bmp",2;
		next;
		mes "[Mark]";
		mes "Enough!";
		mes "Apologize to the lady!";
		emotion ET_FRET, getnpcid(0, "Mark#ep15_1elb");
		cutin "bu_mark4.bmp",0;
		next;
		mes "[Du]";
		mes "But he started it...";
		cutin "bu_du3.bmp",2;
		next;
		mes "[Mark]";
		mes "......";
		emotion ET_FRET, getnpcid(0, "Mark#ep15_1elb");
		cutin "bu_mark4.bmp",0;
		next;
		mes "[Tamarin]";
		mes "I told you stop jumping!";
		emotion ET_HUK, getnpcid(0, "Tamarin#ep15_1elb");
		cutin "ep143_taang.bmp",2;
		next;
		mes "[Alph]";
		mes "You guys,";
		mes "stop fighting.";
		mes "The floor feels dangerously unstable.";
		emotion ET_PROFUSELY_SWEAT, getnpcid(0, "Alph#ep15_1elb");
		cutin "bu_alp2.bmp",2;
		next;
		mes "[Scarlet]";
		mes "We all should get off and call in a techni...";
		cutin "",255;
		next;
		mes "^FF0000- THUD -^000000";
		emotion ET_HUK;
		emotion ET_HUK, getnpcid(0, "Du#ep15_1elb");
		emotion ET_HUK, getnpcid(0, "Mark#ep15_1elb");
		emotion ET_HUK, getnpcid(0, "Tamarin#ep15_1elb");
		emotion ET_HUK, getnpcid(0, "Alph#ep15_1elb");
		emotion ET_HUK, getnpcid(0, "Maggi#ep15_1elb");
		next;
		mes "[Maggi]";
		mes "Kyaaaaah-!";
		emotion ET_HUK, getnpcid(0, "Maggi#ep15_1elb");
		cutin "bu_maggi4.bmp",2;
		next;
		mes "[Du]";
		mes "Wah!";
		mes "The floor rattled!";
		emotion ET_PROFUSELY_SWEAT, getnpcid(0, "Du#ep15_1elb");
		cutin "bu_du5.bmp",2;
		next;
		mes "[Scarlet]";
		mes "Stop!";
		mes "Everyone, stay still!";
		mes "Or we might plummet to the bottom!";
		emotion ET_HUK;
		cutin "",255;
		next;
		mes "[Scarlet]";
		mes "Hey,";
		mes "you!";
		mes "Help!";
		emotion ET_HELP;
		next;
		mes "[Scarlet]";
		mes "This elevator is so unstable that none of us can move.";
		mes "Could you bring us something to ^0000FFsupport the floor^000000?";
		next;
		mes "[Scarlet]";
		mes "We don't have time to wait for a technician!";
		mes "We just need ^FF000030 Used Iron Plates from Dimiks^000000 in Juperos!";
		next;
		mes "[Scarlet]";
		mes "Please help us!";
		ep15_1_elb = 4;
		completequest 11365;
		setquest 11366;
		close;
	case 4:
		mes "Careful!";
		mes "Everyone, stop moving!";
		next;
		mes "[Du]";
		mes "WAH-!";
		mes "We're going to crash to the ground!";
		emotion ET_HUK, getnpcid(0, "Du#ep15_1elb");
		cutin "bu_du5.bmp",2;
		next;
		mes "[Tamarin]";
		mes "Don't say that!";
		mes "This is your fault!";
		emotion ET_FRET, getnpcid(0, "Tamarin#ep15_1elb");
		cutin "ep143_taang.bmp",2;
		next;
		mes "[Scarlet]";
		mes "Quiet, both of you!";
		mes "If you move an inch, we are all going to die!";
		emotion ET_HUK;
		cutin "",255;
		next;
		if (countitem(7319) < 30) {
			mes "[Scarlet]";
			mes "This elevator is so unstable that none of us can move.";
			mes "Could you bring us something to ^0000FFsupport the floor^000000?";
			next;
			mes "[Scarlet]";
			mes "We don't have time to wait for a technician!";
			mes "We just need ^FF000030 Used Iron Plates from Dimiks^000000 in Juperos!";
			next;
			mes "[Scarlet]";
			mes "Please help us!";
			close;
		}
		mes "[Scarlet]";
		mes "Did you bring Used Iron Plates?";
		mes "Please push them in here carefully, one by one.";
		delitem 7319,30;// Old_Steel_Plate
		ep15_1_elb = 5;
		completequest 11366;
		next;
		mes "[Scarlet]";
		mes "They might not hold for long, but that should still be enough us to get out.";
		next;
		select("Push in Used Iron Plates.");
		mes "[Scarlet]";
		mes "Now, get off!";
		mes "The plates won't hold for long!";
		next;
		mes "[Du]";
		mes "Thank the gods!";
		mes "Here, Maggi!";
		mes "Take my hand and get down.";
		cutin "bu_du4.bmp",2;
		next;
		mes "[Scarlet]";
		mes "Whew...";
		mes "I'm glad no one's hurt.";
		mes "I'll let this go,";
		mes "but never again!";
		cutin "",255;
		next;
		mes "[Scarlet]";
		mes "And " + .@name$ + ", thank you so much.";
		mes "We could have been in big trouble if it weren't for you.";
		emotion ET_THANKS;
		next;
		mes "[Scarlet]";
		mes "I've just heard from Elisha.";
		mes "You had to walk because the elevator was broken, right?";
		next;
		mes "[Scarlet]";
		mes "I'm sorry for the inconvenience.";
		mes "The elevator is back in operation now. Let me know if you want to go up.";
		next;
		mes "[Mark]";
		mes "Whew! " + .@name$ + ", you've saved us.";
		mes "Sigh, I don't know when he's going to grow up.";
		emotion ET_THANKS, getnpcid(0, "Mark#ep15_1elb");
		cutin "bu_mark2.bmp",0;
		next;
		mes "[Maggi]";
		mes "*Sob* *Hiccup*";
		mes "Th-thanks... *Sob* *Hiccup*";
		mes "I was so scared! Wah-!";
		emotion ET_THANKS, getnpcid(0, "Maggi#ep15_1elb");
		cutin "bu_maggi4.bmp",2;
		next;
		mes "[Du]";
		mes "...Sorry.";
		cutin "bu_du5.bmp",2;
		next;
		mes "[Tamarin]";
		mes "Thank you.";
		mes "Sigh, I don't want to imagine what might have happened if you, " + .@name$ + ", didn't pass by at that moment.";
		emotion ET_THANKS, getnpcid(0, "Tamarin#ep15_1elb");
		cutin "ep143_tasmi.bmp",2;
		next;
		mes "[Alph]";
		mes "...Thank you.";
		cutin "bu_alp1.bmp",2;
		emotion ET_THANKS, getnpcid(0, "Alph#ep15_1elb");
		next;
		mes "[Tamarin]";
		mes "By the way, don't you think it's strange";
		mes "that an elevator is set up and running in the newly discovered ruins?";
		cutin "ep143_tasta.bmp",2;
		next;
		mes "[Mark]";
		mes "Well,";
		mes "Rekenber is sponsoring the excavation, and that's a good enough reason for me.";
		cutin "bu_mark1.bmp",0;
		next;
		mes "[???]";
		mes "The ruins under Juperos. Isn't that exciting?";
		cutin "",255;
		next;
		mes "[Du]";
		mes "It is!";
		mes "No one hasn't figured out when the ruins were built.";
		mes "Let's go! I want to be the first to know!";
		cutin "bu_du2.bmp",2;
		next;
		mes "[Mark]";
		mes "Calm down!";
		mes "Haven't you learned? You almost broke the elevator!";
		emotion ET_FRET, getnpcid(0, "Mark#ep15_1elb");
		cutin "bu_mark3.bmp",0;
		next;
		mes "[Scarlet]";
		mes "Be careful!";
		mes "The floor is still unstable!";
		cutin "",255;
		close;
	default:
		mes "Good day.";
		mes "Please say your name, so I can check your registration.";
		next;
		if (select( "Say your name.", "End conversation." ) == 2) {
			mes "[Scarlet]";
			mes "Have a good day.";
			close;
		}
		mes "[Scarlet]";
		mes "Hm...";
		mes "Yes, " + .@name$ + ", your registration has been confirmed.";
		mes "Would you like to move to the entrance to Juperos?";
		next;
		if (select( "No", "Yes" ) == 1) {
			mes "[Scarlet]";
			mes "Have a good day.";
			close;
		}
		mes "[Scarlet]";
		mes "Ready?";
		mes "Have a safe exploration!";
		close2;
		warp "yuno_fild07",230,156;
		end;
	}
}

function	script	excavator_part2	{
	mes "[Du]";
	mes "Hm...";
	mes "This place doesn't look as exciting as I thought.";
	cutin "bu_du3.bmp",2;
	next;
	mes "[Mark]";
	mes "What did you expect?";
	emotion ET_THINK, getnpcid(0, "Mark#ep15_1elb");
	cutin "bu_mark1.bmp",0;
	next;
	mes "[Du]";
	mes "You know,";
	mes "I thought it'd be filled with amazing treasures.";
	cutin "bu_du2.bmp",2;
	next;
	mes "[Mark]";
	mes "It it were, other people probably beat us to it.";
	cutin "bu_mark2.bmp",0;
	next;
	mes "[Alph]";
	mes "Um...";
	mes "The place may not look like much, but the building styles and materials are not like what I've seen in Midgard.";
	cutin "bu_alp1.bmp",2;
	next;
	mes "[Alph]";
	mes "Or in Juperos.";
	next;
	mes "[Du]";
	mes "Whoa!";
	mes "Guys, come look at this fountain!";
	emotion ET_HUK, getnpcid(0, "Fountain#ep15_1elb");
	cutin "bu_du2.bmp",2;
	setquest 11367;// Looking for the Traces
	ep15_1_elb = 6;
	return;
}

verus04,117,219,0	script	Alph#ep15_1elb	4_M_BLACKMAN,{
	switch(ep15_1_elb) {
	case 0:
	case 1:
	case 2:
		mes "[Alph]";
		mes "Excavation, that's a good subject.";
		emotion ET_THINK;
		cutin "bu_alp4.bmp",2;
		close3;
	case 3:
		mes "[Alph]";
		mes "......";
		mes "S-stop moving.";
		emotion ET_PROFUSELY_SWEAT;
		cutin "bu_alp2.bmp",2;
		next;
		mes "[Du]";
		mes "WAAAAAHH-!";
		emotion ET_HUK, getnpcid(0, "Du#ep15_1elb");
		cutin "bu_du5.bmp",2;
		next;
		mes "[Scarlet]";
		mes "What did you do in the elevator?";
		mes "I told you not to run or jump inside the elevator!";
		emotion ET_HUK, getnpcid(0, "Guide Scarlet#ep15_1bs");
		cutin "",255;
		close;
	case 4:
		mes "[Alph]";
		mes "S-stop moving.";
		mes "Th-the f-floor...";
		emotion ET_PROFUSELY_SWEAT;
		cutin "bu_alp2.bmp",2;
		close3;
	case 5:
		excavator_part2();
		close3;
	case 6:
		mes "[Alph]";
		mes "What about the fountain?";
		emotion ET_HUK, getnpcid(0, "Fountain#ep15_1elb");
		cutin "bu_alp1.bmp",2;
		close3;
	default:
		mes "[Alph]";
		mes "...Thank you.";
		cutin "bu_alp1.bmp",2;
		close3;
	}
}

verus04,115,220,5	script	Du#ep15_1elb	4_M_REDMAN,{
	switch(ep15_1_elb) {
	case 0:
	case 1:
	case 2:
		mes "[Du]";
		mes "Adventurers,";
		mes "let's go!";
		cutin "bu_du2.bmp",2;
		close3;
	case 3:
		mes "[Du]";
		mes "WAAAAAHH-!";
		emotion ET_HUK;
		cutin "bu_du5.bmp",2;
		next;
		mes "[Du]";
		mes "Someone please do something!";
		next;
		mes "[Scarlet]";
		mes "What did you do in the elevator?";
		mes "I told you not to run or jump inside the elevator!";
		emotion ET_HUK, getnpcid(0, "Guide Scarlet#ep15_1bs");
		cutin "",255;
		close;
	case 4:
		mes "[Du]";
		mes "WAH-!";
		mes "We're going to crash to the ground!";
		emotion ET_HUK;
		cutin "bu_du5.bmp",2;
		next;
		mes "[Tamarin]";
		mes "Don't say that!";
		mes "This is your fault!";
		emotion ET_HUK, getnpcid(0, "Tamarin#ep15_1elb");
		cutin "ep143_tahuk.bmp",2;
		next;
		mes "[Scarlet]";
		mes "Quiet, both of you!";
		mes "If you move an inch, we are all going to die!";
		emotion ET_HUK, getnpcid(0, "Guide Scarlet#ep15_1bs");
		cutin "",255;
		close;
	case 5:
		excavator_part2();
		close3;
	case 6:
		mes "[Du]";
		mes "Whoa!";
		mes "Guys, come look at this fountain!";
		emotion ET_HUK, getnpcid(0, "Fountain#ep15_1elb");
		cutin "bu_du2.bmp",2;
		close3;
	default:
		mes "[Du]";
		mes "Adventuring is all about bravery and curiosity!";
		cutin "bu_du2.bmp",2;
		close3;
	}
}

verus04,117,220,3	script	Maggi#ep15_1elb	4_F_PINKWOMAN,{
	switch(ep15_1_elb) {
	case 0:
	case 1:
	case 2:
		mes "[Maggi]";
		mes "Phantasmagorika. What a pretty name!";
		cutin "bu_maggi2.bmp",2;
		close3;
	case 3:
		mes "[Maggi]";
		mes "WAAAAAHH-!!!";
		emotion ET_HUK;
		cutin "bu_maggi4.bmp",2;
		next;
		mes "[Du]";
		mes "WAAAAAHH-!";
		emotion ET_HUK, getnpcid(0, "Du#ep15_1elb");
		cutin "bu_du5.bmp",2;
		next;
		mes "[Scarlet]";
		mes "What did you do in the elevator?";
		mes "I told you not to run or jump inside the elevator!";
		emotion ET_HUK, getnpcid(0, "Guide Scarlet#ep15_1bs");
		cutin "",255;
		close;
	case 4:
		mes "[Maggi]";
		mes "WAAAAAHH-!!!!";
		emotion ET_HUK;
		cutin "bu_maggi4.bmp",2;
		close3;
	case 5:
		excavator_part2();
		close3;
	case 6:
		mes "[Maggi]";
		mes "Du is full of bile and vinegar.";
		mes "What's so interesting about the fountain?";
		emotion ET_HUK, getnpcid(0, "Fountain#ep15_1elb");
		cutin "bu_maggi1.bmp",2;
		close3;
	default:
		mes "[Maggi]";
		mes "*Sob* *Hiccup*";
		mes "Th-thanks... *Sob* *Hiccup*";
		mes "I was so scared! Wah-!";
		emotion ET_CRY;
		cutin "bu_maggi4.bmp",2;
		close3;
	}
}

verus04,115,221,5	script	Mark#ep15_1elb	4_M_BLUEMAN,{
	switch(ep15_1_elb) {
	case 0:
	case 1:
	case 2:
		mes "[Mark]";
		mes "Phantasmagorika.";
		mes "I can't wait to know more about this place.";
		cutin "bu_mark1.bmp",0;
		next;
		mes "[Mark]";
		mes "It's discovered near Juperos, but believed to belong to a different civilization.";
		cutin "bu_mark2.bmp",0;
		close3;
	case 3:
		mes "[Mark]";
		mes "Watch out!";
		emotion ET_HUK;
		cutin "bu_mark4.bmp",0;
		next;
		mes "[Du]";
		mes "WAAAAAHH-!";
		emotion ET_HUK, getnpcid(0, "Du#ep15_1elb");
		cutin "bu_du5.bmp",2;
		next;
		mes "[Scarlet]";
		mes "What did you do in the elevator?";
		mes "I told you not to run or jump inside the elevator!";
		emotion ET_HUK, getnpcid(0, "Guide Scarlet#ep15_1bs");
		cutin "",255;
		close;
	case 4:
		mes "[Mark]";
		mes "By the gods, Du!";
		mes "You're going to give me a heart attack!";
		emotion ET_FRET;
		cutin "bu_mark3.bmp",0;
		close3;
	case 5:
		excavator_part2();
		close3;
	case 6:
		mes "[Mark]";
		mes "What about the fountain?";
		emotion ET_HUK, getnpcid(0, "Fountain#ep15_1elb");
		cutin "bu_mark3.bmp",0;
		close3;
	default:
		mes "[Mark]";
		mes "Whew! " + strcharinfo(0) + ", you've saved us.";
		mes "Sigh, I don't know when he's going to grow up.";
		cutin "bu_mark3.bmp",0;
		close3;
	}
}

verus04,116,219,5	script	Tamarin#ep15_1elb	4_M_TAMARIN,{
	switch(ep15_1_elb) {
	case 0:
	case 1:
	case 2:
		mes "[Tamarin]";
		mes "An excavation project of this scale should attract throngs of people.";
		cutin "ep143_tasta.bmp",2;
		close3;
	case 3:
		mes "[Tamarin]";
		mes "I told you stop jumping!";
		emotion ET_HUK;
		cutin "ep143_tahuk.bmp",2;
		next;
		mes "[Du]";
		mes "WAAAAAHH-!";
		emotion ET_HUK, getnpcid(0, "Du#ep15_1elb");
		cutin "bu_du5.bmp",2;
		next;
		mes "[Scarlet]";
		mes "What did you do in the elevator?";
		mes "I told you not to run or jump inside the elevator!";
		emotion ET_HUK, getnpcid(0, "Guide Scarlet#ep15_1bs");
		cutin "",255;
		close;
	case 4:
		mes "[Tamarin]";
		mes "Argh,";
		mes "nothing is going in my favor!";
		emotion ET_CRY;
		cutin "ep143_tahuk.bmp",2;
		close3;
	case 5:
		excavator_part2();
		close3;
	case 6:
		mes "[Tamarin]";
		mes "Hm, did Du find something in the fountain?";
		emotion ET_HUK, getnpcid(0, "Fountain#ep15_1elb");
		cutin "ep143_tasmi.bmp",2;
		close3;
	default:
		mes "[Tamarin]";
		mes "Thank you.";
		mes "Sigh, I don't want to imagine what might have happened if you, " + strcharinfo(0) + ", didn't pass by at that moment.";
		cutin "ep143_tasmi.bmp",2;
		close3;
	}
}

verus04,116,226,0	script	Fountain#ep15_1elb	HIDDEN_NPC,{
	if (ep15_1_elb == 6) {
		mes "[Du]";
		mes "Look, I wiped it, and it sparkles!";
		cutin "bu_du2.bmp",2;
		next;
		mes "[Alph]";
		mes "Why can't you just listen to us?";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Tamarin]";
		mes "Stop wasting your time on something so stupid!";
		cutin "ep143_taang.bmp",2;
		next;
		mes "[Alph]";
		mes "Um...";
		mes "Wait.";
		cutin "bu_alp3.bmp",2;
		next;
		mes "[Alph]";
		mes "Look, it doesn't look like it's been buried deep underground for centuries.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Tamarin]";
		mes "You're right. It looks too clean underneath all the dirt and grime.";
		cutin "ep143_tasta.bmp",2;
		next;
		mes "[Alph]";
		mes "Let's see...";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Alph]";
		mes "Um...";
		mes "It's too clean. I can't tell anything about it.";
		cutin "bu_alp2.bmp",2;
		next;
		mes "[Alph]";
		mes "If this fountain was ever used, it should have some sort of deposit left on the bottom, but there's none at all. It's almost as if the water was drained out of it at once.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Alph]";
		mes "The deposit could have been wiped off naturally after a long time.";
		next;
		mes "[Alph]";
		mes "Let's look around for something else.";
		next;
		mes "[Tamarin]";
		mes "How about those sundries on the left side?";
		emotion ET_HUK, getnpcid(0, "Sundries#ep15_1elb");
		cutin "ep143_tasta.bmp",2;
		ep15_1_elb = 7;
		completequest 11367;
		setquest 11368;
		close3;
	}
	if (ep15_1_elb == 7) {
		mes "[Alph]";
		mes "Let's look around for something else.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Tamarin]";
		mes "How about those sundries on the left side?";
		emotion ET_HUK, getnpcid(0, "Sundries#ep15_1elb");
		cutin "ep143_tasta.bmp",2;
		close3;
	}
	mes "- Ordinary-looking Fountain -";
	mes "- There's nothing in it. -";
	close;
}

verus04,95,238,0	script	Sundries#ep15_1elb	HIDDEN_NPC,{
	if (ep15_1_elb == 7) {
		mes "[Alph]";
		mes "Hm...";
		mes "Everything looks too clean.";
		mes "This site doesn't look like it's as old as we thought it was.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Alph]";
		mes "Aside from those piles of broken machines, nothing looks too special.";
		next;
		mes "[Alph]";
		mes "And look at the tree on the left side.";
		emotion ET_HUK, getnpcid(0, "Tree#ep15_1elb");
		ep15_1_elb = 8;
		completequest 11368;
		setquest 11369;// Looking for the Traces
		close3;
	}
	if (ep15_1_elb == 8) {
		mes "[Alph]";
		mes "Look at the tree on the left side.";
		cutin "bu_alp1.bmp",2;
		emotion ET_HUK, getnpcid(0, "Tree#ep15_1elb");
		close3;
	}
	mes "- The ground is littered with sundries. -";
	close;
}

verus04,79,249,0	script	Tree#ep15_1elb	HIDDEN_NPC,{
	if (ep15_1_elb == 8) {
		mes "[Du]";
		mes "I've been wondering since we arrived: don't trees need sunlight to grow?";
		cutin "bu_du1.bmp",2;
		next;
		mes "[Tamarin]";
		mes "*Gasp*";
		mes "Du, that's the smartest thing I've ever heard you say.";
		cutin "ep143_tahuk.bmp",2;
		next;
		mes "[Du]";
		mes "What did you say?";
		cutin "bu_du5.bmp",2;
		next;
		mes "[Mark]";
		mes "How did this tree grow underground?";
		mes "There's no sunlight.";
		cutin "bu_mark1.bmp",0;
		next;
		mes "[Maggi]";
		mes "It doesn't look like it's enchanted.";
		cutin "bu_maggi1.bmp",2;
		next;
		mes "[Du]";
		mes "Oh, look here!";
		mes "Something strange is standing in front of the door!";
		emotion ET_HUK, getnpcid(0, "Signboard#ep15_1elb");
		cutin "bu_du2.bmp",2;
		ep15_1_elb = 9;
		completequest 11369;
		setquest 11370;
		close3;
	}
	if (ep15_1_elb == 9) {
		mes "[Du]";
		mes "Oh, look here!";
		mes "Something strange is standing in front of the door!";
		emotion ET_HUK, getnpcid(0, "Signboard#ep15_1elb");
		cutin "bu_du2.bmp",2;
		close3;
	}
	mes "A tall, verdant tree.";
	mes "Nothing looks special about it, except that it's growing underground.";
	close;
}

verus04,62,255,0	script	Signboard#ep15_1elb	HIDDEN_NPC,{
	if (ep15_1_elb == 9) {
		mes "[Mark]";
		mes "Hey!";
		mes "Stop wandering off! This place can be dangerous!";
		cutin "bu_mark3.bmp",0;
		next;
		mes "[Du]";
		mes "Adventuring is all about bravery and curiosity!";
		cutin "bu_du2.bmp",2;
		next;
		mes "[Du]";
		mes "And I'm not going to let other people take all the treasures!";
		cutin "bu_du1.bmp",2;
		next;
		mes "[Tamarin]";
		mes "Last time you said that, you were hospitalized for a month.";
		cutin "ep143_taang.bmp",2;
		next;
		mes "[Du]";
		mes "This time, it's different!";
		mes "Plus, what doesn't kill me only makes me stronger. It did!";
		cutin "bu_du5.bmp",2;
		next;
		mes "[Mark]";
		mes "You're delusional.";
		cutin "bu_mark4.bmp",0;
		next;
		mes "[Alph]";
		mes "Oh,";
		mes "wait.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Alph]";
		mes "Look behind the building.";
		mes "There's a path that leads upward.";
		cutin "bu_alp3.bmp",2;
		next;
		mes "[Du]";
		mes "I go";
		mes "wherever my instinct leads me!";
		mes "Mwah hah hah!";
		cutin "bu_du2.bmp",2;
		next;
		mes "[Mark]";
		mes "Du, stop!";
		mes "Did you not hear me?!";
		cutin "bu_mark3.bmp",0;
		next;
		mes "[Mark]";
		mes "Grr!";
		mes "He's out of control.";
		next;
		mes "[Maggi]";
		mes "Mark,";
		mes "Du's managed to get that far already.";
		cutin "bu_maggi1.bmp",2;
		next;
		mes "[Mark]";
		mes "Grr!";
		mes "That knucklehead!";
		cutin "bu_mark3.bmp",0;
		next;
		mes "[Mark]";
		mes "We'd better follow him before we lose him.";
		cutin "bu_mark1.bmp",0;
		ep15_1_elb = 10;
		completequest 11370;
		setquest 11371;
		close3;
	}
	if (ep15_1_elb == 10) {
		mes "[Alph]";
		mes "Look behind the building.";
		mes "There's a path that leads upward.";
		cutin "bu_alp3.bmp",2;
		next;
		mes "[Du]";
		mes "I go";
		mes "wherever my instinct leads me!";
		mes "Mwah hah hah!";
		cutin "bu_du2.bmp",2;
		next;
		mes "[Mark]";
		mes "Du, stop!";
		mes "Did you not hear me?!";
		cutin "bu_mark3.bmp",0;
		next;
		mes "[Mark]";
		mes "Grr!";
		mes "He's out of control.";
		next;
		mes "[Maggi]";
		mes "Mark,";
		mes "Du's managed to get that far already.";
		cutin "bu_maggi1.bmp",2;
		next;
		mes "[Mark]";
		mes "Grr!";
		mes "That knucklehead!";
		cutin "bu_mark3.bmp",0;
		next;
		mes "[Mark]";
		mes "We'd better follow him before we lose him.";
		cutin "bu_mark1.bmp",0;
		close3;
	}
	mes "- The door is blocked. -";
	close;
}

verus03,46,23,3	script	Du#ep15_1elb03	4_M_REDMAN,{
	if (ep15_1_elb == 10) {
		mes "[Du]";
		mes "Whoa...";
		mes "I thought this place would be the same as the last one, but it's overrun with machines.";
		emotion ET_HUK;
		cutin "bu_du5.bmp",2;
		next;
		mes "[Du]";
		mes "Are these the same as those in Juperos?";
		cutin "bu_du1.bmp",2;
		next;
		mes "[Du]";
		mes "What does this place have to do with Juperos?";
		next;
		mes "[Du]";
		mes "Up there, I saw another fountain looking similar to the last one.";
		mes "Do you want to go check it out?";
		cutin "bu_du2.bmp",2;
		ep15_1_elb = 11;
		completequest 11371;
		setquest 11372;
		close3;
	}
	if (ep15_1_elb == 11) {
		mes "[Du]";
		mes "Up there, I saw another fountain looking similar to the last one.";
		mes "Do you want to go check it out?";
		cutin "bu_du2.bmp",2;
		close3;
	}
	mes "[Du]";
	mes "What does this place have to do with Juperos?";
	close;
}

verus03,44,65,0	script	Fountain#ep15_1elb03	HIDDEN_NPC,{
	if (ep15_1_elb == 11) {
		mes "[Alph]";
		mes "Hm...";
		mes "This place is disturbingly clean.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Tamarin]";
		mes "All the buildings are well preserved. What do you think happened to the owners?";
		cutin "ep143_tasta.bmp",2;
		next;
		mes "[Alph]";
		mes "If they're dead, they're not buried or left to rot in here. If they left... well, I don't think they did.";
		cutin "bu_alp3.bmp",2;
		next;
		mes "[Maggi]";
		mes "I tried to read with magic,";
		mes "but to no avail.";
		cutin "bu_maggi1.bmp",2;
		next;
		mes "[Du]";
		mes "So the trail of clues went cold.";
		cutin "bu_du5.bmp",2;
		next;
		mes "[Mark]";
		mes "......";
		cutin "bu_mark3.bmp",0;
		next;
		mes "[Du]";
		mes "Ouch! Why did you hit me?";
		cutin "bu_du4.bmp",2;
		next;
		mes "[Mark]";
		mes "I'll take the path north. Meet me up there later.";
		cutin "bu_mark2.bmp",0;
		next;
		mes "[Mark]";
		mes "Keep an eye on Du; he wanders off easily.";
		cutin "bu_mark4.bmp",0;
		ep15_1_elb = 12;
		completequest 11372;
		setquest 11373;
		close3;
	}
	if (ep15_1_elb == 12) {
		mes "[Mark]";
		mes "I'll take the path north. Meet me up there later.";
		cutin "bu_mark2.bmp",0;
		next;
		mes "[Mark]";
		mes "Keep an eye on Du; he wanders off easily.";
		cutin "bu_mark4.bmp",0;
		close3;
	}
	mes "- Ordinary-looking Fountain -";
	mes "- There's nothing in it. -";
	close;
}

verus03,88,237,3	script	Mark#ep15_1elb03	4_M_BLUEMAN,{
	if (ep15_1_elb == 12) {
		mes "[Mark]";
		mes "Do you see the giant machine ahead of us?";
		mes "Unlike the first place, this place is filled with giant machines.";
		cutin "bu_mark1.bmp",0;
		next;
		mes "[Mark]";
		mes "Buildings are crumbled. The ground is caved in here and there.";
		next;
		mes "[Mark]";
		mes "I've found a path over there, though it's blocked.";
		next;
		mes "[Mark]";
		mes "That doesn't bode well.";
		cutin "bu_mark4.bmp",0;
		next;
		mes "[Mark]";
		mes "Oh, Tamarin!";
		mes "Don't go over there!";
		cutin "bu_mark1.bmp",0;
		emotion ET_HUK;
		emotion ET_HUK, getnpcid(0, "Tamarin#ep15_1elb03");
		ep15_1_elb = 13;
		completequest 11373;
		setquest 11374;
		close3;
	}
	if (ep15_1_elb == 13) {
		mes "[Mark]";
		mes "Oh, Tamarin!";
		mes "Don't go over there!";
		cutin "bu_mark1.bmp",0;
		emotion ET_HUK;
		emotion ET_HUK, getnpcid(0, "Tamarin#ep15_1elb03");
		close3;
	}
	mes "[Mark]";
	mes "Do you see the giant machine ahead of us?";
	mes "Unlike the first place, this place is filled with giant machines.";
	cutin "bu_mark1.bmp",0;
	close3;
}

verus03,51,256,3	script	Tamarin#ep15_1elb03	4_M_TAMARIN,{
	mes "[Tamarin]";
	mes "Look over there.";
	mes "That part of the place is completely destroyed.";
	cutin "ep143_tahuk.bmp",2;
	if (ep15_1_elb == 13 || ep15_1_elb == 14) {
		next;
		mes "[Tamarin]";
		mes "Maggi, how's it like over there?";
		cutin "ep143_tasta.bmp",2;
		emotion ET_HUK, getnpcid(0, "Maggi#ep15_1elb03");
		if (ep15_1_elb == 13) {
			ep15_1_elb = 14;
			completequest 11374;
			setquest 11375;
		}
	}
	close3;
}

verus03,35,254,3	script	Maggi#ep15_1elb03	4_F_PINKWOMAN,{
	if (ep15_1_elb == 14) {
		mes "[Maggi]";
		mes "Oh.";
		mes "The path over here is also blocked.";
		cutin "bu_maggi1.bmp",2;
		next;
		mes "[Maggi]";
		mes "I'm sensing some kind of current on the other side,";
		mes "but I can't tell exactly what.";
		cutin "bu_maggi3.bmp",2;
		next;
		mes "[Maggi]";
		mes "It doesn't feel like a living thing,";
		mes "but it's strong just the same.";
		cutin "bu_maggi1.bmp",2;
		next;
		mes "[Du]";
		mes "Um.";
		mes "I really don't want to go over there.";
		cutin "bu_du3.bmp",2;
		next;
		mes "[Tamarin]";
		mes "...!";
		mes "That's a first. You earned the nickname Red-haired Boar because you never stop running.";
		cutin "ep143_tahuk.bmp",2;
		next;
		mes "[Du]";
		mes "No one calls me that!";
		cutin "bu_du5.bmp",2;
		next;
		mes "[Du]";
		mes "I've got cooler nicknames! Call me those!";
		next;
		mes "[Alph]";
		mes "Du.";
		mes "Don't insult boars.";
		mes "All their parts, from head to toe, are useful.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Alph]";
		mes "Delicious, too.";
		cutin "bu_alp4.bmp",2;
		next;
		mes "[Du]";
		mes "That's not the point!";
		cutin "bu_du5.bmp",2;
		next;
		mes "[Mark]";
		mes "Du's instinct has never betrayed us. We should steer clear of that path.";
		mes "Right, Boar?";
		cutin "bu_mark2.bmp",0;
		next;
		mes "[Du]";
		mes "Grr!";
		mes "I said";
		mes "don't call me that!";
		cutin "bu_du5.bmp",2;
		next;
		mes "[Alph]";
		mes "The path is blocked, and if the Phantasmagorika Excavation Team hasn't cleared it, then there must be a reason. Let's steer clear of it until we find out more about it.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Du]";
		mes "Don't you make fun of me!";
		cutin "bu_du5.bmp",2;
		next;
		mes "[Mark]";
		mes "I agree.";
		mes "Let's check the other places first.";
		ep15_1_elb = 15;
		completequest 11375;
		getexp 1000000,0;
		cutin "bu_mark2.bmp",0;
		close3;
	}
	if (ep15_1_elb == 15) {
		mes "[Alph]";
		mes "The path is blocked, and if the Phantasmagorika Excavation Team hasn't cleared it, then there must be a reason. Let's steer clear of it until we find out more about it.";
		cutin "bu_alp1.bmp",2;
		next;
		mes "[Mark]";
		mes "I agree.";
		mes "Let's check the other places first.";
		cutin "bu_mark2.bmp",0;
		close3;
	}
	mes "[Maggi]";
	mes "Danger is in the air. I can feel it in my bones.";
	cutin "bu_maggi3.bmp",2;
	close3;
}

verus04,144,239,3	shop	Tool Merchant#verus	4_M_DEWMAN,611:-1,504:-1,656:-1,601:-1,602:-1,610:-1

// ep15_1_moc_nk - Reward Coordinator
morocc,54,190,5	script	Reward Coordinator	4_M_SAGE_C,{
	for ( .@i = 5252; .@i <= 5264; .@i += 2 ) {
		if (isbegin_quest(.@i) == 1)
			erasequest .@i;
	}
	if (isbegin_quest(5269) == 1)
		erasequest 5269;
	if (isbegin_quest(5275) == 1)
		erasequest 5275;

	if (countitem(6688) > 0)
		delitem 6688, countitem(6688);	// Wood_
	if (countitem(6688) > 0)
		delitem 6687, countitem(6687);	// LongRopes
	if (countitem(6686) > 0)
		delitem 6686, countitem(6686);	// Brick
	mes "[Reward Coordinator]";
	mes "So, um... I'm...";
	mes "I think I'm sent here";
	mes "to... to... Let me think...";
	mes "Oh yes, to support the Morroc restoration work.";
	next;
	mes "[Reward Coordinator]";
	mes "The restoration work is finished,";
	mes "but I remain";
	mes "to finish rewarding the volunteers.";
	next;
	mes "[Reward Coordinator]";
	mes "So, how may I help you today?";
	next;
	switch( select( "Claim rewards.", "What can I do with the Contribution Certificate Vending Machine?", "End conversation." ) ) {
	case 1:
		for ( .@i = 5251; .@i <= 5263; .@i += 2 ) {
			if (isbegin_quest(.@i) == 1)
				.@moc_on++;
		}
		if (isbegin_quest(5265) == 1 || isbegin_quest(5266) == 1 || isbegin_quest(5267) == 1 || isbegin_quest(5268) == 1)
			.@moc_on++;
		if (isbegin_quest(5270) == 1 || isbegin_quest(5271) == 1 || isbegin_quest(5272) == 1 || isbegin_quest(5273) == 1 || isbegin_quest(5274) == 1)
			.@moc_on++;
		if (.@moc_on > 0) {
			mes "[Reward Coordinator]";
			mes "In recognition of your credit,";
			mes "we will grant you a certificate.";
			mes "The certificates can be used by the vending machine next to it.";
			getitem 6685, .@moc_on;	// MoroccMerit
			for ( .@i = 5251; .@i < 5275; .@i++ ) {
				if (isbegin_quest(.@i) == 1)
					completequest .@i;
			}
			close;
		}
		mes "[Reward Coordinator]";
		mes "You haven't finished your quest,";
		mes "or never accepted one. Please check your quest history.";
		close;
	case 2:
		mes "[Reward Coordinator]";
		mes "Do you see the vending machine next to me?";
		mes "You can use your Certificates with the machine";
		mes "to get EXP and a variety of items in exchange.";
		next;
		mes "[Reward Coordinator]";
		mes "For more details, you should click the vending machine.";
		close;
	case 3:
		mes "[Reward Coordinator]";
		mes "Um, so...";
		mes "Why did you";
		mes "talk to me, if I may ask?";
		next;
		mes "[Reward Coordinator]";
		mes "Aww, I hate this sandy wind.";
		mes "It leaves my nice clothes";
		mes "sandy and nasty-feeling.";
		close;
	}
}

morocc,43,191,5	script	Announcement#moc_re	4_BOARD3,{
	if (ep14_3_mocrank > $@2012_ep14_moc_most) {
		$@2012_ep14_moc_most = ep14_3_mocrank;
		$@2012_ep14_moc_mostname$ = strcharinfo(0);
	}
	mes "[Morroc Restoration Project Director Paek]";
	mes "Currently the greatest contributor is";
	mes "Great Adventurer " + $@2012_ep14_moc_mostname$ + ",";
	mes "who has made a total of " + $@2012_ep14_moc_most + " contributions so far.";
	mes "I'd like to give thanks to this adventurer on behalf of the entire city.";
	close;
}

morocc,52,197,6	script	Contribution Certificate Vending Machine#ep14_3	2_VENDING_MACHINE1,{
	if (checkweight(1301,1) == 0) {
		mes "- You are carrying too many items to proceed with the dialog -";
		close;
	}
	if (BaseLevel < 80) {
		mes "[Vending Machine Administrator]";
		mes "Hello~ Don't touch the vending machine casually.";
		close;
	}
	mes "[Contribution Certificate Vending Machine]";
	mes "- Select an item you want. -";
	mes "Current Contribution Certificates: " + countitem(6685) + "";
	next;
	switch( select(
		"Do not exchange.",
		"[1] EXP -(1)",
		"[2] Job Agency Recommendation -(1)",
		"[3] 20 Condensed White Potions -(10)",
		"[4] 10 Red Gemstones -(20)",
		"[5] 10 Yellow Gemstones -(20)",
		"[6] 1 Sadagui -(20)",
		"[7] 1 Yggdrasil Dust -(20)",
		"[8] 1 Snow Flip -(20)",
		"[9] 1 Peony Mami -(20)",
		"[10] 1 Blue Potion -(30)",
		"[11] 1 Great Nature -(50)",
		"[12] 1 Rough Wind -(50)",
		"[13] 1 Mystic Frozen -(50)",
		"[14] 1 Flame Heart -(50)",
		"[15] 1 Yggdrasil Seed -(100)" ) ) {
	case 1:
		close;
	case 2:
		mes "[Contribution Certificate Vending Machine]";
		mes "Do you want EXP?";
		next;
		while(1) {
			if (select("Yes.", "No.") == 2) {
				mes "[Contribution Certificate Vending Machine]";
				mes "Thank you for using the vending machine.";
				close;
			}
			if (countitem(6685) < 1) {
				mes "[Contribution Certificate Vending Machine]";
				mes "Not enough Certificates.";
				next;
				mes "[Contribution Certificate Vending Machine]";
				mes "Thank you for using the vending machine.";
				close;
			}
			delitem 6685,1;	// MoroccMerit
			if (BaseLevel > 79 && BaseLevel < 91)
				getexp 10000,0;
			else if (BaseLevel > 90 && BaseLevel < 101)
				getexp 15000,0;
			else if (BaseLevel > 100 && BaseLevel < 111)
				getexp 20000,0;
			else if (BaseLevel > 110 && BaseLevel < 121)
				getexp 25000,0;
			else if (BaseLevel > 120 && BaseLevel < 131)
				getexp 30000,0;
			else if (BaseLevel > 130 && BaseLevel < 141)
				getexp 35000,0;
			else if (BaseLevel > 140 && BaseLevel < 151)
				getexp 40000,0;
			else
				getexp 45000,0;
			mes "[Contribution Certificate Vending Machine]";
			mes "Do you want to continue to redeem?";
			next;
		}
		end;
	case 3:
		mes "[Contribution Certificate Vending Machine]";
		mes "Do you want Job Agency Recommendation?";
		next;
		while(1) {
			if (select("Yes.", "No.") == 2) {
				mes "[Contribution Certificate Vending Machine]";
				mes "Thank you for using the vending machine.";
				close;
			}
			if (countitem(6685) < 1) {
				mes "[Contribution Certificate Vending Machine]";
				mes "Not enough Certificates.";
				next;
				mes "[Contribution Certificate Vending Machine]";
				mes "Thank you for using the vending machine.";
				close;
			}
			delitem 6685,1;	// MoroccMerit
			if (BaseLevel > 79 && BaseLevel < 91)
				getexp 0,10000;
			else if (BaseLevel > 90 && BaseLevel < 101)
				getexp 0,12000;
			else if (BaseLevel > 100 && BaseLevel < 111)
				getexp 0,5000;
			else if (BaseLevel > 110 && BaseLevel < 121)
				getexp 0,7000;
			else if (BaseLevel > 120 && BaseLevel < 131)
				getexp 0,9000;
			else if (BaseLevel > 130 && BaseLevel < 141)
				getexp 0,11000;
			else if (BaseLevel > 140 && BaseLevel < 151)
				getexp 0,13000;
			else
				getexp 0,13000;
			mes "[Contribution Certificate Vending Machine]";
			mes "Do you want to continue to redeem?";
			next;
		}
		end;
	case 4:  callsub( S_Exchange, 10,   547, 20 );	// White_Slim_Potion
	case 5:  callsub( S_Exchange, 20,   716, 10 );	// Red_Gemstone
	case 6:  callsub( S_Exchange, 20,   715, 10 );	// Yellow_Gemstone
	case 7:  callsub( S_Exchange, 20, 12814,  1 );	// Slapping_Herb
	case 8:  callsub( S_Exchange, 20, 12815,  1 );	// Yggdrasil_Dust
	case 9:  callsub( S_Exchange, 20, 12812,  1 );	// Snow_Flip
	case 10: callsub( S_Exchange, 20, 12813,  1 );	// Peony_Mommy
	case 11: callsub( S_Exchange, 30,   505,  1 );	// Blue_Potion
	case 12: callsub( S_Exchange, 50,   997,  1 );	// Great_Nature
	case 13: callsub( S_Exchange, 50,   996,  1 );	// Rough_Wind
	case 14: callsub( S_Exchange, 50,   995,  1 );	// Mistic_Frozen
	case 15: callsub( S_Exchange, 50,   994,  1 );	// Flame_Heart
	case 16: callsub( S_Exchange, 100,  608,  1 );	// Seed_Of_Yggdrasil
	default:
		mes "[Contribution Certificate Vending Machine]";
		mes "Malfunction.";
		close;
	}
	end;

S_Exchange:
	.@item_id = getarg(1);
	mes "[Contribution Certificate Vending Machine]";
	mes "Do you want " + getitemname(.@item_id) + "?";
	next;
	while(1) {
		if (select("Yes.", "No.") == 2) {
			mes "[Contribution Certificate Vending Machine]";
			mes "Thank you for using the vending machine.";
			close;
		}
		if (countitem(6685) < getarg(0)) {
			mes "[Contribution Certificate Vending Machine]";
			mes "Not enough Certificates.";
			next;
			mes "[Contribution Certificate Vending Machine]";
			mes "Thank you for using the vending machine.";
			close;
		}
		delitem 6685, getarg(0);	// MoroccMerit
		getitem .@item_id, getarg(2);
		mes "[Contribution Certificate Vending Machine]";
		mes "Do you want to continue to redeem?";
		next;
	}
	end;
}


// Doom Prayers event on verus04
verus04,2,2,0	script	Sneak attack timer#EP15_1D	HIDDEN_WARP_NPC,{
	end;
OnTimer60000:
	if (rand(1,2) == 1)
		initnpctimer "Perishing blessing society#EP15_1D";
	end;
OnTimer3600000:
OnInit:
	initnpctimer;
	end;
}

verus04,3,3,4	script	Perishing blessing society#EP15_1D	CLEAR_NPC,{
	if (callfunc("F_GM_NPC",1854,0,0,9999) < 1)
		end;
	mes "[Small Helper]";
	mes "Episode 15.1";
	mes "I am a small helper for the mission of the Phantasmagorika security team. Do you need help?";
	next;
	while(1) {
		switch( select( "View role status", "Task setting", "Active operation", "End NPC" ) ) {
		case 1:
			mes "5304(N)" + isbegin_quest(5304) + " / 5312(N)" + isbegin_quest(5312) + "";
			mes "5305(N)" + isbegin_quest(5305) + " / 5313(N)" + isbegin_quest(5313) + "";
			mes "5306(N)" + isbegin_quest(5306) + " / 5314(H)" + checkquest(5314,HUNTING) + "";
			mes "5307(N)" + isbegin_quest(5307) + " / 5315(N)" + isbegin_quest(5315) + "";
			mes "5308(N)" + isbegin_quest(5308) + " / 5316(N)" + isbegin_quest(5316) + "";
			mes "5309(N)" + isbegin_quest(5309) + " / 5317(N)" + isbegin_quest(5317) + "";
			mes "5310(N)" + isbegin_quest(5310) + " / 5318(T)" + checkquest(5318,PLAYTIME) + "";
			mes "5311(N)" + isbegin_quest(5311) + " / (N)Normal (H)unting (T)ime";
			next;
			continue;
		case 2:
			mes "[Small Helper]";
			mes "Task setting.";
			mes "Level limit 140.";
			mes "Those who fail to reach 140 may not perform tasks.";
			next;
			switch( select( "Reset Cooldown", "Set to before reward", "Item description", "Task initialization" ) ) {
			case 1:
				mes "[Small Helper]";
				mes "Only remove 23 hours of cooldown.";
				next;
				select("Remove");
				erasequest 5318;
				mes "[Small Helper]";
				mes "Removed.";
				next;
				continue;
			case 2:
				mes "[Small Helper]";
				mes "Please choose whether to accept or not before setting it as a reward..";
				next;
				if (isbegin_quest(5304) == 0) {
					setquest 5304;
					completequest 5304;
				}
				setquest 5309;
				setarray .@name$[0], "Salgran", "Gerev", "Seiden", "Piffs";
				for ( .@i = 0; .@i < 4; ++.@i ) {
					if (select( "Police Officer " + .@name$[.@i] + " Please ask O", "Police Officer " + .@name$[.@i] + " Please ask X" ) == 1) {
						.@id = 5314 + .@i;
						if (isbegin_quest(.@id) == 0)
							setquest .@id;
						if (isbegin_quest(.@id) == 1)
							completequest .@id;
					}
					.@id = 5305 + .@i;
					if (isbegin_quest(.@id) == 0) {
						setquest .@id;
						completequest .@id;
					}
					setquest (5310 + .@i);
				}
				mes "[Small Helper]";
				mes "Done.";
				next;
				continue;
			case 3:
				mes "[Small Helper]";
				mes "This task will confirm both the task and the Guest. Please use the function after receiving the task..";
				next;
				switch( select( "Remove the trap", "Gather Stones", "Gather the herb.", "End NPC" ) ) {
				case 1:
					mes "[Small Helper]";
					mes "Set to the state where the trap has been removed.";
					next;
					select("set up");
					ep15_1_mang = 10;
					continue;
				case 2:
					mes "[Small Helper]";
					mes "Set to the state of the stone that has been completed.";
					next;
					select("set up");
					ep15_1_mang = 10;
					getitem 7049,10;// Stone
					continue;
				case 3:
					mes "[Small Helper]";
					mes "Set to the state of the herb gathering that has been completed.";
					next;
					select("set up");
					ep15_1_mang = 10;
					getitem 6754,10;// Collected_Herb
					continue;
				case 4:
					mes "[Small Helper]";
					mes "Bye bye~";
					close;
				}
				end;
			case 4:
				mes "[Small Helper]";
				mes "The Doom Sayers vs. Phantasmagorika security team mission initialization.";
				next;
				select("Task initialization");
				ep15_1_mang = 0;
				delitem 7049, countitem(7049);// Stone
				getitem 6754, countitem(6754);// Collected_Herb
				for ( .@i = 5304; .@i <= 5318; ++.@i ) {
					if (isbegin_quest(.@i) > 0)
						erasequest .@i;
				}
				mes "[Small Helper]";
				mes "Initialized.";
				next;
				continue;
			}
			end;
		case 3:
			mes "[Small Helper]";
			mes "Adjust the section of sudden activity, no need to confirm the implementation, so please use it after evaluation.";
			next;
			switch( select( "Activity begins", "Activity ends", "Control timer starts", "Control timer ends" ) ) {
			case 1:
				mes "[Small Helper]";
				mes "Sudden activity Start, the current map number has " + getmapusers("verus04") + " people, and the released monsters have 15 + " + getmapusers("verus04") + " only.";
				next;
				select("Start");
				initnpctimer "Perishing blessing society#EP15_1D";
				mes "[Small Helper]";
				mes "Sudden task Start.";
				next;
				continue;
			case 2:
				mes "[Small Helper]";
				mes "The sudden task End, once selected, will force End even if it is actually in progress.";
				next;
				select("End");
				donpcevent "Perishing blessing society#EP15_1D::OnStop";
				mes "[Small Helper]";
				mes "Sudden task End.";
				next;
				continue;
			case 3:
				mes "[Small Helper]";
				mes "Set the timer that controls the sudden activity to ON. It is not confirmed, please pay attention when operating.";
				next;
				select("Start");
				initnpctimer "Sneak attack timer#EP15_1D";
				mes "[Small Helper]";
				mes "The burst activity timer has started.";
				next;
				continue;
			case 4:
				mes "[Small Helper]";
				mes "Set the timer that controls the sudden activity to OFF. It is not confirmed, please pay attention when operating.";
				next;
				select("End");
				stopnpctimer "Sneak attack timer#EP15_1D";
				mes "[Small Helper]";
				mes "The burst activity timer has been End.";
				next;
				continue;
			}
			end;
		case 4:
			mes "[Small Helper]";
			mes "Bye bye~";
			close;
		}
	}
	end;

OnTimer1000:
	.@count = 10 + getmapusers("verus04");
	.@label$ = "Perishing blessing society#EP15_1D::OnMyMobDead";
    monster "verus04",0,0,"Doom Prayers Believer",3158,.@count, .@label$;	// RUIN_BELIEVER2
    monster "verus04",0,0,"Ruin Grace Believer",3157,5, .@label$;			// RUIN_BELIEVER1
	copyarray .mob_id[0], $@mobid[0], 5;

	mapannounce "verus04", "Police Officer Piffs: The Doom Prayers have stricken!", bc_map,0xFFFF00;
	end;
OnTimer3000:
	mapannounce "verus04", "Police Chief Kesler: Attention all police officers, stop the Doom Prayers before they destroy the excavation site!", bc_map,0xFFFF00;
	end;
OnTimer30000:
	mapannounce "verus04", "Doom Prayers Executive: Destroy and bring the end of the world! Destroy and be saved!", bc_map,0xFFFF00;
	end;
OnTimer60000:
	mapannounce "verus04", "Police Officer Piffs: Argh, Doom Prayers! Where do they keep coming from?!", bc_map,0xFFFF00;
	callsub( S_String,
		"Doom Prayers Executive : *Chuckle*...Near the time of demise.",
		"Doom Prayers Executive : Let it be destroyed!!",
		"Doom Prayers Executive : All throwing stones and throwing it!!",
		"Doom Prayers Executive : Only when we can die can we get salvation.",
		"Doom Prayers Executive : There are so many unnecessary people! Attack~~!!"
	);
OnTimer120000:
	mapannounce "verus04", "Police Chief Kesler: Everyone, do not retreat! Don't let them destroy the excavation site!", bc_map,0xFFFF00;
	callsub( S_String,
		"Doom Prayers Executive : There are so many unnecessary people! Attack~~!!",
		"Doom Prayers Executive : *Chuckle*...Near the time of demise.",
		"Doom Prayers Executive : Let it be destroyed!!",
		"Doom Prayers Executive : All throwing stones and throwing it!!",
		"Doom Prayers Executive : Only when we can die can we get salvation."
	);
OnTimer180000:
	mapannounce "verus04", "Police Officer Piffs: Those Doom Prayers underestimate us.", bc_map,0xFFFF00;
	callsub( S_String,
		"Doom Prayers Executive : Only when we can die can we get salvation.",
		"Doom Prayers Executive : There are so many unnecessary people! Attack~~!!",
		"Doom Prayers Executive : *Chuckle*...Near the time of demise.",
		"Doom Prayers Executive : Let it be destroyed!!",
		"Doom Prayers Executive : All throwing stones and throwing it!!"
	);
OnTimer240000:
	mapannounce "verus04", "Police Chief Kesler: The guys who died in the attack thought we were bullied!", bc_map,0xFFFF00;
	callsub( S_String,
		"Doom Prayers Executive : All throwing stones and throwing it!!",
		"Doom Prayers Executive : Only when we can die can we get salvation.",
		"Doom Prayers Executive : There are so many unnecessary people! Attack~~!!",
		"Doom Prayers Executive : *Chuckle*...Near the time of demise.",
		"Doom Prayers Executive : Let it be destroyed!!"
	);
OnTimer300000:
	// fallthrough
OnStop:
	stopnpctimer;
	killmonster "verus04", "Perishing blessing society#EP15_1D::OnMyMobDead";
	mapannounce "verus04", "Police Chief Kesler: Adventurers, the Doom Prayers have been driven out of Phantasmagorika. They're no longer a threat to your safety.", bc_map,0xFFFF00;
	end;
OnMyMobDead:
	if (mobcount( "verus04", "Perishing blessing society#EP15_1D::OnMyMobDead" ) < 1) {
		mapannounce "verus04", "Doom Prayers Executive: Damn! This time can only be a temporarily retreat!!!", bc_map,0xFFFF00;
		donpcevent "Perishing blessing society#EP15_1D::OnStop";
	}
	end;
S_String:
	for ( .@i = 0; .@i < 5; ++.@i ) {
		if (unitexists(.mob_id[.@i]) == true)
			unittalk .mob_id[.@i], getarg(.@i);
	}
	end;
}
