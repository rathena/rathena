//===== rAthena Script =======================================
//= Port Malaya Quest NPCs
//===== By: ==================================================
//= Euphy
//===== Current Version: =====================================
//= 1.3
//===== Compatible With: =====================================
//= rAthena Project
//===== Description: =========================================
//= [Official Conversion]
//= Quest NPCs related to Port Malaya:
//== Cautious Village, Port Malaya Daily Quests,
//== Secret in the Woods, Bakonawa Extermination
//== Nurse in Port Malaya, Pintados Festival
//= Merchants:
//== Traders, Upgrade Boss Equipment
//===== Additional Comments: =================================
//= 0.1 Traders only. Adapted from Masao's conversion. [Euphy]
//= 0.2 Added Tribe Blacksmith [DeadlySilence]
//= 0.3 Added "Secret in the Woods" quest [DeadlySilence]
//= 0.4 Added "Cautious Village" and subsequent quests [DeadlySilence]
//= 0.5 Added "Bakonawa Extermination" quest. [Euphy]
//= 1.0 Added "Nurse in Port Malaya" and "Pintados Festival" quests. [Euphy]
//= 1.1 Added GM management function and NPC. [Euphy]
//= 1.2 Added VIP features. [Euphy]
//= 1.3 Fixed Pintados Festival never ends. [Capuche]
//============================================================

// Cautious Village & Daily Quests :: hi_malaya
//============================================================
malaya,266,76,3	script	Rodel the Guard#malaya	570,4,4,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if (malaya_hi == 0) {
		mes "[Rodel the Guard]";
		mes "Traveling at such confusing times?";
		mes "Villagers have been feeling more threatened by evil spirits recently.";
		mes "Villagers are scared and trembling with fear.";
		next;
		mes "[Rodel the Guard]";
		mes "So... the citizens of Port Malaya will feel uncomfortable around you even though there are no hard feelings toward you.";
		mes "Inns and stops may be closed to outsiders.";
		next;
		mes "[Rodel the Guard]";
		mes "There is no definite solution to this, but you might want to meet Phong in Mumbaki first.";
		mes "If the village leader gives his confirmation, other people might be less worried.";
		next;
		mes "[Rodel the Guard]";
		mes "I will mark on the map the location of Phong in Mumbaki.";
		mes "I welcome your visit though the times are harsh.";
		viewpoint 1, 185, 358, 0, 0x0A82FF;
		set malaya_hi, 1;
		setquest 7350;
		close;
	} else if (malaya_hi == 1) {
		mes "[Rodel the Guard]";
		mes "Meet with Phong in Mumbaki first.";
		mes "If you are proven to have a pure soul, other villagers will not avoid you.";
		mes "If you are not sure of the location, I will mark it on your map.";
		viewpoint 1, 185, 358, 0, 0x0A82FF;
		close;
	} else if (malaya_hi >= 20) {
		if (BaseLevel < 100) {
			mes "[Rodel the Guard]";
			mes "How is the life here?";
			mes "People aren't so bad are they?";
			mes "If you were a little more skillful, there might be a job for you. Right now, you are little bit below the standard.";
			next;
			mes "[Rodel the Guard]";
			mes "If you become stronger,";
			mes "I was thinking of giving you the extermination mission that's being carried out in the city. What a shame. ";
			close;
		}
		.@playtime = checkquest(7405, PLAYTIME);
		if (.@playtime == 0) {
			mes "[Rodel the Guard]";
			mes "Whew, thanks to you, I have one less thing to worry about.";
			mes "I will lose less of my things.";
			mes "Job well done.";
			next;
			mes "[Rodel the Guard]";
			mes "You can come back if you want.";
			mes "You understand what I mean right?";
			close;
		} else if (.@playtime == 2) {
			erasequest 7405;
			mes "[Rodel the Guard]";
			mes "Oh, about Jejeling that you hunted down before.";
			mes "People traveling in and out of Baryo are happy about it.";
			mes "If it's not much too much trouble, I'd like to ask for your help one more time.";
			next;
			mes "[Rodel the Guard]";
			mes "You don't have to do it now, just whenever you are comfortable.";
			mes "Come and find me when you decide.";
			close;
		} else {
			.@hunting = checkquest(7404, HUNTING);
			if (.@hunting == -1) {
				mes "[Rodel the Guard]";
				switch(rand(1, 6)) {
				case 1:
					mes "Recently, there have been a few that gained recognition for their bravery among the villagers." + $malayaNames$[0] + ", " + $malayaNames$[3] + ", " + $malayaNames$[5] + "... Isn't that amazing?";
					break;
				case 2:
					mes "Yesterday, I saw someone who was carried off to the hospital after rolling down the stairs at the park. That person went by the name of " + $malayaNames$[1] + ". I wonder if that person is alright.";
					break;
				case 3:
					mes "The one who contributed the most in the Jejeling hunt was " + $malayaNames$[1] + ".";
					break;
				case 4:
					mes "If you are bored, how about you stand guard for me? This is a heck of a job. You have to keep standing like a statue even till the sun rises up above your head.";
					break;
				case 5:
					mes "Have you been alone with a woman inside a Jeepney? Wow that was awkward...  I'm never going to get married at this rate...";
					break;
				case 6:
					mes "Recently among visitors, one became a close friend to me. Do you know " + $malayaNames$[1] + "? Oh, of course you are a good friend as well.";
					break;
				}
				mes "Oh yes, there is a job for you if you are not too busy. Are you interested?";
				next;
				mes "[Rodel the Guard]";
				mes "We are going to organize an extensive Jejeling hunt this time.";
				mes "Peddlers going in and out of Baryo are always complaining about Jejelings.";
				next;
				if (select("Join the Jejeling hunt.:Refuse.") == 2) {
					mes "[Rodel the Guard]";
					mes "Is that so? I'm sorry to hear that.";
					mes "Things would be so much simpler if we had a person like you around.";
					close;
				}
				mes "[Rodel the Guard]";
				mes "You just have to hunt 20 jejelings each.";
				mes "It would be a simple task for you.";
				setquest 7404;
				close;
			} else if (.@hunting == 0) {
				mes "[Rodel the Guard]";
				mes "You have to get rid of 20 Jejelings.";
				mes "20 should be enough to give those Jejelings a good scare.";
				close;
			} else if (.@hunting == 1) {
				mes "[Rodel the Guard]";
				mes "Oh, the hunt is over, but you haven't killed all the Jejelings.";
				mes "Come again if you want another try.";
				erasequest 7404;
				close;
			} else {
				mes "[Rodel the Guard]";
				mes "Oh, I have confirmed you got rid of 20 Jejelings.";
				mes "Here, this is a reward for people who participated in the Jejeling hunt.";
				next;
				mes "[Rodel the Guard]";
				mes "I think there will be more Jejeling hunts in the future. Please join us again next time.";
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				erasequest 7404;
				setquest 7405;
				if (rand(2))
					$malayaNames$[1] = strcharinfo(0);
//				SavePPL Jejellopy
				close;
			}
		}
	} else {
		mes "[Rodel the Guard]";
		mes "Please understand even if people look at you warily.";
		mes "The ghost have been haunting the people around here.";
		close;
	}
OnTouch:
	emotion ET_SURPRISE;
	end;

OnInit:
	// if there are no names set, set some default values
	if (!getarraysize($malayaNames$)) {
		$malayaNames$[0] = "unknown";
		$malayaNames$[1] = "unknown";
		$malayaNames$[2] = "unknown";
		$malayaNames$[3] = "unknown";
		$malayaNames$[4] = "unknown";
		$malayaNames$[5] = "unknown";
	}
	end;
}

malaya,185,358,3	script	Leader Phong in Mumbaki	580,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if (malaya_hi < 2) {
		mes "[Phong in Mumbaki]";
		mes "Looks like this soul came across a big body of water.";
		mes "Young friend.";
		mes "The reason you found me... yes... I see.";
		next;
		mes "[Phong in Mumbaki]";
		mes "You don't have to say it in words.";
		mes "The people are overly cautious of you.";
		mes "Rodel was probably concerned about it, so he sent you here.";
		next;
		if (malaya_hi == 0) {
			mes "[Phong in Mumbaki]";
			mes "No?";
			mes "Well then maybe there was some kind of a Spiritual bond between us.";
			next;
		}
		mes "[Phong in Mumbaki]";
		mes "Nonetheless, good to meet you, young friend.";
		mes "Don't blame the villagers too much for their attitudes toward you.";
		next;
		mes "[Phong in Mumbaki]";
		mes "We are always surrounded by spirits.";
		mes "We live with them, praying for peace.";
		mes "But recently, there has been a problem.";
		next;
		mes "[Phong in Mumbaki]";
		mes "For some unknown reason,";
		mes "Spirits have been running amok, and evil sprits have been haunting the villagers.";
		next;
		mes "[Phong in Mumbaki]";
		mes "This is the shadow that is cast on this beautiful town.";
		mes "They are cautious because they don't know when the dark shadow will fall on them.";
		mes "They visit without warning.";
		next;
		mes "^4d4dffPhong in Mumbaki turns his head and dark shadows appear.";
		mes "People are in panic, everyone trembling with fear.^000000";
		cutin "malaya_ghost01", 4;
		next;
		select("Step toward the shadow.:Draw weapon.");
		mes "[Phong in Mumbaki]";
		mes "They have followed the trace of the outsider. ";
		mes "Don't get to close too them.";
		mes "Your soul can get absorbed.";
		next;
		mes "[Phong in Mumbaki]";
		mes "Hmm? They are responding.";
		mes "I don't understand? They look scared as if facing a powerful soul.";
		mes "This feeling... it can't be...";
		cutin "malaya_ghost02", 4;
		next;
		mes "^4d4dffLike words of Phong in Mumbaki, spirits are responding to something, hesitating.";
		mes "Observing their reaction, you get closer. The spirits are flustered.^000000";
		next;
		cutin "", 255;
		mes "[Phong in Mumbaki]";
		mes "Amazing. Holder of a soul so strong and pure...!";
		mes "The dark spirits have disappeared because of your presence.";
		next;
		mes "[Phong in Mumbaki]";
		mes "I think other villagers would treat you differently now...";
		mes "Haven't we all witnessed this miracle?";
		next;
		mes "[Phong in Mumbaki]";
		mes "Young friend. Your presence is welcomed anywhere.";
		mes "The light from your pure soul will protect you from the darkness.";
		set malaya_hi, 10;
		if (checkquest(7350) > -1)
			erasequest 7350;
		close;
	} else if (malaya_hi == 10) {
		mes "[Phong in Mumbaki]";
		mes "Everyone in the village witnessed how strong and pure your soul is.";
		mes "Do not be afraid of the dark.";
		close;
	} else if (malaya_hi == 11) {
		mes "[Phong in Mumbaki]";
		mes "Is there something wrong?";
		mes "You look disturbed.";
		mes "Your clothes also look messed up. Was there some kind of trouble?";
		next;
		switch (select("Explain what happened.:There is nothing to talk about.")) {
		case 1:
			mes "[Phong in Mumbaki]";
			mes "Is that so?";
			mes "Ha ha... that is a big problem. ";
			mes "You must've been concerned.";
			next;
			mes "[Phong in Mumbaki]";
			mes "You know, we were preparing a spiritual protection for ";
			mes "villagers who are afraid of evil spirits...";
			mes "but preparation is not going well.";
			next;
			mes "[Phong in Mumbaki]";
			mes "As a temporary solution, how about giving them what they want?";
			mes "Just pick among the items you have that are unimportant and give them to them.";
			next;
			mes "[Phong in Mumbaki]";
			mes "All they want is inner peace anyways.";
			mes "They give meaning to little things and find peace within that behavior.";
			next;
			mes "[Phong in Mumbaki]";
			mes "What is really important is the belief that you will be safe as long as you carry that item.";
			mes "If people can stop being afraid by holding on to your old shirt button, then that button is a Spiritual Protection.";
			next;
			mes "^4d4dffAs Mumbaki said, giving out some items to serve as a Spiritual Protection would be a good idea.";
			mes "What would be adequate as a Spiritual Protection..^000000";
			next;
			switch (select("Holy Water!:Holy magical item Blue Gemstone?!:Writing utensils or school supplies")) {
			case 1:
				mes "[Phong in Mumbaki]";
				mes "The name itself suggests holiness.";
				mes "It was blessed by the Holy Water, yes?";
				mes "Not bad.";
				mes "Is there another? Something more persuading would be nice.";
				next;
				select("Talk about Blue Gemstone.");
				mes "[Phong in Mumbaki]";
				mes "Aha... a stone that disappears after absorbing the curse or magical affect instead of the holder.";
				mes "Used in holy magic?";
				mes "Sounds good.";
				next;
				break;
			case 2:
				mes "[Phong in Mumbaki]";
				mes "Aha... a stone that disappears after absorbing the curse or magical affect instead of the holder.";
				mes "Used in holy magic?";
				mes "But it does not sound so holy though.";
				next;
				select("Talk about the Holy Water.");
				mes "[Phong in Mumbaki]";
				mes "The name itself suggests holiness.";
				mes "It was blessed by the Holy Water, yes?";
				mes "Sounds good.";
				next;
				break;
			case 3:
				mes "[Phong in Mumbaki]";
				mes "Hmm? It isn't too bad if you are always going to carry it around.";
				mes "But I think something that looks more persuading would be better.";
				next;
				mes "[Phong in Mumbaki]";
				mes "It would be better is there is a holy feel to it...";
				mes "Do you have something that was blessed by your god?";
				next;
				select("Holy Water or Blue Gemstone?");
				mes "[Phong in Mumbaki]";
				mes "The name itself suggests holiness.";
				mes "It was blessed by the Holy Water, yes?";
				mes "Stone that protects the bearer...";
				mes "Sounds perfect.";
				next;
				break;
			}
			mes "[Phong in Mumbaki]";
			mes "Can you find Holy Water and Blue Gemstone that you spoke of?";
			mes "While I'm working on the Spiritual Protection, you can give out the Holy Artifacts.";
			next;
			mes "[Phong in Mumbaki]";
			mes "People's trust toward you will grow stronger if you do that.";
			mes "They will trust and listen to you.";
			mes "Yes, because you will become their heart's savior.";
			next;
			mes "^4d4dffListening to Phong in Mumbaki, you decided to give out Holy Water and Blue Gemstone to the villagers.";
			set malaya_hi, 12;
			erasequest 7358;
			setquest 7351;
			close;
		case 2:
			mes "[Phong in Mumbaki]";
			mes "Is that so?";
			mes "Tell me if anything happens.";
			mes "For you, it'll be my pleasure to lend you a hand";
			close;
		}
	} else if (malaya_hi == 12) {
		mes "[Phong in Mumbaki]";
		mes "Holy Water and Blue Gemstone you spoke of will function well. ";
		mes "I hope they can set aside their fear and worries this way...";
		close;
	} else if (malaya_hi == 13) {
		mes "[Phong in Mumbaki]";
		mes "Did you give out your present to everyone?";
		mes "By doing this, you made friends with everyone in the town.";
		next;
		mes "[Phong in Mumbaki]";
		mes "I found ways to build Spiritual Protection.";
		mes "My grandchild Imelda will create it.";
		mes "So don't worry. You don't have to give out any more of your things.";
		erasequest 7365;
		set malaya_hi, 20;
		getexp 200000, 200000;
//		SavePPL Soul_Protection
		close;
	} else {
		mes "[Phong in Mumbaki]";
		switch(rand(1, 6)) {
		case 1:
			mes "There was a traveler who is as brave as you. The traveler went by the name of " + $malayaNames$[0] + ". Do you know that person?";
			break;
		case 2:
			mes "There is a traveler recently that has been gaining popularity in the village. The traveler's name was " + $malayaNames$[0] + ". Outsiders seem to be very vigorous.";
			break;
		case 3:
			mes "I have never in my life living as a Mumbaki seen a soul as pure and as strong as that of " + $malayaNames$[0] + "'s. Yes, even stronger and purer than yours.";
			break;
		case 4:
			mes "I witnessed a traveler who flipped backward after stepping on a fruit peel. " + $malayaNames$[1] + ". He cried out 'Ouch! Somebody please help~'. We all had a good laugh.";
			break;
		case 5:
			mes "Welcome! Welcome! You are always welcome around here.";
			break;
		case 6:
			mes "I don't know if you are aware of this, but " + $malayaNames$[0] + " even aided Baryo. I feel good to know that there is a one more good soul around.";
			break;
		}
		next;
		switch (select("Ask for advice.:Bless flowers...")) {
		case 1:
			if (malaya_diwata == 2) {
				mes "[Phong in Mumbaki]";
				mes "Ferry at the Port?";
				mes "So that has happened...";
				mes "Important thing is to first find out why that child is so upset.";
				next;
				mes "[Phong in Mumbaki]";
				mes "In this case, a bribe would work perfectly.";
				mes "Flowers are always the best choice for seducing woman, right?";
				next;
				select("This is not a love consulting.");
				mes "[Phong in Mumbaki]";
				mes "I'm just saying.";
				mes "Dead or alive, that poor soul is just a little girl.";
				next;
				mes "[Phong in Mumbaki]";
				mes "Girls that age will smile even at the falling leaves.";
				mes "Open her heart with an armful of flowers. ";
				next;
				mes "[Phong in Mumbaki]";
				mes "Let's see...";
				mes "^4d4dff3 Mystic Flowers, 3 Elegant Flowers, 3 Pretty Flowers^000000 would be enough to make a Bouquet.";
				next;
				mes "[Phong in Mumbaki]";
				mes "Gather these flowers, and I'll make a Bouquet out of it and bless it.";
				mes "Flowers can be found out side the village.";
				set malaya_diwata, 3;
				erasequest 7396;
				setquest 7397;
				close;
			} else if (malaya_diwata == 3) {
				if ((countitem(6509) < 3) || (countitem(6510) < 3) && (countitem(6511) < 3)) {
					mes "[Phong in Mumbaki]";
					mes "There are ^4d4dff3 Mystic Flowers, 3 Elegant Flowers, 3 Pretty Flowers^000000.";
					mes "Do you understand?";
					close;
				}
				mes "[Phong in Mumbaki]";
				mes "Oh... I can smell the scent of flowers from here.";
				mes "I'll gather these and bless them.";
				next;
				mes "-Phong in Mumbaki carries out a blessing ceremony after carefully tying flowers into a Bouquet.-";
				mes "-Just by watching it, holiness overwhelms you.-";
				next;
				mes "[Phong in Mumbaki]";
				mes "Isn't it a beauty?";
				mes "Not bad for a old man huh?";
				mes "I made so many Offering Bouquets in the past that I can make one with my eyes closed now.";
				next;
				mes "[Phong in Mumbaki]";
				mes "Now, deliver this to that child.";
				mes "I hope she opens her heart with this and becomes willing to talk to you.";
				delitem 6509, 3; // Mysterious_Flower
				delitem 6510, 3; // Elegant_Flower
				delitem 6511, 3; // Beautiful_Flower
				getitem 6506, 1; // Memorial_Bouquet
				set malaya_diwata, 4;
				erasequest 7397;
				setquest 7398;
				close;
			} else if (malaya_diwata == 4) {
				mes "[Phong in Mumbaki]";
				mes "Take this Bouquet and talk to the spirit that has nested in the boat.";
				close;
			} else if (malaya_diwata > 5) {
				mes "[Phong in Mumbaki]";
				mes "It is a pity to see a misfortunate spirit... just as with that Ferry incident.";
				mes "If you are going to offer a Bouquet for a spirit, I'm always willing to help.";
				close;
			} else {
				mes "[Phong in Mumbaki]";
				mes "There is nothing this old man can tell you.";
				mes "Nothing can beat staying healthy, right?";
				close;
			}
		case 2:
			if (checkquest(7402) == -1) {
				mes "[Phong in Mumbaki]";
				mes "Who is the floral tribute for?";
				mes "Don't tell me you're making one in advance cause you're lazy?";
				mes "A tribute must be sincere. Don't forget that.";
				close;
			}
			if (countitem(6506) > 0) {
				mes "[Phong in Mumbaki]";
				mes "Isn't it already made?";
				mes "What is that in your hand?";
				mes "Why are you standing around here? Go and give out those flowers.";
				close;
			}
			if ((countitem(6509) < 3) || (countitem(6510) < 3) || (countitem(6511) < 3)) {
				mes "[Phong in Mumbaki]";
				mes "Going to Diwata?";
				mes "You need Mysterious Flowers, Elegant Flowers and Beautiful Flowers, 3 of each, okay?";
				mes "I'll make it when the flowers are ready.";
				close;
			}
			mes "[Phong in Mumbaki]";
			mes "Diwata is some woman.";
			mes "And you going to her every day is something too.";
			next;
			mes "[Phong in Mumbaki]";
			mes "Hey, here's the Bouquet.";
			mes "Make offerings with your soul and wish for a fruitful day.";
			delitem 6509, 3; // Mysterious_Flower
			delitem 6510, 3; // Elegant_Flower
			delitem 6511, 3; // Beautiful_Flower
			getitem 6506, 1; // Memorial_Bouquet
			close;
		}
	}
}

malaya,169,350,5	script	Imelda#malaya	475,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[Imelda]";
		mes ".... Hmm.";
		close;
	} else if (malaya_hi < 20) {
		mes "[Imelda]";
		mes "..........";
		mes "Not bad.";
		mes "I have my eyes on you. Let's see how you do in this town.. *chuckle*";
		next;
		mes "- She is a rather annoying little girl. -";
		close;
	} else if (malaya_hi == 20) {
		mes "[Imelda]";
		mes "Aren't you the hero who recently got on the villagers good side with the cheap foreign Holy Artifact?";
		mes "What's up?";
		next;
		select ("You want to make a traditional Spiritual Protection?");
		mes "[Imelda]";
		mes "Yes. My grandfather found a way.";
		mes "I'm going to make it.";
		next;
		mes "[Imelda]";
		mes "This is my job and nobody else's.";
		mes "Protecting traditions is my job.";
		next;
		switch (select("Is that so?:Good luck on your own!")) {
		case 1:
			if (BaseLevel < 100) {
				mes "[Imelda]";
				mes "Of course.";
				mes "And to get help from someone as... weak as you is not such a good idea.";
				next;
				mes "[Imelda]";
				mes "Getting the materials is not as easy as it sounds.";
				mes "Maybe when you become stronger, yes, but not now. Never.";
				close;
			}
			mes "[Imelda]";
			mes "What then?";
			mes "You're going to get the materials?";
			mes "Fine I'll accept your proposal.";
			next;
			select ("....?!");
			mes "[Imelda]";
			mes "If you wanted to help me out so much, why didn't you say so from the beginning?";
			mes "Or ask my grandfather?";
			next;
			mes "[Imelda]";
			mes "If you are so enthusiastic about making a Spiritual Protection.";
			mes "I'd have to give up, won't I?";
			next;
			mes "[Imelda]";
			mes "Now, the needed materials are ^4d4dff6 Sharpened Bamboos, 6 Salt bags and 6 Silver Crosses^000000.";
			next;
			mes "[Imelda]";
			mes "You'll have to manufacture the salt yourself at the north western beach.";
			mes "You'll find the pits I've made there.";
			next;
			mes "[Imelda]";
			mes "Go to Pandoi at the weapon shop for the Silver Crosses.";
			mes "He promised to make me some.";
			next;
			mes "[Imelda]";
			mes "Sharpened Bamboos you can get at Baryo or from a nearby forest.";
			mes "You got all that?";
			next;
			mes "[Imelda]";
			mes "Now's the time to prove your prowess!";
			set malaya_hi, 21;
			setquest 7366;
			close;
		case 2:
			mes "[Imelda]";
			mes "Indeed.";
			mes "I will protect the village!";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Now I haven't seen any Spiritual Protections made with those!";
			mes "Interesting~";
			mes "I'm sure you'll do just fine~";
			mes "Ha ha ha ha~";
			next;
			mes "[Imelda]";
			mes "Stop annoying me and go away!";
			close;
		}
	} else if (malaya_hi == 21) {
		if ((countitem(6501) < 6) || (countitem(6500) < 6) || (countitem(6502) < 6)) {
			mes "[Imelda]";
			mes "I'll approve you as worthy if you bring all the materials for the Spiritual Protection!";
			next;
			mes "[Imelda]";
			mes "Manufacture the salt at the north western beach and bamboos grow in Baryo Mahiwaga.";
			mes "Ask Pandoi to make the Silver Crosses.";
			mes "Don't forget to get 6 of each.";
			close;
		}
		mes "[Imelda]";
		mes "... Oh... My, you really did get them?";
		mes "You're better than I thought.";
		mes "That was not a compliment at all!";
		next;
		mes "[Imelda]";
		mes "Now I'm going through the holy ritual to make a traditional Spiritual Protection.";
		mes "Give them to me! And don't bother me during the process!";
		set malaya_hi, 22;
		delitem 6500, 6; // Sharp_Bamboo
		delitem 6501, 6; // Salt_Bag
		delitem 6502, 6; // Silver_Cross
		erasequest 7366;
		setquest 7367;
		close;
	} else if (malaya_hi == 22) {
		.@playtime = checkquest(7367, PLAYTIME);
		if (.@playtime == 0 || .@playtime == 1) {
			mes "Imelda is in ritual with a devout aura, compared to when she streamed invectives.";
			mes "Better not disturb her.";
			close;
		} else if (.@playtime == 2) {
			mes "[Imelda]";
			mes "Still here?";
			mes "Of course, you want to see how much better my Spiritual Protection is compared to that cheap Holy Artifact.";
			next;
			mes "[Imelda]";
			mes "Fine.";
			mes "Now go and give these Spiritual Protections to the people!";
			mes "You have all the rights to do so!";
			mes "*Giggles*";
			next;
			mes "Took the Spiritual Protection, despite her ridiculous logic and vigor.";
			mes "Let's give them to the villagers.";
			set malaya_hi, 23;
			getitem 6503, 6; // Soul_Protection
			erasequest 7367;
			setquest 7368;
			setquest 7369;
			setquest 7370;
			setquest 7371;
			setquest 7372;
			setquest 7373;
			setquest 7374;
			close;
		} else {
			mes "[Imelda]";
			mes "Don't disturb the ritual and go away.";
			mes "Please wait while I make the Spiritual Protection.";
			setquest 7367;
			close;
		}
	} else if (malaya_hi == 23) {
		mes "[Imelda]";
		mes "The ones who gets the Spiritual Protections are on the list.";
		mes "Go and give them the new Spiritual Protections";
		next;
		mes "[Imelda]";
		mes "Such a kind person like yourself  will surely do it, won't you? ";
		mes "*Smirk*";
		close;
	} else if (malaya_hi == 24) {
		mes "[Imelda]";
		mes "... You really did what I asked you?";
		mes "You know what? I give up.";
		mes "I thought you'd leave after getting something from this town with sweet talk...";
		next;
		mes "[Imelda]";
		mes "I apologize for my rude behavior.";
		mes "....This is something to go with the apology.";
		next;
		mes "[Imelda]";
		mes "I'd be happy if you could help me, because the Spiritual Protections needs to be made every day.";
		set malaya_hi, 25;
		erasequest 7374;
		erasequest 7379;
		setquest 7375;
		if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
			getitem 6497, 2; // Lesser_Agimat
		else
			getitem 6497, 1; // Lesser_Agimat
		getexp 200000,200000;
		if (rand(2))
			$malayaNames$[0] = strcharinfo(0);
		close;
	} else {
		mes "[Imelda]";
		mes "Hello there.";
		mes "Did you enjoy the scenery of Malaya?";
		mes "It's nice to have a chat with friends on a Jeepney.";
		next;
		switch (select("I'll help you making Spiritual Protections.:Love and Spiritual Protection for all.")) {
		case 1:
			if (checkquest(7380) > -1) {
				if ((countitem(6501) < 6) || (countitem(6502) < 6) || (countitem(6500) < 6)) {
					mes "[Imelda]";
					mes "Materials for making a Spiritual Protection are";
					mes "Salt Bags, Silver Crosses and Sharpened Bamboos, 6 of each.";
					next;
					mes "[Imelda]";
					mes "Salt form the north western beach, Silver Crosses from Pandoi, and Sharpened Bamboos from near Baryo.";
					close;
				}
				mes "[Imelda]";
				mes "Yes, you got everything precisely.";
				mes "Thanks for the help.";
				next;
				mes "[Imelda]";
				mes "It'll be nice if you could help again tomorrow.";
				mes "Here's something for your trouble.";
				delitem 6500, 6; // Sharp_Bamboo
				delitem 6501, 6; // Salt_Bag
				delitem 6502, 6; // Silver_Cross
				erasequest 7380;
				setquest 7381;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				close;
			} else {
				.@playtime = checkquest(7381, PLAYTIME);
				if ((.@playtime == 0) || (.@playtime == 1)) {
					mes "[Imelda]";
					mes "I appreciate your kindness, but we have enough for today.";
					mes "I'll ask for you when I need more materials.";
					close;
				} else if (.@playtime == 2) {
					mes "[Imelda]";
					mes "Very good timing.";
					mes "I ran out of materials for today's Spiritual Protections.";
					mes "Could you go for them now?";
					erasequest 7381;
					next;
					switch (select("Sure.:I need some preparations.")) {
					case 1:
						mes "[Imelda]";
						mes "As usual then.";
						mes "6 Salt Bags. Silver Crosses and Sharpened Bamboos, please.";
						setquest 7380;
						close;
					case 2:
						mes "[Imelda]";
						mes ".......I see.";
						mes "I'll be waiting then.";
						close;
					}
				} else {
					mes "[Imelda]";
					mes "That is great news indeed.";
					mes "You know what you need for making Spiritual Protections?";
					mes "Of course, it's not your first time...";
					next;
					mes "[Imelda]";
					mes "I'll leave you to it then.";
					mes "6 Salt Bags. Silver Crosses and Sharpened Bamboos, please.";
					setquest 7380;
					close;
				}
			}
		case 2:
			if (checkquest(7374) != -1) {
				if (checkquest(7379) == -1) {
					mes "[Imelda]";
					mes "Please deliver these new Spiritual Protections to the villagers.";
					mes "You know them, right?";
					close;
				}
				mes "[Imelda]";
				mes "They cannot rely on these Spiritual Protections forever...";
				mes "It would be much better to have a strong mind such as yours.";
				next;
				mes "[Imelda]";
				mes "Strong spirits are full of light.";
				mes "Those of the dark cannot approach due the blinding light";
				next;
				mes "[Imelda]";
				mes "I guess that's it for today.";
				mes "Thank you very much.";
				setquest 7375;
				erasequest 7374;
				erasequest 7379;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (rand(2))
					$malayaNames$[0] = strcharinfo(0);
				close;
			} else {
				.@playtime = checkquest(7375, PLAYTIME);
				if (.@playtime == 0 || .@playtime == 1) {
					mes "[Imelda]";
					mes "The Spiritual Protections given before will still be in effect";
					mes "It's okay for now.";
					close;
				} else if (.@playtime == 2) {
					mes "[Imelda]";
					mes "I was wondering when you would drop by.";
					mes "Could you deliver Spiritual Protections to the folks today?";
					erasequest 7375;
					next;
					if (select("Of course.:Not today.") == 2) {
						mes "[Imelda]";
						mes "Yes.";
						mes "Why not take a stroll in Malaya today?";
						mes "Of course, you'll still encounter ghosts here and there.";
						close;
					}
					if ((checkquest(7381) == 0) || (checkquest(7381) == 1)) {
						mes "[Imelda]";
						mes "Thank you very much.";
						mes "Come back when you've given them all out.";
						setquest 7374;
						setquest 7368;
						setquest 7369;
						setquest 7370;
						setquest 7371;
						setquest 7372;
						setquest 7373;
						getitem 6503, 6; // Soul_Protection
						close;
					} else {
						mes "[Imelda]";
						mes "Thanks for your concern, but I couldn't make any because I ran out of materials.";
						mes "Shame, is it not?";
						mes "I do hope there's somebody willing to get them for me.";
						close;
					}
				} else {
					mes "[Imelda]";
					mes "Are you at peace? I could feel your serenity all the way from here.";
					mes "You want to spend that extra time for me?";
					next;
					mes "[Imelda]";
					mes "Could you give out these Spiritual Protections to the villagers for me?";
					next;
					switch (select("Yes.:Not today.") == 2) {
						mes "[Imelda]";
						mes "Yes.";
						mes "Why not take a stroll in Malaya today?";
						mes "Of course, you'll still encounter ghosts here and there.";
						close;
					}
					if ((checkquest(7381, PLAYTIME) == 0) || (checkquest(7381, PLAYTIME) == 1)) {
						mes "[Imelda]";
						mes "Thank you very much.";
						mes "Come back when you've given them all out.";
						setquest 7374;
						setquest 7368;
						setquest 7369;
						setquest 7370;
						setquest 7371;
						setquest 7372;
						setquest 7373;
						getitem 6503, 6; // Soul_Protection
						close;
					} else {
						mes "[Imelda]";
						mes "Thanks for your concern, but I couldn't make any because I ran out of materials.";
						mes "Shame, is it not?";
						mes "I do hope there's somebody willing to get them for me.";
						close;
					}
				}
			}
			break;
		}
	}
	end;
}

malaya,181,353,5	script	Old Man Nardo#malaya	574,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[Old Man Nardo]";
		mes ".......";
		mes "Not from around here, I see. I have nothing to say.";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7353) == 2) {
			mes "[Old Man Nardo]";
			mes "How about lending a hand for a poor old man?";
			mes "I don't care if it's just a sleeve of your shirt, just give me something with your vigor.";
			next;
			mes "[Old Man Nardo]";
			mes "You know, I've not long to go now...";
			mes "Help me be at peace along the way.";
			close;
		} else {
			mes "[Old Man Nardo]";
			mes "Y... You!!";
			mes "You're the young one with such strong spirit to fend off ghosts of darkness?!";
			mes "Would it be... Possible to share some of your spirit with me?";
			next;
			mes "[Old Man Nardo]";
			mes "I have trouble sleeping because of the mischievous ghosts around town, and my back hurts when it rains.";
			next;
			mes "[Old Man Nardo]";
			mes "Please share that miraculous spirit of yours with me.";
			mes "How about just a button of yours?";
			next;
			mes "-The troubled villagers desire your belongings because you fend off the ghosts. -";
			setquest 7353;
			completequest 7353;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "-So many have already asked you for this. Perhaps it will be better to speak with Phong in Mumbaki.-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[" + strcharinfo(0) + "]";
		mes "He'll rake off all my buttons if I talk to him now.";
		mes "Must counsel with Mumbaki first!";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7360) != -1) {
			mes "[Old Man Nardo]";
			mes "To be honest, I do not believe that this Holy Artifact has any abilities.";
			mes "It's just for the peace of mind.";
			next;
			mes "[Old Man Nardo]";
			mes "Nevertheless, I see you differently now";
			mes "To exclude just because someone's an outsider doesn't seem like a good idea anymore.";
			mes "I'm sorry I ignored you.";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dffPrepare and give Blue Gemstone and Holy Water. ^000000";
			close;
		}
		mes "[Old Man Nardo]";
		mes "So, changed your mind about sharing your spirit?";
		next;
		select("Hand over the prepared items.");
		mes "[Old Man Nardo]";
		mes "Ahh... Thank you.";
		mes "Now I can be at peace for some time...";
		mes "...Peace is always good. Yes.";
		next;
		mes "- Gave Holy Water and Blue Gemstone to Old Man Nardo.-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7360;
		completequest 7360;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-With the Old Man as last, enough Holy Artifacts have been given out.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if ((malaya_hi > 12) && (malaya_hi < 20)) {
		mes "[Old Man Nardo]";
		mes "To be honest, I do not believe that this Holy Artifact has any abilities.";
		mes "It's just for the peace of mind.";
		next;
		mes "[Old Man Nardo]";
		mes "When you have the time, could you help me out with something?";
		mes "I'm fine now... I mean later.";
		close;
	} else {
		mes "[Old Man Nardo]";
		switch(rand(1, 6)) {
		case 1:
			mes "Do you know Capre? I hear " + $malayaNames$[1] + " travelers are helping out Capre... Anyhow...";
			break;
		case 2:
			mes "There are plenty of Spiritual Protection these days. " + $malayaNames$[0] + " was keen at giving out Spiritual Protections. Is it a tradition where you come from?";
			break;
		case 3:
			mes "I hear that, between merchants, " + $malayaNames$[1] + "? The name seems to pop up a lot. He seems to be talented in the business.";
			break;
		case 4:
			mes "Once, I saw a traveler who slipped on a piece of fruit. 'Someone help " + $malayaNames$[1] + "~' he shouted, which gave me a good laugh.";
			break;
		case 5:
			mes "Ah, you again? Thanks for the help back then.";
			break;
		case 6:
			mes "I hear that " + $malayaNames$[2] + " is famous in Baryo. Why don't you try for some fame?";
			break;
		}
		mes "What is it?";
		next;
		switch (select("Speak.:Give Spiritual Protection.:The Old Man and the Cast Iron Cauldron")) {
		case 1:
			mes "[Old Man Nardo]";
			mes "Port Malaya is a beautiful city.";
			mes "The old and new are in perfect harmony.";
			next;
			mes "[Old Man Nardo]";
			mes "Of course there's the recent problem with ghosts wondering about...";
			mes "It relieves me that you and other young people are working hard on it.";
			mes "Thank you.";
			close;
		case 2:
			if ((checkquest(7374) != -1) && (checkquest(7369) != -1)) {
				if (!countitem(6503)) {
					mes "^4d4dffThere's no Spiritual Protection to give to the Old Man.^000000";
					close;
				}
				mes "[Old Man Nardo]";
				mes "Is this a new Spiritual Protection made from traditional methods?";
				mes "I am grateful that you'd replace mine with a new one.";
				mes "I am always in your and Imelda's debt.";
				next;
				mes "-Delivered the Spiritual Protection to Old Man Nardo.-";
				delitem 6503, 1; // Soul_Protection
				erasequest 7369;
				setquest 7383;
				if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
					mes "- With the Old Man as last, all Spiritual Protections have been delivered. Head back to Imelda.-";
					if (malaya_hi == 23) {
						set malaya_hi, 24;
					}
					setquest 7379;
					erasequest 7382;
					erasequest 7383;
					erasequest 7384;
					erasequest 7385;
					erasequest 7386;
					erasequest 7387;
				}
				close;
			} else {
				mes "[Old Man Nardo]";
				mes "What? A new Spiritual Protection?";
				mes "I'm okay. I still have the one you gave me before.";
				mes "Could you give me a new one when this one wears out?";
				close;
			}
			break;
		case 3:
			if (BaseLevel < 100) {
				mes "[Old Man Nardo]";
				mes "Hmm... You don't look strong enough to travel to Baryo.";
				mes "I'm sorry but I can't let you carry the precious Cast Iron Cauldron.";
				close;
			}
			if ((checkquest(7378, PLAYTIME) == 0) || (checkquest(7378, PLAYTIME) == 1)) {
				mes "[Old Man Nardo]";
				mes "You've delivered the Cast Iron Cauldron to Baryo, so that's enough for today.";
				mes "No matter how strong a cauldron is, even with the toughest cast iron, it only lasts a day.";
				next;
				mes "[Old Man Nardo]";
				mes "Help me out again tomorrow if you can.";
				close;
			} else if (checkquest(7378, PLAYTIME) == 2) {
				mes "[Old Man Nardo]";
				mes "Hey there!";
				mes "So, are you well and well fed?";
				mes "Come back again when you have the time.";
				next;
				mes "[Old Man Nardo]";
				mes "It's about the Cast Iron Cauldron, but it can wait for after your current errand.";
				erasequest 7378;
				close;
			 } else {
				if (checkquest(7377) != -1) {
					if (countitem(6503) < 5) {
						mes "[Old Man Nardo]";
						mes "Did you deliver the cauldron in one piece?";
						mes "Kiko in Mumbaki should have given you a Spiritual Protection. Do you have it?";
						mes "You must have left it somewhere. Go fetch it please.";
						close;
					}
					mes "[Old Man Nardo]";
					mes "Good. It's the Spiritual Protection promised by Kiko in Mumbaki in return.";
					mes "I know Imelda makes them and you bring them every day, but more the Spiritual Protections, the better.";
					next;
					mes "[Old Man Nardo]";
					mes "Please stop by again.";
					mes "I always prepare the Cast Iron Cauldron needed at Baryo.";
					delitem 6503, 5; // Soul_Protection
					setquest 7378;
					erasequest 7377;
					if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
						getitem 6497, 2; // Lesser_Agimat
					else
						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					if (!rand(3))
						$malayaNames$[2] = strcharinfo(0);
					close;
				} else {
					if (checkquest(7376) > -1) {
						mes "[Old Man Nardo]";
						mes "Go to Kiko in Mumbaki at Baryo Mahiwaga and deliver the Cast Iron Cauldron.";
						mes "This should help against the Bakonawa troubles.";
						close;
					} else {
						mes "[Old Man Nardo]";
						mes "Yes, the Cast Iron Cauldron.";
						mes "Go to Kiko in Mumbaki at Baryo Mahiwaga and deliver the Cast Iron Cauldron.";
						mes "I'd like you to do it for me...";
						next;
						switch (select("Cast Iron Cauldron??:I'll do it.:I'm busy right now.")) {
						case 1:
							mes "[Old Man Nardo]";
							mes "It's because of the Bakonawa.";
							mes "Beat the cauldron and the surprised Bakonawa spits back out the moon.";
							next;
							mes "[Old Man Nardo]";
							mes "Baryo Mahiwaga is close to where Bakonawa lives, so they are always prepared for trouble.";
							next;
							mes "[Old Man Nardo]";
							mes "Enough Cast Iron Cauldrons must be prepared for beating.";
							mes "But the forge is better here.";
							mes "So I deliver them every day.";
							close;
						case 2:
							mes "[Old Man Nardo]";
							mes "This is the Cast Iron Cauldron. They have fine blacksmiths in Malaya.";
							mes "Deliver this to Kiko in Mumbaki at the nearby town of Baryo Mahiwaga.";
							setquest 7376;
							getitem 6504, 5; // Cast_Iron_Caldron
							close;
						case 3:
							mes "[Old Man Nardo]";
							mes "Is that so.";
							mes "I'm sorry, you must be very busy.";
							close;
						}
					}
				}
			}
			break;
		}
	}
	end;
}

malaya,224,267,3	script	Romel#malaya	573,{
	if (malaya_hi < 10) {
		mes "[Romel]";
		mes ".........";
		mes " ";
		mes "(He evades your gaze and ignores you.)";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7357) == 2) {
			mes "[Romel]";
			mes "....So cold-hearted.";
			mes "And here we are, always trembling in anxiety...";
			next;
			mes "[Romel]";
			mes "Not even allowed the peace of mind...";
			close;
		} else {
			mes "[Romel]";
			mes "Ahh....";
			mes "... You..";
			mes "I'm sorry I ignored you.";
			mes "But... you must be the one they're talking about...";
			next;
			mes "[Romel]";
			mes "Are you the one who fends off the ghosts?";
			mes "If it's okay with you, can I have one of your belongings or some hair?";
			next;
			mes "[Romel]";
			mes "I want to carry it... Like a charm of sort.";
			next;
			mes "-The troubled villagers desire your belongings because you fend off the ghosts. -";
			setquest 7357;
			completequest 7357;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- So many have already asked you for this. Perhaps it will be better to speak with Phong in Mumbaki.-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "Romel looks in your way with a sad look.";
		mes "He'll surely take a hair or pull a sleeve if he had his way!";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7364) != -1) {
			mes "[Romel]";
			mes "Frankly speaking, it's for the peace of mind.";
			mes "With it, I could face them with more boldness.";
			next;
			mes "[Romel]";
			mes "I mean, I'm relying on such items,";
			mes "but I am braver with them.";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dffPrepare and give Blue Gemstone and Holy Water. ^000000";
			close;
		}
		mes "[Romel]";
		mes "...What is it?";
		next;
		select ("Hand him the prepared items");
		mes "[Romel]";
		mes "Oh... Thank you.";
		mes "I can feel your spirit.";
		mes "This will keep me safe.";
		next;
		mes "[Romel]";
		mes "Hey... Could you give some for my daughter as well?";
		next;
		mes "- Gave Romel the prepared Holy Water and Blue Gemstone.-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7364;
		completequest 7364;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-With Romel as last, I think enough Holy Artifacts have been given.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[Romel]";
		mes "The Holy Artifact is in good hands.";
		mes "Same with my daughter.";
		close;
	} else {
		mes "[Romel]";
		mes "Hello there.";
		switch(rand(1, 6)) {
		case 1:
			mes "Ha ha, I had a dream last night, you see, and there was " + $malayaNames$[0] + " in the dream. Ha ha... Strange indeed...";
			break;
		case 2:
			mes "Sometimes, my wife makes these sounds in her sleep. " + $malayaNames$[0] + "... " + $malayaNames$[0] + "... she says. Who is it? Do you know?! Is she possessed by a ghost?";
			break;
		case 3:
			mes  "It's all thanks to " + $malayaNames$[0] + " for changing the atmosphere of the house. It seems like we were saved by the Holy Artifact and Spiritual Protection.";
			break;
		case 4:
			mes  "The people of the neighboring Baryo Mahiwaga are so strong. Even their children play in the forest. I can't imagine myself doing that.";
			break;
		case 5:
			mes  "Without the slightest doubt, the most famous person in town is " + $malayaNames$[2] + ". Even famous in Baryo they say.";
			break;
		case 6:
			mes  "Merchant Woeon says 'Our " + $malayaNames$[1] + " sir/ma'am' 'we " + $malayaNames$[1] + " sir/ma'am' during drinking. I wonder what happened between the two of them?";
			break;
		}
		next;
		if (select("Give Spiritual Protection:How are things?") == 2) {
			mes "[Romel]";
			mes "I am at peace these days.";
			close;
		}
		if ((checkquest(7374) == -1) || (checkquest(7373) == -1)) {
			mes "[Romel]";
			mes "A new Spiritual Protection?";
			mes "The one you gave me before still works fine.";
			mes "I'm okay for now.";
			close;
		}
		if (!countitem(6503)) {
			mes "^4d4dffThere are no Spiritual Protections to give to Romel.^000000";
			close;
		}
		mes "[Romel]";
		mes "A new Spiritual Protection.";
		mes "I was thinking this one had worn out... Thanks for coming.";
		mes "This Spiritual Protection will also protect us.";
		next;
		mes "- Delivered Romel his Spiritual Protection.-";
		delitem 6503, 1; // Soul_Protection
		erasequest 7373;
		setquest 7387;
		if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
			mes "- With Romel as last, all Spiritual Protections have been delivered. Head back to Imelda.-";
			if (malaya_hi == 23) {
				set malaya_hi, 24;
			}
			setquest 7379;
			erasequest 7382;
			erasequest 7383;
			erasequest 7384;
			erasequest 7385;
			erasequest 7386;
			erasequest 7387;
		}
		close;
	}
	end;
}

malaya,223,267,5	script	Talah#malaya	941,{
	if (malaya_hi < 10) {
		mes "[Talah]";
		mes "..........gasp!";
		mes " ";
		mes "(When your eyes met with hers, she ran and hid behind her father.)";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7356) == 2) {
			mes "[Talah]";
			mes "Talah might be taken away tonight.";
			mes "Scary kids might come to Talah.";
			next;
			mes "When Talah tugs at Romel's shirt, Romel looks at you with a sad gaze.";
			mes "Better do something before they take a button from you...";
			close;
		} else {
			mes "[Talah]";
			mes "....I..umm... that.....";
			mes ".........oh... Daddy....";
			next;
			mes "[Romel]";
			mes "Hey, could you give my daughter a button or some hair of yours?";
			mes "She has trouble sleeping at night .......";
			next;
			mes "[Romel]";
			mes "Wouldn't she be able to sleep well if she had something from you as a lucky charm?";
			next;
			mes "- The troubled villagers desire your belongings because you fend off the ghosts. -";
			setquest 7356;
			completequest 7356;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- So many have already asked you for this. Perhaps it will be better to speak with Phong in Mumbaki. -";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "Talah looks from you to her father with inquisitive eyes.";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7363) != -1) {
			mes "[Talah]";
			mes "I dont know for sure";
			mes "but I get a warm feel from them.";
			mes "Daddy's braver now and that makes Talah stronger too.";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dffPrepare and give Blue Gemstone and Holy Water. ^000000";
			close;
		}
		mes "[Talah]";
		mes ".... Can I say hello?";
		mes "Hello... there...";
		next;
		select("Give the prepared items.");
		mes "[Talah]";
		mes "Pretty blue stones...!";
		mes "Oooooh~ They're beautiful!";
		mes "Is this stone going to keep Talah safe?";
		next;
		mes "- Delivered the Holy Water and Blue Gemstone to Talah. -";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7363;
		completequest 7363;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-With Talah as last, I think enough Holy Artifacts have been given.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[Talah]";
		mes "Daddy told me to hold on to the Holy Artifact really tight.";
		mes "So it keeps away bad ghosts...";
		close;
	} else {
		mes "[Talah]";
		mes "Hello...";
		next;
		if (select("Give Spiritual Protection.:Hi there?") == 2) {
			mes "[Talah]";
			mes "...Hey...Thank you.";
			mes "You're keeping us safe aren't you?";
			close;
		}
		if ((checkquest(7374) != -1) && (checkquest(7372) != -1)) {
			if (!countitem(6503)) {
				mes "^4d4dffThere is no Spiritual Protection to give to Talah.^000000";
				close;
			}
			mes "[Talah]";
			mes "Is this a new Spiritual Protection?";
			mes "Thank you.";
			mes "Talah can sleep well now with the Spiritual Protection.";
			mes "Daddy likes it too.";
			next;
			mes "- Delivered new Spiritual Protection to Talah.-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7372;
			setquest 7386;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "- With Talah as last, all Spiritual Protections have been delivered. Head back to Imelda. -";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		} else {
			mes "[Talah]";
			mes "Umm...";
			mes "The one you gave before still keeps Talah safe.";
			mes "I'm okay.";
			close;
		}
	}
	end;
}

malaya,62,274,0	script	Sand Trap#malaya	557,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if ((checkquest(7366) == -1) && (checkquest(7380) == -1)) {
		mes "A device to evaporate sea water is buried in the sand...";
		close;
	}
	if (countitem(6501) >= 6) {
		mes "There's enough salt.";
		close;
	}
	mes "A device to evaporate sea water is installed in the Sand Trap.";
	next;
	mes "Salt can be scraped off the dried leaves";
	mes "someone scattered on the sea water.";
	close2;
	progressbar "0xffff00", 5;
	disablenpc();
	initnpctimer;
	getitem 6501, 1; // Salt_Bag
	mes "[" + strcharinfo(0) + "]";
	mes "This should be enough.";
	close;

OnTimer30000:
	enablenpc();
	stopnpctimer;
	end;
}
malaya,66,277,0	duplicate(Sand Trap#malaya)	Sand Trap#malaya01	557
malaya,70,282,0	duplicate(Sand Trap#malaya)	Sand Trap#malaya02	557

ma_fild01,178,206,0	script	Black Bamboo#malaya	844,4,4,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if ((checkquest(7366) == -1) && (checkquest(7380) == -1)) {
		mes "There's a short and black bamboo tree.";
		close;
	}
	if (countitem(6500) >= 6) {
		mes "There's enough Sharpened Bamboos...";
		close;
	}
	mes "There's bamboo here with black cane and leaves.";
	mes "If some of it is cut off and sharpened, I think it will suffice for the Sharpened Bamboo Imelda wanted.";
	close2;
	progressbar "0xffff00", 3;
	disablenpc();
	initnpctimer;
	getitem 6500, 1; //Sharp_Bamboo
	mes "[" + strcharinfo(0) + "]";
	mes "I knew I could do this!";
	close;
OnTouch_:
	if ((checkquest(7366) != -1) || (checkquest(7380) != -1)) {
		specialeffect EF_LEVEL99_4;
	}
	end;
OnTimer30000:
	enablenpc();
	stopnpctimer;
	end;
}
ma_fild01,225,186,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya01	844,4,4
ma_fild01,230,244,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya02	844,4,4
ma_fild01,174,238,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya03	844,4,4
ma_fild01,180,273,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya04	844,4,4
ma_fild01,179,145,0	duplicate(Black Bamboo#malaya)	Black Bamboo#malaya05	844,4,4

malaya,295,171,3	script	Collection Dealer Woeon	582,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[Woeon]";
		mes "Urghh... Urgh... I got a headache...";
		mes "My headache must have been brought to me by you from out of town!";
		mes "Go away. Shoo, leave!";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7355) == 2) {
			mes "[Woeon]";
			mes "Now, look here my friend...";
			mes "This can all be solved by giving me a button.";
			mes "It doesn't look so expensive either.";
			close;
		} else {
			mes "[Woeon]";
			mes "Aha! You're the one they're all talking about!";
			mes "I was kinda rude right? Forget about it!";
			mes "Yes, do forget...";
			next;
			mes "[Woeon]";
			mes "If you're in dire need, I could get you a job around here you know..";
			mes ".... Could you give me some of your things?";
			next;
			mes "[Woeon]";
			mes "I heard the rumors about you shooing away the ghosts!";
			mes "Can't you see my shaking hands from fear of them ghosts?";
			mes "I'll feel much better if you could just give me a button off your sleeve...";
			next;
			mes "- The troubled villagers desire your belongings because you fend off the ghosts. -";
			setquest 7355;
			completequest 7355;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- So many have already asked you for this. Perhaps it will be better to speak with Phong in Mumbaki.-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[Woeon]";
		mes "Sigh... Life is so tough these days.";
		mes "Why did ghosts come along to bother me so.";
		mes "I wish I had a lucky charm or something...";
		next;
		mes "[Woeon]";
		mes "Why won't you give me one of your belongings so I could keep as a charm?";
		mes "Come on, one sock could save a man's life, you know.";
		mes "Cold hearted son of a...";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7362) != -1) {
			mes "[Woeon]";
			mes "Hmm. Look at my hands.";
			mes "Less shaky, eh?";
			mes "Isn't that so?";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dffPrepare and give Blue Gemstone and Holy Water. ^000000";
			close;
		}
		mes "[Woeon]";
		mes "Humph! What do you want?";
		next;
		select ("Give the prepared items.");
		mes "[Woeon]";
		mes "Oh dear... Forget about the thing back there.";
		mes "You see, I was haunted by another ghost after you left...";
		mes "No hard feelings..";
		next;
		mes "[Woeon]";
		mes "Is this the source of your spirit?";
		mes "It feels kinda cool!";
		mes "Perhaps this will fend off some of them...";
		next;
		mes "[Woeon]";
		mes "Anyway, thanks a lot.";
		mes "I'll call for you first when a job opens up for you.";
		next;
		mes "- Gave Woeon the Holy Water and Blue Gemstone.-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7362;
		completequest 7362;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-With Woeon as last, I think enough Holy Artifacts have been given.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[Woeon]";
		mes "Now... Let's get back to business.";
		mes "Thanks to you, I don't see any of those darn ghosts.";
		mes "Ha ha ha ha ha";
		close;
	} else {
		mes "[Woeon]";
		mes "Oh, hi there!";
		next;
		if (select("Give Spiritual Protection.:The Dealer and his Collection") == 1) {
			if (((checkquest(7374) == 0) || (checkquest(7374) == 1)) && ((checkquest(7371) == 0) || (checkquest(7371) == 1))) {
				if (!countitem(6503)) {
					mes "^4d4dffThere is no Spiritual Protection to give to Woeon.^000000";
					close;
				}
				mes "[Woeon]";
				mes "Phew~ A new Spiritual Protection?";
				mes "Is it an officially made protective charm? Imelda does some fine work.";
				mes "I'm thankful to you as well, of course.";
				next;
				mes "-Delivered Spiritual Protection to Woeon.-";
				delitem 6503, 1; // Soul_Protection
				erasequest 7371;
				setquest 7385;
				if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
					mes "-With Woeon as last, all Spiritual Protections have been delivered.-";
					if (malaya_hi == 23) {
						set malaya_hi, 24;
					}
					setquest 7379;
					erasequest 7382;
					erasequest 7383;
					erasequest 7384;
					erasequest 7385;
					erasequest 7386;
					erasequest 7387;
				}
				close;
			} else {
				mes "[Woeon]";
				mes "Spiritual Protection?";
				mes "Mine still works fine.";
				mes "Very effective indeed.";
				close;
			}
		} else {
			if (BaseLevel < 100) {
				mes "[Woeon]";
				mes "Yes, I collect various by-products from monsters.";
				mes "In fact, I'm collecting Jejellopys here...";
				next;
				mes "[Woeon]";
				mes "It's too much for you.";
				mes "Things can get pretty ugly around here, you see.";
				mes "I'll let you have at it once you're stronger, my friend!";
				close;
			}
			if ((checkquest(7392, PLAYTIME) == 0) || (checkquest(7392, PLAYTIME) == 1)) {
				mes "[Woeon]";
				mes "Oh, the Jejellopy collecting?";
				mes "I have enough for today.";
				mes "Come back again tomorrow.";
				close;
			} else if (checkquest(7392, PLAYTIME) == 2) {
				mes "[Woeon]";
				mes "Oh, yes yes.";
				mes "You're going to collect Jejellopy today as well?";
				mes "I know it's a difficult job... But you do it so well.";
				erasequest 7392;
				next;
				if (select("I'm too busy today.:Leave it to me!") == 1) {
					mes "[Woeon]";
					mes "Is that so? So it is then.";
					mes "Come stop by when you need some work.";
					close;
				}
				mes "[Woeon]";
				mes "As usual, bring me 30 Jejellopys, please.";
				mes "You can get them from the Jejelings.";
				setquest 7391;
				close;
			} else {
				if ((checkquest(7391) == 0) || (checkquest(7391) == 1)) {
					if (countitem(6498) < 30) {
						mes "[Woeon]";
						mes "Hmm? I don't think you have enough.";
						mes "I asked you for 30 Jejellopys. Business is business I'm afraid.";
						close;
					}
					mes "[Woeon]";
					mes "Oh, you have the requested numbers?";
					mes "I'll take them from here.";
					mes "You have no need for them, right?";
					next;
					mes "[Woeon]";
					mes "So I have all the Jejellopys...";
					mes "Come back again!";
					delitem 6498, countitem(6498); //Jejellopy
					setquest 7392;
					erasequest 7391;
					if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
						getitem 6497, 2; // Lesser_Agimat
					else
						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					set .@memo_name, rand(1,3);
					if (!rand(3))
						$malayaNames$[1] = strcharinfo(0);
					close;
				} else {
					mes "[Woeon]";
					mes "As you can see, I'm a Collection Dealer.";
					mes "I trade all kinds of monster or animal by-products.";
					next;
					mes "[Woeon]";
					mes "They're used as materials for manufactured goods.";
					mes "Of course, the most preferred in Port Malaya is from the monster Jejeling..";
					next;
					mes "[Woeon]";
					mes "Jejellopy can be acquired from the Jejeling.";
					mes "Can you get me 30 Jejellopys?";
					next;
					if (select("Yeah, sure.:Nope.") == 2) {
						mes "[Woeon]";
						mes "Is that so. Such a shame.";
						mes "Come back when you need some work.";
						close;
					}
					mes "[Woeon]";
					mes "Good, I trust you can do it.";
					mes "Remember, 30 Jejellopys.";
					setquest 7391;
					close;
				}
			}
		}
	}
	end;
}

malaya,119,217,3	script	Blacksmith Pandoi	538,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[Pandoi]";
		mes "...Gasp!";
		mes "Go... Go away!";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7354) == 2) {
			mes "[Pandoi]";
			mes "Please..";
			mes "Couldn't you help a guy out here, just for the sake of it?";
			mes "Do you really think ignoring me is the best option?!";
			next;
			mes "[Pandoi]";
			mes "Now look here.";
			mes "Please give me just a peek..";
			mes "It's just a button...";
			close;
		} else {
			mes "[Pandoi]";
			mes "Hello there!";
			mes "I've heard of your prestige.";
			mes "I was wondering if I could receive something to prove that I've met you in person...";
			next;
			mes "[Pandoi]";
			mes "Oh... You're surprised because I'm suddenly so nice to you.";
			mes "I heard the news you fought off the ghosts.";
			mes "That's brilliant!";
			next;
			mes "[Pandoi]";
			mes "With an item of your spirit, it would scare away the ghosts, wouldn't it?";
			mes "Please, be generous, I beg you...";
			next;
			mes "-The troubled villagers desire your belongings because you fend off the ghosts. -";
			setquest 7354;
			completequest 7354;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- So many have already asked you for this. Perhaps it will be better to speak with Phong in Mumbaki.-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[Pandoi]";
		mes "Phew... Life is so tough these days.";
		mes "Why did ghosts come along to bother me so.";
		mes "I wish I had a lucky charm or something...";
		next;
		mes "[Pandoi]";
		mes "Please...";
		mes "Couldn't you help a guy out here, just for the sake of it?";
		mes "Do you really think ignoring me is the best option?!";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7361) != -1) {
			mes "[Pandoi]";
			mes "Now that I have confidence, the only thing left for me to do is charge to the hospital or field for material!";
			mes "Bu... But, I'm too scared...";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dffPrepare and give Blue Gemstone and Holy Water. ^000000";
			close;
		}
		mes "[Pandoi]";
		mes "Wh, what, you've finally decided to help me?!";
		mes "You're going to give Pandoi a gift of peace?!";
		next;
		select ("Give the prepared items.");
		mes "[Pandoi]";
		mes "Great! I knew you'd come back!";
		mes "Yes... Now that I have some of your spirit, I can rest well at night.";
		next;
		mes "- Gave Pandoi the Holy Water and Blue Gemstone.-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7361;
		completequest 7361;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-With Pandoi as last, I think I've given enough Holy Artifacts.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[Pandoi]";
		mes "Sil... Silver. I need silver, please.";
		mes "I thought I could get the silver once the ghosts are gone, but I can't...";
		close;
	} else {
		mes "[Pandoi]";
		switch(rand(1, 6)) {
		case 1:
			mes "You know. " + $malayaNames$[1] + ". You are my hero for becoming stronger. I look up to you!";
			break;
		case 2:
			mes "I've seen you, " + $malayaNames$[1] + " beating those Jejelings outside the town. The energy... I... I was so impressed!";
			break;
		case 3:
			mes "You, " + $malayaNames$[0] + ", lit up my soul. It sparkles, you know. No? You don't?";
			break;
		case 4:
			mes "As far as I can see, recently, " + $malayaNames$[1] + " is the most diligent person around. He's like a god of hard work.";
			break;
		case 5:
			mes $malayaNames$[5] + "made a huge discovery. A dragon, they say.";
			break;
		case 6:
			mes "Hello there?!";
			break;
		}
		next;
		switch (select("Give Spiritual Protection.:Silver Blade.:Silver Cross")) {
		case 1:
			if ((checkquest(7374) == -1) || (checkquest(7370) == -1)) {
				mes "[Pandoi]";
				mes "I appreciate you taking care of the expiration dates of my Spiritual Protection.";
				mes "I think mine's good for now. ";
				mes "When it wear's out, I'll ask you for another one!";
				close;
			}
			if (!countitem(6503)) {
				mes "^4d4dffThere is no Spiritual Protection to give to Pandoi.^000000";
				close;
			}
			mes "[Pandoi]";
			mes "Good. A new Spiritual Protection.";
			mes "It's always good to know that you won't see those black things again!";
			next;
			mes "-Delivered Spiritual Protection to Pandoi.-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7370;
			setquest 7384;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "-With Pandoi as last, all Spiritual Protections have been delivered.-";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		case 2:
			if (BaseLevel < 100) {
				mes "[Pandoi]";
				mes "Hmm... To make a Silver Blade, you need silver.";
				mes "I could melt Silver Bracelets to get silver.";
				mes "Silver Bracelets can be acquired at the hospital.";
				next;
				mes "[Pandoi]";
				mes "However, I don't think you can make it right now. I'm sorry, it's just too much for you!";
				mes "If you go in there like that... You'll never make it out alive!";
				close;
			}
			.@hunting = checkquest(7393, HUNTING);
			if (.@hunting == 2) {
				if (countitem(6508) < 10) {
					mes "[Pandoi]";
					mes "Where are the Silver Bracelets?";
					mes "I know you're invincible...";
					mes "But I must have a Silver Bracelet to make a Silver Blade.";
					next;
					mes "[Pandoi]";
					mes "10 Silver Bracelets!";
					mes "Regardless of how many of them you hinder, I need 10 Silver Bracelets!!";
					mes "Now it is in your hands!";
					close;
				}
				mes "[Pandoi]";
				mes "Respect, all the way!";
				mes "You fought them off and brought the Silver Bracelets as well.";
				next;
				mes "[Pandoi]";
				mes "From this day on, I shall try to smelt a new silver weapon..!!";
				mes "I will pound and beat at them until I am left with a fine silver blade in my hands...!!";
				next;
				mes "[Pandoi]";
				mes "It's not much, but here's something for the troubles you went through to get the Silver Bracelets.";
				mes "If I fail... I'll ask of you the task again!";
				delitem 6508, 10; //Silver_Bracelet
				setquest 7394;
				erasequest 7393;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(3))
					$malayaNames$[1] = strcharinfo(0);
				close;
			} else if (.@hunting == 0 || .@hunting == 1) {
				mes "[Pandoi]";
				mes "The village hospital holds the most hideous things inside.";
				mes "I'm not sure what exactly... Whatever's in there, I'm not willing to go near it...";
				next;
				mes "[Pandoi]";
				mes "Please get rid of those rumored monsters and get those Silver Bracelets.";
				mes "You're the only one I can trust!";
				close;
			} else {
				.@playtime = checkquest(7394, PLAYTIME);
				if (.@playtime == 0 || .@playtime == 1) {
					mes "[Pandoi]";
					mes "I still have some silver to smelt.";
					mes "I'll request more if I fail again.";
					close;
				} else if (.@playtime == 2) {
					erasequest 7394;
					mes "[Pandoi]";
					mes "Oh... what am I to do?";
					mes "I've wasted the precious materials you brought back for me...";
					next;
					mes "[Pandoi]";
					mes "Maybe I'm not supposed to be a blacksmith!";
					mes "I'm good with crafting silver, though!";
					next;
					if (select("I'll get you the materials. Cheer up.:Give up. It's a lot easier when you do.") == 2) {
						mes "[Pandoi]";
						mes "... You're right...";
						mes "I'll never be able to make a Silver Blade...";
						mes "Give up... I thought you'd cheer me up.. I'm a little disappointed in you.";
						close;
					}
					mes "[Pandoi]";
					mes "I knew I could count on you!";
					mes "I knew I could count on you!";
					mes "10 Silver Bracelets, please.";
					setquest 7393;
					next;
					mes "[Pandoi]";
					mes "Pandoi will always smile at you~";
					mes "*Grin*";
					close;
				} else {
					mes "[Pandoi]";
					mes "Silver Blade!";
					mes "It's great. Wonderful! The holy blade to carve all evil with one stroke...!";
					next;
					mes "[Pandoi]";
					mes "I want to be a noted blacksmith by making a Silver Blade.";
					mes "However, I cannot get the materials.";
					next;
					mes "[Pandoi]";
					mes "I heard that they wore silver bracelets as recognition at the hospital.";
					mes "But when I got there, it was not the hospital that I used to know.";
					next;
					mes "[Pandoi]";
					mes "Could you slay the horrible creepers and get me the Silver Bracelets?";
					next;
					if (select("Indeed!:No. Way.") == 2) {
						mes "[Pandoi]";
						mes "... You're right...";
						mes "I'll never make a Silver Blade...";
						mes "Such plain expression of disgust. You know what? I hate the idea now.";
						close;
					}
					mes "[Pandoi]";
					mes "I knew it!";
					mes "Teach those things at the hospital some manners...";
					mes "And bring back 10 Silver Bracelets, please.";
					setquest 7393;
					next;
					mes "[Pandoi]";
					mes "Pandoi will always smile at you~";
					mes "*Grin*";
					close;
				}
			}
		case 3:
			mes "[Pandoi]";
			mes "You need Silver Crosses?";
			mes "Pandoi will make them for you!";
			mes "Still, I cannot create something out of the blue, so I'll be needing some silver.";
			next;
			mes "[Pandoi]";
			mes "I could make one Silver Cross for ^4d4dff2 Silver Bracelets^000000 the monsters hold there...";
			mes "If you have Silver Bracelets, I could make Silver Crosses with them.";
			next;
			switch(select("Make 1 Silver Cross:Make 6 Silver Crosses:Input Number:Quit.")) {
			case 1:
				set .@amount,1;
			case 2:
				if (!.@amount) set .@amount,6;
				if (countitem(6508) < (.@amount * 2)) {
					mes "[Pandoi]";
					mes "You need at least " + (.@amount * 2) + " Silver Bracelets to make " + .@amount + " Silver " + ((.@amount == 1) ? "Cross" : "Crosses") + ".";
					close;
				}
				set .@time,5;
				break;
			case 3:
				mes "[Pandoi]";
				mes "How many Silver Crosses do you need?";
				mes "I can make up to 50 at a time.";
				next;
				input .@amount;
				if (.@amount == 0) {
					mes "[Pandoi]";
					mes "Don't need Silver Crosses?";
					mes "Well, I can take a rest then. Ha ha ha ha~";
					close;
				} else if (.@amount > 50) {
					mes "[Pandoi]";
					mes "A maximum of 50 at a time!";
					close;
				}
				if (countitem(6508) < (2 * .@amount)) {
					mes "[Pandoi]";
					mes "To make " + .@amount + " Silver " + ((.@amount == 1) ? "Cross" : "Crosses") + ", I need at least " + (2 * .@amount) + " Silver Bracelets.";
					close;
				}
				set .@time,15;
				break;
			case 4:
				mes "[Pandoi]";
				mes "I'll be here if you need me!";
				close;
			}
			mes "[Pandoi]";
			mes "It'll take just a second.";
			mes "Pandoi can do it in a jiffy!";
			close2;
			progressbar "0xffff00", .@time;
			delitem 6508, .@amount * 2; //Silver_Bracelet
			getitem 6502, .@amount; // Silver_Cross
			mes "[Pandoi]";
			mes "Look at this!";
			mes "Very nice indeed.";
			mes "I should've been a craftsman, not a blacksmith!";
			close;
		}
	}
	end;
}

malaya,326,68,2	script	Pedro the Sailor	100,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[Pedro the Sailor]";
		mes "Oh... This ship's not in service.";
		mes "Or rather, it can't set sail. *Snigger*";
		mes "I'm seeing ghosts. I think it's my time to die.";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7352) == 2) {
			mes "- Pedro the Sailor seems to have given up, but he can't take his gaze off of me.-";
			close;
		}
		mes "[Pedro the Sailor]";
		mes "Oh, you're th... The one who fends off ghosts at the wave of a hand?!";
		mes "Could you stay for a bit and hear me out?!";
		next;
		if (select("Sorry.:Sure.") == 1) {
			mes "[Pedro the Sailor]";
			mes "Oh, a solid denial.";
			mes "You just impaled my last glimpse of hope.";
			mes "Maybe I wasn't persuasive enough...";
			close;
		}
		mes "[Pedro the Sailor]";
		mes "Straight to the point, this town is a den of ghosts!";
		mes "Sigh... I've been a sailor for quite a while and went to a lot of places, but this I never experienced before.";
		next;
		mes "[Pedro the Sailor]";
		mes "You see that ship there?";
		mes "It's a small ferry, but it also stopped service because of these darn ghosts!";
		next;
		mes "[Pedro the Sailor]";
		mes "It looks okay from the outside, but it's full of ghost, I tell ya.";
		mes "But the way I heard it, they're afraid of you, right?";
		next;
		select ("Oh no, you too...:Not my buttons!");
		mes "[Pedro the Sailor]";
		mes "I see many have already asked you for some of your stuff for charms, huh.";
		mes "Can I budge in that line too?";
		next;
		mes "[Pedro the Sailor]";
		mes "I need to have some sincere conversations with that ghost over there.";
		mes "But the spirit is too strong for me to approach.";
		next;
		mes "[Pedro the Sailor]";
		mes "...........That was a lame story.";
		mes "And it's not easy to give away your stuff to someone else.";
		next;
		mes "- Pedro the Sailor seems to have given up, but he can't take his gaze off of me.-";
		setquest 7352;
		completequest 7352;
		if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
			next;
			mes "- So many have already asked you for this. Perhaps it will be better to speak with Phong in Mumbaki. -";
			set malaya_hi, 11;
			setquest 7358;
		}
		close;
	} else if (malaya_hi == 11) {
		mes "[Pedro the Sailor]";
		mes "Sigh...";
		mes "This is so awkward.";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7359) != -1) {
			mes "[Pedro the Sailor]";
			mes "Anyway, now that I have what they hate...";
			mes "Now's the time to charge into my ship...!";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dffPrepare and give Blue Gemstone and Holy Water.^000000";
			close;
		}
		mes "[Pedro the Sailor]";
		mes "What? I can sense something refreshing in your hands. What is it?";
		next;
		mes "[Pedro the Sailor]";
		mes "You're giving it to me?";
		mes "Ghosts will hate it?";
		mes "That's wonderful news!";
		next;
		mes "[Pedro the Sailor]";
		mes "Pedro, at your service!";
		mes "After you're finished with the ghosts here, I'll take on my ship to the end of the world!";
		next;
		mes "- Gave Pedro the Sailor the Holy Water and Blue Gemstone. -";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7359;
		completequest 7359;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-With Pedro the Sailor as last, I think I gave enough Holy Artifacts.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[Pedro the Sailor]";
		mes "Anyway, now that I have what they hate...";
		mes "Now's the time to charge into my ship...!";
		next;
		mes "-Pedro the Sailor looks determined.-";
		close;
	} else {
		mes "[Pedro the Sailor]";
		mes "Whoa... Did you see that?";
		mes "Those black souls just came up and disappeared.";
		mes "Well, living the dream, eh?";
		next;
		if (select("Give Spiritual Protection.:About the Ferry Ride") == 1) {
			if ((checkquest(7374) == -1) || (checkquest(7368) == -1)) {
				mes "[Pedro the Sailor]";
				mes "The Spiritual Protection you gave me before works fine.";
				mes "I'm good for now.";
				mes "It's still up for the fight!";
				close;
			}
			if (!countitem(6503)) {
				mes "^4d4dffThere is no Spiritual Protection to give to Pedro the Sailor.^000000";
				close;
			}
			mes "[Pedro the Sailor]";
			mes "A newly made Spiritual Protection.";
			mes "Alright. I'll go at them with this one today.";
			next;
			mes "-Delivered the Spiritual Protection to Pedro the Sailor.-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7368;
			setquest 7382;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "-With Pedro the Sailor as last, all Spiritual Protections have been delivered.-";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		}
		if (BaseLevel < 100) {
			mes "[Pedro the Sailor]";
			mes "Hmm... Don't you remember me talking about ghosts?";
			mes "The Ferry is full of ghosts.";
			mes "Wait, was it one or many?";
			next;
			mes "[Pedro the Sailor]";
			mes "Whatever. For you and your current condition, it's out of the question.";
			mes "Yes. You can't do it. You'll be dragged out in a body bag.";
			next;
			mes "[Pedro the Sailor]";
			mes "Now I'm not going to stand here and wait for that to happen. No way.";
			close;
		}
		if (malaya_diwata == 0) {
			mes "[Pedro the Sailor]";
			mes "I'm sorry, but didn't I say something about ghosts over there?";
			mes "It can't set sail because of that.";
			next;
			mes "[Pedro the Sailor]";
			mes "So what's this whole ghost story about?";
			mes "Hmmm..........";
			mes "It's a long story...";
			next;
			if (select("I'm listening.:Maybe later.") == 2) {
				mes "[Pedro the Sailor]";
				mes "I knew it.";
				mes "Though, it's not such a boring story.";
				mes "After all, it is a ghost story.";
				close;
			}
			mes "[Pedro the Sailor]";
			mes "The story goes back to when I first made port here.";
			mes "It was a nerve racking first time as a liner manager.";
			next;
			mes "[Pedro the Sailor]";
			mes "I was ready to disembark when I saw something I simply could not believe.";
			mes "Black haze was swarming to the port from all over town.";
			next;
			mes "[Pedro the Sailor]";
			mes "At first, I thought it was just a very thick smog.";
			mes "As the days went by, it became clear as to what it was.";
			mes "It was a swarm of souls.";
			next;
			mes "[Pedro the Sailor]";
			mes "A very unpleasant group of souls indeed.";
			mes "Some were wailing some horrible cries around the Ferry about to set sail...";
			next;
			mes "[Pedro the Sailor]";
			mes "After that incident, that ship stayed on that spot until this day.";
			mes "Why? Because they took over the ship! It's haunted!";
			next;
			mes "[Pedro the Sailor]";
			mes "If you don't believe me, see for yourself.";
			mes "Then you'll believe me.";
			set malaya_diwata, 1;
			setquest 7395;
			close;
		} else if (malaya_diwata == 1) {
			mes "[Pedro the Sailor]";
			mes "If you want to know, go and see for yourself and get on it.";
			close;
		} else if (malaya_diwata == 2) {
			mes "[Pedro the Sailor]";
			mes "Soul of a Little Girl?";
			mes "What about all them bullying ones?";
			mes "They came and went?";
			next;
			mes "[Pedro the Sailor]";
			mes "I don't understand.";
			mes "Maybe the Leader Mumbaki will know what to do.";
			close;
		} else if (malaya_diwata == 3) {
			mes "[Pedro the Sailor]";
			mes "Hmm... A floral tribute to soothe the soul....";
			mes "You want to hear its story after it calms down?";
			mes "Well... Good luck.";
			next;
			mes "[Pedro the Sailor]";
			mes "It can't be helped for the Ferry to set sail again.";
			mes "I can't go near it because of those mean ones.";
			next;
			mes "[Pedro the Sailor]";
			mes "Now I'm asking you to do this not because I can't be bothered,";
			mes "but because I simply can't do it myself.";
			close;
		} else if (malaya_diwata == 4) {
			mes "[Pedro the Sailor]";
			mes "Did Mumbaki bless the flower?";
			mes "I hope this works...";
			mes "I wish you all the luck!!";
			next;
			mes "[Pedro the Sailor]";
			mes "I hope you can negotiate with success!";
			mes "I'll take care of those rude ones outside the ship the best I can.";
			close;
		} else if (malaya_diwata == 5) {
			mes "[Pedro the Sailor]";
			mes "I see.";
			mes "Perhaps the Ferry can move again...";
			mes "Thank you for all you've done for us.";
			next;
			mes "[Pedro the Sailor]";
			mes "I'd better get ready to set sail then.";
			mes "It's not much, but this is for you.";
			mes "If we can get back in business, I'll take you to Izlude for just 1000z.";
			set malaya_diwata, 6;
			erasequest 7399;
			setquest 7401;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 6497, 2; // Lesser_Agimat
			else
				getitem 6497, 1; // Lesser_Agimat
			getexp 200000,200000;
			if (!rand(3))
				$malayaNames$[0] = strcharinfo(0);
			close;
		} else {
			.@playtime = checkquest(7401, PLAYTIME);
			if (.@playtime == 0 || .@playtime == 1) {
				mes "[Pedro the Sailor]";
				mes "If you want to go to Alberta, use the big ship over there.";
				mes "This little one goes to Izlude.";
				mes "That will be 1000z.";
				next;
				if (select("Use.:That's a rip off!") == 2) {
					mes "[Pedro the Sailor]";
					mes "What?!";
					mes "How much do you pay for the Alberta Liner to get here!?";
					mes "Call this a rip off... You think I'm doing charity?";
					close;
				}
				if (Zeny < 1000) {
					mes "[Pedro the Sailor]";
					mes "The price is 1000 zeny.";
					mes "I can't help you there~";
					close;
				}
				mes "[Pedro the Sailor]";
				mes "Thank you~";
				mes "Let's go before the ghosts come back!";
				set Zeny, Zeny - 1000;
				close2;
				warp "izlude",195,180;
				end;
			} else if (.@playtime == 2) {
				erasequest 7401;
				goto L_SetQuest;
			} else {
				if (checkquest(7403) == -1) {
					if (checkquest(7402) == -1) {
						goto L_SetQuest;
					}
					mes "[Pedro the Sailor]";
					mes "You know what to do.";
					mes "Gather the flowers and take it to Mumbaki to get an Offering Bouquet made.";
					next;
					mes "[Pedro the Sailor]";
					mes "Give the Bouquet to Miss Diwata to cheer her up.";
					mes "....Thank you.";
					close;
				}
				mes "[Pedro the Sailor]";
				mes "Diwata is calm!";
				mes "I can even feel the difference out here.";
				mes "I am always in your debt.";
				next;
				mes "[Pedro the Sailor]";
				mes "You know what? Why don't you do this on a more regular basis?";
				mes "I think you kind of like doing it.";
				setquest 7401;
				erasequest 7403;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(3))
					$malayaNames$[0] = strcharinfo(0);
				close;
			}
		}
	}
	end;

L_SetQuest:
	mes "[Pedro the Sailor]";
	mes "Ah, the thing is...";
	mes "We can't go right now..";
	mes "You see, the ghosts are back...";
	mes "I'm fed up with nuisance.";
	next;
	mes "[Pedro the Sailor]";
	mes "I mean... Miss Diwata... Isn't feeling very well and, even with the Spiritual Protection";
	mes "a normal person can't stand it.";
	next;
	if (select("I see. Take care then.:How about a Floral Tribute?") == 1) {
		mes "[Pedro the Sailor]";
		mes "I'm glad you understand.";
		mes "Sigh...";
		close;
	}
	mes "[Pedro the Sailor]";
	mes "Hmmm. That would be nice.";
	mes "If she can be soothed with flowers...!";
	mes "Good luck.";
	setquest 7402;
	close;
}

ma_in01,125,107,3	script	Ghost Diwata	1761,4,4,{
	end;
OnTouch:
	if (malaya_diwata == 0) {
		cutin "malaya_diwata01", 2;
		mes "- A creepy Little Girl is standing.";
		mes "As our eyes meet, a chill runs down my spine with goose bumps all over. -";
		next;
		mes "[Diwata]";
		mes "Are you here to bully Diwata too?";
		mes "I won't have it!";
		next;
		cutin "", 255;
		mes "-I was thrown out after the Little Girl's low creepy voice and flash from her eyes.-";
		close;
		warp "malaya", 324, 66;
		end;
	} else if (malaya_diwata == 1) {
		cutin "malaya_diwata01", 2;
		mes "- A creepy Little Girl is standing.";
		mes "As our eyes meet, a chill runs down my spine with goose bumps all over. -";
		next;
		mes "[Diwata]";
		mes "Are you here to bully Diwata too?";
		mes "I won't have it!";
		next;
		select ("Wait! I just want to talk!");
		mes "[Diwata]";
		mes "Then who are they behind you?";
		mes "You're one of them!";
		next;
		cutin "malaya_ghost01", 4;
		mes "- Familiar souls are approaching Diwata. -";
		next;
		if (select("It's a misunderstanding!:You're from that..!") == 2) {
			cutin "malaya_ghost02", 4;
			mes "[" + strcharinfo(0) + "]";
			mes "Just as I thought! You're afraid of me?!";
			mes "Stand aside!";
			mes "I need to talk to her.";
			next;
			cutin "malaya_diwata01", 2;
			mes "[Diwata]";
			mes "I don't know why they're backing away...";
			mes "You get out of my sight too!";
			next;
			cutin "", 255;
			mes "-I was thrown out after the Little Girl's annoyed cry and flash from her eyes.-";
			set malaya_diwata, 2;
			setquest 7396;
			erasequest 7395;
			close2;
			warp "malaya", 324, 66;
			end;
		}
		cutin "malaya_diwata01",2;
		mes "[Diwata]";
		mes "Enough!";
		next;
		cutin "", 255;
		mes "-I was thrown out after the Little Girl's resolute cry and flash from her eyes.-";
		set malaya_diwata, 2;
		setquest 7396;
		erasequest 7395;
		close2;
		warp "malaya", 324, 66;
		end;
	} else if ((malaya_diwata == 2) || (malaya_diwata == 3)) {
		cutin "malaya_diwata01", 2;
		mes "[Diwata]";
		mes "You crawled back in?";
		mes "Get out-!!!!!";
		next;
		cutin "", 255;
		mes "-I was thrown out after the Little Girl's screeching cry and flash from her eyes.-";
		close;
		warp "malaya", 324, 66;
		end;
	} else if (malaya_diwata == 4) {
		if (!countitem(6506)) {
			cutin "malaya_diwata01", 2;
			mes "- The soul of Little Girl Diwata is looking at me fiercely.";
			mes "No Offering Bouquet...!!!";
			next;
			cutin "", 255;
			mes "-I was thrown out with a remote look from her.-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		mes "- The soul of Little Girl Diwata is looking at me fiercely. -";
		mes "- The Offering Bouquet... -";
		cutin "malaya_diwata01", 2;
		next;
		if (select("Throw it to the Little Girl.:Slide it across on the floor.") == 1) {
			mes "- I threw the bouquet before she could toss me out, and she catches in surprise...";
			mes "She won't toss me... far, now that she has the flower.-";
		} else {
			mes "- I slid the flower across the floor to her. She looks puzzled. -";
		}
		next;
		mes "[Diwata]";
		mes "What is the meaning of this?";
		mes "You're not an enemy?";
		next;
		mes "[Diwata]";
		mes "What? You're an outsider too?";
		mes "Ha, so live ones are allowed and I'm not?";
		next;
		mes "[Diwata]";
		mes "Now there's the stereotype of countryside people over outsiders.";
		mes "I am so annoyed. I feel like wiping them off the map.";
		next;
		mes "[Diwata]";
		mes "What? I shouldn't?";
		mes "Why should I not?";
		mes "I'm stalling the ship?";
		next;
		mes "[Diwata]";
		mes "I was going to hear you out because of the flowers";
		mes "but you're telling me lies?!";
		next;
		mes "[Diwata]";
		mes "So you're saying that I brought these hillbillies on this ship";
		mes "and that fighting with them is causing the stall?";
		next;
		mes "[Diwata]";
		mes "... Hmm... Humph. It wasn't what I was intending to do.";
		mes "But they're the ones who're getting on my nerves!";
		next;
		mes "[Diwata]";
		mes "... I can't get off anyway.";
		mes "Which means that I could feel bad again. Got it?";
		next;
		mes "[Diwata]";
		mes "... I'll try to keep it in today.";
		mes "It's not because I like the flowers or because I like having company!";
		mes "It's because I was treated the same way as those cheap ghosts!";
		next;
		mes "[Diwata]";
		mes "Now if you'll excuse me.";
		mes "And I'll be clear. I'm not going to hold my temper for so long.";
		next;
		mes "[Diwata]";
		mes "Now, g... go away!";
		set malaya_diwata, 5;
		delitem 6506, 1; // Memorial_Boquet
		erasequest 7398;
		setquest 7399;
		close3;
	} else if (malaya_diwata == 5) {
		cutin "malaya_diwata02", 2;
		mes "[Diwata]";
		mes "I promise I'll be a good little girl if those hillbillies leave me alone.";
		mes "If they bother me again, however, I won't be.";
		close3;
	} else {
		if (checkquest(7402) == -1) {
			if (checkquest(7403) == -1) {
				if ((checkquest(7401, PLAYTIME) == 0) || (checkquest(7401, PLAYTIME) == 1)) {
					cutin "malaya_diwata02", 2;
					mes "[Diwata]";
					mes "Surprisingly enough, I'm doing fine.";
					mes "Of course I'm tense for when they return,";
					mes "but, as always, I'll win.";
					next;
					mes "[Diwata]";
					mes "Then the poor crew will cry again";
					mes "I just can't calm myself down after a fight.";
					next;
					mes "[Diwata]";
					mes "The flowers you bring makes me calm down.";
					mes "....";
					mes ".. It's not because I miss people or I like the flowers. Don't take it the wrong way.";
					close3;
				}
				cutin "malaya_diwata01", 2;
				mes "[Diwata]";
				mes "Get lost!";
				mes "What? Oh, it's you.";
				mes "Those hillbillies came back again!";
				mes "I'm going to kill them!";
				close3;
			}
			cutin "malaya_diwata02", 2;
			mes "[Diwata]";
			mes "It's good to look at flowers from abroad~";
			mes "Do all flowers from the warm parts of the world smell so nice?";
			next;
			mes "[Diwata]";
			mes "The flowers you bring makes me calm down.";
			mes "....";
			mes ".. It's not because I miss people or I like the flowers. Don't take it the wrong way.";
			close3;
		}
		cutin "malaya_diwata01", 2;
		mes "[Diwata]";
		mes "Darn it! Have you come for more?!";
		mes "What?";
		mes "Oh. It's you?";
		mes "I'm really depressed right now.";
		next;
		mes "- Diwata reached her hands out as if expecting something. -";
		next;
		if (select("Give the Bouquet.:Hold her hand.") == 2) {
			mes "[Diwata]";
			mes "What do you think you're doing?!!??!?!!";
			mes "Arghhhh - I have enough creeps around here, thank you!!";
			next;
			cutin "", 255;
			mes "-I was tossed out with Diwata's thunderous cry.-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		if (!countitem(6506)) {
			mes "[Diwata]";
			mes "What? You want me to wave?";
			mes "You didn't bring it?";
			mes "You didn't?!?";
			mes "Arghhh you just can't trust anybody! Anybody!";
			next;
			cutin "", 255;
			mes "-I was tossed out with Diwata's thunderous cry.-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		cutin "malaya_diwata02", 2;
		mes "[Diwata]";
		mes "... Oh... Just as I thought!";
		mes "My only happiness, my only peace of mind..!";
		mes "Flowers from abroad~!";
		next;
		mes "-Diwata seems to feel better. The atmosphere shifts to a more refreshing ambience.-";
		next;
		mes "[Diwata]";
		mes "Tell Pedro the Sailor!";
		mes "Diwata will be a goddess of sea, so set sail in my generosity.";
		delitem 6506, 1; // Memorial_Boquet
		setquest 7403;
		erasequest 7402;
		close3;
	}
	cutin "", 255;
	end;
}

ma_fild01,261,208,2	script	Kiko in Mumbaki	580,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	mes "[Kiko in Mumbaki]";
	mes "Welcome to Baryo, stranger.";
	mes "I am the soul guidance, protector of people and souls here at Baryo.";
	mes "So, I'm a good leader Kiko in Mumbaki.";
	next;
	switch (select("Give Cast-Iron Caldron.:Request Purification Ritual.:Exchange Jellopy for gold.")) {
		case 1:
			if (checkquest(7376) == -1) {
				if (checkquest(7377) == -1) {
					mes "[Kiko in Mumbaki]";
					mes "What cauldron?";
					mes "As far as I know, you're not the one bringing it.";
					next;
					mes "[Kiko in Mumbaki]";
					mes "Poor thing.";
					mes "do not live a life of lies.";
					close;
				}
				mes "[Kiko in Mumbaki]";
				mes "Baryo is not a great place for smithy work.";
				mes "So we always ask a favor to the forge of Malaya.";
				next;
				mes "[Kiko in Mumbaki]";
				mes "Bakonawa does not like loud noises.";
				mes "That's why we beat the sturdy Cast Iron Cauldrons.";
				next;
				mes "[Kiko in Mumbaki]";
				mes "The Spiritual Protection is proof that I've got my cauldron,";
				mes "so deliver it well. Okay? Good.";
				close;
			}
			if (countitem(6504) < 5) {
				mes "[Kiko in Mumbaki]";
				mes "Oh, must be the cauldron I ordered.";
				mes "But, where is it?";
				mes "Are you mocking me?!";
				close;
			}
			mes "[Kiko in Mumbaki]";
			mes "Yes, excellent!";
			mes "Very Good.";
			mes "We can aggravate the Bakonawa more with this.";
			next;
			mes "[Kiko in Mumbaki]";
			mes "I'll give you this for the cauldron.";
			mes "I hear you're having some trouble with souls?";
			mes "Take this. It will help you.";
			delitem 6504, 5; // Cast_Iron_Caldron
			getitem 6503, 5; // Soul_Protection
			setquest 7377;
			erasequest 7376;
			close;
		case 2:
			if (checkquest(7406) == -1) {
				if (checkquest(7407) == -1) {
					mes "[Kiko in Mumbaki]";
					mes "The only purification needed in this village is Vantai's food.";
					mes "There are no rituals where an outsider, like yourself, can take part in.";
					close;
				}
				mes "[Kiko in Mumbaki]";
				mes "Vantai must be hungry.";
				mes "Go give it to him.";
				mes "Quickly now.";
				close;
			}
			if ((countitem(523) < 10) || (countitem(6507) < 10)) {
				mes "[Kiko in Mumbaki]";
				mes "Purification of the bones the Guard Dog Vantai needs to gnaw on?";
				mes "My work here just gets better and better.";
				next;
				mes "[Kiko in Mumbaki]";
				mes "Go into the forest and fetch me ^4d4dff10 Evil Spirit Bones^000000 and ^4d4dff10 Holy Waters^000000 for the purification ritual.";
				mes "I'll do the ritual myself.";
				close;
			}
			mes "[Kiko in Mumbaki]";
			mes "Bones from the animals of this forest all have bad spirits within.";
			mes "Of course it cannot be helped due to the malignant spirits flailing about...";
			next;
			mes "[Kiko in Mumbaki]";
			mes "You do this and do this here and there and...";
			mes "There. The evil spirit has left and the bone is so pure that you can just chew on it.";
			next;
			mes "[Kiko in Mumbaki]";
			mes "Now, take this back to Dong the Guard.";
			mes "Vantai will become stronger after eating this purified Evil Spirit Bone.";
			next;
			mes "[Kiko in Mumbaki]";
			mes "Moreover, holding on to Evil Spirit Bones will only do you harm,";
			mes "so I'll take them all to purify.";
			delitem 6507, countitem(6507); // Evil_Bone
			delitem 523, 10; //Holy_Water
			getitem 6505, 10; //Purified_Bone
			setquest 7407;
			erasequest 7406;
			close;
		case 3:
			mes "[Kiko in Mumbaki]";
			mes "Oh no you don't!";
			mes "Don't you dare!";
			close;
	}
	end;
}

ma_fild01,239,253,3	script	Dhong the Guard	570,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	mes "[Dhong the Guard]";
	mes "Hi there!";
	mes "Welcome to Baryo.";
	next;
	if (select("You're job seems so hard~:Guard Dog Vantai") == 1) {
		mes "[Dhong the Guard]";
		mes "Not at all. I just watch who comes and goes from here.";
		mes "Travelers are the ones who go through more hardship.";
		close;
	}
	if (BaseLevel < 100) {
		mes "[Dhong the Guard]";
		mes "Vantai is a nice dog.";
		mes "He's probably stronger than you.";
		next;
		mes "[Dhong the Guard]";
		mes "No offense, but";
		mes "you look weaker than the original owners of the bones Vantai chews on.";
		next;
		mes "[Dhong the Guard]";
		mes "That means just about as strong as me!";
		mes "Ha ha ha ha ha ha ha!";
		close;
	}
	.@playtime = checkquest(7408, PLAYTIME);
	if (.@playtime == 0 || .@playtime == 1) {
		mes "[Dhong the Guard]";
		mes "The bones you brought Vantai gave him a feast.";
		mes "He'll be full and merry for a while now.";
		mes "Nobody can beat Vantai in recon around here.";
		next;
		mes "[Dhong the Guard]";
		mes "Though it is not nice to say a person is lesser than a dog,";
		mes "but there are some who are lesser.";
		close;
	} else if (.@playtime == 2) {
		erasequest 7408;
		mes "[Dhong the Guard]";
		mes "Vantai?";
		mes "Always the same.";
		mes "Now that you mention it, it's almost time for him to get hungry.";
		next;
		mes "[Dhong the Guard]";
		mes "Of course, he eats normal dog food, but he can't go without those.";
		mes "You know what I mean, right?";
		mes "Smirk...";
		next;
		mes "[Dhong the Guard]";
		mes "Me and Vantai are always waiting";
		mes "for the hero to get us some Evil Spirit Bones from the forest.";
		close;
	} else {
		if (checkquest(7406) != -1) {
			mes "[Dhong the Guard]";
			mes "What I'm saying is that, to be a good guard dog, he must be able to stand ground against evil spirits.";
			mes "For that he needs to eat Evil Spirit Bones, but it must be purified before he can eat them.";
			next;
			mes "[Dhong the Guard]";
			mes "You can get Evil Spirit Bones from monsters or animals in the forest.";
			mes "Kiko in Mumbaki will purify them for you.";
			close;
		} else {
			if (checkquest(7407) == 1) {
				if (countitem(6505) < 10) {
					mes "[Dhong the Guard]";
					mes "Kiko in Mumbaki asked for 10 Purified Spirit Bones.";
					mes "He needs to have at least 10 at a time. Which of course does not last a day...";
					close;
				}
				mes "[Dhong the Guard]";
				mes "Hey, Vantai will love these!";
				mes "It's all in good condition...";
				mes "An evil bone purified through holy ritual...";
				next;
				mes "[Dhong the Guard]";
				mes "This is the perfect dog food!!";
				mes "Now he can sense and detect evil spirits,";
				mes "and since he ate purified ones, he'll get the ability to eradicate them.";
				next;
				mes "[Dhong the Guard]";
				mes "I bet he's the strongest living thing in the village now.";
				mes "Of course not me. I mean Vantai.";
				next;
				mes "[Dhong the Guard]";
				mes "This is your reward.";
				mes "It would be very nice if you could help us again tomorrow.";
				delitem 6505, 10; // Purified_Bone
				setquest 7408;
				erasequest 7407;
				if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
					getitem 6497, 2; // Lesser_Agimat
				else
					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(0, 2))
					$malayaNames$[2] = strcharinfo(0);
				close;
			} else {
				mes "[Dhong the Guard]";
				mes "Vantai is not only a guard dog, but he's also a great detector and recon scout.";
				mes "But for him to do so, he needs to eat Purified Spirit Bones.";
				next;
				mes "[Dhong the Guard]";
				mes "As you can see, I can't move from here,";
				mes "so I was wondering if you can get the bones for Vantai...";
				next;
				if (select("Alright.:Sorry.") == 2) {
					mes "[Dhong the Guard]";
					mes "I see.";
					mes "Vantai!";
					mes "No treat for you today..!!";
					next;
					mes "- It seems like Vantai's eyes are more moist today. -";
					close;
				}
				mes "[Dhong the Guard]";
				mes "Bones can be acquired from animals or monsters around here.";
				mes "Take them to Kiko in Mumbaki for purification, which, in turn, can be given to Vantai to eat.";
				next;
				mes "[Dhong the Guard]";
				mes "Bring us 10 Purified Spirit Bones.";
				mes "That reminds me. You'll need Holy Water for the purification ritual.";
				next;
				mes "[Dhong the Guard]";
				mes "Take your time.";
				mes "Look here. Vantai likes it too.";
				setquest 7406;
				close;
			}
		}
	}
	end;
}

ma_fild01,238,257,2	script	Guard Dog Vantai	972,{
	mes "[Vantai]";
	mes "Grrrrrrr...";
	mes " ";
	mes "(He is intimidated by you.)";
	close;
}

ma_fild01,200,190,3	script	Maries#malaya	579,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- Cannot proceed with the quest. You are carrying too many items. -";
		close;
	}
	if (BaseLevel < 100) {
		mes "[Maries]";
		mes "Umm... Hey...";
		mes "Oh, no, sorry. You don't look so strong or bold.";
		mes "I'm sorry. I'm just not quite myself...";
		close;
	}
	if (malaya_hi < 20) {
		mes "An anxious looking woman is stands.";
		close;
	}
	.@playtime = checkquest(7390, PLAYTIME);
	if (.@playtime == 0 || .@playtime == 1) {
		mes "[Maries]";
		mes "Now that the children know that they can get back home with an Inside-out Shirt,";
		mes "they play out in the forest recklessly and timelessly.";
		next;
		mes "[Maries]";
		mes "The children will surely get lost again in these conditions.";
		mes "If it happens again, I'll seek your help again.";
		close;
	} else if (.@playtime == 2) {
		mes "[Maries]";
		mes "I'm missing a child... again.";
		mes "Oh my goodness...";
		erasequest 7390;
		close;
	} else {
		if (checkquest(7389) != -1) {
			mes "[Maries]";
			mes "You came back.";
			mes "Thanks to you, the child has returned home safely.";
			next;
			mes "[Maries]";
			mes "Although the shirt is inside-out, it miraculously brings them back to where they should be.";
			mes "Thank you for delivering those precious shirts to my children.";
			setquest 7390;
			erasequest 7389;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 6497, 2; // Lesser_Agimat
			else
				getitem 6497, 1; // Lesser_Agimat
			getexp 200000,200000;
			if (!rand(3))
				$malayaNames$[2] = strcharinfo(0);
			close;
		} else {
			if (checkquest(7388) != -1) {
				mes "[Maries]";
				mes "I'm sure they're lost in the woods because of mischievous spirits.";
				mes "Please give the child the ^4d4dffInside-out Shirt^000000 when found.";
				next;
				mes "[Maries]";
				mes "The Inside-out Shirts...";
				mes "You can probably get them from the demons, since they ran away with them.";
				close;
			} else {
				mes "[Maries]";
				mes "Hello... I'm looking for my child...";
				mes "My daughter did not return.";
				mes "Please help, I think she's lost in the forest.";
				next;
				switch (select("Of course.:I'm too busy right now.:You have so many children.")) {
				case 1:
					mes "[Maries]";
					mes "I'm sure she's lost in the woods because of mischievous spirits.";
					next;
					mes "[Maries]";
					mes "If she's cursed, it will be difficult to get her out of there.";
					mes "She'll drift around in the maze so mesmerizing, even for you, in fact.";
					next;
					mes "[Maries]";
					mes "Acquire an ^4d4dffInside-out Shirt^000000 and give it to my daughter.";
					mes "Although the shirt is inside-out, it miraculously brings them back to where they should be.";
					next;
					mes "[Maries]";
					mes "The Inside-out Shirts...";
					mes "You can probably get them from the demons, since they ran away with them.";
					setquest 7388;
					close;
				case 2:
					mes "[Maries]";
					mes "... Yes... I see.";
					mes "I'll have to ask someone else.";
					mes "Alright.";
					mes "Sigh...";
					close;
				case 3:
					mes "[Maries]";
					mes "...I ended up having triplets.";
					mes "Even I sometimes get confused. *Chuckle*";
					next;
					mes "[Maries]";
					mes "They seem to be under a curse because one of them always get's lost in the woods..";
					mes "Sigh...";
					close;
				}
			}
		}
	}
	end;
}

ma_fild01,203,189,3	script	Little Girl#malaya	576,{
	mes "[Little Girl]";
	mes "He he, the forest is scary, but it's so much fun so I go there often to play~";
	mes "Strange, how we always get lost.";
	next;
	mes "[Little Girl]";
	mes "But it's okay because I'm not the only one getting lost~";
	mes "We're triplets~ And we're missing the other two~ Giggle~";
	close;
}

ma_fild01,251,93,3	script	Lost Child#malaya01	576,{
	if (checkquest(7388) > -1) {
		if (!countitem(12700)) {
			mes "[Little Kid]";
			mes "Sigh. Are you lost too?";
			mes "They are so naughty.";
			next;
			mes "[Little Kid]";
			mes "An Inside-out Shirt is just what I need.";
			mes "*Chuckle*...";
			close;
		}
		mes "[Little Kid]";
		mes "Oh, darn them.";
		mes "They must have tricked me into getting lost again!";
		next;
		select ("Do you want to go home?");
		mes "[Little Kid]";
		mes "If I don't get back soon, my mom will be worried sick.";
		mes "Sigh... I wish I had an Inside-out Shirt to go back.";
		next;
		select ("Here you are.");
		mes "[Little Kid]";
		mes "Really?";
		mes "It really is the shirt!";
		mes "This will take me straight home!";
		next;
		mes "[Little Kid]";
		mes "Did mom send you?";
		mes "She must be worried..!";
		mes "I'll go home now!";
		mes "Thanks' a lot!";
		delitem 12700, 1; // Insideout_Shirt
		setquest 7389;
		erasequest 7388;
		close2;
		disablenpc();
		if (strnpcinfo(0) == "Lost Child#malaya01") {
			enablenpc "Lost Child#malaya02";
		} else if (strnpcinfo(0) == "Lost Child#malaya01") {
			enablenpc "Lost Child#malaya03";
		} else {
			enablenpc "Lost Child#malaya01";
		}
		end;
	} else {
		if (checkquest(7389) != -1) {
			mes "[Little Kid]";
			mes "I want to play some more.";
			mes "I can always go back with this shirt.";
			mes "Mom won't be concerned.";
			close;
		} else {
			mes "[Little Kid]";
			mes "Hmmm. Am I lost again?";
			mes "Where am I...";
			mes "I'm sure I have to head in the direction of sunrise from the third tree to get home... Huh?";
			next;
			mes "[Little Kid]";
			mes "Why~ Do I always go in circles here?";
			mes "Do you why, " + ((Sex == SEX_MALE) ? "mister" : "ma'am") + "?";
			mes "What's with this road?";
			mes "Is somebody trying to trick me?";
			close;
		}
	}
	end;
	
OnInit:
	if (strnpcinfo(0) != "Lost Child#malaya01")
		disablenpc();
}
ma_fild01,114,141,3	duplicate(Lost Child#malaya01)	Lost Child#malaya02	576
ma_fild01,130,314,3	duplicate(Lost Child#malaya01)	Lost Child#malaya03	576

ma_fild02,241,39,5	script	Good Capre Budidai	572,{
	mes "[Budidai]";
	mes "Hey hey hey~";
	mes "I am such a nice Capre~ Hey!";
	mes "I am going to a fine cafe~YO!";
	mes "I am better than yesterday~Hey!";
	mes "I'm a fine rhyming Capre~Oh?";
	next;
	mes "[Budidai]";
	mes "Hey buddy, You here to hear Budidai singing?";
	next;
	switch (select("You like songs?:A profound study of one eyed monsters.:See ya!")) {
	case 1:
		mes "[Budidai]";
		mes "Yup, Budidai loves singing.";
		mes "Cows, horses, goats, roosters, boars all love my songs.";
		mes "They're all friends.";
		next;
		mes "[Budidai]";
		mes "Except for that one eyed Bongisungisu.";
		mes "He picks on my friends.";
		mes "I am annoyed, but Budidai is weak.";
		next;
		mes "[Budidai]";
		mes "I fear it's single gaze, but I fear more the club he flails.";
		mes "I have to sing my friends some songs, but they don't come because of him.";
		next;
		mes "[Budidai]";
		mes "So Budidai, sings here.";
		mes "Lots of travelers pass by.";
		mes "Capre is a wanderer's buddy.";
		mes "You're a buddy too.";
		close;
	case 2:
		if (BaseLevel < 100) {
			mes "[Budidai]";
			mes "You interested in that fiend, my friend?";
			mes "It's just a bully of the forest!";
			mes "It picks on my animal friends!";
			next;
			mes "[Budidai]";
			mes "Sadly, singing is all that Budidai is skilled at.";
			mes "I can't do anything about the scary gaze and the flailing club.";
			next;
			mes "[Budidai]";
			mes "Bongisungisu! I get the chills just by being in the same forest with it...";
			mes "But Budidai is weak.";
			next;
			mes "[Budidai]";
			mes "You and me, wanderer.";
			mes "We'll never make it.";
			close;
		}
		.@playtime = checkquest(7410, PLAYTIME);
		if (.@playtime == 0 || .@playtime == 1) {
			mes "[Budidai]";
			mes "Traveler, my friend!";
			mes "Bongisungisu ran far far away.";
			mes "Dogs, cows, horse, goat and rooster will come back to me, won't they?";
			next;
			mes "[Budidai]";
			mes "But Budidai is worried.";
			mes "The one eyed bully will return eventually.";
			mes "Will you help me out again?";
			next;
			mes "[Budidai]";
			mes "You, friend of Budidai";
			mes "You won't turn you're back on a good Capre?";
			close;
		} else {
			if (checkquest(7409) != -1) {
				if (checkquest(7409, HUNTING) == 2) {
					mes "[Budidai]";
					mes "Astonishing, wanderer!";
					mes "I could hear the pitiful wails of Bongisungisu all the way from here!";
					mes "Budidai can sing again for his friends, yes?";
					next;
					mes "[Budidai]";
					mes "Now, what can Budidai do for the kind wanderer, slayer of the one eyed monster?";
					mes "Aha! Here's a talisman.";
					mes "It will be good for you travelers.";
					next;
					mes "[Budidai]";
					mes "Kind Capre is a friend of travelers.";
					mes "I hope to see you again, wanderer.";
					mes "This is a blessing for friends. Hey hey hey~";
					setquest 7410;
					erasequest 7409;
					if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
						getitem 6497, 2; // Lesser_Agimat
					else
						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					if (!rand(3))
						$malayaNames$[1] = strcharinfo(0);
					close;
				} else {
					mes "[Budidai]";
					mes "Please slay the destructive libertine Bongisungisu.";
					mes "For me, a Capre to sing again for one's friends.";
					close;
				}
			} else {
				if (.@playtime == 2) {
					mes "[Budidai]";
					mes "Hey, kind wanderer.";
					mes "Bongisungisu, the one eyed debauchee is back!";
					mes "What do I do? What should I do?";
					next;
					mes "[Budidai]";
					mes "He gets angry when I sing.";
					mes "But the horse, cow, goat, dog and boars love it.";
					mes "It gives Budidai such a hard time.";
					erasequest 7410;
					close;
				} else {
					mes "[Budidai]";
					mes "You interested in that fiend, my friend?";
					mes "It's just a bully of the forest!";
					mes "It picks on my animal friends!";
					next;
					mes "[Budidai]";
					mes "Sadly, singing is all that Budidai is skilled at.";
					mes "I can't do anything about the scary gaze and the flailing club.";
					next;
					mes "[Budidai]";
					mes "Bongisungisu! I get the chills just by being in the same forest with it...";
					mes "But Budidai is weak.";
					next;
					if (select("Shall I take care of it?:That does give the chills.") == 2) {
						mes "[Budidai]";
						mes "Don't remind me.";
						mes "My friends can't come and listen to my songs because of that behemoth.";
						mes "It is so frustrating.";
						close;
					}
					mes "[Budidai]";
					mes "You'd teach Bongisungisu a lesson?!";
					mes "Kind wanderer!!";
					mes "Kick some libertine butt!!";
					setquest 7409;
					close;
				}
			}
		}
		break;
	case 3:
		mes "[Budidai]";
		mes "Leave me wanderer~";
		mes "Capre Budidai will sing of wonders~";
		mes "You best everyone else~";
		mes "You bring all them beasts~";
		mes "Just go back to Kafra~";
		next;
		mes "[Budidai]";
		mes "Hey hey hey~";
		mes "Blessing of the Kind and Good Capre~";
		mes "A wanderer's friend the gift of Capre~";
		mes "Hey hey hey~";
		close;
	}
	end;
}

// Traders :: malaya_npc
//============================================================
ma_fild01,166,214,6	script	Old Man in Dilemma#GA	575,{
	if (MaxWeight - Weight < 600 || checkweight(1201,1) == 0) {
		mes "Cannot proceed because you have too many items in your possession.";
		close;
	}
	mes "[Old Man in Dilemma]";
	mes "Oh! Demons are gaining more and more power in this world.";
	next;
	switch(select("We need to gather items to fight them off.:Ignore.")) {
	case 1:
		if (countitem(6497) >= 3 && Zeny >= 1000) {
			mes "[Old Man in Dilemma]";
			mes "You don't seem to be strong enough to fight off demons.";
			next;
			mes "[Old Man in Dilemma]";
			mes "Will you create a Greater Agimat of Ancient Spirit with 3 Lesser Agimats and 1,000 Zeny?";
			next;
			if(select("Create.:No, thank you.") == 1) {
				if (countitem(6497) >= 3 && Zeny >= 1000) {
					specialeffect2 EF_CONE;
					specialeffect EF_FORESTLIGHT2;
					set Zeny, Zeny-1000;
					delitem 6497,3; //Lesser_Agimat
					getitem 12775,1; //Ancient_Spirit_Agimat
				} else {
					mes "[Old Man in Dilemma]";
					mes "Short on materials.";
					close;
				}
			}
			mes "[Old Man in Dilemma]";
			mes "Hope you win the fight with the demon.";
			close;
		}
		mes "[Old Man in Dilemma]";
		mes "Can't make it now but there is an old way of making it handed down by generations.";
		next;
		mes "[Old Man in Dilemma]";
		mes "You need to call upon the power of Ancient Spirits. But you'll need several important materials first.";
		next;
		select("What are they?");
		mes "[Old Man in Dilemma]";
		mes "3 Lesser Agimats to hold the power of Ancient Spirits here and another special material handed down for generations.";
		next;
		mes "[Old Man in Dilemma]";
		mes "But nobody can get this special item anymore.";
		next;
		select("Something money cannot buy?");
		mes "[Old Man in Dilemma]";
		mes "No, no... It's this round little thing, you see?";
		next;
		select("Are you talking about Zeny?");
		mes "[Old Man in Dilemma]";
		mes "Looks similar to the special items handed down from generations.";
		next;
		mes "[Old Man in Dilemma]";
		mes "As long as we have enough of that, we could make the Greater Agimat of Ancient Spirit to fight against the demons.";
		next;
		select("Sounds good.");
		mes "[Old Man in Dilemma]";
		mes "In case you are too weary to take on the demons...";
		next;
		mes "[Old Man in Dilemma]";
		mes "Come by with 3 Lesser Agimats and 1,000 of those so-called Zeny.";
		next;
		mes "[Old Man in Dilemma]";
		mes "I will make a Greater Agimat of Ancient Spirit that will increase your attacks against demons by 10% for 20 min.";
		close;
	case 2:
		mes "[Old Man in Dilemma]";
		mes "Hope you win the fight with the demon.";
		close;
	}
}

ma_fild01,238,198,4	script	Tikbalang Expert#malaya	582,{
	if (MaxWeight - Weight < 50 || checkweight(1201,1) == 0) {
		mes "Cannot proceed because you have too many items in your possession.";
		close;
	}
	mes "[Tikbalang Expert]";
	mes "I spent 90% of my life studying Tikbalang.";
	next;
	switch(select("But you look young?:What is Tikbalang?:Teach me how to catch a Tikbalang.")) {
	case 1:
		mes "[Tikbalang Expert]";
		mes "What! I might be imagining things.";
		next;
		mes "[Tikbalang Expert]";
		mes "I look younger than I am because of my baby face. Ha ha ha~";
		next;
		select("... ... ...");
		mes "[Tikbalang Expert]";
		mes "Trust!! They say faith will bring you luck.";
		close;
	case 2:
		mes "[Tikbalang Expert]";
		mes "Ha ha... You ask the right question.";
		mes "I'm a specialist in that field. Ask me anything.";
		next;
		select("Why won't you answer me?");
		mes "[Tikbalang Expert]";
		mes "Have you... ever been fooled by anyone around you? Why can't you believe someone's word for it? Really, ask me anything.";
		next;
		while(1) {
			switch(select("I don't have any questions.:Characteristics?:Features?:Rumors?:Habitat?")) {
			case 1:
				mes "[Tikbalang Expert]";
				mes "I think this is enough explanation for now. You wouldn't understand other highly sophisticated topics with specific terminology and all anyway.";
				next;
				mes "[Tikbalang Expert]";
				mes "Oh! Do you have any other questions?";
				next;
				mes "[Tikbalang Expert]";
				mes "What do you think? Impressed at how much I know? Come by anytime when you have any more questions.";
				close;
			case 2:
				mes "[Tikbalang Expert]";
				mes "Tikbalangs have a way to confuse travelers when they meet them by making them turn in circles regardless of wherever and how far they travel.";
				next;
				mes "[Tikbalang Expert]";
				mes "They are mischievous creatures.";
				next;
				mes "[Tikbalang Expert]";
				mes "But of course there is a way to stop their pranks. You know about the Inside-out Shirt? You can either wear your top inside-out.";
				next;
				mes "[Tikbalang Expert]";
				mes "Or go on your way quietly without disrupting the Tikbalangs.";
				next;
				mes "[Tikbalang Expert]";
				mes "Ha ha ha ha~ But everyone knows adventurers are never quiet while they travel, right?";
				next;
				mes "[Tikbalang Expert]";
				mes "Never...";
				break;
			case 3:
				mes "[Tikbalang Expert]";
				mes "They say Tikbalangs have several distinctions.";
				next;
				mes "[Tikbalang Expert]";
				mes "First, they are very tall ^AAAAAA(tsk... wish I were tall)^000000 and have skinny, imbalanced legs and arms. Looks almost like a human but their knees are higher than their upper body when they sit down.";
				next;
				mes "[Tikbalang Expert]";
				mes "Second, is the standard characteristics acknowledged by the association. They have heads and feet like a horse.";
				next;
				mes "[Tikbalang Expert]";
				mes "So with all these appearance traits, Tikbalang is sometimes called the creature from hell.";
				break;
			case 4:
				mes "[Tikbalang Expert]";
				mes "There are several fun rumors about Tikbalangs.";
				next;
				mes "[Tikbalang Expert]";
				mes "One of them is about Tikbalangs being the guardians of some kingdom that worships nature.";
				next;
				mes "[Tikbalang Expert]";
				mes "So the Tikbalangs will trick travelers who come with bad intentions to the kingdom by making them travel in circles.";
				next;
				mes "[Tikbalang Expert]";
				mes "Another rumor is that people around here say that 'if it rains on a clear day, then it must be Tikbalang's wedding day'.";
				next;
				mes "[Tikbalang Expert]";
				mes "The association speculates that sayings like 'it rains on Bathory's wedding day' or 'it rains on Moonlight Flower's wedding day' might have derived from the Tikbalang's saying.";
				next;
				mes "[Tikbalang Expert]";
				mes "Lastly, ancient fairy tales say that Tikbalangs can transform into human form or even make themselves transparen't but nobody has verified this yet.";
				break;
			case 5:
				mes "[Tikbalang Expert]";
				mes "Tikbalangs usually live in dark, busy places where there aren't many people around.";
				next;
				mes "[Tikbalang Expert]";
				mes "Hmm... For example, they are known to live beneath bridges, in banana and bamboo forests and beneath large trees.";
				next;
				mes "[Tikbalang Expert]";
				mes "And this is just my opinion but wouldn't you agree that they are living in dark places because it is easier to play pranks on people?";
				break;
			}
			next;
		}
	case 3:
		mes "[Tikbalang Expert]";
		mes "Ha ha ha. Do you now know how great I am?";
		next;
		if (countitem(6496) >= 3 && countitem(6497) >= 5) {
			mes "[Tikbalang Expert]";
			mes "Oh! Isn't this material to make 'Tikbalang Belt' used to tame Tikbalangs?";
			next;
			mes "[Tikbalang Expert]";
			mes "The '^F80835Tikbalang Belt^000000' is used to capture Tikbalangs without the hassle. But that doesn't mean it's 100% successful. Interested? Do you want me to make one for you?";
			next;
			switch(select("Yes, I'm interested.:No, I can capture one myself.")) {
			case 1:
				delitem 6496,3; //Tikbalang_Thick_Spine
				delitem 6497,5; //Lesser_Agimat
				getitem 12699,1; //Tikbalang_Belt
				mes "[Tikbalang Expert]";
				mes "Yiiiiiiiiiiii! Yap!";
				next;
				specialeffect EF_SONICBLOW2;
				select("Huh?");
				mes "[Tikbalang Expert]";
				mes "The '^F80835Tikbalang Belt^000000' is already created.";
				close;
			case 2:
				mes "[Tikbalang Expert]";
				mes "You? Ha... You can try if you want to.";
				close;
			}
		}
		mes "[Tikbalang Expert]";
		mes "There is the easy way and the hard way to capture Tikbalangs. Which one do you prefer?";
		next;
		switch(select("Easy way.:Hard way.")) {
		case 1:
			mes "[Tikbalang Expert]";
			mes "Ha ha. I've come up with the easy way myself.";
			next;
			mes "[Tikbalang Expert]";
			mes "Bring me 3 Tikbalang's Thick Spines and 5 Lesser Agimats to make a '^F80835Tikbalang Belt^000000' to help you easily capture Tikbalangs.";
			next;
			mes "[Tikbalang Expert]";
			mes "Ha ha ha ha ha!";
			mes "I will say it again.";
			mes "It's 3 Tikbalang's Thick Spines and 5 Lesser Agimats. Understood?";
			close;
		case 2:
			mes "[Tikbalang Expert]";
			mes "It's easy for me but I don't know about you.";
			next;
			mes "[Tikbalang Expert]";
			mes "Tikbalangs have a sharp, pointy mane behind their neck.";
			next;
			mes "[Tikbalang Expert]";
			mes "Of course! There are several of them but you must get the three thickest ones.";
			next;
			mes "[Tikbalang Expert]";
			mes "These three manes are the weak point. You can tame a Tikbalang by pulling the manes out.";
			next;
			mes "[Tikbalang Expert]";
			mes "Now let me explain how to pull these manes out.";
			next;
			mes "[Tikbalang Expert]";
			mes "You must fly like a butterfly and land like a bee on the back of a Tikbalang.";
			next;
			mes "[Tikbalang Expert]";
			mes "Of course! The Tikbalang will get mad and try to shake you off with all its might.";
			next;
			mes "[Tikbalang Expert]";
			mes "All you have to do is hold on until the Tikbalang gets exhausted.";
			next;
			mes "[Tikbalang Expert]";
			mes "Then again, itll take 4 days and 3 nights for Tikbalangs to get tired since they are strong creatures. But let's not focus on too much details.";
			next;
			mes "[Tikbalang Expert]";
			mes "Which means!! The Tikbalang is already tamed.";
			close;
		}
	}
}

// Upgrade Boss Equipment :: malaya_mvpitem
//============================================================
ma_fild01,158,243,6	script	Tribe Blacksmith#malaya	582,{
	disable_items;
	mes "[Bayani]";
	mes "I will upgrade your armor if you bring one that holds enormous power.";
	next;
	switch (select("What kind of equipment do upgrade?:What are the required materials?:What will it become after an upgrade?:Please upgrade this.")) {
	case 1:
		mes "[Bayani]";
		mes "Your questions are too simple, but!";
		next;
		mes "[Bayani]";
		mes "Are also important.";
		next;
		mes "[Bayani]";
		mes "^7B4772Bakonawa Scale Armor^000000 made from the scales of the Bakonawa monster known to swallow the moon.";
		next;
		mes "[Bayani]";
		mes "Light but sturdy ^7B4772Kalasag^000000 made from rattan that grows wild around Port Malaya.";
		next;
		mes "[Bayani]";
		mes "^7B4772Buwaya Sack Cloth^000000 made from the sack of the man-eating alligator Buwaya.";
		next;
		mes "[Bayani]";
		mes "^7B4772Bangungot Boots of Nightmare^000000 imbued with the hatred and vengeance of the monster Bangungot.";
		next;
		mes "[Bayani]";
		mes "As just mentioned.";
		next;
		mes "[Bayani]";
		mes "I will make powerful armor out of ONLY the strongest armor dropped from fearful monsters.";
		close;
	case 2:
		mes "[Bayani]";
		mes "Learned well.";
		mes "Seems you learned that there is no such thing as free in life.";
		next;
		mes "[Bayani]";
		mes "First thing to remember is that the object to upgrade must be strong itself. At least strong enough to endure ^FF0000+9 Refinement^000000.";
		next;
		mes "[Bayani]";
		mes "Next is true strength that only comes out of power obtained naturally. I need ^FF000020 Ancient Grudges^000000 for protection from evil while Im refining.";
		next;
		mes "[Bayani]";
		mes "When a ^FF0000+9 Refined Strong armor^000000 is combined with ^FF000020 Ancient Grudges^000000 for protection!!";
		next;
		mes "[Bayani]";
		mes "You get a completely new and improved armor from old scraps.";
		next;
		mes "[Bayani]";
		mes "Always look forward to this.";
		close;
	case 3:
		mes "[Bayani]";
		mes "Listen, because this is a very important question.";
		next;
		mes "[Bayani]";
		mes "It won't matter if I say it more than a 100 times that upgraded armor is powerful.";
		next;
		mes "[Bayani]";
		mes "Unless the one that holds it doesn't believe it is! Ask about what has changed and decide for yourself!";
		next;
		while (1) {
			switch (select("There is no more.:Bakonawa Scale Armor:Kalasag:Buwaya Sack Cloth:Bangungot Boots of Nightmare")) {
			case 1:
				mes "[Bayani]";
				mes "Looks like you ran out of questions.";
				mes "Don't forget. You'll have to give up something to gain something.";
				close;
			case 2:
				mes "[Bayani]";
				mes "The Bakonawa Scale Armor adds +1 to all stats for all jobs which is overall great armor for everyone.";
				next;
				mes "[Bayani]";
				mes "But I'm sure the inner you thinks this isn't enough.";
				next;
				mes "[Bayani]";
				mes "That is why +2 can be added to all stats and an extra slot for a card to your socket if upgraded.";
				next;
				break;
			case 3:
				mes "[Bayani]";
				mes "Kalasag is a good shield to reduce damage from boss monsters by 1% per 3 refinements.";
				next;
				mes "[Bayani]";
				mes "But not enough. Can't believe that a shield doesnt have a place to equip a card.";
				next;
				mes "[Bayani]";
				mes "That is why I can add an extra slot for a card to your socket if upgraded.";
				next;
				break;
			case 4:
				mes "[Bayani]";
				mes "The Buwaya Sack Cloth offers healing capacity and healing item effect increase by 1% per 3 refinements. Not to mention it reduces 10% damage from Water, Earth, Fire, and Wind elemental monsters.";
				next;
				mes "[Bayani]";
				mes "But not enough. Can't believe that these clothes don't come with a place to equip a card. Everyone knows that clothes should have Raydric on them!";
				next;
				mes "[Bayani]";
				mes "Don't worry! I can add an extra slot for a card to your socket if upgraded.";
				next;
				break;
			case 5:
				mes "[Bayani]";
				mes "The Bangungot Boots of Nightmare increases +1 MDEF per 1 refinement and speed increases starting at 14 refinement and above.";
				next;
				mes "[Bayani]";
				mes "The speed increase effect from shoes like Moonlight Flower Shoes and Sleipnir items are out of reach for ordinary people.";
				next;
				mes "[Bayani]";
				mes "But of course, +14 refinement isn't easy but there is an easy way to get it.";
				next;
				mes "[Bayani]";
				mes "By upgrading your shoes, you can get speed increase starting from +12 refinement!";
				next;
				mes "[Bayani]";
				mes "And it doesn't end there!!";
				mes "I will also put in an extra slot in your socket to add a card.";
				next;
				break;
			}
			mes "[Bayani]";
			mes "However, you'll have to give up something to gain something.";
			next;
			mes "[Bayani]";
			mes "^0000FFEquipping the Kalasag, Buwaya Sack Cloth, Bakonawa Scale Armor, and Bangungot Boots of Nightmare all at once will lose the ^FF0000Set Effects^0000FF.^000000";
			next;
			mes "[Bayani]";
			mes "Think it through. Next question?";
			next;
		}
	}
	mes "[Bayani]";
	mes "Ha ha ha ha ha ha ha! Good!";
	mes "You've brought the materials, right?";
	next;
	if (select("Oh... sorry...:Preparations are complete!!") == 1) {
		mes "[Bayani]";
		mes "Oh no!!";
		mes "I will need an light but sturdy armor with an refinement of +9 or greater and 20 Ancient Grudges!!";
		close;
	}
	if (countitem(6499) < 20) {
		mes "[Bayani]";
		mes "You said all preparations are done and you give me this?! I need at least 20 Ancient Grudges to refine your item.";
		close;
	}
	mes "[Bayani]";
	mes "So what armor will it be?";
	next;
	switch (select("Bakonawa Scale Armor:Kalasag:Buwaya Sack Cloth:Bangungot Boots of Nightmare")) {
	case 1:
		.@part    = EQI_ARMOR;
		.@item    = 15051;
		.@newItem = 15052;
		break;
	case 2:
		.@part    = EQI_HAND_L;
		.@item    = 2169;
		.@newItem = 2170;
		break;
	case 3:
		.@part    = EQI_GARMENT;
		.@item    = 2590;
		.@newItem = 2591;
		break;
	case 4:
		.@part    = EQI_SHOES;
		.@item    = 2491;
		.@newItem = 2492;
		break;
	}
	
	if (!getequipisequiped(.@part)) {
		mes "[Bayani]";
		mes "You should wear the equipment to upgrade and not come without it on you.";
		close;
	} else if (getequipid(.@part) != .@item) {
		mes "[Bayani]";
		mes "What is this! You said you wanted to upgrade " + getitemname(.@item) + " but why are you giving me this? You should be wearing " + getitemname(.@item) + ".";
		close;
	}
	.@equip_refine = getequiprefinerycnt(.@part);
	if (.@equip_refine < 9) {
		mes "[Bayani]";
		mes "No, the sturdiness of this item has not been tested yet. It'll have to be at least +9 refined for me to say, 'Oh this is pretty sturdy armor.";
		close;
	}

	mes "[Bayani]";
	mes "Looks like you did your homework! Don't see a flaw! Then I have one question to ask before I start refinement.";
	next;
	mes "[Bayani]";
	mes "^0000FFOnce your item is refined, the refinement level will be ^FF00000^0000FF and the item will be upgraded.^000000 You get this part?";
	next;
	if (select("No.:Yes.") == 1) {
		mes "[Bayani]";
		mes "What? You didn't know this? Then, read through my instructions and come back again.";
		close;
	}
	mes "[Bayani]";
	mes "Good. Next question. Once refinement is done,";
	mes "^0000FFEquipping the Kalasag, Buwaya Sack Cloth, Bakonawa Scale Armor, and Bangungot Boots of Nightmare all at once will lose the ^FF0000Set Effects^0000FF.^000000";
	mes "Do you understand this point?";
	next;
	if (select("No.:Yes.") == 1) {
		mes "[Bayani]";
		mes "What? You didn't know this? Then, read through my instructions and come back again.";
		close;
	}
	mes "[Bayani]";
	mes "Awesome! Then let's start refining " + getitemname(.@item) + ".";
	next;
	specialeffect EF_SONICBLOW;
	mes "[Bayani]";
	mes "Pow!! Wow!! Flip... flop!";
	next;
	specialeffect2 EF_TRIPLEATTACK;
	mes "[Bayani]";
	mes "BAM!!";
	next;
	delitem 6499,20; //Ancient_Grudge

	// anti-hack
	if (callfunc("F_IsEquipIDHack", .@part, .@item) || callfunc("F_IsEquipRefineHack", .@part, .@equip_refine))
		close;

	delequip .@part;
	getitem .@newItem, 1; 
	mes "[Bayani]";
	mes "Ha ha. Perfect.";
	mes "Congratulations. Your armor is better than ever.";
	close;
}

// Secret in the Woods :: malaya_buwaya
//============================================================
malaya,305,281,3	script	Guard#buwaya	570,7,7,{
	if (malaya_hi < 10) {
		mes "- From the wary looks on the guard's face, it is obvious he is at alert at the sight of you. He won't intimidate you but seems he won't even deal with you either. -";
		next;
		mes "- Would there be anyone to talk to in the village? -";
		close;
	} else if (malaya_hi < 20) {
		mes "[Guard]";
		mes "There is a small area called ^3131FFBaryo Mahiwaga^000000 outside of Port Malaya.";
		mes "The place is closer to mother nature than what we have here.";
		next;
		mes "[Guard]";
		mes "On the other hand, the area is full of fierce monsters. Take care of yourself while you're traveling there.";
		close;
	}
	if (malaya_buwaya == 0) {
		mes "[Guard]";
		mes "There are more people leaving the village secretly these days. Are you also heading for the woods to look for the mysterious treasure?";
		next;
		if (BaseLevel < 100) {
			mes "[Guard]";
			mes "I take that back. On second thought, I don't think a weakling like you would even dare to go there.";
			next;
			mes "[Guard]";
			mes "You'd better hold tight to your mommy's hand if you want to go outside of Port Malaya or else the monsters will eat you alive. Ha ha.";
			close;
		}
		mes "[Guard]";
		mes "Is that why there are more outsiders here these days? Now don't be sneaky and a know-it-all. How would you know if I'd offered to take you around?";
		next;
		if (select("Treasure?:Ignore.") == 2) {
			mes "[Guard]";
			mes "Are you ignoring me? Bah.";
			close;
		}
		mes "[Guard]";
		mes "Oh, so you aren't here to look for treasure?";
		next;
		mes "[Guard]";
		mes "I hear people are talking about a mysterious treasure hidden deep in the woods.";
		set malaya_buwaya,1;
		setquest 2271;
		next;
	}
	if (malaya_buwaya == 1) {
		mes "[Guard]";
		mes "Do you see that group of people over there? They always gather and talk about it every day.";
		mes "Try talking to them if you are interested, too.";
		close;
	}
	mes "[Guard]";
	mes "So the talk about treasure was just a rumor? I'm not asking because I want to be rich overnight. Ha ha.";
	close;
OnTouch:
	if ((malaya_hi > 19) && (malaya_buwaya == 0)) {
		emotion ET_SURPRISE;
		emotion ET_SURPRISE, playerattached();
	}
	end;
}
malaya,276,288,5	script	Port Malaya Villager::buwaya_A	582,{
	if (malaya_hi < 20) {
		mes "- Look at you warily while whispering to each other. -";
		close;
	} else if (malaya_buwaya == 1) {
		emotion ET_SURPRISE, getnpcid(0, "buwaya_A");
		mes "[Port Malaya Villager]";
		mes "No, I heard they got lost in the woods.";
		mes "Who would hide such a treasure from a small village like ours?";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0, "buwaya_B");
		mes "[Port Malaya Villager]";
		mes "Could it been a monster? My grandma said there is a dragon with a huge head living deep inside the woods.";
		next;
		emotion ET_STARE_ABOUT, getnpcid(0, "buwaya_C");
		mes "[Port Malaya Villager]";
		mes "No. Listen to me.";
		next;
		mes "[Port Malaya Villager]";
		mes "You all know ^3131FFTotoy^000000? The kid living at the ^3131FFInn^000000.";
		mes "Well, did you know Totoy came back from the woods recently?";
		next;
		emotion ET_HUK, getnpcid(0, "buwaya_A");
		emotion ET_HUK, getnpcid(0, "buwaya_B");
		mes "[Port Malaya Villager]";
		mes "Really??? He came back alive?";
		next;
		emotion ET_SURPRISE, getnpcid(0, "buwaya_C");
		mes "[Port Malaya Villager]";
		mes "Yeah. But the strange part is that the troublemaker ^3131FFTotoy^000000 now quietly stays home and never comes out.";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_B");
		mes "[Port Malaya Villager]";
		mes "Why?";
		next;
		emotion ET_SURPRISE, getnpcid(0, "buwaya_C");
		mes "[Port Malaya Villager]";
		mes "Don't you get it? Totoy must have found the treasure.";
		next;
		emotion ET_HUK, getnpcid(0, "buwaya_A");
		emotion ET_HUK, getnpcid(0, "buwaya_B");
		mes "[Port Malaya Villager]";
		mes "What!!!! Then ^3131FFTotoy^000000 is rich now?";
		next;
		emotion ET_STARE_ABOUT, getnpcid(0, "buwaya_C");
		mes "[Port Malaya Villager]";
		mes "I don't think so.";
		mes "I saw ^3131FFTotoy^000000 come back home, but Totoy wasn't carrying anything.";
		mes "But then, I must have missed it because I ran back home right away.";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_B");
		mes "[Port Malaya Villager]";
		mes "Then what is ^3131FFTotoy^000000 doing at home?";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_C");
		mes "[Port Malaya Villager]";
		mes "I think Totoy is making a plan to bring the treasure back without us knowing it.";
		mes "To have the whole treasure for himself, that greedy kid.";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_A");
		mes "[Port Malaya Villager]";
		mes "Is that true?";
		next;
		emotion ET_BIGTHROB, getnpcid(0, "buwaya_B");
		mes "[Port Malaya Villager]";
		mes "The treasure would be in better hands with me ~";
		mes "I would clean it every day so it shined and would use it as a beautiful ornament. Ah~~~";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_C");
		mes "[Port Malaya Villager]";
		mes "Then how about we talk to ^3131FFTotoy^000000 to spill the beans on where the treasure is?";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_A");
		mes "[Port Malaya Villager]";
		mes "Wow. That is an awesome idea. No wonder you're the leader!";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_A");
		mes "[Port Malaya Villager]";
		mes "But will ^3131FFTotoy^000000 give up the information easily?";
		mes "Because Totoy was sneaky enough to think of getting away with taking the whole treasure.";
		next;
		emotion ET_CRY, getnpcid(0, "buwaya_B");
		mes "[Port Malaya Villager]";
		mes "Then we should convince ^3131FFTotoy^000000 to tell us where the treasure is instead of looking for it ourselves.";
		next;
		emotion ET_CRY, getnpcid(0, "buwaya_B");
		mes "[Port Malaya Villager]";
		mes "Ah~~~ it is so hard to get something pretty these days ~~~!!!!";
		set malaya_buwaya,2;
		erasequest 2271;
		setquest 2272;
		close;
	} else if (malaya_buwaya == 2) {
		mes "- Better pay a visit to this Totoy to get more information about the treasure. -";
		close;
	} else {
		mes "- People are talking with serious faces. -";
		close;
	}
}
malaya,278,288,3	duplicate(buwaya_A)	Port Malaya Villager::buwaya_B	583
malaya,276,286,7	duplicate(buwaya_A)	Port Malaya Villager::buwaya_C	582

ma_in01,47,101,3	script	Totoy#buwaya	577,7,7,{
	if ((malaya_hi < 20) || (malaya_buwaya < 2)) {
		mes "- See someone shaky with dopey eyes. -";
		close;
	}
	if (malaya_buwaya == 2) {
		mes "- See someone shaky with dopey eyes. -";
		next;
		if (select("Tap him on the shoulder.:Ignore him.") == 2)
			close;
		emotion ET_HUK;
		mes "[Totoy]";
		mes "Wah! No! Go away! Leave me alone!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Hey, are you alright?";
		next;
		mes "[Totoy]";
		mes "Huh... you're a person? Who are you?";
		next;
		mes "- He looks you straight in the face but doesn't seem to recognize you. -";
		next;
		mes "[Totoy]";
		mes "Who's there?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "I am " + strcharinfo(0) + ". You are Totoy, right? People say you've found a treasure. Is it true?";
		next;
		mes "[Totoy]";
		mes "What treasure?";
		mes "I can't see. I'm blinded. Please help me. I'm tired and frustrated.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "What happened?";
		next;
		mes "[Totoy]";
		mes "Can't talk long. I need to heal my eyes first.";
		mes "There should be some ^3131FFGreen Potion^000000 left inside the drawer. Will you take it out for me?";
		set malaya_buwaya,3;
		close;
	} else if (malaya_buwaya == 3) {
		if (!countitem(506)) {
			mes "[Totoy]";
			mes "Can't talk long. I need to heal my eyes first.";
			mes "There should be some ^3131FFGreen Potion^000000 left inside the drawer. Will you get it for me?";
			close;
		}
		mes "[Totoy]";
		mes "Hello? Hey, are you still there? What happened to the Green Potion? Jeez, this is driving me crazy.";
		next;
		if (select("Hand over the Green Potion.:Do not hand over the potion.") == 2) {
			mes "[Totoy]";
			mes "Did you really leave? Hey! Darn!";
		} else {
			mes "[Totoy]";
			mes "Gulp, gulp...";
			delitem 506,1; //Green_Potion
			set malaya_buwaya,4;
		}
		close;
	} else if (malaya_buwaya == 4) {
		emotion ET_SURPRISE;
		mes "[Totoy]";
		mes "I can see!! My eyes work!!!";
		mes "Yay! I feel better now!";
		next;
		emotion ET_THINK, playerattached();
		emotion ET_BEST;
		mes "[Totoy]";
		mes "Wow! You look better than you sounded. Ha ha.";
		next;
		mes "[Totoy]";
		mes "But what did you say? Something about a treasure?";
		mes "Did you say I found a treasure?";
		mes "What is that about?";
		next;
		select("Tell him what the people are talking about.");
		emotion ET_SMILE;
		mes "[Totoy]";
		mes "WHAT?";
		mes "Puhaha! Totoy is rich! Became rich overnight! Chief Ed!";
		next;
		emotion ET_HNG;
		mes "[Totoy]";
		mes "Sorry but I went to the woods to collect bugs. Wish I saw a treasure while I was at it. Hmph!";
		next;
		emotion ET_THINK;
		mes "[Totoy]";
		mes "I did go deep in the woods because I wasn't getting anywhere with collecting bugs. But who would have thought I'd get into this mess?";
		next;
		if (select("What Totoy saw:About bugs") == 2) {
			mes "[Totoy]";
			mes "I only wanted to show people my collection of cute bugs. Ha ha.";
			next;
			emotion ET_SMILE;
			mes "[Totoy]";
			mes "Dropping ice or bugs down peoples clothes is just like a daily greeting, isn't it?";
			next;
			mes "[Totoy]";
			mes "I love to see people run around the village like they are in a marathon. He he.";
			next;
		}
		mes "[Totoy]";
		mes "I thought people wouldn't run away because of an ordinary bug so I went in the woods with Ed.";
		next;
		mes "[Totoy]";
		mes "Ah, Ed is my cute puppy. He's very nice and cuddly. My best friend in the whole wide world.";
		next;
		emotion ET_THINK;
		mes "[Totoy]";
		mes "Ed usually barks a lot but I should have looked around when he barked and pulled on my sleeves.";
		next;
		mes "[Totoy]";
		mes "- Totoy bends over and whispers to you as if walls have ears. -";
		next;
		mes "[Totoy]";
		mes "There was a monster with a mouth the size of a house right behind me.";
		next;
		select("A monster?!");
		mes "[Totoy]";
		mes "Shssh! Be quiet. I've never seen a mouth that big before. It was full of a river of saliva flowing out of spiky teeth. Just the thought of it makes me want to hide.";
		next;
		mes "[Totoy]";
		mes "The scariest part is that the monster has two heads. You won't believe it till you see it.";
		next;
		emotion ET_CRY;
		mes "[Totoy]";
		mes "Ed bit the monsters leg with all his might to let me get away. But I don't know what happened to him afterwards. Sniff~";
		next;
		mes "[Totoy]";
		mes "That's when I hurt my eye. To tell you the truth I don't even remember how I came back.";
		next;
		select("About the monster");
		mes "[Totoy]";
		mes "Don't know. It was the first time I saw a monster like that. Who could live to tell the story?";
		next;
		mes "[Totoy]";
		mes "Wait, maybe the ^FF0000Master of Hunting^000000 might know about the monster. They say he fought with all sorts of monsters.";
		next;
		mes "[Totoy]";
		mes "I need some time alone. I need to make a tombstone for Ed. If you want to meet the ^FF0000Master of Hunting^000000, you'll find him near the Weapon Store.";
		next;
		mes "[Totoy]";
		mes "And tell everyone else to stop spreading rumors about treasure. They don't know what I went through. Sniff! I'm going to put Ancient Worms in everyones clothes!";
		set malaya_buwaya,5;
		erasequest 2272;
		setquest 2273;
		close;
	} else if (malaya_buwaya == 5) {
		mes "[Totoy]";
		mes "I have to make a grave for Ed. My loyal friend, Ed...";
		mes "If you want to meet the ^FF0000Master of Hunting^000000, you'll find him near the Weapon Store.";
		close;
	} else if (malaya_buwaya == 6) {
		mes "[Totoy]";
		mes "Ed!! Eeeeeddddddd!!!";
		mes "Can't believe you gave your life to save me. Wail!!!";
		next;
		mes "- Totoy can't be lying when he's crying his heart out like this. -";
		close;
	} else if (malaya_buwaya == 7) {
		mes "[Totoy]";
		mes "Where I saw the monster?";
		next;
		mes "[Totoy]";
		mes "Um... Hmm...";
		mes "I was so busy running away...";
		next;
		mes "[Totoy]";
		mes "It was really deep in the woods. Probably even past Baryo Mahiwaga.";
		mes "I think I heard the sound of ^3131FFFlowing Water^000000. A large whooshing sound. This is all I remember.";
		close;
	} else if ((malaya_buwaya > 7) && (malaya_buwaya < 12)) {
		mes "[Totoy]";
		mes "Poor Ed. I miss Ed. Wail!!!!";
		close;
	} else if (malaya_buwaya == 12) {
		emotion ET_CRY;
		mes "[Totoy]";
		mes "Poor Ed. I miss Ed. Wail!!!!";
		next;
		enablenpc "Dog#buwaya_totoi";
		mes "[Dog]";
		mes "Bark bark!!";
		next;
		emotion ET_HUK;
		mes "[Totoy]";
		mes "Ed!!";
		mes "Ed!!! You're alive!!!";
		mes "You've come back!!! I'm so happy!!!!";
		next;
		mes "[Totoy]";
		mes "Did you bring Ed back?";
		mes "Thank you so much!";
		mes "You didn't see the monster, did you?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "The monster is called Buwaya. I told the Guard about the monster. You better not go near the place again.";
		next;
		mes "[Totoy]";
		mes "Okay!";
		mes "He he. Ed, the woods are too dangerous so we can't go there for bugs anymore.";
		next;
		mes "[Dog]";
		mes "Whimper...";
		next;
		mes "[Totoy]";
		mes "But I'm sure we can find a way to keep our reputation with other creepy stuff!";
		next;
		mes "[Dog]";
		mes "Bark bark!!";
		next;
		/*
		// Better translation needed.
		mes "[Totoy]";
		mes "Um... hey!";
		next;
		select("You are a " + ((Sex == SEX_MALE) ? "boy" : "girl") + ", aren't you?");
		emotion ET_HUK, playerattached();
		mes "[Totoy]";
		mes "Huh?";
		if (Sex == SEX_FEMALE) {
			mes "Totoy is a girl, and you are a boy.";
			mes "You're not a boy?";
		} else {
			mes "Totoy is a girl, and you are a girl.";
			mes "You're not a girl?";
		}
		next;
		mes "[Totoy]";
		mes "Is it because my name, Totoy? But that's the name my parents gave me thinking I would be a boy when I was born. Ha ha!";
		next;
		*/
		mes "[Totoy]";
		mes "Anyway, thanks for bringing my best friend back.";
		mes "I don't have much but would like to thank you. Wait, let me see what's inside my drawer. He he-";
		set malaya_buwaya,13;
		erasequest 2278;
		setquest 2279;
		close;
	} else if (malaya_buwaya == 13) {
		if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
			mes "- Wait!! -";
			mes "- You have too many items on you. -";
			mes "- Cannot receive the item. -";
			mes "- Clean up your items -";
			mes "- And please try again. -";
			close;
		}
		mes "- Totoy goes through the drawer, turning it upside down. Making a mess of the room. -";
		next;
		mes "[Totoy]";
		mes "Found it!";
		next;
		mes "[Totoy]";
		mes "Here. My mom gave it to me but I don't know how to use it... He he.";
		mes "I hope you can use it.";
		next;
		mes "[Totoy]";
		mes "Visit me when you get bored!";
		mes "Just don't ask about the treasure again~!";
		next;
		mes "[Dog]";
		mes "Woof woof woof!!!!";
		set malaya_buwaya,14;
		if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
			getitem 6497,10; //Lesser_Agimat
		else
			getitem 6497,5; //Lesser_Agimat
		disablenpc "Dog#buwaya_totoi";
		erasequest 2279;
		setquest 2280;
		close;
	} else {
		mes "[Totoy]";
		mes "Ed went out to play so I'm alone.";
		mes "Would there be something awesome to surprise people with?";
		close;
	}
OnTouch_:
	emotion ET_HUK;
	end;
}

ma_in01,43,101,7	script	Dog#buwaya_totoi	81,{
	end;
OnInit:
	disablenpc "Dog#buwaya_totoi";
	end;
}

ma_in01,44,105,3	script	Drawer#buwaya	844,{
	if (malaya_buwaya == 3) {
		mes "- You look for the Green Potion in Totoys drawer. -";
		next;
		mes "- Rummaging, fumbling. -";
		next;
		mes "- Rummaging, fumbling. -";
		mes "- Rummaging, fumbling. -";
		next;
		mes "- Clunk, clank, crunch. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "What? I only see an empty potion bottle.";
		mes "Does this mean I have to get the potion myself? That Totoy is really a troublemaker.";
		close;
	}
	end;
}

malaya,290,152,5	script	Master of Hunting#buwaya	578,{
	if ((malaya_hi < 20) || (malaya_buwaya < 5)) {
		mes "[Master of Hunting]";
		mes "Oh! Ho! Ho!";
		mes "I am the Master of Hunting! I'm not afraid of anything with just one exception! I'm afraid of outsiders...";
		close;
	}
	if (malaya_buwaya == 5) {
		mes "[Master of Hunting]";
		mes "Yo! Ho! Ho!";
		mes "I went all the way to Rune-Midgarts Kingdom to defeat the Angry Minorous.";
		next;
		mes "[Master of Hunting]";
		mes "And I succeeded in killing Muka, the one with the voice of a demon that disturbs the peace of the world.";
		mes "Wow! He was really tough. I'm starting to sweat just thinking of him.";
		next;
		mes "[Master of Hunting]";
		mes "Yo! You look like you have a few battle stories yourself. Have you ever seen a Minorous? Ha ha ha!";
		next;
		mes "[Master of Hunting]";
		mes "So you came here to learn all about my excellent hunting skills? Or to ask me to publish an essay on Master of Hunting? Ho!";
		next;
		if (select("About Totoys monster:Interrupt.") == 2) {
			mes "[Master of Hunting]";
			mes "Oh? Hey! Where are you going?!";
			close;
		}
		mes "[Master of Hunting]";
		mes "You say someone saw the monster?";
		next;
		mes "[Master of Hunting]";
		mes "There are many monsters in and out of Port Malaya. What is so special about this one?";
		next;
		select("About a monster with two heads");
		mes "[Master of Hunting]";
		mes "Ho! A monster with two heads, you say? Are you kidding? Where on earth is there a monster with two heads?!";
		next;
		mes "[Master of Hunting]";
		mes "The kid must have been scared by a Condor or something.";
		mes "There's a saying that someone surprised to see a Permeter, will also be surprised to see a peach tree. Ha ha!";
		next;
		mes "[Master of Hunting]";
		mes "You shouldn't lie to an adult. I understand you want the Master of Huntings attention. Ha ha!";
		next;
		if (select("I will prove it.:Suspicious of Totoy.") == 2) {
			mes "[Master of Hunting]";
			mes "Kids tell stories for their own reasons. I'm sure Totoy is the same.";
			set malaya_buwaya,6;
			close;
		}
		mes "[Master of Hunting]";
		mes "Oh! Really? Bring proof if you really think the kid is telling the truth.";
		next;
		mes "[Master of Hunting]";
		mes "Every living thing leaves some kind of trace behind. You also leave behind traces and scents wherever you go. Especially in private places, I mean. He he!";
		next;
		mes "[Master of Hunting]";
		mes "Try collecting 10 Animal Samples from where the kid saw the monster. I will look for traces of that monster from the samples.";
		next;
		mes "[Master of Hunting]";
		mes (Sex == SEX_MALE) ? "It won't be pleasant but any brave man could easily do it, don't you agree?" : "I don't want the hands of a pretty girl to smell bad but I could care less with someone like you. Ha ha!";
		set malaya_buwaya,7;
		erasequest 2273;
		setquest 2274;
		close;
	} else if (malaya_buwaya == 6) {
		mes "[Master of Hunting]";
		mes "Oh, you're back!";
		next;
		if (select("Let's see if we have a monster in it!:I don't think there is a monster.") == 2) {
			mes "[Master of Hunting]";
			mes "It was a kid's joke. Ha ha.";
			close;
		}
		mes "[Master of Hunting]";
		mes "Oh! Really? Bring proof if you really think the kid is telling the truth.";
		next;
		mes "[Master of Hunting]";
		mes "Every living thing leaves some kind of trace behind. You also leave behind traces and scents wherever you go. Especially in private places, I mean. He he!";
		next;
		mes "[Master of Hunting]";
		mes "Try collecting 10 Animal Samples from where the kid saw the monster. I will look for traces of that monster from the samples.";
		next;
		mes "[Master of Hunting]";
		mes (Sex == SEX_MALE) ? "It won't be pleasant but any brave man could easily do it, don't you agree?" : "I don't want the hands of a pretty girl to smell bad but I could care less with someone like you. Ha ha!";
		set malaya_buwaya,7;
		erasequest 2273;
		setquest 2274;
		close;
	} else if (malaya_buwaya == 7) {
		if (countitem(6519) < 10) {
			mes "[Master of Hunting]";
			mes "Bring me back samples if you want to prove there is a monster with two heads.";
			close;
		}
		mes "[Master of Hunting]";
		mes "Argh! That's so foul.";
		mes "You've really brought back the samples.";
		mes "Ho! Leave it there and come back after washing your hands. Even god won't smile down at you with that stench.";
		delitem 6519,10; //Collected_Sample
		set malaya_buwaya,8;
		erasequest 2274;
		setquest 2275;
		close;
	} else if (malaya_buwaya == 8) {
		mes "[Master of Hunting]";
		mes "Ho! Shall I?";
		next;
		mes "- Rummaging, fumbling. -";
		next;
		mes "- Rummaging, fumbling. -";
		mes "- Wriggling, wiggling. -";
		next;
		mes "- Rummaging, fumbling. -";
		mes "- Wriggling, wiggling. -";
		mes "- Sway, swag. -";
		next;
		mes "[Master of Hunting]";
		mes "Ho! This is!!";
		next;
		mes "[Master of Hunting]";
		mes "Wow! Ho! Ho! Ho! Awesome!!!!!!";
		next;
		mes "[Master of Hunting]";
		mes "You! Come here and feel this!";
		set malaya_buwaya,9;
		enablenpc "#buwaya_soil";
		close;
	} else if (malaya_buwaya == 9) {
		mes "[Master of Hunting]";
		mes "Don't just stand there. Touch the sample!";
		enablenpc "#buwaya_soil";
		close;
	} else if (malaya_buwaya == 10) {
		mes "[Master of Hunting]";
		mes "Hurry and tell the Guard Leader that Buwaya is active again. Hurry! You'll find the Guard Leader at the north of the village.";
		close;
	} else {
		mes "[Master of Hunting]";
		mes "Snooze...";
		close;
	}
}

malaya,291,152,3	script	#buwaya_soil	557,{
	if (malaya_buwaya == 9) {
		mes "- Rummaging, fumbling. -";
		next;
		mes "- Rummaging, fumbling. -";
		mes "- Wriggling, wiggling. -";
		next;
		mes "- Rummaging, fumbling. -";
		mes "- Wriggling, wiggling. -";
		mes "- Sway, swag. -";
		next;
		if (rand(1,10) <= 5) {
			mes "[" + strcharinfo(0) + "]";
			mes "I don't see anything.";
			next;
			mes "[Master of Hunting]";
			mes "It can't be! Look closer!";
		} else {
			mes "- Felt something pointy with the end of your fingers. -";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Ouch!";
			mes "What is this?";
			next;
			mes "[Master of Hunting]";
			mes "Ho! This is huge! And so dense that it can easily scratch steel!";
			next;
			mes "[Master of Hunting]";
			mes "This is ^3131FFBuwaya^000000's tooth!";
			mes "How could this be!";
			next;
			select("Buwaya?");
			mes "[Master of Hunting]";
			mes "Ah! Yes! Stop holding it up. It stinks. Go wash your hands.";
			next;
			mes "[Master of Hunting]";
			mes "Hmm. The monster the kid saw must be Buwaya. No doubt about it.";
			next;
			mes "[Master of Hunting]";
			mes "I've heard that the wife of the neighbor of my grandfather's uncle on my mom's side was also killed by Buwaya.";
			next;
			mes "[Master of Hunting]";
			mes "They say no living thing is left after Buwaya passes by.";
			mes "Totoy is one lucky kid. Wow!";
			next;
			mes "[Master of Hunting]";
			mes "Buwaya was inactive for a long time. Wonder if it was hibernating? Hmm.";
			next;
			mes "[Master of Hunting]";
			mes "Now that I know that a monster like that is out there, I should be cautious, too.";
			mes "Must tell the villagers not to go too deep into the woods.";
			next;
			mes "[Master of Hunting]";
			mes "Please go and tell the Guard Leader that Buwaya is active again.";
			mes "I will contact other hunters in the meantime and think of a plan to kill Buwaya.";
			set malaya_buwaya,10;
			disablenpc "#buwaya_soil";
			erasequest 2275;
			setquest 2276;
		}
		close;
	}
	end;
OnInit:
	disablenpc "#buwaya_soil";
	end;
}

-	script	Unknown Trace#buwaya	-1,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
		mes "- Wait!! -";
		mes "- You have too many items on you. -";
		mes "- Cannot receive the item. -";
		mes "- Clean up your items -";
		mes "- And please try again. -";
		close;
	}
	if (malaya_buwaya == 7) {
		if (countitem(6519) >= 10) {
			mes "- You don't have to collect any more samples. -";
			close;
		}
		mes "- You see something entangled with soil and grass. -";
		next;
		if (rand(1,10) <= 2) {
			mes "- You are nauseous by the foul smell coming from the samples you are collecting. -";
			sc_start SC_POISON,5000,0;
			close;
		}
		mes "- You slowing and cautiously collect the squashy and slightly warm substance. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "It's warm as a mother's bosom.";
		getitem 6519,1; //Collected_Sample
		disablenpc();
		initnpctimer;
		close;
	}
	end;
OnTimer20000:
	enablenpc();
	stopnpctimer;
	end;
}
ma_fild02,155,235,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_1	557
ma_fild02,143,142,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_2	557
ma_fild02,266,155,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_3	557
ma_fild02,221,91,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_4	557
ma_fild02,205,85,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_5	557
ma_fild02,300,98,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_6	557
ma_fild02,100,275,3	duplicate(Unknown Trace#buwaya)	Unknown Trace#buwaya_7	557

malaya,290,340,3	script	Guard Leader#buwaya	571,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
		mes "- Wait!! -";
		mes "- You have too many items on you. -";
		mes "- Cannot receive the item. -";
		mes "- Clean up your items -";
		mes "- And please try again. -";
		close;
	}
	if (malaya_hi < 20) {
		mes "- Look at you warily while whispering to each other. -";
		close;
	}
	if (malaya_buwaya < 10) {
		mes "[Guard Leader]";
		mes "We are busy as hell because of Bangungots servants attacking the hospital.";
		next;
		mes "[Guard Leader]";
		mes "We are doing our best in securing the safety of our village so please enjoy your stay in Port Malaya.";
		next;
	}
	if (malaya_buwaya == 10) {
		if (select("Tell him about Buwaya.:Done with conversation.") == 2) {
			close;
		}
		mes "[Guard Leader]";
		mes "Buwaya? The merciless creature is back?";
		next;
		mes "[Guard Leader]";
		mes "That's bad news. We are already short-handed by assigning everyone to fight off Bangungot.";
		next;
		mes "[Guard Leader]";
		mes "And villagers need to go to the woods to collect fruits and vegetables.";
		next;
		mes "[Guard Leader]";
		mes "Hmm... will you be able to help Port Malaya?";
		next;
		if (select("Leave it to me!:I'm pretty busy myself.") == 2) {
			mes "[Guard Leader]";
			mes "Really? That's no good. All the lives of the villagers will be at stake if we don't do something. How can a youth like you be so heartless. Are all outsiders like you? Hmph! Can't trust young people these days. Hmph.";
			close;
		}
		mes "[Guard Leader]";
		mes "I knew I could count on you.";
		next;
		mes "[Guard Leader]";
		mes "Good. I will trust you.";
		mes "I need to know where Buwaya will likely appear in order to secure villagers living area.";
		mes "Guess Buwayas nest will be the best bet.";
		next;
		mes "[Guard Leader]";
		mes "^3131FFShoot a smoke bomb^000000 once you reach the area.";
		mes "Then we will run to where the smoke bomb was shot.";
		next;
		mes "[Guard Leader]";
		mes "Then take care and good luck.";
		set malaya_buwaya,11;
		erasequest 2276;
		setquest 2277;
	} else if (malaya_buwaya == 11) {
		mes "[Guard Leader]";
		mes "^3131FFShoot a smoke bomb^000000 once you reach the area.";
		mes "Then we will run to where the smoke bomb was shot.";
	} else if ((malaya_buwaya == 12) || (malaya_buwaya == 13)) {
		mes "[" + strcharinfo(0) + "]";
		mes "Let's first bring Ed to Totoy.";
	} else if (malaya_buwaya == 14) {
		mes "[Guard Leader]";
		mes "The Guard Leader gave you the location of Buwaya's cave.";
		mes "This can't be happening.";
		next;
		mes "[Guard Leader]";
		mes "I'm way out of men to assign to the Buwaya situation but well have to do something with what we got.";
		next;
		mes "[Guard Leader]";
		mes "Here, this is a symbol of our gratitude.";
		mes "If you would like to help with Buwaya again, please look for me.";
		mes "Hope you have a great journey.";
		set malaya_buwaya,15;
		getexp 1000000, 600000;
		completequest 2280;
	} else {
		set .@hunting, checkquest(2281,HUNTING);
		if (.@hunting == -1) {
			mes "[Guard Leader]";
			mes "Hear Buwaya appeared from the depth of the Forest.";
			mes "As everyone knows, all our manpower is dispatched to handle Bangungots servants attacking the hospital recently.";
			next;
			mes "[Guard Leader]";
			mes "That is why we have no choice but to ask an outsider to help eliminate Buwaya.";
			mes "They say Buwaya is a very strong and ugly monster with two heads.";
			mes "Will you help us defeat Buwaya?";
			next;
			if (select("Of course.:Nope.") == 2) {
				mes "[Guard Leader]";
				mes "Buwaya is known to be a very dangerous monster.";
				mes "There is no shame in rejecting this request.";
				close;
			}
			if (BaseLevel < 130) {
				mes "[Guard Leader]";
				mes "This mission will be a dangerous one.";
				mes "If you want to help get rid of Buwaya, you must be prepared.";
				mes "Come back once you reach LV 130.";
				close;
			}
			mes "[Guard Leader]";
			mes "According to the legend, Buwaya kidnaps people and puts them in the sack on its back and then eats them later.";
			next;
			mes "[Guard Leader]";
			mes "Keep this in mind and be cautious at all times.";
			mes "I recommend asking trustful colleagues for help.";
			setquest 2281;
		} else if (.@hunting == 0 || .@hunting == 1) {
			mes "[Guard Leader]";
			mes "How is it going with the Buwaya situation?";
			next;
			if (select("I give up.:Still fighting.") == 2) {
				mes "[Guard Leader]";
				mes "Keep this in mind and be cautious at all times.";
				mes "I recommend asking trustful colleagues for help.";
				close;
			}
			mes "[Guard Leader]";
			mes "Buwaya is known to be a very dangerous monster.";
			mes "There is no shame in rejecting this request.";
			erasequest 2281;
		} else if (.@hunting == 2) {
			mes "[Guard Leader]";
			mes "Can't believe you really got rid of Buwaya!";
			mes "You aren't just any ordinary youth, aren't you? People of Port Malaya can now sleep at night.";
			next;
			mes "[Guard Leader]";
			mes "Good work.";
			erasequest 2281;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 6497,10; //Lesser_Agimat
			else
				getitem 6497,5; //Lesser_Agimat
			getexp 0,600000;
		} else {
			mes "[Guard Leader]";
			mes "I will not stand down until all of Port Malaya, including Baryo Mahiwaga, is safe from Buwaya. Promise to take care of yourself.";
			erasequest 2281;
		}
	}
	close;
}

ma_fild02,307,245,0	script	#buwaya_todog1	139,3,3,{
	end;
OnTouch:
	if (malaya_buwaya == 11) {
		enablenpc "Dog#buwaya";
		//mes "[Here something]";
		mes "Bark bark!!";
		close;
	}
	end;
}
ma_fild02,320,241,0	duplicate(#buwaya_todog1)	#buwaya_todog2	139,3,3
ma_fild02,317,250,0	duplicate(#buwaya_todog1)	#buwaya_todog3	139,7,7

ma_fild02,312,259,3	script	Dog#buwaya	81,{
	if (malaya_buwaya == 11) {
		mes "[Dog]";
		mes "Bark bark!!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Why is a dog here?";
		next;
		if (select("Look closely at the dog.:Ignore it.") == 2) {
			mes "[" + strcharinfo(0) + "]";
			mes "Looks like a lost dog.";
			close;
		}
		mes "- Looked real hard at the dirty dog and noticed an old collar on its neck. -";
		next;
		mes "- The collar says, 'Forever with Totoy'. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "So you are Ed?";
		next;
		mes "[Dog]";
		mes "Bark bark!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "You didn't get killed by Buwaya. You lucky little dog. Let's go back to your owner.";
		next;
		emotion ET_DELIGHT;
		mes "[Dog]";
		mes "Bark bark!!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Ah, before we go, do you happen to know where Buwaya's nest is?";
		next;
		mes "[Dog]";
		mes "Woof!";
		next;
		mes "- Ed is one smart dog and understood what you asked him. Ed started to bark towards the north. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Buwaya is over there!";
		mes "Then I should shoot the smoke bomb here.";
		next;
		mes "- You take the smoke bomb out of your inventory and shoot towards the sky. -";
		next;
		mes "^FF0000- Shoook-^000000";
		enablenpc "Guard#buwayacave";
		specialeffect2 EF_MVP;
		next;
		mes "[Guard]";
		mes "Job well done!";
		mes "So Buwaya lives in remote place like this. I will make sure this information goes to the Guard Leader!";
		disablenpc "Guard#buwayacave";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Should I return Ed to Totoy first and then go see the Guard Leader?";
		next;
		mes "[Dog]";
		mes "Bark bark!";
		set malaya_buwaya,12;
		disablenpc "Dog#buwaya";
		erasequest 2277;
		setquest 2278;
		close;
	} else if (malaya_buwaya == 12) {
		mes "[" + strcharinfo(0) + "]";
		mes "Lets first bring Ed to Totoy and then go back to the Guard Leader.";
		close;
	}
	end;
OnInit:
	disablenpc "Dog#buwaya";
	end;
}

ma_fild02,308,262,3	script	Guard#buwayacave	570,{
	end;
OnInit:
	disablenpc "Guard#buwayacave";
	end;
}

// Bakonawa Extermination :: malaya_bakonawa
//============================================================
malaya,280,331,4	script	Singing Man#bako1	578,{
	if (malaya_bakona1 < 5) {
		mes "[Singing Man]";
		mes "Story of dragon that lives at a lake~";
		mes "Story of an old lady";
		mes "that became a dragon long ago~";
		next;
		mes "[Singing Man]";
		mes "Waiting for the son that left for a foreign land,";
		mes "my son will return";
		mes "when that moon sets for the 90th time";
		next;
		mes "[Singing Man]";
		mes "The moon sets for the 89th,";
		mes "The moon sets for the 90th,";
		mes "The moon sets for the 191st...";
		next;
		mes "[Singing Man]";
		mes "That moon has taken my son away~";
		mes "That horrible thing";
		mes "has swallowed my son,";
		mes "and I will punish that moon~";
		next;
		mes "[Singing Man]";
		mes "The day the furious moon hides itself from sight,";
		mes "the whole world will be flooded with rain";
		mes "with all the villages and people facing death under water~";
		next;
		mes "[Singing Man]";
		mes "The old lady's curse made the moon furious~";
		mes "Get rid of the old lady to calm the moon~";
		mes "If only the old lady wasn't here, If only the old lady wasn't here...";
		next;
		mes "[Singing Man]";
		mes "I hear rumors~";
		mes "The old lady threw herself into the lake~";
		mes "the old lady, now turned into a dragon, will swallow the moon";
		mes "and soon swallow the village too~";
		close;
	} else {
		mes "[Singing Man]";
		mes "You say the legend is all a lie?";
		mes "You mean my ancestors are all liars";
		mes "and swindlers?";
		next;
		mes "[Singing Man]";
		mes "This village is built on an old legend";
		mes "and history.";
		mes "They are not the kind of people that will be shaken by";
		mes "foolish words of an imbecile such as yourself.";
		close;
	}
}

malaya,275,333,5	script	Singing Woman#bako1	579,{
	if (malaya_bakona1 < 5) {
		mes "[Singing Woman]";
		mes "Bakonawa that live at a lake,";
		mes "story of an old lady that became a dragon.";
		next;
		mes "[Singing Woman]";
		mes "The son that was suppose to return after the moon sets for the 90th time";
		mes "never did come back even after the moon had set for a few hundred times~";
		mes "The moon has swallowed the old lady's son~";
		next;
		mes "[Singing Woman]";
		mes "The moon, the moon, you shall receive the old lady's curse~";
		mes "The whole village was immersed in death";
		mes "with rain and floods sent by the furious moon~";
		next;
		mes "[Singing Woman]";
		mes "The moon, the moon, be still and be calm,";
		mes "for the old lady is gone and she is no more~";
		mes "The old lady has drowned in the lake~";
		mes "She will transform into Bakonawa and come back...";
		next;
		mes "[Singing Woman]";
		mes "...to swallow you and";
		mes "punish the village soon~";
		mes "The day the moon dies";
		mes "is the day the village dies too~";
		close;
	} else {
		mes "[Singing Woman]";
		mes "The legends are all a lie?";
		mes "Why do you say such nonsense?";
		mes "Is there nothing";
		mes "that is important for you to protect?";
		next;
		mes "[Singing Woman]";
		mes "Poor Bakonawa...";
		mes "I would be happy";
		mes "if she took a big bite out of someone like you!";
		close;
	}
}

malaya,290,329,4	script	Frightened Boy#bako1	577,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[Frightened Boy]";
		mes "The vicious monster Bakonawa will soon come";
		mes "to swallow the moon and take vengeance upon the village.";
		mes "I'm scared, please help...";
		close;
	} else {
		mes "[Frightened Boy]";
		mes "The legend of Bakonawa is all a lie?";
		mes "So that means Bakonawa doesn't exist?";
		mes "I'm going to play with my friends at the lake later.";
		mes "You told me it was all a lie right?";
		close;
	}
}

malaya,264,338,4	script	Frightened Maiden#bako1	576,{
	if (malaya_hi < 20) {
		mes "- She seems cautious of you. -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[Frightened Maiden]";
		mes "It is said that Bakonawa hates loud noises.";
		mes "Pound the pot if you want to live!";
		next;
		switch(select("Hates loud noises?:What is Bakonawa?")) {
		case 1:
			mes "[Frightened Maiden]";
			mes "You already heard that the old lady";
			mes "died and became Bakonawa, right?";
			next;
			mes "[Frightened Maiden]";
			mes "The legend has it that";
			mes "the old lady had very keen hearing";
			mes "because she was always focusing on";
			mes "the returning of her traveling son.";
			next;
			mes "[Frightened Maiden]";
			mes "So naturally, Bakonawa also";
			mes "has very keen hearing.";
			mes "The reason why everyone is banging";
			mes "pots and pans is because of this.";
			close;
		case 2:
			mes "[Frightened Maiden]";
			mes "It is a terrible monster that lives at a lake.";
			mes "We are all trembling with fear";
			mes "because we don't know when it might attack the village.";
			next;
			mes "[Frightened Maiden]";
			mes "Some say that it is more obsessed with swallowing the moon";
			mes "than attacking the village.";
			mes "if that's the case, I wish it would just swallow the moon";
			mes "and leave us alone.";
			close;
		}
	} else {
		mes "[Frightened Maiden]";
		mes "The villagers hate you now.";
		mes "You've been saying that legend of Bakonawa";
		mes "is a lie and they are saying you are more of a monster";
		mes "than Bakonawa.";
		close;
	}
}

malaya,272,339,5	script	Old Fortune Teller#bako1	575,{
	if (malaya_hi < 20) {
		mes "- Old Fortune Teller seems cautious of you. -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[Old Fortune Teller]";
		mes "You must not hate Bakonawa.";
		mes "The hate against it is only feeding its rage";
		mes "to grow bigger.";
		next;
		mes "[Old Fortune Teller]";
		mes "To calm the dead lady's anger,";
		mes "we annually hold a ceremony and prepare food.";
		mes "But there seems to be no way to calm the";
		mes "ever growing anger of the old lady.";
		next;
		mes "[Old Fortune Teller]";
		mes "The day is nearing. I can sense it.";
		mes "Bakonawa will soon swallow the moon";
		mes "and come to punish the village.";
		close;
	} else {
		mes "[Old Fortune Teller]";
		mes "How can you say the legend is a lie!";
		mes "Because of you, the fury of Bakonawa";
		mes "grew even larger!";
		mes "If the village perishes,";
		mes "it is all your fault!";
		close;
	}
}

malaya,285,332,4	script	Old Legend Teller#bako1	574,{
	if (checkweight(1301,3) == 0) {
		mes "You cannot start the conversation. You are carrying too many items. -";
		close;
	}
	if (BaseLevel < 120) {
		mes "[Old Legend Teller]";
		mes "There is something that needs to be done";
		mes "but you look too fragile";
		mes "to give me a hand.";
		next;
		mes "[Old Legend Teller]";
		mes "Come back when";
		mes "your strength grows strong enough";
		mes "to match Incubus.";
		close;
	}
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona1 == 0) {
		mes "[Old Legend Teller]";
		mes "The old lady has come back";
		mes "to life as Bakonawa.";
		mes "Soon she will come to take vengeance on the village.";
		mes "We must calm her";
		mes "if to prevent further destruction...";
		next;
		switch(select("Calm Bakonawa?:Further destruction?")) {
		case 1:
			mes "[Old Legend Teller]";
			mes "The old lady faced an unjust death";
			mes "because of villagers' selfishness.";
			mes "She was a caring mother who loved her";
			mes "son dearly.";
			next;
			mes "[Old Legend Teller]";
			mes "If we track the whereabouts of her son and hold a ritual";
			mes "with her son's belongings,";
			mes "her restless soul will be calmed";
			mes "and she will spare us from destruction.";
			next;
			mes "[Villagers]";
			mes "It is no use sir!!";
			next;
			mes "[Villagers]";
			mes "You cannot stop the monster that way!";
			next;
			mes "[Old Legend Teller]";
			mes "Of course, it will not be easy to track down the whereabouts of a person";
			mes "who has been gone for a hundred years.";
			mes "...";
			next;
			mes "[Old Legend Teller]";
			mes "Still, don't you think";
			mes "it is worth a try?";
			mes "Please help us and save us from our misery.";
			next;
			switch(select("It is no use.:I'll help.")) {
			case 1:
				mes "[Old Legend Teller]";
				mes "Yes, you are also right.";
				mes "You are up against not a human,";
				mes "but a monster.";
				mes "Still, I trust in that old lady's";
				mes "good heart.";
				close;
			case 2:
				mes "[Old Legend Teller]";
				mes "Will you do it?";
				mes "According to the legend,";
				mes "the old lady's son was limping";
				mes "and was a traveling merchant that sold wooden dolls.";
				next;
				mes "[Old Legend Teller]";
				mes "There is a ^FF0000Slate Piece^000000 he left.";
				mes "But the piece is small and damaged,";
				mes "its hard to identify it.";
				next;
				mes "[Old Legend Teller]";
				mes "First, bring it to me.";
				mes "Down along this path";
				mes "you will meet my granddaughter near the port.";
				mes "Get the Slate Piece from there.";
				set malaya_bakona1,1;
				setquest 1174;
				close;
			}
		case 2:
			mes "[Old Legend Teller]";
			mes "The grudge against the people of";
			mes "Bakonawa- I mean, the dead old lady.";
			mes "The moon and this village...";
			mes "She will try to destroy it.";
			next;
			select("Take vengeance? After all these years?");
			mes "[Old Legend Teller]";
			mes "For some time, she has";
			mes "blamed the moon and";
			mes "resented the villagers.";
			mes "The feeling grew larger as the time passed.";
			next;
			mes "[Old Legend Teller]";
			mes "Why do you think she became such a monster?";
			mes "What do you think went through her head";
			mes "for years and years?";
			mes "Anger and vengeance.";
			next;
			mes "[Old Legend Teller]";
			mes "Unforgettable grudge";
			mes "that she was abandoned.";
			mes "against the moon and the village.";
			mes "This is why this grudge must be resolved.";
			close;
		}
	} else if (malaya_bakona1 == 1) {
		mes "[Old Legend Teller]";
		mes "Please bring the ^FF0000Slate Piece^000000.";
		mes "Down along this path";
		mes "you will meet my granddaughter near the port.";
		mes "Get the Slate Piece from there.";
		close;
	} else if (malaya_bakona1 == 2) {
		mes "[Old Legend Teller]";
		mes "Good, you have the Slate Piece.";
		mes "Hold on to it and don't lose it.";
		mes "It will be of helpful in tracking down the legend.";
		next;
		mes "[Old Legend Teller]";
		mes "I heard there is a man that lives by himself";
		mes "at the end of northwestern part of Forest Field.";
		mes "I heard someone saw a wooden doll there.";
		mes "It is such a remote place that people like us";
		mes "simply cannot travel there.";
		mes "Could you visit the place for us?";
		next;
		switch(select("Go there yourself!:Your explanation is too vague.:On my way!")) {
		case 1:
			mes "[Old Legend Teller]";
			mes "You twisted youth!";
			close;
		case 2:
			mes "[Old Legend Teller]";
			mes "You have a point, but";
			mes "this is the best I can do for now.";
			mes "The place is at the end of northwestern part of the forest.";
			mes "After you pass the bridge and travel west,";
			mes "you will see a person.";
			break;
		case 3:
			mes "[Old Legend Teller]";
			mes "You have a good heart young man!";
			mes "The place is at the end of northwestern part of the forest.";
			mes "After you pass the bridge and travel west,";
			mes "You will see a ^0000FFMalaya Immigrant^000000.";
			break;
		}
		mes "Good luck to you... for our sake...";
		erasequest 1175;
		setquest 1176;
		set malaya_bakona1,3;
		close;
	} else if (malaya_bakona1 == 3) {
		mes "[Old Legend Teller]";
		mes "The place is at the end of northwestern part of the forest.";
		mes "After you pass the bridge and travel west,";
		mes "you will see a person.";
		mes "Good luck to you... for our sake...";
		close;
	} else if (malaya_bakona1 < 6) {
		mes "[Old Legend Teller]";
		mes "The track of the old lady's son";
		mes "is connected all the way to";
		mes "Baryo Mahiwaga?";
		mes "There is a chance he wasn't a merchant...";
		mes "I'm really curious about who he was...";
		next;
		mes "[Old Legend Teller]";
		mes "Why did you come back here";
		mes "instead of going straight to";
		mes "Baryo Mahiwaga?";
		close;
	} else if (malaya_bakona1 == 6) {
		mes "[Old Legend Teller]";
		mes "Is that really true?";
		mes "Bakonawa turning into an old lady";
		mes "and fabricating the legend...";
		mes "It seems all the villagers up until now";
		mes "have been manipulated by that terrible monster.";
		next;
		mes "[Old Legend Teller]";
		mes "There is no reason to hesitate then.";
		mes "You must go into Bakonawa's lair";
		mes "before it attacks first.";
		mes "I believe we can trust you to do this, yes?";
		next;
		switch(select("Well...:Of course!")) {
		case 1:
			mes "[Old Legend Teller]";
			mes "The atmosphere was really good";
			mes "but suddenly it's all ruined.";
			mes "I didn't expect you to be so shy...";
			close;
		case 2:
			mes "[Old Legend Teller]";
			mes "I will speak to";
			mes "the village chief for you";
			mes "so that you can enter the Bakonawa Lake.";
			mes "Please get rid of this monster for us.";
			erasequest 1179;
			set malaya_bakona1,7;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 6499,5; //Ancient_Grudge
			else
				getitem 6499,3; //Ancient_Grudge
			getexp 500000,200000;
			close;
		}
		close;
	} else if (malaya_bakona1 == 7) {
		if (malaya_bakona2 < 15) {
			mes "[Old Legend Teller]";
			mes "If you don't mind,";
			mes "could you lend a hand to the Village Chief?";
			mes "Nobody cares for each other anymore";
			mes "because of Bakonawa...";
			next;
		}
		mes "[Old Legend Teller]";
		mes "The legend that";
		mes "we believed for a hundred years,";
		mes "all lies....";
		mes "Please get rid of this monster for us.";
		close;
	}
}

ma_fild02,40,240,4	script	Malaya Immigrant#bako1	578,{
	if (malaya_bakona1 < 3) {
		mes "[Malaya Immigrant]";
		mes "You must have a brave heart";
		mes "to come to such a remote place.";
		mes "How is Port Malaya these days?";
		mes "I heard the monster that lives at the lake, Baknoawa";
		mes "is threatening the villagers.";
		mes "I am in the dark about what is going on because I'm here all the time.";
		close;
	} else if (malaya_bakona1 == 3) {
		mes "[Malaya Immigrant]";
		mes "You must have a brave heart";
		mes "to come to such a remote place.";
		mes "How is Port Malaya these days?";
		mes "I heard the monster that lives at the lake, Baknoawa";
		mes "is threatening the villagers.";
		mes "I am in the dark about what is going on because I'm here all the time.";
		next;
		mes "[Malaya Immigrant]";
		mes "Are you the traveling merchant who used to sell Wooden Doll, right?";
		mes "I don't know about any traveling merchant, but by Wooden Doll";
		mes "(going through things) do you mean this?";
		mes "I don't know about the specifics, but";
		mes "I think it's related to what I heard long time ago.";
		next;
		switch(select("What are you doing here?:Do you know about this Slate Piece?:Please tell me the story.:Who is the traveling merchant?")) {
		case 1:
			mes "[Malaya Immigrant]";
			mes "I liked the environment here";
			mes "so I decided to stay and live.";
			mes "There is no obligation here.";
			mes "To me, that's as good as heaven.";
			close;
		case 2:
			mes "[Malaya Immigrant]";
			mes "It is a very old Slate Piece.";
			mes "I'm sorry but I never seen this before.";
			mes "There is some kind of writing here";
			mes "but I can't make it out.";
			close;
		case 3:
			mes "[Malaya Immigrant]";
			mes "It's a simple story.";
			mes "^0000FFA wounded man who I had never seen before^000000";
			mes "^0000FFcame to my house and asked for help.^000000";
			mes "^0000FFOnce healed, he made a Wooden Doll^000000";
			next;
			mes "[Malaya Immigrant]";
			mes "^0000FFthat is suppose to chase away evil spirits ^000000";
			mes "^0000FFas a token of gratitude,^000000";
			mes "^0000FFand left for Baryo Mahiwaga.^000000";
			next;
			select("He left for Baryo Mahiwaga?");
			mes "[Malaya Immigrant]";
			mes "According to what I've heard";
			mes "that's correct. But the story has been";
			mes "passed on from mouth to mouth for a";
			mes "long time. I can't be sure.";
			next;
			mes "From Baryo Mahiwaga village, using keyword ^0000FFMalaya^000000,";
			mes "or ^0000FFBakonawa^000000,";
			mes "maybe I could find out the identity and whereabouts";
			mes "of the traveling merchant.";
			erasequest 1176;
			setquest 1177;
			set malaya_bakona1,4;
			close;
		case 4:
			mes "[Malaya Immigrant]";
			mes "Well, there is a lack of information";
			mes "so I can't make say for sure but";
			mes "I'm skeptical if he was in fact even a merchant.";
			mes "Coming to a town with a";
			mes "critical wound seems too suspicious...";
			next;
			mes "[Malaya Immigrant]";
			mes "And craving a Wooden Doll";
			mes "could be seen to have some kind of ritualistic meaning.";
			mes "Protecting one from some evil force...";
			mes "that kind of thing.";
			next;
			mes "Identity of the traveling merchant...";
			mes "Looks like there is one more";
			mes "mystery to be solved.";
			mes "I suppose it will all come to light";
			mes "soon enough.";
			close;
		}
	} else {
		mes "[Malaya Immigrant]";
		mes "I will tell you again slowly";
		mes "the story that has been passed on.";
		mes "Listen carefully and repeat...";
		mes "no, I mean, you don't have repeat it.";
		next;
		mes "[Orally Transmitted Story]";
		mes "^0000FFA wounded man who I had never seen before^000000";
		mes "^0000FFcame to my house and asked for help.^000000";
		mes "^0000FFOnce healed, as a token of gratitude, he made a Wooden Doll^000000";
		mes "^0000FFthat is suppose to chase away evil sprits.^000000";
		mes "^0000FFThen he left for Baryo Mahiwaga.^000000";
		next;
		mes "From Baryo Mahiwaga village, using keyword ^0000FFMalaya^000000,";
		mes "or ^0000FFBakonawa^000000,";
		mes "maybe I could find out the identity and whereabouts";
		mes "of the traveling merchant.";
		close;
	}
}

ma_fild01,165,237,4	script	Malaya Immigrant#bako2	582,{
	if (malaya_bakona1 < 4) {
		mes "[Malaya Immigrant]";
		mes "Have you been to";
		mes "Port Malaya?";
		mes "I am curious to know";
		mes "what is going on there";
		mes "but I can't travel because there are monsters everywhere.";
		close;
	} else if (malaya_bakona1 == 4) {
		mes "[Malaya Immigrant]";
		mes "Wooden Doll?";
		mes "There is a tale related to that,";
		mes "but you didn't come all the way";
		mes "just to hear some folktale right?";
		next;
		switch(select("I just came here to take a break.:Tell me the tale.")) {
		case 1:
			mes "[Malaya Immigrant]";
			mes "You must have a lot of free time on your hands!";
			mes "I'm no travel agent";
			mes "so go bother someone else!";
			close;
		case 2:
			mes "[Malaya Immigrant]";
			mes "It's baloney";
			mes "so I don't really remember the details.";
			next;
			mes "[Summary of the folktale]";
			mes "Long time ago, 5 swordsmen fought";
			mes "against the monster Bakonawa.";
			mes "Four died and one left a critical wound";
			mes "to the monster but in return";
			mes "sustained a serious wound in his leg himself.";
			next;
			mes "[Summary of the folktale]";
			mes "After escaping the scene, Bakonawa transformed into a human";
			mes "and secretly pursued the swordsman.";
			mes "The swordsman made a Wooden Doll that";
			mes "can keep the monster from approaching.";
			next;
			mes "[Malaya Immigrant]";
			mes "This is the end of story.";
			mes "Without any conclusion...";
			next;
			mes "[Malaya Immigrant]";
			mes "I heard there is a record that the swordsman left";
			mes "but I don't understand why";
			mes "he would leave it here in such a distant place";
			mes "here instead of Malaya.";
			next;
			select("I wish to see the record.");
			mes "[Malaya Immigrant]";
			mes "The record is engraved on the stone ahead.";
			mes "However, the stone is so badly";
			mes "damaged and some pieces fell out that";
			mes "it will be hard to make the words out.";
			next;
			mes "Investigate the stone ahead.";
			erasequest 1177;
			setquest 1178;
			set malaya_bakona1,5;
			close;
		}
	} else if (malaya_bakona1 == 5) {
		mes "[Malaya Immigrant]";
		mes "The stone ahead holds a record that";
		mes "a swordsman from a long time ago left.";
		next;
		switch(select("Where did this swordsman go after?:Tell me the tale again.")) {
		case 1:
			mes "[Malaya Immigrant]";
			mes "Well, there is no story after that so";
			mes "I guess nobody would know what happened.";
			close;
		case 2:
			mes "[Summary of the folktale]";
			mes "Long time ago, 5 swordsmen fought";
			mes "against the monster Bakonawa.";
			mes "Four died and one left a critical wound";
			mes "on the monster but in return";
			mes "sustained a serious wound in his leg himself.";
			next;
			mes "[Summary of the folktale]";
			mes "After escaping the scene, Bakonawa transformed into a human";
			mes "and secretly pursued the swordsman.";
			mes "The swordsman made a Wooden Doll that";
			mes "can keep the monster from approaching.";
			close;
		}
	} else {
		mes "[Malaya Immigrant]";
		mes "I suppose you wish to hear the story again right?";
		mes "No problem! I can tell this story forever!";
		next;
		mes "[Summary of the folktale]";
		mes "Long time ago, 5 swordsmen fought";
		mes "against the monster Bakonawa.";
		mes "Four died and one left a critical wound";
		mes "on the monster but in return";
		mes "sustained a serious wound in his leg himself.";
		next;
		mes "[Summary of the folktale]";
		mes "After escaping the scene, Bakonawa transformed into a human";
		mes "and secretly pursued the swordsman.";
		mes "The swordsman made a Wooden Doll that";
		mes "can keep the monster from approaching.";
		close;
	}
}

ma_fild01,171,235,0	script	#bako1	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona1 == 5) {
		mes "The damage is so severe";
		mes "that the record is unidentifiable.";
		mes "When inserting the Slate Piece";
		mes "to a hole on the wall, it fits perfectly like a piece of puzzle.";
		mes "The letters are not clear but you can still read it.";
		next;
		callsub L_Record;
		set malaya_bakona1,6;
		erasequest 1178;
		setquest 1179;
		close;
	} else if (malaya_bakona1 == 6) {
		mes "Here is the record left by a swordsman";
		mes "from a hundred years ago.";
		next;
		switch(select("I don't need to read it.:Read the record again.")) {
		case 1:
			mes "I remember the story clearly.";
			mes "Let's tell the ^0000FFOld Legend Teller^000000 in Malaya";
			mes "about what I discovered.";
			close;
		case 2:
			callsub L_Record;
			close;
		}
	}
	end;

L_Record:
	mes "[Record left by a swordsman from a hundred years ago]";
	mes "After fighting with Bakonawa, I sustained a critical wound";
	mes "and came to this place.";
	mes "Only thing I can do is";
	mes "Place the Wooden Doll in one place";
	mes "the monster would come.";
	next;
	mes "[Record left by a swordsman from a hundred years ago]";
	mes "^0000FFSometimes transforming into a child, or even a old lady,^000000";
	mes "I know that ^0000FFBakonawa^000000has been";
	mes "chasing after me in secret to kill me.";
	mes "Because of that critical injury the monster * sustained,";
	next;
	mes "[Record left by a swordsman from a hundred years ago]";
	mes "** it will need nearly a hundred years";
	mes "for Bakonawa to absorb the power of the moon";
	mes "to fully recover its power.";
	mes "Beware of the day the moon disappears.";
	next;
	mes "[Record left by a swordsman from a hundred years ago]";
	mes "The day will come when Bakonawa";
	mes "will run amuck.";
	mes "But it will take nearly a hundred years to fully recover its power.";
	mes "There will always be someone better than me";
	mes "to defeat the vile creature.";
	next;
	mes "[Record left by a swordsman from a hundred years ago]";
	mes "I will place my trust in the one that will replace me ages from now...";
	next;
	mes "How could this be...";
	mes "Lie told by Bakonawa when it turned into an old lady";
	mes "in order to take revenge on the swordsman";
	mes "turned into a legend after all these years.";
	next;
	mes "I found out that Bakonawa";
	mes "is nothing but a blood thirsty monster.";
	mes "I must tell what I know to the ^0000FFOld Legend Teller^000000";
	mes "in Malaya.";
	return;
}

malaya,304,100,4	script	Old Man's Granddaughter	576,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona1 == 0) {
		mes "[Old Man's Granddaughter]";
		mes "Grandpa believes";
		mes "Bakonawa can";
		mes "turn good.";
		mes "Do you think it's possible?";
		close;
	} else if (malaya_bakona1 == 1) {
		mes "[Old Man's Granddaughter]";
		mes "^FF0000Slate Piece^000000?";
		mes "Why would you need something";
		mes "that is barely recognizable?";
		mes "I'll give it to you if you want.";
		next;
		mes "Let's go to the";
		mes "^FF0000Old Legend Teller^000000";
		mes "now that I have the Slate Piece.";
		erasequest 1174;
		setquest 1175;
		set malaya_bakona1,2;
		close;
	} else if (malaya_bakona1 == 2) {
		mes "[Old Man's Granddaughter]";
		mes "Please take this Slate Piece";
		mes "and deliver it to my grandpa.";
		next;
		mes "Let's go to the";
		mes "^FF0000Old Legend Teller^000000";
		mes "now that I have the Slate Piece.";
		close;
	} else {
		mes "[Old Man's Granddaughter]";
		mes "Because of Bakonawa,";
		mes "the village is always unpeaceful.";
		close;
	}
}

malaya,286,269,4	script	Angry Man#bako2	578,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	mes "[Angry Man]";
	mes "Calm Bakonawa?";
	mes "Do you know how many people have been";
	mes "sacrificed by Bakonawa?";
	mes "I will fight on my own if I have to!";
	close;
}

malaya,276,269,5	script	Calm Woman#bako2	579,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	mes "[Calm Little Girl]";
	mes "It is too dangerous to fight against";
	mes "Bakonawa. There is a chance";
	mes "it will get more angry and put children and";
	mes "elders in danger.";
	close;
}

malaya,276,262,4	script	Angry Boy#bako2	577,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	mes "[Angry Boy]";
	mes "I lost my father and my friend";
	mes "to that Bakonawa.";
	mes "I will surely revenge them!";
	close;
}

malaya,283,265,4	script	Village Chief#bako2	580,{
	if (checkweight(1301,3) == 0) {
		mes "You cannot start the conversation. You are carrying too many items. -";
		close;
	}
	if (BaseLevel < 120) {
		mes "[Village Chief]";
		mes "I'm desperate for a helping hand";
		mes "but you look";
		mes "too weak and fragile.";
		next;
		mes "[Village Chief]";
		mes "Please come back when";
		mes "you grow strong enough";
		mes "to match Incubus.";
		close;
	}
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona2 == 0) {
		if (malaya_bakona1 <= 5) {
			mes "[Village Chief]";
			mes "I'm don't know what's the right decision.";
			mes "To fight against Bakonawa,";
			mes "or calm it by offering it a sacrificial gift.";
		} else {
			mes "[Village Chief]";
			mes "The legend was all a lie?";
			mes "It seems all the villagers up until now";
			mes "were manipulated by that vile monster.";
			next;
			mes "[Village Chief]";
		}
		mes "Recently, there have been more people that have";
		mes "been harmed by Bakonawa.";
		next;
		mes "[Village Chief]";
		mes "There are some missing villagers";
		mes "but I can't find out if";
		mes "they are simply missing or if they have been";
		mes "killed by Bakonawa.";
		next;
		mes "[Village Chief]";
		mes "I heard that the belongings of the missing people";
		mes "are being found at Baryo Mahiwaga Field.";
		mes "Please go there to find ^0000FFLost Belongings^000000";
		mes "and give them to the families of";
		mes "the missing people";
		mes "in whatever amount they want.";
		next;
		mes "[Village Chief]";
		mes "^0000FFLost Belongings^000000";
		mes "are said to be carried by";
		mes "^FF0000Tiyanak^000000 that roams Baryo Mahiwaga.";
		next;
		switch(select("Do it yourself.:I'm on my way.")) {
		case 1:
			mes "[Village Chief]";
			mes "You give me a lot to think about.";
			mes "Leave the village at once.";
			close;
		case 2:
			mes "[Village Chief]";
			mes "Let's start then. First,";
			mes "retrieve two ^FF0000Lost Belongings^000000 from Tiyanak";
			mes "and take them to ^0000FFMissing Person's Father^000000";
			mes "for me.";
			set malaya_bakona2,1;
			setquest 1180;
			close;
		}
	} else if (malaya_bakona2 == 1) {
		mes "[Village Chief]";
		mes "From Tiyanak that roams Baryo Mahiwaga Field,";
		mes "retrieve two ^FF0000Lost Belongings^000000";
		mes "and deliver them to ^0000FFMissing Person's Father^000000";
		mes "for me.";
		close;
	} else if (malaya_bakona2 == 2) {
		mes "[Village Chief]";
		mes "Retrieve Seven ^FF0000Lost Belongings^000000 from Tiyanak";
		mes "and deliver them to ^0000FFMissing Person's Friend^000000";
		mes "for me.";
		close;
	} else if (malaya_bakona2 == 3) {
		mes "[Village Chief]";
		mes "Retrieve three ^FF0000Lost Belongings^000000 from Tiyanak";
		mes "and deliver them to ^0000FFMissing Person's Son^000000";
		mes "for me.";
		close;
	} else if (malaya_bakona2 == 4) {
		mes "[Village Chief]";
		mes "Retrieve five ^FF0000Lost Belongings^000000 from Tiyanak";
		mes "and deliver them to ^0000FFMissing Person's Mother^000000";
		mes "for me.";
		close;
	} else if (malaya_bakona2 == 5) {
		mes "[Village Chief]";
		mes "So it's clear that all the missing people";
		mes "have been killed by Bakonawa.";
		next;
		mes "[Villagers]";
		mes "Kill Bakonawa!";
		mes "Let's get rid of the monster ourselves!";
		next;
		mes "[Village Chief]";
		mes "It seems we would no longer be able to";
		mes "hold rituals to calm Bakonawa.";
		next;
		mes "[Village Chief]";
		mes "Young Fortune Teller is looking for your help";
		mes "saying that the energy of the moon seems strange.";
		erasequest 1184;
		setquest 1185;
		set malaya_bakona2,6;
		if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
			getitem 12700,7; //Insideout_Shirt
		else
			getitem 12700,5; //Insideout_Shirt
		close;
	} else if (malaya_bakona2 == 6) {
		mes "[Village Chief]";
		mes "Young Fortune Teller is looking for your help";
		mes "saying that the energy of the moon seems strange.";
		close;
	} else if (malaya_bakona2 == 7) {
		mes "[Village Chief]";
		mes "I know that terrible things happened";
		mes "long time ago when the moon disappeared.";
		mes "I hope the moon recovers its strength";
		mes "with your devoted effort.";
		close;
	} else if (malaya_bakona2 == 8) {
		mes "[Village Chief]";
		mes "I will tell the";
		mes "Young Fortune Teller to help you.";
		mes "But before that, there is";
		mes "something you must do immediately.";
		next;
		mes "[Village Chief]";
		mes "We never know when Bakonawa will attack";
		mes "the village so we must set traps near the village";
		mes "entrance and near the cave.";
		next;
		mes "[Village Chief]";
		mes "I would be grateful if you help us.";
		mes "I have dispatched workers";
		mes "near where traps will be set up,";
		mes "so you just have to visit about 5 places.";
		next;
		switch(select("Sounds like too much work.:Sure thing.")) {
		case 1:
			mes "[Village Chief]";
			mes "This operation means life and death to us";
			mes "yet you refuse it easily as if";
			mes "it was some kind of a chore...";
			next;
			mes "[Village Chief]";
			mes "What a hero!";
			close;
		case 2:
			mes "[Village Chief]";
			mes "The first trap will be set up at";
			mes "Baryo Mahiwaga Field";
			mes "near the village entrance. ^0000FFGruffy Worker^000000";
			mes "will be waiting for you. He will be very helpful.";
			erasequest 1187;
			setquest 1188;
			set malaya_bakona2,9;
			close;
		}
	} else if (malaya_bakona2 == 9) {
		mes "[Village Chief]";
		mes "The first trap will be set up at";
		mes "Baryo Mahiwaga Field";
		mes "near the village entrance. ^0000FFGruffy Worker^000000";
		mes "will be waiting for you. He will be very helpful.";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[Village Chief]";
		mes "The second trap will be set up";
		mes "near a place where it connects from";
		mes "Baryo Mahiwaga Field to Bakonawa Lake.";
		mes "^0000FFGrumpy Worker^000000";
		mes "will be waiting for you. He will be very helpful.";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[Village Chief]";
		mes "The third trap will be set up";
		mes "near Bakonawa Lake Entrance.";
		mes "^0000FFCowardly Worker^000000";
		mes "will be waiting for you. He will be very helpful.";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[Village Chief]";
		mes "The fourth trap will be set up";
		mes "near the entrance of Bakonawa Lake as well.";
		mes "^0000FFGloomy Worker^000000 will be waiting for you.";
		mes "He will be very helpful.";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[Village Chief]";
		mes "The fifth trap will be set up";
		mes "near the entrance of Bakonawa Lake too.";
		mes "^0000FFSentimental Worker^000000";
		mes "will be waiting for you. He will be very helpful.";
		close;
	} else if (malaya_bakona2 == 14) {
		mes "[Village Chief]";
		mes "It looks like the traps are all set up.";
		mes "We just finished our village meeting on";
		mes "what to do about Bakonawa.";
		next;
		mes "[Village Chief]";
		mes "We have concluded that";
		mes "we will fight against Bakonawa.";
		mes "Please help us by";
		mes "attacking his lair.";
		erasequest 1193;
		set malaya_bakona2,15;
		getexp 1000000,600000;
		if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
			getitem 6497,7; //Lesser_Agimat
		else
			getitem 6497,5; //Lesser_Agimat
		close;
	} else if (malaya_bakona2 == 15) {
		mes "[Village Chief]";
		if (malaya_bakona1 < 7) {
			mes "Would you visit ^0000FFOld Legend Teller^000000";
			mes "when you have a chance?";
			mes "I think you would be able to help him.";
			next;
			mes "[Village Chief]";
			mes "Thank you.";
		}
		mes "Please think of the countless victims";
		mes "and defeat Bakonawa";
		mes "for their sake.";
		close;
	}
}

malaya,269,267,5	script	Missing Person's Father	582,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona2 == 0) {
		mes "[Missing Person's Father]";
		mes "Please find our";
		mes "child.";
		mes "Bakonawa would have not harmed our child.";
		mes "He must be around here somewhere.";
		close;
	} else if (malaya_bakona2 == 1) {
		if (countitem(6520) < 2) {
			mes "[Missing Person's Father]";
			mes "You are looking for two of his ^FF0000Lost Belongings^000000?";
			mes "Are you confident that";
			mes "he already died?";
			close;
		}
		mes "[Missing Person's Father]";
		mes "This... is our child's ^FF0000Lost Belongings^000000";
		mes "for sure.";
		mes "The monster got to him after all....";
		next;
		mes "The man is unable to continue as he tries to hold back his tears.";
		mes "Let's continue to find the lost belongings of the missing people.";
		mes "Let's retrieve them from Tiyanak that roams Baryo Mahiwaga Field,";
		mes "seven ^FF0000Lost Belongings^000000";
		mes "and deliver them to ^0000FFMissing Person's Friend^000000.";
		delitem 6520,2; //Lost_Belongings
		erasequest 1180;
		setquest 1181;
		set malaya_bakona2,2;
		close;
	} else if (malaya_bakona2 == 2) {
		mes "[Missing Person's Father]";
		mes "My baby... my poor baby...";
		next;
		mes "The man is unable to continue as he tries to hold back his tears.";
		mes "Let's continue to find the lost belongings of the missing people.";
		mes "Retrieve seven ^FF0000Lost Belongings^000000 from Tiyanak";
		mes "and deliver them to ^0000FFMissing Person's Friend^000000.";
		close;
	} else {
		mes "[Missing Person's Father]";
		mes "My baby... my poor baby...";
		close;
	}
}

malaya,265,274,5	script	Missing Person's Friend	577,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona2 < 2) {
		mes "[Missing Person's Friend]";
		mes "Please find";
		mes "my friend.";
		mes "We were playing ball together";
		mes "and suddenly my friend disappeared.";
		next;
		mes "[Missing Person's Friend]";
		mes "I'm sure he is alive and well";
		mes "somewhere.";
		close;
	} else if (malaya_bakona2 == 2) {
		if (countitem(6520) < 7) {
			mes "[Missing Person's Friend]";
			mes "You are looking for seven ^FF0000Lost Belongings^000000";
			mes "of my friend?";
			mes "My friend is not dead!";
			close;
		}
		mes "[Missing Person's Friend]";
		mes "These are marbles and toys I gave him...";
		mes "These are clearly ^FF0000Lost Belongings^000000";
		mes "of my friend... Where is my friend?";
		mes "Bring him here, bring him here now!";
		callsub L_Quest;
		delitem 6520,7; //Lost_Belongings
		erasequest 1181;
		setquest 1182;
		set malaya_bakona2,3;
		close;
	} else {
		mes "[Missing Person's Friend]";
		mes "Bring back my friend!";
		mes "Bring back my friend now!";
		mes "My friend is alive,";
		mes "It's all a lie, sob~";
		if (malaya_bakona2 == 3)
			callsub L_Quest;
		close;
	}

L_Quest:
	next;
	mes "Leaving behind the crying boy,";
	mes "let's continue to find the lost belongings of the missing people.";
	mes "Retrieve three ^FF0000Lost Belongings^000000 from Tiyanak";
	mes "and deliver them to ^0000FFMissing Person's Son^000000.";
	return;
}

malaya,270,278,4	script	Missing Person's Son	578,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona2 < 3) {
		mes "[Missing Person's Son]";
		mes "Bakonawa has hurt my father?";
		mes "I can't believe this.";
		mes "Please find my father!";
		close;
	} else if (malaya_bakona2 == 3) {
		if (countitem(6520) < 3) {
			mes "[Missing Person's Son]";
			mes "You are looking for three ^FF0000Lost Belongings^000000";
			mes "of my father? Why lost belongings and not my father?";
			mes "No, that can't be it. He is alive somewhere!";
			close;
		}
		mes "[Missing Person's Son]";
		mes "These are clearly his clothes and shoes...";
		mes "These are ^FF0000Lost Belongings^000000 of my father.";
		mes "Oh dear lord... father!";
		callsub L_Quest;
		delitem 6520,3; //Lost_Belongings
		erasequest 1182;
		setquest 1183;
		set malaya_bakona2,4;
		close;
	} else {
		mes "[Missing Person's Son]";
		mes "Why did such a thing happen....";
		if (malaya_bakona2 == 4)
			callsub L_Quest;
		close;
	}

L_Quest:
	next;
	mes "Man crying in agony.";
	mes "Let's continue to find the lost belongings of the missing people.";
	mes "Retrieve five ^FF0000Lost Belongings^000000 from Tiyanak";
	mes "and deliver them to ^0000FFMissing Person's Mother^000000.";
	return;
}

malaya,265,284,4	script	Missing Person's Mother	579,{
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona2 < 4) {
		mes "[Missing Person's Mother]";
		mes "Please find my child.";
		mes "I sent her out to do a chore";
		mes "and she still isn't back.";
		close;
	} else if (malaya_bakona2 == 4) {
		if (countitem(6520) < 5) {
			mes "[Missing Person's Mother]";
			mes "You are looking for five ^FF0000Lost Belongings^000000 of my child?";
			mes "What does this mean?";
			mes "Are you saying my child is dead?";
			close;
		}
		mes "[Missing Person's Mother]";
		mes "This is my child's hair comb.";
		mes "Why do you have five ^FF0000Lost Belongings^000000 of my child?";
		mes "Why...? She's... dead?";
		next;
		mes "[Missing Person's Mother]";
		mes "No wait... I think I hear her voice.";
		mes "She's going to be home soon. I should go home now.";
		mes "I should prepare a dinner for her. She must be starving.";
		mes "Ha ha...";
		next;
		mes "A mother that has gone mad...";
		mes "Now that I finished finding the missing people,";
		mes "I should report back to the Village Chief.";
		delitem 6520,5; //Lost_Belongings
		erasequest 1183;
		setquest 1184;
		set malaya_bakona2,5;
		close;
	} else {
		mes "[Missing Person's Mother]";
		mes "Ha ha ha... I can hear my child's voice,";
		mes "just listen closely.";
		mes "Can't you hear her calling her mother?";
		mes "Ha ha ha...";
		next;
		mes "A mother that has gone mad...";
		if (malaya_bakona2 == 5) {
			mes "Now that I finished finding the missing people,";
			mes "I should report back to the Village Chief.";
		}
		close;
	}
}

malaya,289,364,4	script	Young Fortune Teller	583,{
	if (checkweight(1301,3) == 0) {
		mes "You cannot start the conversation. You are carrying too many items. -";
		close;
	}
	if (malaya_hi < 20) {
		mes "- He seems cautious of you. -";
		close;
	}
	if (malaya_bakona2 < 6) {
		mes "[Young Fortune Teller]";
		mes "The energy of the moon grew weak.";
		mes "The reason there are more monsters,";
		mes "and the reason there are more victims,";
		mes "is all because of this.";
		close;
	} else if (malaya_bakona2 == 6) {
		mes "[Young Fortune Teller]";
		mes "The energy of the moon grew weak for a couple of days.";
		mes "The reason there are more monsters,";
		mes "and the reason there are more victims, is all because of this.";
		next;
		mes "[Young Fortune Teller]";
		mes "I'm trying to hold a ritual";
		mes "that will restore the moon's energy by sacrificing monsters' blood,";
		mes "so I need you to hunt fifteen ^FF0000Tikbalang^000000";
		mes "at Baryo Mahiwaga Field.";
		next;
		switch(select("It's none of my business.:You can count on me.")) {
		case 1:
			mes "[Young Fortune Teller]";
			mes "You are so selfish!";
			mes "During the ritual,";
			mes "I will pray for your bad luck too.";
			close;
		case 2:
			mes "[Young Fortune Teller]";
			mes "Hurry.";
			mes "If the moon completely disappears,";
			mes "there will be a great disaster.";
			erasequest 1185;
			setquest 1186;
			set malaya_bakona2,7;
			close;
		}
	} else if (malaya_bakona2 == 7) {
		if (checkquest(1186,HUNTING) == 2) {
			mes "[Young Fortune Teller]";
			mes "It looks like you took care of ^FF0000Tikbalang^000000";
			mes "well enough.";
			mes "I think I can start the ritual now.";
			mes "There are some items that we need, please go to";
			mes "the Village Chief for help.";
			erasequest 1186;
			setquest 1187;
			set malaya_bakona2,8;
			if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE))
				getitem 12699,7; //Tikbalang_Belt
			else
				getitem 12699,5; //Tikbalang_Belt
			close;
		} else {
			mes "[Young Fortune Teller]";
			mes "I need you to hunt fifteen ^FF0000Tikbalang^000000";
			mes "at Baryo Mahiwaga Field.";
			next;
			mes "[Young Fortune Teller]";
			mes "Hurry.";
			mes "If the moon completely disappears,";
			mes "there will be a great disaster.";
			close;
		}
	} else if (malaya_bakona2 == 8) {
		mes "[Young Fortune Teller]";
		mes "I think I can start the ritual now.";
		mes "There are some items that we need, please go to";
		mes "the Village Chief for help.";
		close;
	} else {
		mes "[Young Fortune Teller]";
		mes "On the day when the moon fully disappears,";
		mes "the dragon will attack the village.";
		mes "No one will be safe.";
		close;
	}
	end;
}

ma_fild01,54,253,4	script	Gruffy Worker#bako2	582,{
	if (malaya_bakona2 < 9) {
		mes "[Gruffy Worker]";
		mes "The Village Chief told me to";
		mes "wait for you here.";
		close;
	} else if (malaya_bakona2 == 9) {
		mes "[Gruffy Worker]";
		mes "The trap will be set right in front.";
		mes "Walk forward a little.";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[Gruffy Worker]";
		mes "You can find the";
		mes "Grumpy Worker near where";
		mes "Baryo Mahiwaga Field connects to Bakonawa Lake.";
		mes "Go and set up the trap together.";
		close;
	} else {
		mes "[Gruffy Worker]";
		mes "Are you trying to advertise that";
		mes "there is a trap here? Step aside.";
		close;
	}
	end;
}

ma_fild01,54,244,0	script	#bako2	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 9) {
		mes "I should set up the trap";
		mes "right about here.";
		next;
		mes "[Gruffy Worker]";
		mes "Using the tools like this";
		mes "bang bang bang!";
		next;
		mes "bang bang bang!";
		next;
		mes "The trap is now set.";
		next;
		mes "[Gruffy Worker]";
		mes "You can find the";
		mes "Grumpy Worker near where";
		mes "Baryo Mahiwaga Field connects to Bakonawa Lake.";
		mes "Go and set up the trap together.";
		erasequest 1188;
		setquest 1189;
		set malaya_bakona2,10;
		close;
	} else if (malaya_bakona2 == 10) {
		mes "The trap has been set up here.";
		next;
		mes "[Gruffy Worker]";
		mes "This trap is not meant to capture you,";
		mes "so move.";
		next;
		mes "[Gruffy Worker]";
		mes "You can find the";
		mes "Grumpy Worker near where";
		mes "Baryo Mahiwaga Field connects to Bakonawa Lake.";
		mes "Go there to him.";
		close;
	}
	end;
}

ma_fild01,236,119,5	script	Grumpy Worker#bako2	577,{
	if (malaya_bakona2 < 10) {
		mes "[Grumpy Worker]";
		mes "Village Chief told me to";
		mes "wait for you here.";
		mes "Sooo boring!";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[Grumpy Worker]";
		mes "A hole needs to be dug up in front of here?";
		mes "I have to dig too?";
		mes "Says who?";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[Grumpy Worker]";
		mes "Go find the Cowardly Worker";
		mes "near the entrance of Bakonawa Lake.";
		mes "Come on, move it!";
		close;
	} else {
		mes "[Grumpy Worker]";
		mes "I set up the trap";
		mes "and you are advertising that it's here.";
		mes "Scram!";
		close;
	}
}

ma_fild01,242,116,0	script	#bako3	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 10) {
		mes "I should set up the trap";
		mes "right about here.";
		next;
		mes "[Grumpy Worker]";
		mes "I really don't like it here!";
		mes "...";
		mes "With this pickax,";
		mes "dig dig dig!";
		next;
		mes "dig dig dig!";
		next;
		mes "The trap is now set.";
		next;
		mes "[Grumpy Worker]";
		mes "Go find the Cowardly Worker";
		mes "near the entrance of Bakonawa Lake.";
		mes "Come on, move it!";
		erasequest 1189;
		setquest 1190;
		set malaya_bakona2,11;
		close;
	} else if (malaya_bakona2 == 11) {
		mes "The trap has been set up here.";
		next;
		mes "[Grumpy Worker]";
		mes "Are you trying to test";
		mes "with your body if the trap works?";
		mes "Move aside!";
		next;
		mes "[Grumpy Worker]";
		mes "Go find the Cowardly Worker";
		mes "near the entrance of Bakonawa Lake.";
		mes "Come on, move it!";
		close;
	}
	end;
}

ma_scene01,177,89,4	script	Cowardly Worker#bako2	578,{
	if (malaya_bakona2 < 11) {
		mes "[Cowardly Worker]";
		mes "Village Chief told me to";
		mes "wait for you here.";
		mes "Why me? I have a bad feeling about this....";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[Cowardly Worker]";
		mes "set up a trap in front of here?";
		mes "Village Chief said I have to help too?";
		mes "Can you please do it by yourself?";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[Cowardly Worker]";
		mes "Go up and you will";
		mes "find the Gloomy Worker.";
		mes "Go! You scare me.";
		mes "You look like you are going to beat me up.";
		close;
	} else {
		mes "[Cowardly Worker]";
		mes "Go away!";
		mes "What if Bakonawa";
		mes "appears because of you?";
		mes "I'm scared to death!";
		close;
	}
	end;
}

ma_scene01,179,85,0	script	#bako4	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 11) {
		mes "I should set up the trap";
		mes "right about here.";
		next;
		mes "[Cowardly Worker]";
		mes "There is nothing weird";
		mes "buried here right?";
		mes "...";
		mes "Using the shovel, dig dig dig!";
		next;
		mes "dig dig dig!";
		next;
		mes "The trap is now set.";
		next;
		mes "[Cowardly Worker]";
		mes "Go up and you will";
		mes "find the Gloomy Worker.";
		erasequest 1190;
		setquest 1191;
		set malaya_bakona2,12;
		close;
	} else if (malaya_bakona2 == 12) {
		mes "The trap has been set up here.";
		next;
		mes "[Cowardly Worker]";
		mes "Step aside immediately!";
		mes "Bakonawa might find out this is a trap";
		mes "and come for us.";
		next;
		mes "[Cowardly Worker]";
		mes "Go up and you will";
		mes "find the Gloomy Worker.";
		emotion ET_SWEAT, playerattached();
		close;
	}
	end;
}

ma_scene01,141,118,4	script	Gloomy Worker#bako2	582,{
	if (malaya_bakona2 < 12) {
		mes "[Gloomy Worker]";
		mes "Village Chief told me to wait for you here.";
		mes "He must want me to do something.";
		mes "Whew...";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[Gloomy Worker]";
		mes "set up a trap on the left side?";
		mes "I don't think it will be much use...";
		mes "Whew, I should've moved away or something...";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[Gloomy Worker]";
		mes "We are all gonna die anyway by Bakonawa.";
		mes "This is pointless.";
		mes "Just go up the path and you will find";
		mes "Sentimental Worker.";
		close;
	} else {
		mes "[Gloomy Worker]";
		mes "Bakonawa is going to attack us anyway.";
		mes "What pointless work...";
		close;
	}
	end;
}

ma_scene01,138,122,0	script	#bako5	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 12) {
		mes "I should set up the trap";
		mes "right about here.";
		next;
		mes "[Gloomy Worker]";
		mes "Just catch this net,";
		mes "throw throw!";
		next;
		mes "throw throw!";
		next;
		mes "The trap is now set.";
		next;
		mes "[Gloomy Worker]";
		mes "Just go up the path and you will find";
		mes "Sentimental Worker.";
		mes "Though I doubt it will be much help.";
		erasequest 1191;
		setquest 1192;
		set malaya_bakona2,13;
		close;
	} else if (malaya_bakona2 == 13) {
		mes "The trap has been set up here.";
		next;
		mes "[Gloomy Worker]";
		mes "The trap is meaningless.";
		mes "See? It doesn't even work.";
		close;
	}
	end;
}

ma_scene01,175,170,5	script	Sentimental Worker#bako2	578,{
	if (malaya_bakona2 < 13) {
		mes "[Sentimental Worker]";
		mes "Village Chief told me to wait for you here.";
		mes "Is there a some kind of surprise event?";
		mes "My heart is beating faster~";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[Sentimental Worker]";
		mes "Wow! So we are going to work together";
		mes "to set up a trap behind this place?";
		mes "This is sooo cool!";
		mes "This is the coolest thing in the world!";
		close;
	} else if (malaya_bakona2 == 14) {
		mes "[Sentimental Worker]";
		mes "Now that the trap is set,";
		mes "Are we going to report back to Village Chief?";
		mes "Oh what fun!";
		mes "It sounds so exiting!";
		close;
	} else {
		mes "[Sentimental Worker]";
		mes "More I think about it, more exited I get.";
		mes "I'm secretly guarding the trap!";
		mes "I want to hear out loud.";
		mes "I have a trap in front of me! Ha ha ha ha~";
		emotion ET_PROFUSELY_SWEAT, playerattached();
		close;
	}
	end;
}

ma_scene01,171,174,0	script	#bako6	139,2,2,{
	end;
OnTouch_:
	if (malaya_bakona2 == 13) {
		mes "I should set up the trap";
		mes "right about here.";
		next;
		mes "[Sentimental Worker]";
		mes "Wow! This really is a perfect place";
		mes "to set up a trap.";
		mes "I'm going to throw the rope!";
		mes "Here goes the rope!";
		next;
		mes "Here goes the rope!";
		next;
		mes "The trap is now set.";
		mes "Let's go to the Village Chief";
		mes "now that the trap is set.";
		erasequest 1192;
		setquest 1193;
		set malaya_bakona2,14;
		close;
	} else if (malaya_bakona2 == 14) {
		mes "The trap is set here.";
		next;
		mes "[Sentimental Worker]";
		mes "Try out the trap first!";
		mes "I'm so curious";
		mes "what would happen!";
		mes "It's going to be so much fun!";
		close;
	}
	end;
}

// Original name: "Bakonawa Introduction Quest Helper#bako1"
sec_in02,10,16,5	script	Bakonawa Intro Helper	543,{
	if (callfunc("F_GM_NPC",1854,0) < 1) {
		mes "Seafood and Black Bean Sauce Noodle!";
		close;
	}
	mes "[Briquet Scheme]";
	mes "Just boldly tell me";
	mes "what is it that you want!";
	next;
	switch(select("Reset all quests:Just before the end of first quest:Reset secondary quest:Distribution of lost belongings:Just after hunting")) {
	case 1:
		mes "Here you go!";
		set malaya_bakona1,0;
		set malaya_bakona2,0;
		for(set .@i,1174; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	case 2:
		mes "[Briquet Scheme]";
		mes "Here you go!";
		set malaya_bakona1,6;
		for(set .@i,1174; .@i<=1178; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		setquest 1179;
		close;
	case 3:
		mes "[Briquet Scheme]";
		mes "Here you go!";
		set malaya_bakona2,0;
		for(set .@i,1180; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	case 4:
		mes "[Briquet Scheme]";
		mes "Here you go!";
		getitem 6520,17; //Lost_Belongings
		close;
	case 5:
		mes "[Briquet Scheme]";
		mes "Here you go!";
		set malaya_bakona2,8;
		setquest 1187;
		for(set .@i,1178; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	}
}

// Nurse in Port Malaya :: malaya_bang
//============================================================
function	script	F_Malaya_Nurse	{
	if (malaya_bang == 30) {
		mes "[Nurse Las]";
		mes "A talisman?";
		mes "I think you should search for something else.";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0);
	} else if (malaya_bang == 31) {
		mes "[Nurse Las]";
		mes "A talisman and a person?";
		cutin "malaya_nurseA01",2;
		next;
		mes "[Nurse Las]";
		mes "I did see the talisman but I didn't go near it because I got a bad feeling about it.";
		next;
		mes "[Nurse Las]";
		mes "Oh!";
		mes "Speaking of talismans, wouldn't that old lady know about them, since she put some around the village?";
		mes "I think it'll be a good idea to ask her.";
		set malaya_bang,32;
		changequest 11303,11304;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 32) {
		mes "[Nurse Las]";
		mes "Oh!";
		mes "Speaking of talismans, wouldn't that old lady know about them, since she put some around the hospital?";
		mes "I think it'll be a good idea to ask her.";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 33) {
		mes "[Nurse Las]";
		mes "A shaman... Best if we met her.";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 34) {
		mes "[Nurse Las]";
		mes "Oh!";
		mes "You must have met her.";
		mes "I feel something strong...";
		cutin "malaya_nurseA01",2;
		next;
		select("Tell her about the talisman.");
		mes "[Nurse Las]";
		mes "Yes!";
		mes "I have an idea.";
		mes "How about we stick that one over the one we saw on the 2nd floor door?";
		emotion ET_AHA;
		next;
		mes "[Nurse Las]";
		mes "Maybe it will block the bad energy it's giving out.";
		set malaya_bang,35;
		changequest 11306,11307;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 35) {
		mes "[Nurse Las]";
		mes "Yes!";
		mes "I have an idea.";
		mes "How about we stick that one over the one we saw on the 2nd floor door?";
		emotion ET_AHA;
		cutin "malaya_nurseA01",2;
		next;
		mes "[Nurse Las]";
		mes "Maybe it will block the bad energy it's giving out.";
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 36) {
		callsub L_Weight;
		mes "[Nurse Maenne]";
		mes "*Sigh*...";
		mes "I thought it strange when you were standing behind me....";
		cutin "malaya_nurseB",2;
		next;
		mes "[Nurse Maenne]";
		mes "I didn't think you'd do something like this.";
		emotion ET_THINK;
		next;
		mes "[Nurse Maenne]";
		mes "We were just about to enter Bangungot's room, before we were thrown out...";
		next;
		switch(select("Bangungot?:Nurse Maenne?")) {
		case 1:
			callsub L_Bangungot;
			select("Nurse Maenne");
			callsub L_Maenne;
			break;
		case 2:
			callsub L_Maenne;
			select("Bangungot");
			callsub L_Bangungot;
			break;
		}
		callsub L_Incomplete;
		set malaya_bang,42;
		changequest 11308,11309;
		callsub L_Reward;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 40) {
		callsub L_Weight;
		if (checkquest(11309,HUNTING) == 2) {
			callsub L_Complete;
			set malaya_bang,41;
			completequest 11309;
			callsub L_Reward;
			callsub L_Warp, getarg(0), 1;
		} else {
			callsub L_Incomplete;
			set malaya_bang,42;
			callsub L_Reward;
			callsub L_Warp, getarg(0);
		}
	} else if (malaya_bang > 40) {
		if (malaya_bang == 42) {
			if (checkquest(11309,HUNTING) == 2) {
				callsub L_Complete;
				set malaya_bang,41;
				completequest 11309;
				callsub L_Warp, getarg(0), 1;
			} else {
				callsub L_Incomplete;
				callsub L_Warp, getarg(0);
			}
		}
		callsub L_Incomplete;
		switch(getarg(0)) {
		case 1:
			next;
			switch(select("Enter the hospital.:Quit.")) {
			case 1:
				callsub L_Warp, getarg(0);
			case 2:
				mes "[Nurse Maenne]";
				mes "Hmmm...";
				close2;
				cutin "",255;
				end;
			}
		case 2:
			callsub L_Warp, getarg(0);
		}
	}
	return;

L_Weight:
	if (checkweight(1201,1) == 0) {
		mes "- Wait !! -";
		mes "- You have too many items. -";
		mes "- Cannot receive item. -";
		mes "- Please lighten your bag -";
		mes "- and try again. -";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "- Wait !! -";
		mes "- You are carrying too many items. -";
		mes "- Cannot receive item. -";
		mes "- Please lighten your bag -";
		mes "- and try again. -";
		close;
	}
	return;

L_Warp:
	switch(getarg(0)) {
	case 1:
		close2;
		cutin "",255;
		if (getarg(1,0) == 0)
			warp "ma_dun01",33,110;
		end;
	case 2:
		next;
		switch(select("Go outside.:Quit.")) {
		case 1:
			close2;
			cutin "",255;
			warp "malaya",58,76;
			end;
		case 2:
			mes "[Nurse Las]";
			mes "Tsk...";
			close2;
			cutin "",255;
			end;
		}
	}

L_Reward:
	if (!VIP_SCRIPT || vip_status(VIP_STATUS_ACTIVE)) {
		getitem 6499,5; //Ancient_Grudge
		getitem 6497,10; //Lesser_Agimat
	} else {
		getitem 6499,3; //Ancient_Grudge
		getitem 6497,5; //Lesser_Agimat
	}
	getitem 617,1; //Old_Violet_Box
	getexp 1000000,0;
	return;

L_Bangungot:
	mes "[Nurse Maenne]";
	mes "It's a vicious monster roaming this hospital.";
	next;
	mes "[Nurse Maenne]";
	mes "Hmmmm...";
	mes "It's not exactly a monster....";
	mes "More like a curse or disease...";
	next;
	mes "[Nurse Maenne]";
	mes "There's a story saying that it used to be a wood fairy.";
	next;
	mes "[Nurse Maenne]";
	mes "Anyway, it doesnt change the fact that she killed the patients of this hospital and turned them into monsters.";
	next;
	return;

L_Maenne:
	mes "[Nurse Maenne]";
	mes "Me?";
	mes "As you can see, I'm the new nurse here.";
	mes "I'm a nurse who specializes in 'this' kind of work, instead of looking after patients.";
	cutin "malaya_nurseB",2;
	next;
	mes "[Nurse Maenne]";
	mes "Oh!";
	mes "The Bangungot pretended to be me?";
	next;
	mes "[Nurse Maenne]";
	mes "Seeing how much it rattled you.";
	mes "It's a rather smart one.";
	next;
	mes "[Nurse Maenne]";
	mes "Simply said, I cure unnatural phenomenon around hospitals.";
	next;
	mes "[Nurse Maenne]";
	mes "Many things happen in the world.";
	next;
	return;

L_Complete:
	mes "[Nurse Maenne]";
	mes "She may have rooted here deeper than I thought.";
	mes "I can still feel her presence.";
	cutin "malaya_nurseB",2;
	next;
	mes "[Nurse Maenne]";
	mes "What you killed was a part of her...";
	mes "But, it was a big help since you confused and damaged her at the same time.";
	next;
	mes "[Nurse Maenne]";
	mes "It makes things a lot easier.";
	mes "Thank you.";
	return;

L_Incomplete:
	mes "[Nurse Maenne]";
	mes "It would've been easier if she was apart from her body, but now that she returned to her room, this is going to be a little tricky.";
	cutin "malaya_nurseB",2;
	next;
	mes "[Nurse Maenne]";
	mes "Of course, don't you dare walk away from this, since you disturbed my job and led her to her room.";
	next;
	mes "[Nurse Maenne]";
	mes "If you make it to the 2nd floor door, I'll open a small door to her room for you.";
	mes "After that, she's all yours.";
	return;
}

malaya,55,72,4	script	Nurse#ma_n1	569,{
	if (malaya_hi < 20) {
		mes "[Nurse]";
		mes "People of this town are too cautious of outsiders.";
		emotion ET_ANGER;
		cutin "malaya_nurseA01",2;
		next;
		mes "[Nurse]";
		mes "I'm sure they have their reasons, but I wish they'd tell me how to get closer...";
		close2;
		cutin "",255;
		end;
	}
	if (BaseLevel < 100) {
		mes "There's a nurse outside the hospital holding a large bag.";
		mes "I don't think I can help her.";
		close;
	}
	if (malaya_bang == 0) {
		mes "[Nurse]";
		mes "Hey, hold on.";
		mes "Are you planning on going inside?";
		cutin "malaya_nurseA01",2;
		next;
		switch(select("Yes.:No.")) {
		case 1:
			mes "[Nurse]";
			mes "Oh~";
			mes "I'm so glad!";
			mes "I was literally waiting all day for someone to some by.";
			cutin "malaya_nurseA02",2;
			next;
			switch(select("About the hospital:Reason for stalling me:Ignore.")) {
			case 1:
				mes "[Nurse]";
				mes "This hospital is the only one in town.";
				mes "And it's going to be my new job.";
				cutin "malaya_nurseA03",2;
				next;
				mes "[Nurse]";
				mes "I heard it was just built, but it seems so creepy....";
				emotion ET_SWEAT;
				next;
				mes "[Nurse]";
				mes "I was surprised when I got here too.";
				mes "It says 'closed' all around it!";
				next;
				select("Reason for stalling me.");
				mes "[Nurse]";
				mes "I was told that they needed nurses in this town,";
				mes "so I came here after turning down numerous proposals.";
				next;
				mes "[Nurse]";
				mes "I'd heard they were really cautious of outsiders...";
				next;
				mes "[Nurse]";
				mes "Not even a soul to welcome me, let alone a party!";
				mes "Shocking!";
				emotion ET_CRY;
				next;
				mes "[Nurse]";
				mes "What's more, I made it here after being lost and now I'm facing a creepy and locked hospital!";
				next;
				break;
			case 2:
				mes "[Nurse]";
				mes "I was told that they needed nurses in this town,";
				mes "so I came here after turning down numerous proposals.";
				cutin "malaya_nurseA03",2;
				next;
				mes "[Nurse]";
				mes "I'd heard they were really cautious of outsiders...";
				next;
				mes "[Nurse]";
				mes "Not even a soul to welcome me, let alone a party!";
				mes "Shocking!";
				emotion ET_CRY;
				next;
				mes "[Nurse]";
				mes "What's more, I made it here after being lost and now I'm facing a creepy and locked hospital!";
				next;
				select("About the hospital");
				mes "[Nurse]";
				mes "This hospital is the only one in town.";
				mes "And it's going to be my new job.";
				next;
				mes "[Nurse]";
				mes "I heard it was just built, but it seems so creepy....";
				emotion ET_SWEAT;
				next;
				mes "[Nurse]";
				mes "I was surprised when I got here too.";
				mes "It says 'closed' all around it!";
				next;
				break;
			case 3:
				mes "[Nurse]";
				mes "Yes, you must be busy.";
				mes "Oh, well.";
				mes "I'll let you be on your way.";
				mes "Don't mind me. *Sob*";
				emotion ET_CRY;
				cutin "malaya_nurseA03",2;
				close2;
				cutin "",255;
				end;
			}
			break;
		case 2:
			mes "[Nurse]";
			mes "Oh, I see...";
			emotion ET_CRY;
			close2;
			cutin "",255;
			end;
		}
		mes "[Nurse]";
		mes "Now that you say it... If you're going inside, could you take me with you?";
		cutin "malaya_nurseA04",2;
		next;
		mes "[Nurse]";
		mes "Doors are locked!";
		mes "My bags are heavy!";
		mes "And my legs are killing me.";
		cutin "malaya_nurseA03",2;
		next;
		mes "[Nurse]";
		mes "If I knew this was going to happen, I would've worn ER night-shift shoes instead of first-day shoes... *sniff*";
		emotion ET_CRY;
		next;
		switch(select("Help.:Don't help.")) {
		case 1:
			mes "[Nurse]";
			mes "*Sob*";
			mes "I guess this world is still worth living in.";
			mes "You are too kind.";
			emotion ET_CRY;
			next;
			mes "[Nurse Las]";
			mes "I'm 'Las', who's supposed to work in this hospital.";
			mes "By the looks of it, though, I may become jobless...";
			next;
			mes "[Nurse Las]";
			mes "Let's start by getting inside.";
			next;
			mes "[Nurse Las]";
			mes "Before that....";
			mes "Could you get something to wrap my feet? I can't put my shoes on because I've got blisters.";
			emotion ET_HELP;
			cutin "malaya_nurseA04",2;
			next;
			mes "[Nurse Las]";
			mes "2 Rotten Bandages should do to wrap both my feet. They may look dirty, but they have special liquid on them that have amazing effects.";
			set malaya_bang,1;
			setquest 11284;
			close2;
			cutin "",255;
			end;
		case 2:
			mes "[Nurse]";
			mes "Yes, you must be busy.";
			mes "Oh, well.";
			mes "I'll let you be on your way.";
			mes "Don't mind me. *Sob*";
			emotion ET_CRY;
			cutin "malaya_nurseA03",2;
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 1) {
		if (countitem(930) > 1) {
			mes "[Nurse Las]";
			mes "Oh......";
			mes "I know they're effective but... Not so tempting.";
			cutin "malaya_nurseA01",2;
			next;
			mes "[Nurse Las]";
			mes "Rotten Bandages... A fit name for something that seems to have been cut fresh from a mummy.";
			next;
			mes "[Nurse Las]";
			mes "I'm having second thoughts looking at them, but as I am to be a professional nurse!!";
			mes "Here goes nothing!!!";
			mes "Ewwww!!";
			next;
			mes "[Nurse Las]";
			mes "*Squish*";
			mes "*Squelch*";
			delitem 930,2; //Rotten_Bandage
			set malaya_bang,2;
			close2;
			cutin "",255;
			end;
		} else {
			mes "[Nurse Las]";
			mes "Before that...";
			mes "Could you get something to wrap my feet? I can't put my shoes on because I've got blisters.";
			emotion ET_HELP;
			cutin "malaya_nurseA03",2;
			next;
			mes "[Nurse Las]";
			mes "2 Rotten Bandages should do to wrap both my feet. They may look dirty, but they have special liquid on that have with amazing effects.";
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 2) {
		mes "[Nurse Las]";
		mes "Ahhhhh...";
		mes "My feet feel a lot better now, but it smells funny.";
		cutin "malaya_nurseA01",2;
		next;
		mes "[Nurse Las]";
		mes "Oh...... the smell......";
		mes "My new shoes will be ruined...";
		emotion ET_PROFUSELY_SWEAT;
		next;
		mes "[Nurse Las]";
		mes "Okay!!!!!!";
		mes "I don't know if it's locked or stuck, let's try pushing it together!";
		set malaya_bang,3;
		changequest 11284,11285;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 3) {
		mes "[Nurse Las]";
		mes "Okay!!!!!!";
		mes "I don't know if it's locked or stuck, let's try pushing it together!";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 4) {
		mes "["+strcharinfo(0)+"]";
		mes "We pushed and pulled, but it won't budge.";
		emotion ET_PROFUSELY_SWEAT, playerattached();
		next;
		mes "[Nurse Las]";
		mes "Strange~";
		mes "They wouldn't have sent me to a closed down hospital.";
		cutin "malaya_nurseA03",2;
		next;
		mes "[Nurse Las]";
		mes "Hmmm!";
		mes "I can't stand it anymore!";
		emotion ET_FRET;
		next;
		mes "[Nurse Las]";
		mes "Could you ask the townsfolk about the hospital while I contact HQ?";
		cutin "malaya_nurseA01",2;
		next;
		mes "[Nurse Las]";
		mes "Hey, why don't you start with that girl over there?";
		mes "Perhaps she'll tell you something.";
		set malaya_bang,5;
		changequest 11286,11287;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 5) {
		mes "[Nurse Las]";
		mes "Could you ask the townsfolk about the hospital while I contact HQ?";
		cutin "malaya_nurseA01",2;
		next;
		mes "[Nurse Las]";
		mes "Hey, why don't you start with that girl over there?";
		mes "Perhaps she'll tell you something.";
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 6) {
		mes "[Nurse Las]";
		mes "What did she say?";
		emotion ET_QUESTION;
		cutin "malaya_nurseA02",2;
		next;
		select("Tell her what she said.");
		mes "[Nurse Las]";
		mes "Strange.";
		mes "HQ confirmed that I am assigned here.";
		cutin "malaya_nurseA01",2;
		next;
		mes "[Nurse Las]";
		mes "Maybe that girl doesn't know about this place?";
		mes "HQ couldn't have sent me here and be lying about it. Could you ask someone else in town?";
		next;
		mes "[Nurse Las]";
		mes "I'll contact HQ again for more info.";
		mes "Hey, why not ask that man over there?";
		mes "I'm sure he'll know something.";
		set malaya_bang,7;
		changequest 11288,11289;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 7) {
		mes "[Nurse Las]";
		mes "I'll contact HQ again for more info.";
		mes "Hey, why not ask that man over there?";
		mes "I'm sure he'll know something.";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 8) {
		mes "[Nurse Las]";
		mes "An inn?";
		mes "Good gracious!";
		mes "If they'd have told me earlier I wouldn't have had to stand out here for so long!";
		emotion ET_HNG;
		cutin "malaya_nurseA01",2;
		next;
		mes "[Nurse Las]";
		mes "Ummm......";
		mes "......";
		mes "......";
		next;
		mes "[Nurse Las]";
		mes "Hey... you know what...";
		next;
		mes "[Nurse Las]";
		mes "I don't think I can move anymore because of my feet. Could you go to the inn for me?";
		emotion ET_PROFUSELY_SWEAT;
		cutin "malaya_nurseA03",2;
		next;
		mes "[Nurse Las]";
		mes "I can't carry my bags around so I'll stay here and watch over them while I treat my feet.";
		next;
		mes "[Nurse Las]";
		mes "I have to be back here again anyway.";
		mes "Thank you.";
		set malaya_bang,9;
		changequest 11290,11291;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 9) {
		mes "[Nurse Las]";
		mes "I don't think I can move anymore because of my feet. Could you go to the inn for me?";
		emotion ET_PROFUSELY_SWEAT;
		cutin "malaya_nurseA03",2;
		next;
		mes "[Nurse Las]";
		mes "I can't carry my bags around so I'll stay here and watch over them while I treat my feet.";
		next;
		mes "[Nurse Las]";
		mes "I have to be back here again anyway.";
		mes "Thank you.";
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 10) {
		mes "[Nurse Las]";
		mes "Hey~";
		mes "How'd it go?";
		cutin "malaya_nurseA02",2;
		next;
		select("Hand over the key and message.");
		mes "[Nurse Las]";
		mes "Keys?";
		mes "Well this is one step closer to my goals!";
		mes "Let's open the door right now!";
		set malaya_bang,11;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 11) {
		mes "[Nurse Las]";
		mes "Keys?";
		mes "Well this is one step closer to my goals!";
		mes "Let's open the door right now!";
		cutin "malaya_nurseA02",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 12) {
		mes "[Nurse Las]";
		mes "That's weird~!";
		mes "The door's not locked?";
		mes "How can this be?????";
		mes "????";
		emotion ET_QUESTION;
		emotion ET_QUESTION, playerattached();
		cutin "malaya_nurseA04",2;
		next;
		mes "[Nurse Las]";
		mes "Oh no!!!";
		mes "Everything's falling apart.";
		mes "Maybe we should wait for the doctor to come.....";
		cutin "malaya_nurseA03",2;
		next;
		mes "[???]";
		mes "...";
		cutin "",255;
		next;
		mes "[???]";
		mes "*Snigger*";
		emotion ET_QUESTION, playerattached();
		emotion ET_QUESTION;
		next;
		mes "[???]";
		mes "Hey "+((Sex == SEX_MALE)?"dude":"missy")+",";
		mes "You're not getting in the hospital.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Who's there?!";
		next;
		mes "[???]";
		mes "*Snigger*";
		next;
		mes "[???]";
		mes "That's a secret~";
		mes "My mom will kill me if she knew I was here!";
		next;
		switch(select("About entering the hospital.:About it's mom.:About ???:Quit.")) {
		case 1:
			mes "[???]";
			mes "A few days ago, the old lady who lives near us went around the hospital sticking some kind of sticks into the ground.";
			next;
			mes "[???]";
			mes "She was mumbling and looking around a lot.";
			next;
			mes "[???]";
			mes "I was well hidden here because I wasn't supposed to be here.";
			next;
			break;
		case 2:
			mes "[???]";
			mes "My mom once told me.";
			mes "The old lady's daughter was hospitalized here.";
			next;
			mes "[???]";
			mes "She never got out of it though...";
			next;
			mes "[???]";
			mes "She wasn't the only one. There were many strange things going on at the hospital.";
			next;
			mes "[???]";
			mes "That's why my mom doesn't want me coming around here.";
			next;
			break;
		case 3:
			mes "[???]";
			mes "No way Jose!";
			mes "I got a spanking last time I was caught around here!";
			next;
			mes "[???]";
			mes "If I'm caught again, it won't end with a spanking....";
			mes "So scary.";
			next;
			break;
		case 4:
			mes "[???]";
			mes "Humph!!";
			close;
		}
		mes "The voice seems to be coming from the bushes near the entrance of the hospital.";
		specialeffect EF_STEAL,AREA,"Bushes#ma";
		set malaya_bang,13;
		changequest 11293,11294;
		close;
	} else if (malaya_bang == 13) {
		mes "The voice seems to be coming from the bushes near the entrance of the hospital.";
		mes "Let's check around.";
		specialeffect EF_STEAL,AREA,"Bushes#ma";
		close;
	} else if (malaya_bang == 14) {
		mes "[Nurse Las]";
		mes "Hmmm... Let's look around the hospital.";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 15) {
		mes "[Nurse Las]";
		mes "Hey... ummm...";
		mes "You know...";
		mes "Could you give that old lady a visit?";
		cutin "malaya_nurseA04",2;
		next;
		mes "[Nurse Las]";
		mes "Oh, me? I'll look be looking around here.";
		next;
		mes "[Nurse Las]";
		mes "As you know, my feet hurt...";
		mes "Yes?";
		mes "Yes?";
		next;
		switch(select("Go.:Don't go.")) {
		case 1:
			mes "[Nurse Las]";
			mes "Okay, off you go.";
			mes "I think she lives on the west side of town.";
			mes "Go on.";
			next;
			mes "[Nurse Las]";
			mes "Hey you in the bushes, I'll tell on you if you don't go home now!";
			set malaya_bang,16;
			changequest 11296,11297;
			close2;
			cutin "",255;
			end;
		case 2:
			mes "[Nurse Las]";
			mes "Why!?";
			mes "Staying here won't solve anything.";
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 16 || malaya_bang == 17) {
		mes "[Nurse Las]";
		mes "Okay, off you go.";
		mes "I think she lives on the west side of town.";
		mes "Go on.";
		cutin "malaya_nurseA04",2;
		next;
		mes "[Nurse Las]";
		mes "Hey you in the bushes, I'll tell on you if you don't go home now!";
		emotion ET_HUK, getnpcid(0, "Bushes#ma");
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 18) {
		mes "[Nurse Las]";
		mes "How'd it go?";
		mes "Did you meet the old lady?";
		cutin "malaya_nurseA02",2;
		next;
		mes "[Nurse Las]";
		mes "Oh by the way, when ["+strcharinfo(0)+"], you were gone, I tried the door.";
		mes "It did open...";
		next;
		mes "[Nurse Las]";
		mes "But the way to the 2nd floor was blocked.";
		mes "I thought the door opening was a break through, but turns out it wasn't.";
		cutin "malaya_nurseA03",2;
		next;
		mes "[Nurse Las]";
		mes "Anyway, the first floor door is open, so let's go inside.";
		mes "Everything would be meaningless if the second floor door is not opened.";
		emotion ET_CRY;
		set malaya_bang,19;
		changequest 11299,11300;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else if (malaya_bang == 19) {
		mes "[Nurse Las]";
		mes "Anyway, the first floor door is open, so let's go inside.";
		mes "Everything would be meaningless if the second floor door is not opened.";
		emotion ET_CRY;
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else if (malaya_bang < 30) {
		mes "[Nurse Las]";
		mes "Could you check the 2nd floor door again in case I missed something?";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else {
		callfunc "F_Malaya_Nurse",1;
		end;
	}
	mes "There's a nurse outside the hospital holding a large bag.";
	mes "I don't think I can help her.";
	close;
}

ma_dun01,35,108,4	script	Nurse#ma_n2	569,{
	if (malaya_bang < 19) {
		// fall through
	} else if (malaya_bang < 30) {
		if (malaya_bang == 19) {
			mes "The hospital is infested with monsters, like the old lady said.";
			mes "How could she have gone back and forth to the 2nd floor with her feet like that....";
			next;
			set malaya_bang,20;
			changequest 11300,11301;
		}
		mes "[Nurse Las]";
		mes "Could you check the 2nd floor door again in case I missed something?";
		cutin "malaya_nurseA01",2;
		next;
		switch(select("Go outside.:Quit.")) {
		case 1:
			close2;
			cutin "",255;
			warp "malaya",58,76;
			end;
		case 2:
			mes "[Nurse Las]";
			mes "Tsk...";
			close2;
			cutin "",255;
			end;
		}
	} else {
		callfunc "F_Malaya_Nurse",2;
		end;
	}
	mes "[Nurse]";
	mes "I want to be left alone.";
	mes "Please leave.";
	close2;
	warp "malaya",58,76;
	end;
}

ma_dun01,152,23,4	script	Suspicious Wooden Stick::MalayaStick0	858,{
	if (malaya_bang == 20) {
		mes "There's a talisman similar to the ones outside the hospital.";
		mes "Let's look around for something else.";
		set malaya_bang,30;
		changequest 11301,11302;
		close;
	} else if (malaya_bang == 30) {
		mes "There's a talisman similar to the ones outside the hospital.";
		mes "Let's look around for something else.";
		close;
	} else if (malaya_bang == 35) {
		mes "After sticking on the talisman over the other one, the dark feeling lifted away, just like Las said.";
		next;
		mes "[Nurse Las]";
		mes "*Snigger*";
		cutin "malaya_nurseA05",2;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "?!";
		cutin "",255;
		next;
		mes "[Nurse Las]";
		mes "Yes, yes!";
		cutin "malaya_nurseA05",2;
		next;
		mes "[Nurse Las]";
		mes "The annoying talismans are gone!";
		next;
		mes "[Nurse Las]";
		mes "*Giggle*";
		next;
		mes "[Nurse Las]";
		mes "Human's are so dumb. You show them a pretty little helpless look and they fall for it.";
		next;
		mes "[Nurse Las]";
		mes "*Snigger*";
		next;
		mes "[Nurse Las]";
		mes "For your work, I shall take you to my room...";
		mes "Darn...";
		next;
		mes "[Nurse Las]";
		mes "......";
		next;
		mes "[Nurse Las]";
		mes "No no no!";
		mes "You still have those annoying talismans!!!";
		next;
		mes "[Nurse Las]";
		mes "This is your lucky day!";
		mes "*Snigger*";
		set malaya_bang,36;
		changequest 11307,11308;
		close2;
		cutin "",255;
		warp "malaya",58,76;
		end;
	} else if (malaya_bang > 35) {
		mes "Cannot feel anything evil about the talisman.";
		mes "Only the bitter taste of being fooled around Las remains...";
		close;
	} else {
		mes "No power can be felt.";
		close;
	}
}

malaya,48,76,4	script	Hospital Door#ma_n1	844,{
	if (malaya_bang == 3) {
		mes "Pushed hard on the door, but it won't open.";
		mes "It doesn't feel like it's locked or stuck, but encased by a layer of something.";
		set malaya_bang,4;
		changequest 11285,11286;
		close;
	} else if (malaya_bang == 4) {
		mes "Pushed hard on the door, but it won't open.";
		mes "It doesn't feel like it's locked or stuck, but encased by a layer of something.";
		close;
	} else if (malaya_bang == 11) {
		mes "Put the key inside the lock of the hospital door...";
		mes "But it's not locked as expected.";
		next;
		mes "Then why is the door not opening?";
		set malaya_bang,12;
		changequest 11292,11293;
		close;
	} else if (malaya_bang == 12) {
		mes "Put the key inside the lock of the hospital door...";
		mes "But it's not locked as expected.";
		next;
		mes "Then why is the door not opening?";
		close;
	} else if (malaya_bang > 18) {
		if(select("Enter the hospital.:Quit.") == 1)
			warp "ma_dun01",33,110;
		end;
	} else {
		mes "The hospital door seems to be closed.";
		close;
	}
}

malaya,64,78,4	script	Village Woman#mab	583,{
	if (malaya_hi < 20) {
		mes "[Village Woman]";
		mes "......";
		next;
		mes "Seems very cautious about you.";
		close;
	}
	if (malaya_bang == 5) {
		mes "[Village Woman]";
		mes "Oh~Are you an adventurer?";
		mes "It seems like we have a lot of them in town lately.";
		next;
		mes "[Village Woman]";
		mes "I was born here and never went far away from here, so I always feel like going on my adventures when I hear the stories they bring.";
		next;
		switch(select("Ask about the hospital.:End conversation.")) {
		case 1:
			mes "[Village Woman]";
			mes "The hospital?";
			mes "It's been closed for a very long time.";
			mes "They don't talk about it around here.";
			next;
			mes "[Village Woman]";
			mes "I never had to go to the hospital.";
			mes "I've been there once when I had a stomach ache as a child. I remember the place being creepy.";
			next;
			mes "[Village Woman]";
			mes "Children never like hospitals.";
			next;
			select("Ask about the nurse.");
			mes "[Village Woman]";
			mes "The new nurse?";
			mes "I don't know.";
			mes "I haven't given it a thought.";
			mes "It is strange to have a new nurse coming to a closed hospital.";
			set malaya_bang,6;
			changequest 11287,11288;
			close;
		case 2:
			mes "[Village Woman]";
			mes "Have a nice day~";
			close;
		}
	} else if (malaya_bang == 6) {
		mes "[Village Woman]";
		mes "The new nurse?";
		mes "I don't know.";
		mes "I haven't given it a thought.";
		mes "It is strange to have a new nurse coming to a closed hospital.";
		set malaya_bang,6;
		changequest 11287,11288;
		close;
	} else {
		mes "[Village Woman]";
		mes "Oh~Are you an adventurer?";
		mes "It seems like we have a lot of them in town lately.";
		next;
		mes "[Village Woman]";
		mes "I was born here and never went far away from here, so I always feel like going on my adventures when I hear the stories they bring.";
		close;
	}
}

malaya,62,37,4	script	Village Man#mab	582,{
	if (malaya_hi < 20) {
		mes "[Village Man]";
		mes "Hmmm! Haven't seen you around?";
		mes "What brings you to our town?";
		next;
		mes "Seems very cautious about you.";
		close;
	}
	if (malaya_bang == 7) {
		mes "[Village Man]";
		mes "*Laughs*";
		mes "An adventurer, are you?";
		mes "When you have time, come and take a look around my pineapple farm.";
		next;
		mes "[Village Man]";
		mes "Just a little bit~";
		mes "far from the village, but I'll give you all the pineapple you want in exchange for a good story of yours!";
		next;
		switch(select("Ask about the hospital.:End conversation.")) {
		case 1:
			mes "[Village Man]";
			mes "Ummm......";
			mes "You mean that hospital?";
			next;
			mes "[Village Man]";
			mes "It was closed down because of an accident.";
			mes "But I wouldn't trouble an outsider with the details......";
			mes "There's not much I can tell you.";
			next;
			select("Ask about the nurse.");
			mes "[Village Man]";
			mes "Oh!!!";
			mes "Did you meet the nurse?!";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "She was standing in front of the hospital.";
			mes "Oh!";
			mes "She must have gone to contact HQ.";
			next;
			mes "[Village Man]";
			mes "We requested 'the nurse', and she's already here! We're saved!";
			next;
			select("The nurse?");
			mes "[Village Man]";
			mes "She was invited here to save our hospital.";
			next;
			mes "[Village Man]";
			mes "Now I have to spread the good news! Could you bring her to the inn at the center of town?";
			next;
			mes "[Village Man]";
			mes "That's where the doctor is staying.";
			mes "He's been there ever since the hospital was closed.";
			set malaya_bang,8;
			changequest 11289,11290;
			close;
		case 2:
			mes "[Village Man]";
			mes "Whoopeee!";
			close;
		}
	} else if (malaya_bang == 8) {
		mes "[Village Man]";
		mes "Now I have to spread the good news! Could you bring her to the inn at the center of town?";
		next;
		mes "[Village Man]";
		mes "That's where the doctor is staying.";
		mes "He's been there ever since the hospital was closed.";
		close;
	} else {
		mes "[Village Man]";
		mes "Whoopeee!";
		mes "An adventurer, are you?";
		mes "When you have time, come and take a look around my pineapple farm.";
		next;
		mes "[Village Man]";
		mes "Just a little bit~";
		mes "far from the village, but I'll give you all the pineapple you want in exchange for a good story of yours!";
		close;
	}
}

malaya,210,200,5	script	Dr. Boon#ma	865,{
	if (malaya_hi < 20) {
		mes "[Dr. Boon]";
		mes "......";
		next;
		mes "Seems very cautious about you.";
		close;
	}
	if (malaya_bang == 9) {
		mes "[Dr. Boon]";
		mes "So~ You're the new nurse?";
		next;
		switch(select("Yes.:No.")) {
		case 1:
			mes "[Dr. Boon]";
			mes "Nothing's more important for a nurse than their white uniform.";
			mes "Go get changed!";
			close;
		case 2:
			mes "[Dr. Boon]";
			mes "Oh! I'm sorry.";
			mes "We're waiting for a new nurse.";
			mes "My bad.";
			next;
			select("Explain the situation.");
			mes "[Dr. Boon]";
			mes "Aha~";
			mes "So that's what happened.";
			mes "Oh, dear. I guess there was a misunderstanding.";
			next;
			mes "[Dr. Boon]";
			mes "You see, I've been treating patients at the inn after what happened to the hospital.";
			next;
			mes "[Dr. Boon]";
			mes "Even so, I must apologize for making her stand there so long.";
			next;
			mes "[Dr. Boon]";
			mes "I can't leave right now because I have patients to look after. Why don't you go over and hand over this key?";
			next;
			mes "[Dr. Boon]";
			mes "And give her a message with the key saying, 'I'll leave it to your own discretion'.";
			next;
			mes "[Dr. Boon]";
			mes "I'll be there as soon as I'm done here.";
			mes "Good luck~";
			set malaya_bang,10;
			changequest 11291,11292;
			close;
		}
	} else if (malaya_bang == 10) {
		mes "[Dr. Boon]";
		mes "I can't leave right now because I have patients to look after. Why don't you go over and hand over this key?";
		next;
		mes "[Dr. Boon]";
		mes "And give her a message with the key saying, 'I'll leave it to your own discretion'.";
		next;
		mes "[Dr. Boon]";
		mes "I'll be there as soon as I'm done here.";
		mes "Good luck~";
		close;
	} else {
		mes "[Dr. Boon]";
		mes "*Sigh*";
		mes "The work... It never ends...";
		mes "How am I supposed to handle all these patients on my own?";
		next;
		mes "[Dr. Boon]";
		mes "What? What's a doctor doing in an inn?";
		mes "Well, why not?";
		close;
	}
}

malaya,53,68,4	script	Bushes#ma	844,{
	if (malaya_bang < 13) {
		mes "It's just a bush.";
		mes "A sweet scent of wood rises when shaken.";
		close;
	}
	if (malaya_bang == 13) {
		mes "[???]";
		mes "Don't come any closer!";
		mes "Old "+((Sex == SEX_MALE)?"man":"lady")+"!";
		mes "How'd you know I was here?";
		emotion ET_HUK;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "I'm not old.";
		emotion ET_FRET, playerattached();
		next;
		switch(select("About entering the hospital.:About its mom.:About ???.:Ask about the old lady.:Ask about the hospital grounds.:Quit.")) {
		case 1:
			mes "[???]";
			mes "A few days ago, the old lady who lives near us went around the hospital sticking some kind of sticks into the ground.";
			next;
			mes "[???]";
			mes "She was mumbling and looking around a lot.";
			next;
			mes "[???]";
			mes "I was well hidden here because I wasn't supposed to be here.";
			next;
			break;
		case 2:
			mes "[???]";
			mes "My mom once told me.";
			mes "The old lady's daughter was hospitalized here.";
			next;
			mes "[???]";
			mes "She never got out of it though...";
			next;
			mes "[???]";
			mes "She wasn't the only one. There were many strange things going on at the hospital.";
			next;
			mes "[???]";
			mes "That's why my mom doesn't want me coming around here.";
			next;
			break;
		case 3:
			mes "[???]";
			mes "No way Jose!";
			mes "I got a spanking last time I was caught around here!";
			next;
			mes "[???]";
			mes "If I'm caught again, it won't end with a spanking....";
			mes "So scary.";
			next;
			break;
		case 4:
			mes "[???]";
			mes "It's the lady who lives next door to us.";
			next;
			mes "[???]";
			mes "I saw her a few days ago doing something around the hospital.";
			next;
			mes "[???]";
			mes "I couldn't see what she was doing from here, but I found some sticks there after she'd left.";
			set malaya_bang,14;
			changequest 11294,11295;
			close;
		case 5:
			mes "[???]";
			mes "I dunno.";
			mes "Nothing's different except for the sticks.";
			next;
			mes "[???]";
			mes "The old lady comes back once in a while to check on the sticks.";
			mes "My heart races when that happens!";
			next;
			break;
		case 6:
			mes "[???]";
			mes "Humph!!";
			emotion ET_HNG;
			close;
		}
		mes "[???]";
		mes "Promise me you won't tell anyone that you saw me!!!";
		mes "Promise?!";
		close;
	} else if (malaya_bang == 14) {
		mes "[???]";
		mes "I couldn't see what she was doing from here, but I found some sticks there after she'd left.";
		close;
	} else if (malaya_bang == 15) {
		mes "[???]";
		mes "Don't come any closer!";
		mes "Old "+((Sex == SEX_MALE)?"man":"lady")+"!";
		mes "How'd you know I was here?";
		emotion ET_HUK;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "I'm not old.";
		emotion ET_FRET, playerattached();
		close;
	} else {
		mes "There's a trace of a young child.";
		mes "Think the child's gone home now.";
		close;
	}
}

-	script	Suspicious Wooden Stick::MalayaStick	-1,{
	if (checkweight(1201,1) == 0) {
		mes "- Wait !! -";
		mes "- You have too many items. -";
		mes "- Cannot receive item. -";
		mes "- Please lighten your bag -";
		mes "- and try again. -";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "- Wait !! -";
		mes "- You are carrying too many items. -";
		mes "- Cannot receive item. -";
		mes "- Please lighten your bag -";
		mes "- and try again. -";
		close;
	}
	if (malaya_bang == 14) {
		mes "A strange stick is planted on the ground.";
		mes "A mysterious force can be felt.";
		next;
		switch(select("Pull it out.:Leave it.")) {
		case 1:
			if (rand(1,5) == 4) {
				mes "Pulled out the deeply planted stick.";
				mes "The hospital seems to have become more gloomy.";
				if (rand(2)) {
					set malaya_bang,15;
					changequest 11295,11296;
					getitem 6497,1; //Lesser_Agimat
					donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
					next;
					mes "Better show Las the talisman.";
					close;
				} else {
					getitem 6497,1; //Lesser_Agimat
					donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
					close;
				}
			} else {
				mes "After pulling out the deeply planted stick, an uneasy feeling washes over.";
				donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
				close;
			}
		case 2:
			mes "It looks ominous. Better leave it alone.";
			close;
		}
	} else {
		mes "There's a strange looking stick.";
		close;
	}
	end;
OnEnable:
	enablenpc strnpcinfo(3); // NPC name is too long for strnpcinfo(0).
	end;
OnDisable:
	disablenpc strnpcinfo(3);
	end;
}
malaya,40,52,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick1	858
malaya,31,42,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick2	858
malaya,34,36,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick3	858
malaya,40,32,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick4	858
malaya,50,85,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick5	858
malaya,46,93,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick6	858
malaya,36,98,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick7	858
malaya,48,79,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick8	858
malaya,50,46,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick9	858
malaya,59,84,4	duplicate(MalayaStick)	Suspicious Wooden Stick::MalayaStick10	858

-	script	Tent#ma	-1,{ //557
	end;
OnInit:
	disablenpc();
	end;
OnEnable:
	enablenpc();
	initnpctimer;
	end;
OnDisable:
	stopnpctimer;
	disablenpc();
	end;
OnTimer1000:
	donpcevent "MalayaStick"+replacestr(strnpcinfo(1),"Tent","")+"::OnDisable";
	end;
OnTimer30000:
	donpcevent "MalayaStick"+replacestr(strnpcinfo(1),"Tent","")+"::OnEnable";
	donpcevent strnpcinfo(0)+"::OnDisable";
	end;
}
-	duplicate(Tent#ma)	Tent1#ma	-1
-	duplicate(Tent#ma)	Tent2#ma	-1
-	duplicate(Tent#ma)	Tent3#ma	-1
-	duplicate(Tent#ma)	Tent4#ma	-1
-	duplicate(Tent#ma)	Tent5#ma	-1
-	duplicate(Tent#ma)	Tent6#ma	-1
-	duplicate(Tent#ma)	Tent7#ma	-1
-	duplicate(Tent#ma)	Tent8#ma	-1
-	duplicate(Tent#ma)	Tent9#ma	-1
-	duplicate(Tent#ma)	Tent10#ma	-1

malaya,114,183,3	script	Bent Old Lady#ma	575,{
	if (malaya_bang == 16) {
		mes "[Bent Old Lady]";
		mes "Ho ho ho ho~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ma'am, excuse me, but can I ask you a question?";
		next;
		mes "[Bent Old Lady]";
		mes "Ho ho ho ho~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ma'am?";
		next;
		mes "[Bent Old Lady]";
		mes "Ho ho ho ho~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ma'am?";
		next;
		mes "[Bent Old Lady]";
		mes "Ho ho ho ho~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ma'am!!!!!!!!!";
		next;
		mes "[Bent Old Lady]";
		mes "Who? What?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Excuse me, but can I ask you something?";
		next;
		mes "[Bent Old Lady]";
		mes "What? I can't hear you.";
		mes "Speak up!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "I! Have! Something! To! Ask! You!";
		next;
		mes "[Bent Old Lady]";
		mes "Oh~Yes dear~";
		mes "I'll tell you everything I know, dear~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Do you know anything about the hospital?";
		next;
		mes "[Bent Old Lady]";
		mes "Hospital?";
		mes "........";
		next;
		mes "[Bent Old Lady]";
		mes "Hospital?!?!?!?";
		next;
		mes "[Bent Old Lady]";
		mes "That hospital is cursed!";
		mes "Something wicked is living there!";
		next;
		mes "[Bent Old Lady]";
		mes "The thing took away my poor little girl.";
		next;
		switch(select("Ask about the hospital.:Ask about her daughter.")) {
		case 1:
			mes "[Bent Old Lady]";
			mes "Everybody was happy to hear about the hospital being built.";
			next;
			mes "[Bent Old Lady]";
			mes "We no longer had to go to other towns for medical care.";
			next;
			mes "[Bent Old Lady]";
			mes "But the one they built didn't work out so well.";
			mes "It couldn't cure people.";
			mes "I knew this would happen when they chopped down the old tree to build it.";
			next;
			mes "[Bent Old Lady]";
			mes "But the administrator wouldn't listen.";
			mes "Far from curing people, they started to die.";
			mes "So did my daughter...";
			set malaya_bang,17;
			changequest 11297,11298;
			close;
		case 2:
			mes "[Bent Old Lady]";
			mes "She suffered from nothing life threatening.";
			mes "It was...";
			mes "Just a cold......";
			next;
			mes "[Bent Old Lady]";
			mes "The wicked thing.... My daughter...";
			mes "There's something in that hospital.";
			close;
		}
	} else if (malaya_bang == 17) {
		select("Show her the stick.");
		mes "[Bent Old Lady]";
		mes "What?";
		mes "Arghhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh";
		emotion ET_HUK;
		next;
		mes "[Bent Old Lady]";
		mes "Arghhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh";
		emotion ET_HUK;
		next;
		mes "[Bent Old Lady]";
		mes "Arghhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh";
		emotion ET_HUK;
		next;
		mes "[Bent Old Lady]";
		mes "Arghhhhhhhhhh!!!!!!!!!!!";
		emotion ET_HUK;
		next;
		mes "[Bent Old Lady]";
		mes "What have you done!";
		mes "That... That was a talisman to stop the wicked thing!";
		next;
		mes "[Bent Old Lady]";
		mes "If you pull them up, it will go after people again!";
		next;
		mes "[Bent Old Lady]";
		mes "I saw it!";
		mes "I saw it when they closed the hospital saying that everybody had died.";
		next;
		mes "[Bent Old Lady]";
		mes "But they all knew.";
		mes "The patients weren't all dead.";
		next;
		mes "[Bent Old Lady]";
		mes "Taken alive...";
		mes "By the thing that took my daughter...";
		next;
		mes "[Bent Old Lady]";
		mes "Oh dear.";
		next;
		mes "Nurse Las may be in danger, standing alone in front of the hospital.";
		mes "If I don't return quickly...";
		set malaya_bang,18;
		changequest 11298,11299;
		close;
	} else if (malaya_bang == 18) {
		mes "Nurse Las may be in danger, standing alone in front of the hospital.";
		mes "If I don't return quickly...";
		close;
	} else if (malaya_bang == 32) {
		mes "[Bent Old Lady]";
		mes "Yes? The talisman?";
		mes "I asked the shaman up north of the village to make them,";
		next;
		mes "[Bent Old Lady]";
		mes "Not famous, but a talented shaman.";
		set malaya_bang,33;
		changequest 11304,11305;
		close;
	} else {
		mes "[Bent Old Lady]";
		mes "Ho ho ho ho~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ma'am, excuse me, but can I ask you a question?";
		next;
		mes "[Bent Old Lady]";
		mes "Ho ho ho ho~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ma'am?";
		next;
		mes "[Bent Old Lady]";
		mes "Ho ho ho ho~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ma'am?";
		next;
		mes "[Bent Old Lady]";
		mes "Ho ho ho ho~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Ma'am!!!!!!!!!";
		next;
		mes "[Bent Old Lady]";
		mes "Who? What?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Excuse me, but can I ask you something?";
		next;
		mes "[Bent Old Lady]";
		mes "What? I can't hear you.";
		mes "Speak up!";
		close;
	}
}

malaya,276,367,4	script	Bent Shaman#ma	782,{
	if (malaya_hi < 20) {
		mes "[Bent Shaman]";
		mes "Urgh Urgh Urghhhhhh";
		next;
		mes "Doesn't give even a glance...";
		close;
	}
	mes "[Bent Shaman]";
	mes "Hmmmm...";
	mes "I feel, feel....";
	next;
	mes "[Bent Shaman]";
	mes "I feel something bad from you...";
	if (malaya_bang == 33) {
		next;
		mes "[Bent Shaman]";
		mes "No no...";
		mes "You need not say anything!";
		mes "You'll be needing this.";
		next;
		mes "[Bent Shaman]";
		mes "It's okay.";
		mes "No need for money.";
		mes "It's the karma this village must face...";
		set malaya_bang,34;
		changequest 11305,11306;
	}
	close;
}

// Pintados Festival :: malaya_pintados
//============================================================
/*
Description
-----------
The Pintados Festival begins when players have accumulated 1000 Lesser Agimats,
1000 Silver Crosses, and 300 dyestuffs, and lasts for 7 days. During that time,
players are able to create a tattoo.

Global Variables
----------------
$malaya_pintados_00  - Festival time limit, in 30-minute intervals. (range: 0~344)
$malaya_pintados_01  - Number of Lesser Agimats collected. (range: 0~1000)
$malaya_pintados_02  - Number of Silver Crosses collected. (range: 0~1000)
$malaya_pintados_03  - Number of dyestuffs collected. (range: 0~300)
$malaya_pintados_04$ - Last player to create a tattoo.
*/

ma_fild01,1,1,4	script	Pintados Manager#pin	894,{
	if (callfunc("F_GM_NPC",1854,0) == 1) {
		mes "Bingo!";
		next;
	} else {
		mes "Error occurred.";
		close;
	}
	mes "Hi, I'm the Pintados Festival Manager. Please select an item.";
	mes "Time Value: ("+$malaya_pintados_00+"/344)";
	mes "Lesser Agimat Value: ("+$malaya_pintados_01+"/1,000)";
	mes "Cross Value: ("+$malaya_pintados_02+"/1,000)";
	mes "Dyestuffs Value: ("+$malaya_pintados_03+"/300)";
	mes "Recent Tattoo Creator: "+$malaya_pintados_04$;
	next;
	switch(select("Eastern Medicine Button ? Start & End:Detail Button ? Adjust Value:Start Timer:End Timer")) {
	case 1:
		mes "This is the Eastern Medicine Control Button.";
		mes "You can set the Start or End values for the festival.";
		next;
		switch(select("Start Pintados Festival:End Pintados Festival:NPC_ON:NPC_OFF")) {
		case 1:
			set $malaya_pintados_00,1;
			donpcevent "Pintados Manager#pin::OnEnable";
			mes "Start the Pintados Festival.";
			close;
		case 2:
			donpcevent "Pintados Manager#pin::OnDisable";
			mes "End the Pintados Festival.";
			close;
		case 3:
			donpcevent "Pintados Manager#pin::OnEnableNPC";
			mes "Add an NPC.";
			close;
		case 4:
			donpcevent "Pintados Manager#pin::OnDisableNPC";
			mes "Remove an NPC.";
			close;
		}
	case 2:
		mes "Adjust the global value. Please select the value to adjust.";
		next;
		while(1) {
			switch(select("Complete Adjustment:Time ("+$malaya_pintados_00+"):Lesser Agimat ("+$malaya_pintados_01+"):Silver Cross ("+$malaya_pintados_02+"):Dyestuffs ("+$malaya_pintados_03+")")) {
			case 1:
				mes "Completed global adjustment.";
				close;
			case 2:
				mes "Adjust Time [0~344]";
				mes "Global Increase by 1/30 min.";
				mes "1 - 49 -> Day 1";
				mes "50 - 98 -> Day 2";
				mes "99 - 147 -> Day 3";
				mes "148 - 196 -> Day 4";
				mes "197 - 245 -> Day 5";
				mes "246 - 294 -> Day 6";
				mes "295 - 343 -> Day 7";
				mes "Global 1 = 1 hr.";
				next;
				input .@input;
				if (.@input < 0 || .@input > 344)
					close;
				set $malaya_pintados_00, .@input;
				break;
			case 3:
				mes "Adjust the accumulated value for the Lesser Agimat.";
				mes "Values can be adjusted between 0 to 1000.";
				next;
				input .@input;
				if (.@input < 0 || .@input > 1000)
					close;
				set $malaya_pintados_01, .@input;
				break;
			case 4:
				mes "Adjust the accumulated value of the Silver Cross.";
				mes "Values can be adjusted between 0 to 1000.";
				next;
				input .@input;
				if (.@input < 0 || .@input > 1000)
					close;
				set $malaya_pintados_02, .@input;
				break;
			case 5:
				mes "Adjust the accumulated value for the Dyestuff.";
				mes "Values can be adjusted between 0 to 300.";
				next;
				input .@input;
				if (.@input < 0 || .@input > 300)
					close;
				set $malaya_pintados_03, .@input;
				break;
			}
			mes "Time Value: ("+$malaya_pintados_00+"/344)";
			mes "Lesser Agimat Value: ("+$malaya_pintados_01+"/1,000)";
			mes "Cross Value: ("+$malaya_pintados_02+"/1,000)";
			mes "Dyestuffs Value: ("+$malaya_pintados_03+"/300)";
			mes "This is the current value. Do you want to adjust it?";
			next;
		}
	case 3:
		initnpctimer;
		break;
	case 4:
		stopnpctimer;
		break;
	}
	end;

// Moved to individual NPCs for smoother processing.
OnInit:
	if ($malaya_pintados_00 > 0) {
		// donpcevent "Pintados Manager#pin::OnEnableNPC";
		initnpctimer;// unoffical fix
	}
	end;

OnTimer1800000:
	if ($malaya_pintados_00 > 0 && $malaya_pintados_00 < 344) {
		set $malaya_pintados_00,$malaya_pintados_00+1;
		initnpctimer;
	} else {
		set $malaya_pintados_00,0;
		donpcevent "Pintados Manager#pin::OnDisable";
	}
	end;
OnEnable:
	initnpctimer;
	donpcevent "Pintados Manager#pin::OnEnableNPC";
	announce "The 'Pintados Festival' will be held for a week in Baryo Mahiwaga.",bc_all,"0xFB9D04",FW_NORMAL,12;
	end;
OnDisable:
	stopnpctimer;
	set $malaya_pintados_00,0;
	set $malaya_pintados_01,0;
	set $malaya_pintados_02,0;
	set $malaya_pintados_03,0;
	donpcevent "Pintados Manager#pin::OnDisableNPC";
	announce "The 'Pintados Festival' ended with great success.",bc_all,"0xFB9D04",FW_NORMAL,12;
	end;
OnEnableNPC:
	set .@str$, "::OnEnable";
OnDisableNPC:
	if (.@str$ == "")
		set .@str$, "::OnDisable";
	donpcevent "Tourist#pin01"+.@str$;
	donpcevent "Tourist#pin02"+.@str$;
	donpcevent "Tourist#pin03"+.@str$;
	donpcevent "Young Tattooist#pin04"+.@str$;
	donpcevent "Tourist#pin05"+.@str$;
	donpcevent "Drumming Young Man#pin06"+.@str$;
	donpcevent "Drumming Young Man#pin07"+.@str$;
	donpcevent "Drumming Young Man#pin08"+.@str$;
	donpcevent "Beat Catching Boy#pin09"+.@str$;
	donpcevent "Beat Catching Boy#pin10"+.@str$;
	donpcevent "Beat Catching Boy#pin11"+.@str$;
	end;
}

ma_fild01,179,260,2	script	Festival Helper Boy#pin	577,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 1000) {
		mes "Cannot proceed because you have too many items in your possession.";
		close;
	}
	if ($malaya_pintados_00 == 0) {
		if ($malaya_pintados_01 > 999 && $malaya_pintados_02 > 999 && $malaya_pintados_03 > 299) {
			set $malaya_pintados_00,1;
			donpcevent "Pintados Manager#pin::OnEnable";
			emotion ET_THROB;
			mes "[Isco]";
			mes "Many adventurers helped find festival items that I returned to the village.";
			next;
			emotion ET_DELIGHT;
			mes "[Isco]";
			mes "He he... Now we can hold the '^7A96E0Pintados Festival^000000'.";
			close;
		}
		// fall through
	} else {
		mes "[Isco]";
		mes "He he... The fun '^7A96E0Pintados Festival^000000' is in full swing.";
		next;
		if ($malaya_pintados_00 > 0 && $malaya_pintados_00 < 50) {
			emotion ET_DELIGHT;
			mes "[Isco]";
			mes "Today's the first day of the '^7A96E0Pintados Festival^000000'. The festival is held for 7 days, so have fun.";
			close;
		} else if ($malaya_pintados_00 > 49 && $malaya_pintados_00 < 99) {
			mes "[Isco]";
			mes "Oh! Did you know?";
			mes "Village tattooists draw tattoos only during the '^7A96E0Pintados Festival^000000'.";
			close;
		} else if ($malaya_pintados_00 > 98 && $malaya_pintados_00 < 148) {
			mes "[Isco]";
			mes "Today's the third day of the '^7A96E0Pintados Festival^000000'.";
			next;
			mes "[Isco]";
			mes "Villagers say that an adventurer named "+$malaya_pintados_04$+" got a tattoo at the festival.";
			close;
		} else if ($malaya_pintados_00 > 147 && $malaya_pintados_00 < 197) {
			mes "[Isco]";
			mes "Villagers say that an adventurer named "+$malaya_pintados_04$+" got a tattoo at the festival.";
			next;
			mes "[Isco]";
			mes "The Tattooist is scary and doesn't draw tattoos for just anyone so the adventurer must be special.";
			close;
		} else if ($malaya_pintados_00 > 196 && $malaya_pintados_00 < 246) {
			mes "[Isco]";
			mes "An adventurer named "+$malaya_pintados_04$+" is famous in the village.";
			next;
			mes "[Isco]";
			mes "Have you every seen ^FF8440Bakonawa^000000, the monster known to swallow the moon? They say he is really ferocious.";
			close;
		} else if ($malaya_pintados_00 > 245 && $malaya_pintados_00 < 295) {
			emotion ET_CRY;
			mes "[Isco]";
			mes "I'm so sad. Many adventurers helped to hold the '^7A96E0Pintados Festival^000000' and now only one day is left.";
			close;
		} else {
			emotion ET_CRY;
			mes "[Isco]";
			mes "Oh gosh! It's already the last day of the '^7A96E0Pintados Festival^000000'. Can't believe there won't be more festivities.";
			close;
		}
	}
	emotion ET_CONFUSE;
	mes "[Isco]";
	mes "Oh no. What will we do with the festival coming to an end.";
	next;
	switch(select("What is it?:How many did you collect?:Brought back a lost belonging.")) {
	case 1:
		mes "[Isco]";
		mes "There is a traditional festival held since ancient times";
		mes "in Baryo Mahiwaga called the '^7A96E0Pintados Festival^000000'.";
		next;
		emotion ET_OTL;
		mes "[Isco]";
		mes "I don't think I'll make it to the festival this time.";
		next;
		select("Why?");
		mes "[Isco]";
		mes "I was going back to the village delivering 1000 Lesser Agimats, 1000 Silver Crosses, and 300 Dyestuffs as an errand from Port Malaya.";
		next;
		mes "[Isco]";
		mes "But '^FF8440Bongisungisu^000000' appeared out of nowhere and took the items away from me.";
		next;
		select("Are you hurt?");
		emotion ET_OHNO;
		mes "[Isco]";
		mes "Fortunately not.";
		next;
		mes "[Isco]";
		mes "But I'm in deep trouble. The '^7A96E0Pintados Festival^000000' can't be held without those items. What should I do.";
		close;
	case 2:
		mes "[Isco]";
		mes "Many adventurers are helping out but only collected...";
		next;
		mes "[Isco]";
		mes "Lesser Agimat "+$malaya_pintados_01+", Silver Cross "+$malaya_pintados_02+", Dyestuff "+$malaya_pintados_03+" so far.";
		next;
		emotion ET_OHNO;
		mes "[Isco]";
		mes "Sigh... We are still short of materials to start the '^7A96E0Pintados Festival^000000'.";
		close;
	case 3:
		set .@str$, (Sex == SEX_MALE)?"Bro":"Sis";
		break;
	}
	emotion ET_THROB;
	mes "[Isco]";
	mes "Oh~ Really? Wow!";
	mes "Thanks! "+strcharinfo(0)+" "+.@str$+"!!";
	mes "He he. What did you bring?";
	next;
	set .@i, select(
		"Lesser Agimat (^FF0000"+(($malaya_pintados_01 > 999)?"Collection complete":(1000 - $malaya_pintados_01)+" short")+"^000000):"+
		"Silver Cross (^FF0000"+(($malaya_pintados_02 > 999)?"Collection complete":(1000 - $malaya_pintados_02)+" short")+"^000000):"+
		"Dyestuff (^FF0000"+(($malaya_pintados_03 > 299)?"Collection complete":(300 - $malaya_pintados_03)+" short")+"^000000)"
	);
	switch(.@i) {
	case 1:
		set .@item,6497; //Lesser_Agimat
		set .@name$,"Lesser Agimats";
		set .@total,1000;
		break;
	case 2:
		set .@item,6502; //Silver_Cross
		set .@name$,"Silver Crosses";
		set .@total,1000;
		break;
	case 3:
		setarray .@items[0],975,976,978,979,980,981,982,983;
		set .@name$,"Dyestuffs";
		set .@total,300;
		break;
	}
	mes "[Isco]";
	mes "Wow! "+.@str$+" You've brought "+.@name$+"!";
	next;
	mes "[Isco]";
	mes "Wait. One... two...";
	if (getd("$malaya_pintados_0"+.@i) >= .@total) {
		mes "Eh... oh? I already have all the "+.@name$+" I need. "+.@str$+"! But thank you for helping.";
		close;
	}
	if (.@i < 3) {
		mes "I am "+(.@total - getd("$malaya_pintados_0"+.@i))+" short of "+.@name$+". How many did you bring?";
		next;
		switch(select("One?!:Enter quantity.")) {
		case 1:
			set .@amount,1;
			mes "[Isco]";
			mes "He he... You've brought back one.";
			next;
			break;
		case 2:
			mes "[Isco]";
			mes "He he... I'm slow with numbers. I get lost when it's over 50. How many will you give me?";
			next;
			input .@amount;
			if (.@amount < 1 || .@amount > 50) {
				mes "[Isco]";
				mes "Sigh~ I'm lost! I can't count if the numbers are weird.";
				close;
			}
			break;
		}
		if (countitem(.@item) < .@amount) {
			mes "[Isco]";
			mes "Sigh~ "+.@str$+"! Where is the "+getitemname(.@item)+"?";
			close;
		}
	} else {
		mes "I am "+(.@total - getd("$malaya_pintados_0"+.@i))+" short of Dyestuffs. What kind of Dyestuff did you bring?";
		next;
		for(set .@j,0; .@j<getarraysize(.@items); set .@j,.@j+1)
			set .@menu$, .@menu$+getitemname(.@items[.@j])+" (^FF0000"+countitem(.@items[.@j])+"^000000):";
		set .@item, .@items[select(.@menu$)-1];
		if (countitem(.@item) == 0) {
			mes "[Isco]";
			mes "Sigh~ You don't have any "+getitemname(.@item)+".";
			close;
		}
		mes "[Isco]";
		mes .@str$+"! How many "+ getitemname(.@item) +" can you give me from the "+countitem(.@item)+" you have?";
		next;
		switch(select("Enter Quantity:All")) {
		case 1:
			mes "[Isco]";
			mes "He he... I'm slow with numbers. I get lost when it's over 50. How many will you give me?";
			next;
			input .@amount;
			if (.@amount < 1 || .@amount > 50) {
				mes "[Isco]";
				mes "Sigh~ I told you I'm not good with numbers.";
				close;
			}
			break;
		case 2:
			set .@amount, countitem(.@item);
			break;
		}
		if (countitem(.@item) < .@amount) {
			mes "[Isco]";
			mes "Sigh... I'm short of "+getitemname(.@item)+".";
			close;
		}
	}
	delitem .@item,.@amount;
	setd "$malaya_pintados_0"+.@i, getd("$malaya_pintados_0"+.@i)+.@amount;
	set .@amount_left, .@total - getd("$malaya_pintados_0"+.@i);
	mes "[Isco]";
	mes "He he... Thanks. "+.@str$+"!";
	if (.@amount_left <= 0)
		mes "Whoa! We've collected all the "+.@name$+" we need. Happy~!";
	else
		mes "I only need "+.@amount_left+" more "+.@name$+".";
	close;
}

ma_fild01,172,223,6	script	Tattooist#pin	574,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 1000) {
		mes "Cannot proceed because you have too many items in your possession.";
		close;
	}
	emotion ET_QUESTION;
	mes "[Tattooist]";
	mes "Why do you want a Tattoo?";
	next;
	switch(select("What is a Tattoo?:I'm curious about the effect of Tattoos.:I need a Tattoo.")) {
	case 1:
		mes "[Tattooist]";
		mes "A Tattoo of a powerful monster is said to increase the ability of the holder.";
		next;
		select("Awesome. How can I get one?");
		mes "[Tattooist]";
		mes "Drawing a Tattoo is a very holy task.";
		next;
		mes "[Tattooist]";
		mes "10 Ancient Grudges to protect me while I draw Tattoos.";
		next;
		mes "[Tattooist]";
		mes "1 Doll that looks like a powerful monster.";
		next;
		mes "[Tattooist]";
		mes "And last but not least, 1 Spirit Piece to imbue the energy of a powerful monster into the Tattoo.";
		next;
		select("What kind of Tattoo will you draw?");
		mes "[Tattooist]";
		mes "I can draw 3 kinds of Tattoos.";
		next;
		mes "[Tattooist]";
		mes "Bangungot Agimat Tattoo for a powerful monster that comes from an old gigantic tree in Port Malaya.";
		next;
		mes "[Tattooist]";
		mes "Bakonawa Agimat Tattoo for a huge monster that can swallow the moon.";
		next;
		mes "[Tattooist]";
		mes "Buwaya Agimat Tattoo for a giant alligator that kidnaps people.";
		next;
		select("Where can I get the Spirit Pieces and Doll?");
		mes "[Tattooist]";
		mes "You can get these powerful items from Buwaya, Bangungot, and Bakonawa themselves but it won't be an easy task.";
		next;
		mes "[Tattooist]";
		mes "This holy task isn't done every day. Tattoos are drawn only during the '^7A96E0Pintados Festival^000000'.";
		close;
	case 2:
		mes "[Tattooist]";
		mes "Which Tattoo's effect are you curious about?";
		next;
		while(1) {
			switch (select("Bangungot Agimat Tattoo:Buwaya Agimat Tattoo:Bakonawa Agimat Tattoo:I have no questions.")) {
			case 1:
				mes "[Tattooist]";
				mes "Need 10 Ancient Grudges, 1 Piece of Bangungot's Spirit, and 1 Bangungot Doll to create";
				next;
				mes "[Tattooist]";
				mes "The Bangungot Agimat Tattoo holds the energy of an old gigantic tree in Port Malaya.";
				next;
				mes "[Tattooist]";
				mes "Increases the effect of healing others by 4% and healing from others by 7%.";
				next;
				break;
			case 2:
				mes "[Tattooist]";
				mes "Need 10 Ancient Grudges, 1 Piece of Buwaya's Spirit, and 1 Buwaya Doll to create";
				next;
				mes "[Tattooist]";
				mes "The Buwaya Agimat Tattoo contains the energy from a giant alligator.";
				next;
				mes "[Tattooist]";
				mes "Increases MATK by +7% and decreases Fixed Casting by 7%.";
				next;
				break;
			case 3:
				mes "[Tattooist]";
				mes "Need 10 Ancient Grudges, 1 Piece of Bakonawa's Spirit, and 1 Bakonawa Doll to create";
				next;
				mes "[Tattooist]";
				mes "The Bakonawa Agimat Tattoo holds the energy from a gigantic monster that can swallow the moon.";
				next;
				mes "[Tattooist]";
				mes "Increases ATK by +7% and ASPD by 10%.";
				next;
				break;
			case 4:
				mes "[Tattooist]";
				mes "Looks like you've got all the answers. Hope you enjoy your journey.";
				close;
			}
			mes "[Tattooist]";
			mes "Do you have any questions about other Tattoo effects?";
			next;
		}
	case 3:
		break;
	}
	if ($malaya_pintados_00 == 0) {
		mes "[Tattooist]";
		mes "The holy task of drawing Tattoos is only done during the '^7A96E0Pintados Festival^000000'. Sorry but looks like the festival is not on.";
		close;
	}
	mes "[Tattooist]";
	mes "You've come right on time during the '^7A96E0Pintados Festival^000000'.";
	next;
	mes "[Tattooist]";
	mes "There is no time like during the holy '^7A96E0Pintados Festival^000000' to draw Tattoos.";
	next;
	mes "[Tattooist]";
	mes "The festival doesn't last long so I should start drawing. What Tattoo do you need?";
	next;
	switch(select("I will think it over.:Bangungot Agimat Tattoo:Buwaya Agimat Tattoo:Bakonawa Agimat Tattoo")) {
	case 1:
		mes "[Tattooist]";
		mes "Hope you enjoy the '^7A96E0Pintados Festival^000000'.";
		close;
	case 2:
		set .@tattoo,2911; //Bangungot_Tattoo
		set .@doll,6517; //Bangungot_Doll
		set .@spirit,6524; //Bangungot_Spirit_Piece
		set .@name$,"Bangungot";
		break;
	case 3:
		set .@tattoo,2907; //Buwaya_Tattoo
		set .@doll,6518; //Buwaya_Doll
		set .@spirit,6525; //Buwaya_Spirit_Piece
		set .@name$,"Buwaya";
		break;
	case 4:
		set .@tattoo,2910; //Bakonawa_Tattoo
		set .@doll,6516; //Bakonawa_Doll
		set .@spirit,6523; //Bakonawa_Spirit_Piece
		set .@name$,"Bakonawa";
		break;
	}
	if (countitem(6499) < 10 || countitem(.@spirit) == 0 || countitem(.@doll) == 0) {
		mes "[Tattooist]";
		mes "I think you are short on materials.";
		mes "Need 10 Ancient Grudges, 1 Piece of "+.@name$+"'s Spirit, and 1 "+.@name$+" Doll to create a ^EE1D11"+.@name$+" Agimat Tattoo^000000.";
		close;
	}
	emotion ET_SPARK;
	mes "[Tattooist]";
	mes "The materials are full with holy energy. I'm sure we'll get a great Tattoo using these.";
	next;
	mes "[Tattooist]";
	mes "Please don't interrupt while I'm working on drawing a holy Tattoo if you want it to come out right.";
	next;
	mes "The Tattooist placed the Ancient Grudges around the workplace.";
	next;
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#01";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#02";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#03";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#04";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#05";
	mes "The Ancient Grudge lit up and tools starts to glow. He smiled satisfyingly at the glowing tools and materials.";
	next;
	mes "And then "+.@name$+" stared intensely at the doll as if to remember every detail of it in his head.";
	next;
	if(select("Aren't you going to start?:... ... ..") == 1) {
		emotion ET_FRET;
		delitem 6499,5; //Ancient_Grudge
		mes "[Tattooist]";
		mes "Oh no, now you ruined it.";
		mes "I cannot draw a Tattoo for someone like you who doesn't understand art. You can take back the remaining materials.";
		next;
		mes "Received back 5 Ancient Grudges, "+.@name$+" Doll, and Piece of "+.@name$+"'s Spirit.";
		close;
	}
	emotion ET_STARE;
	mes "Think he will melt the doll with his eyes?";
	next;
	specialeffect EF_SONICBLOWHIT;
	mes "He closed and opened his eyes slowly as if to memorize the doll in his head and then held up a glowing tool to start drawing.";
	next;
	mes "The "+.@name$+" Tattoo was completed almost instantly.";
	next;
	emotion ET_FRET;
	mes "But he kept on looking at each corner of the drawing as if he didn't like some of its details.";
	next;
	if(select("Looks good to me.:... ... ..") == 1) {
		emotion ET_FRET;
		emotion ET_ANGER;
		delitem 6499,5; //Ancient_Grudge
		mes "[Tattooist]";
		mes "Ergh! I told you not to interrupt!";
		next;
		mes "The Tattooist ripped up the drawing irritably.";
		next;
		mes "[Tattooist]";
		mes "I can't continue like this. Maybe another time. You can take back the remaining materials.";
		next;
		mes "Received back 5 Ancient Grudges, "+.@name$+" Doll, and Piece of "+.@name$+"'s Spirit.";
		close;
	}
	mes "He looked at the drawing intensely for a long time and then nodded with a satisfied smile.";
	next;
	mes "Looks like he is satisfied with the "+.@name$+" drawing.";
	next;
	emotion ET_HUM;
	mes "But now he is staring at the sky without doing anything else. What is he waiting for?";
	next;
	if(select("When will it be done?:... ... ..") == 1) {
		emotion ET_FRET;
		emotion ET_ANGER;
		delitem 6499,5; //Ancient_Grudge
		mes "[Tattooist]";
		mes "Ergh! I told you not to interrupt!";
		next;
		mes "The Tattooist ripped up the drawing irritably.";
		next;
		mes "[Tattooist]";
		mes "I can't continue like this. Maybe another time. You can take back the remaining materials.";
		next;
		mes "Received back 5 Ancient Grudges, "+.@name$+" Doll, and Piece of "+.@name$+"'s Spirit.";
		close;
	}
	emotion ET_THINK;
	mes "[Tattooist]";
	mes ".";
	next;
	mes "[Tattooist]";
	mes ". .";
	next;
	mes "[Tattooist]";
	mes ". . .";
	next;
	emotion ET_THINK;
	mes "[Tattooist]";
	mes ". . . .";
	next;
	mes "[Tattooist]";
	mes ". . . . .";
	next;
	mes "[Tattooist]";
	mes ". . . . . .";
	next;
	mes "[Tattooist]";
	mes ". . . . . . .";
	next;
	emotion ET_SPARK;
	mes "The Tattooist's eyes started to shine after staring at the sky for awhile, then he broke the Piece of "+.@name$+"'s Spirit with both his hands.";
	next;
	specialeffect EF_DETOXICATION;
	mes "The Piece of "+.@name$+"'s Spirit is shattered into powder. The Tattooist's hands are glowing.";
	next;
	if(select("Why did you break the pieces...:... ... ..") == 1) {
		delitem 6499,5; //Ancient_Grudge
		delitem .@spirit,1;
		emotion ET_FRET;
		emotion ET_ANGER;
		mes "[Tattooist]";
		mes "Ergh! I told you not to interrupt!";
		next;
		mes "The glowing light from his hands faded away. He starred at his hands for a while and then ripped up the drawing irritably.";
		next;
		mes "[Tattooist]";
		mes "I was this close to completing a wonderful piece but you ruined it. Not in a good mood. You can take the remaining materials.";
		next;
		mes "Received back 5 Ancient Grudges and the doll.";
		close;
	}
	mes "He held up the powder in both hands and then blew it onto the drawing.";
	next;
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#01";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#02";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#03";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#04";
	specialeffect EF_FLAMELAUNCHER,AREA,"Ancient Grudge#05";
	mes "All Ancient Grudges started to burn and then the glowing light from the "+.@name$+" drawing faded away.";
	next;
	specialeffect EF_LIGHTSPHERE;
	mes "Blinking light on top of the drawing.";
	next;
	mes "Light faded away and the "+.@name$+" drawing is no longer the simple one it was before.";
	next;
	mes "The "+.@name$+" drawing looks as if it is... alive.";
	next;
	mes "The Tattooist is finally satisfied and is all smiles.";
	next;
	emotion ET_SMILE;
	mes "[Tattooist]";
	mes "Ha ha. It came out great.";
	next;
	delitem 6499,10; //Ancient_Grudge
	delitem .@spirit,1;
	delitem .@doll,1;
	getitem .@tattoo,1;
	set $malaya_pintados_04$, strcharinfo(0);
	mes "[Tattooist]";
	mes "I'm sorry you had to wait for a long time. But it was worth it cause I haven't created a Tattoo of this quality in a long time.";
	next;
	mes "[Tattooist]";
	mes "The ^EE1D11"+.@name$+" Agimat Tattoo^000000 you've waited for is now completed.";
	next;
	mes "[Tattooist]";
	mes "Hope you enjoy the '^7A96E0Pintados Festival^000000'.";
	close;
}

ma_fild01,171,224,0	script	Ancient Grudge#01	139,{ end; }
ma_fild01,173,224,0	duplicate(Ancient Grudge#01)	Ancient Grudge#02	139
ma_fild01,173,223,0	duplicate(Ancient Grudge#01)	Ancient Grudge#03	139
ma_fild01,172,222,0	duplicate(Ancient Grudge#01)	Ancient Grudge#04	139
ma_fild01,171,223,0	duplicate(Ancient Grudge#01)	Ancient Grudge#05	139

ma_fild01,192,200,8	script	Tourist#pin01	58,{
	mes "[Tourist]";
	mes "I came from afar and dropped everything to come and enjoy the 'Pintados Festival'.";
	next;
	mes "[Tourist]";
	mes "I don't regret visiting but...";
	next;
	mes "[Tourist]";
	mes "I don't like the Tattoo I got after all I've gone through to get it.";
	next;
	mes "[Tourist]";
	mes "I've looked at it in the light but I think the Tattooist made a mistake.";
	next;
	mes "[Tourist]";
	mes "This ruined my whole visit.";
	next;
	mes "[Tourist]";
	mes "Tsk!";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Tourist#pin01";
	end;
OnEnable:
	enablenpc "Tourist#pin01";
	end;
OnDisable:
	disablenpc "Tourist#pin01";
	end;
}

ma_fild01,211,200,6	script	Tourist#pin02	775,{
	mes "[Tourist]";
	mes "I heard of the 'Pintados Festival' and came all the way from Kunlun.";
	next;
	mes "[Tourist]";
	mes "Just in case you might think otherwise, this is a mask on my face and not a tattoo.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Tourist#pin02";
	end;
OnEnable:
	enablenpc "Tourist#pin02";
	end;
OnDisable:
	disablenpc "Tourist#pin02";
	end;
}

ma_fild01,251,205,2	script	Tourist#pin03	824,{
	mes "[Tourist]";
	mes "Hey, hear me. This isn't the Tattoo I wanted.";
	next;
	mes "[Tourist]";
	mes "I asked for a Bakonawa Tattoo but the more I look at it, this is Bangungot.";
	next;
	mes "[Tattooist]";
	mes "No... you said that you wanted that one. Don't be so difficult.";
	next;
	mes "[Tourist]";
	mes "Don't you know that customer is king? Huh? Do you want a bad reputation?";
	next;
	mes "[Tattooist]";
	mes "Ugh... Can't believe this.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Tourist#pin03";
	end;
OnEnable:
	enablenpc "Tourist#pin03";
	end;
OnDisable:
	disablenpc "Tourist#pin03";
	end;
}

ma_fild01,249,206,6	script	Young Tattooist#pin04	582,{
	mes "[Tattooist]";
	mes "Ah... I can't work with customers like this.";
	next;
	mes "[Tattooist]";
	mes "How many times do I have to tell you, you said you wanted a Bangungot.";
	next;
	mes "[Tattooist]";
	mes "Ouch, my throat... Shouting will get me nowhere.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Young Tattooist#pin04";
	end;
OnEnable:
	enablenpc "Young Tattooist#pin04";
	end;
OnDisable:
	disablenpc "Young Tattooist#pin04";
	end;
}

ma_fild01,162,235,6	script	Tourist#pin05	815,{
	mes "[Tourist]";
	mes "They say the Pintados Festival will only be held for one week.";
	next;
	mes "[Tourist]";
	mes "I came from Luoyang without knowing about the festival. Must be my lucky day.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Tourist#pin05";
	end;
OnEnable:
	enablenpc "Tourist#pin05";
	end;
OnDisable:
	disablenpc "Tourist#pin05";
	end;
}

ma_fild01,164,234,6	script	Drumming Young Man#pin06	578,{
	mes "ba-dum-DUM- ba-dum-DUM";
	next;
	mes "[Drumming Young Man]";
	mes "The Pintados Festival wouldn't be a festival without a drummer.";
	next;
	mes "[Drumming Young Man]";
	mes "Why don't you join?";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Drumming Young Man#pin06";
	end;
OnEnable:
	enablenpc "Drumming Young Man#pin06";
	end;
OnDisable:
	disablenpc "Drumming Young Man#pin06";
	end;
}

ma_fild01,170,231,4	script	Drumming Young Man#pin07	578,{
	mes "ba-dum-DUM- ba-dum-DUM";
	next;
	mes "[Drumming Young Man]";
	mes "The Pintados from Pintados Festival means painted in our language.";
	next;
	mes "[Drumming Young Man]";
	mes "So that is probably why we have people drawing special Tattoos during the festival.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Drumming Young Man#pin07";
	end;
OnEnable:
	enablenpc "Drumming Young Man#pin07";
	end;
OnDisable:
	disablenpc "Drumming Young Man#pin07";
	end;
}

ma_fild01,164,228,6	script	Drumming Young Man#pin08	578,{
	mes "ba-dum-DUM- ba-dum-DUM";
	next;
	mes "[Drumming Young Man]";
	mes "I don't remember it accurately, but they say the Pintados Festival was to celebrate a rich harvest.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Drumming Young Man#pin08";
	end;
OnEnable:
	enablenpc "Drumming Young Man#pin08";
	end;
OnDisable:
	disablenpc "Drumming Young Man#pin08";
	end;
}

ma_fild01,170,234,4	script	Beat Catching Boy#pin09	577,{
	mes "ba-dum-TSH- ba-dum-TSH-";
	next;
	mes "[Beat Catching Boy]";
	mes "I always get energetic when I hear drums and sticks in a rhythmic beat.";
	next;
	mes "[Beat Catching Boy]";
	mes "ba-dum-TSH- ba-dum-TSH- So much fun!";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "Beat Catching Boy#pin09";
	end;
OnEnable:
	enablenpc "Beat Catching Boy#pin09";
	end;
OnDisable:
	disablenpc "Beat Catching Boy#pin09";
	end;
}

ma_fild01,164,231,6	script	Beat Catching Boy#pin10	577,{
	mes "ba-dum-TSH- ba-dum-TSH-";
	next;
	mes "[Beat Catching Boy]";
	mes "I may be using sticks to catch the beat right now but you never know if I'll grow big enough to play the drums, right?";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc();
	end;
OnEnable:
	enablenpc();
	end;
OnDisable:
	disablenpc();
	end;
}
ma_fild01,170,228,4	duplicate(Beat Catching Boy#pin10)	Beat Catching Boy#pin11	577
